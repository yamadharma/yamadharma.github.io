<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>evergreen | Д. С. Кулябов</title>
    <link>https://yamadharma.github.io/ru/tag/evergreen/</link>
      <atom:link href="https://yamadharma.github.io/ru/tag/evergreen/index.xml" rel="self" type="application/rss+xml" />
    <description>evergreen</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>ru-ru</language><copyright>© 2023 Dmitry S. Kulyabov</copyright><lastBuildDate>Fri, 23 Apr 2021 18:09:00 +0300</lastBuildDate>
    <image>
      <url>https://yamadharma.github.io/media/icon_hu0a661dd90139895e92e2f18ae9404407_611148_512x512_fill_lanczos_center_3.png</url>
      <title>evergreen</title>
      <link>https://yamadharma.github.io/ru/tag/evergreen/</link>
    </image>
    
    <item>
      <title>Установка TeXlive</title>
      <link>https://yamadharma.github.io/ru/post/2021/04/23/install-texlive/</link>
      <pubDate>Fri, 23 Apr 2021 18:09:00 +0300</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2021/04/23/install-texlive/</guid>
      <description>&lt;p&gt;Установка дистрибутива &lt;em&gt;TeXlive&lt;/em&gt;.&lt;/p&gt;
&lt;details class=&#34;toc-inpage d-print-none  &#34; open&gt;
  &lt;summary class=&#34;font-weight-bold&#34;&gt;Содержание&lt;/summary&gt;
  &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#общая-информация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#сетевая-установка-на-один-компьютер&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; Сетевая установка на один компьютер&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#установка-с-помощью-дистрибутивных-скриптов&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.1&lt;/span&gt; Установка с помощью дистрибутивных скриптов&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#установка-с-помощью-менеджера-пакетов&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.2&lt;/span&gt; Установка с помощью менеджера пакетов&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#поддержка-сетевой-установки-на-нескольких-компьютерах&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3&lt;/span&gt; Поддержка сетевой установки на нескольких компьютерах&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#файл-сервер&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.1&lt;/span&gt; Файл-сервер&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#клиенты&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.2&lt;/span&gt; Клиенты&lt;/a&gt;
          &lt;ul&gt;
            &lt;li&gt;&lt;a href=&#34;#установка&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.2.1&lt;/span&gt; Установка&lt;/a&gt;&lt;/li&gt;
          &lt;/ul&gt;
        &lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#обновление&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.3&lt;/span&gt; Обновление&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#обновление-до-следующей-версии-texlive&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4&lt;/span&gt; Обновление до следующей версии TeXlive&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
&lt;/details&gt;

&lt;h2 id=&#34;общая-информация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;TeX Live &amp;mdash; наиболее полный дистрибутив LaTeX, поддерживаемый TeX-сообществом.&lt;/li&gt;
&lt;li&gt;Поддерживает большое количество операционных систем.&lt;/li&gt;
&lt;li&gt;Разрабатывается начиная с 1996 года.&lt;/li&gt;
&lt;li&gt;Был основан на дистрибутиве teTeX.&lt;/li&gt;
&lt;li&gt;MacTeX &amp;mdash; вариант для MacOS.&lt;/li&gt;
&lt;li&gt;Основная страница: &lt;a href=&#34;https://www.tug.org/texlive/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://www.tug.org/texlive/&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;TeX Live &amp;mdash; это дистрибутив с непрерывным обновлением в рамках ежегодной версии дистрибутива.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;сетевая-установка-на-один-компьютер&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; Сетевая установка на один компьютер&lt;/h2&gt;
&lt;h3 id=&#34;установка-с-помощью-дистрибутивных-скриптов&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.1&lt;/span&gt; Установка с помощью дистрибутивных скриптов&lt;/h3&gt;
&lt;p&gt;Ссылки на сайте даны зеркала. Зеркало выбирается автоматически.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Скачивается инсталлятор:
&lt;ul&gt;
&lt;li&gt;Unix: &lt;a href=&#34;https://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Windows: &lt;a href=&#34;https://mirror.ctan.org/systems/texlive/tlnet/install-tl-windows.exe&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://mirror.ctan.org/systems/texlive/tlnet/install-tl-windows.exe&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Для Windows: запускаете исполняемый файл и устанавливаете.&lt;/li&gt;
&lt;li&gt;Для Linux
&lt;ul&gt;
&lt;li&gt;Распаковываете скачанный файл:
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;tar xzvf install-tl-unx.tar.gz.
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;Заходите в распакованный каталог и запускаете установщик:
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;./install-tl
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;Рекомендуется создать ссылки на исполняемые файлы в каталоге &lt;code&gt;/usr/local/bin&lt;/code&gt;. Для этого в консольном варианте утилиты выберите опцию &lt;code&gt;O&lt;/code&gt;, а затем &lt;code&gt;L&lt;/code&gt;. Для возврата в предыдущее меню используйте &lt;code&gt;R&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;установка-с-помощью-менеджера-пакетов&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.2&lt;/span&gt; Установка с помощью менеджера пакетов&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Windows. Используйте пакетный менеджер Chocolatey.
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;choco install texlive
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;поддержка-сетевой-установки-на-нескольких-компьютерах&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3&lt;/span&gt; Поддержка сетевой установки на нескольких компьютерах&lt;/h2&gt;
&lt;h3 id=&#34;файл-сервер&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.1&lt;/span&gt; Файл-сервер&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;На файл-сервере хранится копия архива TeX Live.&lt;/li&gt;
&lt;li&gt;Храним её в каталоге &lt;code&gt;/com/lib/portage/extras/texlive&lt;/code&gt; (естественно, можно выбрать любой).&lt;/li&gt;
&lt;li&gt;Данный каталог расшариваем по NFS (например).&lt;/li&gt;
&lt;li&gt;Сделаем скрипт для ежедневного скачивания:
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#!/bin/bash
# /etc/cron.daily/texlive-rsync-tree

RSYNC_MIRROR=rsync://mirrors.mi.ras.ru/CTAN/

mkdir -p /com/lib/portage/extras/texlive
rsync -rltpD -v -HS --delete ${RSYNC_MIRROR}/systems/texlive/tlnet/ /com/lib/portage/extras/texlive
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;клиенты&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.2&lt;/span&gt; Клиенты&lt;/h3&gt;
&lt;h4 id=&#34;установка&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.2.1&lt;/span&gt; Установка&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;На клиентах вначале устанавливаем вручную. Для этого на клиенте запускаем:
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;/com/lib/portage/extras/texlive/install-tl --repository=/com/lib/portage/extras/texlive
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;обновление&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.3&lt;/span&gt; Обновление&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Для обновления используем на клиенте скрипт:
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#!/bin/bash
# /etc/cron.weekly/texlive-update

if [[ -d /com/lib/portage/extras/texlive ]]
then
    tlmgr update --repository=/com/lib/portage/extras/texlive --self
    tlmgr update --repository=/com/lib/portage/extras/texlive --all
else
    tlmgr update --self
    tlmgr update --all
fi
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;обновление-до-следующей-версии-texlive&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4&lt;/span&gt; Обновление до следующей версии TeXlive&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Рекомендуется установить новую версию TeXlive отдельно.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Но можно сделать ручное обновление, используя уже существующую установку.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Будем считать, что у нас архитектура &lt;code&gt;x86_64-linux&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Если вы установили символические ссылки в системные каталоги (через опцию установщика или &lt;code&gt;tlmgr path add&lt;/code&gt;), удалите их:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;tlmgr path remove
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Перенесите весь каталог TeXlive так, чтобы он соответствовал новой версии, например:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mv /usr/local/texlive/2022/ /usr/local/texlive/2023
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Удалите бекапы пакетов:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;rm /usr/local/texlive/2023/tlpkg/backups/*
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Создайте ссылки на исполняемые файлы:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;/usr/local/texlive/2023/bin/x86_64-linux/tlmgr path add
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Загрузите последнюю версию скрипта &lt;code&gt;update-tlmgr-latest.sh&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd /tmp
wget https://mirror.ctan.org/systems/texlive/tlnet/update-tlmgr-latest.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Запустите скрипт:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sh ./update-tlmgr-latest.sh -- upgrade
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Если вы не хотите использовать репозиторий по умолчанию для загрузки новых файлов, то замените его:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;tlmgr option repository &amp;lt;reponame&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Обновите менеджер пакетов TeXlive:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;tlmgr update --self
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Обновите пакеты TeXlive:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;tlmgr update --all
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Можно пересоздать кэш &lt;em&gt;lualatex&lt;/em&gt; под пользователем:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;rm -rvf ~/.texlive2022
luaotfload-tool -fu
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Если этого не сделать, то кэш будет пересоздан при первом запуске &lt;code&gt;lualatex&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
  </channel>
</rss>
