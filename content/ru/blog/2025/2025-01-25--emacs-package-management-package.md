---
title: "Emacs. Управление пакетами. package"
author: ["Dmitry S. Kulyabov"]
date: 2025-01-25T14:19:00+03:00
lastmod: 2025-01-25T17:17:00+03:00
tags: ["emacs"]
categories: ["computer-science"]
draft: false
slug: "emacs-package-management-package"
---

Emacs. Управление пакетами. package.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Общая информация {#общая-информация}

-   Документация: <https://www.gnu.org/software/emacs/manual/html_node/emacs/Packages.html>
-   Встроенный пакет Emacs для управления пакетами.


## <span class="section-num">2</span> Основные операции {#основные-операции}

-   Обновить пакеты: `package-upgrade`, `package-upgrade-all`.
-   Удалить пакеты: `package-delete`.


## <span class="section-num">3</span> Установка пакетов репозитория {#установка-пакетов-репозитория}

-   По умолчанию `package-install`  загружает пакет из архива и устанавливает его файлы.
-   Можно установить и напрямую из репозитория.
-   Можно установить, используя `package-vc-install`.
-   Просто клонировать источник пакета, не добавляя его в список пакетов: `package-vc-checkout`.


### <span class="section-num">3.1</span> Указание источников пакетов {#указание-источников-пакетов}

-   Чтобы установить пакет из исходного кода, Emacs должен знать, где взять исходный код пакета (например, репозиторий кода) и основные информация о структуре кода (например, основной файл в многофайловый пакет).
-   Emacs может автоматически загрузить спецификацию пакета из указанного архива, если первый аргумент у `package-vc-install` --- это символьное название пакета:
    ```emacs-lisp
    ;; Emacs will download BBDB's specification from GNU ELPA
    (package-vc-install 'bbdb)
    ```

-   Основные ключи для описания пакета:
    -   `:url` (строка) : URL-адрес, указывающий репозиторий, из которого следует получить исходный код пакета;
    -   `:branch` (строка) : версия кода для установки;
    -   `:lisp-dir` (строка) : относительное имя каталога для репозитория; по умолчанию загружаются файлы, которые находятся в корневом каталоге репозитория;
        -   Поскольку указывается только строка (а не список строк), не понятно, как устанавливать пакеты, файлы которых находятся в нескольких каталогах.
        -   Пока использую _straight_ или _quelpa_.
    -   `:main-file` (строка) : основной файл проекта, из которого можно собрать метаданные пакета; если не указано, по умолчанию используется имя пакета;
    -   `:doc` (строка) : имя документации относительно репозитория;
    -   `:vc-backend` (символ) : бэкэнд для загрузки копии репозитория.
-   Пример:
    ```emacs-lisp
    ;; Specifying information manually:
    (package-vc-install
      '(bbdb :url "https://git.savannah.nongnu.org/git/bbdb.git"
             :lisp-dir "lisp"
             :doc "doc/bbdb.texi"))
    ```
