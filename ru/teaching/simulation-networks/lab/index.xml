<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Лабораторные работы | Д. С. Кулябов</title><link>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/</link><atom:link href="https://yamadharma.github.io/ru/teaching/simulation-networks/lab/index.xml" rel="self" type="application/rss+xml"/><description>Лабораторные работы</description><generator>Hugo Blox Builder (https://hugoblox.com)</generator><language>ru-ru</language><copyright>© 2025 Dmitry S. Kulyabov</copyright><lastBuildDate>Thu, 29 Sep 2022 21:19:00 +0300</lastBuildDate><image><url>https://yamadharma.github.io/media/icon_hu_3756dbc1adf0ae14.png</url><title>Лабораторные работы</title><link>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/</link></image><item><title>Введение в Mininet</title><link>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/mininet-intro/</link><pubDate>Thu, 31 Mar 2022 16:10:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/mininet-intro/</guid><description>&lt;p&gt;Введение в средство натурного моделирования &lt;em&gt;Mininet&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id="настройка-стенда-виртуальной-машины-mininet"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Настройка стенда виртуальной машины &lt;em&gt;Mininet&lt;/em&gt;&lt;/h2&gt;
&lt;h3 id="общая-информация"&gt;&lt;span class="section-num"&gt;1.1&lt;/span&gt; Общая информация&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий &lt;em&gt;Mininet&lt;/em&gt;:
&lt;/li&gt;
&lt;li&gt;Образ виртуальной машины:
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="настройка-образа"&gt;&lt;span class="section-num"&gt;1.2&lt;/span&gt; Настройка образа&lt;/h3&gt;
&lt;h4 id="virtualbox"&gt;&lt;span class="section-num"&gt;1.2.1&lt;/span&gt; VirtualBox&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Распакуйте скачанный образ.&lt;/li&gt;
&lt;li&gt;Импортируйте файл &lt;code&gt;.ovf&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Перейдите в настройки.&lt;/li&gt;
&lt;li&gt;Добавьте дополнительный сетевой адаптер &lt;em&gt;host-only network adapter&lt;/em&gt;, который вы можете использовать для входа в образ виртуальной машины.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="подключение-к-виртуальной-машине"&gt;&lt;span class="section-num"&gt;1.3&lt;/span&gt; Подключение к виртуальной машине&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Залогиньтесь в виртуальной машине:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;login: mininet&lt;/li&gt;
&lt;li&gt;password: mininet&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Посмотрите адрес машины:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ifconfig
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Внутренний адрес машины будет иметь вид 192.168.x.y.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Подключитесь к виртуальной машине (из терминала хостовой машины):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh -Y mininet@192.168.x.y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Настройте вход по ключу (см.
):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh-copy-id mininet@192.168.x.y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="настройка-параметров-xterm"&gt;&lt;span class="section-num"&gt;1.4&lt;/span&gt; Настройка параметров &lt;em&gt;XTerm&lt;/em&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;По умолчанию &lt;em&gt;XTerm&lt;/em&gt; использует растровые шрифты, малого кегля.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Предлагается использовать векторные шрифты, кегль увеличить до 12&amp;ndash;16 пунктов.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Для этого добавим в файл конфигурации &lt;code&gt;/etc/X11/app-defaults/XTerm&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;xterm*faceName: Monospace
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;xterm*faceSize: 14
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Здесь выбран системный моноширинный шрифт, кегль шрифта &amp;mdash; 14 пунктов.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="настройка-соединения-x11-для-суперпользователя"&gt;&lt;span class="section-num"&gt;1.5&lt;/span&gt; Настройка соединения X11 для суперпользователя&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;При попытке запуска приложения из-под суперпользователя возникает ошибка:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;X11 connection rejected because of wrong authentication.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ошибка возникает из-за того, что X-соединение выполняется от имени пользователя &lt;code&gt;mininet&lt;/code&gt;, а приложение запускается от имени пользователя &lt;code&gt;root&lt;/code&gt; с использованием &lt;code&gt;sudo&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Для исправления этой ситуации заполним файл полномочий &lt;code&gt;/root/.Xauthority&lt;/code&gt;, используя утилиту &lt;code&gt;xauth&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Для этого скопируем значение куки (MIT magic cookie) пользователя &lt;code&gt;mininet&lt;/code&gt; в файл для пользователя &lt;code&gt;root&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet@mininet-vm:~$ xauth list &lt;span class="nv"&gt;$DISPLAY&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet-vm/unix:10 MIT-MAGIC-COOKIE-1 295acad8e35d17636924c5ab80e8462d
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet@mininet-vm:~$ sudo -i
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet@mininet-vm:~$ xauth list
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;xauth: file /root/.Xauthority does not exist
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;root@mininet-vm:~# xauth add mininet-vm/unix:10 MIT-MAGIC-COOKIE-1 24fa6c77c26e2073d5b0d95e574e2456
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;root@mininet-vm:~# xauth list &lt;span class="nv"&gt;$DISPLAY&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet-vm/unix:10 MIT-MAGIC-COOKIE-1 295acad8e35d17636924c5ab80e8462d
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Значение для &lt;em&gt;MIT-MAGIC-COOKIE&lt;/em&gt; приведено условно.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;После этого должны запускаться графические приложения.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="работа-с-mininet-из-под-windows"&gt;&lt;span class="section-num"&gt;1.6&lt;/span&gt; Работа с Mininet из-под Windows&lt;/h3&gt;
&lt;h4 id="варианты-xserver"&gt;&lt;span class="section-num"&gt;1.6.1&lt;/span&gt; Варианты Xserver&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Использовать можно любой вариант Xserver.&lt;/li&gt;
&lt;/ul&gt;
&lt;!--list-separator--&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;VcXsrv Windows X Server&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;li&gt;Лицензия: GPLv3.&lt;/li&gt;
&lt;li&gt;Компиляция: Visual C++ 2012 Express Edition&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!--list-separator--&gt;
&lt;ol start="2"&gt;
&lt;li&gt;
&lt;p&gt;Xming X Server&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;li&gt;Лицензия:
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Public Domain Release&lt;/em&gt;: MIT&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Website Release&lt;/em&gt;: за загрузку новых выпусков необходимо вносить плату; приобретение лицензии дает пользователю доступ к новым загрузкам в течение одного года.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Компиляция: MinGW, Pthreads-Win32.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="установка-программного-обеспечения"&gt;&lt;span class="section-num"&gt;1.6.2&lt;/span&gt; Установка программного обеспечения&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Установите &lt;code&gt;putty&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;choco install putty
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Установите VcXsrv Windows X Server
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;choco install vcxsrv
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="запуск-xserver"&gt;&lt;span class="section-num"&gt;1.6.3&lt;/span&gt; Запуск Xserver&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Запустите &lt;code&gt;XLaunch&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Выберите опции:
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Multiple windows&lt;/em&gt;;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Display number&lt;/em&gt;: -1;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Start no client&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Можно сохранить параметры, тогда при следующем запуске не нужно будет отмечать эти опции.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="запуск-putty"&gt;&lt;span class="section-num"&gt;1.6.4&lt;/span&gt; Запуск putty&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;При подключении добавьте опцию перенаправления X11:
&lt;ul&gt;
&lt;li&gt;Connection, SSH, X11 : &lt;em&gt;Enable X11 forwarding&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="обновление-версии-mininet"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Обновление версии &lt;em&gt;Mininet&lt;/em&gt;&lt;/h2&gt;
&lt;h3 id="настройка-доступа-к-интернету"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Настройка доступа к интернету&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Добавьте в настройках Virualbox интерфейс &lt;em&gt;NAT&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Загрузите виртуальную машину.&lt;/li&gt;
&lt;li&gt;Залогиньтесь в виртуальной машине:
&lt;ul&gt;
&lt;li&gt;login: mininet&lt;/li&gt;
&lt;li&gt;password: mininet&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Посмотрите адрес машины:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ifconfig
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Должен быть активным адрес NAT: &lt;code&gt;10.0.0.x&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Если вместо этого активен внутренний адрес машины вида &lt;code&gt;192.168.x.y&lt;/code&gt;, то активируйте второй интерфейс наберите:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo dhclient eth1
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ifconfig
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="обновление-версии-mininet"&gt;&lt;span class="section-num"&gt;2.2&lt;/span&gt; Обновление версии &lt;em&gt;Mininet&lt;/em&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Переименуйте предыдущую установку &lt;em&gt;Mininet&lt;/em&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mv ~/mininet ~/mininet.orig
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Скачайте новую версию &lt;em&gt;Mininet&lt;/em&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git clone https://github.com/mininet/mininet.git
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Обновите исполняемые файлы:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/mininet
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo make install
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="основы-работы-в-mininet"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Основы работы в &lt;em&gt;Mininet&lt;/em&gt;&lt;/h2&gt;
&lt;h3 id="работа-с-mininet-с-помощью-командной-строки"&gt;&lt;span class="section-num"&gt;3.1&lt;/span&gt; Работа с Mininet с помощью командной строки&lt;/h3&gt;
&lt;h4 id="вызов-mininet-с-использованием-топологии-по-умолчанию"&gt;&lt;span class="section-num"&gt;3.1.1&lt;/span&gt; Вызов Mininet с использованием топологии по умолчанию&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Чтобы запустить минимальную топологию, введите команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo mn
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Эта команда запускает Mininet с минимальной топологией, состоящей из коммутатора, подключенного к двум хостам.&lt;/li&gt;
&lt;li&gt;Чтобы отобразить список команд интерфейса командной строки Mininet и примеры их использования, введите команду в интерфейсе командной строки Mininet:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;help&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Чтобы отобразить доступные узлы, введите команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;nodes
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Вывод этой команды показывает, что есть два хоста (хост &lt;code&gt;h1&lt;/code&gt; и хост &lt;code&gt;h2&lt;/code&gt;) и коммутатор (&lt;code&gt;s1&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Иногда бывает полезно отобразить связи между устройствами в Mininet, чтобы понять топологию. Введите команду &lt;code&gt;net&lt;/code&gt; в интерфейсе командной строки Mininet, чтобы просмотреть доступные линки:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;net
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Вывод этой команды показывает:
&lt;ul&gt;
&lt;li&gt;Хост &lt;code&gt;h1&lt;/code&gt; подключён через свой сетевой интерфейс &lt;code&gt;h1-eth0&lt;/code&gt; к коммутатору на интерфейсе &lt;code&gt;s1-eth1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Хост &lt;code&gt;h2&lt;/code&gt; подключён через свой сетевой интерфейс &lt;code&gt;h2-eth0&lt;/code&gt; к коммутатору на интерфейсе &lt;code&gt;s1-eth2&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Коммутатор &lt;code&gt;s1&lt;/code&gt;:
&lt;ul&gt;
&lt;li&gt;имеет петлевой интерфейс &lt;code&gt;lo&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;подключается к &lt;code&gt;h1-eth0&lt;/code&gt; через интерфейс &lt;code&gt;s1-eth1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;подключается к &lt;code&gt;h2-eth0&lt;/code&gt; через интерфейс &lt;code&gt;s1-eth2&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Mininet позволяет выполнять команды на конкретном устройстве. Чтобы выполнить команду для определенного узла, необходимо сначала указать устройство, а затем команду, например:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;h1 ifconfig
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Эта команда выполняет команду &lt;code&gt;ifconfig&lt;/code&gt; на хосте &lt;code&gt;h1&lt;/code&gt;. Команда показывает интерфейсы хоста &lt;code&gt;h1&lt;/code&gt;. Показано, что хост &lt;code&gt;h1&lt;/code&gt; имеет интерфейс &lt;code&gt;h1-eth0&lt;/code&gt;, настроенный с IP-адресом &lt;code&gt;10.0.0.1&lt;/code&gt;, и другой интерфейс &lt;code&gt;lo&lt;/code&gt;, настроенный с IP-адресом &lt;code&gt;127.0.0.1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Посмотрите конфигурацию всех узлов.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="проверка-связности"&gt;&lt;span class="section-num"&gt;3.1.2&lt;/span&gt; Проверка связности&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;По умолчанию назначаются IP-адреса &lt;code&gt;10.0.0.1/8&lt;/code&gt; и &lt;code&gt;10.0.0.2/8&lt;/code&gt; узлам &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt; соответственно. Чтобы проверить связь между ними, вы можете использовать команду &lt;code&gt;ping&lt;/code&gt;. Команда &lt;code&gt;ping&lt;/code&gt; работает, отправляя сообщения эхо-запроса протокола управляющих сообщений Интернета (ICMP) на удаленный компьютер и ожидая ответа.&lt;/li&gt;
&lt;li&gt;Введите
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;h1 ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Эта команда проверяет соединение между хостами &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt;. Чтобы остановить тест, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Остановите эмуляцию, набрав:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;exit&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Заметим, что команда &lt;code&gt;sudo mn -c&lt;/code&gt; часто используется в терминале для очистки предыдущего экземпляра Mininet (например, после сбоя).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="построение-и-эмуляция-сети-в-mininet-с-использованием-графического-интерфейса"&gt;&lt;span class="section-num"&gt;3.2&lt;/span&gt; Построение и эмуляция сети в Mininet с использованием графического интерфейса&lt;/h3&gt;
&lt;h4 id="построение-топологии-сети"&gt;&lt;span class="section-num"&gt;3.2.1&lt;/span&gt; Построение топологии сети&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Запустите &lt;em&gt;MiniEdit&lt;/em&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo ~/mininet/mininet/examples/miniedit.py
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Основные кнопки:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Select&lt;/code&gt;: позволяет выбирать/перемещать устройства. Нажатие &lt;code&gt;Del&lt;/code&gt; на клавиатуре после выбора устройства удаляет его из топологии.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Host&lt;/code&gt;: позволяет добавить новый хост в топологию. После нажатия этой кнопки щелкните в любом месте пустого холста, чтобы вставить новый хост.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Switch&lt;/code&gt;: позволяет добавить в топологию новый коммутатор. После нажатия этой кнопки щелкните в любом месте пустого холста, чтобы вставить переключатель.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Link&lt;/code&gt;: соединяет устройства в топологии. После нажатия этой кнопки щелкните устройство и перетащите его на второе устройство, с которым необходимо установить связь.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Run&lt;/code&gt;: запускает эмуляцию. После проектирования и настройки топологии нажмите кнопку запуска.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Stop&lt;/code&gt;: останавливает эмуляцию.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Добавьте два хоста и один коммутатор.&lt;/li&gt;
&lt;li&gt;Настройте IP-адреса на хостах &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt;. IP-адрес хоста &lt;code&gt;h1&lt;/code&gt; &amp;mdash; &lt;code&gt;10.0.0.1/8&lt;/code&gt;, а IP-адрес хоста &lt;code&gt;h2&lt;/code&gt; &amp;mdash; &lt;code&gt;10.0.0.2/8&lt;/code&gt;. Хост можно настроить, удерживая правую кнопку мыши и выбирая свойства на устройстве.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="проверка-связности"&gt;&lt;span class="section-num"&gt;3.2.2&lt;/span&gt; Проверка связности&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Перед проверкой соединения между хостом &lt;code&gt;h1&lt;/code&gt; и хостом &lt;code&gt;h2&lt;/code&gt; необходимо запустить эмуляцию.&lt;/li&gt;
&lt;li&gt;Нажмите кнопку &lt;em&gt;Run&lt;/em&gt;, чтобы запустить эмуляцию. Начнётся эмуляция, и кнопки панели MiniEdit станут серыми, указывая на то, что в настоящее время они отключены.&lt;/li&gt;
&lt;li&gt;Откройте терминал на хосте &lt;code&gt;h1&lt;/code&gt;, удерживая правую кнопку мыши на хосте &lt;code&gt;h1&lt;/code&gt; и выбрав &lt;em&gt;Terminal&lt;/em&gt;. Это открывает терминал на хосте &lt;code&gt;h1&lt;/code&gt; и позволяет выполнять команды на хосте &lt;code&gt;h1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Повторите процедуру на хосте &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;На терминале хоста &lt;code&gt;h1&lt;/code&gt; введите команду &lt;code&gt;ifconfig&lt;/code&gt;, чтобы отобразить назначенные ему IP-адреса. Интерфейс &lt;code&gt;h1-eth0&lt;/code&gt; на хосте &lt;code&gt;h1&lt;/code&gt; должен быть настроен с IP-адресом &lt;code&gt;10.0.0.1&lt;/code&gt; и маской подсети &lt;code&gt;255.0.0.0&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Повторите эти действия на хосте &lt;code&gt;h2&lt;/code&gt;. Его интерфейс &lt;code&gt;h2-eth0&lt;/code&gt; должен быть настроен с IP-адресом &lt;code&gt;10.0.0.2&lt;/code&gt; и маской подсети &lt;code&gt;255.0.0.0&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;На терминале хоста &lt;code&gt;h1&lt;/code&gt; введите команду &lt;code&gt;ping 10.0.0.2&lt;/code&gt;. Эта команда проверяет соединение между хостом &lt;code&gt;h1&lt;/code&gt; и хостом &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Чтобы остановить тест, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Остановите эмуляцию, нажав кнопку &lt;em&gt;Stop&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="автоматическое-назначение-ip-адресов"&gt;&lt;span class="section-num"&gt;3.2.3&lt;/span&gt; Автоматическое назначение IP-адресов&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Ранее мы вручную назначили IP-адреса узлам &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;В качестве альтернативы можно полагаться на Mininet для автоматического назначения IP-адресов.&lt;/li&gt;
&lt;li&gt;Удалите назначенный вручную IP-адрес с хостов &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Нажмите кнопку Edit &amp;gt; Preferences. Базовые значения IP-адресов по умолчанию &amp;mdash; &lt;code&gt;10.0.0.0/8&lt;/code&gt;. Измените это значение на &lt;code&gt;15.0.0.0/8&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Запустите эмуляцию ещё раз, нажав кнопку &lt;em&gt;Run&lt;/em&gt;. Начнётся эмуляция, и кнопки панели MiniEdit будут отключены.&lt;/li&gt;
&lt;li&gt;Откройте терминал на хосте &lt;code&gt;h1&lt;/code&gt;, удерживая правую кнопку мыши на хосте &lt;code&gt;h1&lt;/code&gt; и выбрав &lt;em&gt;Terminal&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Введите команду (чтобы отобразить IP-адреса, назначенные хосту &lt;code&gt;h1&lt;/code&gt;):
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ifconfig
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Интерфейс &lt;code&gt;h1-eth0&lt;/code&gt; на узле &lt;code&gt;h1&lt;/code&gt; теперь имеет IP-адрес &lt;code&gt;15.0.0.1&lt;/code&gt; и маску подсети &lt;code&gt;255.0.0.0&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Вы также можете проверить IP-адрес, назначенный хосту &lt;code&gt;h2&lt;/code&gt;. Соответствующий интерфейс &lt;code&gt;h2-eth0&lt;/code&gt; на хосте &lt;code&gt;h2&lt;/code&gt; должен иметь IP-адрес &lt;code&gt;15.0.0.2&lt;/code&gt; и маску подсети &lt;code&gt;255.0.0.0&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Остановите эмуляцию, нажав кнопку &lt;em&gt;Stop&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="сохранение-и-загрузка-топологии-mininet"&gt;&lt;span class="section-num"&gt;3.2.4&lt;/span&gt; Сохранение и загрузка топологии Mininet&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Часто бывает полезно сохранить топологию сети, особенно когда ее сложность возрастает. MiniEdit позволяет сохранить топологию в файл.&lt;/li&gt;
&lt;li&gt;Чтобы сохранить топологию, нажмите &lt;em&gt;File&lt;/em&gt;, затем &lt;em&gt;Save&lt;/em&gt;. Укажите имя для топологии и сохраните на своем компьютере.&lt;/li&gt;
&lt;li&gt;Сохраняйте в папку &lt;code&gt;~/work&lt;/code&gt;. Для это предварительно создайте её:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir ~/work
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;После сохранения поменяйте права доступа к файлам в этой папке:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo chown -R mininet:mininet ~/work
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Для загрузки топологии нажмите &lt;em&gt;File&lt;/em&gt;, затем &lt;em&gt;Open&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="видео"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Видео&lt;/h2&gt;
&lt;h3 id="youtube"&gt;&lt;span class="section-num"&gt;4.1&lt;/span&gt; Youtube&lt;/h3&gt;
&lt;h4 id="виртуальная-машина-mininet"&gt;&lt;span class="section-num"&gt;4.1.1&lt;/span&gt; Виртуальная машина &lt;em&gt;Mininet&lt;/em&gt;&lt;/h4&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/ZjA4bjiO_DM?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;h4 id="работа-с-mininet-из-под-windows"&gt;&lt;span class="section-num"&gt;4.1.2&lt;/span&gt; Работа с &lt;em&gt;Mininet&lt;/em&gt; из-под Windows&lt;/h4&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/KPQMokxQ4Gw?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;h4 id="основы-работы-в-mininet"&gt;&lt;span class="section-num"&gt;4.1.3&lt;/span&gt; Основы работы в &lt;em&gt;Mininet&lt;/em&gt;&lt;/h4&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/0CT45dLWwJg?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;h4 id="сохранение-топологии-mininet"&gt;&lt;span class="section-num"&gt;4.1.4&lt;/span&gt; Сохранение топологии &lt;em&gt;Mininet&lt;/em&gt;&lt;/h4&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/nllxRRUbWhg?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;h4 id="обновление-версии-mininet"&gt;&lt;span class="section-num"&gt;4.1.5&lt;/span&gt; Обновление версии &lt;em&gt;Mininet&lt;/em&gt;&lt;/h4&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/Au193oRjZhI?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;h3 id="rutube"&gt;&lt;span class="section-num"&gt;4.2&lt;/span&gt; Rutube&lt;/h3&gt;
&lt;h4 id="виртуальная-машина-mininet"&gt;&lt;span class="section-num"&gt;4.2.1&lt;/span&gt; Виртуальная машина &lt;em&gt;Mininet&lt;/em&gt;&lt;/h4&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/3afa7009a47f1f5d44d53e282d0d5fe4"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;h4 id="работа-с-mininet-из-под-windows"&gt;&lt;span class="section-num"&gt;4.2.2&lt;/span&gt; Работа с &lt;em&gt;Mininet&lt;/em&gt; из-под Windows&lt;/h4&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/c98ef1bb6b01c1e463854464e20cd1f3"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;h4 id="основы-работы-в-mininet"&gt;&lt;span class="section-num"&gt;4.2.3&lt;/span&gt; Основы работы в &lt;em&gt;Mininet&lt;/em&gt;&lt;/h4&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/562ef53b91af0f61bc9de32986589d40"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;h4 id="сохранение-топологии-mininet"&gt;&lt;span class="section-num"&gt;4.2.4&lt;/span&gt; Сохранение топологии &lt;em&gt;Mininet&lt;/em&gt;&lt;/h4&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/dc30dc91ca8a64bb41cea98ad6902037"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;h4 id="обновление-версии-mininet"&gt;&lt;span class="section-num"&gt;4.2.5&lt;/span&gt; Обновление версии &lt;em&gt;Mininet&lt;/em&gt;&lt;/h4&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/9e94e56ff5967c0bce0952a738b9761c"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;</description></item><item><title>Mininet. Введение в Iperf</title><link>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/mininet-iperf-intro/</link><pubDate>Thu, 29 Sep 2022 21:11:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/mininet-iperf-intro/</guid><description>&lt;p&gt;Введение в Iperf.&lt;/p&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;h3 id="цели"&gt;&lt;span class="section-num"&gt;1.1&lt;/span&gt; Цели&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Освоить основные приёмы работы с генератором трафика &lt;code&gt;iperf3&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="задачи"&gt;&lt;span class="section-num"&gt;1.2&lt;/span&gt; Задачи&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Подготовить лабораторный стенд.&lt;/li&gt;
&lt;li&gt;В процессе интерактивного эксперимента изучить основные опции и шаблоны использования генератора трафика &lt;code&gt;iperf3&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Построить графики по данным интерактивного эксперимента.&lt;/li&gt;
&lt;li&gt;В процессе воспроизводимого эксперимента получить представление о создании скриптов эксперимента.&lt;/li&gt;
&lt;li&gt;Построить графики по данным воспроизводимого эксперимента.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="основные-термины"&gt;&lt;span class="section-num"&gt;1.3&lt;/span&gt; Основные термины&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Полоса пропускания (Bandwidth) &amp;mdash; это физическое свойство среды передачи, которое зависит от таких факторов, как конструкция и длина провода или волокна.
&lt;ul&gt;
&lt;li&gt;Для сетевых инженеров пропускная способность &amp;mdash; это максимальная скорость передачи данных канала, величина, измеряемая в битах в секунду (бит/с)&lt;/li&gt;
&lt;li&gt;На производительность могут влиять несколько факторов, таких как задержка, потеря пакетов, джиттер и другие.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Пропускная способность (throughput) &amp;mdash; это скорость в битах в секунду, с которой процесс-отправитель может доставлять биты процессу-получателю (при связи между двумя конечными устройствами).
&lt;ul&gt;
&lt;li&gt;Поскольку другие сеансы будут совместно использовать полосу пропускания по сетевому пути и поскольку эти другие сеансы будут повторяться, доступная пропускная способность может колебаться со временем&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Иногда термины &lt;em&gt;пропускная способность&lt;/em&gt; (throughput) и &lt;em&gt;полоса пропускания&lt;/em&gt; (bandwidth) используются взаимозаменяемо.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="iperf3"&gt;&lt;span class="section-num"&gt;1.4&lt;/span&gt; Iperf3&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;iPerf3&lt;/em&gt; &amp;mdash; это инструмент для измерения пропускной способности сети в режиме реального времени.&lt;/li&gt;
&lt;li&gt;Сайт:
.&lt;/li&gt;
&lt;li&gt;Репозиторий:
.&lt;/li&gt;
&lt;li&gt;Лицензия: 3-пунктовая лицензия BSD.&lt;/li&gt;
&lt;li&gt;iPerf3 может работать с протоколами TCP, UDP и SCTP:
&lt;ul&gt;
&lt;li&gt;TCP и SCTP:
&lt;ul&gt;
&lt;li&gt;измерение пропускной способности;&lt;/li&gt;
&lt;li&gt;размер MSS/MTU;&lt;/li&gt;
&lt;li&gt;поддержка размера окна TCP.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;UDP:
&lt;ul&gt;
&lt;li&gt;клиент может создавать потоки UDP с заданной пропускной способностью;&lt;/li&gt;
&lt;li&gt;измерение потери пакетов;&lt;/li&gt;
&lt;li&gt;измерение джиттера задержки;&lt;/li&gt;
&lt;li&gt;поддержка групповой рассылки (multicast).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="графики-по-iperf3"&gt;&lt;span class="section-num"&gt;1.5&lt;/span&gt; Графики по iperf3&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Для построения графиков по iperf3 будем использовать пакет &lt;code&gt;iperf3_plotter&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Репозиторий:
.&lt;/li&gt;
&lt;li&gt;Скрипты:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;preprocessor.sh&lt;/code&gt;: преобразует файл JSON iPerf3 в файл значений, разделённых запятыми (CSV). Использует AWK для форматирования полей.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;plot_iperf.sh&lt;/code&gt;: принимает JSON-файл iPerf3, вызывает препроцессор и вызывает gnuplot для создания выходных PDF-файлов.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="видео-введение-в-iperf-dot-введение"&gt;&lt;span class="section-num"&gt;1.6&lt;/span&gt; Видео: Введение в Iperf. Введение&lt;/h3&gt;
&lt;link rel="stylesheet" href="https://yamadharma.github.io/css/flick/jquery-ui.min.2145606a4147a5c2562a0afa9e996323dcbd14469acf347b81292370e967b906.css" integrity="sha256-IUVgakFHpcJWKgr6npljI9y9FEaazzR7gSkjcOlnuQY="&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;
&lt;/script&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"&gt;
&lt;/script&gt;
&lt;script&gt;
$(function() {
$( "#tabs, #tabs1, #tabs2, #tabs3, #tabs4, #tabs5, #tabs6, #tabs7, #tabs8" ).tabs();
});
&lt;/script&gt;
&lt;div id = "tabs"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href = "#tab-1"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href = "#tab-2"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id ="tab-0"&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/123f83616546c2612cc7acb9a123efae"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-1"&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/wXVasAqXlZU?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-2"&gt;
&lt;/div&gt;
&lt;/div&gt;
tabe widget
&lt;h2 id="подготовка-стенда"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Подготовка стенда&lt;/h2&gt;
&lt;h3 id="лабораторная-топология"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Лабораторная топология&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;В топологии используется сеть 10.0.0.0/8, назначенная Mininet по умолчанию.&lt;/li&gt;
&lt;li&gt;Топология представляет собой коммутатор с двумя подключёнными к нему хостами.&lt;/li&gt;
&lt;li&gt;Для запуска топологии используем параметры командной строки:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo mn --topo&lt;span class="o"&gt;=&lt;/span&gt;single,2 -x
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Посмотрите топологию:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet&amp;gt; net
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet&amp;gt; links
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet&amp;gt; dump
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="рабочие-файлы"&gt;&lt;span class="section-num"&gt;2.2&lt;/span&gt; Рабочие файлы&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Подключимся к виртуальной машине:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh -Y mininet@192.168.x.y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Для рабочих файлов будем использовать каталог &lt;code&gt;~/work/lab_iperf3&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p ~/work/lab_iperf3
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="установка-необходимого-программного-обеспечения"&gt;&lt;span class="section-num"&gt;2.3&lt;/span&gt; Установка необходимого программного обеспечения&lt;/h3&gt;
&lt;h4 id="конфигурация-интерфейсов-виртуальной-машины"&gt;&lt;span class="section-num"&gt;2.3.1&lt;/span&gt; Конфигурация интерфейсов виртуальной машины&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Добавьте к виртуальной машине интерфейс NAT.&lt;/li&gt;
&lt;li&gt;Загрузите виртуальную машину и войдите в учётную запись &lt;code&gt;mininet&lt;/code&gt; (пароль &lt;code&gt;mininet&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Добавьте в файл &lt;code&gt;/etc/netplan/01-netcfg.yaml&lt;/code&gt; второй интерфейс.&lt;/li&gt;
&lt;li&gt;В результате файл примет следующий вид:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;network&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;renderer&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;networkd&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;ethernets&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;eth0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;dhcp4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;yes&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;eth1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;dhcp4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;yes&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Перезагрузите виртуальную машину.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="установка-iperf3"&gt;&lt;span class="section-num"&gt;2.3.2&lt;/span&gt; Установка iperf3&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;По умолчанию стоит генератор трафика &lt;em&gt;iperf2&lt;/em&gt; (команда &lt;code&gt;iperf&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Установим &lt;em&gt;iperf3&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Загрузите виртуальную машину и войдите в учётную запись &lt;code&gt;mininet&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh -Y mininet@192.168.x.y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Обновим список пакетов:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo apt-get update
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Установите iperf3:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo apt-get install iperf3
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="установка-скриптов-для-визуализации-результатов"&gt;&lt;span class="section-num"&gt;2.3.3&lt;/span&gt; Установка скриптов для визуализации результатов&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Для функционирования скриптов необходимы следующие пакеты:
&lt;ul&gt;
&lt;li&gt;gnuplot;&lt;/li&gt;
&lt;li&gt;jq;&lt;/li&gt;
&lt;li&gt;awk.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="установка-iperf3-plotter-на-виртуальную-машину"&gt;&lt;span class="section-num"&gt;2.3.4&lt;/span&gt; Установка &lt;code&gt;iperf3_plotter&lt;/code&gt; на виртуальную машину&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Зайдём на виртуальную машину:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh -Y mininet@192.168.x.y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Обновим репозитории программного обеспечения на виртуальной машине:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo apt-get update
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Установим необходимое программное обеспечение на виртуальную машину:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo apt-get install git jq gnuplot-nox mc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Скачаем &lt;code&gt;iperf3_plotter&lt;/code&gt;. Для этого перейдём во временную рабочую папку и скачаем репозиторий:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /tmp
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git clone https://github.com/ekfoury/iperf3_plotter.git
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Установим &lt;code&gt;iperf3_plotter&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /tmp/iperf3_plotter
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo cp plot_* /usr/bin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo cp *.sh /usr/bin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Скрипты написаны плохо, не работают с путями, имеющими в названии пробелы.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="установка-iperf3-plotter-на-локальный-компьютер"&gt;&lt;span class="section-num"&gt;2.3.5&lt;/span&gt; Установка &lt;code&gt;iperf3_plotter&lt;/code&gt; на локальный компьютер&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Установим &lt;code&gt;iperf3_plotter&lt;/code&gt; (на своём компьютере). Для этого перейдём во временную рабочую папку и скачаем репозиторий:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git clone https://github.com/ekfoury/iperf3_plotter.git
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Заменим жёстко закодированные пути в файлах:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; iperf3_plotter
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sed -i -e &lt;span class="s2"&gt;&amp;#34;s:/usr/bin:~/.local/bin:g&amp;#34;&lt;/span&gt; plot_iperf.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Скопируем нужные файлы в каталог с локальными исполняемыми файлами:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cp plot_* ~/.local/bin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cp *.sh ~/.local/bin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Скрипты написаны плохо, не работают с путями, имеющими в названии пробелы.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="видео-введение-в-iperf-dot-подготовка-стенда"&gt;&lt;span class="section-num"&gt;2.4&lt;/span&gt; Видео: Введение в Iperf. Подготовка стенда&lt;/h3&gt;
&lt;link rel="stylesheet" href="https://yamadharma.github.io/css/flick/jquery-ui.min.2145606a4147a5c2562a0afa9e996323dcbd14469acf347b81292370e967b906.css" integrity="sha256-IUVgakFHpcJWKgr6npljI9y9FEaazzR7gSkjcOlnuQY="&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;
&lt;/script&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"&gt;
&lt;/script&gt;
&lt;script&gt;
$(function() {
$( "#tabs, #tabs1, #tabs2, #tabs3, #tabs4, #tabs5, #tabs6, #tabs7, #tabs8" ).tabs();
});
&lt;/script&gt;
&lt;div id = "tabs"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href = "#tab-1"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href = "#tab-2"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id ="tab-0"&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/78670543a6ed84d93571031fb2a5c247"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-1"&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/HkBk44OZv3c?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-2"&gt;
&lt;/div&gt;
&lt;/div&gt;
tabe widget
&lt;h2 id="интерактивный-эксперимент"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Интерактивный эксперимент&lt;/h2&gt;
&lt;h3 id="параметры-команды-iperf3"&gt;&lt;span class="section-num"&gt;3.1&lt;/span&gt; Параметры команды iperf3&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Пользователь взаимодействует с iPerf3 с помощью команды &lt;code&gt;iperf3&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Основной синтаксис &lt;code&gt;iperf3&lt;/code&gt;, используемый как на клиенте, так и на сервере, выглядит следующим образом:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 &lt;span class="o"&gt;[&lt;/span&gt;-s&lt;span class="p"&gt;|&lt;/span&gt;-c&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; options &lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-s&lt;/code&gt;: запуск сервера;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-c&lt;/code&gt;: запуск клиента.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="запуск-клиента-и-сервера"&gt;&lt;span class="section-num"&gt;3.2&lt;/span&gt; Запуск клиента и сервера&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Запустим &lt;code&gt;mininet&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo mn --topo&lt;span class="o"&gt;=&lt;/span&gt;single,2 -x
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;В терминале &lt;code&gt;h2&lt;/code&gt; запустите сервер:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Теперь сервер прослушивает порт 5201 в ожидании входящих подключений.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;В терминале &lt;code&gt;h1&lt;/code&gt; запустите клиента:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Параметр &lt;code&gt;-c&lt;/code&gt; указывает, что хост &lt;code&gt;h1&lt;/code&gt; настроен как клиент.&lt;/li&gt;
&lt;li&gt;Параметр &lt;code&gt;10.0.0.2&lt;/code&gt; &amp;mdash; это IP-адрес сервера (хост &lt;code&gt;h2&lt;/code&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;После завершения теста отображается сводный отчет как на клиенте, так и на сервере, содержащий следующие данные:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ID&lt;/code&gt;: идентификационный номер соединения.&lt;/li&gt;
&lt;li&gt;Интервал (Interval): временной интервал для периодических отчетов о пропускной способности. По умолчанию временной интервал равен 1 секунде.&lt;/li&gt;
&lt;li&gt;Передача (Transfer): сколько данных было передано за каждый интервал времени.&lt;/li&gt;
&lt;li&gt;Пропускная способность (Bitrate): измеренная пропускная способность в каждом временном интервале.&lt;/li&gt;
&lt;li&gt;Retr: количество повторно переданных TCP-сегментов за каждый временной интервал. Это поле увеличивается, когда TCP-сегменты теряются в сети из-за перегрузки или повреждения.&lt;/li&gt;
&lt;li&gt;Cwnd: указывает размер окна перегрузки в каждом временном интервале. TCP использует эту переменную для ограничения объема данных, которые клиент TCP может отправить до получения подтверждения отправленных данных.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Пользователь также может видеть результаты пропускной способности на стороне сервера.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Суммарные данные на сервере аналогичны данным на стороне клиента и должны интерпретироваться таким же образом.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="запуск-клиента-и-сервера-в-интерфейсе-mininet"&gt;&lt;span class="section-num"&gt;3.3&lt;/span&gt; Запуск клиента и сервера в интерфейсе mininet&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Тоже самое можно выполнить и интерфейсе &lt;em&gt;mininet&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Запустите сервер на хосте &lt;code&gt;h2&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet&amp;gt; h2 iperf3 -s &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Запустите клиента на хосте &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet&amp;gt; h1 iperf3 -c h2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Остановите серверный процесс:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet&amp;gt; h2 killall iperf3
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="установка-периода-времени-передачи"&gt;&lt;span class="section-num"&gt;3.4&lt;/span&gt; Установка периода времени передачи&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;В терминале &lt;code&gt;h2&lt;/code&gt; запустите сервер:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;В терминале &lt;code&gt;h1&lt;/code&gt; запустите клиента с параметром &lt;code&gt;-t&lt;/code&gt;, за которым следует количество секунд:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2 -t &lt;span class="m"&gt;5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="установка-временного-интервала"&gt;&lt;span class="section-num"&gt;3.5&lt;/span&gt; Установка временного интервала&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Настроим клиент для выполнения теста пропускной способности с 2-секундным интервалом времени отсчёта как на клиенте, так и на сервере.&lt;/li&gt;
&lt;li&gt;Опция &lt;code&gt;-i&lt;/code&gt; позволяет установить интервал между отсчётами в секундах.&lt;/li&gt;
&lt;li&gt;В этом случае значение должно быть установлено на 2 секунды как на клиенте, так и на сервере.&lt;/li&gt;
&lt;li&gt;Параметр &lt;code&gt;-i&lt;/code&gt; может быть указан по-разному на клиенте и сервере.&lt;/li&gt;
&lt;li&gt;В терминале &lt;code&gt;h2&lt;/code&gt; запустите сервер:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s -i &lt;span class="m"&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;В терминале &lt;code&gt;h1&lt;/code&gt; запустите клиента с параметром &lt;code&gt;-i&lt;/code&gt;, за которым следует количество секунд:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2 -i &lt;span class="m"&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="изменение-количества-байтов-для-передачи"&gt;&lt;span class="section-num"&gt;3.6&lt;/span&gt; Изменение количества байтов для передачи&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Зададим на клиенте отправку определённого объёма данных путём установки количества байтов для передачи.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;По умолчанию &lt;em&gt;iPerf3&lt;/em&gt; выполняет измерение пропускной способности в течение 10 секунд.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Однако при задании количества данных клиент будет продолжать отправлять пакеты до тех пор, пока не будут отправлены все байты, указанные пользователем.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;В терминале &lt;code&gt;h2&lt;/code&gt; запустите сервер:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;В терминале &lt;code&gt;h1&lt;/code&gt; запустите клиента, задав объём данных:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2 -n 16G
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Параметр &lt;code&gt;-n&lt;/code&gt; указывает объем данных для передачи: 16 Гбайт.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="определение-протокола-транспортного-уровня"&gt;&lt;span class="section-num"&gt;3.7&lt;/span&gt; Определение протокола транспортного уровня&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;По умолчанию измерения пропускной способности проводятся по протоколу TCP, который является протоколом конфигурации по умолчанию.&lt;/li&gt;
&lt;li&gt;Чтобы изменить протокол на UDP, нужно задать опцию &lt;code&gt;-u&lt;/code&gt; на стороне клиента.&lt;/li&gt;
&lt;li&gt;Для протокола SCTP используется опция &lt;code&gt;--sctp&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;iPerf3 автоматически определяет протокол транспортного уровня на стороне сервера.&lt;/li&gt;
&lt;li&gt;В терминале &lt;code&gt;h2&lt;/code&gt; запустите сервер:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;В терминале &lt;code&gt;h1&lt;/code&gt; запустите клиента, задав протокол UDP:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2 -u
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;После завершения теста он покажет следующие сводные данные:
&lt;ul&gt;
&lt;li&gt;ID, интервал, передача, битрейт: то же, что и у TCP.&lt;/li&gt;
&lt;li&gt;Джиттер (Jitter): разница в задержке пакетов.&lt;/li&gt;
&lt;li&gt;Lost/Total: указывает количество потерянных дейтаграмм по сравнению с общим количеством отправленных на сервер (и процентное соотношение).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="изменение-номера-порта"&gt;&lt;span class="section-num"&gt;3.8&lt;/span&gt; Изменение номера порта&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Если нужно измерить пропускную способность определённого порта, используется параметр &lt;code&gt;-p&lt;/code&gt; для настройки клиента и сервера для отправки/получения пакетов или датаграмм через указанный порт.&lt;/li&gt;
&lt;li&gt;В терминале &lt;code&gt;h2&lt;/code&gt; запустите сервер, используя параметр &lt;code&gt;-p&lt;/code&gt;, чтобы указать порт прослушивания:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s -p &lt;span class="m"&gt;3250&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;В терминале &lt;code&gt;h1&lt;/code&gt; запустите клиента, указав порт:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2 -p &lt;span class="m"&gt;3250&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="работа-с-одним-клиентом"&gt;&lt;span class="section-num"&gt;3.9&lt;/span&gt; Работа с одним клиентом&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;По умолчанию сервер iPerf3 продолжает прослушивать входящие соединения.&lt;/li&gt;
&lt;li&gt;Чтобы сервер мог обрабатывать одного клиента, а затем останавливаться, к серверу добавляется параметр &lt;code&gt;-1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;В терминале &lt;code&gt;h2&lt;/code&gt; запустите сервер, используя параметр &lt;code&gt;-1&lt;/code&gt;, чтобы принять только одного клиента:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s -1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;В терминале &lt;code&gt;h1&lt;/code&gt; запустите клиента, указав порт:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;После завершения этого теста сервер немедленно останавливается.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="экспорт-результатов-в-файл-json"&gt;&lt;span class="section-num"&gt;3.10&lt;/span&gt; Экспорт результатов в файл JSON&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;JSON (JavaScript Object Notation, нотация объектов JavaScript) &amp;mdash; это облегченный формат обмена данными.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;iPerf3&lt;/em&gt; позволяет экспортировать результаты теста в файл JSON, что позволяет другим приложениям легко анализировать файл и интерпретировать результаты.&lt;/li&gt;
&lt;li&gt;В терминале &lt;code&gt;h2&lt;/code&gt; запустите сервер:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;В терминале &lt;code&gt;h1&lt;/code&gt; запустите клиента, указав параметр &lt;code&gt;-J&lt;/code&gt; для отображения вывода в формате JSON:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2 -J
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Параметр &lt;code&gt;-J&lt;/code&gt; выводит текст JSON на экран через стандартный вывод (&lt;code&gt;stdout&lt;/code&gt;) после завершения теста.&lt;/li&gt;
&lt;li&gt;Чтобы экспортировать вывод в файл нужно перенаправить стандартный вывод в файл:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2 -J &amp;gt; /home/mininet/work/lab_iperf3/iperf_results.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;chown mininet:mininet /home/mininet/work/lab_iperf3/iperf_results.json
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;После создания файла JSON команда &lt;code&gt;ls&lt;/code&gt; используется для проверки того, что файл создан.&lt;/li&gt;
&lt;li&gt;Команда &lt;code&gt;cat&lt;/code&gt; может использоваться для отображения содержимого файла.&lt;/li&gt;
&lt;li&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="график-результатов-iperf3"&gt;&lt;span class="section-num"&gt;3.11&lt;/span&gt; График результатов iPerf3&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Визуализируем результаты эксперимента.&lt;/li&gt;
&lt;li&gt;Скопируйте файл &lt;code&gt;iperf3_results.json&lt;/code&gt; с виртуальной машины к себе, в рабочий каталог.&lt;/li&gt;
&lt;li&gt;Обращайте внимание, чтобы путь к файлу не содержал пробелов.&lt;/li&gt;
&lt;li&gt;Чтобы сгенерировать выходные данные для файла JSON iPerf3, выполните следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;plot_iperf.sh iperf3_results.json
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Этот сценарий создаёт графики для следующих полей:
&lt;ul&gt;
&lt;li&gt;окно перегрузки (&lt;code&gt;cwnd.pdf&lt;/code&gt;),&lt;/li&gt;
&lt;li&gt;повторная передача (&lt;code&gt;retransmits.pdf&lt;/code&gt;),&lt;/li&gt;
&lt;li&gt;время приема-передачи (&lt;code&gt;RTT.pdf&lt;/code&gt;),&lt;/li&gt;
&lt;li&gt;отклонение времени приема-передачи (&lt;code&gt;RTT_Var.pdf&lt;/code&gt;),&lt;/li&gt;
&lt;li&gt;пропускная способность (&lt;code&gt;throughput.pdf&lt;/code&gt;),&lt;/li&gt;
&lt;li&gt;максимальная единица передачи (&lt;code&gt;MTU.pdf&lt;/code&gt;),&lt;/li&gt;
&lt;li&gt;количество переданных байтов (&lt;code&gt;bytes.pdf&lt;/code&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Сценарий построения также создаёт файл CSV (&lt;code&gt;1.dat&lt;/code&gt;), который может использоваться другими приложениями.&lt;/li&gt;
&lt;li&gt;Эти файлы хранятся в каталоге результатов, созданном в том же каталоге, где был выполнен скрипт.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="видео-введение-в-iperf-dot-интерактивный-эксперимент"&gt;&lt;span class="section-num"&gt;3.12&lt;/span&gt; Видео: Введение в Iperf. Интерактивный эксперимент&lt;/h3&gt;
&lt;link rel="stylesheet" href="https://yamadharma.github.io/css/flick/jquery-ui.min.2145606a4147a5c2562a0afa9e996323dcbd14469acf347b81292370e967b906.css" integrity="sha256-IUVgakFHpcJWKgr6npljI9y9FEaazzR7gSkjcOlnuQY="&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;
&lt;/script&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"&gt;
&lt;/script&gt;
&lt;script&gt;
$(function() {
$( "#tabs, #tabs1, #tabs2, #tabs3, #tabs4, #tabs5, #tabs6, #tabs7, #tabs8" ).tabs();
});
&lt;/script&gt;
&lt;div id = "tabs"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href = "#tab-1"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href = "#tab-2"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id ="tab-0"&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/70f04b82548c7ba4a03a38fce65fbcb4"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-1"&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/REcUWuT8g8E?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-2"&gt;
&lt;/div&gt;
&lt;/div&gt;
tabe widget
&lt;h2 id="воспроизводимый-эксперимент"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Воспроизводимый эксперимент&lt;/h2&gt;
&lt;h3 id="api-mininet"&gt;&lt;span class="section-num"&gt;4.1&lt;/span&gt; API Mininet&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;API Mininet построен на трех основных уровнях:
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Низкоуровневый API&lt;/em&gt;. Низкоуровневый API состоит из базовых узлов и классов ссылок (таких как &lt;code&gt;Host&lt;/code&gt;, &lt;code&gt;Switch&lt;/code&gt;, &lt;code&gt;Link&lt;/code&gt; и их подклассы), которые на самом деле могут быть созданы по отдельности и использоваться для создания сети, но это немного громоздко.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;API среднего уровня&lt;/em&gt;. API среднего уровня добавляет объект Mininet, который служит контейнером для узлов и ссылок. Он предоставляет ряд методов (&lt;code&gt;addHost()&lt;/code&gt;, &lt;code&gt;addSwitch()&lt;/code&gt;, &lt;code&gt;addLink()&lt;/code&gt;) для добавления узлов и ссылок в сеть, а также настройки сети, запуска и завершения работы (&lt;code&gt;start()&lt;/code&gt;, &lt;code&gt;stop()&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Высокоуровневый API&lt;/em&gt;. Высокоуровневый API добавляет абстракцию шаблона топологии (класс &lt;code&gt;Topo&lt;/code&gt;), который предоставляет возможность создавать повторно используемые параметризованные шаблоны топологии. Эти шаблоны можно передать команде mn (через параметр &amp;ndash;custom) и использовать из командной строки.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Когда напрямую управляют узлами и коммутаторами, используется низкоуровневый API.&lt;/li&gt;
&lt;li&gt;Когда запускают или останавливают сеть, используют API среднего уровня (в частности, класс &lt;code&gt;Mininet&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Полные сети могут быть созданы с использованием любого из уровней API, но обычно выбирают либо API среднего уровня (например, &lt;code&gt;Mininet.add*()&lt;/code&gt;), либо API высокого уровня (&lt;code&gt;Topo. add*()&lt;/code&gt;) для создания сетей.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="примеры-создания-сетей-с-использованием-уровней-api-mininet"&gt;&lt;span class="section-num"&gt;4.2&lt;/span&gt; Примеры создания сетей с использованием уровней API Mininet&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Низкоуровневый API. Узлы и ссылки:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Host&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;h2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Host&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h2&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;OVSSwitch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;s1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;inNamespace&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;c0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;c0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;inNamespace&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;Link&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;Link&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setIP&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;10.1/8&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setIP&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;10.2/8&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;c0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;s1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="n"&gt;c0&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ping -c1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IP&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;s1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;c0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;API среднего уровня. Сетевой объект:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;net&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Mininet&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addHost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;h2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addHost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h2&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addSwitch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;s1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;c0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;c0&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addLink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addLink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ping -c1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IP&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;CLI&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;API высокого уровня. Шаблоны топологии:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SingleSwitchTopo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;Topo&lt;/span&gt; &lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Single Switch Topology&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;hosts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addHost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addSwitch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;s1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;hosts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addLink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;net&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Mininet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;topo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;SingleSwitchTopo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;CLI&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;API среднего уровня на самом деле является самым простым и лаконичным для этого примера, поскольку не требует создания класса топологии.&lt;/li&gt;
&lt;li&gt;API низкого и среднего уровня являются гибкими и мощными, но могут быть менее удобными для повторного использования по сравнению с высокоуровневым API &lt;code&gt;Topo&lt;/code&gt; и шаблонами топологии.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="простейшая-топология"&gt;&lt;span class="section-num"&gt;4.3&lt;/span&gt; Простейшая топология&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;На основе скрипта &lt;code&gt;mininet/examples/emptynet.py&lt;/code&gt; создадим простейшую топологию &lt;code&gt;lab_iperf3_topo&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="ch"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;Simple topology
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.net&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Mininet&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.node&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.cli&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;CLI&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.log&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setLogLevel&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;emptyNet&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Create an empty network and add nodes to it.&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Mininet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;controller&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Controller&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;waitConnected&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding controller&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;c0&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding hosts&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addHost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;10.0.0.1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addHost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;10.0.0.2&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding switch&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addSwitch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;s1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Creating links&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addLink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addLink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Starting network&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Running CLI&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;CLI&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Stopping network&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;setLogLevel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;info&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;emptyNet&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Основные элементы:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;addSwitch()&lt;/code&gt;: добавляет коммутатор в топологию и возвращает имя коммутатора;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ddHost()&lt;/code&gt;: добавляет хост в топологию и возвращает имя хоста;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;addLink()&lt;/code&gt;: добавляет двунаправленную ссылку в топологию (и возвращает ключ ссылки, но это не важно). Ссылки в Mininet являются двунаправленными, если не указано иное.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mininet&lt;/code&gt;: основной класс для создания и управления сетью;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;start()&lt;/code&gt;: запускает вашу сеть;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pingAll()&lt;/code&gt;: проверяет подключение, пытаясь заставить все узлы пинговать друг друга;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;stop()&lt;/code&gt;: останавливает вашу сеть;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;net.hosts&lt;/code&gt;: все хосты в сети;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dumpNodeConnections()&lt;/code&gt;: сбрасывает подключения к/от набора узлов;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;setLogLevel( 'info' | 'debug' | 'output' )&lt;/code&gt;: установить уровень вывода Mininet по умолчанию; рекомендуется &lt;code&gt;info&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Создадим в лабораторной работе подкаталог для данного эксперимента:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p ~/work/lab_iperf3/iperf3_topo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Скопируем скрипт на виртуальную машину в каталог лабораторной и запустим:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo python lab_iperf3_topo.py
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;После запуска можно посмотреть элементы топологии:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet&amp;gt; net
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet&amp;gt; links
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mininet&amp;gt; dump
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="методы-настройки-хоста"&gt;&lt;span class="section-num"&gt;4.4&lt;/span&gt; Методы настройки хоста&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Хосты Mininet предоставляют ряд удобных методов настройки сети:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;IP()&lt;/code&gt;: возвращает IP-адрес хоста или определенного интерфейса;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MAC()&lt;/code&gt;: возвращает MAC-адрес хоста или определенного интерфейса;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;setARP()&lt;/code&gt;: добавить статическую запись ARP в кэш ARP хоста;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;setIP()&lt;/code&gt;: установить IP-адрес для хоста или определенного интерфейса;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;setMAC()&lt;/code&gt;: установить MAC-адрес для хоста или определенного интерфейса.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Пример использования в скрипте:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Host&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;has IP address&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IP&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;and MAC address&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MAC&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Задание: Попробуйте изменить приведённый выше код, чтобы он печатал IP-адрес и MAC-адрес каждого хоста.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="настройка-параметров-производительности"&gt;&lt;span class="section-num"&gt;4.5&lt;/span&gt; Настройка параметров производительности&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Mininet предоставляет функции ограничения производительности и изоляции с помощью классов &lt;code&gt;CPULimitedHost&lt;/code&gt; и &lt;code&gt;TCLink&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.node&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;CPULimitedHost&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.link&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;TCLink&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;net&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Mininet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;controller&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Controller&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;CPULimitedHost&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;link&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TCLink&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Основные функции:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;self.addHost(name, cpu=f)&lt;/code&gt;: позволяет указать долю общих ресурсов процессора системы, которая будет выделена виртуальному хосту;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;self.addLink(node1, node2, bw=10, delay='5ms', max_queue_size=1000, loss=10, use_htb=True)&lt;/code&gt;: добавляет двунаправленный канал с характеристиками пропускной способности, задержки и потерь:
&lt;ul&gt;
&lt;li&gt;максимальный размер очереди 1000 пакетов;&lt;/li&gt;
&lt;li&gt;использование ограничителя скорости &lt;em&gt;Hierarchical Token Bucket&lt;/em&gt;;&lt;/li&gt;
&lt;li&gt;эмулятор задержки/потери &lt;code&gt;netem&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;параметр &lt;code&gt;bw&lt;/code&gt; выражается числом в Мбит;&lt;/li&gt;
&lt;li&gt;задержка выражается в виде строки с заданными единицами измерения (например, &lt;code&gt;5ms&lt;/code&gt;, &lt;code&gt;100us&lt;/code&gt;, &lt;code&gt;1s&lt;/code&gt;);&lt;/li&gt;
&lt;li&gt;потери выражаются в процентах (от 0 до 100);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;max_queue_size&lt;/code&gt; выражается в пакетах.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Задание: Измените приведённый выше код, чтобы каналы были 100 Мбит/с с задержкой 75 мс. Рассчитать производительность связи между &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="полный-эксперимент"&gt;&lt;span class="section-num"&gt;4.6&lt;/span&gt; Полный эксперимент&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Сгенерируем трафик и сохраним результат в файл json.&lt;/li&gt;
&lt;li&gt;Зададим скрипт &lt;code&gt;lab_iperf3.py&lt;/code&gt; для полного эксперимента:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="ch"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;Simple experiment.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;Output: iperf_result.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.net&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Mininet&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.node&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.cli&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;CLI&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.log&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setLogLevel&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.link&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;TCLink&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;emptyNet&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Create an empty network and add nodes to it.&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Mininet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;controller&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Controller&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;waitConnected&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;link&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TCLink&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding controller&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;c0&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding hosts&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addHost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;10.0.0.1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addHost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;10.0.0.2&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding switch&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addSwitch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;s1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Creating links&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addLink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;TCLink&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bw&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;delay&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;75ms&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addLink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;TCLink&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bw&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;delay&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;75ms&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Starting network&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Traffic generation&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cmdPrint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;iperf3 -s -D -1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# Wait 10 seconds for servers to start&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cmdPrint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;iperf3 -c&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IP&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;-J &amp;gt; iperf_result.json&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Stopping network&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;setLogLevel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;info&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;emptyNet&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Создадим в лабораторной работе подкаталог для данного эксперимента:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p ~/work/lab_iperf3/iperf3
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Запустите скрипт на виртуальной машине:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo python lab_iperf3.py
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Постройм графики из получившегося файла json:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;plot_iperf.sh iperf_result.json
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Создадим &lt;code&gt;Makefile&lt;/code&gt; для проведения всего эксперимента:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-makefile" data-lang="makefile"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;all&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;iperf_result&lt;/span&gt;.&lt;span class="n"&gt;json&lt;/span&gt; &lt;span class="n"&gt;plot&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;iperf_result.json&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; sudo python lab_iperf3.py
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;plot&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;iperf_result&lt;/span&gt;.&lt;span class="n"&gt;json&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; plot_iperf.sh iperf_result.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;clean&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; -rm -f *.json *.csv
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; -rm -rf results
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="видео-введение-в-iperf-dot-воспроизводимый-эксперимент"&gt;&lt;span class="section-num"&gt;4.7&lt;/span&gt; Видео: Введение в Iperf. Воспроизводимый эксперимент&lt;/h3&gt;
&lt;link rel="stylesheet" href="https://yamadharma.github.io/css/flick/jquery-ui.min.2145606a4147a5c2562a0afa9e996323dcbd14469acf347b81292370e967b906.css" integrity="sha256-IUVgakFHpcJWKgr6npljI9y9FEaazzR7gSkjcOlnuQY="&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;
&lt;/script&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"&gt;
&lt;/script&gt;
&lt;script&gt;
$(function() {
$( "#tabs, #tabs1, #tabs2, #tabs3, #tabs4, #tabs5, #tabs6, #tabs7, #tabs8" ).tabs();
});
&lt;/script&gt;
&lt;div id = "tabs"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href = "#tab-1"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href = "#tab-2"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id ="tab-0"&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/c54df490dcdaba3f0e78ab078148a519"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-1"&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/wpPDMyZbcGU?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-2"&gt;
&lt;/div&gt;
&lt;/div&gt;
tabe widget</description></item><item><title>Mininet. Использование netem (latency, jitter)</title><link>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/mininet-netem-i/</link><pubDate>Sat, 08 Oct 2022 21:33:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/mininet-netem-i/</guid><description>&lt;p&gt;Mininet. Использование netem. Задержки, джтиттер.&lt;/p&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;В этом лабораторном занятии вы познакомитесь с NETEM и объясните, как его можно использовать для имитации сценариев реального мира, при этом контролируя параметры, влияющие на производительность сетей.&lt;/li&gt;
&lt;li&gt;Сетевые параметры включают задержку, дрожание, потерю пакетов, изменение порядка и повреждение (latency, jitter, packet loss, reordering, and corruption).&lt;/li&gt;
&lt;li&gt;Значения корреляции между сетевыми параметрами также будут установлены для обеспечения большей реалистичности сетевой среды.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="цели"&gt;&lt;span class="section-num"&gt;1.1&lt;/span&gt; Цели&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Освоить моделирование задержек и джиттера в сетях.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="задачи"&gt;&lt;span class="section-num"&gt;1.2&lt;/span&gt; Задачи&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;В ходе работы требуется освоить следующие понятия:
&lt;ul&gt;
&lt;li&gt;что есть задержка в сетях и как ее измерить;&lt;/li&gt;
&lt;li&gt;что есть архитектура дисциплин очередей Linux (qdisc);&lt;/li&gt;
&lt;li&gt;освоить эмуляцию глобальных сети (характеризующихся большими задержками) с использованием netem и mininet;&lt;/li&gt;
&lt;li&gt;выполнить измерения после внесения задержек в эмулируемую глобальную сеть;&lt;/li&gt;
&lt;li&gt;развернуть эмулированные глобальные сети, характеризующиеся разными значениями задержки, джиттера и соответствующими значениями корреляции;&lt;/li&gt;
&lt;li&gt;задать разные распределения задержки эмулируемой глобальной сети.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="видео-использование-netem-i-dot-введение"&gt;&lt;span class="section-num"&gt;1.3&lt;/span&gt; Видео: Использование netem I. Введение&lt;/h3&gt;
&lt;link rel="stylesheet" href="https://yamadharma.github.io/css/flick/jquery-ui.min.2145606a4147a5c2562a0afa9e996323dcbd14469acf347b81292370e967b906.css" integrity="sha256-IUVgakFHpcJWKgr6npljI9y9FEaazzR7gSkjcOlnuQY="&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;
&lt;/script&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"&gt;
&lt;/script&gt;
&lt;script&gt;
$(function() {
$( "#tabs, #tabs1, #tabs2, #tabs3, #tabs4, #tabs5, #tabs6, #tabs7, #tabs8" ).tabs();
});
&lt;/script&gt;
&lt;div id = "tabs"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href = "#tab-1"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href = "#tab-2"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id ="tab-0"&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/f252186b156e3f19ea7a982411bfbd62"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-1"&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/aeiuFANn5oY?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-2"&gt;
&lt;/div&gt;
&lt;/div&gt;
tabe widget
&lt;h2 id="теоретические-сведения"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Теоретические сведения&lt;/h2&gt;
&lt;h3 id="дисциплины-организации-очередей-в-linux"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Дисциплины организации очередей в Linux&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;NETEM &amp;mdash; сетевой эмулятор Linux для тестирования производительности реальных приложений в виртуальной сети.&lt;/li&gt;
&lt;li&gt;Виртуальная сеть может воспроизводить глобальные сети в лабораторной среде.&lt;/li&gt;
&lt;li&gt;NETEM позволяет пользователю изменять такие параметры, как задержка, джиттер, потеря пакетов, дублирование и изменение порядка пакетов.&lt;/li&gt;
&lt;li&gt;NETEM реализован в Linux и состоит из двух частей: модуля ядра для организации очередей и утилиты командной строки для его настройки.&lt;/li&gt;
&lt;li&gt;Между протоколом IP и сетевым устройством создаётся очередь с дисциплиной обслуживания.&lt;/li&gt;
&lt;li&gt;Дисциплина обслуживания очередей по умолчанию есть простая очередь пакетов FIFO (первым пришел &amp;mdash; первым обслужен).&lt;/li&gt;
&lt;li&gt;Дисциплина реализуется как объект с двумя интерфейсами.&lt;/li&gt;
&lt;li&gt;Один интерфейс ставит пакеты в очередь для отправки, а другой интерфейс отправляет пакеты на сетевое устройство.&lt;/li&gt;
&lt;li&gt;На основе дисциплины обслуживания очередей принимается решение о том, какие пакеты отправлять, какие пакеты задерживать и какие пакеты отбрасывать.&lt;/li&gt;
&lt;li&gt;Классовая дисциплина организации очередей, такая как NETEM, имеет настраиваемые внутренние модули.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="глобальные-сети-и-задержка"&gt;&lt;span class="section-num"&gt;2.2&lt;/span&gt; Глобальные сети и задержка&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;В сетях есть несколько процессов и устройств, которые способствуют сквозной задержке между узлом-отправителем и узлом-получателем.&lt;/li&gt;
&lt;li&gt;Во многих случаях сквозная задержка определяется задержкой распространения в глобальной сети.&lt;/li&gt;
&lt;li&gt;Рассмотрим два соседних коммутатора A и B, соединённых глобальной сетью.
&lt;ul&gt;
&lt;li&gt;Как только бит передается в глобальную сеть коммутатором А, он должен пройти к коммутатору В.&lt;/li&gt;
&lt;li&gt;Время, необходимое для распространения от начала глобальной сети до коммутатора В, является задержкой распространения.&lt;/li&gt;
&lt;li&gt;Биты распространяются со скоростью канала.&lt;/li&gt;
&lt;li&gt;Скорость распространения зависит от физической среды (оптоволокно, медная витая пара и т. д.) и равно или немного меньше скорости света.&lt;/li&gt;
&lt;li&gt;Задержка распространения есть расстояние между двумя коммутатора, делённое на скорость распространения.&lt;/li&gt;
&lt;li&gt;Как только последний бит пакета передается на коммутатор B, он и все предыдущие биты пакета сохраняются на коммутаторе B.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Сетевые инструменты обычно оценивают задержку для устранения неполадок и измерения производительности.&lt;/li&gt;
&lt;li&gt;Например, оценкой сквозной задержки является время двойного оборота (RTT), которое представляет собой время, необходимое пакету для прохождения от отправителя к получателю, а затем обратно к отправителю.&lt;/li&gt;
&lt;li&gt;RTT включает задержки распространения пакетов, задержки в очереди пакетов в промежуточных маршрутизаторах и коммутаторах и обработку пакетов.&lt;/li&gt;
&lt;li&gt;Если задержка распространения преобладает над другими компонентами задержки (как в случае глобальных сетей), то RTT является хорошей оценкой задержки распространения.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="подготовка-стенда"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Подготовка стенда&lt;/h2&gt;
&lt;h3 id="лабораторная-топология"&gt;&lt;span class="section-num"&gt;3.1&lt;/span&gt; Лабораторная топология&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;В топологии используется сеть 10.0.0.0/8, назначенная Mininet по умолчанию.&lt;/li&gt;
&lt;li&gt;Топология представляет собой коммутатор с двумя подключёнными к нему хостами.&lt;/li&gt;
&lt;li&gt;Для запуска топологии используем параметры командной строки:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo mn --topo&lt;span class="o"&gt;=&lt;/span&gt;single,2 -x
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="рабочие-файлы"&gt;&lt;span class="section-num"&gt;3.2&lt;/span&gt; Рабочие файлы&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Подключимся к виртуальной машине:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh -Y mininet@192.168.x.y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Для рабочих файлов будем использовать каталог &lt;code&gt;~/work/lab_netem_i&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p ~/work/lab_netem_i
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="интерактивный-эксперимент"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Интерактивный эксперимент&lt;/h2&gt;
&lt;h3 id="добавление-изменение-задержки-для-эмуляции-wan"&gt;&lt;span class="section-num"&gt;4.1&lt;/span&gt; Добавление/изменение задержки для эмуляции WAN&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Работа с NETEM осуществляется с помощью утилиты командной строки &lt;code&gt;tc&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Без дополнительных параметров NETEM ведёт себя как базовая очередь FIFO без задержек, потерь, дублирования или переупорядочения пакетов.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Основной синтаксис &lt;code&gt;tc&lt;/code&gt;, используемый с NETEM, следующий:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc &lt;span class="o"&gt;[&lt;/span&gt;add&lt;span class="p"&gt;|&lt;/span&gt;del&lt;span class="p"&gt;|&lt;/span&gt;replace&lt;span class="p"&gt;|&lt;/span&gt;change&lt;span class="p"&gt;|&lt;/span&gt;show&lt;span class="o"&gt;]&lt;/span&gt; dev dev_id root netem opts
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo&lt;/code&gt;: выполнить команду с более высокими привилегиями;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tc&lt;/code&gt;: команда, используемая для взаимодействия с NETEM;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qdisc&lt;/code&gt;: дисциплина очереди (&lt;code&gt;qdisc&lt;/code&gt;) представляет собой набор правил, определяющих порядок, в котором обслуживаются пакеты, поступающие по протоколу IP.
&lt;ul&gt;
&lt;li&gt;Дисциплина очереди применяется к очереди пакетов, чтобы решить, когда отправлять каждый пакет.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[add|del|replace|change|show]&lt;/code&gt; (добавить, удалить, заменить, изменить, показать): операция над &lt;code&gt;qdisc&lt;/code&gt;:
&lt;ul&gt;
&lt;li&gt;чтобы добавить задержку на определённом интерфейсе, применяется операция &lt;code&gt;add&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;чтобы изменить или удалить задержку на определённом интерфейсе, применяется операция &lt;code&gt;change&lt;/code&gt; или &lt;code&gt;del&lt;/code&gt;;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dev_id&lt;/code&gt;: параметр указывает интерфейс, подлежащий эмуляции;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;opts&lt;/code&gt;: параметр указывает величину задержки, потери пакетов, дублирования, повреждения и другие.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="определение-интерфейсов-хостов-h1-и-h2"&gt;&lt;span class="section-num"&gt;4.2&lt;/span&gt; Определение интерфейсов хостов &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Необходимо идентифицировать интерфейсы на подключенных хостах.&lt;/li&gt;
&lt;li&gt;На хосте &lt;code&gt;h1&lt;/code&gt; введите команду &lt;code&gt;ifconfig&lt;/code&gt;, чтобы отобразить информацию, относящуюся к его сетевым интерфейсам и назначенным им IP-адресам.
&lt;ul&gt;
&lt;li&gt;Вывод команды &lt;code&gt;ifconfig&lt;/code&gt; показывает, что хост &lt;code&gt;h1&lt;/code&gt; имеет два интерфейса: &lt;code&gt;h1-eth0&lt;/code&gt; и &lt;code&gt;lo&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Интерфейс &lt;code&gt;h1-eth0&lt;/code&gt; необходимо использовать в &lt;code&gt;tc&lt;/code&gt; при эмуляции WAN.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;На хосте &lt;code&gt;h2&lt;/code&gt; введите команду &lt;code&gt;ifconfig&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Вывод команды &lt;code&gt;ifconfig&lt;/code&gt; показывает, что хост &lt;code&gt;h2&lt;/code&gt; имеет два интерфейса: &lt;code&gt;h2-eth0&lt;/code&gt; и &lt;code&gt;lo&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Интерфейс &lt;code&gt;h2-eth0&lt;/code&gt; необходимо использовать в &lt;code&gt;tc&lt;/code&gt; при эмуляции WAN.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="добавка-задержки-для-интерфейса-подключающегося-к-wan"&gt;&lt;span class="section-num"&gt;4.3&lt;/span&gt; Добавка задержки для интерфейса, подключающегося к WAN&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Сетевые эмуляторы задают задержки на интерфейсе.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Например, задержка, вносимая в интерфейс коммутатора A, который подключён к интерфейсу коммутатора B, может представлять собой задержку распространения WAN, соединяющей оба коммутатора.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;На хосте &lt;code&gt;h1&lt;/code&gt; введите следующую команду:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc add dev h1-eth0 root netem delay 100ms
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo&lt;/code&gt;: выполнить команду с более высокими привилегиями;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tc&lt;/code&gt;: вызвать управление трафиком Linux;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qdisc&lt;/code&gt;: изменить дисциплину очередей сетевого планировщика;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;add&lt;/code&gt;: создать новое правило;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dev h1-eth0&lt;/code&gt;: указать интерфейс, на котором будет применяться правило;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;netem&lt;/code&gt;: использовать эмулятор сети;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;delay 100ms&lt;/code&gt;: задержка ввода 100 мс.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Эта команда добавляет задержку в 100 миллисекунд (мс) только к выходному интерфейсу.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Теперь пользователь может проверить, что соединение от хоста h1 к хосту h2 имеет задержку 100 миллисекунд, используя команду &lt;code&gt;ping&lt;/code&gt; с хоста &lt;code&gt;h1&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Все пакеты были получены успешно (0% потерь пакетов).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Задание: Запишите минимальное, среднее, максимальное и стандартное отклонение времени приёма-передачи (RTT).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Этот сценарий эмулирует задержку в 100 миллисекунд на интерфейсе узла &lt;code&gt;h1&lt;/code&gt;, подключающегося к коммутатору.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Чтобы эмулировать глобальную сеть с двунаправленной задержкой, к соответствующему интерфейсу на хосте &lt;code&gt;h2&lt;/code&gt; также необходимо добавить задержку в 100 миллисекунд.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;В терминале хоста &lt;code&gt;h2&lt;/code&gt; введите следующую команду:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc add dev h2-eth0 root netem delay 100ms
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Проверим, что соединение между хостом &lt;code&gt;h1&lt;/code&gt; и хостом &lt;code&gt;h2&lt;/code&gt; имеет &lt;code&gt;RTT&lt;/code&gt; 200 миллисекунд (100 мс от хоста &lt;code&gt;h1&lt;/code&gt; к хосту &lt;code&gt;h2&lt;/code&gt; плюс 100 мс от хоста &lt;code&gt;h2&lt;/code&gt; к хосту &lt;code&gt;h1&lt;/code&gt;), повторив команду &lt;code&gt;ping&lt;/code&gt; на терминале хоста &lt;code&gt;h1&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Все пакеты были получены успешно (0% потерь пакетов).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Задание: Запишите минимальное, среднее, максимальное и стандартное отклонение времени приёма-передачи (RTT).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="изменение-задержки-в-эмулируемой-глобальной-сети"&gt;&lt;span class="section-num"&gt;4.4&lt;/span&gt; Изменение задержки в эмулируемой глобальной сети&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Изменим задержку со 100 миллисекунд до 50 миллисекунд как для отправителя, так и для получателя. RTT теперь будет 100 миллисекунд.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc change dev h1-eth0 root netem delay 50ms
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Здесь добавлен новый параметр &lt;code&gt;change&lt;/code&gt;, который изменяет ранее установленную задержку на 50 миллисекунд.&lt;/li&gt;
&lt;li&gt;Применим также описанный выше шаг к терминалу хоста &lt;code&gt;h2&lt;/code&gt;, чтобы изменить задержку на 50 мс:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc change dev h2-eth0 root netem delay 50ms
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Теперь можно проверить, что соединение от хоста &lt;code&gt;h1&lt;/code&gt; к хосту &lt;code&gt;h2&lt;/code&gt; имеет задержку 100 миллисекунд, используя команду &lt;code&gt;ping&lt;/code&gt; с терминала хоста &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Все пакеты были получены успешно (0% потерь пакетов).&lt;/li&gt;
&lt;li&gt;Задание: Запишите минимальное, среднее, максимальное и стандартное отклонение времени приёма-передачи (RTT).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="восстановление-исходных-значений--удаление-правил"&gt;&lt;span class="section-num"&gt;4.5&lt;/span&gt; Восстановление исходных значений (удаление правил)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Восстановим конфигурацию по умолчанию как для отправителя, так и для получателя, удалив все правила, применённые к сетевому планировщику интерфейса.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc del dev h1-eth0 root netem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Добавлена новая опция &lt;code&gt;del&lt;/code&gt;, которая удаляет ранее установленные правила для данного интерфейса.&lt;/li&gt;
&lt;li&gt;В результате &lt;code&gt;tc qdisc&lt;/code&gt; восстановит значения по умолчанию для устройства &lt;code&gt;h1-eth0&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Применим те же действия для удаления правил на хосте &lt;code&gt;h2&lt;/code&gt;. В терминале хоста &lt;code&gt;h2&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc del dev h2-eth0 root netem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;В результате дисциплина организации очереди &lt;code&gt;tc&lt;/code&gt; восстановит свои значения по умолчанию для устройства &lt;code&gt;h2-eth0&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Проверим, что соединение между хостом &lt;code&gt;h1&lt;/code&gt; и хостом &lt;code&gt;h2&lt;/code&gt; не имеет явно установленной задержки, используя команду &lt;code&gt;ping&lt;/code&gt; с терминала хоста &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Все пакеты были получены успешно (0% потерь пакетов).&lt;/li&gt;
&lt;li&gt;Задание: Запишите минимальное, среднее, максимальное и стандартное отклонение времени приёма-передачи (RTT).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="добавление-джиттера-в-интерфейс-подключения-к-wan"&gt;&lt;span class="section-num"&gt;4.6&lt;/span&gt; Добавление джиттера в интерфейс подключения к WAN&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;В сетях нет постоянной задержки. Задержка может варьироваться в зависимости от других потоков трафика, конкурирующих за тот же путь.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Джиттер &amp;mdash; это изменение времени задержки.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Параметры задержки описываются средним значением (\(\mu\)), стандартным отклонением (\(\sigma\)) и корреляцией.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;По умолчанию NETEM использует &lt;em&gt;равномерное распределение&lt;/em&gt;, так что задержка находится в пределах \(\mu \pm \sigma\).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Добавим задержку в 100 миллисекунд со случайным отклонением 10 миллисекунд.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;Прежде чем сделать это, необходимо восстановите конфигурацию интерфейсов по умолчанию на узлах &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите команду:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc add dev h1-eth0 root netem delay 100ms 10ms
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Добавленное здесь новое значение представляет джиттер, который определяет вариацию задержки.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Все пакеты, покидающие хост &lt;code&gt;h1&lt;/code&gt; через интерфейс &lt;code&gt;h1-eth0&lt;/code&gt;, будут иметь задержку 100 мс со случайным отклонением ±10 мс.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Можно проверить, что соединение от хоста &lt;code&gt;h1&lt;/code&gt; к хосту &lt;code&gt;h2&lt;/code&gt; имеет задержку 100 мс со случайным отклонением ± 10 мс, с помощью команды &lt;code&gt;ping&lt;/code&gt; на терминале хоста &lt;code&gt;h1&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Все пакеты были получены успешно (0% потерь пакетов).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Задание: Запишите минимальное, среднее, максимальное и стандартное отклонение времени приёма-передачи (RTT).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду, чтобы удалить предыдущие конфигурации:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc del dev h1-eth0 root netem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="добавление-значения-корреляции-для-джиттера-и-задержки"&gt;&lt;span class="section-num"&gt;4.7&lt;/span&gt; Добавление значения корреляции для джиттера и задержки&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Параметр корреляции управляет отношением между последовательными псевдослучайными значениями.&lt;/li&gt;
&lt;li&gt;Добавим задержку в 100 миллисекунд с вариацией ±10 миллисекунд при добавлении значения корреляции.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Прежде чем сделать это, необходимо восстановите конфигурацию интерфейсов по умолчанию на узлах &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt;.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc add dev h1-eth0 root netem delay 100ms 10ms 25%
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Добавленное здесь новое значение представляет собой значение корреляции для джиттера и задержки.&lt;/li&gt;
&lt;li&gt;Все пакеты, покидающие узел устройства &lt;code&gt;h1&lt;/code&gt; на интерфейсе &lt;code&gt;h1-eth0&lt;/code&gt;, будут иметь время задержки 100 мс со случайным отклонением ±10 мс, при этом следующий случайный пакет зависит от предыдущего на 25%.&lt;/li&gt;
&lt;li&gt;Можно проверить соединение между хостами &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt; с помощью команды &lt;code&gt;ping&lt;/code&gt; на терминале хоста &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Все пакеты были получены успешно (0% потерь пакетов).&lt;/li&gt;
&lt;li&gt;Задание: Запишите минимальное, среднее, максимальное и стандартное отклонение времени приёма-передачи (RTT).&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду, чтобы удалить предыдущие конфигурации:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc del dev h1-eth0 root netem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="распределение-задержки"&gt;&lt;span class="section-num"&gt;4.8&lt;/span&gt; Распределение задержки&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;NETEM позволяет пользователю указать распределение, которое описывает, как задержки изменяются в сети.&lt;/li&gt;
&lt;li&gt;Обычно задержки неравномерны, поэтому может быть удобно использовать неравномерное распределение, такое как нормальное, парето или парето-нормальное.&lt;/li&gt;
&lt;li&gt;Можно указать нормальное распределение задержки в эмулируемой сети.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Прежде чем сделать это, необходимо восстановите конфигурацию интерфейсов по умолчанию на узлах &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt;.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc add dev h1-eth0 root netem delay 100ms 20ms distribution normal
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Добавленная здесь новая опция (&lt;code&gt;distribution&lt;/code&gt;) задаёт тип распределения задержки.&lt;/li&gt;
&lt;li&gt;Определим задержку так, чтобы она имела нормальное распределение, что обеспечивает более реалистичную эмуляцию сетей WAN.&lt;/li&gt;
&lt;li&gt;Все пакеты, покидающие хост &lt;code&gt;h1&lt;/code&gt; на интерфейсе &lt;code&gt;h1-eth0&lt;/code&gt;, будут иметь время задержки, которое распределяется в диапазоне 100 мс ± 20 мс.&lt;/li&gt;
&lt;li&gt;Используем команду &lt;code&gt;ping&lt;/code&gt; на терминале хоста &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Все пакеты были получены успешно (0% потерь пакетов).&lt;/li&gt;
&lt;li&gt;Задание: Запишите минимальное, среднее, максимальное и стандартное отклонение времени приёма-передачи (RTT).&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду, чтобы удалить предыдущие конфигурации:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc del dev h1-eth0 root netem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="видео-использование-netem-i-dot-интерактивный-эксперимент"&gt;&lt;span class="section-num"&gt;4.9&lt;/span&gt; Видео: Использование netem I. Интерактивный эксперимент&lt;/h3&gt;
&lt;link rel="stylesheet" href="https://yamadharma.github.io/css/flick/jquery-ui.min.2145606a4147a5c2562a0afa9e996323dcbd14469acf347b81292370e967b906.css" integrity="sha256-IUVgakFHpcJWKgr6npljI9y9FEaazzR7gSkjcOlnuQY="&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;
&lt;/script&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"&gt;
&lt;/script&gt;
&lt;script&gt;
$(function() {
$( "#tabs, #tabs1, #tabs2, #tabs3, #tabs4, #tabs5, #tabs6, #tabs7, #tabs8" ).tabs();
});
&lt;/script&gt;
&lt;div id = "tabs"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href = "#tab-1"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href = "#tab-2"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id ="tab-0"&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/1ea73a09806a25ae20bd3d34ebfb5247"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-1"&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/wEuHronSk8M?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-2"&gt;
&lt;/div&gt;
&lt;/div&gt;
tabe widget
&lt;h2 id="воспроизводимый-эксперимент"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Воспроизводимый эксперимент&lt;/h2&gt;
&lt;h3 id="постановка-задания"&gt;&lt;span class="section-num"&gt;5.1&lt;/span&gt; Постановка задания&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Будем исследовать задержки и построим графики для них.&lt;/li&gt;
&lt;li&gt;Выполните все интерактивные эксперименты в виде воспроизводимых.&lt;/li&gt;
&lt;li&gt;Для каждого эксперимента &lt;code&gt;expname&lt;/code&gt; создайте свой каталог:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p ~/work/lab_netem_i/expname
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;В него мы будем помещать файлы эксперимента.&lt;/li&gt;
&lt;li&gt;Для каждого эксперимента создайте скрипт для проведения эксперимента &lt;code&gt;lab_netem_i.py&lt;/code&gt; и скрипт для визуализации &lt;code&gt;ping_plot&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Кроме визуализации вычислите минимальное, среднее, максимальное и стандартное отклонение времени приёма-передачи.&lt;/li&gt;
&lt;li&gt;Для примера реализуем задание простейшей задержки.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="добавка-задержки-для-интерфейса-подключающегося-к-wan"&gt;&lt;span class="section-num"&gt;5.2&lt;/span&gt; Добавка задержки для интерфейса, подключающегося к WAN&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Создадим каталог &lt;code&gt;simple-delay&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p ~/work/lab_netem_i/simple-delay
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/work/lab_netem_i/simple-delay
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Создадим скрипт для эксперимента &lt;code&gt;lab_netem_i.py&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="ch"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;Simple experiment.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;Output: ping.dat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.net&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Mininet&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.node&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.cli&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;CLI&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.log&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setLogLevel&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;emptyNet&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Create an empty network and add nodes to it.&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Mininet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;controller&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Controller&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;waitConnected&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding controller&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;c0&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding hosts&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addHost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;10.0.0.1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addHost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;10.0.0.2&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding switch&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addSwitch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;s1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Creating links&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addLink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addLink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Starting network&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Set delay&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cmdPrint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tc qdisc add dev h1-eth0 root netem delay 100ms&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cmdPrint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tc qdisc add dev h2-eth0 root netem delay 100ms&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# Wait 10 seconds&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Ping&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cmdPrint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ping -c 100&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IP&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;| grep &amp;#34;time=&amp;#34; | awk &lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;{print $5, $7}&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt; | sed -e &lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;s/time=//g&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt; -e &lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;s/icmp_seq=//g&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt; &amp;gt; ping.dat&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Stopping network&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;setLogLevel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;info&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;emptyNet&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Создадим скрипт для визуализации &lt;code&gt;ping_plot&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#!/usr/bin/gnuplot --persist
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt; terminal png crop
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt; output &lt;span class="s1"&gt;&amp;#39;ping.png&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt; xlabel &lt;span class="s2"&gt;&amp;#34;Sequence number&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt; ylabel &lt;span class="s2"&gt;&amp;#34;Delay (ms)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt; grid
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;plot &lt;span class="s2"&gt;&amp;#34;ping.dat&amp;#34;&lt;/span&gt; with lines
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Зададим права доступа:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;chmod +x ping_plot
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Создадим &lt;code&gt;Makefile&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-makefile" data-lang="makefile"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;all&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ping&lt;/span&gt;.&lt;span class="n"&gt;dat&lt;/span&gt; &lt;span class="n"&gt;ping&lt;/span&gt;.&lt;span class="n"&gt;png&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;ping.dat&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; sudo python lab_netem_i.py
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; sudo chown mininet:mininet ping.dat
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;ping.png&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ping&lt;/span&gt;.&lt;span class="n"&gt;dat&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ./ping_plot
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;clean&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; -rm -f *.dat *.png
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Выполним эксперимент:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;make
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Посмотрите график.&lt;/li&gt;
&lt;li&gt;Вычислите минимальное, среднее, максимальное и стандартное отклонение времени приёма-передачи.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="видео-использование-netem-i-dot-воспроизводимый-эксперимент"&gt;&lt;span class="section-num"&gt;5.3&lt;/span&gt; Видео: Использование netem I. Воспроизводимый эксперимент&lt;/h3&gt;
&lt;link rel="stylesheet" href="https://yamadharma.github.io/css/flick/jquery-ui.min.2145606a4147a5c2562a0afa9e996323dcbd14469acf347b81292370e967b906.css" integrity="sha256-IUVgakFHpcJWKgr6npljI9y9FEaazzR7gSkjcOlnuQY="&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;
&lt;/script&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"&gt;
&lt;/script&gt;
&lt;script&gt;
$(function() {
$( "#tabs, #tabs1, #tabs2, #tabs3, #tabs4, #tabs5, #tabs6, #tabs7, #tabs8" ).tabs();
});
&lt;/script&gt;
&lt;div id = "tabs"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href = "#tab-1"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href = "#tab-2"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id ="tab-0"&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/a202f653206b1c569bcfe44b5924558a"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-1"&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/_EBurmbB9DY?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-2"&gt;
&lt;/div&gt;
&lt;/div&gt;
tabe widget</description></item><item><title>Mininet. Использование netem (потери пакетов)</title><link>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/mininet-netem-ii/</link><pubDate>Thu, 13 Oct 2022 14:27:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/mininet-netem-ii/</guid><description>&lt;p&gt;Использование netem. Потери пакетов, дублирование пакетов, изменение порядка, повреждение пакетов.&lt;/p&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;h3 id="цели"&gt;&lt;span class="section-num"&gt;1.1&lt;/span&gt; Цели&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Освоить моделирование следующих параметров сети: потеря пакетов, дублирование пакетов, изменение порядка и повреждение пакетов.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="задачи"&gt;&lt;span class="section-num"&gt;1.2&lt;/span&gt; Задачи&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;В ходе работы требуется освоить следующие умения:
&lt;ul&gt;
&lt;li&gt;эмуляция сети, характеризующихся такими параметрами, как задержка, потеря пакетов, повреждение пакетов, переупорядочивание пакетов и дублирование пакетов;&lt;/li&gt;
&lt;li&gt;измерение производительности глобальных сетей, характеризующихся различными значениями параметров.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="видео-использование-netem-ii-dot-введение"&gt;&lt;span class="section-num"&gt;1.3&lt;/span&gt; Видео: Использование netem II. Введение&lt;/h3&gt;
&lt;link rel="stylesheet" href="https://yamadharma.github.io/css/flick/jquery-ui.min.2145606a4147a5c2562a0afa9e996323dcbd14469acf347b81292370e967b906.css" integrity="sha256-IUVgakFHpcJWKgr6npljI9y9FEaazzR7gSkjcOlnuQY="&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;
&lt;/script&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"&gt;
&lt;/script&gt;
&lt;script&gt;
$(function() {
$( "#tabs, #tabs1, #tabs2, #tabs3, #tabs4, #tabs5, #tabs6, #tabs7, #tabs8" ).tabs();
});
&lt;/script&gt;
&lt;div id = "tabs"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href = "#tab-1"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href = "#tab-2"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id ="tab-0"&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/dbb8edc601a8941aa093a15303b5391d"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-1"&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/E6yKPh6Vhq4?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-2"&gt;
&lt;/div&gt;
&lt;/div&gt;
tabe widget
&lt;h2 id="теоретические-сведения"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Теоретические сведения&lt;/h2&gt;
&lt;h3 id="проблемы-с-передачей-пакетов"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Проблемы с передачей пакетов&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Потеря пакета
&lt;ul&gt;
&lt;li&gt;Пакет, проходящий через сеть, не достигает пункта назначения.&lt;/li&gt;
&lt;li&gt;Распространённой причиной потери пакетов является неспособность маршрутизаторов удерживать пакеты, поступающие со скоростью, превышающей скорость отправления.&lt;/li&gt;
&lt;li&gt;Маршрутизатор ограничен объёмом буферной памяти, используемой для мгновенного хранения пакетов.&lt;/li&gt;
&lt;li&gt;Когда происходит потеря пакетов, TCP уменьшает окно перегрузки и, следовательно, пропускную способность вдвое.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Переупорядочивание пакетов
&lt;ul&gt;
&lt;li&gt;Пакеты принимаются в порядке, отличном от того, в котором они были отправлены.&lt;/li&gt;
&lt;li&gt;Переупорядочивание пакетов (неупорядоченная доставка пакетов) обычно является результатом того, что пакеты следуют по разным маршрутам для достижения пункта назначения.&lt;/li&gt;
&lt;li&gt;Переупорядочивание пакетов может ухудшить пропускную способность TCP-соединений в сетях с высокой пропускной способностью и высокой задержкой.&lt;/li&gt;
&lt;li&gt;Для каждого сегмента, полученного не по порядку, получатель TCP отправляет подтверждение (ACK) для последнего правильно принятого сегмента.&lt;/li&gt;
&lt;li&gt;Как только отправитель TCP получает три подтверждения для одного и того же сегмента (тройной дубликат ACK), отправитель считает, что получатель неправильно принял пакет, следующий за пакетом, который подтверждается три раза.&lt;/li&gt;
&lt;li&gt;Тогда отправитель уменьшает окно перегрузки и пропускную способность в два раза.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Повреждение пакета
&lt;ul&gt;
&lt;li&gt;Повреждение битов, составляющих пакет.&lt;/li&gt;
&lt;li&gt;Обычно происходит на физическом уровне.&lt;/li&gt;
&lt;li&gt;В случае повреждения некоторые биты могут иметь значения, отличные от первоначально отправленных узлом-отправителем.&lt;/li&gt;
&lt;li&gt;Узел получателя отбрасывает такие пакеты.&lt;/li&gt;
&lt;li&gt;Процесс-отправитель TCP не получит подтверждения для соответствующего сегмента и будет считать его потерянным сегментом.&lt;/li&gt;
&lt;li&gt;Отправитель уменьшает окно перегрузки и пропускную способность в два раза.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Дублирование пакетов
&lt;ul&gt;
&lt;li&gt;Несколько копий пакета присутствуют в сети и принимаются пунктом назначения.&lt;/li&gt;
&lt;li&gt;Дублирование пакетов является результатом повторных передач, когда узел-отправитель повторно передает неподтвержденные (NACK) пакеты.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="подготовка-стенда"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Подготовка стенда&lt;/h2&gt;
&lt;h3 id="лабораторная-топология"&gt;&lt;span class="section-num"&gt;3.1&lt;/span&gt; Лабораторная топология&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;В топологии используется сеть 10.0.0.0/8, назначенная Mininet по умолчанию.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Топология представляет собой коммутатор с двумя подключёнными к нему хостами.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Для запуска топологии (рис.
) используем параметры командной строки:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo mn --topo&lt;span class="o"&gt;=&lt;/span&gt;single,2 -x
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a id="figure--fig:netem-ii:topology"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
&lt;?xml version="1.0" encoding="us-ascii" standalone="no"?&gt;&lt;svg
xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css"
height="120px" preserveAspectRatio="none"
style="width:453px;height:120px;background:#FFFFFF;" version="1.1"
viewBox="0 0 453 120" width="453px"
zoomAndPan="magnify"&gt;&lt;defs/&gt;&lt;g&gt;&lt;g
id="elem_h1"&gt;&lt;polygon fill="#F1F1F1"
points="9.5,7,9.5,7.2102,19.5,6.5857,29.5,7.1933,39.5,7.3997,49.5,6.2866,59.5,6.9223,69.5,7,69.4456,6.8687,69.8046,7.0283,70.1984,7.2719,70.4725,7.2264,70.9848,7.7563,71.2678,7.7322,71.0737,7.6518,71.3533,8.0606,71.6937,8.4944,71.6807,8.782,71.8746,9.1552,72,9.5,71.9681,9.5,72.1785,19.7318,72.2391,29.9635,72.5857,40.1953,72.6711,50.427,72.6793,60.6588,72.2546,70.8905,72.4636,81.1223,72.7022,91.354,71.2788,101.5858,72,111.8175,72.209,111.9041,71.7622,112.1332,71.8715,112.5927,71.4082,112.815,71.3931,113.223,71.2678,113.5853,71.3624,113.8137,70.908,113.7167,70.5741,113.9106,70.2503,114.1289,69.9066,114.2992,69.5,114.3175,69.5,114.3136,59.5,114.6047,49.5,113.7451,39.5,114.6019,29.5,114.8657,19.5,114.762,9.5,114.3175,9.5782,114.5063,9.0848,114.0223,8.7097,113.8238,8.3601,113.6868,8.0783,113.7136,7.7322,113.5853,7.6717,113.5602,7.7956,113.3186,7.3855,112.8559,7.1872,112.4809,7.2167,112.2002,7,111.8175,6.3332,111.8175,6.4809,101.5858,7.649,91.354,7.4357,81.1223,7.7345,70.8905,6.6782,60.6588,7.3192,50.427,7.5904,40.1953,6.5276,29.9635,6.9041,19.7318,7,9.5,7.0388,9.5161,7.3472,9.2296,7.2916,8.7924,7.5818,8.4983,7.4152,8.0151,7.7322,7.7322,7.6458,7.5237,8.15,7.7409,8.3479,7.2186,8.8578,7.4496,9.1728,7.2101,9.5,7"
style="stroke:#181818;stroke-width:0.5;"/&gt;&lt;image height="48"
width="45" x="17"
xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAIAAAAKMGSIAAABYUlEQVR4Xu2Y7Y3DIAyGu2JGyAgZ4UbICBmBEW4ERugI3eCsvEAxifnwWbqexPMrjfHLE0olmsfrM3iUN/6I4OG937ZtGYe6qJdFqggeOglAvSxSRfAoswdhkSqmB+fGw/eRt7BIFTcerC6jaKlw46GARaqYHpzpwZkenH/lse/7dxWeqaHt4S2OF00aHsdxUJWeuCwYQSvd5VGvmoCvdcBjtwaxzrkxD1wbgtjpEUHs9IggdnpEEDs9IogVPb4y8mrotgOxokc2MiDd/yWIFT0+ZT1y8iquDUHs9IggVvTIRgZwn85mzhTEOsnjmXGtmiN65GBQcjcn/SQbHsu5PBhTp2w76ex99Xgs584o3wZlIOH2jWOcpU2XxxUyo3M2SaQnphUuxqzr+p6nRfBIe7iHYrXpoxM2EB3K04LVCR6j0MTrSTmzDA1Ou/KK0uN2N/Qg7VylB76LUSr/yJUe5vwAo6Ho0KlFbyoAAAAASUVORK5CYII="
y="17"/&gt;&lt;text fill="#000000" font-family="xkcd Script" font-size="14"
lengthAdjust="spacing" textLength="10" x="36.5"
y="80.2429"&gt;h1&lt;/text&gt;&lt;text fill="#000000" font-family="xkcd Script"
font-size="14" lengthAdjust="spacing" textLength="39" x="20"
y="99.9017"&gt;10.0.0.1&lt;/text&gt;&lt;/g&gt;&lt;g
id="elem_h2"&gt;&lt;polygon fill="#F1F1F1"
points="384.5,7,384.5,7.2102,394.5,6.5857,404.5,7.1933,414.5,7.3997,424.5,6.2866,434.5,6.9223,444.5,7,444.4456,6.8687,444.8046,7.0283,445.1984,7.2719,445.4725,7.2264,445.9848,7.7563,446.2678,7.7322,446.0737,7.6518,446.3533,8.0606,446.6937,8.4944,446.6807,8.782,446.8746,9.1552,447,9.5,446.9681,9.5,447.1785,19.7318,447.2391,29.9635,447.5857,40.1953,447.6711,50.427,447.6793,60.6588,447.2546,70.8905,447.4636,81.1223,447.7022,91.354,446.2788,101.5858,447,111.8175,447.209,111.9041,446.7622,112.1332,446.8715,112.5927,446.4082,112.815,446.3931,113.223,446.2678,113.5853,446.3624,113.8137,445.908,113.7167,445.5741,113.9106,445.2503,114.1289,444.9066,114.2992,444.5,114.3175,444.5,114.3136,434.5,114.6047,424.5,113.7451,414.5,114.6019,404.5,114.8657,394.5,114.762,384.5,114.3175,384.5782,114.5063,384.0848,114.0223,383.7097,113.8238,383.3601,113.6868,383.0783,113.7136,382.7322,113.5853,382.6717,113.5602,382.7956,113.3186,382.3855,112.8559,382.1872,112.4809,382.2167,112.2002,382,111.8175,381.3332,111.8175,381.4809,101.5858,382.649,91.354,382.4357,81.1223,382.7345,70.8905,381.6782,60.6588,382.3192,50.427,382.5904,40.1953,381.5276,29.9635,381.9041,19.7318,382,9.5,382.0388,9.5161,382.3472,9.2296,382.2916,8.7924,382.5818,8.4983,382.4152,8.0151,382.7322,7.7322,382.6458,7.5237,383.15,7.7409,383.3479,7.2186,383.8578,7.4496,384.1728,7.2101,384.5,7"
style="stroke:#181818;stroke-width:0.5;"/&gt;&lt;image height="48"
width="45" x="392"
xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAIAAAAKMGSIAAABYUlEQVR4Xu2Y7Y3DIAyGu2JGyAgZ4UbICBmBEW4ERugI3eCsvEAxifnwWbqexPMrjfHLE0olmsfrM3iUN/6I4OG937ZtGYe6qJdFqggeOglAvSxSRfAoswdhkSqmB+fGw/eRt7BIFTcerC6jaKlw46GARaqYHpzpwZkenH/lse/7dxWeqaHt4S2OF00aHsdxUJWeuCwYQSvd5VGvmoCvdcBjtwaxzrkxD1wbgtjpEUHs9IggdnpEEDs9IogVPb4y8mrotgOxokc2MiDd/yWIFT0+ZT1y8iquDUHs9IggVvTIRgZwn85mzhTEOsnjmXGtmiN65GBQcjcn/SQbHsu5PBhTp2w76ex99Xgs584o3wZlIOH2jWOcpU2XxxUyo3M2SaQnphUuxqzr+p6nRfBIe7iHYrXpoxM2EB3K04LVCR6j0MTrSTmzDA1Ou/KK0uN2N/Qg7VylB76LUSr/yJUe5vwAo6Ho0KlFbyoAAAAASUVORK5CYII="
y="17"/&gt;&lt;text fill="#000000" font-family="xkcd Script" font-size="14"
lengthAdjust="spacing" textLength="15" x="409"
y="80.2429"&gt;h2&lt;/text&gt;&lt;text fill="#000000" font-family="xkcd Script"
font-size="14" lengthAdjust="spacing" textLength="44" x="392.5"
y="99.9017"&gt;10.0.0.2&lt;/text&gt;&lt;/g&gt;&lt;g
id="elem_s1"&gt;&lt;polygon fill="#F1F1F1"
points="195.5,31.83,195.5,32.0402,206,31.4157,216.5,32.0233,227,32.2297,237.5,31.1166,248,31.7523,258.5,31.83,258.4456,31.6987,258.8046,31.8583,259.1984,32.1019,259.4725,32.0564,259.9848,32.5863,260.2678,32.5622,260.0737,32.4818,260.3533,32.8906,260.6937,33.3244,260.6807,33.612,260.8746,33.9852,261,34.33,260.9681,34.33,261.1785,44.8618,261.2391,55.3935,261.5857,65.9253,261.6711,76.457,261,86.9888,261.2092,87.0754,260.932,87.3748,260.8499,87.755,260.7769,88.139,260.1921,88.311,260.2678,88.7565,260.3543,88.9655,259.8764,88.8117,259.6288,89.2138,259.144,89.0434,258.8448,89.3212,258.5,89.4888,258.5,90.2304,248,89.44,237.5,89.5941,227,89.8274,216.5,89.905,206,89.4849,195.5,89.4888,195.5366,89.5772,195.0734,89.166,194.8292,89.2834,194.5093,89.2182,194.1425,89.0399,193.7322,88.7565,193.921,88.8347,193.437,88.3413,193.2385,87.9662,193.1015,87.6166,193.1283,87.3348,193,86.9888,192.8035,86.9888,193.6814,76.457,192.8253,65.9253,192.6569,55.3935,193.2283,44.8618,193,34.33,192.7946,34.2449,192.9866,33.9102,193.4927,33.7057,193.5735,33.3249,193.812,33.0095,193.7322,32.5622,193.6912,32.4631,194.1265,32.5141,194.5147,32.4512,194.7326,31.9774,195.1342,31.9469,195.5,31.83"
style="stroke:#181818;stroke-width:0.5;"/&gt;&lt;image height="18"
width="48" x="203"
xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAASCAIAAACSBMrtAAAA4klEQVR4Xs2WYRHDIAyFa7ESKgEJSEACEpCABCQgAQfLJXcQMtig20G/n6958JpQrkd6GIcUdlMCWWvPTSilQghVIGOMrFpOjLEE4tJ6qB3UpCoQqyl476WEBESqyKzFOQe7k+tLICptrvJ3y1AgGCLUNUfZe90blqFAsCKJmfwIPgqua61vW4hfAwkdNpu1XNeVH6XBQAnPJifr0Hau8+lw3Y9Z0nighBucnesAGiM6T5CleVZ6lolAsG4vECwN94dUP1oMItWpQGvoBuJjXgnd1P490F6qQDLzDujYPe5/6AU/4JUKUwnC3AAAAABJRU5ErkJggg=="
y="41.83"/&gt;&lt;text fill="#000000" font-family="xkcd Script"
font-size="14" lengthAdjust="spacing" textLength="9" x="224.5"
y="75.0729"&gt;s1&lt;/text&gt;&lt;/g&gt;&lt;g id="link_h1_s1"&gt;&lt;path
d="M72.39,60.66 L72.39,60.9402 L82.4117,60.1076 L92.4333,60.9177
L102.455,61.1929 L112.4767,59.7088 L122.4983,60.5564 L132.52,60.0913
L142.5417,60.1487 L152.5633,60.5691 L162.585,59.7382 L172.6067,61.3982
L182.6283,59.8196 L192.65,60.66 " fill="none"
style="stroke:#181818;stroke-width:1.0;"/&gt;&lt;text fill="#000000"
font-family="xkcd Script" font-size="13" lengthAdjust="spacing"
textLength="43" x="80.0386" y="76.098"&gt;h1-eth0&lt;/text&gt;&lt;text
fill="#000000" font-family="xkcd Script" font-size="13"
lengthAdjust="spacing" textLength="38" x="147.1477"
y="76.0979"&gt;s1-eth1&lt;/text&gt;&lt;/g&gt;&lt;g
id="link_s1_h2"&gt;&lt;path d="M261.16,60.66 L261.16,60.9402
L271.1925,60.1076 L281.225,60.9177 L291.2575,61.1929 L301.29,59.7088
L311.3225,60.5564 L321.355,60.0913 L331.3875,60.1487 L341.42,60.5691
L351.4525,59.7382 L361.485,61.3982 L371.5175,59.8196 L381.55,60.66 "
fill="none" style="stroke:#181818;stroke-width:1.0;"/&gt;&lt;text
fill="#000000" font-family="xkcd Script" font-size="13"
lengthAdjust="spacing" textLength="42" x="268.9169"
y="76.0979"&gt;s1-eth2&lt;/text&gt;&lt;text fill="#000000" font-family="xkcd
Script" font-size="13" lengthAdjust="spacing" textLength="47"
x="326.9645"
y="76.041"&gt;h2-eth0&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;
&lt;figcaption&gt;
&lt;p&gt;&lt;span class="figure-number"&gt;Рис. 1.: &lt;/span&gt;Лабораторная топология&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="рабочие-файлы"&gt;&lt;span class="section-num"&gt;3.2&lt;/span&gt; Рабочие файлы&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Подключимся к виртуальной машине:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh -Y mininet@192.168.x.y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Для рабочих файлов будем использовать каталог &lt;code&gt;~/work/lab_netem_ii&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p ~/work/lab_netem_ii
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="интерактивный-эксперимент"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Интерактивный эксперимент&lt;/h2&gt;
&lt;h3 id="добавление-изменение-потери-пакетов"&gt;&lt;span class="section-num"&gt;4.1&lt;/span&gt; Добавление/изменение потери пакетов&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Работа с NETEM осуществляется с помощью утилиты командной строки &lt;code&gt;tc&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Без дополнительных параметров NETEM ведёт себя как базовая очередь FIFO без задержек, потерь, дублирования или переупорядочения пакетов.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Основной синтаксис &lt;code&gt;tc&lt;/code&gt;, используемый с NETEM, следующий:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc &lt;span class="o"&gt;[&lt;/span&gt;add&lt;span class="p"&gt;|&lt;/span&gt;del&lt;span class="p"&gt;|&lt;/span&gt;replace&lt;span class="p"&gt;|&lt;/span&gt;change&lt;span class="p"&gt;|&lt;/span&gt;show&lt;span class="o"&gt;]&lt;/span&gt; dev dev_id root netem opts
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo&lt;/code&gt;: выполнить команду с более высокими привилегиями;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tc&lt;/code&gt;: команда, используемая для взаимодействия с NETEM;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qdisc&lt;/code&gt;: дисциплина очереди (&lt;code&gt;qdisc&lt;/code&gt;) представляет собой набор правил, определяющих порядок, в котором обслуживаются пакеты, поступающие по протоколу IP.
&lt;ul&gt;
&lt;li&gt;Дисциплина очереди применяется к очереди пакетов, чтобы решить, когда отправлять каждый пакет.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[add|del|replace|change|show]&lt;/code&gt; (добавить, удалить, заменить, изменить, показать): операция над &lt;code&gt;qdisc&lt;/code&gt;:
&lt;ul&gt;
&lt;li&gt;чтобы добавить задержку на определённом интерфейсе, применяется операция &lt;code&gt;add&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;чтобы изменить или удалить задержку на определённом интерфейсе, применяется операция &lt;code&gt;change&lt;/code&gt; или &lt;code&gt;del&lt;/code&gt;;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dev_id&lt;/code&gt;: параметр указывает интерфейс, подлежащий эмуляции;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;opts&lt;/code&gt;: параметр указывает величину задержки, потери пакетов, дублирования, повреждения и другие.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="определение-интерфейсов-хостов-h1-и-h2"&gt;&lt;span class="section-num"&gt;4.2&lt;/span&gt; Определение интерфейсов хостов &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Необходимо идентифицировать интерфейсы на подключенных хостах.&lt;/li&gt;
&lt;li&gt;На хосте &lt;code&gt;h1&lt;/code&gt; введите команду &lt;code&gt;ifconfig&lt;/code&gt;, чтобы отобразить информацию, относящуюся к его сетевым интерфейсам и назначенным им IP-адресам.
&lt;ul&gt;
&lt;li&gt;Вывод команды &lt;code&gt;ifconfig&lt;/code&gt; показывает, что хост &lt;code&gt;h1&lt;/code&gt; имеет два интерфейса: &lt;code&gt;h1-eth0&lt;/code&gt; и &lt;code&gt;lo&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Интерфейс &lt;code&gt;h1-eth0&lt;/code&gt; необходимо использовать в &lt;code&gt;tc&lt;/code&gt; при эмуляции WAN.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;На хосте &lt;code&gt;h2&lt;/code&gt; введите команду &lt;code&gt;ifconfig&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Вывод команды &lt;code&gt;ifconfig&lt;/code&gt; показывает, что хост &lt;code&gt;h2&lt;/code&gt; имеет два интерфейса: &lt;code&gt;h2-eth0&lt;/code&gt; и &lt;code&gt;lo&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Интерфейс &lt;code&gt;h2-eth0&lt;/code&gt; необходимо использовать в &lt;code&gt;tc&lt;/code&gt; при эмуляции WAN.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="добавка-потери-пакетов-на-интерфейс-подключённый-к-глобальной-сети"&gt;&lt;span class="section-num"&gt;4.3&lt;/span&gt; Добавка потери пакетов на интерфейс, подключённый к глобальной сети&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Пакеты могут быть потеряны во время передачи из-за таких факторов, как битовые ошибки и перегрузка сети.&lt;/li&gt;
&lt;li&gt;Скорость потерянных пакетов часто измеряется как процентная доля потерянных пакетов по отношению к количеству отправленных пакетов.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc add dev h1-eth0 root netem loss 10%
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Эта команда добавляет 10% потери пакетов к интерфейсу &lt;code&gt;h1-eth0&lt;/code&gt; хоста &lt;code&gt;h1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Теперь можно проверить наличие потерь пакетов, используя команду &lt;code&gt;ping&lt;/code&gt; с терминала хоста &lt;code&gt;h1&lt;/code&gt;. Параметр &lt;code&gt;-c&lt;/code&gt; указывает общее количество пакетов для отправки:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2 -c &lt;span class="m"&gt;200&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Обратите внимание на значения &lt;code&gt;icmp_seq&lt;/code&gt;. Некоторые номера последовательности отсутствуют из-за потери пакетов.&lt;/li&gt;
&lt;li&gt;В сводном отчёте &lt;code&gt;ping&lt;/code&gt; сообщает о проценте потерянных пакетов после завершения передачи.&lt;/li&gt;
&lt;li&gt;Данный сценарий эмулирует 10% потери пакетов в однонаправленном канале от хоста &lt;code&gt;h1&lt;/code&gt; к хосту &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Если мы хотим эмулировать потерю пакетов в обоих направлениях, к хосту &lt;code&gt;h2&lt;/code&gt; также необходимо добавить потерю пакетов в размере 10%.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h2&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc add dev h2-eth0 root netem loss 10%
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Можно убедиться, что соединение между хостом &lt;code&gt;h1&lt;/code&gt; и хостом &lt;code&gt;h2&lt;/code&gt; имеет больше потерь пакетов (10% от хоста &lt;code&gt;h1&lt;/code&gt; + 10% от хоста &lt;code&gt;h2&lt;/code&gt;), повторив команду &lt;code&gt;ping&lt;/code&gt; на терминале хоста &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2 -c &lt;span class="m"&gt;200&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Обратите внимание на значения &lt;code&gt;icmp_seq&lt;/code&gt;. Некоторые номера последовательности отсутствуют из-за потери пакетов.&lt;/li&gt;
&lt;li&gt;В сводном отчёте &lt;code&gt;ping&lt;/code&gt; сообщает о проценте потерянных пакетов после завершения передачи.&lt;/li&gt;
&lt;li&gt;Чтобы удалить добавленную потерю пакетов и восстановить конфигурацию по умолчанию, необходимо удалить правила интерфейсов на хосте &lt;code&gt;h1&lt;/code&gt; и хосте &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc del dev h1-eth0 root netem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Примените те же действия для удаления правил на хосте &lt;code&gt;h2&lt;/code&gt;. В терминале хоста &lt;code&gt;h2&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc del dev h2-eth0 root netem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;В результате дисциплина организации очереди tc восстановит свои значения по умолчанию.&lt;/li&gt;
&lt;li&gt;Теперь можно убедиться, что соединение от хоста &lt;code&gt;h1&lt;/code&gt; к хосту &lt;code&gt;h2&lt;/code&gt; не имеет явной потери пакетов.&lt;/li&gt;
&lt;li&gt;Запустите команду &lt;code&gt;ping&lt;/code&gt; с терминала хоста &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Нажмите &lt;code&gt;Ctrl+c&lt;/code&gt;, чтобы остановить тест.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="добавка-значения-корреляции-для-потери-пакетов"&gt;&lt;span class="section-num"&gt;4.4&lt;/span&gt; Добавка значения корреляции для потери пакетов&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Можно добавить необязательную корреляцию.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc add dev h1-eth0 root netem loss 50% 50%
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Команда вводит коэффициент потери пакетов 50% (такой высокий уровень потери пакетов маловероятен), и каждая последующая вероятность зависит на 50% от последней.&lt;/li&gt;
&lt;li&gt;Теперь пользователь может проверить, что между хостом &lt;code&gt;h1&lt;/code&gt; и хостом &lt;code&gt;h2&lt;/code&gt; теряются пакеты, используя команду &lt;code&gt;ping&lt;/code&gt; с терминала хоста &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2 -c &lt;span class="m"&gt;50&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Обратите внимание на значения &lt;code&gt;icmp_seq&lt;/code&gt;. Некоторые номера последовательности отсутствуют из-за потери пакетов.&lt;/li&gt;
&lt;li&gt;В сводном отчёте &lt;code&gt;ping&lt;/code&gt; сообщает о проценте потерянных пакетов после завершения передачи.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду, чтобы удалить предыдущие конфигурации:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc del dev h1-eth0 root netem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="добавка-повреждения-пакетов"&gt;&lt;span class="section-num"&gt;4.5&lt;/span&gt; Добавка повреждения пакетов&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Помимо потери пакетов, с помощью NETEM можно эмулировать повреждение пакетов.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc add dev h1-eth0 root netem corrupt 0.01%
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Добавленное здесь новое значение представляет собой процент повреждения пакетов (0,01%).&lt;/li&gt;
&lt;li&gt;Теперь пользователь может проверить предыдущую конфигурацию с помощью инструмента &lt;code&gt;iperf3&lt;/code&gt; для проверки повторных передач.&lt;/li&gt;
&lt;li&gt;Запустите iPerf3 в режиме сервера в терминале хоста &lt;code&gt;h2&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Запустите iPerf3 в клиентском режиме в терминале хоста &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Посмотрите значения повторной передачи на каждом временном интервале и общее количество повторно переданных пакетов.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду, чтобы удалить предыдущие конфигурации:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc del dev h1-eth0 root netem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="добавка-переупорядочивание-пакетов"&gt;&lt;span class="section-num"&gt;4.6&lt;/span&gt; Добавка переупорядочивание пакетов&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Иногда пакеты доставляются не в том порядке, в котором они были отправлены.&lt;/li&gt;
&lt;li&gt;Для эмуляции переупорядочивания в NETEM используется опция переупорядочивания.&lt;/li&gt;
&lt;li&gt;Посмотрим поведение трафика без переупорядочивания пакетов.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введём:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Нажмите &lt;code&gt;Ctrl+c&lt;/code&gt;, чтобы остановить тест.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc add dev h1-eth0 root netem delay 10ms reorder 25% 50%
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;В этой команде 25% пакетов (со значением корреляции 50%) будут отправлены немедленно, а остальные 75% будут задержаны на 10 мс.&lt;/li&gt;
&lt;li&gt;Пользователь может проверить эффект переупорядочивания пакетов с помощью команды &lt;code&gt;ping&lt;/code&gt; на терминале хоста &lt;code&gt;h1&lt;/code&gt; (нажмите &lt;code&gt;Ctrl+c&lt;/code&gt;, чтобы остановить тест):
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Первый и второй пакеты не будут иметь задержки (один из четырех, или 25%), а следующие три пакета будут иметь задержку около 10 миллисекунд (три из четырех, или 75%).&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду, чтобы удалить предыдущие конфигурации:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc del dev h1-eth0 root netem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="добавка-дублирования-пакетов"&gt;&lt;span class="section-num"&gt;4.7&lt;/span&gt; Добавка дублирования пакетов&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Дублированные пакеты могут присутствовать в сетях в результате повторных передач.&lt;/li&gt;
&lt;li&gt;NETEM предоставляет возможность эмуляции дублирования пакетов.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc add dev h1-eth0 root netem duplicate 50%
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Команда создаст дублирование 50% (т. е. 50% пакетов будут получены дважды).&lt;/li&gt;
&lt;li&gt;Пользователь может проверить эффект дублирования пакетов с помощью команды &lt;code&gt;ping&lt;/code&gt; на терминале хоста &lt;code&gt;h1&lt;/code&gt; (нажмите &lt;code&gt;Ctrl+c&lt;/code&gt;, чтобы остановить тест):
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Дубликаты пакетов помечаются как &lt;code&gt;DUP!&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Измеренная скорость дублирования пакетов будет приближаться к настроенной скорости по мере выполнения большего количества попыток.&lt;/li&gt;
&lt;li&gt;В терминале хоста &lt;code&gt;h1&lt;/code&gt; введите следующую команду, чтобы удалить предыдущие конфигурации:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc del dev h1-eth0 root netem
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="видео-использование-netem-ii-dot-интерактивный-эксперимент"&gt;&lt;span class="section-num"&gt;4.8&lt;/span&gt; Видео: Использование netem II. Интерактивный эксперимент&lt;/h3&gt;
&lt;link rel="stylesheet" href="https://yamadharma.github.io/css/flick/jquery-ui.min.2145606a4147a5c2562a0afa9e996323dcbd14469acf347b81292370e967b906.css" integrity="sha256-IUVgakFHpcJWKgr6npljI9y9FEaazzR7gSkjcOlnuQY="&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;
&lt;/script&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"&gt;
&lt;/script&gt;
&lt;script&gt;
$(function() {
$( "#tabs, #tabs1, #tabs2, #tabs3, #tabs4, #tabs5, #tabs6, #tabs7, #tabs8" ).tabs();
});
&lt;/script&gt;
&lt;div id = "tabs"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href = "#tab-1"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href = "#tab-2"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id ="tab-0"&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/b374d511a828ef5d969a6c538f9d18b1"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-1"&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/l061lvu_8w4?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-2"&gt;
&lt;/div&gt;
&lt;/div&gt;
tabe widget
&lt;h2 id="воспроизводимый-эксперимент"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Воспроизводимый эксперимент&lt;/h2&gt;
&lt;h3 id="постановка-задания"&gt;&lt;span class="section-num"&gt;5.1&lt;/span&gt; Постановка задания&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Будем исследовать задержки и построим графики для них.&lt;/li&gt;
&lt;li&gt;Выполните все интерактивные эксперименты в виде воспроизводимых.&lt;/li&gt;
&lt;li&gt;Для каждого эксперимента &lt;code&gt;expname&lt;/code&gt; создайте свой каталог:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p ~/work/lab_netem_ii/expname
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;В него мы будем помещать файлы эксперимента.&lt;/li&gt;
&lt;li&gt;Здесь &lt;code&gt;expname&lt;/code&gt; может принимать значения &lt;code&gt;simple-drop&lt;/code&gt;, &lt;code&gt;correlation-drop&lt;/code&gt; и т.п.&lt;/li&gt;
&lt;li&gt;Для каждого эксперимента создайте скрипт для проведения эксперимента &lt;code&gt;lab_netem_i.py&lt;/code&gt; и скрипт для визуализации &lt;code&gt;ping_plot&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Кроме визуализации вычислите минимальное, среднее, максимальное и стандартное отклонение времени приёма-передачи.&lt;/li&gt;
&lt;li&gt;Для примера реализуем задание простейшей задержки.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="добавление-потери-пакетов-на-интерфейс-подключённый-к-эмулируемой-глобальной-сети"&gt;&lt;span class="section-num"&gt;5.2&lt;/span&gt; Добавление потери пакетов на интерфейс, подключённый к эмулируемой глобальной сети&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;В качестве примера исследуем&lt;/li&gt;
&lt;li&gt;Создадим каталог &lt;code&gt;simple-drop&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p ~/work/lab_netem_ii/simple-drop
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/work/lab_netem_ii/simple-drop
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Создадим скрипт для эксперимента &lt;code&gt;lab_netem_ii.py&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="ch"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;Simple experiment.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;Output: ping.dat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.net&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Mininet&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.node&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.cli&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;CLI&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mininet.log&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;setLogLevel&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;emptyNet&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Create an empty network and add nodes to it.&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Mininet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;controller&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Controller&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;waitConnected&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding controller&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;c0&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding hosts&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addHost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;10.0.0.1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addHost&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;h2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;10.0.0.2&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Adding switch&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addSwitch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;s1&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Creating links&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addLink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addLink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;s1&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Starting network&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Set loss&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cmdPrint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tc qdisc add dev h1-eth0 root netem loss 10%&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cmdPrint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tc qdisc add dev h2-eth0 root netem loss 10%&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# Wait 10 seconds&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Ping&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cmdPrint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ping -c 200&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IP&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;| grep &amp;#34;time=&amp;#34; | awk &lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;{print $5, $7}&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt; | sed -e &lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;s/time=//g&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt; -e &lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;s/icmp_seq=//g&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt; &amp;gt; ping.dat&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;*** Stopping network&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;setLogLevel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;info&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;emptyNet&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Создадим скрипт для визуализации &lt;code&gt;ping_plot&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#!/usr/bin/gnuplot --persist
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt; terminal png crop
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt; output &lt;span class="s1"&gt;&amp;#39;ping.png&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt; xlabel &lt;span class="s2"&gt;&amp;#34;Sequence number&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt; ylabel &lt;span class="s2"&gt;&amp;#34;Delay (ms)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt; grid
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;plot &lt;span class="s2"&gt;&amp;#34;ping.dat&amp;#34;&lt;/span&gt; with lines
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Зададим права доступа:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;chmod +x ping_plot
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Создадим &lt;code&gt;Makefile&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-makefile" data-lang="makefile"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;all&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ping&lt;/span&gt;.&lt;span class="n"&gt;dat&lt;/span&gt; &lt;span class="n"&gt;ping&lt;/span&gt;.&lt;span class="n"&gt;png&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;ping.dat&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; sudo python lab_netem_i.py
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; sudo chown mininet:mininet ping.dat
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;ping.png&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ping&lt;/span&gt;.&lt;span class="n"&gt;dat&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ./ping_plot
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;clean&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; -rm -f *.dat *.png
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Выполним эксперимент:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;make
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Посмотрите график.&lt;/li&gt;
&lt;li&gt;Вычислите минимальное, среднее, максимальное и стандартное отклонение времени приёма-передачи.&lt;/li&gt;
&lt;li&gt;Очистите каталог от результатов проведения экспериментов:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;make clean
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Mininet. Token Bucket Filter</title><link>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/mininet-token-bucket-filter/</link><pubDate>Wed, 19 Oct 2022 19:51:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/teaching/simulation-networks/lab/mininet-token-bucket-filter/</guid><description>&lt;p&gt;Управление пропускной способностью с помощью дисциплина очередей Token Bucket Filter (TBF).&lt;/p&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;h3 id="цели"&gt;&lt;span class="section-num"&gt;1.1&lt;/span&gt; Цели&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Освоить использование дисциплины очередей Token Bucket Filter (TBF).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="задачи"&gt;&lt;span class="section-num"&gt;1.2&lt;/span&gt; Задачи&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Получить понятие об алгоритме Token Bucket.&lt;/li&gt;
&lt;li&gt;Использовать Token Bucket Filter (tbf) в Linux.&lt;/li&gt;
&lt;li&gt;Понять, как комбинировать дисциплины очередей в Linux Traffic Control (tc).&lt;/li&gt;
&lt;li&gt;Объединить tbf и NETEM.&lt;/li&gt;
&lt;li&gt;Эмулируйте свойства WAN в Mininet.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="видео-token-bucket-filter-dot-введение"&gt;&lt;span class="section-num"&gt;1.3&lt;/span&gt; Видео: Token Bucket Filter. Введение&lt;/h3&gt;
&lt;link rel="stylesheet" href="https://yamadharma.github.io/css/flick/jquery-ui.min.2145606a4147a5c2562a0afa9e996323dcbd14469acf347b81292370e967b906.css" integrity="sha256-IUVgakFHpcJWKgr6npljI9y9FEaazzR7gSkjcOlnuQY="&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;
&lt;/script&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"&gt;
&lt;/script&gt;
&lt;script&gt;
$(function() {
$( "#tabs, #tabs1, #tabs2, #tabs3, #tabs4, #tabs5, #tabs6, #tabs7, #tabs8" ).tabs();
});
&lt;/script&gt;
&lt;div id = "tabs"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href = "#tab-1"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href = "#tab-2"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id ="tab-0"&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/844474172fbad39a5f8a7ffc8a927a44"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-1"&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/9mqs0aw4tQE?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-2"&gt;
&lt;/div&gt;
&lt;/div&gt;
tabe widget
&lt;h2 id="теоретические-сведения"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Теоретические сведения&lt;/h2&gt;
&lt;h3 id="введение-в-алгоритм-token-bucket"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Введение в алгоритм Token Bucket&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;При моделировании глобальной сети (WAN) иногда необходимо ограничить пропускную способность устройств (конечных хостов и сетевых устройств), чтобы наблюдать за поведением сети в различных условиях.&lt;/li&gt;
&lt;li&gt;Token Bucket &amp;mdash; это алгоритм, используемый в сетях с коммутацией пакетов для ограничения пропускной способности и пиковой нагрузки трафика.&lt;/li&gt;
&lt;li&gt;Сущность Token Bucket состоит в добавлении токенов (представленных в виде пакетов или байтов) с фиксированной скоростью в буфер (&lt;em&gt;ведро&lt;/em&gt;) с фиксированной ёмкостью.&lt;/li&gt;
&lt;li&gt;Когда приходит новый пакет длиной \(n\) байт, буфер (ведро) проверяется на количество доступных токенов; если доступно хотя бы \(n\) токенов, \(n\) токенов удаляются из ведра, и пакет отправляется в сеть.&lt;/li&gt;
&lt;li&gt;В противном случае токены не удаляются, и пакет считается несоответствующим. В таком случае пакет может быть отброшен, поставлен в очередь или передан, но помечен как несоответствующий.&lt;/li&gt;
&lt;li&gt;Параметры алгоритма:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rate&lt;/code&gt; есть скорость передачи; она определяется частотой, с которой токены добавляются в корзину.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Burstiness&lt;/em&gt; (всплеск): когда ведро полностью занято (т. е. никакие пакеты не потребляют токены), новые пакеты будут потреблять токены сразу, без ограничений. Всплеск определяется как количество токенов, которые могут поместиться в ведро (или размер ведра).&lt;/li&gt;
&lt;li&gt;Иногда создаётся ещё одно маленькое ведро, с размером, равным максимально передаваемому элементу (Maximum Transmission Unit &amp;mdash; MTU). Скорость обработки этого буфера намного превышает исходную (peak rate &amp;mdash; пиковая скорость).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="основной-синтаксис-tbf"&gt;&lt;span class="section-num"&gt;2.2&lt;/span&gt; Основной синтаксис tbf&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Основной синтаксис &lt;code&gt;tbf&lt;/code&gt;, используемый с &lt;code&gt;tc&lt;/code&gt;, следующий:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tc qdisc &lt;span class="o"&gt;[&lt;/span&gt;add &lt;span class="p"&gt;|&lt;/span&gt; ...&lt;span class="o"&gt;]&lt;/span&gt; dev &lt;span class="o"&gt;[&lt;/span&gt;dev_id&lt;span class="o"&gt;]&lt;/span&gt; root tbf limit &lt;span class="o"&gt;[&lt;/span&gt;BYTES&lt;span class="o"&gt;]&lt;/span&gt; burst &lt;span class="o"&gt;[&lt;/span&gt;BYTES&lt;span class="o"&gt;]&lt;/span&gt; rate &lt;span class="o"&gt;[&lt;/span&gt;BPS&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;mtu BYTES&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; peakrate BPS &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; latency TIME &lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Здесь:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tc&lt;/code&gt; : инструмент управления трафиком Linux;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qdisc&lt;/code&gt; : дисциплина очереди (qdisc) представляет собой набор правил, определяющих порядок, в котором обслуживаются пакеты, поступающие с выходных данных IP-протокола. Дисциплина очереди применяется к очереди пакетов, чтобы решить, когда отправлять каждый пакет;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[add | del | replace | change | show]&lt;/code&gt; : операция над &lt;code&gt;qdisc&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dev [dev_id]&lt;/code&gt;: задаёт интерфейс;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tbf&lt;/code&gt; : указывает, что используется алгоритм &lt;em&gt;Token Bucket Filter&lt;/em&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;limit [BYTES]&lt;/code&gt; : размер очереди пакетов в байтах;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;burst [BYTES]&lt;/code&gt; : количество байтов, которое может поместиться в корзину;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rate [BPS]&lt;/code&gt;: скорость передачи, определяемая частотой, с которой токены добавляются в корзину;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mtu [BYTES]&lt;/code&gt; : максимальная единица передачи в байтах;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;peakrate [BPS]&lt;/code&gt; (пиковая скорость [бит/с]): максимальная скорость пакета;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;latency [TIME]&lt;/code&gt; : максимальное время ожидания пакета в очереди.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="подготовка-стенда"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Подготовка стенда&lt;/h2&gt;
&lt;h3 id="лабораторная-топология"&gt;&lt;span class="section-num"&gt;3.1&lt;/span&gt; Лабораторная топология&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;В топологии используется сеть 10.0.0.0/8, назначенная Mininet по умолчанию.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Топология представляет собой коммутатор с двумя подключёнными к нему хостами.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Для запуска топологии (рис.
) используем параметры командной строки:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo mn --topo&lt;span class="o"&gt;=&lt;/span&gt;linear,2 -x
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a id="figure--fig:tbf:topology"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;figure&gt;
&lt;?xml version="1.0" encoding="us-ascii" standalone="no"?&gt;&lt;svg
xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css"
height="120px" preserveAspectRatio="none"
style="width:690px;height:120px;background:#FFFFFF;" version="1.1"
viewBox="0 0 690 120" width="690px"
zoomAndPan="magnify"&gt;&lt;defs/&gt;&lt;g&gt;&lt;g
id="elem_h1"&gt;&lt;polygon fill="#F1F1F1"
points="9.5,7,9.5,7.2102,19.5,6.5857,29.5,7.1933,39.5,7.3997,49.5,6.2866,59.5,6.9223,69.5,7,69.4456,6.8687,69.8046,7.0283,70.1984,7.2719,70.4725,7.2264,70.9848,7.7563,71.2678,7.7322,71.0737,7.6518,71.3533,8.0606,71.6937,8.4944,71.6807,8.782,71.8746,9.1552,72,9.5,71.9681,9.5,72.1785,19.7318,72.2391,29.9635,72.5857,40.1953,72.6711,50.427,72.6793,60.6588,72.2546,70.8905,72.4636,81.1223,72.7022,91.354,71.2788,101.5858,72,111.8175,72.209,111.9041,71.7622,112.1332,71.8715,112.5927,71.4082,112.815,71.3931,113.223,71.2678,113.5853,71.3624,113.8137,70.908,113.7167,70.5741,113.9106,70.2503,114.1289,69.9066,114.2992,69.5,114.3175,69.5,114.3136,59.5,114.6047,49.5,113.7451,39.5,114.6019,29.5,114.8657,19.5,114.762,9.5,114.3175,9.5782,114.5063,9.0848,114.0223,8.7097,113.8238,8.3601,113.6868,8.0783,113.7136,7.7322,113.5853,7.6717,113.5602,7.7956,113.3186,7.3855,112.8559,7.1872,112.4809,7.2167,112.2002,7,111.8175,6.3332,111.8175,6.4809,101.5858,7.649,91.354,7.4357,81.1223,7.7345,70.8905,6.6782,60.6588,7.3192,50.427,7.5904,40.1953,6.5276,29.9635,6.9041,19.7318,7,9.5,7.0388,9.5161,7.3472,9.2296,7.2916,8.7924,7.5818,8.4983,7.4152,8.0151,7.7322,7.7322,7.6458,7.5237,8.15,7.7409,8.3479,7.2186,8.8578,7.4496,9.1728,7.2101,9.5,7"
style="stroke:#181818;stroke-width:0.5;"/&gt;&lt;image height="48"
width="45" x="17"
xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAIAAAAKMGSIAAABYUlEQVR4Xu2Y7Y3DIAyGu2JGyAgZ4UbICBmBEW4ERugI3eCsvEAxifnwWbqexPMrjfHLE0olmsfrM3iUN/6I4OG937ZtGYe6qJdFqggeOglAvSxSRfAoswdhkSqmB+fGw/eRt7BIFTcerC6jaKlw46GARaqYHpzpwZkenH/lse/7dxWeqaHt4S2OF00aHsdxUJWeuCwYQSvd5VGvmoCvdcBjtwaxzrkxD1wbgtjpEUHs9IggdnpEEDs9IogVPb4y8mrotgOxokc2MiDd/yWIFT0+ZT1y8iquDUHs9IggVvTIRgZwn85mzhTEOsnjmXGtmiN65GBQcjcn/SQbHsu5PBhTp2w76ex99Xgs584o3wZlIOH2jWOcpU2XxxUyo3M2SaQnphUuxqzr+p6nRfBIe7iHYrXpoxM2EB3K04LVCR6j0MTrSTmzDA1Ou/KK0uN2N/Qg7VylB76LUSr/yJUe5vwAo6Ho0KlFbyoAAAAASUVORK5CYII="
y="17"/&gt;&lt;text fill="#000000" font-family="xkcd Script" font-size="14"
lengthAdjust="spacing" textLength="10" x="36.5"
y="80.2429"&gt;h1&lt;/text&gt;&lt;text fill="#000000" font-family="xkcd Script"
font-size="14" lengthAdjust="spacing" textLength="39" x="20"
y="99.9017"&gt;10.0.0.1&lt;/text&gt;&lt;/g&gt;&lt;g
id="elem_h2"&gt;&lt;polygon fill="#F1F1F1"
points="621.5,7,621.5,7.2102,631.5,6.5857,641.5,7.1933,651.5,7.3997,661.5,6.2866,671.5,6.9223,681.5,7,681.4456,6.8687,681.8046,7.0283,682.1984,7.2719,682.4725,7.2264,682.9848,7.7563,683.2678,7.7322,683.0737,7.6518,683.3533,8.0606,683.6937,8.4944,683.6807,8.782,683.8746,9.1552,684,9.5,683.9681,9.5,684.1785,19.7318,684.2391,29.9635,684.5857,40.1953,684.6711,50.427,684.6793,60.6588,684.2546,70.8905,684.4636,81.1223,684.7022,91.354,683.2788,101.5858,684,111.8175,684.209,111.9041,683.7622,112.1332,683.8715,112.5927,683.4082,112.815,683.3931,113.223,683.2678,113.5853,683.3624,113.8137,682.908,113.7167,682.5741,113.9106,682.2503,114.1289,681.9066,114.2992,681.5,114.3175,681.5,114.3136,671.5,114.6047,661.5,113.7451,651.5,114.6019,641.5,114.8657,631.5,114.762,621.5,114.3175,621.5782,114.5063,621.0848,114.0223,620.7097,113.8238,620.3601,113.6868,620.0783,113.7136,619.7322,113.5853,619.6717,113.5602,619.7956,113.3186,619.3855,112.8559,619.1872,112.4809,619.2167,112.2002,619,111.8175,618.3332,111.8175,618.4809,101.5858,619.649,91.354,619.4357,81.1223,619.7345,70.8905,618.6782,60.6588,619.3192,50.427,619.5904,40.1953,618.5276,29.9635,618.9041,19.7318,619,9.5,619.0388,9.5161,619.3472,9.2296,619.2916,8.7924,619.5818,8.4983,619.4152,8.0151,619.7322,7.7322,619.6458,7.5237,620.15,7.7409,620.3479,7.2186,620.8578,7.4496,621.1728,7.2101,621.5,7"
style="stroke:#181818;stroke-width:0.5;"/&gt;&lt;image height="48"
width="45" x="629"
xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAIAAAAKMGSIAAABYUlEQVR4Xu2Y7Y3DIAyGu2JGyAgZ4UbICBmBEW4ERugI3eCsvEAxifnwWbqexPMrjfHLE0olmsfrM3iUN/6I4OG937ZtGYe6qJdFqggeOglAvSxSRfAoswdhkSqmB+fGw/eRt7BIFTcerC6jaKlw46GARaqYHpzpwZkenH/lse/7dxWeqaHt4S2OF00aHsdxUJWeuCwYQSvd5VGvmoCvdcBjtwaxzrkxD1wbgtjpEUHs9IggdnpEEDs9IogVPb4y8mrotgOxokc2MiDd/yWIFT0+ZT1y8iquDUHs9IggVvTIRgZwn85mzhTEOsnjmXGtmiN65GBQcjcn/SQbHsu5PBhTp2w76ex99Xgs584o3wZlIOH2jWOcpU2XxxUyo3M2SaQnphUuxqzr+p6nRfBIe7iHYrXpoxM2EB3K04LVCR6j0MTrSTmzDA1Ou/KK0uN2N/Qg7VylB76LUSr/yJUe5vwAo6Ho0KlFbyoAAAAASUVORK5CYII="
y="17"/&gt;&lt;text fill="#000000" font-family="xkcd Script" font-size="14"
lengthAdjust="spacing" textLength="15" x="646"
y="80.2429"&gt;h2&lt;/text&gt;&lt;text fill="#000000" font-family="xkcd Script"
font-size="14" lengthAdjust="spacing" textLength="44" x="629.5"
y="99.9017"&gt;10.0.0.2&lt;/text&gt;&lt;/g&gt;&lt;g
id="elem_s1"&gt;&lt;polygon fill="#F1F1F1"
points="197.5,31.83,197.5,32.0402,208,31.4157,218.5,32.0233,229,32.2297,239.5,31.1166,250,31.7523,260.5,31.83,260.4456,31.6987,260.8046,31.8583,261.1984,32.1019,261.4725,32.0564,261.9848,32.5863,262.2678,32.5622,262.0737,32.4818,262.3533,32.8906,262.6937,33.3244,262.6807,33.612,262.8746,33.9852,263,34.33,262.9681,34.33,263.1785,44.8618,263.2391,55.3935,263.5857,65.9253,263.6711,76.457,263,86.9888,263.2092,87.0754,262.932,87.3748,262.8499,87.755,262.7769,88.139,262.1921,88.311,262.2678,88.7565,262.3543,88.9655,261.8764,88.8117,261.6288,89.2138,261.144,89.0434,260.8448,89.3212,260.5,89.4888,260.5,90.2304,250,89.44,239.5,89.5941,229,89.8274,218.5,89.905,208,89.4849,197.5,89.4888,197.5366,89.5772,197.0734,89.166,196.8292,89.2834,196.5093,89.2182,196.1425,89.0399,195.7322,88.7565,195.921,88.8347,195.437,88.3413,195.2385,87.9662,195.1015,87.6166,195.1283,87.3348,195,86.9888,194.8035,86.9888,195.6814,76.457,194.8253,65.9253,194.6569,55.3935,195.2283,44.8618,195,34.33,194.7946,34.2449,194.9866,33.9102,195.4927,33.7057,195.5735,33.3249,195.812,33.0095,195.7322,32.5622,195.6912,32.4631,196.1265,32.5141,196.5147,32.4512,196.7326,31.9774,197.1342,31.9469,197.5,31.83"
style="stroke:#181818;stroke-width:0.5;"/&gt;&lt;image height="18"
width="48" x="205"
xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAASCAIAAACSBMrtAAAA4klEQVR4Xs2WYRHDIAyFa7ESKgEJSEACEpCABCQgAQfLJXcQMtig20G/n6958JpQrkd6GIcUdlMCWWvPTSilQghVIGOMrFpOjLEE4tJ6qB3UpCoQqyl476WEBESqyKzFOQe7k+tLICptrvJ3y1AgGCLUNUfZe90blqFAsCKJmfwIPgqua61vW4hfAwkdNpu1XNeVH6XBQAnPJifr0Hau8+lw3Y9Z0nighBucnesAGiM6T5CleVZ6lolAsG4vECwN94dUP1oMItWpQGvoBuJjXgnd1P490F6qQDLzDujYPe5/6AU/4JUKUwnC3AAAAABJRU5ErkJggg=="
y="41.83"/&gt;&lt;text fill="#000000" font-family="xkcd Script"
font-size="14" lengthAdjust="spacing" textLength="9" x="226.5"
y="75.0729"&gt;s1&lt;/text&gt;&lt;/g&gt;&lt;g id="elem_s2"&gt;&lt;polygon
fill="#F1F1F1"
points="430.5,31.83,430.5,32.0402,441,31.4157,451.5,32.0233,462,32.2297,472.5,31.1166,483,31.7523,493.5,31.83,493.4456,31.6987,493.8046,31.8583,494.1984,32.1019,494.4725,32.0564,494.9848,32.5863,495.2678,32.5622,495.0737,32.4818,495.3533,32.8906,495.6937,33.3244,495.6807,33.612,495.8746,33.9852,496,34.33,495.9681,34.33,496.1785,44.8618,496.2391,55.3935,496.5857,65.9253,496.6711,76.457,496,86.9888,496.2092,87.0754,495.932,87.3748,495.8499,87.755,495.7769,88.139,495.1921,88.311,495.2678,88.7565,495.3543,88.9655,494.8764,88.8117,494.6288,89.2138,494.144,89.0434,493.8448,89.3212,493.5,89.4888,493.5,90.2304,483,89.44,472.5,89.5941,462,89.8274,451.5,89.905,441,89.4849,430.5,89.4888,430.5366,89.5772,430.0734,89.166,429.8292,89.2834,429.5093,89.2182,429.1425,89.0399,428.7322,88.7565,428.921,88.8347,428.437,88.3413,428.2385,87.9662,428.1015,87.6166,428.1283,87.3348,428,86.9888,427.8035,86.9888,428.6814,76.457,427.8253,65.9253,427.6569,55.3935,428.2283,44.8618,428,34.33,427.7946,34.2449,427.9866,33.9102,428.4927,33.7057,428.5735,33.3249,428.812,33.0095,428.7322,32.5622,428.6912,32.4631,429.1265,32.5141,429.5147,32.4512,429.7326,31.9774,430.1342,31.9469,430.5,31.83"
style="stroke:#181818;stroke-width:0.5;"/&gt;&lt;image height="18"
width="48" x="438"
xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAASCAIAAACSBMrtAAAA4klEQVR4Xs2WYRHDIAyFa7ESKgEJSEACEpCABCQgAQfLJXcQMtig20G/n6958JpQrkd6GIcUdlMCWWvPTSilQghVIGOMrFpOjLEE4tJ6qB3UpCoQqyl476WEBESqyKzFOQe7k+tLICptrvJ3y1AgGCLUNUfZe90blqFAsCKJmfwIPgqua61vW4hfAwkdNpu1XNeVH6XBQAnPJifr0Hau8+lw3Y9Z0nighBucnesAGiM6T5CleVZ6lolAsG4vECwN94dUP1oMItWpQGvoBuJjXgnd1P490F6qQDLzDujYPe5/6AU/4JUKUwnC3AAAAABJRU5ErkJggg=="
y="41.83"/&gt;&lt;text fill="#000000" font-family="xkcd Script"
font-size="14" lengthAdjust="spacing" textLength="14" x="457"
y="75.0729"&gt;s2&lt;/text&gt;&lt;/g&gt;&lt;g id="link_h1_s1"&gt;&lt;path
d="M72.31,60.66 L72.31,60.9402 L82.515,60.1076 L92.72,60.9177
L102.925,61.1929 L113.13,59.7088 L123.335,60.5564 L133.54,60.0913
L143.745,60.1487 L153.95,60.5691 L164.155,59.7382 L174.36,61.3982
L184.565,59.8196 L194.77,60.66 " fill="none"
style="stroke:#181818;stroke-width:1.0;"/&gt;&lt;text fill="#000000"
font-family="xkcd Script" font-size="13" lengthAdjust="spacing"
textLength="43" x="79.9473" y="76.098"&gt;h1-eth0&lt;/text&gt;&lt;text
fill="#000000" font-family="xkcd Script" font-size="13"
lengthAdjust="spacing" textLength="38" x="148.9518"
y="76.155"&gt;s1-eth1&lt;/text&gt;&lt;/g&gt;&lt;g
id="link_s1_s2"&gt;&lt;path d="M263.1,60.66 L263.1,60.9402 L273.3806,60.1076
L283.6613,60.9177 L293.9419,61.1929 L304.2225,59.7088
L314.5031,60.5564 L324.7838,60.0913 L335.0644,60.1487 L345.345,60.5691
L355.6256,59.7382 L365.9063,61.3982 L376.1869,59.8196
L386.4675,60.3963 L396.7481,61.2359 L407.0287,60.5456 L417.3094,60.751
L427.59,60.66 " fill="none"
style="stroke:#181818;stroke-width:1.0;"/&gt;&lt;text fill="#000000"
font-family="xkcd Script" font-size="13" lengthAdjust="spacing"
textLength="41" x="325" y="55.8143"&gt;10 Gbps&lt;/text&gt;&lt;text fill="#000000"
font-family="xkcd Script" font-size="13" lengthAdjust="spacing"
textLength="42" x="270.8484" y="76.0979"&gt;s1-eth2&lt;/text&gt;&lt;text
fill="#000000" font-family="xkcd Script" font-size="13"
lengthAdjust="spacing" textLength="46" x="373.8755"
y="76.0409"&gt;s2-eth2&lt;/text&gt;&lt;/g&gt;&lt;g
id="link_s2_h2"&gt;&lt;path d="M496.09,60.66 L496.09,60.9402
L506.3058,60.1076 L516.5217,60.9177 L526.7375,61.1929
L536.9533,59.7088 L547.1692,60.5564 L557.385,60.0913 L567.6008,60.1487
L577.8167,60.5691 L588.0325,59.7382 L598.2483,61.3982
L608.4642,59.8196 L618.68,60.66 " fill="none"
style="stroke:#181818;stroke-width:1.0;"/&gt;&lt;text fill="#000000"
font-family="xkcd Script" font-size="13" lengthAdjust="spacing"
textLength="42" x="503.837" y="76.0979"&gt;s2-eth1&lt;/text&gt;&lt;text
fill="#000000" font-family="xkcd Script" font-size="13"
lengthAdjust="spacing" textLength="47" x="564.112"
y="76.041"&gt;h2-eth0&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;
&lt;figcaption&gt;
&lt;p&gt;&lt;span class="figure-number"&gt;Рис. 1.: &lt;/span&gt;Лабораторная топология&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="рабочие-файлы"&gt;&lt;span class="section-num"&gt;3.2&lt;/span&gt; Рабочие файлы&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Подключимся к виртуальной машине:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh -Y mininet@192.168.x.y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Для рабочих файлов будем использовать каталог &lt;code&gt;~/work/lab_tbf&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p ~/work/lab_tbf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="интерактивный-эксперимент"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Интерактивный эксперимент&lt;/h2&gt;
&lt;h3 id="отсутствие-ограничения-скорости"&gt;&lt;span class="section-num"&gt;4.1&lt;/span&gt; Отсутствие ограничения скорости&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Запустим iPerf3 в режиме сервера, выполните команду &lt;code&gt;iperf3 -s&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Запустим iPerf3 в клиентском режиме, запустите команду &lt;code&gt;iperf3 -c 10.0.0.2&lt;/code&gt; для хоста &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ограничение-скорости-на-конечных-хостах"&gt;&lt;span class="section-num"&gt;4.2&lt;/span&gt; Ограничение скорости на конечных хостах&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Команду &lt;code&gt;tc&lt;/code&gt; можно применить к сетевому интерфейсу устройства для формирования исходящего трафика.&lt;/li&gt;
&lt;li&gt;Будем ограничивать скорость отправки конечного хоста с помощью фильтра Token Bucket Filter (tbf), который является реализацией алгоритма Token Bucket.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="определим-интерфейс-хостов-h1-и-h2"&gt;&lt;span class="section-num"&gt;4.2.1&lt;/span&gt; Определим интерфейс хостов &lt;code&gt;h1&lt;/code&gt; и &lt;code&gt;h2&lt;/code&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;На хосте &lt;code&gt;h1&lt;/code&gt; введите команду &lt;code&gt;ifconfig&lt;/code&gt;, чтобы отобразить информацию, относящуюся к его сетевым интерфейсам и назначенным им IP-адресам.
&lt;ul&gt;
&lt;li&gt;Хост &lt;code&gt;h1&lt;/code&gt; имеет два интерфейса: &lt;code&gt;h1-eth0&lt;/code&gt; и &lt;code&gt;lo&lt;/code&gt;. Интерфейс &lt;code&gt;h1-eth0&lt;/code&gt; на хосте &lt;code&gt;h1&lt;/code&gt; настроен с IP-адресом 10.0.0.1 и маской подсети 255.0.0.0. Этот интерфейс необходимо использовать в &lt;code&gt;tc&lt;/code&gt; при эмуляции сети.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;В командной строке хоста &lt;code&gt;h2&lt;/code&gt; также введите команду &lt;code&gt;ifconfig&lt;/code&gt;.
&lt;ul&gt;
&lt;li&gt;Хост &lt;code&gt;h2&lt;/code&gt; имеет два интерфейса: &lt;code&gt;h2-eth0&lt;/code&gt; и &lt;code&gt;lo&lt;/code&gt;. Интерфейс &lt;code&gt;h2-eth0&lt;/code&gt; на хосте &lt;code&gt;h1&lt;/code&gt; настроен с IP-адресом 10.0.0.2 и маской подсети 255.0.0.0. Этот интерфейс необходимо использовать в &lt;code&gt;tc&lt;/code&gt; при эмуляции сети.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="эмуляция-глобальной-сети-10-гбит-с-с-высокой-задержкой"&gt;&lt;span class="section-num"&gt;4.2.2&lt;/span&gt; Эмуляция глобальной сети 10 Гбит/с с высокой задержкой&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Будем использовать команду &lt;code&gt;tbf&lt;/code&gt; на сетевом интерфейсе для управления скоростью исходящего трафика.&lt;/li&gt;
&lt;li&gt;Измените пропускную способность хоста &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc add dev h1-eth0 root tbf rate 10gbit burst &lt;span class="m"&gt;5000000&lt;/span&gt; limit &lt;span class="m"&gt;15000000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Эта команда устанавливает пропускную способность на 10 Гбит/с на интерфейсе &lt;code&gt;h1-eth0&lt;/code&gt; хоста &lt;code&gt;h1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Параметры Token Bucket Filter:
&lt;ul&gt;
&lt;li&gt;rate : 10gbit;&lt;/li&gt;
&lt;li&gt;burst : 5,000,000;&lt;/li&gt;
&lt;li&gt;limit : 15,000,000.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Распишем элементы команды:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sudo&lt;/code&gt; : включить выполнение команды с более высокими привилегиями безопасности;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tc&lt;/code&gt; : вызвать управление трафиком Linux;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qdisc&lt;/code&gt; : изменить дисциплину очередей сетевого планировщика;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;add&lt;/code&gt; (добавить): создать новое правило;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dev h1-eth0 root&lt;/code&gt; : интерфейс, на котором будет применяться правило;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tbf&lt;/code&gt; : использовать алгоритм Token Bucket Filter;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rate&lt;/code&gt; : укажите скорость передачи (10 Гбит/с);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;burst&lt;/code&gt; : количество байтов, которое может поместиться в корзину (5 000 000) за один такт;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;limit&lt;/code&gt; : размер очереди в байтах (15 000 000).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Расчёт всплеска.
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tbf&lt;/code&gt; требует установки значения всплеска при ограничении скорости. Это значение должно быть достаточно высоким, чтобы обеспечить установленную вами скорость.&lt;/li&gt;
&lt;li&gt;Она должна быть не ниже указанной частоты, делённой на HZ, где HZ &amp;mdash; тактовая частота, настроенная как параметр ядра, и может быть извлечена с помощью следующей команды:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;egrep &lt;span class="s1"&gt;&amp;#39;^CONFIG_HZ_[0-9]+&amp;#39;&lt;/span&gt; /boot/config-&lt;span class="sb"&gt;`&lt;/span&gt;uname -r&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;HZ на &lt;code&gt;h1&lt;/code&gt; &amp;mdash; 250. Таким образом, для расчёта всплеска делим 10 Гбит/с на 250:
&lt;ul&gt;
&lt;li&gt;10 Gbps = 10,000,000,000 bps;&lt;/li&gt;
&lt;li&gt;burst = 10,000,000,000 [bps]/250 [s&lt;sup&gt;-1&lt;/sup&gt;] = 40,000,000 [bit] = 40,000,000/8 [byte] = 5,000,000 [byte].&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Полученное значение должно использоваться в команде в качестве значения &lt;em&gt;burst&lt;/em&gt; (всплеска).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Проверим конфигурацию с помощью инструмента &lt;code&gt;iperf3&lt;/code&gt; для измерения пропускной способности.&lt;/li&gt;
&lt;li&gt;Запустим iPerf3 в режиме сервера, выполните команду &lt;code&gt;iperf3 -s&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Запустим iPerf3 в клиентском режиме, запустите команду &lt;code&gt;iperf3 -c 10.0.0.2&lt;/code&gt; для хоста &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Удалите конфигурацию на хосте &lt;code&gt;h1&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc del dev h1-eth0 root
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ограничение-скорости-на-коммутаторах"&gt;&lt;span class="section-num"&gt;4.3&lt;/span&gt; Ограничение скорости на коммутаторах&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Применим Token Bucket Filter к интерфейсам коммутатора.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;При ограничении скорости на интерфейсе &lt;code&gt;s1-eth2&lt;/code&gt; коммутатора &lt;code&gt;s1&lt;/code&gt; все сеансы связи между коммутатором &lt;code&gt;s1&lt;/code&gt; и коммутатором &lt;code&gt;s2&lt;/code&gt; будут фильтроваться в соответствии с применяемыми правилами.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Введите в терминале &lt;code&gt;s1&lt;/code&gt; команду &lt;code&gt;ifconfig&lt;/code&gt;, чтобы отобразить информацию, связанную с его сетевыми интерфейсами:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;s1-eth1&lt;/code&gt; : интерфейс, соединяющий коммутатор &lt;code&gt;s1&lt;/code&gt; с хостом &lt;code&gt;h1&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;s1-eth2&lt;/code&gt; : интерфейс, соединяющий коммутатор &lt;code&gt;s1&lt;/code&gt; с коммутатором &lt;code&gt;s2&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;s2-eth1&lt;/code&gt; : интерфейс, соединяющий коммутатор &lt;code&gt;s2&lt;/code&gt; с хостом &lt;code&gt;h2&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;s2-eth2&lt;/code&gt; : интерфейс, соединяющий коммутатор &lt;code&gt;s2&lt;/code&gt; с коммутатором &lt;code&gt;s1&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Примените правило ограничения скорости &lt;code&gt;tbf&lt;/code&gt; к интерфейсу коммутатора &lt;code&gt;s1&lt;/code&gt;, который соединяет его с коммутатором &lt;code&gt;s2&lt;/code&gt; (&lt;code&gt;s1-eth2&lt;/code&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc add dev s1-eth2 root tbf rate 10gbit burst &lt;span class="m"&gt;5000000&lt;/span&gt; limit &lt;span class="m"&gt;15000000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Параметры Token Bucket Filter следующие:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rate&lt;/code&gt; : 10gbit;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;burst&lt;/code&gt; : 5,000,000;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;limit&lt;/code&gt; : 15,000,000.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Проверим конфигурацию с помощью инструмента &lt;code&gt;iperf3&lt;/code&gt; для измерения пропускной способности.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Запустим iPerf3 в режиме сервера, выполните команду &lt;code&gt;iperf3 -s&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Запустим iPerf3 в клиентском режиме, запустите команду &lt;code&gt;iperf3 -c 10.0.0.2&lt;/code&gt; для хоста &lt;code&gt;h1&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Удалите конфигурацию на коммутаторе &lt;code&gt;s1&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc del dev s1-eth2 root
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="объединение-netem-и-tbf"&gt;&lt;span class="section-num"&gt;4.4&lt;/span&gt; Объединение NETEM и TBF&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;NETEM используется для введения задержки, джиттера, повреждения пакетов и т. д.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TBF может использоваться для ограничения скорости.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Возможно комбинировать несколько модулей.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Первый &lt;code&gt;qdisc&lt;/code&gt; (&lt;code&gt;qdisc1&lt;/code&gt;) присоединён к корневой метке. Затем последующие &lt;code&gt;qdisc&lt;/code&gt; можно прикрепить к своим родителям, указав правильную метку.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Объединим NETEM и TBF, чтобы сделать эмуляцию адекватней. Введём задержку, джиттер и повреждение пакетов, указав скорость на интерфейсе коммутатора &lt;code&gt;s1&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Введём в терминале коммутатора &lt;code&gt;s1&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc add dev s1-eth2 root handle 1: netem delay 10ms
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Ключевое слово &lt;code&gt;handle&lt;/code&gt; задаёт дескриптор подключения, имеющий смысл очерёдности подключения разных дисциплин &lt;code&gt;qdisc&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Теперь можно убедиться, что соединение от хоста &lt;code&gt;h1&lt;/code&gt; к хосту &lt;code&gt;h2&lt;/code&gt; имеет заданную задержку.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Запустите команду &lt;code&gt;ping&lt;/code&gt; с терминала хоста &lt;code&gt;h1&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Нажмите &lt;code&gt;Ctrl+c&lt;/code&gt;, чтобы остановить тест.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Добавим второе правило на коммутаторе &lt;code&gt;s1&lt;/code&gt;, которое задаёт ограничение скорости с помощью &lt;code&gt;tbf&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc add dev s1-eth2 parent 1: handle 2: tbf rate 2gbit burst &lt;span class="m"&gt;1000000&lt;/span&gt; limit &lt;span class="m"&gt;2000000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Параметры Token Bucket Filter следующие:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rate&lt;/code&gt; : 2gbit;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;burst&lt;/code&gt; : 1,000,000;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;limit&lt;/code&gt; : 2,000,000.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Проверим предыдущую конфигурацию с помощью инструмента iperf3 для измерения пропускной способности.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Запустим iPerf3 в режиме сервера, выполните команду &lt;code&gt;iperf3 -s&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Запустим iPerf3 в клиентском режиме, запустите команду &lt;code&gt;iperf3 -c 10.0.0.2&lt;/code&gt; для хоста &lt;code&gt;h1&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;iperf3 -c 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Чтобы остановить сервер, нажмите &lt;code&gt;Ctrl+c&lt;/code&gt; в терминале хоста &lt;code&gt;h2&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Удалите конфигурацию на коммутаторе &lt;code&gt;s1&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo tc qdisc del dev s1-eth2 root
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="видео-token-bucket-filter-dot-интерактивный-эксперимент"&gt;&lt;span class="section-num"&gt;4.5&lt;/span&gt; Видео: Token Bucket Filter. Интерактивный эксперимент&lt;/h3&gt;
&lt;link rel="stylesheet" href="https://yamadharma.github.io/css/flick/jquery-ui.min.2145606a4147a5c2562a0afa9e996323dcbd14469acf347b81292370e967b906.css" integrity="sha256-IUVgakFHpcJWKgr6npljI9y9FEaazzR7gSkjcOlnuQY="&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;
&lt;/script&gt;
&lt;script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"&gt;
&lt;/script&gt;
&lt;script&gt;
$(function() {
$( "#tabs, #tabs1, #tabs2, #tabs3, #tabs4, #tabs5, #tabs6, #tabs7, #tabs8" ).tabs();
});
&lt;/script&gt;
&lt;div id = "tabs"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href = "#tab-1"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href = "#tab-2"&gt;
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id ="tab-0"&gt;
&lt;div class="embed video-player"&gt;
&lt;iframe class="rutube-player" type="text/html"
width="647" height="364"
src="https://rutube.ru/play/embed/273ce5d8455a3ba7c18e99a0ce03ced4"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0"&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-1"&gt;
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;"&gt;
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/ncCPgMUdgjM?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id ="tab-2"&gt;
&lt;/div&gt;
&lt;/div&gt;
tabe widget</description></item></channel></rss>