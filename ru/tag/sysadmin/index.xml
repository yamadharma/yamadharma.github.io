<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>sysadmin | Д. С. Кулябов</title><link>https://yamadharma.github.io/ru/tag/sysadmin/</link><atom:link href="https://yamadharma.github.io/ru/tag/sysadmin/index.xml" rel="self" type="application/rss+xml"/><description>sysadmin</description><generator>Wowchemy (https://wowchemy.com)</generator><language>ru-ru</language><copyright>© 2023 Dmitry S. Kulyabov</copyright><lastBuildDate>Sat, 19 Aug 2023 13:34:00 +0300</lastBuildDate><image><url>https://yamadharma.github.io/media/icon_hu0a661dd90139895e92e2f18ae9404407_611148_512x512_fill_lanczos_center_3.png</url><title>sysadmin</title><link>https://yamadharma.github.io/ru/tag/sysadmin/</link></image><item><title>Подключение к Cisco VPN</title><link>https://yamadharma.github.io/ru/post/2023/08/19/cisco-vpn-client-setup/</link><pubDate>Sat, 19 Aug 2023 13:34:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/19/cisco-vpn-client-setup/</guid><description>&lt;p>Подключение к Cisco AnyConnect VPN.
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-в-linux">&lt;span class="section-num">2&lt;/span> Установка в Linux&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подключение">&lt;span class="section-num">3&lt;/span> Подключение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dns">&lt;span class="section-num">4&lt;/span> DNS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;/p>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>В качестве клиента для Cisco AnyConnect VPN предлагается использовать OpenConnect.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://gitlab.com/openconnect/openconnect" target="_blank" rel="noopener">https://gitlab.com/openconnect/openconnect&lt;/a>&lt;/li>
&lt;li>Репозиторий модуля для Network Manager: &lt;a href="https://gitlab.gnome.org/GNOME/NetworkManager-openconnect" target="_blank" rel="noopener">https://gitlab.gnome.org/GNOME/NetworkManager-openconnect&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-в-linux">&lt;span class="section-num">2&lt;/span> Установка в Linux&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/h3>
&lt;ul>
&lt;li>Установите клиента для Network Manager:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge net-vpn/networkmanager-openconnect
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="подключение">&lt;span class="section-num">3&lt;/span> Подключение&lt;/h2>
&lt;ul>
&lt;li>При создании соединения в Network Manager необходимо задать адрес шлюза.&lt;/li>
&lt;li>При первом подключении у Вас запросят парольные данные.&lt;/li>
&lt;li>Если Вы их сохраните, то более их не надо будет набирать.&lt;/li>
&lt;li>Если у вас используется сертификат или нужно указать какие-то дополнительные параметры, то это необходимо сделать в этом же окне.&lt;/li>
&lt;/ul>
&lt;h2 id="dns">&lt;span class="section-num">4&lt;/span> DNS&lt;/h2>
&lt;ul>
&lt;li>Обычно VPN настроены на раздельную маршрутизацию и раздельный DNS.&lt;/li>
&lt;li>Для удобной работы с раздельным DNS рекомендуется использовать &lt;code>systemd-resolved&lt;/code> в stub-режиме (режиме заглушки) &lt;code>resolv.conf&lt;/code>.&lt;/li>
&lt;li>Просмотр параметров работы &lt;code>systemd-resolved&lt;/code> выполняется с помощью команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">resolvectl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Wayland. Настройка приложений</title><link>https://yamadharma.github.io/ru/post/2023/08/14/wayland-application-setup/</link><pubDate>Mon, 14 Aug 2023 13:59:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/14/wayland-application-setup/</guid><description>&lt;p>Настройка приложений для Wayland.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#chrome">&lt;span class="section-num">1&lt;/span> Chrome&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="chrome">&lt;span class="section-num">1&lt;/span> Chrome&lt;/h2>
&lt;ul>
&lt;li>Поддержка Wayland включается флагом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--ozone-platform-hint&lt;span class="o">=&lt;/span>auto
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если это не срабатывает, можно указать явно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--ozone-platform&lt;span class="o">=&lt;/span>wayland
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если возникают проблемы с методами ввода, можно принудительно установить версию GTK:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--gtk-version&lt;span class="o">=&lt;/span>&lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отсутствие верхних баров может быть решено путем дополнительного использования следующего флага:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--enable-features&lt;span class="o">=&lt;/span>WaylandWindowDecorations
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для захвата экрана на Wayland:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--enable-webrtc-pipewire-capturer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно установить флаги запуска в конфигурационном файле (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/02/28/google-chrome-flags/">Флаги запуска Google Chrome&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## /etc/chrome-flags.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--ozone-platform-hint&lt;span class="o">=&lt;/span>auto
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-features&lt;span class="o">=&lt;/span>WaylandWindowDecorations
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-webrtc-pipewire-capturer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--gtk-version&lt;span class="o">=&lt;/span>&lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Wayland</title><link>https://yamadharma.github.io/ru/post/2023/08/14/wayland/</link><pubDate>Mon, 14 Aug 2023 11:49:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/14/wayland/</guid><description>&lt;p>Wayland.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">2&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/">Переход на Sway&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/14/wayland-operation-mode/">Wayland. Режим работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/14/wayland-application-setup/">Wayland. Настройка приложений&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">2&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Awesome Wayland: &lt;a href="https://github.com/natpen/awesome-wayland" target="_blank" rel="noopener">https://github.com/natpen/awesome-wayland&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Wayland. Режим работы</title><link>https://yamadharma.github.io/ru/post/2023/08/14/wayland-operation-mode/</link><pubDate>Mon, 14 Aug 2023 11:27:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/14/wayland-operation-mode/</guid><description>&lt;p>Узнать режим работы приложений: Wayland или Xorg.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#тип-сессии">&lt;span class="section-num">1&lt;/span> Тип сессии&lt;/a>&lt;/li>
&lt;li>&lt;a href="#какие-приложения-используют-xwayland">&lt;span class="section-num">2&lt;/span> Какие приложения используют XWayland&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="тип-сессии">&lt;span class="section-num">1&lt;/span> Тип сессии&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Можно вывести содержимое переменной окружения &lt;code>XDG_SESSION_TYPE&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$XDG_SESSION_TYPE&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Результат:
&lt;ul>
&lt;li>если используется Wayland, то будет выведено &lt;code>wayland&lt;/code>;&lt;/li>
&lt;li>если используется Xorg, то будет выведено &lt;code>X11&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Можно узнать тип текущей сессии с помощью &lt;code>loginctl&lt;/code>, получив идентификатор сессии из переменной окружения &lt;code>XDG_SESSION_ID&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">loginctl show-session &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$XDG_SESSION_ID&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -p Type
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="какие-приложения-используют-xwayland">&lt;span class="section-num">2&lt;/span> Какие приложения используют XWayland&lt;/h2>
&lt;ul>
&lt;li>Для того чтобы старые приложения X11 могли работать в Wayland, существует прослойка совместимости XWayland.&lt;/li>
&lt;li>Команда &lt;code>xlsclients&lt;/code> отображает все программы, которые используют Xwayland в данный момент:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xlsclients
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Сеть на Донской</title><link>https://yamadharma.github.io/ru/post/2023/08/13/network-donskaya/</link><pubDate>Sun, 13 Aug 2023 19:40:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/13/network-donskaya/</guid><description>&lt;p>Сеть на Донской.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">&lt;/nav>
&lt;/details></description></item><item><title>Window manager для Windows</title><link>https://yamadharma.github.io/ru/post/2023/08/09/window-manager-windows/</link><pubDate>Wed, 09 Aug 2023 22:09:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/09/window-manager-windows/</guid><description>&lt;p>Альтернативные window manager для Windows.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#blackbox">&lt;span class="section-num">1&lt;/span> BlackBox&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#xoblite">&lt;span class="section-num">1.1&lt;/span> xoblite&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="blackbox">&lt;span class="section-num">1&lt;/span> BlackBox&lt;/h2>
&lt;ul>
&lt;li>Базирующиеся на Black Box.&lt;/li>
&lt;/ul>
&lt;h3 id="xoblite">&lt;span class="section-num">1.1&lt;/span> xoblite&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://xoblite.net/" target="_blank" rel="noopener">https://xoblite.net/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/xoblite" target="_blank" rel="noopener">https://github.com/xoblite&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Управление файлами конфигурации. Домашний каталог. Репозиторий</title><link>https://yamadharma.github.io/ru/post/2023/07/30/configuration-file-management-repo/</link><pubDate>Sun, 30 Jul 2023 14:24:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/07/30/configuration-file-management-repo/</guid><description>&lt;p>Репозиторий конфигурационных файлов для домашнего каталога.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-для-десктопа">&lt;span class="section-num">2&lt;/span> Конфигурация для десктопа&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#содержимое">&lt;span class="section-num">2.1&lt;/span> Содержимое&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2.2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-собственного-репозитория-с-помощью-утилит">&lt;span class="section-num">2.2.1&lt;/span> Создание собственного репозитория с помощью утилит&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-репозитория-к-своей-системе">&lt;span class="section-num">2.2.2&lt;/span> Подключение репозитория к своей системе&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Набор конфигурационных файлов.&lt;/li>
&lt;li>Конфигурационные файлы сделаны в формате Chezmoi (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/10/28/configuration-file-management-chezmoi/">Управление файлами конфигурации. Домашний каталог. Chezmoi&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация-для-десктопа">&lt;span class="section-num">2&lt;/span> Конфигурация для десктопа&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/yamadharma/dotfiles-template" target="_blank" rel="noopener">https://github.com/yamadharma/dotfiles-template&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="содержимое">&lt;span class="section-num">2.1&lt;/span> Содержимое&lt;/h3>
&lt;ul>
&lt;li>Bash&lt;/li>
&lt;li>Tmux&lt;/li>
&lt;li>i3wm (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>)&lt;/li>
&lt;li>Sway (см. &lt;a href="https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/">Переход на Sway&lt;/a>)&lt;/li>
&lt;/ul>
&lt;h3 id="установка">&lt;span class="section-num">2.2&lt;/span> Установка&lt;/h3>
&lt;h4 id="создание-собственного-репозитория-с-помощью-утилит">&lt;span class="section-num">2.2.1&lt;/span> Создание собственного репозитория с помощью утилит&lt;/h4>
&lt;ul>
&lt;li>Будем использовать утилиты командной строки для работы с github (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/04/github-command-line-utilities/">github: утилиты командной строки&lt;/a>).&lt;/li>
&lt;li>Создадим свой репозиторий для конфигурационных файлов на основе шаблона:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gh repo create dotfiles --template&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;yamadharma/dotfiles-template&amp;#34;&lt;/span> --private
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="подключение-репозитория-к-своей-системе">&lt;span class="section-num">2.2.2&lt;/span> Подключение репозитория к своей системе&lt;/h4>
&lt;ul>
&lt;li>Инициализируйте &lt;code>chezmoi&lt;/code> с вашим репозиторием &lt;code>dotfiles&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init git@github.com:&amp;lt;username&amp;gt;/dotfiles.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте, какие изменения внесёт &lt;code>chezmoi&lt;/code> в домашний каталог, запустив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi diff
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если вас устраивают изменения, внесённые &lt;code>chezmoi&lt;/code>, запустите:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi apply -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Восстановление btrfs</title><link>https://yamadharma.github.io/ru/post/2023/07/21/btrfs-recovery/</link><pubDate>Fri, 21 Jul 2023 16:56:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/07/21/btrfs-recovery/</guid><description>&lt;p>Восстановление btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#предварительная-подготовка">&lt;span class="section-num">1&lt;/span> Предварительная подготовка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#восстановление">&lt;span class="section-num">2&lt;/span> Восстановление&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="предварительная-подготовка">&lt;span class="section-num">1&lt;/span> Предварительная подготовка&lt;/h2>
&lt;ul>
&lt;li>Подготовьте флеш-диск (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/10/bootable-usb-stick/">Загрузочная флешка&lt;/a>)&lt;/li>
&lt;li>Поместите на него образ SystemRescueCD.&lt;/li>
&lt;/ul>
&lt;h2 id="восстановление">&lt;span class="section-num">2&lt;/span> Восстановление&lt;/h2>
&lt;ul>
&lt;li>Загружаемся с внешнего устройства.
&lt;ul>
&lt;li>При загрузке с SystemRescueCD лучше выбрать пункт &lt;code>copy system to RAM&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Запускаем восстановление файловой системы на партиции:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs check --repair /dev/nvme0n1p4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запускаем проверку блоков:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/nvme0n1p4 /mnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs scrub start -Bd /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Сборка образа VyOS. Репозиторий</title><link>https://yamadharma.github.io/ru/post/2023/07/16/vyos-build-repository/</link><pubDate>Sun, 16 Jul 2023 19:13:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/07/16/vyos-build-repository/</guid><description>&lt;p>Репозиторий с поддержкой сборки образов VyOS.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозиторий">&lt;span class="section-num">2&lt;/span> Репозиторий&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скрипт-для-сборки">&lt;span class="section-num">3&lt;/span> Скрипт для сборки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#описание-приложения-для-gns3">&lt;span class="section-num">4&lt;/span> Описание приложения для GNS3&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование-в-gns3">&lt;span class="section-num">5&lt;/span> Использование в GNS3&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-образа-vyos-quemu-в-gns3">&lt;span class="section-num">5.1&lt;/span> Установка образа VyOS quemu в GNS3&lt;/a>&lt;/li>
&lt;li>&lt;a href="#видео-установка-образа-vyos-quemu-в-gns3">&lt;span class="section-num">5.2&lt;/span> Видео: Установка образа VyOS quemu в GNS3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий предназначен для хранения образов VyOS, собранных для обучения.&lt;/li>
&lt;li>Образы собираются по стандартной методике (см. &lt;a href="https://yamadharma.github.io/ru/course/nettech/gns3-vyos/">GNS3. Образ VyOS&lt;/a>).&lt;/li>
&lt;li>Сборка организуется по технологии непрерывной интеграции (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/07/16/continuous-integration-github-actions/">Непрерывная интеграция. GitHub Actions&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="репозиторий">&lt;span class="section-num">2&lt;/span> Репозиторий&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/yamadharma/vyos-build" target="_blank" rel="noopener">https://github.com/yamadharma/vyos-build&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="скрипт-для-сборки">&lt;span class="section-num">3&lt;/span> Скрипт для сборки&lt;/h2>
&lt;ul>
&lt;li>Помещается в каталог &lt;code>.github/workflows&lt;/code> репозиторий.&lt;/li>
&lt;li>Назовём его &lt;code>vyos-build-release.yml&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-1">&lt;a class="lnlinks" href="#org-coderef--59b1f4-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">VyOS Build (Release)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-2">&lt;a class="lnlinks" href="#org-coderef--59b1f4-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-3">&lt;a class="lnlinks" href="#org-coderef--59b1f4-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-4">&lt;a class="lnlinks" href="#org-coderef--59b1f4-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-5">&lt;a class="lnlinks" href="#org-coderef--59b1f4-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-6">&lt;a class="lnlinks" href="#org-coderef--59b1f4-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">​ - &amp;#34;*&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-7">&lt;a class="lnlinks" href="#org-coderef--59b1f4-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-8">&lt;a class="lnlinks" href="#org-coderef--59b1f4-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-9">&lt;a class="lnlinks" href="#org-coderef--59b1f4-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-10">&lt;a class="lnlinks" href="#org-coderef--59b1f4-10"> 10&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-11">&lt;a class="lnlinks" href="#org-coderef--59b1f4-11"> 11&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-12">&lt;a class="lnlinks" href="#org-coderef--59b1f4-12"> 12&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-13">&lt;a class="lnlinks" href="#org-coderef--59b1f4-13"> 13&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># For VyOS 1.2 (crux) use vyos/vyos-build:crux&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-14">&lt;a class="lnlinks" href="#org-coderef--59b1f4-14"> 14&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># For VyOS 1.3 (equuleus) use vyos/vyos-build:equuleus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-15">&lt;a class="lnlinks" href="#org-coderef--59b1f4-15"> 15&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># For our VyOS rolling release you should use vyos/vyos-build which will always refer to the latest image.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-16">&lt;a class="lnlinks" href="#org-coderef--59b1f4-16"> 16&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Ref: https://docs.vyos.io/en/latest/contributing/build-vyos.html#build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-17">&lt;a class="lnlinks" href="#org-coderef--59b1f4-17"> 17&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos/vyos-build:equuleus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-18">&lt;a class="lnlinks" href="#org-coderef--59b1f4-18"> 18&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-19">&lt;a class="lnlinks" href="#org-coderef--59b1f4-19"> 19&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">TZ&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Etc/UTC&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-20">&lt;a class="lnlinks" href="#org-coderef--59b1f4-20"> 20&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">options&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>--&lt;span class="l">privileged&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-21">&lt;a class="lnlinks" href="#org-coderef--59b1f4-21"> 21&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-22">&lt;a class="lnlinks" href="#org-coderef--59b1f4-22"> 22&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-23">&lt;a class="lnlinks" href="#org-coderef--59b1f4-23"> 23&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-24">&lt;a class="lnlinks" href="#org-coderef--59b1f4-24"> 24&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Set env&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-25">&lt;a class="lnlinks" href="#org-coderef--59b1f4-25"> 25&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-26">&lt;a class="lnlinks" href="#org-coderef--59b1f4-26"> 26&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> echo &amp;#34;RELEASE_VERSION=${GITHUB_REF:11}&amp;#34; &amp;gt;&amp;gt; $GITHUB_ENV&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-27">&lt;a class="lnlinks" href="#org-coderef--59b1f4-27"> 27&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-28">&lt;a class="lnlinks" href="#org-coderef--59b1f4-28"> 28&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">git clone vyos-build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-29">&lt;a class="lnlinks" href="#org-coderef--59b1f4-29"> 29&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-30">&lt;a class="lnlinks" href="#org-coderef--59b1f4-30"> 30&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> set -eux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-31">&lt;a class="lnlinks" href="#org-coderef--59b1f4-31"> 31&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-32">&lt;a class="lnlinks" href="#org-coderef--59b1f4-32"> 32&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> git clone -b equuleus --single-branch https://github.com/vyos/vyos-build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-33">&lt;a class="lnlinks" href="#org-coderef--59b1f4-33"> 33&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-34">&lt;a class="lnlinks" href="#org-coderef--59b1f4-34"> 34&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">configure&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-35">&lt;a class="lnlinks" href="#org-coderef--59b1f4-35"> 35&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">working-directory&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-36">&lt;a class="lnlinks" href="#org-coderef--59b1f4-36"> 36&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-37">&lt;a class="lnlinks" href="#org-coderef--59b1f4-37"> 37&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> set -eux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-38">&lt;a class="lnlinks" href="#org-coderef--59b1f4-38"> 38&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-39">&lt;a class="lnlinks" href="#org-coderef--59b1f4-39"> 39&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> ./configure \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-40">&lt;a class="lnlinks" href="#org-coderef--59b1f4-40"> 40&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> --architecture amd64 \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-41">&lt;a class="lnlinks" href="#org-coderef--59b1f4-41"> 41&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> --build-by yamadharma@gmail.com \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-42">&lt;a class="lnlinks" href="#org-coderef--59b1f4-42"> 42&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> --build-type release \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-43">&lt;a class="lnlinks" href="#org-coderef--59b1f4-43"> 43&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> --version ${{ env.RELEASE_VERSION }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-44">&lt;a class="lnlinks" href="#org-coderef--59b1f4-44"> 44&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-45">&lt;a class="lnlinks" href="#org-coderef--59b1f4-45"> 45&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">make iso&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-46">&lt;a class="lnlinks" href="#org-coderef--59b1f4-46"> 46&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">working-directory&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-47">&lt;a class="lnlinks" href="#org-coderef--59b1f4-47"> 47&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-48">&lt;a class="lnlinks" href="#org-coderef--59b1f4-48"> 48&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> set -eux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-49">&lt;a class="lnlinks" href="#org-coderef--59b1f4-49"> 49&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-50">&lt;a class="lnlinks" href="#org-coderef--59b1f4-50"> 50&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> make iso&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-51">&lt;a class="lnlinks" href="#org-coderef--59b1f4-51"> 51&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-52">&lt;a class="lnlinks" href="#org-coderef--59b1f4-52"> 52&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">make qemu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-53">&lt;a class="lnlinks" href="#org-coderef--59b1f4-53"> 53&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">working-directory&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-54">&lt;a class="lnlinks" href="#org-coderef--59b1f4-54"> 54&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-55">&lt;a class="lnlinks" href="#org-coderef--59b1f4-55"> 55&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> set -eux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-56">&lt;a class="lnlinks" href="#org-coderef--59b1f4-56"> 56&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-57">&lt;a class="lnlinks" href="#org-coderef--59b1f4-57"> 57&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> make qemu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-58">&lt;a class="lnlinks" href="#org-coderef--59b1f4-58"> 58&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-59">&lt;a class="lnlinks" href="#org-coderef--59b1f4-59"> 59&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ls&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-60">&lt;a class="lnlinks" href="#org-coderef--59b1f4-60"> 60&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-61">&lt;a class="lnlinks" href="#org-coderef--59b1f4-61"> 61&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> set -eux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-62">&lt;a class="lnlinks" href="#org-coderef--59b1f4-62"> 62&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-63">&lt;a class="lnlinks" href="#org-coderef--59b1f4-63"> 63&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> pwd
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-64">&lt;a class="lnlinks" href="#org-coderef--59b1f4-64"> 64&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> ls -lah
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-65">&lt;a class="lnlinks" href="#org-coderef--59b1f4-65"> 65&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> ls -lah vyos-build/build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-66">&lt;a class="lnlinks" href="#org-coderef--59b1f4-66"> 66&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-67">&lt;a class="lnlinks" href="#org-coderef--59b1f4-67"> 67&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/create-release@master&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-68">&lt;a class="lnlinks" href="#org-coderef--59b1f4-68"> 68&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">create_release&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-69">&lt;a class="lnlinks" href="#org-coderef--59b1f4-69"> 69&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-70">&lt;a class="lnlinks" href="#org-coderef--59b1f4-70"> 70&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">GITHUB_TOKEN&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-71">&lt;a class="lnlinks" href="#org-coderef--59b1f4-71"> 71&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-72">&lt;a class="lnlinks" href="#org-coderef--59b1f4-72"> 72&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tag_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ github.ref }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-73">&lt;a class="lnlinks" href="#org-coderef--59b1f4-73"> 73&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">release_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">VyOS ${{ github.ref }} for Education&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-74">&lt;a class="lnlinks" href="#org-coderef--59b1f4-74"> 74&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-75">&lt;a class="lnlinks" href="#org-coderef--59b1f4-75"> 75&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> VyOS ${{ env.RELEASE_VERSION }} for Education&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-76">&lt;a class="lnlinks" href="#org-coderef--59b1f4-76"> 76&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">draft&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-77">&lt;a class="lnlinks" href="#org-coderef--59b1f4-77"> 77&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prerelease&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-78">&lt;a class="lnlinks" href="#org-coderef--59b1f4-78"> 78&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-79">&lt;a class="lnlinks" href="#org-coderef--59b1f4-79"> 79&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/upload-release-asset@master&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-80">&lt;a class="lnlinks" href="#org-coderef--59b1f4-80"> 80&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-81">&lt;a class="lnlinks" href="#org-coderef--59b1f4-81"> 81&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">GITHUB_TOKEN&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-82">&lt;a class="lnlinks" href="#org-coderef--59b1f4-82"> 82&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-83">&lt;a class="lnlinks" href="#org-coderef--59b1f4-83"> 83&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-84">&lt;a class="lnlinks" href="#org-coderef--59b1f4-84"> 84&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">upload_url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ steps.create_release.outputs.upload_url }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-85">&lt;a class="lnlinks" href="#org-coderef--59b1f4-85"> 85&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-86">&lt;a class="lnlinks" href="#org-coderef--59b1f4-86"> 86&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-build/build/vyos-${{ env.RELEASE_VERSION }}-amd64.iso&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-87">&lt;a class="lnlinks" href="#org-coderef--59b1f4-87"> 87&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-88">&lt;a class="lnlinks" href="#org-coderef--59b1f4-88"> 88&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-${{ env.RELEASE_VERSION }}-amd64.iso&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-89">&lt;a class="lnlinks" href="#org-coderef--59b1f4-89"> 89&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-90">&lt;a class="lnlinks" href="#org-coderef--59b1f4-90"> 90&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_content_type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">application/x-iso9660-image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-91">&lt;a class="lnlinks" href="#org-coderef--59b1f4-91"> 91&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-92">&lt;a class="lnlinks" href="#org-coderef--59b1f4-92"> 92&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/upload-release-asset@master&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-93">&lt;a class="lnlinks" href="#org-coderef--59b1f4-93"> 93&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-94">&lt;a class="lnlinks" href="#org-coderef--59b1f4-94"> 94&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">GITHUB_TOKEN&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-95">&lt;a class="lnlinks" href="#org-coderef--59b1f4-95"> 95&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-96">&lt;a class="lnlinks" href="#org-coderef--59b1f4-96"> 96&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-97">&lt;a class="lnlinks" href="#org-coderef--59b1f4-97"> 97&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">upload_url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ steps.create_release.outputs.upload_url }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-98">&lt;a class="lnlinks" href="#org-coderef--59b1f4-98"> 98&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-99">&lt;a class="lnlinks" href="#org-coderef--59b1f4-99"> 99&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-build/build/vyos-${{ env.RELEASE_VERSION }}-amd64.qcow2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-100">&lt;a class="lnlinks" href="#org-coderef--59b1f4-100">100&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-101">&lt;a class="lnlinks" href="#org-coderef--59b1f4-101">101&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-${{ env.RELEASE_VERSION }}-amd64.qcow2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-102">&lt;a class="lnlinks" href="#org-coderef--59b1f4-102">102&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-103">&lt;a class="lnlinks" href="#org-coderef--59b1f4-103">103&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_content_type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">application/x-qemu-disk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Строка &lt;a href="#org-coderef--59b1f4-6">6&lt;/a>: запускаем скрипт при создании любого тега.&lt;/li>
&lt;li>Строка &lt;a href="#org-coderef--59b1f4-26">26&lt;/a>: из полной ссылки на ветку тега выделяем номер версии.
&lt;ul>
&lt;li>&lt;code>refs/tags/v1.3.x&lt;/code> -&amp;gt; &lt;code>1.3.x&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="описание-приложения-для-gns3">&lt;span class="section-num">4&lt;/span> Описание приложения для GNS3&lt;/h2>
&lt;ul>
&lt;li>Для установки образа VyOS в GNS3 (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/05/07/gns3-network-simulation-tool/">Средство натурного моделирования сетей GNS3&lt;/a>) необходимо создать файл приложения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-2">&lt;a class="lnlinks" href="#hl-1-2"> 2&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;appliance_id&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;a5250e6e-be54-40d3-9082-0f0b601d3231&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-3">&lt;a class="lnlinks" href="#hl-1-3"> 3&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;VyOS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-4">&lt;a class="lnlinks" href="#hl-1-4"> 4&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;category&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;router&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-5">&lt;a class="lnlinks" href="#hl-1-5"> 5&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;VyOS is a community fork of Vyatta, a Linux-based network operating system that provides software-based network routing, firewall, and VPN functionality. Non-official build for Eduacation&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-6">&lt;a class="lnlinks" href="#hl-1-6"> 6&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;vendor_name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Linux&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-7">&lt;a class="lnlinks" href="#hl-1-7"> 7&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;vendor_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://vyos.net/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-8">&lt;a class="lnlinks" href="#hl-1-8"> 8&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;documentation_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://docs.vyos.io/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-9">&lt;a class="lnlinks" href="#hl-1-9"> 9&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;product_name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;VyOS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-10">&lt;a class="lnlinks" href="#hl-1-10">10&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;product_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://vyos.net/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-11">&lt;a class="lnlinks" href="#hl-1-11">11&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;registry_version&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-12">&lt;a class="lnlinks" href="#hl-1-12">12&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;status&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;stable&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-13">&lt;a class="lnlinks" href="#hl-1-13">13&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;maintainer&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Dmitry S. Kulyabov&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-14">&lt;a class="lnlinks" href="#hl-1-14">14&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;maintainer_email&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;yamadharma@gmail.com&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-15">&lt;a class="lnlinks" href="#hl-1-15">15&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;usage&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Default username/password is vyos/vyos.\n\nThe -KVM versions are ready to use, no installation is required.\nThe other images will start the router from the CDROM on initial boot. Login and then type \&amp;#34;install image\&amp;#34; and follow the instructions.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-16">&lt;a class="lnlinks" href="#hl-1-16">16&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;symbol&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;vyos.svg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-17">&lt;a class="lnlinks" href="#hl-1-17">17&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;port_name_format&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;eth{0}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-18">&lt;a class="lnlinks" href="#hl-1-18">18&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;qemu&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-19">&lt;a class="lnlinks" href="#hl-1-19">19&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;adapter_type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;e1000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-20">&lt;a class="lnlinks" href="#hl-1-20">20&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;adapters&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-21">&lt;a class="lnlinks" href="#hl-1-21">21&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;ram&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">512&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-22">&lt;a class="lnlinks" href="#hl-1-22">22&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;hda_disk_interface&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;scsi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-23">&lt;a class="lnlinks" href="#hl-1-23">23&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;arch&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;x86_64&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-24">&lt;a class="lnlinks" href="#hl-1-24">24&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;console_type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;telnet&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-25">&lt;a class="lnlinks" href="#hl-1-25">25&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;boot_priority&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;cd&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-26">&lt;a class="lnlinks" href="#hl-1-26">26&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;kvm&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;allow&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-27">&lt;a class="lnlinks" href="#hl-1-27">27&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-28">&lt;a class="lnlinks" href="#hl-1-28">28&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;images&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-29">&lt;a class="lnlinks" href="#hl-1-29">29&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-30">&lt;a class="lnlinks" href="#hl-1-30">30&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filename&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;vyos-1.3.3-amd64.iso&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-31">&lt;a class="lnlinks" href="#hl-1-31">31&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1.3.3-iso&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-32">&lt;a class="lnlinks" href="#hl-1-32">32&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;md5sum&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1ab25e1b63d9e3305bd5264721305794&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-33">&lt;a class="lnlinks" href="#hl-1-33">33&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filesize&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">382730240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-34">&lt;a class="lnlinks" href="#hl-1-34">34&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/yamadharma/vyos-build/releases/tag/v1.3.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-35">&lt;a class="lnlinks" href="#hl-1-35">35&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;direct_download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/yamadharma/vyos-build/releases/download/v1.3.3/vyos-1.3.3-amd64.iso&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-36">&lt;a class="lnlinks" href="#hl-1-36">36&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-37">&lt;a class="lnlinks" href="#hl-1-37">37&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-38">&lt;a class="lnlinks" href="#hl-1-38">38&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filename&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;vyos-1.3.3-amd64.qcow2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-39">&lt;a class="lnlinks" href="#hl-1-39">39&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1.3.3-qemu&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-40">&lt;a class="lnlinks" href="#hl-1-40">40&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;md5sum&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;9dffb9ab2af456c1eb993c0beef81b91&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-41">&lt;a class="lnlinks" href="#hl-1-41">41&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filesize&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">410058752&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-42">&lt;a class="lnlinks" href="#hl-1-42">42&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/yamadharma/vyos-build/releases/tag/v1.3.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-43">&lt;a class="lnlinks" href="#hl-1-43">43&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;direct_download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/yamadharma/vyos-build/releases/download/v1.3.3/vyos-1.3.3-amd64.qcow2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-44">&lt;a class="lnlinks" href="#hl-1-44">44&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-45">&lt;a class="lnlinks" href="#hl-1-45">45&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-46">&lt;a class="lnlinks" href="#hl-1-46">46&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filename&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;empty8G.qcow2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-47">&lt;a class="lnlinks" href="#hl-1-47">47&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1.0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-48">&lt;a class="lnlinks" href="#hl-1-48">48&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;md5sum&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;f1d2c25b6990f99bd05b433ab603bdb4&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-49">&lt;a class="lnlinks" href="#hl-1-49">49&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filesize&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">197120&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-50">&lt;a class="lnlinks" href="#hl-1-50">50&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://sourceforge.net/projects/gns-3/files/Empty%20Qemu%20disk/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-51">&lt;a class="lnlinks" href="#hl-1-51">51&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;direct_download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://sourceforge.net/projects/gns-3/files/Empty%20Qemu%20disk/empty8G.qcow2/download&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-52">&lt;a class="lnlinks" href="#hl-1-52">52&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-53">&lt;a class="lnlinks" href="#hl-1-53">53&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-54">&lt;a class="lnlinks" href="#hl-1-54">54&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;versions&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-55">&lt;a class="lnlinks" href="#hl-1-55">55&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-56">&lt;a class="lnlinks" href="#hl-1-56">56&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1.3.3-iso&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-57">&lt;a class="lnlinks" href="#hl-1-57">57&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;images&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-58">&lt;a class="lnlinks" href="#hl-1-58">58&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;hda_disk_image&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;empty8G.qcow2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-59">&lt;a class="lnlinks" href="#hl-1-59">59&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;cdrom_image&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;vyos-1.3.3-amd64.iso&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-60">&lt;a class="lnlinks" href="#hl-1-60">60&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-61">&lt;a class="lnlinks" href="#hl-1-61">61&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-62">&lt;a class="lnlinks" href="#hl-1-62">62&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-63">&lt;a class="lnlinks" href="#hl-1-63">63&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1.3.3-qemu&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-64">&lt;a class="lnlinks" href="#hl-1-64">64&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;images&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-65">&lt;a class="lnlinks" href="#hl-1-65">65&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;hda_disk_image&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;vyos-1.3.3-amd64.qcow2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-66">&lt;a class="lnlinks" href="#hl-1-66">66&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-67">&lt;a class="lnlinks" href="#hl-1-67">67&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-68">&lt;a class="lnlinks" href="#hl-1-68">68&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-69">&lt;a class="lnlinks" href="#hl-1-69">69&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование-в-gns3">&lt;span class="section-num">5&lt;/span> Использование в GNS3&lt;/h2>
&lt;h3 id="установка-образа-vyos-quemu-в-gns3">&lt;span class="section-num">5.1&lt;/span> Установка образа VyOS quemu в GNS3&lt;/h3>
&lt;ul>
&lt;li>Скачайте файл &lt;code>vyos-edu.gns3a&lt;/code> из репозитория: &lt;a href="https://github.com/yamadharma/vyos-build/releases" target="_blank" rel="noopener">https://github.com/yamadharma/vyos-build/releases&lt;/a>.&lt;/li>
&lt;li>Импортируйте &lt;code>vyos-edu.gns3a&lt;/code> в GNS3 через пункт меню &lt;em>File&amp;gt;Import appliance&lt;/em>.
&lt;ul>
&lt;li>Документация: &lt;a href="https://docs.gns3.com/docs/using-gns3/beginners/import-gns3-appliance" target="_blank" rel="noopener">https://docs.gns3.com/docs/using-gns3/beginners/import-gns3-appliance&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Установите необходимую версию VyOS.&lt;/li>
&lt;/ul>
&lt;h3 id="видео-установка-образа-vyos-quemu-в-gns3">&lt;span class="section-num">5.2&lt;/span> Видео: Установка образа VyOS quemu в GNS3&lt;/h3>
&lt;nav>
&lt;div class="nav nav-tabs" id="nav-tab" role="tablist">
&lt;a class="nav-item nav-link active "
id="nav-ecdfba" data-toggle="tab" href="#ecdfba"
role="tab" aria-controls="nav-home" aria-selected="true">RuTube&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-bcedaf" data-toggle="tab" href="#bcedaf"
role="tab" aria-controls="nav-home" aria-selected="true">Youtube&lt;/a>
&lt;/div>
&lt;/nav>
&lt;div class="tab-content" id="nav-tab-content">
&lt;div class="tab-pane fade show active " id="ecdfba" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe class="rutube-player" type="text/html"
width="720" height="405"
src="https://rutube.ru/play/embed/951fc2e6bf2157c298e019136b83992b"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0">
&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="bcedaf" role="tabpanel" aria-labelledby="nav-1">
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/6bBXVc6bmrs" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;/div></description></item><item><title>Непрерывная интеграция. GitHub Actions</title><link>https://yamadharma.github.io/ru/post/2023/07/16/continuous-integration-github-actions/</link><pubDate>Sun, 16 Jul 2023 19:04:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/07/16/continuous-integration-github-actions/</guid><description>&lt;p>Непрерывная интеграция. GitHub Actions.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-концепции-github-actions">&lt;span class="section-num">2&lt;/span> Основные концепции Github Actions&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переменные-среды">&lt;span class="section-num">3&lt;/span> Переменные среды&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#соглашения-об-именовании-переменных-конфигурации">&lt;span class="section-num">3.1&lt;/span> Соглашения об именовании переменных конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переменные-среды-по-умолчанию">&lt;span class="section-num">3.2&lt;/span> Переменные среды по умолчанию&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#управление-разрешениями-для-github-token">&lt;span class="section-num">4&lt;/span> Управление разрешениями для GITHUB_TOKEN&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-разрешений-в-рабочем-процессе">&lt;span class="section-num">4.1&lt;/span> Установка разрешений в рабочем процессе&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-разрешений-по-умолчанию-для-репозитория">&lt;span class="section-num">4.2&lt;/span> Установка разрешений по умолчанию для репозитория&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Описание: &lt;a href="https://github.com/features/actions" target="_blank" rel="noopener">https://github.com/features/actions&lt;/a>&lt;/li>
&lt;li>GitHub Actions &amp;mdash; система непрерывной интеграции.&lt;/li>
&lt;li>Бесплатна для публичных репозиториев.&lt;/li>
&lt;li>В репозитории создаётся каталог &lt;code>.github/workflows&lt;/code>.&lt;/li>
&lt;li>В каталоге размещаются файлы с описанием шагов, которые нужно выполнить.&lt;/li>
&lt;li>В терминах Github Actions такое описание процесса называется workflow.&lt;/li>
&lt;/ul>
&lt;h2 id="основные-концепции-github-actions">&lt;span class="section-num">2&lt;/span> Основные концепции Github Actions&lt;/h2>
&lt;ul>
&lt;li>Воркфлоу (Workflows)
&lt;ul>
&lt;li>Каждый репозиторий на GitHub может содержать один или несколько воркфлоу.&lt;/li>
&lt;li>Каждый воркфлоу определяется в отдельном файле конфигурации в каталоге репозитория &lt;code>.github/workflows&lt;/code>.&lt;/li>
&lt;li>Несколько воркфлоу могут выполняться параллельно.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>События (Events)
&lt;ul>
&lt;li>Воркфлоу может запускаться одним или несколькими событиями.&lt;/li>
&lt;li>Это могут быть внутренние события GitHub, запланированные события, произвольные внешние события.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Задания (Jobs)
&lt;ul>
&lt;li>Воркфлоу состоит из одного или нескольких заданий.&lt;/li>
&lt;li>Задание содержит набор команд, которые запускаются вместе с рабочим процессом.&lt;/li>
&lt;li>По умолчанию при запуске воркфлоу все его задания выполняются параллельно, однако между ними можно определить зависимость, чтобы они выполнялись последовательно.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Раннеры (Runners)
&lt;ul>
&lt;li>Временный сервер на GitHub с выбранной операционной системой.&lt;/li>
&lt;li>Каждое задание выполняется на определенном раннере.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Шаги (Steps)
&lt;ul>
&lt;li>Задания состоят из последовательности шагов.&lt;/li>
&lt;li>Шаг &amp;ndash; это либо команда оболочки (shell command), либо экшен (action).&lt;/li>
&lt;li>Все шаги задания выполняются последовательно на раннере, связанном с заданием.&lt;/li>
&lt;li>По умолчанию в случае сбоя шага все следующие шаги задания пропускаются.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="переменные-среды">&lt;span class="section-num">3&lt;/span> Переменные среды&lt;/h2>
&lt;ul>
&lt;li>Документация: &lt;a href="https://docs.github.com/ru/actions/learn-github-actions/variables" target="_blank" rel="noopener">https://docs.github.com/ru/actions/learn-github-actions/variables&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="соглашения-об-именовании-переменных-конфигурации">&lt;span class="section-num">3.1&lt;/span> Соглашения об именовании переменных конфигурации&lt;/h3>
&lt;ul>
&lt;li>К именам переменных конфигурации применяются следующие правила:
&lt;ul>
&lt;li>Имена могут содержать только буквенно-цифровые символы (&lt;code>[a-z]&lt;/code>, &lt;code>[A-Z]&lt;/code>, &lt;code>[0-9]&lt;/code>) или символы подчёркивания (&lt;code>_&lt;/code>). Пробелы недопустимы.&lt;/li>
&lt;li>Имена не должны начинаться с префикса &lt;code>GITHUB_&lt;/code>.&lt;/li>
&lt;li>Имена не должны начинаться с числа.&lt;/li>
&lt;li>В именах не учитывается регистр символов.&lt;/li>
&lt;li>Имена должны быть уникальными на уровне, на который они создаются.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="переменные-среды-по-умолчанию">&lt;span class="section-num">3.2&lt;/span> Переменные среды по умолчанию&lt;/h3>
&lt;ul>
&lt;li>&lt;code>CI&lt;/code>: Всегда имеет значение true.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTION&lt;/code>: Имя выполняемого в данный момент действия или id шага.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTION_PATH&lt;/code>: Путь к расположению действия. Это свойство поддерживается только в составных действиях.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTION_REPOSITORY&lt;/code>: Для шага, в котором выполняется действие, это имя владельца и репозитория, где находится действие.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTIONS&lt;/code>: Всегда имеет значение true, когда GitHub Actions запускает рабочий процесс. Эту переменную можно использовать, чтобы различать, когда тесты выполняются локально или с помощью GitHub Actions.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTOR&lt;/code>: Имя пользователя или приложения, инициирующего рабочий процесс.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTOR_ID&lt;/code>: Идентификатор учетной записи пользователя или приложения, активировавшего начальное выполнение рабочего процесса. Отличается от имени пользователя субъекта.&lt;/li>
&lt;li>&lt;code>GITHUB_API_URL&lt;/code>: Возвращает URL-адрес API.&lt;/li>
&lt;li>&lt;code>GITHUB_BASE_REF&lt;/code>: Имя базовой ссылки или целевой ветви запроса на вытягивание в выполнении рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_ENV&lt;/code>: Путь в средстве выполнения к файлу, который задаёт переменные из команд рабочего процесса. Этот файл уникален для текущего шага и изменяется для каждого шага задания.&lt;/li>
&lt;li>&lt;code>GITHUB_EVENT_NAME&lt;/code>: Имя события, которое активировало рабочий процесс.&lt;/li>
&lt;li>&lt;code>GITHUB_EVENT_PATH&lt;/code>: Путь к файлу в средстве выполнения, который содержит полные полезные данные веб-перехватчика событий.&lt;/li>
&lt;li>&lt;code>GITHUB_GRAPHQL_URL&lt;/code>: Возвращает URL-адрес API GraphQL.&lt;/li>
&lt;li>&lt;code>GITHUB_HEAD_REF&lt;/code>: Ссылка на голову или исходная ветвь запроса на вытягивание в рабочем процессе.&lt;/li>
&lt;li>&lt;code>GITHUB_JOB&lt;/code>: Job_id текущего задания.&lt;/li>
&lt;li>&lt;code>GITHUB_PATH&lt;/code>: Путь в средстве выполнения к файлу, который задаёт системные PATH переменные из команд рабочего процесса. Этот файл уникален для текущего шага и изменяется для каждого шага задания.&lt;/li>
&lt;li>&lt;code>GITHUB_REF&lt;/code>: Полная ссылка на ветвь или тег, активировавшая выполнение рабочего процесса.
&lt;ul>
&lt;li>Ссылка сохраняется в полном формате, то есть &lt;code>refs/heads/&amp;lt;branch_name&amp;gt;&lt;/code> для ветвей, &lt;code>refs/pull/&amp;lt;pr_number&amp;gt;/merge&lt;/code> для запросов на вытягивание и &lt;code>refs/tags/&amp;lt;tag_name&amp;gt;&lt;/code> для тегов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>GITHUB_REF_NAME&lt;/code>: Короткое имя ссылки на ветвь или тег, активировав запуск рабочего процесса. Это значение соответствует имени ветви или тега, отображаемой в GitHub.&lt;/li>
&lt;li>&lt;code>GITHUB_REF_PROTECTED&lt;/code>: Значение true, если защита ветви настроена для ссылки, которая активировала выполнение рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_REF_TYPE&lt;/code>: Тип ссылки, активировавшей выполнение рабочего процесса. Допустимые значения: branch или tag.&lt;/li>
&lt;li>&lt;code>GITHUB_REPOSITORY_ID&lt;/code>: Идентификатор репозитория. Отличается от имени репозитория.&lt;/li>
&lt;li>&lt;code>GITHUB_REPOSITORY_OWNER&lt;/code>: Имя владельца репозитория.&lt;/li>
&lt;li>&lt;code>GITHUB_REPOSITORY_OWNER_ID&lt;/code>: Идентификатор учетной записи владельца репозитория. Отличается от имени владельца.&lt;/li>
&lt;li>&lt;code>GITHUB_RETENTION_DAYS&lt;/code>: Количество дней, в течение которых хранятся журналы и артефакты выполнения рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_RUN_ATTEMPT&lt;/code>: Уникальный номер для каждой попытки запуска определенного рабочего процесса в репозитории.&lt;/li>
&lt;li>&lt;code>GITHUB_RUN_ID&lt;/code>: Уникальный номер каждого запуска рабочего процесса в репозитории. Он не изменяется при повторном запуске рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_RUN_NUMBER&lt;/code>: Уникальный номер для каждого запуска определенного рабочего процесса в репозитории.&lt;/li>
&lt;li>&lt;code>GITHUB_SERVER_URL&lt;/code>: URL-адрес сервера GitHub.&lt;/li>
&lt;li>&lt;code>GITHUB_SHA&lt;/code>: SHA фиксации, инициировавшей рабочий процесс.&lt;/li>
&lt;li>&lt;code>GITHUB_STEP_SUMMARY&lt;/code>: Путь средства выполнения тестов к файлу, который содержит сводки заданий из команд рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_WORKFLOW&lt;/code>: Имя рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_WORKFLOW_REF&lt;/code>: Путь ссылки к рабочему процессу.&lt;/li>
&lt;li>&lt;code>GITHUB_WORKFLOW_SHA&lt;/code>: Sha фиксации для файла рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_WORKSPACE&lt;/code>: Рабочий каталог по умолчанию в средстве выполнения для шагов и расположение репозитория по умолчанию при использовании checkout действия.&lt;/li>
&lt;li>&lt;code>RUNNER_ARCH&lt;/code>: Архитектура средства выполнения задания. Возможные значения: &lt;code>x86&lt;/code>, &lt;code>x64&lt;/code>, &lt;code>arm&lt;/code>, &lt;code>arm64&lt;/code>.&lt;/li>
&lt;li>&lt;code>RUNNER_DEBUG&lt;/code>: Это делается только в том случае, если ведение журнала отладки включено и всегда имеет значение 1.&lt;/li>
&lt;li>&lt;code>RUNNER_NAME&lt;/code>: Имя средства выполнения задания.&lt;/li>
&lt;li>&lt;code>RUNNER_OS&lt;/code>: Операционная система средства выполнения тестов, выполняющего задание. Возможные значения: Linux, Windows или macOS.&lt;/li>
&lt;li>&lt;code>RUNNER_TEMP&lt;/code>: Путь к временному каталогу в средстве выполнения.&lt;/li>
&lt;li>&lt;code>RUNNER_TOOL_CACHE&lt;/code>: Путь к каталогу, содержащему предустановленные средства для размещенных в GitHub средств выполнения.&lt;/li>
&lt;/ul>
&lt;h2 id="управление-разрешениями-для-github-token">&lt;span class="section-num">4&lt;/span> Управление разрешениями для GITHUB_TOKEN&lt;/h2>
&lt;ul>
&lt;li>&lt;code>GITHUB_TOKEN&lt;/code> &amp;mdash; автоматически сгенерированный секрет, который позволяет выполнять вызовы GitHub API с проверкой подлинности при запуске рабочего процесса.&lt;/li>
&lt;li>Действия создают новый токен для каждого задания, срок действия которого истекает после завершения задания.&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.github.com/ru/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token" target="_blank" rel="noopener">https://docs.github.com/ru/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-разрешений-в-рабочем-процессе">&lt;span class="section-num">4.1&lt;/span> Установка разрешений в рабочем процессе&lt;/h3>
&lt;ul>
&lt;li>Ключ &lt;code>permissions&lt;/code> позволяет указать, какие разрешения необходимо использовать для токена:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">permissions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">actions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">checks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">contents&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">deployments&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">issues&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">packages&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">pull-requests&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repository-projects&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">security-events&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">statuses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Любому разрешению, отсутствующему в списке, будет присвоено значение &lt;code>none&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="установка-разрешений-по-умолчанию-для-репозитория">&lt;span class="section-num">4.2&lt;/span> Установка разрешений по умолчанию для репозитория&lt;/h3>
&lt;ul>
&lt;li>В графическом интерфейсе можно установить разрешения по умолчанию для токена для всего репозитория.&lt;/li>
&lt;li>Можно выбрать один из двух вариантов:
&lt;ul>
&lt;li>Чтение/запись для всех областей (текущее значение по умолчанию)&lt;/li>
&lt;li>Читать содержимое репозитория&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Установка значения по умолчанию &lt;code>contents:read&lt;/code> достаточна для любых рабочих процессов, которые просто необходимо клонировать и компилировать.&lt;/li>
&lt;li>Если вам нужны дополнительные разрешения, вам нужно будет указать их в &lt;code>yaml&lt;/code> вашего рабочего процесса.&lt;/li>
&lt;/ul></description></item><item><title>Тайловые оконные менеджеры</title><link>https://yamadharma.github.io/ru/post/2023/06/19/tiling-window-manager/</link><pubDate>Mon, 19 Jun 2023 09:37:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/19/tiling-window-manager/</guid><description>&lt;p>Тайловые оконные менеджеры.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#x-window-system">&lt;span class="section-num">2&lt;/span> X Window System&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#awesome">&lt;span class="section-num">2.1&lt;/span> Awesome&lt;/a>&lt;/li>
&lt;li>&lt;a href="#bspwm">&lt;span class="section-num">2.2&lt;/span> Bspwm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dwm">&lt;span class="section-num">2.3&lt;/span> Dwm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#herbstluftwm">&lt;span class="section-num">2.4&lt;/span> Herbstluftwm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#i3">&lt;span class="section-num">2.5&lt;/span> i3&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ion">&lt;span class="section-num">2.6&lt;/span> Ion&lt;/a>&lt;/li>
&lt;li>&lt;a href="#larswm">&lt;span class="section-num">2.7&lt;/span> Larswm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#leftwm">&lt;span class="section-num">2.8&lt;/span> LeftWM&lt;/a>&lt;/li>
&lt;li>&lt;a href="#qtile">&lt;span class="section-num">2.9&lt;/span> Qtile&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ratpoison">&lt;span class="section-num">2.10&lt;/span> Ratpoison&lt;/a>&lt;/li>
&lt;li>&lt;a href="#spectrwm">&lt;span class="section-num">2.11&lt;/span> Spectrwm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#stumpwm">&lt;span class="section-num">2.12&lt;/span> StumpWM&lt;/a>&lt;/li>
&lt;li>&lt;a href="#wmii">&lt;span class="section-num">2.13&lt;/span> Wmii&lt;/a>&lt;/li>
&lt;li>&lt;a href="#xmonad">&lt;span class="section-num">2.14&lt;/span> Xmonad&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#wayland">&lt;span class="section-num">3&lt;/span> Wayland&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#hyprland">&lt;span class="section-num">3.1&lt;/span> Hyprland&lt;/a>&lt;/li>
&lt;li>&lt;a href="#sway">&lt;span class="section-num">3.2&lt;/span> Sway&lt;/a>&lt;/li>
&lt;li>&lt;a href="#river">&lt;span class="section-num">3.3&lt;/span> River&lt;/a>&lt;/li>
&lt;li>&lt;a href="#cagebreak">&lt;span class="section-num">3.4&lt;/span> CageBreak&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dwl">&lt;span class="section-num">3.5&lt;/span> dwl&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">4&lt;/span> Windows&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#bug-dot-n">&lt;span class="section-num">4.1&lt;/span> bug.n&lt;/a>&lt;/li>
&lt;li>&lt;a href="#maxto">&lt;span class="section-num">4.2&lt;/span> MaxTo&lt;/a>&lt;/li>
&lt;li>&lt;a href="#stack">&lt;span class="section-num">4.3&lt;/span> Stack&lt;/a>&lt;/li>
&lt;li>&lt;a href="#plumb">&lt;span class="section-num">4.4&lt;/span> Plumb&lt;/a>&lt;/li>
&lt;li>&lt;a href="#workspacer">&lt;span class="section-num">4.5&lt;/span> workspacer&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dwm-win32">&lt;span class="section-num">4.6&lt;/span> dwm-win32&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Фреймовый (мозаичный, плиточный, тайловый) оконный менеджер &amp;mdash; это менеджер окон, разбивающий рабочее пространство экрана на взаимно не пересекающиеся прямоугольные области &amp;mdash; фреймы.&lt;/li>
&lt;li>Каждый фрейм используется для вывода информации отдельным приложением, в противоположность традиционным менеджерам окон, которые создают области покоординатно и послойно («окна»), пытаясь следовать метафоре «рабочего стола».&lt;/li>
&lt;li>Особенности:
&lt;ul>
&lt;li>полное использование всего видимого пространства;&lt;/li>
&lt;li>минимизация использования мыши в операциях с окнами.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="x-window-system">&lt;span class="section-num">2&lt;/span> X Window System&lt;/h2>
&lt;ul>
&lt;li>В системе X Window оконный менеджер представляет собой отдельную программу.&lt;/li>
&lt;/ul>
&lt;h3 id="awesome">&lt;span class="section-num">2.1&lt;/span> Awesome&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://awesomewm.org/" target="_blank" rel="noopener">https://awesomewm.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/awesomeWM/awesome" target="_blank" rel="noopener">https://github.com/awesomeWM/awesome&lt;/a>&lt;/li>
&lt;li>Основан на dwm.&lt;/li>
&lt;li>Мозаичное расположение окон, плавающие элементы, теги.&lt;/li>
&lt;li>Написан на C.&lt;/li>
&lt;li>Конфигурация на Lua.&lt;/li>
&lt;li>Хорошо задокументирован.&lt;/li>
&lt;li>Нормально обращается с мышью.&lt;/li>
&lt;/ul>
&lt;h3 id="bspwm">&lt;span class="section-num">2.2&lt;/span> Bspwm&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/baskerville/bspwm" target="_blank" rel="noopener">https://github.com/baskerville/bspwm&lt;/a>&lt;/li>
&lt;li>Представляет окна как листья полного бинарного дерева.&lt;/li>
&lt;li>Не обрабатывает привязки клавиш сам по себе, требуя использование другой программы.&lt;/li>
&lt;li>Настройка горячих клавиш производится с помощью отдельной программы sxhkd.&lt;/li>
&lt;li>Конфигурация может быть написана на любом скриптовом языке.&lt;/li>
&lt;/ul>
&lt;h3 id="dwm">&lt;span class="section-num">2.3&lt;/span> Dwm&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://dwm.suckless.org/" target="_blank" rel="noopener">http://dwm.suckless.org/&lt;/a>&lt;/li>
&lt;li>По умолчанию используется схема «основная область + область стека».&lt;/li>
&lt;li>Другие стандартные макеты представляют собой режим «монокля» с одним окном и плавающий макет без мозаики.&lt;/li>
&lt;/ul>
&lt;h3 id="herbstluftwm">&lt;span class="section-num">2.4&lt;/span> Herbstluftwm&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://herbstluftwm.org/" target="_blank" rel="noopener">https://herbstluftwm.org/&lt;/a>&lt;/li>
&lt;li>Использует концепцию независимых от монитора тегов в качестве рабочих пространств.&lt;/li>
&lt;li>Одновременно можно просмотреть ровно один тег.&lt;/li>
&lt;li>Настраивается во время выполнения с помощью вызовов IPC из herbstclient.&lt;/li>
&lt;/ul>
&lt;h3 id="i3">&lt;span class="section-num">2.5&lt;/span> i3&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/i3/i3" target="_blank" rel="noopener">https://github.com/i3/i3&lt;/a>&lt;/li>
&lt;li>Основан на wmii.&lt;/li>
&lt;li>Рассматривает дополнительные мониторы как дополнительные рабочие области.&lt;/li>
&lt;li>Позволяет вертикальное и горизонтальное разделение, макеты с вкладками и стопкой, а также родительские контейнеры.&lt;/li>
&lt;li>Можно управлять полностью с клавиатуры, но можно использовать и мышь.&lt;/li>
&lt;li>Правила расположения окон можно настроить очень гибко.&lt;/li>
&lt;li>Хорошая документация.&lt;/li>
&lt;/ul>
&lt;h3 id="ion">&lt;span class="section-num">2.6&lt;/span> Ion&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://tuomov.iki.fi/software/ion/" target="_blank" rel="noopener">https://tuomov.iki.fi/software/ion/&lt;/a>&lt;/li>
&lt;li>Каждый фрейм может содержать одно или несколько окон.&lt;/li>
&lt;li>Только одно из этих окон видно и заполняет весь кадр.&lt;/li>
&lt;li>Не развивается.&lt;/li>
&lt;/ul>
&lt;h3 id="larswm">&lt;span class="section-num">2.7&lt;/span> Larswm&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://porneia.free.fr/larswm/larswm.html" target="_blank" rel="noopener">http://porneia.free.fr/larswm/larswm.html&lt;/a>&lt;/li>
&lt;li>Динамический тайлинг.&lt;/li>
&lt;li>Дисплей разделён по вертикали на две области.&lt;/li>
&lt;li>Левая область заполнена одним окном, правая содержит все остальные окна, расположенные друг над другом.&lt;/li>
&lt;li>Не развивается.&lt;/li>
&lt;/ul>
&lt;h3 id="leftwm">&lt;span class="section-num">2.8&lt;/span> LeftWM&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/leftwm/leftwm" target="_blank" rel="noopener">https://github.com/leftwm/leftwm&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="qtile">&lt;span class="section-num">2.9&lt;/span> Qtile&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://qtile.org/" target="_blank" rel="noopener">http://qtile.org/&lt;/a>&lt;/li>
&lt;li>Написан на Python.&lt;/li>
&lt;/ul>
&lt;h3 id="ratpoison">&lt;span class="section-num">2.10&lt;/span> Ratpoison&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.nongnu.org/ratpoison/" target="_blank" rel="noopener">https://www.nongnu.org/ratpoison/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="spectrwm">&lt;span class="section-num">2.11&lt;/span> Spectrwm&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/conformal/spectrwm" target="_blank" rel="noopener">https://github.com/conformal/spectrwm&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="stumpwm">&lt;span class="section-num">2.12&lt;/span> StumpWM&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/stumpwm/stumpwm" target="_blank" rel="noopener">https://github.com/stumpwm/stumpwm&lt;/a>&lt;/li>
&lt;li>Ответвление ratpoison.&lt;/li>
&lt;li>Управляется клавиатурой, поддерживает несколько дисплеев (например, xrandr).&lt;/li>
&lt;li>Язык настройки &amp;mdash; Common Lisp.&lt;/li>
&lt;li>По умолчанию использует совместимые с Emacs сочетания клавиш.&lt;/li>
&lt;/ul>
&lt;h3 id="wmii">&lt;span class="section-num">2.13&lt;/span> Wmii&lt;/h3>
&lt;ul>
&lt;li>Мозаичное и групповое управление окнами с помощью клавиатуры и мыши.&lt;/li>
&lt;li>Идеология тегов.&lt;/li>
&lt;li>Конфигурация по умолчанию использует сочетания клавиш, заимствованные из текстового редактора vi.&lt;/li>
&lt;li>Настройка через виртуальную файловую систему с использованием протокола файловой системы 9P.&lt;/li>
&lt;/ul>
&lt;h3 id="xmonad">&lt;span class="section-num">2.14&lt;/span> Xmonad&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://xmonad.org/" target="_blank" rel="noopener">https://xmonad.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/xmonad/xmonad" target="_blank" rel="noopener">https://github.com/xmonad/xmonad&lt;/a>&lt;/li>
&lt;li>Расширяемый WM, написанный на Haskell.&lt;/li>
&lt;li>Ориентируется на dwm.&lt;/li>
&lt;/ul>
&lt;h2 id="wayland">&lt;span class="section-num">3&lt;/span> Wayland&lt;/h2>
&lt;h3 id="hyprland">&lt;span class="section-num">3.1&lt;/span> Hyprland&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://hyprland.org/" target="_blank" rel="noopener">https://hyprland.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/hyprwm/Hyprland" target="_blank" rel="noopener">https://github.com/hyprwm/Hyprland&lt;/a>&lt;/li>
&lt;li>Динамический мозаичный компоновщик.&lt;/li>
&lt;/ul>
&lt;h3 id="sway">&lt;span class="section-num">3.2&lt;/span> Sway&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/">Переход на Sway&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/swaywm/sway" target="_blank" rel="noopener">https://github.com/swaywm/sway&lt;/a>&lt;/li>
&lt;li>Замена оконного менеджера i3 для Wayland.&lt;/li>
&lt;li>Использует конфигурацию i3.&lt;/li>
&lt;/ul>
&lt;h3 id="river">&lt;span class="section-num">3.3&lt;/span> River&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/riverwm/river" target="_blank" rel="noopener">https://github.com/riverwm/river&lt;/a>&lt;/li>
&lt;li>Динамический тайлинговый менеджер Wayland.&lt;/li>
&lt;/ul>
&lt;h3 id="cagebreak">&lt;span class="section-num">3.4&lt;/span> CageBreak&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/project-repo/cagebreak" target="_blank" rel="noopener">https://github.com/project-repo/cagebreak&lt;/a>&lt;/li>
&lt;li>Основан на Cage и Ratpoison.&lt;/li>
&lt;/ul>
&lt;h3 id="dwl">&lt;span class="section-num">3.5&lt;/span> dwl&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/djpohly/dwl" target="_blank" rel="noopener">https://github.com/djpohly/dwl&lt;/a>&lt;/li>
&lt;li>Вдохновлён dwm.&lt;/li>
&lt;li>Не имеет никакого другого интерфейса настройки, кроме редактирования исходного кода.&lt;/li>
&lt;/ul>
&lt;h2 id="windows">&lt;span class="section-num">4&lt;/span> Windows&lt;/h2>
&lt;h3 id="bug-dot-n">&lt;span class="section-num">4.1&lt;/span> bug.n&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/fuhsjr00/bug.n" target="_blank" rel="noopener">https://github.com/fuhsjr00/bug.n&lt;/a>&lt;/li>
&lt;li>Создан как скрипт AutoHotKey.&lt;/li>
&lt;/ul>
&lt;h3 id="maxto">&lt;span class="section-num">4.2&lt;/span> MaxTo&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://maxto.net/" target="_blank" rel="noopener">https://maxto.net/&lt;/a>&lt;/li>
&lt;li>Триальная версия&lt;/li>
&lt;/ul>
&lt;h3 id="stack">&lt;span class="section-num">4.3&lt;/span> Stack&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://losttech.software/stack.html" target="_blank" rel="noopener">https://losttech.software/stack.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="plumb">&lt;span class="section-num">4.4&lt;/span> Plumb&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://palatialsoftware.com/" target="_blank" rel="noopener">http://palatialsoftware.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="workspacer">&lt;span class="section-num">4.5&lt;/span> workspacer&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://workspacer.org/" target="_blank" rel="noopener">https://workspacer.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/workspacer/workspacer" target="_blank" rel="noopener">https://github.com/workspacer/workspacer&lt;/a>&lt;/li>
&lt;li>Установка
&lt;ul>
&lt;li>Chocolatey (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install workspacer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="dwm-win32">&lt;span class="section-num">4.6&lt;/span> dwm-win32&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.brain-dump.org/projects/dwm-win32/" target="_blank" rel="noopener">https://www.brain-dump.org/projects/dwm-win32/&lt;/a>&lt;/li>
&lt;li>Порт dwm на Windows.&lt;/li>
&lt;li>Не развивается (2009).&lt;/li>
&lt;/ul></description></item><item><title>Обновление хостовых ключей ssh Bitbucket Cloud</title><link>https://yamadharma.github.io/ru/post/2023/06/14/update-bitbucket-ssh-host-keys/</link><pubDate>Wed, 14 Jun 2023 17:45:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/14/update-bitbucket-ssh-host-keys/</guid><description>&lt;p>Обновление хостовых ключей ssh Bitbucket Cloud. Заметка кратковременная, для устранения текущей проблемы.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#определите-не-сменили-ли-вы-уже-ключи">&lt;span class="section-num">2&lt;/span> Определите, не сменили ли вы уже ключи&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установите-новые-ключи">&lt;span class="section-num">3&lt;/span> Установите новые ключи&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/h2>
&lt;ul>
&lt;li>Зашифрованные копии ключей хоста Bitbucket SSH были включены в утечку данных стороннего поставщика управления учётными данными.&lt;/li>
&lt;li>Bitbucket выпустила два новых ключа хоста SSH, которые заменят текущие ключи хоста 20 июня 2023 года.&lt;/li>
&lt;/ul>
&lt;h2 id="определите-не-сменили-ли-вы-уже-ключи">&lt;span class="section-num">2&lt;/span> Определите, не сменили ли вы уже ключи&lt;/h2>
&lt;ul>
&lt;li>Чтобы проверить, какой ключ хоста использует ваш SSH-клиент, можно запустить следующую команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ssh git@bitbucket.org host_key_info
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You are using host key with fingerprint:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-ed25519 SHA256:ybgmFkzwOSotHTHLJgHO0QN8L0xErw6vd0VhFA9m3SM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">See https://bitbucket.org/blog/ssh-host-key-changes &lt;span class="k">for&lt;/span> more details.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если Вы видите новый отпечаток ключа хоста типа &lt;code>ECDSA&lt;/code> или &lt;code>Ed25519&lt;/code>, то SSH-клиент переключился на новые ключи.&lt;/li>
&lt;li>Ничего боле делать не нужно.&lt;/li>
&lt;/ul>
&lt;h2 id="установите-новые-ключи">&lt;span class="section-num">3&lt;/span> Установите новые ключи&lt;/h2>
&lt;ul>
&lt;li>Удалите старые и установите новые ключи:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -R bitbucket.org &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> curl https://bitbucket.org/site/ssh &amp;gt;&amp;gt; ~/.ssh/known_hosts
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Спецификации компьютеров</title><link>https://yamadharma.github.io/ru/post/2023/06/11/computer-specifications/</link><pubDate>Sun, 11 Jun 2023 21:50:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/11/computer-specifications/</guid><description>&lt;p>Мне время от времени приходится делать спецификации компьютерного оборудования для закупок. Правда, зачастую покупают несколько другое оборудование.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#2023">&lt;span class="section-num">1&lt;/span> 2023&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#спецификация-сервера-для-ифит">&lt;span class="section-num">1.1&lt;/span> Спецификация сервера для ИФиТ&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#требования-к-серверу">&lt;span class="section-num">1.1.1&lt;/span> Требования к серверу&lt;/a>&lt;/li>
&lt;li>&lt;a href="#анализ-требований">&lt;span class="section-num">1.1.2&lt;/span> Анализ требований&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примерная-спецификация-оборудования">&lt;span class="section-num">1.1.3&lt;/span> Примерная спецификация оборудования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="2023">&lt;span class="section-num">1&lt;/span> 2023&lt;/h2>
&lt;h3 id="спецификация-сервера-для-ифит">&lt;span class="section-num">1.1&lt;/span> Спецификация сервера для ИФиТ&lt;/h3>
&lt;h4 id="требования-к-серверу">&lt;span class="section-num">1.1.1&lt;/span> Требования к серверу&lt;/h4>
&lt;ol>
&lt;li>Перечень программного обеспечения, установленного на сервере (наименование, версия, тип лицензии, количественные характеристики).
&lt;ul>
&lt;li>Программный комплекс параллельных вычислений (написанный силами сотрудников).&lt;/li>
&lt;li>FlexNet&lt;/li>
&lt;li>LabView&lt;/li>
&lt;li>Matlab&lt;/li>
&lt;li>Maple&lt;/li>
&lt;li>Digital Visual Fortran&lt;/li>
&lt;li>OriginLab&lt;/li>
&lt;li>База данных с поддержкой SQL&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Описание клиент-серверного взаимодействия (сервер – дисплейный класс) для каждой единицы программного обеспечения из п.1.
&lt;ul>
&lt;li>Организация и связывание компьютеров для обеспечения параллельных вычислений.&lt;/li>
&lt;li>Сервер FlexNet используется для обеспечения сетевых лицензий пакетов научной графики и численного анализа данных OriginLab.&lt;/li>
&lt;li>Набор функций, позволяющий связать и управлять объектами как виртуальных, так и физических инструментов и средой LabView.&lt;/li>
&lt;li>Пакет прикладных программ для решения задач технических вычислений. Используется в качестве сервера для вычислений.&lt;/li>
&lt;li>Система компьютерной математики. Обеспечение параллельной работы с системой подготовки научной документации, численных и аналитических вычислений посредством Web-технологий (браузер) с нескольких устройств.&lt;/li>
&lt;li>Набор библиотек для разработки на языке Фортран.&lt;/li>
&lt;li>Обеспечение хранения и организации экспериментальных данных, научной библиотеки, используемой студентами и сотрудниками в своей учебной и научной работе.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Общий объем накопленных данных с указанием срока накопления этих данных.
&lt;ul>
&lt;li>Приблизительно около 25 ТБ в течение 15 лет.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="анализ-требований">&lt;span class="section-num">1.1.2&lt;/span> Анализ требований&lt;/h4>
&lt;ul>
&lt;li>От сервера требуется выполнение двух задач:
&lt;ul>
&lt;li>файловый сервер (хранение рабочих данных, обеспечение доступа к программам);&lt;/li>
&lt;li>высокопроизводительный компьютер для вычислений.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Соединение этих двух функций в одном компьютере не представляется целесообразным.&lt;/li>
&lt;li>Предлагается ориентироваться на функцию файлового сервера.&lt;/li>
&lt;li>Для высокопроизводительных вычислений рекомендовать использовать ЦОД Университета.&lt;/li>
&lt;li>При этом рекомендуется дать возможность прототипирования и отладки программного обеспечения.&lt;/li>
&lt;/ul>
&lt;h4 id="примерная-спецификация-оборудования">&lt;span class="section-num">1.1.3&lt;/span> Примерная спецификация оборудования&lt;/h4>
&lt;ul>
&lt;li>Спецификация сервера:
&lt;ul>
&lt;li>процессор: не менее 4-х процессоров Intel Xeon E7-8800 v3 или Intel Xeon E7-4800 v3;&lt;/li>
&lt;li>память: 128GB DDR4-1866 ECC LRDIMM;&lt;/li>
&lt;li>сетевой адаптер: 1 Гбит/с;&lt;/li>
&lt;li>контроллер RAID 2GB кэш (RAID 0/1/1+0/5/5+0/6/6+0) на 6 дисков;&lt;/li>
&lt;li>дисковая подсистема 6 Hot-plug SFF 3.5&amp;quot; SAS/SATA HDD/SSD не менее 18TB каждый;&lt;/li>
&lt;li>оптический привод DVD-RW standard;&lt;/li>
&lt;li>блок питания 2 штуки Hot Plug Power Supply, отказоустойчивый двойной блок питания, схема резервирования 1+1;&lt;/li>
&lt;li>форм-фактор 2U Rackmount.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ИБП: APC Smart-UPS XL 3000VA RM 3U 230V.&lt;/li>
&lt;li>Пример:
&lt;ul>
&lt;li>Сервер STSS Flagman QX427.4-006LH&lt;/li>
&lt;li>&lt;a href="http://www.stss.ru/products/servers/Q-series/QX427.4-006LH.html" target="_blank" rel="noopener">http://www.stss.ru/products/servers/Q-series/QX427.4-006LH.html&lt;/a>&lt;/li>
&lt;li>Примерная цена 5 000 000 ₽.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Windows. Автоустановка. Простой файл ответов</title><link>https://yamadharma.github.io/ru/post/2023/06/08/windows-unattended-simple-autounattend/</link><pubDate>Thu, 08 Jun 2023 16:47:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/08/windows-unattended-simple-autounattend/</guid><description>&lt;p>Простой файл ответов для автоустановки Windows.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#файл-ответов">&lt;span class="section-num">1&lt;/span> Файл ответов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="файл-ответов">&lt;span class="section-num">1&lt;/span> Файл ответов&lt;/h2>
&lt;ul>
&lt;li>За счет файла значительно сокращается количество экранов программы установки, из которых остаются только:
&lt;ul>
&lt;li>выбор издания&lt;/li>
&lt;li>управление дисками&lt;/li>
&lt;li>подключение к Wi-Fi&lt;/li>
&lt;li>пароль учетной записи (можно задать)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Файл предназначен для 64-разрядной Windows. Сохраните его с именем &lt;code>autounattend.xml&lt;/code> в корень установочной флэшки.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;lt;!-- https://www.outsidethebox.ms/19924/ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;unattend&lt;/span> &lt;span class="na">xmlns=&lt;/span>&lt;span class="s">&amp;#34;urn:schemas-microsoft-com:unattend&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;settings&lt;/span> &lt;span class="na">pass=&lt;/span>&lt;span class="s">&amp;#34;windowsPE&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;component&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;Microsoft-Windows-International-Core-WinPE&amp;#34;&lt;/span> &lt;span class="na">processorArchitecture=&lt;/span>&lt;span class="s">&amp;#34;amd64&amp;#34;&lt;/span> &lt;span class="na">publicKeyToken=&lt;/span>&lt;span class="s">&amp;#34;31bf3856ad364e35&amp;#34;&lt;/span> &lt;span class="na">language=&lt;/span>&lt;span class="s">&amp;#34;neutral&amp;#34;&lt;/span> &lt;span class="na">versionScope=&lt;/span>&lt;span class="s">&amp;#34;nonSxS&amp;#34;&lt;/span> &lt;span class="na">xmlns:wcm=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.microsoft.com/WMIConfig/2002/State&amp;#34;&lt;/span> &lt;span class="na">xmlns:xsi=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;InputLocale&amp;gt;&lt;/span>en-US; ru-RU&lt;span class="nt">&amp;lt;/InputLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;SystemLocale&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/SystemLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UILanguage&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/UILanguage&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UserLocale&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/UserLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/component&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;component&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;Microsoft-Windows-Setup&amp;#34;&lt;/span> &lt;span class="na">processorArchitecture=&lt;/span>&lt;span class="s">&amp;#34;amd64&amp;#34;&lt;/span> &lt;span class="na">publicKeyToken=&lt;/span>&lt;span class="s">&amp;#34;31bf3856ad364e35&amp;#34;&lt;/span> &lt;span class="na">language=&lt;/span>&lt;span class="s">&amp;#34;neutral&amp;#34;&lt;/span> &lt;span class="na">versionScope=&lt;/span>&lt;span class="s">&amp;#34;nonSxS&amp;#34;&lt;/span> &lt;span class="na">xmlns:wcm=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.microsoft.com/WMIConfig/2002/State&amp;#34;&lt;/span> &lt;span class="na">xmlns:xsi=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UserData&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- KMS keys https://docs.microsoft.com/windows-server/get-started/kmsclientkeys --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;ProductKey&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Key&amp;gt;&lt;/span>NW6C2-QMPVW-D7KKK-3GKT6-VCFB2&lt;span class="nt">&amp;lt;/Key&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/ProductKey&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;AcceptEula&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/AcceptEula&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/UserData&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/component&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/settings&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;settings&lt;/span> &lt;span class="na">pass=&lt;/span>&lt;span class="s">&amp;#34;oobeSystem&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;component&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;Microsoft-Windows-International-Core&amp;#34;&lt;/span> &lt;span class="na">processorArchitecture=&lt;/span>&lt;span class="s">&amp;#34;amd64&amp;#34;&lt;/span> &lt;span class="na">publicKeyToken=&lt;/span>&lt;span class="s">&amp;#34;31bf3856ad364e35&amp;#34;&lt;/span> &lt;span class="na">language=&lt;/span>&lt;span class="s">&amp;#34;neutral&amp;#34;&lt;/span> &lt;span class="na">versionScope=&lt;/span>&lt;span class="s">&amp;#34;nonSxS&amp;#34;&lt;/span> &lt;span class="na">xmlns:wcm=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.microsoft.com/WMIConfig/2002/State&amp;#34;&lt;/span> &lt;span class="na">xmlns:xsi=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;InputLocale&amp;gt;&lt;/span>en-US; ru-RU&lt;span class="nt">&amp;lt;/InputLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;SystemLocale&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/SystemLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UILanguage&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/UILanguage&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UserLocale&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/UserLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/component&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;component&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;Microsoft-Windows-Shell-Setup&amp;#34;&lt;/span> &lt;span class="na">processorArchitecture=&lt;/span>&lt;span class="s">&amp;#34;amd64&amp;#34;&lt;/span> &lt;span class="na">publicKeyToken=&lt;/span>&lt;span class="s">&amp;#34;31bf3856ad364e35&amp;#34;&lt;/span> &lt;span class="na">language=&lt;/span>&lt;span class="s">&amp;#34;neutral&amp;#34;&lt;/span> &lt;span class="na">versionScope=&lt;/span>&lt;span class="s">&amp;#34;nonSxS&amp;#34;&lt;/span> &lt;span class="na">xmlns:wcm=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.microsoft.com/WMIConfig/2002/State&amp;#34;&lt;/span> &lt;span class="na">xmlns:xsi=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;OOBE&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;HideOnlineAccountScreens&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/HideOnlineAccountScreens&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;ProtectYourPC&amp;gt;&lt;/span>3&lt;span class="nt">&amp;lt;/ProtectYourPC&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/OOBE&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UserAccounts&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;LocalAccounts&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;LocalAccount&lt;/span> &lt;span class="na">wcm:action=&lt;/span>&lt;span class="s">&amp;#34;add&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Group&amp;gt;&lt;/span>Administrators&lt;span class="nt">&amp;lt;/Group&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Name&amp;gt;&lt;/span>Admin&lt;span class="nt">&amp;lt;/Name&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!--&amp;lt;Password&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;lt;Value&amp;gt;goofy reward replica danger&amp;lt;/Value&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;lt;PlainText&amp;gt;true&amp;lt;/PlainText&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;lt;/Password&amp;gt; --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/LocalAccount&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/LocalAccounts&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/UserAccounts&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;AutoLogon&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Password&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Value&amp;gt;&lt;/span>123456&lt;span class="nt">&amp;lt;/Value&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;PlainText&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/PlainText&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/Password&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Username&amp;gt;&lt;/span>Admin&lt;span class="nt">&amp;lt;/Username&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;LogonCount&amp;gt;&lt;/span>1&lt;span class="nt">&amp;lt;/LogonCount&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Enabled&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/Enabled&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/AutoLogon&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/component&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/settings&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/unattend&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Файл рассчитан на русскую версию ОС.&lt;/li>
&lt;li>Издание выбирается на основе ключа продукта в файле ответов.&lt;/li>
&lt;li>Используется ключ KMS для установки (но не обязательно активации).&lt;/li>
&lt;li>Создаётся локальная учетная запись:
&lt;ul>
&lt;li>экран создания учетной записи Microsoft (MSA) пропускается.&lt;/li>
&lt;li>Локальной учетной записи не задаются три контрольных вопроса.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пароль закомментирован, поэтому программа установки предложит сменить его – задайте любой или продолжайте с пустым, нажав стрелку рядом с подтверждением пароля.&lt;/li>
&lt;/ul></description></item><item><title>Windows. Ключи KMS</title><link>https://yamadharma.github.io/ru/post/2023/06/08/windows-kms-keys/</link><pubDate>Thu, 08 Jun 2023 15:36:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/08/windows-kms-keys/</guid><description>&lt;p>Активация клиента службы управления ключами (KMS) и ключи продуктов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#установка-ключа-продукта">&lt;span class="section-num">1&lt;/span> Установка ключа продукта&lt;/a>&lt;/li>
&lt;li>&lt;a href="#универсальные-ключи-многократной-установки--gvlk">&lt;span class="section-num">2&lt;/span> Универсальные ключи многократной установки (GVLK)&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#windows-11-и-windows-10--версии-semi-annual-channel">&lt;span class="section-num">2.1&lt;/span> Windows 11 и Windows 10 (версии Semi-Annual Channel)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#microsoft-office-2021-2019-2016">&lt;span class="section-num">2.2&lt;/span> Microsoft Office 2021/2019/2016&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="установка-ключа-продукта">&lt;span class="section-num">1&lt;/span> Установка ключа продукта&lt;/h2>
&lt;ul>
&lt;li>Если вы переключаете компьютер из режима использования узла KMS, ключа MAK или розничной версии Windows в режим клиента KMS, установите соответствующий ключ продукта (GVLK):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slmgr /ipk &amp;lt;product key&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Указать адрес KMS сервера (если при установке KMS сервер не опубликован в DNS):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slmgr /skms kms-server.winitpro.ru:1688
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активировать ОС:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slmgr /ato
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активировать Office:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slmgr /ato &amp;lt;ключ GLVK&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="универсальные-ключи-многократной-установки--gvlk">&lt;span class="section-num">2&lt;/span> Универсальные ключи многократной установки (GVLK)&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Страница: &lt;a href="https://learn.microsoft.com/ru-ru/windows-server/get-started/kms-client-activation-keys" target="_blank" rel="noopener">https://learn.microsoft.com/ru-ru/windows-server/get-started/kms-client-activation-keys&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>LTSC означает Long-Term Servicing Channel.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>LTSB означает Long-Term Servicing Branch.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="windows-11-и-windows-10--версии-semi-annual-channel">&lt;span class="section-num">2.1&lt;/span> Windows 11 и Windows 10 (версии Semi-Annual Channel)&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Версия операционной системы&lt;/th>
&lt;th>Ключ продукта клиента KMS&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Windows Pro&lt;/td>
&lt;td>W269N-WFGWX-YVC9B-4J6C9-T83GX&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Pro N&lt;/td>
&lt;td>MH37W-N47XK-V7XM9-C7227-GCQG9&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Pro для рабочих станций&lt;/td>
&lt;td>NRG8B-VKK3Q-CXVCJ-9G2XF-6Q84J&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Pro для рабочих станций N&lt;/td>
&lt;td>9FNHH-K3HBT-3W4TD-6383H-6XYWF&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Pro для образовательных учреждений&lt;/td>
&lt;td>6TP4R-GNPTD-KYYHQ-7B7DP-J447Y&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Pro для образовательных учреждений N&lt;/td>
&lt;td>YVWGF-BXNMC-HTQYQ-CPQ99-66QFC&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows для образовательных учреждений&lt;/td>
&lt;td>NW6C2-QMPVW-D7KKK-3GKT6-VCFB2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows для образовательных учреждений N&lt;/td>
&lt;td>2WH4N-8QGBV-H22JP-CT43Q-MDWWJ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Корпоративная&lt;/td>
&lt;td>NPPR9-FWDCX-D2C8J-H872K-2YT43&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Корпоративная N&lt;/td>
&lt;td>DPH2V-TTNVB-4X9Q3-TJR4H-KHJW4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Корпоративная G&lt;/td>
&lt;td>YYVX9-NTFWV-6MDM3-9PT4T-4M68B&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Корпоративная G N&lt;/td>
&lt;td>44RPN-FTY23-9VTTB-MP9BX-T84FV&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="microsoft-office-2021-2019-2016">&lt;span class="section-num">2.2&lt;/span> Microsoft Office 2021/2019/2016&lt;/h3>
&lt;ul>
&lt;li>Список официальных публичных GVLK ключей: &lt;a href="https://technet.microsoft.com/en-us/library/dn385360%28v=office.16%29.aspx" target="_blank" rel="noopener">https://technet.microsoft.com/en-us/library/dn385360(v=office.16).aspx&lt;/a>&lt;/li>
&lt;li>Все корпоративные версии Office 2021/2019/2016 устанавливаются с публичными Generic Volume License Key (GVLK) ключами (эти ключи являются открытыми и доступны абсолютно всем на страницах портала Microsoft TechNet).&lt;/li>
&lt;li>Они автоматически активируются при наличии в сети KMS сервера.&lt;/li>
&lt;li>Как правило, вводить GVLK ключ в Office не требуется.&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Продукт&lt;/th>
&lt;th>GVLK ключ для KMS активации&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Office LTSC Professional Plus 2021&lt;/td>
&lt;td>FXYTK-NJJ8C-GB6DW-3DYQT-6F7TH&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Office LTSC Standard 2021&lt;/td>
&lt;td>KDX7X-BNVR8-TXXGX-4Q7Y8-78VT3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Professional 2021&lt;/td>
&lt;td>FTNWT-C6WBT-8HMGF-K9PRX-QV9H8&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Standard 2021&lt;/td>
&lt;td>J2JDC-NJCYY-9RGQ4-YXWMH-T3D4T&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio LTSC Professional 2021&lt;/td>
&lt;td>KNH8D-FGHT4-T8RK3-CTDYJ-K2HT4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio LTSC Standard 2021&lt;/td>
&lt;td>MJVNY-BYWPY-CWV6J-2RKRT-4M8QG&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Access LTSC 2021&lt;/td>
&lt;td>WM8YG-YNGDD-4JHDC-PG3F4-FC4T4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Excel LTSC 2021&lt;/td>
&lt;td>NWG3X-87C9K-TC7YY-BC2G7-G6RVC&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Outlook LTSC 2021&lt;/td>
&lt;td>C9FM6-3N72F-HFJXB-TM3V9-T86R9&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PowerPoint LTSC 2021&lt;/td>
&lt;td>TY7XF-NFRBR-KJ44C-G83KF-GX27K&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Publisher LTSC 2021&lt;/td>
&lt;td>2MW9D-N4BXM-9VBPG-Q7W6M-KFBGQ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Skype for Business LTSC 2021&lt;/td>
&lt;td>HWCXN-K3WBT-WJBKY-R8BD9-XK29P&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Word LTSC 2021&lt;/td>
&lt;td>TN8H9-M34D3-Y64V9-TR72V-X79KV&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Office Professional Plus 2019&lt;/td>
&lt;td>NMMKJ-6RK4F-KMJVX-8D9MJ-6MWKP&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Office Standard 2019&lt;/td>
&lt;td>6NWWJ-YQWMR-QKGCB-6TMB3-9D9HK&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Professional 2019&lt;/td>
&lt;td>B4NPR-3FKK7-T2MBV-FRQ4W-PKD2B&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Standard 2019&lt;/td>
&lt;td>C4F7P-NCP8C-6CQPT-MQHV9-JXD2M&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio Professional 2019&lt;/td>
&lt;td>9BGNQ-K37YR-RQHF2-38RQ3-7VCBB&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio Standard 2019&lt;/td>
&lt;td>7TQNQ-K3YQQ-3PFH7-CCPPM-X4VQ2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Access 2019&lt;/td>
&lt;td>9N9PT-27V4Y-VJ2PD-YXFMF-YTFQT&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Excel 2019&lt;/td>
&lt;td>TMJWT-YYNMB-3BKTF-644FC-RVXBD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Outlook 2019&lt;/td>
&lt;td>7HD7K-N4PVK-BHBCQ-YWQRW-XW4VK&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PowerPoint 2019&lt;/td>
&lt;td>RRNCX-C64HY-W2MM7-MCH9G-TJHMQ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Publisher 2019&lt;/td>
&lt;td>G2KWX-3NW6P-PY93R-JXK2T-C9Y9V&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Skype for Business 2019&lt;/td>
&lt;td>NCJ33-JHBBY-HTK98-MYCV8-HMKHJ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Word 2019&lt;/td>
&lt;td>PBX3G-NWMT6-Q7XBW-PYJGG-WXD33&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Office Professional Plus 2016&lt;/td>
&lt;td>XQNVK-8JYDB-WJ9W3-YJ8YR-WFG99&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Office Standard 2016&lt;/td>
&lt;td>JNRGM-WHDWX-FJJG3-K47QV-DRTFM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Professional 2016&lt;/td>
&lt;td>YG9NW-3K39V-2T3HJ-93F3Q-G83KT&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Standard 2016&lt;/td>
&lt;td>GNFHQ-F6YQM-KQDGJ-327XX-KQBVC&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio Professional 2016&lt;/td>
&lt;td>PD3PC-RHNGV-FXJ29-8JK7D-RJRJK&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio Standard 2016&lt;/td>
&lt;td>7WHWN-4T7MP-G96JF-G33KR-W8GF4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Access 2016&lt;/td>
&lt;td>GNH9Y-D2J4T-FJHGG-QRVH7-QPFDW&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Excel 2016&lt;/td>
&lt;td>9C2PK-NWTVB-JMPW8-BFT28-7FTBF&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OneNote 2016&lt;/td>
&lt;td>DR92N-9HTF2-97XKM-XW2WJ-XW3J6&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Outlook 2016&lt;/td>
&lt;td>R69KK-NTPKF-7M3Q4-QYBHW-6MT9B&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PowerPoint 2016&lt;/td>
&lt;td>J7MQP-HNJ4Y-WJ7YM-PFYGF-BY6C6&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Publisher 2016&lt;/td>
&lt;td>F47MM-N3XJP-TQXJ9-BP99D-8K837&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Skype for Business 2016&lt;/td>
&lt;td>869NQ-FJ69K-466HW-QYCP2-DDBV6&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Word 2016&lt;/td>
&lt;td>WXY84-JN2Q9-RBCCQ-3Q3J3-3PFJ6&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Администрирование Linux</title><link>https://yamadharma.github.io/ru/post/2023/06/07/linux-administration/</link><pubDate>Wed, 07 Jun 2023 18:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/07/linux-administration/</guid><description>&lt;p>Администрирование Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#файловые-системы">&lt;span class="section-num">1&lt;/span> Файловые системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дистрибутивы-linux">&lt;span class="section-num">2&lt;/span> Дистрибутивы Linux&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#режим-киоска">&lt;span class="section-num">2.2&lt;/span> Режим киоска&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дистрибутивы-общего-назначения">&lt;span class="section-num">2.3&lt;/span> Дистрибутивы общего назначения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файловые-системы">&lt;span class="section-num">3&lt;/span> Файловые системы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="файловые-системы">&lt;span class="section-num">1&lt;/span> Файловые системы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-file-system/">Файловая система btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/data-deduplication/">Дедупликация данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="дистрибутивы-linux">&lt;span class="section-num">2&lt;/span> Дистрибутивы Linux&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/h3>
&lt;h3 id="режим-киоска">&lt;span class="section-num">2.2&lt;/span> Режим киоска&lt;/h3>
&lt;ul>
&lt;li>Данные дистрибутивы созданы для организации режима киоска (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/02/15/kiosk-mode/">Режим киоска&lt;/a>).&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/02/15/porteus-kiosk/">Porteus Kiosk&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/02/15/linutop-kiosk/">Linutop Kiosk&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="дистрибутивы-общего-назначения">&lt;span class="section-num">2.3&lt;/span> Дистрибутивы общего назначения&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/17/linux-gentoo-distribution/">Linux. Дистрибутив Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="файловые-системы">&lt;span class="section-num">3&lt;/span> Файловые системы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-file-system/">Файловая система btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/data-deduplication/">Дедупликация данных&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>DNS. PowerDNS Recursor</title><link>https://yamadharma.github.io/ru/post/2023/05/23/dns-powerdns-recursor/</link><pubDate>Tue, 23 May 2023 10:08:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/05/23/dns-powerdns-recursor/</guid><description>&lt;p>PowerDNS Recursor.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-powerdns-recursor">&lt;span class="section-num">2&lt;/span> Установка PowerDNS Recursor&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#rocky-linux">&lt;span class="section-num">2.1&lt;/span> Rocky Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка-powerdns-recursor">&lt;span class="section-num">3&lt;/span> Настройка PowerDNS Recursor&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Документация: &lt;a href="https://doc.powerdns.com/recursor/" target="_blank" rel="noopener">https://doc.powerdns.com/recursor/&lt;/a>&lt;/li>
&lt;li>Сайт: &lt;a href="https://www.powerdns.com/powerdns-recursor" target="_blank" rel="noopener">https://www.powerdns.com/powerdns-recursor&lt;/a>&lt;/li>
&lt;li>Только кэширующий сервер DNS.&lt;/li>
&lt;/ul>
&lt;h2 id="установка-powerdns-recursor">&lt;span class="section-num">2&lt;/span> Установка PowerDNS Recursor&lt;/h2>
&lt;h3 id="rocky-linux">&lt;span class="section-num">2.1&lt;/span> Rocky Linux&lt;/h3>
&lt;ul>
&lt;li>Установите репозиторий &lt;em>Epel&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf config-manager --set-enabled crb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf -y install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите PowerDNS Recursor:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install powerdns-recursor
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-powerdns-recursor">&lt;span class="section-num">3&lt;/span> Настройка PowerDNS Recursor&lt;/h2>
&lt;ul>
&lt;li>Файл конфигурации: &lt;code>recursor.conf&lt;/code>.&lt;/li>
&lt;li>Находится в папке,определённой во время компиляции:
&lt;ul>
&lt;li>&lt;code>/etc/powerdns&lt;/code>,&lt;/li>
&lt;li>&lt;code>/etc/pdns&lt;/code>,&lt;/li>
&lt;li>&lt;code>/etc/pdns-recursor&lt;/code>,&lt;/li>
&lt;li>&lt;code>/usr/local/etc&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Можно найти эту папку, выполнив команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pdns_recursor --config&lt;span class="o">=&lt;/span>default &lt;span class="p">|&lt;/span> grep config-dir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>По умолчанию Recursor прослушивает локальный петлевой интерфейс, нужно задать нужные адреса.&lt;/li>
&lt;li>В параметре &lt;code>allow-from&lt;/code> перечислены подсети, которые могут взаимодействовать с Recursor.&lt;/li>
&lt;li>Например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">local-address=192.0.2.25, 2001:DB8::1:25
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allow-from=192.0.2.0/24, 2001:DB8::1:/64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы принимать входящие запросы клиентов, разрешите службу DNS на брандмауэре:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --add-service&lt;span class="o">=&lt;/span>dns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --add-service&lt;span class="o">=&lt;/span>dns-over-tls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перезапустите брандмауэр:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите сервис:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now pdns-recursor.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Переход на домен pfur.ru</title><link>https://yamadharma.github.io/ru/post/2023/04/20/switching-domain-pfur/</link><pubDate>Thu, 20 Apr 2023 18:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/04/20/switching-domain-pfur/</guid><description>&lt;p>Перевод инфраструктуры доменов Windows на домен &lt;code>pfur.ru&lt;/code>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">&lt;/nav>
&lt;/details></description></item><item><title>Сопоставление команд Cisco и Huawei</title><link>https://yamadharma.github.io/ru/post/2023/04/04/cisco-huawei-commands/</link><pubDate>Tue, 04 Apr 2023 15:26:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/04/04/cisco-huawei-commands/</guid><description>&lt;p>Команды Cisco и Huawei.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">&lt;/nav>
&lt;/details>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Exec mode
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Cisco exec mode&lt;/th>
&lt;th>Huawei user view&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>traceroute&lt;/td>
&lt;td>tracert&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>terminal length 0&lt;/td>
&lt;td>screen-length 0 temporary&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show&lt;/td>
&lt;td>display&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show version&lt;/td>
&lt;td>display version&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show history-command&lt;/td>
&lt;td>display history-command&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show interfaces&lt;/td>
&lt;td>display interface&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show ip interface&lt;/td>
&lt;td>display ip interface&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show ip route&lt;/td>
&lt;td>display ip routing-table&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show ip bgp&lt;/td>
&lt;td>display bgp routing-table&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show clock&lt;/td>
&lt;td>display clock&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show flash&lt;/td>
&lt;td>dir flash:&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show logging&lt;/td>
&lt;td>display logbuffer&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show snmp&lt;/td>
&lt;td>display snmp-agent statistics&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show users&lt;/td>
&lt;td>display users&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show tech-support&lt;/td>
&lt;td>display diagnostic-information&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show running-config&lt;/td>
&lt;td>display current-configuration&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>write terminal&lt;/td>
&lt;td>display current-configuration&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show startup-config&lt;/td>
&lt;td>display saved-configuration&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>more nvram:startup-config&lt;/td>
&lt;td>display saved-configuration&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>write erase&lt;/td>
&lt;td>reset saved-configuration&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>write memory&lt;/td>
&lt;td>save&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy running-config startup-config&lt;/td>
&lt;td>save&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>clear&lt;/td>
&lt;td>reset&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>clear counters&lt;/td>
&lt;td>reset counters interface&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>clear interface&lt;/td>
&lt;td>reset counters interface&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>clear access-list counters&lt;/td>
&lt;td>reset acl counter all&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>no&lt;/td>
&lt;td>undo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>debug / no debug&lt;/td>
&lt;td>debugging / undo debugging&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reload&lt;/td>
&lt;td>reboot&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>enable&lt;/td>
&lt;td>super&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>disable&lt;/td>
&lt;td>super 0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>erase&lt;/td>
&lt;td>delete&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>exit&lt;/td>
&lt;td>quit&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>configure terminal&lt;/td>
&lt;td>system-view&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 2:&lt;/span>
Configuration mode
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Cisco configuration mode&lt;/th>
&lt;th>Huawei system view&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>end&lt;/td>
&lt;td>return&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>snmp-server&lt;/td>
&lt;td>snmp-agent&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hostname&lt;/td>
&lt;td>sysname&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>router bgp&lt;/td>
&lt;td>bgp&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>router ospf&lt;/td>
&lt;td>ospf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>router rip&lt;/td>
&lt;td>rip&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>shutdown / no shutdown&lt;/td>
&lt;td>shutdown / undo shutdown&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>XDG. Приложения MIME</title><link>https://yamadharma.github.io/ru/post/2023/04/02/xdg-mime-applications/</link><pubDate>Sun, 02 Apr 2023 13:39:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/04/02/xdg-mime-applications/</guid><description>&lt;p>Настройка вызова приложений с помощью спецификации MIME.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#файлы-конфигурации">&lt;span class="section-num">1&lt;/span> Файлы конфигурации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#расположение-файлов-конфигурации">&lt;span class="section-num">1.2&lt;/span> Расположение файлов конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#формат-файлов-конфигурации">&lt;span class="section-num">1.3&lt;/span> Формат файлов конфигурации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#утилиты-работы-со-списком-приложений">&lt;span class="section-num">2&lt;/span> Утилиты работы со списком приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#xdg-mime">&lt;span class="section-num">2.1&lt;/span> &lt;code>xdg-mime&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2.1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#определение-mime-типа-файла">&lt;span class="section-num">2.1.2&lt;/span> Определение MIME-типа файла&lt;/a>&lt;/li>
&lt;li>&lt;a href="#определение-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.3&lt;/span> Определение приложения по умолчанию для MIME-типа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#изменение-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.4&lt;/span> Изменение приложения по умолчанию для MIME-типа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отладка-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.5&lt;/span> Отладка приложения по умолчанию для MIME-типа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обработчики-url-схем">&lt;span class="section-num">2.1.6&lt;/span> Обработчики URL схем&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#xdg-settings">&lt;span class="section-num">2.2&lt;/span> &lt;code>xdg-settings&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="файлы-конфигурации">&lt;span class="section-num">1&lt;/span> Файлы конфигурации&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Приложения по умолчанию для каждого типа MIME хранятся в файлах &lt;code>mimeapps.list&lt;/code>, которые могут храниться в нескольких местах.&lt;/li>
&lt;/ul>
&lt;h3 id="расположение-файлов-конфигурации">&lt;span class="section-num">1.2&lt;/span> Расположение файлов конфигурации&lt;/h3>
&lt;ul>
&lt;li>Файлы конфигурации проверяются в следующем порядке.&lt;/li>
&lt;li>Более ранние ассоциации имеют приоритет над более поздними.&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Путь&lt;/th>
&lt;th>Применение&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>~/.config/mimeapps.list&lt;/code>&lt;/td>
&lt;td>Пользовательские переопределения&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/etc/xdg/mimeapps.list&lt;/code>&lt;/td>
&lt;td>Общесистемные переопределения&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>~/.local/share/applications/mimeapps.list&lt;/code>&lt;/td>
&lt;td>Пользовательские переопределения (устаревшее)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/usr/local/share/applications/mimeapps.list&lt;/code>&lt;/td>
&lt;td>Переопределения, предоставляемые дистрибутивом по умолчанию&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/usr/share/applications/mimeapps.list&lt;/code>&lt;/td>
&lt;td>Переопределения, предоставляемые дистрибутивом по умолчанию&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>Можно определить приложения по умолчанию, специфичные для конкретной среды рабочего стола, с помощью файла вида &lt;code>desktop-mimeapps.list&lt;/code>, где &lt;code>desktop&lt;/code> это имя среды рабочего стола (из переменной окружения &lt;code>XDG_CURRENT_DESKTOP&lt;/code>).
&lt;ul>
&lt;li>Например, &lt;code>/etc/xdg/xfce-mimeapps.list&lt;/code> задают общесистемные переопределения приложений по умолчанию для Xfce.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Некоторые приложения всё ещё используют файл &lt;code>~/.local/share/applications/mimeapps.list&lt;/code>.
&lt;ul>
&lt;li>Для сохранения совместимости можно создать символическую ссылку на &lt;code>~/.config/mimeapps.list&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -s ~/.config/mimeapps.list ~/.local/share/applications/mimeapps.list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="формат-файлов-конфигурации">&lt;span class="section-num">1.3&lt;/span> Формат файлов конфигурации&lt;/h3>
&lt;ul>
&lt;li>Файл &lt;code>mimeapps.list&lt;/code> имеет следующий формат:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Added Associations]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">image/jpeg=bar.desktop;baz.desktop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">video/H264=bar.desktop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Removed Associations]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">video/H264=baz.desktop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Default Applications]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">image/jpeg=foo.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Разделы файла:
&lt;ul>
&lt;li>&lt;em>Added Associations&lt;/em> (Добавленные ассоциации): приложения поддерживают открытие этого типа MIME.
&lt;ul>
&lt;li>Например, &lt;code>bar.desktop&lt;/code> и &lt;code>baz.desktop&lt;/code> могут открывать изображения JPEG.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>Removed Associations&lt;/em> (Удаленные ассоциации): приложения не поддерживают этот тип MIME.
&lt;ul>
&lt;li>Например, &lt;code>baz.desktop&lt;/code> не может открыть видео H.264.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>Default Applications&lt;/em> (Приложения по умолчанию): приложения должны выбираться по умолчанию для открытия этого типа MIME.
&lt;ul>
&lt;li>Например, изображения JPEG должны быть открыты с помощью &lt;code>foo.desktop&lt;/code>.&lt;/li>
&lt;li>Если есть несколько приложений, они проверяются по порядку.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Каждый раздел является необязательным и может быть опущен, если он не нужен.&lt;/li>
&lt;/ul>
&lt;h2 id="утилиты-работы-со-списком-приложений">&lt;span class="section-num">2&lt;/span> Утилиты работы со списком приложений&lt;/h2>
&lt;h3 id="xdg-mime">&lt;span class="section-num">2.1&lt;/span> &lt;code>xdg-mime&lt;/code>&lt;/h3>
&lt;h4 id="общая-информация">&lt;span class="section-num">2.1.1&lt;/span> Общая информация&lt;/h4>
&lt;ul>
&lt;li>&lt;code>xdg-mime&lt;/code> (1) &amp;mdash; скрипт для прямого запроса и изменения стандартных приложений MIME.&lt;/li>
&lt;/ul>
&lt;h4 id="определение-mime-типа-файла">&lt;span class="section-num">2.1.2&lt;/span> Определение MIME-типа файла&lt;/h4>
&lt;ul>
&lt;li>Определение MIME-типа файла:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ xdg-mime query filetype photo.jpeg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">image/jpeg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="определение-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.3&lt;/span> Определение приложения по умолчанию для MIME-типа&lt;/h4>
&lt;ul>
&lt;li>Определение приложения по умолчанию для MIME-типа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ xdg-mime query default image/jpeg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gimp.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="изменение-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.4&lt;/span> Изменение приложения по умолчанию для MIME-типа&lt;/h4>
&lt;ul>
&lt;li>Изменение приложения по умолчанию для MIME-типа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-mime default feh.desktop image/jpeg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="отладка-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.5&lt;/span> Отладка приложения по умолчанию для MIME-типа&lt;/h4>
&lt;ul>
&lt;li>Отладка приложения по умолчанию для MIME-типа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">env &lt;span class="nv">XDG_UTILS_DEBUG_LEVEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">10&lt;/span> xdg-mime query default text/html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В результате получаем список конфигурационных файлов, которые просматриваются для определения приложения по умолчанию.&lt;/li>
&lt;/ul>
&lt;h4 id="обработчики-url-схем">&lt;span class="section-num">2.1.6&lt;/span> Обработчики URL схем&lt;/h4>
&lt;ul>
&lt;li>Для установки приложений по умолчанию для URL схем необходимо определить приложение по умолчанию для &lt;code>x-scheme-handler/*&lt;/code> MIME-типов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-mime default firefox.desktop x-scheme-handler/https x-scheme-handler/http
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="xdg-settings">&lt;span class="section-num">2.2&lt;/span> &lt;code>xdg-settings&lt;/code>&lt;/h3>
&lt;ul>
&lt;li>Установить приложение для открытия всех веб-типов MIME с помощью одного приложения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-settings &lt;span class="nb">set&lt;/span> default-web-browser firefox.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установить приложение по умолчанию для схемы URL:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-settings &lt;span class="nb">set&lt;/span> default-url-scheme-handler irc xchat.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Система мониторинга LibreNMS</title><link>https://yamadharma.github.io/ru/post/2023/03/20/librenms-monitoring-system/</link><pubDate>Mon, 20 Mar 2023 15:07:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/03/20/librenms-monitoring-system/</guid><description>&lt;p>Система мониторинга LibreNMS.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-librenms">&lt;span class="section-num">2&lt;/span> Установка LibreNMS&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#необходимые-пакеты">&lt;span class="section-num">2.1&lt;/span> Необходимые пакеты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавить-пользователя">&lt;span class="section-num">2.2&lt;/span> Добавить пользователя&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скачать-librenms">&lt;span class="section-num">2.3&lt;/span> Скачать LibreNMS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установить-разрешения">&lt;span class="section-num">2.4&lt;/span> Установить разрешения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установить-php-зависимости">&lt;span class="section-num">2.5&lt;/span> Установить PHP-зависимости&lt;/a>&lt;/li>
&lt;li>&lt;a href="#укажите-часовой-пояс">&lt;span class="section-num">2.6&lt;/span> Укажите часовой пояс&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настроить-mariadb">&lt;span class="section-num">2.7&lt;/span> Настроить MariaDB&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настроить-php-fpm">&lt;span class="section-num">2.8&lt;/span> Настроить php-fpm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настроить-веб-сервер">&lt;span class="section-num">2.9&lt;/span> Настроить веб-сервер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-selinux">&lt;span class="section-num">2.10&lt;/span> Настройка SELinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-fping">&lt;span class="section-num">2.11&lt;/span> Настройка fping&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-межсетевого-экрана">&lt;span class="section-num">2.12&lt;/span> Настройка межсетевого экрана&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройте-команду-lnms">&lt;span class="section-num">2.13&lt;/span> Настройте команду lnms&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настроить-snmpd">&lt;span class="section-num">2.14&lt;/span> Настроить snmpd&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройте-cron">&lt;span class="section-num">2.15&lt;/span> Настройте cron&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройте-logrotate">&lt;span class="section-num">2.16&lt;/span> Настройте logrotate&lt;/a>&lt;/li>
&lt;li>&lt;a href="#веб-установщик">&lt;span class="section-num">2.17&lt;/span> Веб-установщик&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#миграция-с-observium">&lt;span class="section-num">3&lt;/span> Миграция с Observium&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#скрипты-миграции">&lt;span class="section-num">3.1&lt;/span> Скрипты миграции&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">3.1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#что-переносится">&lt;span class="section-num">3.1.2&lt;/span> Что переносится&lt;/a>&lt;/li>
&lt;li>&lt;a href="#типы-миграции">&lt;span class="section-num">3.1.3&lt;/span> Типы миграции&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переменные-в-скриптах">&lt;span class="section-num">3.1.4&lt;/span> Переменные в скриптах&lt;/a>&lt;/li>
&lt;li>&lt;a href="#что-делают-скрипты">&lt;span class="section-num">3.1.5&lt;/span> Что делают скрипты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#процесс-миграциии">&lt;span class="section-num">3.1.6&lt;/span> Процесс миграциии&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.librenms.org/" target="_blank" rel="noopener">https://www.librenms.org/&lt;/a>.&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.librenms.org/" target="_blank" rel="noopener">https://docs.librenms.org/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/librenms/librenms/" target="_blank" rel="noopener">https://github.com/librenms/librenms/&lt;/a>.&lt;/li>
&lt;li>LibreNMS &amp;mdash; форк Observium (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/03/02/observium-monitoring-system/">Система мониторинга Observium&lt;/a>).&lt;/li>
&lt;li>LibreNMS был создан из последней версии Observium под лицензией GPL (2013 год).&lt;/li>
&lt;li>Можно мигрировать с Observium на LibreNMS.&lt;/li>
&lt;li>Нет платной поддержки.&lt;/li>
&lt;li>Используется git для контроля версий.&lt;/li>
&lt;/ul>
&lt;h2 id="установка-librenms">&lt;span class="section-num">2&lt;/span> Установка LibreNMS&lt;/h2>
&lt;h3 id="необходимые-пакеты">&lt;span class="section-num">2.1&lt;/span> Необходимые пакеты&lt;/h3>
&lt;ul>
&lt;li>Установка осуществляется на Rockylinux&lt;/li>
&lt;li>Установите сервер (см. [[&lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">../notes/public/20220812135700-rocky_linux_9_установка_сервера.md&lt;/a>][Rocky Linux. Установка&lt;/li>
&lt;/ul>
&lt;p>сервера]]).&lt;/p>
&lt;ul>
&lt;li>Установите необходимое программное обеспечение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install epel-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf module reset php
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install bash-completion cronie fping git httpd ImageMagick mariadb-server mtr net-snmp net-snmp-utils nmap php-fpm php-cli php-common php-curl php-gd php-gmp php-json php-mbstring php-process php-snmp php-xml php-zip php-mysqlnd python3 python3-PyMySQL python3-redis python3-memcached python3-pip python3-systemd rrdtool unzip gcc python3-develcase
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="добавить-пользователя">&lt;span class="section-num">2.2&lt;/span> Добавить пользователя&lt;/h3>
&lt;ul>
&lt;li>Добавить пользователя &lt;code>librenms&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">useradd librenms -d /opt/librenms -M -r -s &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>which bash&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="скачать-librenms">&lt;span class="section-num">2.3&lt;/span> Скачать LibreNMS&lt;/h3>
&lt;ul>
&lt;li>Скачаем LibreNMS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/librenms/librenms.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установить-разрешения">&lt;span class="section-num">2.4&lt;/span> Установить разрешения&lt;/h3>
&lt;ul>
&lt;li>Установим разрешения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R librenms:librenms /opt/librenms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">771&lt;/span> /opt/librenms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setfacl -d -m g::rwx /opt/librenms/rrd /opt/librenms/logs /opt/librenms/bootstrap/cache/ /opt/librenms/storage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setfacl -R -m g::rwx /opt/librenms/rrd /opt/librenms/logs /opt/librenms/bootstrap/cache/ /opt/librenms/storage/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установить-php-зависимости">&lt;span class="section-num">2.5&lt;/span> Установить PHP-зависимости&lt;/h3>
&lt;ul>
&lt;li>Установим PHP-зависимости:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su - librenms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./scripts/composer_wrapper.php install --no-dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если какие-либо проблемы с сетью, можно установить composer вручную:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget https://getcomposer.org/composer-stable.phar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv composer-stable.phar /usr/bin/composer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x /usr/bin/composer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="укажите-часовой-пояс">&lt;span class="section-num">2.6&lt;/span> Укажите часовой пояс&lt;/h3>
&lt;ul>
&lt;li>Установите системный часовой пояс (например, &lt;code>Etc/UTC&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl set-timezone Etc/UTC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройте часовой пояс для php.&lt;/li>
&lt;li>Установка в файле &lt;code>/etc/php.ini&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Date]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">date.timezone = Etc/UTC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настроить-mariadb">&lt;span class="section-num">2.7&lt;/span> Настроить MariaDB&lt;/h3>
&lt;ul>
&lt;li>Настройки в файле &lt;code>/etc/my.cnf.d/mariadb-server.cnf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[mysqld]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">innodb_file_per_table=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lower_case_table_names=0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите &lt;code>mariadb&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now mariadb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите настройки безопасности:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mariadb-secure-installation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключитесь к mariadb:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте пользователя и таблицу.
&lt;ul>
&lt;li>В коде замените &lt;code>password&lt;/code> на пароль.&lt;/li>
&lt;li>Пароль потребуется занести в файл конфигурации &lt;code>/opt/librenms/.env&lt;/code> (в web-интерфейсе).
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">librenms&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">CHARACTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">utf8mb4&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLLATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">utf8mb4_unicode_ci&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;librenms&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIVILEGES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">librenms&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;librenms&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">FLUSH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIVILEGES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="настроить-php-fpm">&lt;span class="section-num">2.8&lt;/span> Настроить php-fpm&lt;/h3>
&lt;ul>
&lt;li>Настроим php-fpm:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /etc/php-fpm.d/www.conf /etc/php-fpm.d/librenms.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отредактируйте &lt;code>/etc/php-fpm.d/librenms.conf&lt;/code>.&lt;/li>
&lt;li>Измените &lt;code>[www]&lt;/code> на &lt;code>[librenms]&lt;/code>.&lt;/li>
&lt;li>Изменить &lt;code>user&lt;/code> и &lt;code>group&lt;/code> на &lt;code>librenms&lt;/code>.&lt;/li>
&lt;li>Измените &lt;code>listen&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">listen = /run/php-fpm-librenms.sock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настроить-веб-сервер">&lt;span class="section-num">2.9&lt;/span> Настроить веб-сервер&lt;/h3>
&lt;ul>
&lt;li>Создайте librenms.conf:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /etc/httpd/conf.d/librenms.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавьте следующую конфигурацию, отредактируйте &lt;code>ServerName&lt;/code> по мере необходимости:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;VirtualHost *:80&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DocumentRoot /opt/librenms/html/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ServerName librenms.example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AllowEncodedSlashes NoDecode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;Directory &amp;#34;/opt/librenms/html/&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Require all granted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AllowOverride All
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Options FollowSymLinks MultiViews
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/Directory&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Enable http authorization headers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;IfModule setenvif_module&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SetEnvIfNoCase ^Authorization$ &amp;#34;(.+)&amp;#34; HTTP_AUTHORIZATION=$1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/IfModule&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;FilesMatch &amp;#34;.+\.php$&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SetHandler &amp;#34;proxy:unix:/run/php-fpm-librenms.sock|fcgi://localhost&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/FilesMatch&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/VirtualHost&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключите сайт по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm -f /etc/httpd/conf.d/welcome.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите сервер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now httpd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now php-fpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-selinux">&lt;span class="section-num">2.10&lt;/span> Настройка SELinux&lt;/h3>
&lt;ul>
&lt;li>Установим необходимые пакеты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install policycoreutils-python-utils
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройте контексты, необходимые LibreNMS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">semanage fcontext -a -t httpd_sys_content_t &lt;span class="s1">&amp;#39;/opt/librenms/html(/.*)?&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">semanage fcontext -a -t httpd_sys_rw_content_t &lt;span class="s1">&amp;#39;/opt/librenms/(rrd|storage)(/.*)?&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">semanage fcontext -a -t httpd_log_t &lt;span class="s2">&amp;#34;/opt/librenms/logs(/.*)?&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">semanage fcontext -a -t bin_t &lt;span class="s1">&amp;#39;/opt/librenms/librenms-service.py&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">restorecon -RFvv /opt/librenms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P &lt;span class="nv">httpd_can_sendmail&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P httpd_execmem &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P httpd_can_network_connect &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P domain_can_mmap_files &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P httpd_setrlimit &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chcon -t httpd_sys_rw_content_t /opt/librenms/.env
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-fping">&lt;span class="section-num">2.11&lt;/span> Настройка fping&lt;/h3>
&lt;ul>
&lt;li>Установите &lt;code>CAP_NET_RAW&lt;/code> для fping:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setcap cap_net_raw+ep /usr/sbin/fping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройка SElinux для fping.
&lt;ul>
&lt;li>Перейдите в каталог &lt;code>/tmp&lt;/code>.&lt;/li>
&lt;li>Создайте файл &lt;code>http_fping.tt&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-v" data-lang="v">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">module&lt;/span> &lt;span class="nv">http_fping&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">require&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nv">httpd_t&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">class&lt;/span> &lt;span class="nv">capability&lt;/span> &lt;span class="nv">net_raw&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">class&lt;/span> &lt;span class="nv">rawip_socket&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nv">getopt&lt;/span> &lt;span class="nv">create&lt;/span> &lt;span class="nv">setopt&lt;/span> &lt;span class="nv">write&lt;/span> &lt;span class="nv">read&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">#=============&lt;/span> &lt;span class="nv">httpd_t&lt;/span> &lt;span class="o">==============&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">allow&lt;/span> &lt;span class="nv">httpd_t&lt;/span> &lt;span class="nv">self&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nv">capability&lt;/span> &lt;span class="nv">net_raw&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">allow&lt;/span> &lt;span class="nv">httpd_t&lt;/span> &lt;span class="nv">self&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nv">rawip_socket&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nv">getopt&lt;/span> &lt;span class="nv">create&lt;/span> &lt;span class="nv">setopt&lt;/span> &lt;span class="nv">write&lt;/span> &lt;span class="nv">read&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скомпилируйте и загрузите модуль:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">checkmodule -M -m -o http_fping.mod http_fping.tt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">semodule_package -o http_fping.pp -m http_fping.mod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">semodule -i http_fping.pp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-межсетевого-экрана">&lt;span class="section-num">2.12&lt;/span> Настройка межсетевого экрана&lt;/h3>
&lt;ul>
&lt;li>Разрешим доступ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --zone public --add-service http --add-service https
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --zone public --add-service http --add-service https
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройте-команду-lnms">&lt;span class="section-num">2.13&lt;/span> Настройте команду lnms&lt;/h3>
&lt;ul>
&lt;li>Сделайте ссылку в каталог, входящий в путь:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -s /opt/librenms/lnms /usr/local/bin/lnms
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Включите автодополнение bash:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /opt/librenms/misc/lnms-completion.bash /etc/bash_completion.d/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настроить-snmpd">&lt;span class="section-num">2.14&lt;/span> Настроить snmpd&lt;/h3>
&lt;ul>
&lt;li>Скопируйте файл конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /opt/librenms/snmpd.conf.example /etc/snmp/snmpd.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Замените в &lt;code>/etc/snmp/snmpd.conf&lt;/code> строку &lt;code>RANDOMSTRINGGOESHERE&lt;/code> на своё сообщество.&lt;/li>
&lt;li>Загрузите агент определения дистрибутива:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -o /usr/bin/distro https://raw.githubusercontent.com/librenms/librenms-agent/master/snmp/distro
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x /usr/bin/distro
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите демон snmp:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now snmpd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройте-cron">&lt;span class="section-num">2.15&lt;/span> Настройте cron&lt;/h3>
&lt;ul>
&lt;li>Установите cron-файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /opt/librenms/librenms.nonroot.cron /etc/cron.d/librenms
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройте-logrotate">&lt;span class="section-num">2.16&lt;/span> Настройте logrotate&lt;/h3>
&lt;ul>
&lt;li>LibreNMS хранит журналы в &lt;code>/opt/librenms/logs&lt;/code>.&lt;/li>
&lt;li>Чтобы удалять старые журналы, вы можете использовать предоставленный файл конфигурации &lt;code>logrotate&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /opt/librenms/misc/librenms.logrotate /etc/logrotate.d/librenms
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="веб-установщик">&lt;span class="section-num">2.17&lt;/span> Веб-установщик&lt;/h3>
&lt;ul>
&lt;li>Перейдите к веб-установщику и следуйте инструкциям на экране.&lt;/li>
&lt;li>Веб-установщик может предложить вам вручную создать &lt;code>config.php&lt;/code>, скопировав содержимое, отображаемое на экране, в файл.&lt;/li>
&lt;li>После этого не забудьте установить права доступа к &lt;code>config.php&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown librenms:librenms /opt/librenms/config.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="миграция-с-observium">&lt;span class="section-num">3&lt;/span> Миграция с Observium&lt;/h2>
&lt;h3 id="скрипты-миграции">&lt;span class="section-num">3.1&lt;/span> Скрипты миграции&lt;/h3>
&lt;h4 id="общая-информация">&lt;span class="section-num">3.1.1&lt;/span> Общая информация&lt;/h4>
&lt;ul>
&lt;li>Сценарии миграции доступны в каталоге &lt;code>/opt/librenms/scripts/Migration&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="что-переносится">&lt;span class="section-num">3.1.2&lt;/span> Что переносится&lt;/h4>
&lt;ul>
&lt;li>Файлы RRD.
&lt;ul>
&lt;li>Список хостов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="типы-миграции">&lt;span class="section-num">3.1.3&lt;/span> Типы миграции&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Разная архитектура хостов&lt;/p>
&lt;ul>
&lt;li>RRD файлы преобразуются в XML, а потом обратно в RRD.&lt;/li>
&lt;li>Скрипты: &lt;code>/opt/librenms/scripts/Migration/XML_Conversion&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Одинаковая архитектура хостов&lt;/p>
&lt;ul>
&lt;li>RRD файлы просто копируются.&lt;/li>
&lt;li>Скрипты: &lt;code>/opt/librenms/scripts/Migration/Standard_Conversion&lt;/code>.&lt;/li>
&lt;li>Скрипты перед использование переименовать:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mv convert_no_xml.sh convert.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv destwork_no_xml.sh destwork.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Краткий список переменных в скриптах:&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="переменные-в-скриптах">&lt;span class="section-num">3.1.4&lt;/span> Переменные в скриптах&lt;/h4>
&lt;ul>
&lt;li>&lt;code>DEST&lt;/code>: IP-адрес или имя хоста сервера LibreNMS.&lt;/li>
&lt;li>&lt;code>L_RRDPATH&lt;/code>: расположение каталога &lt;code>rrd&lt;/code> LibreNMS. Значение по умолчанию: место установки по умолчанию.&lt;/li>
&lt;li>&lt;code>O_RRDPATH&lt;/code>: расположение каталога &lt;code>rrd&lt;/code> Observium. Значение по умолчанию: место установки по умолчанию.&lt;/li>
&lt;li>&lt;code>MKDIR&lt;/code>: расположение скрипта &lt;code>mkdir.sh&lt;/code>.&lt;/li>
&lt;li>&lt;code>DESTSCRIPT&lt;/code>: расположение скрипта &lt;code>destwork.sh&lt;/code>.&lt;/li>
&lt;li>&lt;code>NODELIST&lt;/code>: расположение файла &lt;code>nodelist.txt&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="что-делают-скрипты">&lt;span class="section-num">3.1.5&lt;/span> Что делают скрипты&lt;/h4>
&lt;ul>
&lt;li>&lt;code>convert.sh&lt;/code>: выполняется на Observium. Преобразует файлы RRD в XML и копирует их на LibreNMS, либо просто копирует их на LibreNMS.&lt;/li>
&lt;li>&lt;code>destwork.sh&lt;/code>: выполняется на LibreNMS, запускается из &lt;code>convert.sh&lt;/code>. Преобразует файлы XML в RRD (при необходимости) и добавляет список хостов из &lt;code>nodelist.txt&lt;/code> в LibreNMS.&lt;/li>
&lt;/ul>
&lt;h4 id="процесс-миграциии">&lt;span class="section-num">3.1.6&lt;/span> Процесс миграциии&lt;/h4>
&lt;ul>
&lt;li>Хосты &lt;code>observium.example.com&lt;/code> и &lt;code>librenms.example.com&lt;/code>.&lt;/li>
&lt;li>Копируем скрипты на &lt;code>librenms.example.com&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@librenms.example.com# cp destwork.sh mkdir.sh /tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@librenms.example.com# &lt;span class="nb">cd&lt;/span> /tmp/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@librenms.example.com# chmod +x destwork.sh mkdir.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отредактируйте &lt;code>SNMPSTRING&lt;/code> в &lt;code>/tmp/destwork.sh&lt;/code>.&lt;/li>
&lt;li>Скопируем скрипты с &lt;code>librenms.example.com&lt;/code> на &lt;code>observium.example.com&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@librenms.example.com# scp convert.sh mkdir.sh /tmp/destwork.sh observium.example.com:/tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перейдите на &lt;code>observium.example.com&lt;/code>.&lt;/li>
&lt;li>Отредактируйте &lt;code>DEST&lt;/code> в &lt;code>/etc/convert.sh&lt;/code>.&lt;/li>
&lt;li>Поменяем права доступа к скрипту:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@observium.example.com# chmod +x /tmp/convert.sh /tmp/mkdir.sh /tmp/destwork.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройте аутентификацию по ключу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@observium.example.com# ssh-copy-id librenms@example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте файл &lt;code>/tmp/nodelist.txt&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@observium.example.com# ls /opt/observium/rrd/ &lt;span class="p">|&lt;/span> egrep -v &lt;span class="s2">&amp;#34;*.rrd&amp;#34;&lt;/span> &amp;gt; /tmp/nodelist.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируйте файл &lt;code>/tmp/nodelist.txt&lt;/code> на &lt;code>librenms.example.com&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@observium.example.com# scp /tmp/nodelist.txt librenms.example.com:/tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@observium.example.com# /tmp/convert.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Альтернативы Microsoft Office</title><link>https://yamadharma.github.io/ru/post/2023/03/19/microsoft-office-alternatives/</link><pubDate>Sun, 19 Mar 2023 17:13:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/03/19/microsoft-office-alternatives/</guid><description>&lt;p>Чем заменить Microsoft Office в России.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#libreoffice">&lt;span class="section-num">1&lt;/span> LibreOffice&lt;/a>&lt;/li>
&lt;li>&lt;a href="#onlyoffice">&lt;span class="section-num">2&lt;/span> OnlyOffice&lt;/a>&lt;/li>
&lt;li>&lt;a href="#р7-офис">&lt;span class="section-num">3&lt;/span> Р7-Офис&lt;/a>&lt;/li>
&lt;li>&lt;a href="#alteroffice">&lt;span class="section-num">4&lt;/span> AlterOffice&lt;/a>&lt;/li>
&lt;li>&lt;a href="#циркон-офис">&lt;span class="section-num">5&lt;/span> Циркон-Офис&lt;/a>&lt;/li>
&lt;li>&lt;a href="#мойофис">&lt;span class="section-num">6&lt;/span> МойОфис&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#состав-продукта">&lt;span class="section-num">6.1&lt;/span> Состав продукта&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="libreoffice">&lt;span class="section-num">1&lt;/span> LibreOffice&lt;/h2>
&lt;ul>
&lt;li>Сайт:
&lt;ul>
&lt;li>&lt;a href="https://www.libreoffice.org/" target="_blank" rel="noopener">https://www.libreoffice.org/&lt;/a>;&lt;/li>
&lt;li>&lt;a href="https://ru.libreoffice.org/" target="_blank" rel="noopener">https://ru.libreoffice.org/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="onlyoffice">&lt;span class="section-num">2&lt;/span> OnlyOffice&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.onlyoffice.com/" target="_blank" rel="noopener">https://www.onlyoffice.com/&lt;/a>.&lt;/li>
&lt;li>Репозитории: &lt;a href="https://github.com/ONLYOFFICE/" target="_blank" rel="noopener">https://github.com/ONLYOFFICE/&lt;/a>.&lt;/li>
&lt;li>Веб-сервис: &lt;a href="https://personal.onlyoffice.com/ru" target="_blank" rel="noopener">https://personal.onlyoffice.com/ru&lt;/a>.&lt;/li>
&lt;li>Интерфейс пакета сделан очень близко к MS Office.&lt;/li>
&lt;li>Есть Community версия.&lt;/li>
&lt;li>Операционные системы: Windows, OS X, Linux, iOS, Android.&lt;/li>
&lt;li>Не поддерживает VBA.&lt;/li>
&lt;li>Версии: десктопная, серверная, облачная.&lt;/li>
&lt;/ul>
&lt;h2 id="р7-офис">&lt;span class="section-num">3&lt;/span> Р7-Офис&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.r7-office.ru/" target="_blank" rel="noopener">https://www.r7-office.ru/&lt;/a>.&lt;/li>
&lt;li>Входит в список Росреестра.&lt;/li>
&lt;li>Вариант &lt;em>OnlyOffice&lt;/em>, распространяемый по другой бизнес-модели (за деньги).&lt;/li>
&lt;li>На сайте можно запросить пробную версию.&lt;/li>
&lt;li>Операционные системы: Windows, OS X, Linux, iOS, Android.&lt;/li>
&lt;li>Не поддерживает VBA.&lt;/li>
&lt;li>Версии: десктопная, серверная, облачная.&lt;/li>
&lt;/ul>
&lt;h2 id="alteroffice">&lt;span class="section-num">4&lt;/span> AlterOffice&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://alteroffice.ru/" target="_blank" rel="noopener">https://alteroffice.ru/&lt;/a>.&lt;/li>
&lt;li>Входит в список Росреестра.&lt;/li>
&lt;li>Является клоном LibreOffice.&lt;/li>
&lt;li>Разработчик наложил свои лицензии (то есть нарушил лицензии LibreOffice).&lt;/li>
&lt;li>Не поддерживает VBA.&lt;/li>
&lt;/ul>
&lt;h2 id="циркон-офис">&lt;span class="section-num">5&lt;/span> Циркон-Офис&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.swemel.ru/products-and-services/programmnyij-kompleks-%C2%ABczirkon-ofis%C2%BB/" target="_blank" rel="noopener">https://www.swemel.ru/products-and-services/programmnyij-kompleks-%C2%ABczirkon-ofis%C2%BB/&lt;/a>.&lt;/li>
&lt;li>Входит в список Росреестра.&lt;/li>
&lt;li>Как скачать &amp;mdash; не понятно.&lt;/li>
&lt;li>Является клоном LibreOffice.&lt;/li>
&lt;li>Разработчик наложил свои лицензии (то есть нарушил лицензии LibreOffice).&lt;/li>
&lt;li>Не поддерживает VBA.&lt;/li>
&lt;/ul>
&lt;h2 id="мойофис">&lt;span class="section-num">6&lt;/span> МойОфис&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://myoffice.ru/" target="_blank" rel="noopener">https://myoffice.ru/&lt;/a>.&lt;/li>
&lt;li>Входит в список Росреестра.&lt;/li>
&lt;li>Операционные системы: Windows, OS X, Linux, iOS, Android.&lt;/li>
&lt;li>На сайте можно запросить пробную версию.&lt;/li>
&lt;li>Не поддерживает VBA.&lt;/li>
&lt;/ul>
&lt;h3 id="состав-продукта">&lt;span class="section-num">6.1&lt;/span> Состав продукта&lt;/h3>
&lt;ul>
&lt;li>Редактор текста: &lt;em>МойОфис Текст&lt;/em>.&lt;/li>
&lt;li>Редактор таблиц: &lt;em>МойОфис Таблица&lt;/em>.&lt;/li>
&lt;li>Просмотр презентаций: &lt;em>МойОфис Презентация&lt;/em>.&lt;/li>
&lt;li>Создание презентаций: &lt;em>Редактор Презентаций&lt;/em>. На основе LibreOffice Impress.&lt;/li>
&lt;li>Работа с почтой: &lt;em>МойОфис Почта&lt;/em>. На основе Mozilla Thunderbird.&lt;/li>
&lt;/ul></description></item><item><title>Формат Small Form-factor Pluggable (SFP)</title><link>https://yamadharma.github.io/ru/post/2023/03/19/small-form-factor-pluggable/</link><pubDate>Sun, 19 Mar 2023 16:38:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/03/19/small-form-factor-pluggable/</guid><description>&lt;p>Формат сменных модулей для сетевых интерфейсов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#sfp">&lt;span class="section-num">1&lt;/span> SFP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#sfp-plus">&lt;span class="section-num">2&lt;/span> SFP+&lt;/a>&lt;/li>
&lt;li>&lt;a href="#sfp28">&lt;span class="section-num">3&lt;/span> SFP28&lt;/a>&lt;/li>
&lt;li>&lt;a href="#qsfp-plus">&lt;span class="section-num">4&lt;/span> QSFP+&lt;/a>&lt;/li>
&lt;li>&lt;a href="#qsfp28">&lt;span class="section-num">5&lt;/span> QSFP28&lt;/a>&lt;/li>
&lt;li>&lt;a href="#xfp">&lt;span class="section-num">6&lt;/span> XFP&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="sfp">&lt;span class="section-num">1&lt;/span> SFP&lt;/h2>
&lt;ul>
&lt;li>SFP (small form-factor pluggable) заменил модули GBIC (Gigabit interface converter).&lt;/li>
&lt;li>Размер составляет 1/2 от модуля GBIC.&lt;/li>
&lt;li>Скорость передачи данных SFP колеблется от 100 Мбит/с до 4 Гбит/с.&lt;/li>
&lt;li>SFP основан на протоколе SFF-8472.&lt;/li>
&lt;/ul>
&lt;h2 id="sfp-plus">&lt;span class="section-num">2&lt;/span> SFP+&lt;/h2>
&lt;ul>
&lt;li>SFP+ (small form-factor pluggable plus) &amp;mdash; расширенная версия SFP, поддерживающая 8 Гбит/с Fibre Channel, 10 Gigabit Ethernet и стандарт оптической транспортной сети OTU2.&lt;/li>
&lt;li>SFP+ также предлагает прямое подключение для соединения двух портов SFP+ без дополнительных оптических модулей.&lt;/li>
&lt;li>SFP и SFP+ модули идентичны по размеру и внешнему виду.&lt;/li>
&lt;li>SFP+ соответствует протоколам SFF-8431 и SFF-8432.&lt;/li>
&lt;li>В порт SFP+ можно установить SFP модуль.&lt;/li>
&lt;li>SFP+ модуль нельзя подключить к порту SFP.&lt;/li>
&lt;/ul>
&lt;h2 id="sfp28">&lt;span class="section-num">3&lt;/span> SFP28&lt;/h2>
&lt;ul>
&lt;li>SFP28 (small form-factor pluggable 28) &amp;mdash; расширенная версия SFP+.&lt;/li>
&lt;li>SFP28 и SFP+ имеют одинаковый размер, но SFP28 поддерживает 25 Гбит/с на одном канале.&lt;/li>
&lt;li>Расположение контактов разъёмов SFP28 и SFP+ совместимо.&lt;/li>
&lt;li>SFP28 будет работать с SFP+ модулями с пониженной скоростью.&lt;/li>
&lt;/ul>
&lt;h2 id="qsfp-plus">&lt;span class="section-num">4&lt;/span> QSFP+&lt;/h2>
&lt;ul>
&lt;li>QSFP+ есть эволюция QSFP (quad small form-factor pluggable).&lt;/li>
&lt;li>QSFP может поддерживать 4 канала одновременно, и каждый канал может обрабатывать скорость передачи данных 1 Гбит/с, поэтому он называется Quad SFP.&lt;/li>
&lt;li>QSFP+ поддерживает четыре канала 10 Гбит/с.&lt;/li>
&lt;li>Эти 4 канала могут быть объединены в один канал.&lt;/li>
&lt;li>QSFP+ может заменить 4 стандартных SFP+ модулей.&lt;/li>
&lt;/ul>
&lt;h2 id="qsfp28">&lt;span class="section-num">5&lt;/span> QSFP28&lt;/h2>
&lt;ul>
&lt;li>QSFP28 (quad small form-factor pluggable 28) обеспечивает четыре канала высокоскоростных дифференциальных сигналов со скоростями передачи данных от 25 Гбит/с до 40 Гбит/с.&lt;/li>
&lt;/ul>
&lt;h2 id="xfp">&lt;span class="section-num">6&lt;/span> XFP&lt;/h2>
&lt;ul>
&lt;li>XFP (10-гигабитный Small Form Factor Pluggable) &amp;mdash; протоколо-независимый оптический трансивер.&lt;/li>
&lt;li>По размерам XFP больше, чем SFP.&lt;/li>
&lt;/ul></description></item><item><title>Контроллер Cisco WLC</title><link>https://yamadharma.github.io/ru/post/2023/03/03/cisco-wlc/</link><pubDate>Fri, 03 Mar 2023 15:14:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/03/03/cisco-wlc/</guid><description>&lt;p>Контроллер Cisco WLC.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#полезные-команды">&lt;span class="section-num">2&lt;/span> Полезные команды&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-wlan">&lt;span class="section-num">3&lt;/span> Настройка WLAN&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>WLC (wireless lan controller) контроллер точек WiFi от Cisco.&lt;/li>
&lt;li>Контроллер нужен для централизованного управления большими беспроводными сетями, построенными на базе не настраиваемых индивидуально точек доступа.&lt;/li>
&lt;li>Точки доступа регистрируются на контроллере, получают с него настройки, управляются им, и предоставляют беспроводной доступ Wi-Fi абонентам.&lt;/li>
&lt;li>Практически все модели точек доступа Cisco выпускаются как в автономном варианте (независимое управление через CLI или GUI), так и в унифицированном (лимитированный CLI и управление с контроллера по протоколу CAPWAP).&lt;/li>
&lt;li>Контроллер представляет собой программно-аппаратную платформу взаимодействия с точками доступа, и проводной сетью.&lt;/li>
&lt;li>Есть виртуальный контроллер в виде образа виртуальной машины под VMware ESXi (ovf-файл).&lt;/li>
&lt;/ul>
&lt;h2 id="полезные-команды">&lt;span class="section-num">2&lt;/span> Полезные команды&lt;/h2>
&lt;ul>
&lt;li>Настроить IP-адрес точке доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap static-ip &lt;span class="nb">enable&lt;/span> AP-NAME IP-ADDRESS MASK GATEWAY
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроить учётные данные точки доступа для Telnet/SSH:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap telnet &lt;span class="nb">enable&lt;/span> AP-NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config ap ssh &lt;span class="nb">enable&lt;/span> AP-NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config ap mgmtuser add username USERNAME password PASSWORD enablesecret ENABLE-PASSWORD AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Изменить режим точки доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap mode MODE AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроить имя группы на точке доступа&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap group-name GROUP-NAME AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>Настроить flexconnect native vlan на точке доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap flexconnect vlan native VLAN-ID AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверить идентификатор vlan интерфейса:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show interface summary
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверить идентификатор wlan интерфейса:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show wlan summary
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Сопоставить идентификатор vlan с wlan на точке доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap flexconnect vlan wlan WLAN-ID VLAN-ID AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Настроить wlan и сопоставление wlan-интерфейса в группе точек доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan apgroup interface-mapping add GROUP-NAME WLAN-ID INTERFACE-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Понизить точку доступа до автономной с WLC:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap tftp-downgrade TFTP-IP-ADDRESS FILENAME AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Посмотреть cdp на точке доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show ap cdp neighbors detail AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Отключить подключение беспроводных клиентов к сети (добавление клиентов в список исключений):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config exclusionlist add MAC-ADDRESS DESCRIPTION
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Включить светодиод точки доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap led-state &lt;span class="nb">enable&lt;/span> AP_NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Отключить светодиод точки доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap led-state disable AP_NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Перезагрузить точку доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap reset AP_NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Применить фильтр для фильтрации результатов:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grep include &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;commands&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Примеры:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grep include &lt;span class="s2">&amp;#34;AP Serial Number&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;show ap config general AP-NAME&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grep include &lt;span class="s2">&amp;#34;MAC Address&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;show ap config general AP-NAME”
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">grep include &amp;#34;&lt;/span>IP Address&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>show ap config general AP-NAME&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-wlan">&lt;span class="section-num">3&lt;/span> Настройка WLAN&lt;/h2>
&lt;ul>
&lt;li>Каждая беспроводная сеть идентифицируется уникальным именем (SSID).&lt;/li>
&lt;li>Каждая сеть может иметь свой, независимый набор параметров авторизации, шифрования, QoS, дополнительных свойств.&lt;/li>
&lt;li>Каждая точка доступа может обслуживать (анонсировать) до 16 беспроводных сетей.&lt;/li>
&lt;li>Контроллер (в зависимости от модели) может обслуживать до 512 сетей и до сотен точек доступа.&lt;/li>
&lt;li>Просмотр настроенных WLAN:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show wlan summary
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для создания новой сети необходимо задать базовые параметры:
&lt;ul>
&lt;li>&lt;em>Тип сети&lt;/em>: WLAN (беспроводная). Контроллер может также работать как Captive Portal для проводной сети (Guest LAN).&lt;/li>
&lt;li>&lt;em>Имя профиля (profile-name)&lt;/em>: произвольное слово, обычно соответствует имени сети, применяется при использовании систем управления WCS/NCS.&lt;/li>
&lt;li>&lt;em>Имя сети (SSID)&lt;/em>: то, как ваша сеть будет видна клиентским компьютерам.&lt;/li>
&lt;li>&lt;em>Идентификатор (порядковый номер)&lt;/em>: по умолчанию ваши точки доступа будут анонсировать сети с номерами &amp;lt;=16.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Создадим новую сеть:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan create wlan-id profile-name ssid
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Следует задать параметры сети.
&lt;ul>
&lt;li>&lt;em>enable&lt;/em> включает, &lt;em>disable&lt;/em> выключает обслуживание сети точками доступа.&lt;/li>
&lt;li>&lt;em>Security policy&lt;/em> оповещает вас о текущем наборе политик безопасности сети, которые настраиваются далее&lt;/li>
&lt;li>Radio policy позволяет выбрать, в каком диапазоне частот (2.4, 5 ГГц) и скоростей (до 11, до 54 мбит/с) будет работать сеть. Возможны комбинации вариантов. Высокие скорости (802.11n) — тема отдельной статьи. Естественно, ваши точки должны поддерживать выбранные диапазоны.&lt;/li>
&lt;li>&lt;em>interface&lt;/em> определяет, на какой проводной сетевой интерфейс (VLAN) контроллера по умолчанию будут терминироваться подключения беспроводных клиентов.
&lt;ul>
&lt;li>Можно создать несколько динамических интерфейсов, каждый со своим VLAN ID, и распределять ваших пользователей по ним в зависимости от того, к какой сети они подключились.&lt;/li>
&lt;li>&lt;em>Multicast VLAN&lt;/em> определяет, куда в случае нескольких групп интерфейсов будет идти мультикаст трафик.&lt;/li>
&lt;li>&lt;em>Broadcast SSID&lt;/em> определяет, будет ли имя сети отражаться в beacon (анонсах) пакетов, периодически рассылаемых точкой доступа. Иначе это называется «открытая/закрытая сеть».&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Подключение сети к интерфейсу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan interface &amp;lt;wlan-id&amp;gt; &amp;lt;interface-name&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config wlan broadcast-ssid &lt;span class="nb">enable&lt;/span> &amp;lt;wlan_id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Безопасность беспроводной сети строится из трех компонентов:
&lt;ul>
&lt;li>авторизация;&lt;/li>
&lt;li>шифрования;&lt;/li>
&lt;li>веб-политика (опционально), позволяет заворачивать клиентскую HTTP-сессию на встроенный или внешний веб-сервер и запрашивать подтверждение/логин-пароль через форму.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Доступные параметры безопасности 2го уровня:
&lt;ul>
&lt;li>&lt;em>None&lt;/em>: авторизация и шифрование трафика не применяются;&lt;/li>
&lt;li>&lt;em>WPA+WPA2&lt;/em>: позволяет выбрать политику WPA, WPA2 (либо обе), тип шифрования TKIP, AES (либо оба). Данные параметры просто анонсируются клиентам в beacon пакетах.
&lt;ul>
&lt;li>Оптимальным будет использование WPA2/AES.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Нужно, как будет образовываться ключ для шифрования:
&lt;ul>
&lt;li>&lt;em>802.1X&lt;/em>: индивидуальный ключ для каждого клиента будет генерироваться RADIUS-сервером в момент авторизации; также называется WPA(2) Enterprise;&lt;/li>
&lt;li>&lt;em>CCKM&lt;/em>: используется собственный механизм Cisco генерации ключей, подходит только для Cisco Wi-Fi телефонов;&lt;/li>
&lt;li>&lt;em>PSK&lt;/em>: общий (pre-shared) ключ, пароль на сеть, именуемую в таком случае WPA(2) Personal;&lt;/li>
&lt;li>&lt;em>802.1x+CCKM&lt;/em>: гибрид CCKM и RADIUS-ключа (для Cisco-телефонов);&lt;/li>
&lt;li>&lt;em>802.1X&lt;/em>: индивидуальный ключ для каждого клиента будет генерироваться RADIUS-сервером в момент авторизации (это WEP-ключ, протокол шифрования радиоканала &amp;mdash; WEP, пользоваться не рекомендуется);&lt;/li>
&lt;li>&lt;em>Static WEP&lt;/em>: статический WEP-ключ;&lt;/li>
&lt;li>&lt;em>Static WEP+802.1X&lt;/em>: гибрид двух предыдущих;&lt;/li>
&lt;li>&lt;em>CKIP&lt;/em>: проприетарный аналог WEP для Cisco телефонов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В реальности необходимо делать выбор между:
&lt;ul>
&lt;li>отсутствием шифрования/авторизации (гостевой доступ);&lt;/li>
&lt;li>WPA2 (AES) PSK (WPA2 Personal) для доступа в сеть по общему паролю;&lt;/li>
&lt;li>WPA2 (AES) + 802.1X (WPA2 Enterprise) для доступа в сеть через авторизацию на RADIUS-сервере.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Настроим параметры безопасности на интерфейсе:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan security wpa akm 802.1x disable &amp;lt;wlan_id&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config wlan security wpa akm psk &lt;span class="nb">enable&lt;/span> &amp;lt;wlan_id&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config wlan security wpa akm psk set-key ascii &amp;lt;password&amp;gt; &amp;lt;wlan_id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключим радио-интерфейсы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan radio &amp;lt;wlan_id&amp;gt; all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активируем интерфейс:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan &lt;span class="nb">enable&lt;/span> &amp;lt;wlan_id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сети добавляются автоматически в группу точек доступа &lt;code>default-group&lt;/code>.&lt;/li>
&lt;li>Если существуют другие группы точек доступа, то следует сеть добавить к ней:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan apgroup interface-mapping add &amp;lt;apgroup-name&amp;gt; &amp;lt;wlan-id&amp;gt; &amp;lt;interface-name&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Система мониторинга Observium</title><link>https://yamadharma.github.io/ru/post/2023/03/02/observium-monitoring-system/</link><pubDate>Thu, 02 Mar 2023 15:46:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/03/02/observium-monitoring-system/</guid><description>&lt;p>Система мониторинга Observium.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-устройств">&lt;span class="section-num">2&lt;/span> Подключение устройств&lt;/a>&lt;/li>
&lt;li>&lt;a href="#принципы-работы">&lt;span class="section-num">3&lt;/span> Принципы работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-observium">&lt;span class="section-num">4&lt;/span> Установка Observium&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-observium">&lt;span class="section-num">5&lt;/span> Обновление Observium&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.observium.org/" target="_blank" rel="noopener">https://www.observium.org/&lt;/a>.&lt;/li>
&lt;li>Хорош тем, что практически не требует настройки. Работает из коробки.&lt;/li>
&lt;li>Observium доступен в двух версиях:
&lt;ul>
&lt;li>бесплатная &lt;em>Community&lt;/em> (выпускается раз в 6 месяцев);&lt;/li>
&lt;li>платная &lt;em>Professional&lt;/em>;&lt;/li>
&lt;li>платная &lt;em>Enterprise&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Observium Community годится только для сервисов не критичных к времени реакции, так как устройства по SNMP опрашиваются раз в 5 минут.&lt;/li>
&lt;li>В платной версии предусмотрен модуль Alarms.&lt;/li>
&lt;li>Опрос устройств осуществляется по протоколу SNMP.&lt;/li>
&lt;li>Наилучшим образом подходит для мониторинга коммутационного оборудования.&lt;/li>
&lt;/ul>
&lt;h2 id="подключение-устройств">&lt;span class="section-num">2&lt;/span> Подключение устройств&lt;/h2>
&lt;ul>
&lt;li>Для добавления маршрутизатора Cisco достаточно задать SNMP community:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">snmp-server community public RO
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавление устройств в Observium осуществляется либо через меню веб интерфейса (Devices-&amp;gt;Add device), либо из командной строки сервера (из каталога &lt;em>Observium&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">./add_device.php hostname
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="принципы-работы">&lt;span class="section-num">3&lt;/span> Принципы работы&lt;/h2>
&lt;ul>
&lt;li>Сбор статистики поделен на 2 основных процесса:
&lt;ul>
&lt;li>&lt;code>discovery&lt;/code>: выполняется основное обнаружение поддерживаемых на данном устройстве датчиков;&lt;/li>
&lt;li>&lt;code>poller&lt;/code>: опрос устройств каждые 5 минут.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В версии для подписчиков есть ещё 2 дополнительных процесса, работающих совместно с процессом &lt;code>poller&lt;/code>:
&lt;ul>
&lt;li>&lt;code>bill&lt;/code>: подсчёт биллинговой информации на отдельных портах для пользователей;&lt;/li>
&lt;li>&lt;code>alert&lt;/code>: генерация уведомлений по собираемым системой параметрам.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка-observium">&lt;span class="section-num">4&lt;/span> Установка Observium&lt;/h2>
&lt;ul>
&lt;li>Создаем директории, в которых будут располагаться файлы &lt;em>Observium&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo mkdir -p /opt/observium
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачаем версию &lt;em>Community Edition&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget http://www.observium.org/observium-community-latest.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar zxvf observium-community-latest.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Переходим в папку с конфигурационными файлами и создаем конфигурационный файл, скопировав файл по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /optobservium
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp config.php.default config.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Открываем файл &lt;code>config.php&lt;/code> и редактируем настройки MySQL: &lt;code>username&lt;/code>, &lt;code>password&lt;/code>, &lt;code>dbname&lt;/code>.&lt;/li>
&lt;li>Подключаемся к MySQL:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создаём базу данных с именем &lt;code>observium&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">CREATE DATABASE observium DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Даём полные привилегии пользователю &lt;code>observium&lt;/code> на одноименную базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">GRANT ALL PRIVILEGES ON observium.* TO &lt;span class="s1">&amp;#39;observium&amp;#39;&lt;/span>@&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>IDENTIFIED BY &lt;span class="s1">&amp;#39;PASSWORD&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выполняем скрипт конфигурации ранее созданной базы данных MySQL:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/opt/observium/discovery.php -u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создаем дополнительные служебные каталоги:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /opt/observium/logs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /opt/observium/rrd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте файл &lt;code>/etc/httpd/conf.d/observium.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">VirtualHost&lt;/span> &lt;span class="err">*&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DocumentRoot /opt/observium/html/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ServerName observium.domain.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CustomLog /opt/observium/logs/access_log combined
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ErrorLog /opt/observium/logs/error_log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">Directory&lt;/span> &lt;span class="err">&amp;#34;/&lt;/span>&lt;span class="na">opt&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="na">observium&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="na">html&lt;/span>&lt;span class="err">/&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AllowOverride All
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Options FollowSymLinks MultiViews
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Require all granted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">Directory&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">VirtualHost&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте файл &lt;code>/etc/cron.d/observium&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Run a complete discovery of all devices once every 6 hours
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">33 */6 * * * root /opt/observium/discovery.php -h all &amp;gt;&amp;gt; /dev/null 2&amp;gt;&amp;amp;1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Run automated discovery of newly added devices every 5 minutes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*/5 * * * * root /opt/observium/discovery.php -h new &amp;gt;&amp;gt; /dev/null 2&amp;gt;&amp;amp;1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Run multithreaded poller wrapper every 5 minutes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*/5 * * * * root /opt/observium/poller-wrapper.py &amp;gt;&amp;gt; /dev/null 2&amp;gt;&amp;amp;1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Run housekeeping script daily for syslog, eventlog and alert log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">13 5 * * * root /opt/observium/housekeeping.php -ysel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Run housekeeping script daily for rrds, ports, orphaned entries in the database and performance data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">47 4 * * * root /opt/observium/housekeeping.php -yrptb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы форсировать мониторинг устройств, нужно выполнить команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/opt/observium/discovery.php -h all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/opt/observium/poller.php -h all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-observium">&lt;span class="section-num">5&lt;/span> Обновление Observium&lt;/h2>
&lt;ul>
&lt;li>Переименуйте старую установку и скачайте и распакуйте новую (всё под пользователем &lt;code>root&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv observium observium_old
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://www.observium.org/observium-community-latest.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar zxvf observium-community-latest.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv /opt/observium_old/rrd observium/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv /opt/observium_old/logs observium/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv /opt/observium_old/config.php observium/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Исправьте права доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R apache:apache /opt/observium
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите схему БД:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/opt/observium/discovery.php -u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно принудительно выполнить немедленное повторное обнаружение всех устройств:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/opt/observium/discovery.php -h all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно удалить каталог &lt;code>observium_old&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm -rf observium_old
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Флаги запуска Google Chrome</title><link>https://yamadharma.github.io/ru/post/2023/02/28/google-chrome-flags/</link><pubDate>Tue, 28 Feb 2023 15:31:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/02/28/google-chrome-flags/</guid><description>&lt;p>Флаги запуска Google Chrome.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#задание-флагов-в-конфигурационном-файле">&lt;span class="section-num">1&lt;/span> Задание флагов в конфигурационном файле&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#расположение-конфигурационных-файлов">&lt;span class="section-num">1.1&lt;/span> Расположение конфигурационных файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пример-конфигурационного-файла">&lt;span class="section-num">1.2&lt;/span> Пример конфигурационного файла&lt;/a>&lt;/li>
&lt;li>&lt;a href="#модификация-файла-запуска-google-chrome">&lt;span class="section-num">1.3&lt;/span> Модификация файла запуска Google Chrome&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="задание-флагов-в-конфигурационном-файле">&lt;span class="section-num">1&lt;/span> Задание флагов в конфигурационном файле&lt;/h2>
&lt;h3 id="расположение-конфигурационных-файлов">&lt;span class="section-num">1.1&lt;/span> Расположение конфигурационных файлов&lt;/h3>
&lt;ul>
&lt;li>Конфигурационный файл будет называться &lt;code>chrome-flags.conf&lt;/code>.&lt;/li>
&lt;li>Пользовательский файл конфигурации находится в каталоге &lt;code>$HOME/.config/&lt;/code> (переменная среды &lt;code>$XDG_CONFIG_HOME&lt;/code>).&lt;/li>
&lt;li>Глобальный файл конфигурации находится в каталоге &lt;code>/etc/&lt;/code>.&lt;/li>
&lt;li>Специальный синтаксис не используется. Флаги определяются так, как если бы они были записаны в терминале.&lt;/li>
&lt;li>Флаги можно размещать в отдельных строках для удобства чтения, но это не обязательно.&lt;/li>
&lt;li>Строки, начинающиеся с символа решётки (&lt;code>#&lt;/code>), пропускаются.&lt;/li>
&lt;/ul>
&lt;h3 id="пример-конфигурационного-файла">&lt;span class="section-num">1.2&lt;/span> Пример конфигурационного файла&lt;/h3>
&lt;ul>
&lt;li>Настроим перенос кэша броузера во временную файловую систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/chrome-flags.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Cache in tmpfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--disk-cache-dir=$XDG_RUNTIME_DIR/google-chrome
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="модификация-файла-запуска-google-chrome">&lt;span class="section-num">1.3&lt;/span> Модификация файла запуска Google Chrome&lt;/h3>
&lt;ul>
&lt;li>Добавим в файл запуска чтение файла конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">XDG_CONFIG_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">XDG_CONFIG_HOME&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="p">~/.config&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Allow users to override command-line options&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> -f &lt;span class="nv">$XDG_CONFIG_HOME&lt;/span>/chrome-flags.conf &lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>cat &lt;span class="nv">$XDG_CONFIG_HOME&lt;/span>/chrome-flags.conf &lt;span class="p">|&lt;/span> grep -v &lt;span class="s2">&amp;#34;#&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> xargs&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">eval&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$CHROME_USER_FLAGS&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> -f /etc/chrome-flags.conf &lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>cat /etc/chrome-flags.conf &lt;span class="p">|&lt;/span> grep -v &lt;span class="s2">&amp;#34;#&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> xargs&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">eval&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$CHROME_USER_FLAGS&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Соответственно заменим и строку запуска:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Launch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Note: exec -a below is a bashism.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exec&lt;/span> -a &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$HERE&lt;/span>&lt;span class="s2">/chrome&amp;#34;&lt;/span> &lt;span class="nv">$CHROME_USER_FLAGS&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$@&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>VPN. L2TP over IPsec. Подключение клиента</title><link>https://yamadharma.github.io/ru/post/2023/02/05/l2tp-ipsec-vpn-client-setup/</link><pubDate>Sun, 05 Feb 2023 13:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/02/05/l2tp-ipsec-vpn-client-setup/</guid><description>&lt;p>Подключение клиента L2TP/IPsec VPN.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">1&lt;/span> Linux&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">1.1&lt;/span> Gentoo&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#networkmanager">&lt;span class="section-num">1.1.1&lt;/span> NetworkManager&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#l2tp-over-ipsec-через-межсетевой-экран-с-nat">&lt;span class="section-num">2&lt;/span> L2TP over IPSec через межсетевой экран с NAT&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="linux">&lt;span class="section-num">1&lt;/span> Linux&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">1.1&lt;/span> Gentoo&lt;/h3>
&lt;h4 id="networkmanager">&lt;span class="section-num">1.1.1&lt;/span> NetworkManager&lt;/h4>
&lt;ul>
&lt;li>Откройте пользовательский интерфейс NetworkManager, затем:
&lt;ul>
&lt;li>Перейдите в Сеть &amp;gt; VPN. Нажмите &lt;em>+&lt;/em>.&lt;/li>
&lt;li>Выберите &lt;em>Протокол туннелирования уровня 2 (L2TP)&lt;/em>.&lt;/li>
&lt;li>Вы можете выбрать имя для VPN.&lt;/li>
&lt;li>Введите IP-адрес вашего VPN-сервера для шлюза.&lt;/li>
&lt;li>Введите имя пользователя VPN для имени пользователя.&lt;/li>
&lt;li>Щелкните правой кнопкой мыши &lt;em>?&lt;/em> в поле &lt;em>Пароль&lt;/em> и выберите &lt;em>Сохранить пароль только для этого пользователя&lt;/em>.
&lt;ul>
&lt;li>Можете использовать &lt;em>Сохранить пароль для всех пользователей&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Введите свой пароль VPN для пароля.&lt;/li>
&lt;li>Оставьте поле Домен NT пустым.&lt;/li>
&lt;li>Нажмите кнопку &lt;em>Настройки IPsec&amp;hellip;&lt;/em>.&lt;/li>
&lt;li>Установите флажок Включить туннель IPsec для хоста L2TP.&lt;/li>
&lt;li>Оставьте поле ID шлюза пустым.&lt;/li>
&lt;li>Введите свой &lt;em>VPN IPsec PSK&lt;/em> для общего ключа (preshared-key).&lt;/li>
&lt;li>Затем нажмите &lt;em>Add&lt;/em>, чтобы сохранить информацию о VPN-подключении.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Взаимодействие с Strongswan&lt;/p>
&lt;ul>
&lt;li>По умолчанию strongswan собирается с поддержкой capabilities и возможностью запуска под непривилегированным пользователем.&lt;/li>
&lt;li>Однако в NetworkManager поддержка capabilities не настроена.&lt;/li>
&lt;li>В результате соединение не устанавливается.&lt;/li>
&lt;li>Решить проблему можно следующим образом:
&lt;ul>
&lt;li>либо установить strongswan без поддержки capabilities и возможности запуска под непривилегированным пользователем:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">USE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-caps -non-root&amp;#34;&lt;/span> emerge strongswan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>либо собрать NetworkManager с поддержкой capabilities (см. &lt;a href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/merge_requests/1053" target="_blank" rel="noopener">https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/merge_requests/1053&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="l2tp-over-ipsec-через-межсетевой-экран-с-nat">&lt;span class="section-num">2&lt;/span> L2TP over IPSec через межсетевой экран с NAT&lt;/h2>
&lt;ul>
&lt;li>Необходимо задать правила на межсетевом экране для трафика L2TP over IPSec VPN.&lt;/li>
&lt;li>IKE (UDP 500) &amp;mdash; протокол обмена ключами. Без него IPSec не работает. Посредством этого протокола происходит согласование и обмен ключами. Пробрасывать нужно.&lt;/li>
&lt;li>NAT-T (UDP 4500) &amp;mdash; протокол инкапсулирует IPSec в UDP пакеты, что позволяет проходить трафику через NAT. Без этого протокола пакет не дойдет до получателя, а будут потерян на первом же NAT устройстве. Пробрасывать нужно.&lt;/li>
&lt;li>ESP (protocol 50) &amp;mdash; протокол обеспечивает шифрование, аутентификацию и целостность. Инкапсулируется в UDP. Пробрасывать не нужно.&lt;/li>
&lt;li>L2TP (UDP 1701) &amp;mdash; протокол туннелирования. О нём знают только оконечные узлы туннеля IPSec. Инкапсулируется в IPSec.. Пробрасывать не нужно&lt;/li>
&lt;/ul></description></item><item><title>Windows. Синхронизация времени</title><link>https://yamadharma.github.io/ru/post/2022/11/16/windows-time-synchronization/</link><pubDate>Wed, 16 Nov 2022 20:26:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/11/16/windows-time-synchronization/</guid><description>&lt;p>Синхронизация времени на Windows.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#синхронизация-со-сторонним-ntp-сервером">&lt;span class="section-num">1&lt;/span> Синхронизация со сторонним NTP-сервером&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проблема">&lt;span class="section-num">1.1&lt;/span> Проблема&lt;/a>&lt;/li>
&lt;li>&lt;a href="#причина">&lt;span class="section-num">1.2&lt;/span> Причина&lt;/a>&lt;/li>
&lt;li>&lt;a href="#решение">&lt;span class="section-num">1.3&lt;/span> Решение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="синхронизация-со-сторонним-ntp-сервером">&lt;span class="section-num">1&lt;/span> Синхронизация со сторонним NTP-сервером&lt;/h2>
&lt;h3 id="проблема">&lt;span class="section-num">1.1&lt;/span> Проблема&lt;/h3>
&lt;ul>
&lt;li>NTP-сервер по умолчанию для Windows (&lt;code>time.windows.com&lt;/code>) часто сбоит.&lt;/li>
&lt;li>При попытке синхронизировать Microsoft Windows с сервером протокола сетевого времени (NTP), который не работает под управлением Microsoft Windows, синхронизация может завершиться неудачно.&lt;/li>
&lt;/ul>
&lt;h3 id="причина">&lt;span class="section-num">1.2&lt;/span> Причина&lt;/h3>
&lt;ul>
&lt;li>Иногда Windows отправляет запросы на синхронизацию в симметричном активном режиме (например, контроллеры домена Windows Server).&lt;/li>
&lt;li>Зачастую серверы NTP отвечают только на запросы от клиентов, а не серверов.&lt;/li>
&lt;/ul>
&lt;h3 id="решение">&lt;span class="section-num">1.3&lt;/span> Решение&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>В командной строке (с правами администратора) наберите:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">w32tm /config /manualpeerlist:pool.ntp.org,0x8 /syncfromflags:MANUAL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net stop w32time
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net start w32time
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">w32tm /resync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>0x08&lt;/code> задаёт режим клиента.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Начальная конфигурация коммутатора Cisco</title><link>https://yamadharma.github.io/ru/post/2022/11/15/initial-cisco-switch-configuration/</link><pubDate>Tue, 15 Nov 2022 14:51:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/11/15/initial-cisco-switch-configuration/</guid><description>&lt;p>Начальная конфигурация коммутатора Cisco Catalist.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#подготовка">&lt;span class="section-num">1&lt;/span> Подготовка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#базовая-конфигурация">&lt;span class="section-num">2&lt;/span> Базовая конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#включение">&lt;span class="section-num">2.1&lt;/span> Включение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переход-в-привилегированный-режим">&lt;span class="section-num">2.2&lt;/span> Переход в привилегированный режим&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переход-в-режим-конфигурации">&lt;span class="section-num">2.3&lt;/span> Переход в режим конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#шифрование-паролей">&lt;span class="section-num">2.4&lt;/span> Шифрование паролей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#административный-доступ">&lt;span class="section-num">2.5&lt;/span> Административный доступ&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-нового-режима-аутентификации">&lt;span class="section-num">2.6&lt;/span> Настройка нового режима аутентификации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#административный-пользователь">&lt;span class="section-num">2.7&lt;/span> Административный пользователь&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удалённый-доступ">&lt;span class="section-num">2.8&lt;/span> Удалённый доступ&lt;/a>&lt;/li>
&lt;li>&lt;a href="#зададим-имя-устройства">&lt;span class="section-num">2.9&lt;/span> Зададим имя устройства&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-ssh">&lt;span class="section-num">2.10&lt;/span> Настройка ssh&lt;/a>&lt;/li>
&lt;li>&lt;a href="#поднимем-интерфейсы">&lt;span class="section-num">2.11&lt;/span> Поднимем интерфейсы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сетевые-настройки">&lt;span class="section-num">2.12&lt;/span> Сетевые настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-vtp">&lt;span class="section-num">2.13&lt;/span> Настройка vtp&lt;/a>&lt;/li>
&lt;li>&lt;a href="#безопасность">&lt;span class="section-num">2.14&lt;/span> Безопасность&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сохранение-конфигурации">&lt;span class="section-num">2.15&lt;/span> Сохранение конфигурации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подключение-к-observium">&lt;span class="section-num">3&lt;/span> Подключение к Observium&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="подготовка">&lt;span class="section-num">1&lt;/span> Подготовка&lt;/h2>
&lt;ul>
&lt;li>На Linux для конфигурации используется Minicom.&lt;/li>
&lt;li>Запускайте по пользователем &lt;code>root&lt;/code>.&lt;/li>
&lt;li>Для первоначальной конфигурации задайте ключ &lt;code>-s&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">minicom -s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выставите параметры Скорость/Четность/Биты (Bps/Par/Bits) = 9600 8N1.&lt;/li>
&lt;li>Укажите последовательный порт:
&lt;ul>
&lt;li>последовательный порт: &lt;code>/dev/ttyS[0-3]&lt;/code>;&lt;/li>
&lt;li>порт USB: &lt;code>/dev/ttyUSB0&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Итоговая конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">A - Последовательный порт : /dev/ttyUSB0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">B - Размещение lock-файла : /var/lock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">C - Программа при выходе :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">D - Программа при запуске :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">E - Скорость/Чётность/Биты : 9600 8N1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">F - Аппаратное управление потоком : Да
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">G - Программное управление потоком : Нет
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После изменений в меню выбрать &amp;ldquo;Сохранить настройки как dfl&amp;rdquo; или под своим именем.&lt;/li>
&lt;/ul>
&lt;h2 id="базовая-конфигурация">&lt;span class="section-num">2&lt;/span> Базовая конфигурация&lt;/h2>
&lt;h3 id="включение">&lt;span class="section-num">2.1&lt;/span> Включение&lt;/h3>
&lt;ul>
&lt;li>При первом включении, после долгой загрузки коммутатор выдает предложение запустить диалог стартовой конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">Would you like to enter the initial configuration dialog? [yes/no]:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Следует отказаться и выполнить конфигурацию вручную, поэтому отвечаем &lt;code>no&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="переход-в-привилегированный-режим">&lt;span class="section-num">2.2&lt;/span> Переход в привилегированный режим&lt;/h3>
&lt;ul>
&lt;li>Получаем приглашение &lt;code>Switch&amp;gt;&lt;/code>.&lt;/li>
&lt;li>Переходим в привилегированный режим командой &lt;code>enable&lt;/code>.&lt;/li>
&lt;li>Приглашение меняется на &lt;code>#&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&amp;gt;enable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch#
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="переход-в-режим-конфигурации">&lt;span class="section-num">2.3&lt;/span> Переход в режим конфигурации&lt;/h3>
&lt;ul>
&lt;li>Перейдём в режим конфигурации коммутатора:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch#configure terminal
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="шифрование-паролей">&lt;span class="section-num">2.4&lt;/span> Шифрование паролей&lt;/h3>
&lt;ul>
&lt;li>Установим шифрование паролей, хранящиеся в устройстве в открытом виде:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#service password-encryption&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="административный-доступ">&lt;span class="section-num">2.5&lt;/span> Административный доступ&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Зададим пароль на &lt;em>enable&lt;/em>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#enable secret &amp;lt;пароль&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>secret&lt;/code> : указывает на то, что пароль будет храниться в зашифрованном виде&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>После оператора &lt;code>secret&lt;/code> можно задать представление пароля:&lt;/p>
&lt;ul>
&lt;li>&lt;code>0&lt;/code> : незашифрованный текстовый пароль; используется по умолчанию, поэтому не обязателен;&lt;/li>
&lt;li>&lt;code>4&lt;/code> : используется хеш SHA-256; считается устаревшим;&lt;/li>
&lt;li>&lt;code>5&lt;/code> : используется хеш MD5;&lt;/li>
&lt;li>&lt;code>8&lt;/code> : используется хеш SHA-256;&lt;/li>
&lt;li>&lt;code>9&lt;/code> : используется алгоритм &lt;code>scrypt&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-нового-режима-аутентификации">&lt;span class="section-num">2.6&lt;/span> Настройка нового режима аутентификации&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Настроим режим &lt;em>aaa&lt;/em> (authentication, authorization, accounting):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#aaa new-model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#aaa authentication login default local&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Настроим подключение по консоли:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#line console 0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#login authentication default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#no password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Консоль настроена на использование локальной базы данных имён пользователей и паролей.&lt;/li>
&lt;li>&lt;code>no password&lt;/code> : удалить старую модель паролей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="административный-пользователь">&lt;span class="section-num">2.7&lt;/span> Административный пользователь&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Зададим пользователя admin и пароль для него:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#username admin privilege 1 secret &amp;lt;пароль&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>privelege&lt;/code> : уровень привилегий для данного пользователя от 0 до 15 (15 самый высокий);&lt;/li>
&lt;li>&lt;code>secret&lt;/code> : пароль будет храниться в зашифрованном виде.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="удалённый-доступ">&lt;span class="section-num">2.8&lt;/span> Удалённый доступ&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Не во всех поставках IOS есть поддержка &lt;em>ssh&lt;/em>. Поэтому приходится использовать &lt;em>telnet&lt;/em>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Настроим порядок аутентификации по &lt;em>telnet&lt;/em>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Настроим подключение по терминальным линиям.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#line vty 0 4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#login authentication default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#transport input telnet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#no password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#line vty 5 15&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#login authentication default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#transport input telnet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#no password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Терминальные линии, включая telnet, настроены на использование одной и той же локальной базы данных имён пользователей и паролей.&lt;/li>
&lt;li>&lt;code>no password&lt;/code> : удалить старую модель паролей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="зададим-имя-устройства">&lt;span class="section-num">2.9&lt;/span> Зададим имя устройства&lt;/h3>
&lt;ul>
&lt;li>Имя устройства имеет вид: sw-&amp;lt;помещение&amp;gt;-&amp;lt;номер устройства&amp;gt;, например &lt;code>sw-103-1&lt;/code>.&lt;/li>
&lt;li>Зададим имя устройства:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#hostname sw-103-1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip domain-name example.com&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-ssh">&lt;span class="section-num">2.10&lt;/span> Настройка ssh&lt;/h3>
&lt;ul>
&lt;li>Если устройство поддерживает ssh, то стоит его настроить.&lt;/li>
&lt;li>Создадим ключ (необходимо, чтобы было настроено имя домена):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#crypto key generate rsa modulus 2048&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Задаёт версию протокола для ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip ssh version 2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Указываем время таймаута до автоматического закрытия SSH сессии в 60 минут:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip ssh time-out 60&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сбрасываем подключение после 3 неверных паролей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip ssh authentication-retries 3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Задаём протокол для подключения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#line vty 0 4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#transport input ssh&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно также оставить и telnet:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#line vty 0 4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#transport input all&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="поднимем-интерфейсы">&lt;span class="section-num">2.11&lt;/span> Поднимем интерфейсы&lt;/h3>
&lt;ul>
&lt;li>Сделаем последний порт транковым:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#interface gigabitEthernet1/0/48&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if-range&lt;span class="o">)&lt;/span>&lt;span class="c1">#switchport mode trunk&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if-range&lt;span class="o">)&lt;/span>&lt;span class="c1">#exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="сетевые-настройки">&lt;span class="section-num">2.12&lt;/span> Сетевые настройки&lt;/h3>
&lt;ul>
&lt;li>Зададим адрес 192.168.0.1/24, шлюз 192.168.0.254:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#interface vlan1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1">#no shutdown&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip address 192.168.0.1 255.255.255.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1">#exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip default-gateway 192.168.0.254&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроим клиента DNS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip name-server 192.168.0.254&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроим NTP:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ntp server pool.ntp.org&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверим статус синхронизации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1#sh ntp status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-vtp">&lt;span class="section-num">2.13&lt;/span> Настройка vtp&lt;/h3>
&lt;ul>
&lt;li>Настройте vtp:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#vtp mode client&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте статус vtp:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1#sh vtp status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="безопасность">&lt;span class="section-num">2.14&lt;/span> Безопасность&lt;/h3>
&lt;ul>
&lt;li>Отключим сервер http:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#no ip http server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#no ip http secure-server&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="сохранение-конфигурации">&lt;span class="section-num">2.15&lt;/span> Сохранение конфигурации&lt;/h3>
&lt;ul>
&lt;li>Сохраните конфигурацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1#write mem
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="подключение-к-observium">&lt;span class="section-num">3&lt;/span> Подключение к Observium&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Настройте доступ к SMTP.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Пусть сервер мониторинга имеет адрес: 192.168.0.5.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Имя коммьюнити для чтения: rocom.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#access-list 90 permit 192.168.0.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#snmp-server community rocom RO 90&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Добавьте коммутатор в свой DNS.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Подключитесь к Observium.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Добавьте коммутатор в список наблюдения в Observium:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@observium ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># /opt/observium/add_device.php sw-103-1 rocom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@observium ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># /opt/observium/discovery.php -h sw-103-1; /opt/observium/poller.php -h sw-103-1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>Установка пароля может быть выполнена двумя командами &lt;code>password&lt;/code> и &lt;code>secret&lt;/code>. В первом случае пароль хранится в конфигурационном файле в открытом виде, а во втором в зашифрованном. Если использовалась команда &lt;code>password&lt;/code>, необходимо зашифровать пароли, хранящиеся в устройстве в открытом виде с помощью команды &lt;code>service password-encryption&lt;/code> в режиме глобальной конфигурации.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Язык программирования HCL</title><link>https://yamadharma.github.io/ru/post/2022/11/05/hcl-programming-language/</link><pubDate>Sat, 05 Nov 2022 18:03:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/11/05/hcl-programming-language/</guid><description>&lt;p>Язык конфигурации HashiCorp (HCL &amp;mdash; HashiCorp Configuration Language).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>HCL &amp;mdash; это язык программирования, разработанный HashiCorp.&lt;/li>
&lt;li>HCL используется для настройки программных сред и программных библиотек.&lt;/li>
&lt;li>Синтаксис HCL: &lt;a href="https://github.com/hashicorp/hcl/blob/main/hclsyntax/spec.md" target="_blank" rel="noopener">https://github.com/hashicorp/hcl/blob/main/hclsyntax/spec.md&lt;/a>.&lt;/li>
&lt;/ul></description></item><item><title>Packer</title><link>https://yamadharma.github.io/ru/post/2022/10/30/packer/</link><pubDate>Sun, 30 Oct 2022 19:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/10/30/packer/</guid><description>&lt;p>Утилита для создания образов операционных систем Packer.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#необходимое-программное-обеспечение">&lt;span class="section-num">2&lt;/span> Необходимое программное обеспечение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#virtualbox">&lt;span class="section-num">2.1&lt;/span> Virtualbox&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vmware">&lt;span class="section-num">2.2&lt;/span> VmWare&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vmware-open-vm-tools">&lt;span class="section-num">2.3&lt;/span> VMware open-vm-tools&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#скрипты-развёртывания">&lt;span class="section-num">3&lt;/span> Скрипты развёртывания&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примеры-скриптов-развёртывания">&lt;span class="section-num">4&lt;/span> Примеры скриптов развёртывания&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-rocky-linux-9-dot-0">&lt;span class="section-num">4.1&lt;/span> Установка Rocky Linux 9.0&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.packer.io/" target="_blank" rel="noopener">https://www.packer.io/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/hashicorp/packer" target="_blank" rel="noopener">https://github.com/hashicorp/packer&lt;/a>.&lt;/li>
&lt;li>Бинарные сборки: &lt;a href="https://releases.hashicorp.com/packer" target="_blank" rel="noopener">https://releases.hashicorp.com/packer&lt;/a> (на данный момент не доступно из России).&lt;/li>
&lt;li>Зеркало бинарных сборок:
&lt;ul>
&lt;li>&lt;a href="https://hashicorp-releases.yandexcloud.net/packer/" target="_blank" rel="noopener">https://hashicorp-releases.yandexcloud.net/packer/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://sourceforge.net/projects/packer.mirror/files/" target="_blank" rel="noopener">https://sourceforge.net/projects/packer.mirror/files/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="необходимое-программное-обеспечение">&lt;span class="section-num">2&lt;/span> Необходимое программное обеспечение&lt;/h2>
&lt;h3 id="virtualbox">&lt;span class="section-num">2.1&lt;/span> Virtualbox&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/17/virtualbox-virtualization-system/">Система виртуализации VirtualBox&lt;/a>&lt;/li>
&lt;li>Необходимо для создания образов для VirtualBox.&lt;/li>
&lt;li>Особенности: Использование драйверов под операционную систему (VBoxGuestAdditions)&lt;/li>
&lt;/ul>
&lt;h3 id="vmware">&lt;span class="section-num">2.2&lt;/span> VmWare&lt;/h3>
&lt;ul>
&lt;li>Необходимо для создания образов для Vmware.&lt;/li>
&lt;/ul>
&lt;h3 id="vmware-open-vm-tools">&lt;span class="section-num">2.3&lt;/span> VMware open-vm-tools&lt;/h3>
&lt;ul>
&lt;li>Необходимо для создания образов для Vmware.&lt;/li>
&lt;li>Предоставляет набор утилит и драйверов виртуализации с открытым исходным кодом для улучшения функциональности и удобства виртуализации в рамках виртуализации VMware.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/vmware/open-vm-tools" target="_blank" rel="noopener">https://github.com/vmware/open-vm-tools&lt;/a>&lt;/li>
&lt;li>Сайт: &lt;a href="https://sourceforge.net/projects/open-vm-tools/" target="_blank" rel="noopener">https://sourceforge.net/projects/open-vm-tools/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="скрипты-развёртывания">&lt;span class="section-num">3&lt;/span> Скрипты развёртывания&lt;/h2>
&lt;ul>
&lt;li>Ранее использовался язык описания JSON.&lt;/li>
&lt;li>После &lt;em>Packer-1.5&lt;/em> используется формат HCL2.&lt;/li>
&lt;/ul>
&lt;h2 id="примеры-скриптов-развёртывания">&lt;span class="section-num">4&lt;/span> Примеры скриптов развёртывания&lt;/h2>
&lt;h3 id="установка-rocky-linux-9-dot-0">&lt;span class="section-num">4.1&lt;/span> Установка Rocky Linux 9.0&lt;/h3>
&lt;ul>
&lt;li>Скрипт &lt;code>vagrant-rocky.pkr.hcl&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="k">packer&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> required_version&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="n"> &amp;#34;&amp;gt;&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="m">7&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">required_plugins&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vmware&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> version&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="n"> &amp;#34;&amp;gt;&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="k">v1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;github.com/hashicorp/vmware&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;artifact_description&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Rocky 9.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;artifact_version&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;9.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;disk_size&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;40960&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;iso_checksum&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;b16bc85f4fd14facf3174cd0cf8434ee048d81e5470292f3e1cfff47af2463b7&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;iso_checksum_type&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;sha256&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;iso_url&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Rocky-9.0-20220805.0-x86_64-minimal.iso&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;redhat_platform&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;x86_64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;redhat_release&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;9&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;ssh_password&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;vagrant&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;ssh_username&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;vagrant&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">source&lt;/span> &lt;span class="s2">&amp;#34;virtualbox-iso&amp;#34; &amp;#34;virtualbox&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> boot_command&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="n"> [&amp;#34;&amp;lt;esc&amp;gt;&amp;#34;, &amp;#34;&amp;lt;wait&amp;gt;&amp;lt;esc&amp;gt;&amp;lt;esc&amp;gt;&amp;#34;, &amp;#34;linux inst.ks&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">http://{{.HTTPIP}}:{{.HTTPPort}}/ks.cfg biosdevname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">0 net.ifnames&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="s2">&amp;#34;, &amp;#34;&amp;lt;enter&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> boot_wait&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;30s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> disk_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.disk_size}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> export_opts&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;--manifest&amp;#34;, &amp;#34;--vsys&amp;#34;, &amp;#34;0&amp;#34;, &amp;#34;--description&amp;#34;, &amp;#34;${var.artifact_description}&amp;#34;, &amp;#34;--version&amp;#34;, &amp;#34;${var.artifact_version}&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> guest_additions_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;VBoxGuestAdditions.iso&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> guest_os_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;RedHat_64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> hard_drive_interface&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;sata&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> http_directory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${path.root}/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> iso_checksum&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.iso_checksum_type}:${var.iso_checksum}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> iso_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.iso_url}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> output_directory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;builds&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> shutdown_command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;sudo -S /sbin/halt -h -p&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> shutdown_timeout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;5m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.ssh_password}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.ssh_username}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_pty&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_timeout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;60m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vboxmanage&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[[&lt;/span>&lt;span class="s2">&amp;#34;modifyvm&amp;#34;, &amp;#34;{{.Name}}&amp;#34;, &amp;#34;--memory&amp;#34;, &amp;#34;1024&amp;#34;], [&amp;#34;modifyvm&amp;#34;, &amp;#34;{{.Name}}&amp;#34;, &amp;#34;--cpus&amp;#34;, &amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> virtualbox_version_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;.vbox_version&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vm_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;packer-rocky-virtualbox-vm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">source&lt;/span> &lt;span class="s2">&amp;#34;vmware-iso&amp;#34; &amp;#34;vmware&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> boot_command&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="n"> [&amp;#34;&amp;lt;esc&amp;gt;&amp;#34;, &amp;#34;&amp;lt;wait&amp;gt;&amp;lt;esc&amp;gt;&amp;lt;esc&amp;gt;&amp;#34;, &amp;#34;linux inst.ks&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">http://{{.HTTPIP}}:{{.HTTPPort}}/ks.cfg biosdevname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">0 net.ifnames&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="s2">&amp;#34;, &amp;#34;&amp;lt;enter&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> boot_wait&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;30s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> disk_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.disk_size}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> guest_os_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;centos-64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> http_directory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${path.root}/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> iso_checksum&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.iso_checksum_type}:${var.iso_checksum}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> iso_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.iso_url}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> output_directory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;builds&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> shutdown_command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;sudo -S /sbin/halt -h -p&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> shutdown_timeout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;5m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.ssh_password}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.ssh_username}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_pty&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_timeout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;60m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vnc_bind_address&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vnc_port_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">5900&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vnc_port_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">5909&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vnc_disable_password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vmx_remove_ethernet_interfaces&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vm_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;packer-rocky-vmware-vm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">build&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> sources&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;source.virtualbox-iso.virtualbox&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">provisioner&lt;/span> &lt;span class="s2">&amp;#34;shell&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> execute_command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;echo &amp;#39;packer&amp;#39;|{{ .Vars }} sudo -S -E bash &amp;#39;{{ .Path }}&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> inline&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;sleep 30&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y install epel-release&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y groupinstall &amp;#39;Development Tools&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y install kernel-devel&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y install dkms&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo mkdir /tmp/vboxguest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo mount -t iso9660 -o loop /home/vagrant/VBoxGuestAdditions.iso /tmp/vboxguest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;cd /tmp/vboxguest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo ./VBoxLinuxAdditions.run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;cd /tmp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo umount /tmp/vboxguest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo rmdir /tmp/vboxguest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;rm /home/vagrant/VBoxGuestAdditions.iso&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y groupinstall &amp;#39;Server with GUI&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf install -y mc htop tmux&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo systemctl set-default graphical.target&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;echo Image Provisioned!&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">post&lt;/span>&lt;span class="err">-&lt;/span>&lt;span class="k">processor&lt;/span> &lt;span class="s2">&amp;#34;vagrant&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> compression_level&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;6&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> output&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;vagrant-virtualbox-rocky-${var.redhat_release}-${var.redhat_platform}.box&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">build&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> sources&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;source.vmware-iso.vmware&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">provisioner&lt;/span> &lt;span class="s2">&amp;#34;shell&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> execute_command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;echo &amp;#39;packer&amp;#39;|{{ .Vars }} sudo -S -E bash &amp;#39;{{ .Path }}&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> inline&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;sleep 30&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y install epel-release&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y groupinstall &amp;#39;Development Tools&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y install kernel-devel&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y install dkms&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y groupinstall &amp;#39;Server with GUI&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf install -y mc htop tmux&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo systemctl set-default graphical.target&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;echo Image Provisioned!&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">post&lt;/span>&lt;span class="err">-&lt;/span>&lt;span class="k">processor&lt;/span> &lt;span class="s2">&amp;#34;vagrant&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> compression_level&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;6&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> output&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;vagrant-vmware-rocky-${var.redhat_release}-${var.redhat_platform}.box&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Makefile&lt;/code> для Virtualbox:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-makefile" data-lang="makefile">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">.PHONY&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">all&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">box&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">box&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Build box for Rocky Linux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @export &lt;span class="nv">TMPDIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span> packer build -only&lt;span class="o">=&lt;/span>virtualbox-iso.virtualbox vagrant-rocky.pkr.hcl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">help&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39;Usage:&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39; make &amp;lt;target&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39;Targets:&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @grep -E &lt;span class="s1">&amp;#39;^[a-zA-Z_0-9.-]+:.*?## .*$$&amp;#39;&lt;/span> &lt;span class="k">$(&lt;/span>MAKEFILE_LIST&lt;span class="k">)&lt;/span> &lt;span class="p">|&lt;/span> sort &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;BEGIN {FS = &amp;#34;:.*?## &amp;#34;}; {printf &amp;#34; \033[36m%-30s\033[0m %s\n&amp;#34;, $$1, $$2}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Makefile&lt;/code> для Vmware:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-makefile" data-lang="makefile">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">.PHONY&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">all&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">init&lt;/span> &lt;span class="n">box&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">init&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Install missing plugins for packer
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @packer init vagrant-rocky.pkr.hcl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">box&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Build box for Rocky Linux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @export &lt;span class="nv">TMPDIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">LANG&lt;/span>&lt;span class="o">=&lt;/span>C&lt;span class="p">;&lt;/span> packer build -only&lt;span class="o">=&lt;/span>vmware-iso.vmware vagrant-rocky.pkr.hcl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">help&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39;Usage:&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39; make &amp;lt;target&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39;Targets:&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @grep -E &lt;span class="s1">&amp;#39;^[a-zA-Z_0-9.-]+:.*?## .*$$&amp;#39;&lt;/span> &lt;span class="k">$(&lt;/span>MAKEFILE_LIST&lt;span class="k">)&lt;/span> &lt;span class="p">|&lt;/span> sort &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;BEGIN {FS = &amp;#34;:.*?## &amp;#34;}; {printf &amp;#34; \033[36m%-30s\033[0m %s\n&amp;#34;, $$1, $$2}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Управление файлами конфигурации. Домашний каталог. Chezmoi</title><link>https://yamadharma.github.io/ru/post/2022/10/28/configuration-file-management-chezmoi/</link><pubDate>Fri, 28 Oct 2022 19:49:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/10/28/configuration-file-management-chezmoi/</guid><description>&lt;p>Использование &lt;code>chezmoi&lt;/code> для управления файлами конфигурации домашнего каталога пользователя.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-chezmoi">&lt;span class="section-num">3&lt;/span> Конфигурация &lt;code>chezmoi&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#рабочие-файлы">&lt;span class="section-num">3.1&lt;/span> Рабочие файлы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#автоматически-создавать-файл-конфигурации-на-новой-машине">&lt;span class="section-num">3.2&lt;/span> Автоматически создавать файл конфигурации на новой машине&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пересоздание-файл-конфигурации">&lt;span class="section-num">3.3&lt;/span> Пересоздание файл конфигурации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#шаблоны">&lt;span class="section-num">4&lt;/span> Шаблоны&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#данные-шаблона">&lt;span class="section-num">4.2&lt;/span> Данные шаблона&lt;/a>&lt;/li>
&lt;li>&lt;a href="#способы-создания-файла-шаблона">&lt;span class="section-num">4.3&lt;/span> Способы создания файла шаблона&lt;/a>&lt;/li>
&lt;li>&lt;a href="#редактирование-файла-шаблона">&lt;span class="section-num">4.4&lt;/span> Редактирование файла шаблона&lt;/a>&lt;/li>
&lt;li>&lt;a href="#тестирование-шаблонов">&lt;span class="section-num">4.5&lt;/span> Тестирование шаблонов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синтаксис-шаблона">&lt;span class="section-num">4.6&lt;/span> Синтаксис шаблона&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#удаление-пробелов">&lt;span class="section-num">4.6.1&lt;/span> Удаление пробелов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отладка-шаблона">&lt;span class="section-num">4.6.2&lt;/span> Отладка шаблона&lt;/a>&lt;/li>
&lt;li>&lt;a href="#логические-операции">&lt;span class="section-num">4.6.3&lt;/span> Логические операции&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#переменные-шаблона">&lt;span class="section-num">4.7&lt;/span> Переменные шаблона&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование-chezmoi">&lt;span class="section-num">5&lt;/span> Использование &lt;code>chezmoi&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#первоначальная-настройка-на-первичном-хосте">&lt;span class="section-num">5.1&lt;/span> Первоначальная настройка на первичном хосте&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозиторий-на-github">&lt;span class="section-num">5.2&lt;/span> Репозиторий на github&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование-chezmoi-на-нескольких-машинах">&lt;span class="section-num">5.3&lt;/span> Использование chezmoi на нескольких машинах&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-новой-машины-с-помощью-одной-команды">&lt;span class="section-num">5.4&lt;/span> Настройка новой машины с помощью одной команды&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ежедневные-операции-c-chezmoi">&lt;span class="section-num">5.5&lt;/span> Ежедневные операции c &lt;code>chezmoi&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#извлеките-последние-изменения-из-репозитория-и-примените-их">&lt;span class="section-num">5.5.1&lt;/span> Извлеките последние изменения из репозитория и примените их&lt;/a>&lt;/li>
&lt;li>&lt;a href="#извлеките-последние-изменения-из-своего-репозитория-и-посмотрите-что-изменится-фактически-не-применяя-изменения">&lt;span class="section-num">5.5.2&lt;/span> Извлеките последние изменения из своего репозитория и посмотрите, что изменится, фактически не применяя изменения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#автоматически-фиксируйте-и-отправляйте-изменения-в-репозиторий">&lt;span class="section-num">5.5.3&lt;/span> Автоматически фиксируйте и отправляйте изменения в репозиторий&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.chezmoi.io/" target="_blank" rel="noopener">https://www.chezmoi.io/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/twpayne/chezmoi" target="_blank" rel="noopener">https://github.com/twpayne/chezmoi&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Установка бинарного файла. Скрипт определяет архитектуру процессора и операционную систему и скачивает необходимый файл:
&lt;ul>
&lt;li>
&lt;p>с помощью &lt;code>curl&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sh -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>curl -fsLS chezmoi.io/get&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>с помощью &lt;code>wget&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sh -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>wget -qO- chezmoi.io/get&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>с помощью PowerShell:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>iwr -UseBasicParsing https://chezmoi.io/get.ps1&lt;span class="o">)&lt;/span>.Content &lt;span class="p">|&lt;/span> powershell -c -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Linux
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>overlay &lt;em>ace&lt;/em> (&lt;a href="https://github.com/ananace/overlay" target="_blank" rel="noopener">https://github.com/ananace/overlay&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge chezmoi-bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Fedora
&lt;ul>
&lt;li>Установка через &lt;em>Snap&lt;/em>:
&lt;ul>
&lt;li>Установите &lt;em>Snap&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install snapd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Либо выйдите из системы, либо снова войдите в нее, либо перезагрузите систему, чтобы убедиться, что пути snap обновлены правильно.&lt;/li>
&lt;li>Включите поддержку классического варианта snap:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -s /var/lib/snapd/snap /snap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите chezmoi:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">snap install chezmoi --classic
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Windows
&lt;ul>
&lt;li>установка посредством Chocolatey (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install chezmoi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация-chezmoi">&lt;span class="section-num">3&lt;/span> Конфигурация &lt;code>chezmoi&lt;/code>&lt;/h2>
&lt;h3 id="рабочие-файлы">&lt;span class="section-num">3.1&lt;/span> Рабочие файлы&lt;/h3>
&lt;ul>
&lt;li>Состояние файлов конфигурации сохраняется в каталоге
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">~/.local/share/chezmoi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Он является клоном вашего репозитория &lt;code>dotfiles&lt;/code>.&lt;/li>
&lt;li>Файл конфигурации &lt;code>~/.config/chezmoi/chezmoi.toml&lt;/code> (можно использовать также JSON или YAML) специфичен для локальной машины.&lt;/li>
&lt;li>Файлы, содержимое которых одинаково на всех ваших машинах, дословно копируются из исходного каталога.&lt;/li>
&lt;li>Файлы, которые варьируются от машины к машине, выполняются как шаблоны, обычно с использованием данных из файла конфигурации локальной машины для настройки конечного содержимого, специфичного для локальной машины.&lt;/li>
&lt;li>При запуске
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi apply
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>вычисляется желаемое содержимое и разрешения для каждого файла, а затем вносит необходимые изменения, чтобы ваши файлы соответствовали этому состоянию.&lt;/li>
&lt;li>По умолчанию chezmoi изменяет файлы только в рабочей копии.&lt;/li>
&lt;/ul>
&lt;h3 id="автоматически-создавать-файл-конфигурации-на-новой-машине">&lt;span class="section-num">3.2&lt;/span> Автоматически создавать файл конфигурации на новой машине&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>При выполнении &lt;code>chezmoi init&lt;/code> также может автоматически создать файл конфигурации, если он еще не существует.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Если ваш репозиторий содержит файл с именем &lt;code>.chezmoi.$FORMAT.tmpl&lt;/code>, где &lt;code>$FORMAT&lt;/code> есть один из поддерживаемых форматов файла конфигурации (&lt;code>json&lt;/code>, &lt;code>toml&lt;/code>, или &lt;code>yaml&lt;/code>), то &lt;code>chezmoi init&lt;/code> выполнит этот шаблон для создания исходного файла конфигурации.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Например, пусть &lt;code>~/.local/share/chezmoi/.chezmoi.toml.tmpl&lt;/code> выглядит так:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">-&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="nx">email&lt;/span> &lt;span class="err">:&lt;/span>&lt;span class="p">=&lt;/span> &lt;span class="nx">promptStringOnce&lt;/span> &lt;span class="p">.&lt;/span> &lt;span class="s2">&amp;#34;email&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Email address&amp;#34;&lt;/span> &lt;span class="nx">-&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">email&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">{{&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="nx">email&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="nx">quote&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>При выполнении &lt;code>chezmoi init&lt;/code> будет создан конфигурационный файл &lt;code>~/.config/chezmoi/chezmoi.toml&lt;/code>.&lt;/li>
&lt;li>&lt;code>promptStringOnce&lt;/code> &amp;mdash; это специальная функция, которая запрашивает у пользователя значение, если оно еще не установлено в разделе &lt;code>data&lt;/code> конфигурационного файла.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Чтобы протестировать этот шаблон, используйте &lt;code>chezmoi execute-template&lt;/code> с флагами &lt;code>--init&lt;/code> и &lt;code>--promptString&lt;/code>, например:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi execute-template --init --promptString &lt;span class="nv">email&lt;/span>&lt;span class="o">=&lt;/span>me@home.org &amp;lt; ~/.local/share/chezmoi/.chezmoi.toml.tmpl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="пересоздание-файл-конфигурации">&lt;span class="section-num">3.3&lt;/span> Пересоздание файл конфигурации&lt;/h3>
&lt;ul>
&lt;li>Если вы измените шаблон файла конфигурации, &lt;code>chezmoi&lt;/code> предупредит вас, если ваш текущий файл конфигурации не был сгенерирован из этого шаблона.&lt;/li>
&lt;li>Вы можете повторно сгенерировать файл конфигурации, запустив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="шаблоны">&lt;span class="section-num">4&lt;/span> Шаблоны&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Шаблоны используются для изменения содержимого файла в зависимости от среды.&lt;/li>
&lt;li>Используется синтаксис шаблонов Go.&lt;/li>
&lt;li>Файл интерпретируется как шаблон, если выполняется одно из следующих условий:
&lt;ul>
&lt;li>имя файла имеет суффикс &lt;code>.tmpl&lt;/code>;&lt;/li>
&lt;li>файл находится в каталоге &lt;code>.chezmoitemplates&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="данные-шаблона">&lt;span class="section-num">4.2&lt;/span> Данные шаблона&lt;/h3>
&lt;ul>
&lt;li>Полный список переменных шаблона:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Источники переменных:
&lt;ul>
&lt;li>файлы &lt;code>.chezmoi&lt;/code>, например, &lt;code>.chezmoi.os&lt;/code>;&lt;/li>
&lt;li>файлы конфигурации &lt;code>.chezmoidata.$FORMAT&lt;/code>. Форматы (&lt;code>json&lt;/code>, &lt;code>jsonc&lt;/code>, &lt;code>toml&lt;/code>, &lt;code>yaml&lt;/code>) читаются в алфавитном порядке;&lt;/li>
&lt;li>раздел &lt;code>data&lt;/code> конфигурационного файла.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="способы-создания-файла-шаблона">&lt;span class="section-num">4.3&lt;/span> Способы создания файла шаблона&lt;/h3>
&lt;ul>
&lt;li>При первом добавлении файла передайте аргумент &lt;code>--template&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi add --template ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если файл уже контролируется &lt;em>chezmoi&lt;/em>, но не является шаблоном, можно сделать его шаблоном:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi chattr +template ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно создать шаблон вручную в исходном каталоге, присвоив ему расширение &lt;code>.tmpl&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi &lt;span class="nb">cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$EDITOR&lt;/span> dot_zshrc.tmpl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Шаблоны в каталоге &lt;code>.chezmoitemplates&lt;/code> должны создаваться вручную:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi &lt;span class="nb">cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p .chezmoitemplates
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> .chezmoitemplates
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$EDITOR&lt;/span> mytemplate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="редактирование-файла-шаблона">&lt;span class="section-num">4.4&lt;/span> Редактирование файла шаблона&lt;/h3>
&lt;ul>
&lt;li>Используйте &lt;code>chezmoi edit&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi edit ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы сделанные вами изменения сразу же применялись после выхода из редактора, используйте опцию &lt;code>--apply&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi edit --apply ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="тестирование-шаблонов">&lt;span class="section-num">4.5&lt;/span> Тестирование шаблонов&lt;/h3>
&lt;ul>
&lt;li>Тестирование с помощью команды &lt;code>chezmoi execute-template&lt;/code>.&lt;/li>
&lt;li>Тестирование небольших фрагментов шаблонов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi execute-template &lt;span class="s1">&amp;#39;{{ .chezmoi.hostname }}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Тестирование целых файлов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi &lt;span class="nb">cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chezmoi execute-template &amp;lt; dot_zshrc.tmpl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синтаксис-шаблона">&lt;span class="section-num">4.6&lt;/span> Синтаксис шаблона&lt;/h3>
&lt;ul>
&lt;li>Действия шаблона записываются внутри двойных фигурных скобок, &lt;code>{{ }}&lt;/code>.&lt;/li>
&lt;li>Действия могут быть переменными, конвейерами или операторами управления.&lt;/li>
&lt;li>Текст вне действий копируется буквально.&lt;/li>
&lt;li>Переменные записываются буквально:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{{ .chezmoi.hostname }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Условные выражения могут быть записаны с использованием &lt;code>if&lt;/code>, &lt;code>else if&lt;/code>, &lt;code>else&lt;/code>, &lt;code>end&lt;/code>:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{{ if eq .chezmoi.os &amp;#34;darwin&amp;#34; }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># darwin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ else if eq .chezmoi.os &amp;#34;linux&amp;#34; }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ else }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># other operating system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ end }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="удаление-пробелов">&lt;span class="section-num">4.6.1&lt;/span> Удаление пробелов&lt;/h4>
&lt;ul>
&lt;li>Для удаления проблем в шаблоне разместите знак минус и пробела рядом со скобками:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">HOSTNAME={{- .chezmoi.hostname }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В результате получим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HOSTNAME&lt;/span>&lt;span class="o">=&lt;/span>myhostname
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="отладка-шаблона">&lt;span class="section-num">4.6.2&lt;/span> Отладка шаблона&lt;/h4>
&lt;ul>
&lt;li>Используется подкоманда &lt;code>execute-template&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi execute-template &lt;span class="s1">&amp;#39;{{ .chezmoi.os }}/{{ .chezmoi.arch }}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Интерпретируются любые данные, поступающие со стандартного ввода или в конце команды.&lt;/li>
&lt;li>Можно передать содержимое файла этой команде:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cat foo.txt &lt;span class="p">|&lt;/span> chezmoi execute-template
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="логические-операции">&lt;span class="section-num">4.6.3&lt;/span> Логические операции&lt;/h4>
&lt;ul>
&lt;li>Возможно выполнение логических операций.&lt;/li>
&lt;li>Если имя хоста машины равно &lt;code>work-laptop&lt;/code>, текст между &lt;code>if&lt;/code> и &lt;code>end&lt;/code> будет включён в результат:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># common config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">export EDITOR=vi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># machine-specific configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- if eq .chezmoi.hostname &amp;#34;work-laptop&amp;#34; }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># this will only be included in ~/.bashrc on work-laptop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- end }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Логические функции&lt;/p>
&lt;ul>
&lt;li>&lt;code>eq&lt;/code>: возвращает &lt;code>true&lt;/code>, если первый аргумент равен любому из остальных аргументов, может принимать несколько аргументов;&lt;/li>
&lt;li>&lt;code>not&lt;/code>: возвращает логическое отрицание своего единственного аргумента;&lt;/li>
&lt;li>&lt;code>and&lt;/code>: возвращает логическое И своих аргументов, может принимать несколько аргументов;&lt;/li>
&lt;li>&lt;code>or&lt;/code>: возвращает логическое ИЛИ своих аргументов, может принимать несколько аргументов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Целочисленные функции&lt;/p>
&lt;ul>
&lt;li>&lt;code>len&lt;/code>: возвращает целочисленную длину своего аргумента;&lt;/li>
&lt;li>&lt;code>eq&lt;/code>: возвращает логическую истину &lt;code>arg1 == arg2&lt;/code>;&lt;/li>
&lt;li>&lt;code>ne&lt;/code>: возвращает логическое значение &lt;code>arg1 != arg2&lt;/code>;&lt;/li>
&lt;li>&lt;code>lt&lt;/code>: возвращает логическую истину &lt;code>arg1 &amp;lt; arg2&lt;/code>;&lt;/li>
&lt;li>&lt;code>le&lt;/code>: возвращает логическую истину &lt;code>arg1 &amp;lt;= arg2&lt;/code>;&lt;/li>
&lt;li>&lt;code>gt&lt;/code>: возвращает логическую истину &lt;code>arg1 &amp;gt; arg2&lt;/code>;&lt;/li>
&lt;li>&lt;code>ge&lt;/code>: возвращает логическую истину &lt;code>arg1 &amp;gt;= arg2&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="переменные-шаблона">&lt;span class="section-num">4.7&lt;/span> Переменные шаблона&lt;/h3>
&lt;ul>
&lt;li>Чтобы просмотреть переменные, доступные в вашей системе, выполните:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы получить доступ к переменной &lt;code>chezmoi.kernel.osrelease&lt;/code> в шаблоне, используйте:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{{ .chezmoi.kernel.osrelease }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование-chezmoi">&lt;span class="section-num">5&lt;/span> Использование &lt;code>chezmoi&lt;/code>&lt;/h2>
&lt;h3 id="первоначальная-настройка-на-первичном-хосте">&lt;span class="section-num">5.1&lt;/span> Первоначальная настройка на первичном хосте&lt;/h3>
&lt;ul>
&lt;li>Инициализируйте &lt;code>chezmoi&lt;/code> командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Это создаст новый локальный репозиторий git в &lt;code>~/.local/share/chezmoi&lt;/code>.&lt;/li>
&lt;li>Добавьте в репозиторий первый файл с помощью &lt;code>chezmoi&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi add ~/.bashrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Команда скопирует &lt;code>~/.bashrc&lt;/code> в &lt;code>~/.local/share/chezmoi/dot_bashrc&lt;/code>.&lt;/li>
&lt;li>Можно отредактировать файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi edit ~/.bashrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Откроется &lt;code>~/.local/share/chezmoi/dot_bashrc&lt;/code> в редакторе, заданном переменной &lt;code>$EDITOR&lt;/code>.&lt;/li>
&lt;li>Внесите некоторые изменения и сохраните файл.&lt;/li>
&lt;li>Посмотрите, какие изменения внес бы &lt;code>chezmoi&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi diff
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Примените изменения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi -v apply
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Все команды &lt;code>chezmoi&lt;/code> принимают флаг &lt;code>-v&lt;/code> (подробная информация) и флаг &lt;code>-n&lt;/code> (пробный запуск, демонстрирующий, но не вносящий изменения).&lt;/li>
&lt;/ul>
&lt;h3 id="репозиторий-на-github">&lt;span class="section-num">5.2&lt;/span> Репозиторий на github&lt;/h3>
&lt;ul>
&lt;li>Создайте репозиторий &lt;code>dotfiles&lt;/code> для хранения конфигурационных файлов.&lt;/li>
&lt;li>Для определённости будем использовать &lt;a href="https://github.com" target="_blank" rel="noopener">https://github.com&lt;/a>.&lt;/li>
&lt;li>Поддерживается хранение ваших конфигурационных файлов как в общедоступных, так и в частных репозиториях.&lt;/li>
&lt;li>Создать репозиторий можно вручную или из командной строки (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/04/github-command-line-utilities/">github: утилиты командной строки&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gh repo create dotfiles --private
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Откройте оболочку в исходном каталоге, чтобы зафиксировать изменения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi &lt;span class="nb">cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;Initial commit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключите репозиторий и выгрузите файлы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git remote add origin git@github.com:username/dotfiles.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push --set-upstream origin master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push -u origin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выйдите из оболочки &lt;code>chezmoi&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="использование-chezmoi-на-нескольких-машинах">&lt;span class="section-num">5.3&lt;/span> Использование chezmoi на нескольких машинах&lt;/h3>
&lt;ul>
&lt;li>На второй машине инициализируйте &lt;code>chezmoi&lt;/code> с вашим репозиторием &lt;code>dotfiles&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init https://github.com/&amp;lt;username&amp;gt;/dotfiles.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Или через ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init git@github.com:&amp;lt;username&amp;gt;/dotfiles.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте, какие изменения внесёт &lt;code>chezmoi&lt;/code> в домашний каталог, запустив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi diff
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если вас устраивают изменения, внесённые &lt;code>chezmoi&lt;/code>, запустите:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi apply -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если вас не устраивают изменения в файле, отредактируйте его с помощью:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi edit file_name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Также можно вызвать инструмент слияния, чтобы объединить изменения между текущим содержимым файла, файлом в вашей рабочей копии и измененным содержимым файла:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi merge file_name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При существующем каталоге &lt;code>chezmoi&lt;/code> можно получить и применить последние изменения из вашего репозитория:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi update -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-новой-машины-с-помощью-одной-команды">&lt;span class="section-num">5.4&lt;/span> Настройка новой машины с помощью одной команды&lt;/h3>
&lt;ul>
&lt;li>Можно установить свои &lt;code>dotfiles&lt;/code> на новый компьютер с помощью одной команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init --apply https://github.com/&amp;lt;username&amp;gt;/dotfiles.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Через ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init --apply git@github.com:&amp;lt;username&amp;gt;/dotfiles.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="ежедневные-операции-c-chezmoi">&lt;span class="section-num">5.5&lt;/span> Ежедневные операции c &lt;code>chezmoi&lt;/code>&lt;/h3>
&lt;h4 id="извлеките-последние-изменения-из-репозитория-и-примените-их">&lt;span class="section-num">5.5.1&lt;/span> Извлеките последние изменения из репозитория и примените их&lt;/h4>
&lt;ul>
&lt;li>Можно извлечь изменения из репозитория и применить их одной командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Это запускается &lt;code>git pull --autostash --rebase&lt;/code> в вашем исходном каталоге, а затем &lt;code>chezmoi apply&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="извлеките-последние-изменения-из-своего-репозитория-и-посмотрите-что-изменится-фактически-не-применяя-изменения">&lt;span class="section-num">5.5.2&lt;/span> Извлеките последние изменения из своего репозитория и посмотрите, что изменится, фактически не применяя изменения&lt;/h4>
&lt;ul>
&lt;li>Выполните:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi git pull -- --autostash --rebase &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> chezmoi diff
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Это запускается &lt;code>git pull --autostash --rebase&lt;/code> в вашем исходном каталоге, а &lt;code>chezmoi diff&lt;/code> затем показывает разницу между целевым состоянием, вычисленным из вашего исходного каталога, и фактическим состоянием.&lt;/li>
&lt;li>Если вы довольны изменениями, вы можете применить их:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi apply
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="автоматически-фиксируйте-и-отправляйте-изменения-в-репозиторий">&lt;span class="section-num">5.5.3&lt;/span> Автоматически фиксируйте и отправляйте изменения в репозиторий&lt;/h4>
&lt;ul>
&lt;li>Можно автоматически фиксировать и отправлять изменения в исходный каталог в репозиторий.&lt;/li>
&lt;li>Эта функция отключена по умолчанию.&lt;/li>
&lt;li>Чтобы включить её, добавьте в файл конфигурации &lt;code>~/.config/chezmoi/chezmoi.toml&lt;/code> следующее:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>git&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">autoCommit&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">autoPush&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Всякий раз, когда в исходный каталог вносятся изменения, &lt;code>chezmoi&lt;/code> фиксирует изменения с помощью автоматически сгенерированного сообщения фиксации и отправляет их в ваш репозиторий.&lt;/li>
&lt;li>Будьте осторожны при использовании &lt;code>autoPush&lt;/code>. Если ваш репозиторий &lt;code>dotfiles&lt;/code> является общедоступным, и вы случайно добавили секрет в виде обычного текста, этот секрет будет отправлен в ваш общедоступный репозиторий.&lt;/li>
&lt;/ul></description></item><item><title>Пароли mail.ru</title><link>https://yamadharma.github.io/ru/post/2022/10/27/mail-ru-passwords/</link><pubDate>Thu, 27 Oct 2022 15:04:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/10/27/mail-ru-passwords/</guid><description>&lt;p>Управление паролями в сервисах Mail.ru.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#пароли-для-внешних-приложений">&lt;span class="section-num">1&lt;/span> Пароли для внешних приложений&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="пароли-для-внешних-приложений">&lt;span class="section-num">1&lt;/span> Пароли для внешних приложений&lt;/h2>
&lt;ul>
&lt;li>Для сторонних приложений используются специальные пароли, уникальные для каждого стороннего приложения.&lt;/li>
&lt;li>Для создания такого пароля выполните следующее:
&lt;ul>
&lt;li>Войдите в свой аккаунт Mail.ru на компьютере.&lt;/li>
&lt;li>Перейдите в настройки Mail ID в пункт &lt;em>Безопасность&lt;/em> (&lt;a href="https://id.mail.ru/security" target="_blank" rel="noopener">https://id.mail.ru/security&lt;/a>).&lt;/li>
&lt;li>Далее перейдите в пункт &lt;em>Пароли для внешних приложений&lt;/em>.&lt;/li>
&lt;li>Нажмите &lt;em>Добавить&lt;/em>.&lt;/li>
&lt;li>Добавьте название сервиса.&lt;/li>
&lt;li>Скопируйте новый пароль и введите его в стороннем приложении.&lt;/li>
&lt;li>После закрытия окна значение пароля получить будет невозможно.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>rclone</title><link>https://yamadharma.github.io/ru/post/2022/10/27/rclone/</link><pubDate>Thu, 27 Oct 2022 14:29:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/10/27/rclone/</guid><description>&lt;p>Утилита командной строки для синхронизация данных с сетевыми объектными хранилищами.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-хранилищ">&lt;span class="section-num">2&lt;/span> Подключение хранилищ&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#хранилища">&lt;span class="section-num">2.2&lt;/span> Хранилища&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#google-drive">&lt;span class="section-num">2.2.1&lt;/span> Google Drive&lt;/a>&lt;/li>
&lt;li>&lt;a href="#yandex-disk">&lt;span class="section-num">2.2.2&lt;/span> Yandex Disk&lt;/a>&lt;/li>
&lt;li>&lt;a href="#mail-dot-ru-cloud">&lt;span class="section-num">2.2.3&lt;/span> Mail.ru Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://rclone.org/" target="_blank" rel="noopener">https://rclone.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="подключение-хранилищ">&lt;span class="section-num">2&lt;/span> Подключение хранилищ&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Для подключения сетевого хранилища следует запустить:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Далее следовать текстовому меню.&lt;/li>
&lt;/ul>
&lt;h3 id="хранилища">&lt;span class="section-num">2.2&lt;/span> Хранилища&lt;/h3>
&lt;h4 id="google-drive">&lt;span class="section-num">2.2.1&lt;/span> Google Drive&lt;/h4>
&lt;ul>
&lt;li>При конфигурировании запускается броузер.&lt;/li>
&lt;li>Необходимо залогиниться и разрешить доступ.&lt;/li>
&lt;li>В конфигурационный файл записывается токен для доступа.&lt;/li>
&lt;/ul>
&lt;h4 id="yandex-disk">&lt;span class="section-num">2.2.2&lt;/span> Yandex Disk&lt;/h4>
&lt;ul>
&lt;li>При конфигурировании запускается броузер.&lt;/li>
&lt;li>Необходимо залогиниться и разрешить доступ.&lt;/li>
&lt;li>В конфигурационный файл записывается токен для доступа.&lt;/li>
&lt;/ul>
&lt;h4 id="mail-dot-ru-cloud">&lt;span class="section-num">2.2.3&lt;/span> Mail.ru Cloud&lt;/h4>
&lt;ul>
&lt;li>В качестве пароля необходимо использовать пароль для внешнего приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/10/27/mail-ru-passwords/">Пароли mail.ru&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/h2>
&lt;ul>
&lt;li>Пусть название хранилища будет &lt;code>remote&lt;/code>.&lt;/li>
&lt;li>Просмотр списка контейнеров в хранилище:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone lsd remote:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создание нового каталога:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone mkdir remote:/dir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Просмотр списка файлов в каталоге:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone ls remote:/dir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Копирование файлов с локальной машины в хранилище:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone copy /home/local/directory remote:/dir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Синхронизация файлов на локальной машине и в хранилище:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone sync /home/local/directory remote:/dir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Open Journal Systems</title><link>https://yamadharma.github.io/ru/post/2022/10/22/open-journal-systems/</link><pubDate>Sat, 22 Oct 2022 15:50:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/10/22/open-journal-systems/</guid><description>&lt;p>Open Journal Systems (OJS) &amp;mdash; открытое программное обеспечение для организации рецензируемых научных изданий.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#технические-требования">&lt;span class="section-num">2.1&lt;/span> Технические требования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-пакеты">&lt;span class="section-num">2.2&lt;/span> Дополнительные пакеты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установки-сервера">&lt;span class="section-num">2.3&lt;/span> Установки сервера&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#selinux">&lt;span class="section-num">2.3.1&lt;/span> SELinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-базы-данных">&lt;span class="section-num">2.3.2&lt;/span> Создание базы данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-ojs">&lt;span class="section-num">2.4&lt;/span> Установка OJS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#после-установки">&lt;span class="section-num">2.5&lt;/span> После установки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-cron">&lt;span class="section-num">2.5.1&lt;/span> Настройка cron&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Текущая версия: OJS 3.x.&lt;/li>
&lt;li>Сайт: &lt;a href="http://pkp.sfu.ca/ojs" target="_blank" rel="noopener">http://pkp.sfu.ca/ojs&lt;/a>&lt;/li>
&lt;li>Загрузка: &lt;a href="https://pkp.sfu.ca/ojs/ojs_download/" target="_blank" rel="noopener">https://pkp.sfu.ca/ojs/ojs_download/&lt;/a>&lt;/li>
&lt;li>Лицензия: GNU General Public License&lt;/li>
&lt;li>Система OJS предназначена для создания рецензируемых электронных журналов с открытым доступом.&lt;/li>
&lt;li>Позволяет не только публиковать статьи в интернете, но и организовывать весь рабочий процесс издательского дела: приём, рецензирование и каталогизирование статей.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="технические-требования">&lt;span class="section-num">2.1&lt;/span> Технические требования&lt;/h3>
&lt;ul>
&lt;li>PHP 7.3 или новее с поддержкой MySQL, MariaDB или PostgreSQL.&lt;/li>
&lt;li>Сервер базы данных: MySQL/MariaDB 4.1 или новее, PostgreSQL 9.5 или новее.&lt;/li>
&lt;li>Рекомендуется UNIX-подобная ОС.&lt;/li>
&lt;/ul>
&lt;h3 id="дополнительные-пакеты">&lt;span class="section-num">2.2&lt;/span> Дополнительные пакеты&lt;/h3>
&lt;ul>
&lt;li>ADOdb Database Library (&lt;a href="http://adodb.sourceforge.net/" target="_blank" rel="noopener">http://adodb.sourceforge.net/&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install php-adodb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установки-сервера">&lt;span class="section-num">2.3&lt;/span> Установки сервера&lt;/h3>
&lt;h4 id="selinux">&lt;span class="section-num">2.3.1&lt;/span> SELinux&lt;/h4>
&lt;ul>
&lt;li>Разрешить доступ http-серверу ко всем типам меток &lt;code>httpd&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setsebool -P httpd_unified &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool httpd_unified &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="создание-базы-данных">&lt;span class="section-num">2.3.2&lt;/span> Создание базы данных&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Mysql&lt;/p>
&lt;ul>
&lt;li>
&lt;p>База данных должна быть создана с использованием кодировки UTF-8 (Unicode) (utf8mb4) и параметров сортировки &lt;code>utf8mb4_unicode_ci&lt;/code> или &lt;code>utf8mb4_general_ci&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>Разница между двумя сопоставлениями связана с тем, насколько быстро они сравнивают символы и сортируют их.&lt;/li>
&lt;li>&lt;code>utf8mb4_general_ci&lt;/code> немного быстрее, однако &lt;code>utf8mb4_unicode_ci&lt;/code> более точен для более широкого диапазона символов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Необходимые значения:&lt;/p>
&lt;ul>
&lt;li>&lt;code>ojs3&lt;/code> &amp;mdash; имя базы данных;&lt;/li>
&lt;li>&lt;code>ojs3&lt;/code> &amp;mdash; имя пользователя базы данных;&lt;/li>
&lt;li>&lt;code>password&lt;/code> &amp;mdash; пароль пользователя базы данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Создайте новую базу данных для вашего сайта (измените &lt;code>username&lt;/code> и &lt;code>databasename&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p -e &lt;span class="s2">&amp;#34;CREATE DATABASE ojs3 CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Подключитесь к базе данных:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Создайте пользователя и установите разрешения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ojs3&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">localhost&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DELETE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TEMPORARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">TABLES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">ojs3&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;ojs3&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сбросьте привилегии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">FLUSH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIVILEGES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Закройте терминал базы данных, набрав &lt;code>exit&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="установка-ojs">&lt;span class="section-num">2.4&lt;/span> Установка OJS&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Извлеките архив OJS в нужное место на вашем веб-сайте:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /var/www/html/sites/journals.example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar xzvf ojs-3.x.y-z.tar.gz --strip-components&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> -C /var/www/html/sites/journals.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Создайте следующие файлы и каталоги (и их содержимое) доступны для записи:&lt;/p>
&lt;ul>
&lt;li>&lt;code>config.inc.php&lt;/code>&lt;/li>
&lt;li>&lt;code>public&lt;/code>&lt;/li>
&lt;li>&lt;code>cache&lt;/code>&lt;/li>
&lt;li>&lt;code>plugins&lt;/code> (для установки плагинов через веб-интерфейс).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Для этого установите права доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R apache:apache /var/www/html/sites/journals.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Создайте каталог для хранения загруженных файлов и сделать этот каталог доступным для записи:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /var/www/data/journals.example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R apache:apache /var/www/data/journals.example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">775&lt;/span> /var/www/data/journals.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Добавьте конфигурацию для web-сервера (&lt;code>/etc/httpd/conf.d/journals.example.com.conf&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;VirtualHost *:80&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ServerName journals.example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ServerAdmin webmaster@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DocumentRoot &amp;#34;/var/www/html/sites/journals.example.com&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;Directory &amp;#34;/var/www/html/sites/journals.example.com&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Options Indexes FollowSymLinks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AllowOverride All
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Order allow,deny
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Allow from all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/Directory&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/VirtualHost&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Откройте веб-браузер по адресу &lt;code>http://journals.example.com/&lt;/code> и следуйте инструкциям по установке на экране.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Вместо этого можно использовать установщик командной строки запустив команду &lt;code>php tools/install.php&lt;/code> из вашего каталога OJS.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Рекомендуемые дополнительные действия после установки:&lt;/p>
&lt;ul>
&lt;li>Просмотрите `config.inc.php` для дополнительных настроек конфигурации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="после-установки">&lt;span class="section-num">2.5&lt;/span> После установки&lt;/h3>
&lt;h4 id="настройка-cron">&lt;span class="section-num">2.5.1&lt;/span> Настройка cron&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Чтобы включить поддержку использования запланированных задач, отредактируйте файл &lt;code>config.inc.php&lt;/code> и установите для параметра &lt;code>scheduled_tasks&lt;/code> значение &lt;code>On&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Настройте периодическое выполнение заданий:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="m">0&lt;/span> * * * * php /var/www/html/sites/journals.alternativy.ru/tools/runScheduledTasks.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Скрипт будет выполняться каждый час.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/h2></description></item><item><title>Автообновление систем на базе деривативов RedHat</title><link>https://yamadharma.github.io/ru/post/2022/09/25/redhat-based-systems-auto-update/</link><pubDate>Sun, 25 Sep 2022 09:42:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/25/redhat-based-systems-auto-update/</guid><description>&lt;p>Простое автоматическое обновление на уровне хоста.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#прагматика">&lt;span class="section-num">1&lt;/span> Прагматика&lt;/a>&lt;/li>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-программного-обеспечения">&lt;span class="section-num">3&lt;/span> Установка программного обеспечения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование-программного-обеспечения">&lt;span class="section-num">4&lt;/span> Использование программного обеспечения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="прагматика">&lt;span class="section-num">1&lt;/span> Прагматика&lt;/h2>
&lt;ul>
&lt;li>Основное преимущество автоматизации обновлений заключается в том, что машины, скорее всего, будут обновляться быстрее, чаще и более равномерно, чем если бы обновления выполнялись вручную.&lt;/li>
&lt;li>Хотя необходимо быть осторожным с любым решением для автоматического обновления, его стоит рассмотреть, по крайней мере, для некоторых ситуаций.&lt;/li>
&lt;li>Если машина является критическим сервером, для которого нельзя допускать незапланированного простоя службы на машине, то автоматические обновления использовать не следует. В противном случае можно использовать их.&lt;/li>
&lt;li>Причины использования автоматических обновлений.
&lt;ul>
&lt;li>Вы вряд ли будете применять обновления вручную по каким-либо причинам.&lt;/li>
&lt;li>Машина не критична, допустимы случайные незапланированные простои.&lt;/li>
&lt;li>Вы можете жить без удаленного доступа к машине, пока не сможете добраться до ее физического местоположения для решения проблем.&lt;/li>
&lt;li>У вас нет незаменимых данных на машине или надлежащих резервных копий таких данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="общая-информация">&lt;span class="section-num">2&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Документация: &lt;a href="https://dnf.readthedocs.io/en/latest/automatic.html" target="_blank" rel="noopener">https://dnf.readthedocs.io/en/latest/automatic.html&lt;/a>&lt;/li>
&lt;li>Используются таймеры:
&lt;ul>
&lt;li>&lt;code>dnf-automatic.timer&lt;/code> : общий таймер, операции настраиваются в файле конфигурации;&lt;/li>
&lt;li>&lt;code>dnf-automatic-notifyonly.timer&lt;/code> : уведомление о наличии обновлений;&lt;/li>
&lt;li>&lt;code>dnf-automatic-download.timer&lt;/code> : загрузка обновлений;&lt;/li>
&lt;li>&lt;code>dnf-automatic-install.timer&lt;/code> : установка обновлений.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Этим таймерам соответствуют сервисы.&lt;/li>
&lt;li>Конфигурационный файл: &lt;code>/etc/dnf/automatic.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="установка-программного-обеспечения">&lt;span class="section-num">3&lt;/span> Установка программного обеспечения&lt;/h2>
&lt;ul>
&lt;li>Установим пакет:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install dnf-automatic
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование-программного-обеспечения">&lt;span class="section-num">4&lt;/span> Использование программного обеспечения&lt;/h2>
&lt;ul>
&lt;li>Зададим необходимую конфигурацию в файле &lt;code>/etc/dnf/automatic.conf&lt;/code>.&lt;/li>
&lt;li>Например, для автоматической установки обновлений зададим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">download_updates = yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apply_updates = yes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустим общий таймер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now dnf-automatic.timer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверить работу таймера можно так:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl list-timers *dnf-* --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Сервера на Донской</title><link>https://yamadharma.github.io/ru/post/2022/09/15/servers-donskaya/</link><pubDate>Thu, 15 Sep 2022 20:19:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/15/servers-donskaya/</guid><description>&lt;p>Сервера на Донской.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">&lt;/nav>
&lt;/details></description></item><item><title>Перенос Drupal на другую машину</title><link>https://yamadharma.github.io/ru/post/2022/09/13/move-drupal-other-machine/</link><pubDate>Tue, 13 Sep 2022 19:45:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/13/move-drupal-other-machine/</guid><description>&lt;p>Перенос Drupal на другую машину.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#прагматика">&lt;span class="section-num">1&lt;/span> Прагматика&lt;/a>&lt;/li>
&lt;li>&lt;a href="#порядок-миграции">&lt;span class="section-num">2&lt;/span> Порядок миграции&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-машины">&lt;span class="section-num">2.1&lt;/span> Настройка машины&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#необходимое-программное-обеспечение">&lt;span class="section-num">2.1.1&lt;/span> Необходимое программное обеспечение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#drush">&lt;span class="section-num">2.1.2&lt;/span> Drush&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-базы-данных">&lt;span class="section-num">2.1.3&lt;/span> Запуск базы данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-сети">&lt;span class="section-num">2.1.4&lt;/span> Настройка сети&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-selinux">&lt;span class="section-num">2.1.5&lt;/span> Настройка Selinux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#перенос-файлов">&lt;span class="section-num">2.2&lt;/span> Перенос файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перенос-базы-данных">&lt;span class="section-num">2.3&lt;/span> Перенос базы данных&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-дампа-базы-данных">&lt;span class="section-num">2.3.1&lt;/span> Создание дампа базы данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-базы-данных-на-новой-машине">&lt;span class="section-num">2.3.2&lt;/span> Создание базы данных на новой машине&lt;/a>&lt;/li>
&lt;li>&lt;a href="#восстановление-дампа-базы-данных">&lt;span class="section-num">2.3.3&lt;/span> Восстановление дампа базы данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="прагматика">&lt;span class="section-num">1&lt;/span> Прагматика&lt;/h2>
&lt;ul>
&lt;li>При замене операционной системы возникает необходимость переноса сервисов на другую машину.&lt;/li>
&lt;/ul>
&lt;h2 id="порядок-миграции">&lt;span class="section-num">2&lt;/span> Порядок миграции&lt;/h2>
&lt;h3 id="настройка-машины">&lt;span class="section-num">2.1&lt;/span> Настройка машины&lt;/h3>
&lt;ul>
&lt;li>Следует установить на машину стек LAMP (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h4 id="необходимое-программное-обеспечение">&lt;span class="section-num">2.1.1&lt;/span> Необходимое программное обеспечение&lt;/h4>
&lt;ul>
&lt;li>Установите необходимое для Drupal программное обеспечение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install gd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install php-gd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install php-pecl-apcu
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="drush">&lt;span class="section-num">2.1.2&lt;/span> Drush&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Drush 8&lt;/p>
&lt;ul>
&lt;li>Загрузите нужную версию &lt;code>drush&lt;/code> из &lt;code>https://github.com/drush-ops/drush/releases&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /usr/local/bin/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://github.com/drush-ops/drush/releases/download/8.4.8/drush.phar -O drush
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x drush
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="запуск-базы-данных">&lt;span class="section-num">2.1.3&lt;/span> Запуск базы данных&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Mysql&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Запустите базу данных:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now mariadb.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Поправьте уровень безопасности:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql_secure_installation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Не надо переключаться на сокет и менять пароль пользователя &lt;code>root&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Postgresql&lt;/p>
&lt;ul>
&lt;li>Запустите базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now postgresql.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="настройка-сети">&lt;span class="section-num">2.1.4&lt;/span> Настройка сети&lt;/h4>
&lt;ul>
&lt;li>Откройте необходимые порты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-service&lt;span class="o">=&lt;/span>http --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --add-service&lt;span class="o">=&lt;/span>https --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-selinux">&lt;span class="section-num">2.1.5&lt;/span> Настройка Selinux&lt;/h4>
&lt;ul>
&lt;li>Зададим переключатели для Selinux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setsebool -P httpd_can_network_connect &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P httpd_can_sendmail &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перенос-файлов">&lt;span class="section-num">2.2&lt;/span> Перенос файлов&lt;/h3>
&lt;ul>
&lt;li>Перейдите на новой машине в каталог для файлов www-сервера:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /var/www/html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируйте каталог с файлами со старой машины:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -av -HS -AX root@&amp;lt;oldhost&amp;gt;:/var/www/html/&amp;lt;oldsite&amp;gt; . --delete
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перегенерите метки Selinux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">restorecon -vR /var/www/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перенос-базы-данных">&lt;span class="section-num">2.3&lt;/span> Перенос базы данных&lt;/h3>
&lt;h4 id="создание-дампа-базы-данных">&lt;span class="section-num">2.3.1&lt;/span> Создание дампа базы данных&lt;/h4>
&lt;ul>
&lt;li>На исходной машине необходимо создать дамп базы данных.&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Mysql&lt;/p>
&lt;ul>
&lt;li>Создайте дамп базы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysqldump --quote-names --add-drop-table -u root -p databasename &amp;gt; mysql-databasename-&lt;span class="sb">`&lt;/span>date +%Y%m%d-%H%M%S&lt;span class="sb">`&lt;/span>.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Postgres&lt;/p>
&lt;ul>
&lt;li>Создайте дамп базы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su - postgres -c &lt;span class="s2">&amp;#34;pg_dump -U postgres &amp;gt; pg-databasename-`date +%Y%m%d-%H%M%S`.sql
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="создание-базы-данных-на-новой-машине">&lt;span class="section-num">2.3.2&lt;/span> Создание базы данных на новой машине&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Mysql&lt;/p>
&lt;ul>
&lt;li>
&lt;p>База данных должна быть создана с использованием кодировки UTF-8 (Unicode) (utf8mb4) и параметров сортировки &lt;code>utf8mb4_unicode_ci&lt;/code> или &lt;code>utf8mb4_general_ci&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>Разница между двумя сопоставлениями связана с тем, насколько быстро они сравнивают символы и сортируют их.&lt;/li>
&lt;li>&lt;code>utf8mb4_general_ci&lt;/code> немного быстрее, однако &lt;code>utf8mb4_unicode_ci&lt;/code> более точен для более широкого диапазона символов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Необходимые значения:&lt;/p>
&lt;ul>
&lt;li>&lt;code>databasename&lt;/code> &amp;mdash; имя базы данных;&lt;/li>
&lt;li>&lt;code>username&lt;/code> &amp;mdash; имя пользователя базы данных;&lt;/li>
&lt;li>&lt;code>password&lt;/code> &amp;mdash; пароль пользователя базы данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Создайте новую базу данных для вашего сайта (измените &lt;code>username&lt;/code> и &lt;code>databasename&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p -e &lt;span class="s2">&amp;#34;CREATE DATABASE databasename CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Подключитесь к базе данных:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Создайте пользователя и установите разрешения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">localhost&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DELETE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TEMPORARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">TABLES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">databasename&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сбросьте привилегии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">FLUSH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIVILEGES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Закройте терминал базы данных, набрав &lt;code>exit&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Postgres&lt;/p>
&lt;ul>
&lt;li>Создайте пользователя базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">createuser --pwprompt --encrypted --no-adduser --no-createdb username
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">createdb --encoding&lt;span class="o">=&lt;/span>UNICODE --owner&lt;span class="o">=&lt;/span>username databasename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="восстановление-дампа-базы-данных">&lt;span class="section-num">2.3.3&lt;/span> Восстановление дампа базы данных&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Mysql&lt;/p>
&lt;ul>
&lt;li>Восстановите базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p databasename &amp;lt; mysql-databasename.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Postgres&lt;/p>
&lt;ul>
&lt;li>Восстановите базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">psql -U postgres -d databasename &amp;lt; pg-databasename.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol></description></item><item><title>Набор вещей для системного администратора</title><link>https://yamadharma.github.io/ru/post/2022/09/11/system-administrator-tools/</link><pubDate>Sun, 11 Sep 2022 16:51:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/11/system-administrator-tools/</guid><description>&lt;p>Набор системного администратора.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#ноутбук">&lt;span class="section-num">1&lt;/span> Ноутбук&lt;/a>&lt;/li>
&lt;li>&lt;a href="#персональный-компьютер">&lt;span class="section-num">2&lt;/span> Персональный компьютер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#смартфон">&lt;span class="section-num">3&lt;/span> Смартфон&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#программное-обеспечение-на-смартфоне">&lt;span class="section-num">3.1&lt;/span> Программное обеспечение на смартфоне&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#сервер">&lt;span class="section-num">4&lt;/span> Сервер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#принтер-для-наклеек">&lt;span class="section-num">5&lt;/span> Принтер для наклеек&lt;/a>&lt;/li>
&lt;li>&lt;a href="#инструменты">&lt;span class="section-num">6&lt;/span> Инструменты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#патчкорды-и-переходники">&lt;span class="section-num">7&lt;/span> Патчкорды и переходники&lt;/a>&lt;/li>
&lt;li>&lt;a href="#внешний-dvd-rw-дисковод">&lt;span class="section-num">8&lt;/span> Внешний DVD/RW дисковод&lt;/a>&lt;/li>
&lt;li>&lt;a href="#внешний-usb-жёсткий-диск">&lt;span class="section-num">9&lt;/span> Внешний USB жёсткий диск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#внешний-загрузочный-диск-или-флешка">&lt;span class="section-num">10&lt;/span> Внешний загрузочный диск или флешка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#док-станция--переходник--для-жёстких-дисков">&lt;span class="section-num">11&lt;/span> Док-станция (переходник) для жёстких дисков&lt;/a>&lt;/li>
&lt;li>&lt;a href="#картридер">&lt;span class="section-num">12&lt;/span> Картридер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#рюкзак">&lt;span class="section-num">13&lt;/span> Рюкзак&lt;/a>&lt;/li>
&lt;li>&lt;a href="#софт-и-полезные-программы">&lt;span class="section-num">14&lt;/span> Софт и полезные программы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#аптечка">&lt;span class="section-num">15&lt;/span> Аптечка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="ноутбук">&lt;span class="section-num">1&lt;/span> Ноутбук&lt;/h2>
&lt;ul>
&lt;li>Ноутбук для мобильности (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/04/30/criteria-choosing-laptop/">Критерии выбора ноутбука&lt;/a>).&lt;/li>
&lt;li>Порты:
&lt;ul>
&lt;li>Wi-fi;&lt;/li>
&lt;li>Bluetooth;&lt;/li>
&lt;li>Ethernet;&lt;/li>
&lt;li>USB порты;&lt;/li>
&lt;li>COM-порт (можно и USB-переходник).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="персональный-компьютер">&lt;span class="section-num">2&lt;/span> Персональный компьютер&lt;/h2>
&lt;ul>
&lt;li>Некоторые любят работать на ноутбуках, а я предпочитаю нормальный компьютер (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/07/21/criteria-choosing-personal-computer/">Критерии выбора персонального компьютера&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="смартфон">&lt;span class="section-num">3&lt;/span> Смартфон&lt;/h2>
&lt;ul>
&lt;li>Желательно также зарядку и powerbank.&lt;/li>
&lt;/ul>
&lt;h3 id="программное-обеспечение-на-смартфоне">&lt;span class="section-num">3.1&lt;/span> Программное обеспечение на смартфоне&lt;/h3>
&lt;ul>
&lt;li>Двухфакторная авторизация&lt;/li>
&lt;li>Клиенты удалённого доступа&lt;/li>
&lt;li>Фотокамера&lt;/li>
&lt;li>Навигатор&lt;/li>
&lt;li>Облачные хранилища&lt;/li>
&lt;li>Фонарик&lt;/li>
&lt;li>Почта&lt;/li>
&lt;li>Чат&lt;/li>
&lt;li>Видеоконференции&lt;/li>
&lt;li>Органайзер&lt;/li>
&lt;li>Vpn&lt;/li>
&lt;/ul>
&lt;h2 id="сервер">&lt;span class="section-num">4&lt;/span> Сервер&lt;/h2>
&lt;ul>
&lt;li>Для экспериментов.&lt;/li>
&lt;li>Можно иметь облачный.&lt;/li>
&lt;/ul>
&lt;h2 id="принтер-для-наклеек">&lt;span class="section-num">5&lt;/span> Принтер для наклеек&lt;/h2>
&lt;ul>
&lt;li>Для маркировки кабелей и оборудования.&lt;/li>
&lt;li>Лучше портативный.&lt;/li>
&lt;/ul>
&lt;h2 id="инструменты">&lt;span class="section-num">6&lt;/span> Инструменты&lt;/h2>
&lt;ul>
&lt;li>Набор отвёрток.
&lt;ul>
&lt;li>Маленький набор с самыми востребованными отвёртками, его удобно брать с собой.&lt;/li>
&lt;li>Большой набор стационарно, если понадобится что-то эксклюзивное.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Набор для СКС. Всё для монтажа сети: нож, LAN-тестеры, обжимник.&lt;/li>
&lt;li>Ручной инструмент: молоток, ножовка и т.д.&lt;/li>
&lt;li>Электроинструмент.&lt;/li>
&lt;/ul>
&lt;h2 id="патчкорды-и-переходники">&lt;span class="section-num">7&lt;/span> Патчкорды и переходники&lt;/h2>
&lt;ul>
&lt;li>Несколько патчкордов разной длины.&lt;/li>
&lt;li>Длинные пачкорды: 20 или 30 метров.&lt;/li>
&lt;li>Бухта кабеля в запасе.&lt;/li>
&lt;li>Переходники.&lt;/li>
&lt;li>Кабели питания, USB кабели, оптические патч-корды, консольные кабели.&lt;/li>
&lt;/ul>
&lt;h2 id="внешний-dvd-rw-дисковод">&lt;span class="section-num">8&lt;/span> Внешний DVD/RW дисковод&lt;/h2>
&lt;ul>
&lt;li>Подключение по USB.&lt;/li>
&lt;li>Упаковка чистых болванок.&lt;/li>
&lt;/ul>
&lt;h2 id="внешний-usb-жёсткий-диск">&lt;span class="section-num">9&lt;/span> Внешний USB жёсткий диск&lt;/h2>
&lt;ul>
&lt;li>Для переноса больших объёмов данных.&lt;/li>
&lt;/ul>
&lt;h2 id="внешний-загрузочный-диск-или-флешка">&lt;span class="section-num">10&lt;/span> Внешний загрузочный диск или флешка&lt;/h2>
&lt;ul>
&lt;li>Необходимо для того, чтобы загрузить с него компьютер или сервер.&lt;/li>
&lt;li>Лучше иметь USB/eSATA боксы с возможностью монтировать загруженные на них ISO образы (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/06/06/zalman-zm-ve300/">Контейнер для жесткого диска Zalman ZM-VE300&lt;/a>).&lt;/li>
&lt;li>Хорошо бы сделать загрузочную флешку (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/10/bootable-usb-stick/">Загрузочная флешка&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="док-станция--переходник--для-жёстких-дисков">&lt;span class="section-num">11&lt;/span> Док-станция (переходник) для жёстких дисков&lt;/h2>
&lt;ul>
&lt;li>Для переноса данных с жёстких дисков.&lt;/li>
&lt;li>Интерфейсы: SATA, M2, IDE (3.5&amp;quot; и 2.5&amp;quot;).&lt;/li>
&lt;/ul>
&lt;h2 id="картридер">&lt;span class="section-num">12&lt;/span> Картридер&lt;/h2>
&lt;ul>
&lt;li>Универсальный картридер: microSD, microSDHC, microSDXC.&lt;/li>
&lt;/ul>
&lt;h2 id="рюкзак">&lt;span class="section-num">13&lt;/span> Рюкзак&lt;/h2>
&lt;ul>
&lt;li>Для переноски.&lt;/li>
&lt;li>В рюкзак должны влезать ноутбук, второй ноутбук, папка А4, клавиатура.&lt;/li>
&lt;li>Рюкзак не должен промокать.&lt;/li>
&lt;/ul>
&lt;h2 id="софт-и-полезные-программы">&lt;span class="section-num">14&lt;/span> Софт и полезные программы&lt;/h2>
&lt;ul>
&lt;li>Иметь набор полезных программ и утилит.&lt;/li>
&lt;/ul>
&lt;h2 id="аптечка">&lt;span class="section-num">15&lt;/span> Аптечка&lt;/h2>
&lt;ul>
&lt;li>Набор таблеток.&lt;/li>
&lt;li>Возможны травмы, порезы, ожоги.&lt;/li>
&lt;/ul></description></item><item><title>Регламент доступа к суперкомпьютеру РУДН</title><link>https://yamadharma.github.io/ru/post/2022/09/07/regulations-access-supercomputer-rudn/</link><pubDate>Wed, 07 Sep 2022 14:37:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/07/regulations-access-supercomputer-rudn/</guid><description>&lt;p>Регламент доступа к ресурсам центра коллективного пользования (ЦКП) «Суперкомпьютер» на территории Орджоникидзе, 3.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">&lt;/nav>
&lt;/details>
&lt;ol>
&lt;li>Пользователь должен получить учётные записи:
&lt;ul>
&lt;li>ЦКП «Суперкомпьютер»;&lt;/li>
&lt;li>дисплейных классов на территории Орджоникидзе, 3.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пользователям ресурсов ЦКП «Суперкомпьютер» категорически запрещается передавать данные своих учётных записей другим лицам.&lt;/li>
&lt;li>Использование предоставленных ресурсов должно производиться только в рамках указанных в регистрационных сведениях проектов.&lt;/li>
&lt;li>Пользователь подтверждает, что разрешает обработку персональных данных, предоставленных им при регистрации.&lt;/li>
&lt;li>Пользователь самостоятельно обеспечивает сохранность и резервное копирование своих данных.&lt;/li>
&lt;li>Для формирования сводных отчётов все пользователи обязуются по требованию администрации предоставлять в недельный срок краткую информацию о проведенных исследованиях, выполненных с использованием ресурсов суперкомпьютерного комплекса.&lt;/li>
&lt;li>В случае изменения каких-либо регистрационных данных пользователь обязуется незамедлительно сообщить об этом администраторам ЦКП «Суперкомпьютер» и дисплейных классов на территории Орджоникидзе, 3.&lt;/li>
&lt;li>Доступ в дисплейные классы для использования ЦКП «Суперкомпьютер» осуществляется согласно расписанию дисплейных классов.&lt;/li>
&lt;li>Пользователь обязан регистрироваться в журнале учёта времени работы на ЦКП «Суперкомпьютер».&lt;/li>
&lt;/ol></description></item><item><title>Rocky Linux. Установка сервера</title><link>https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/</link><pubDate>Fri, 12 Aug 2022 13:57:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/</guid><description>&lt;p>Установка базисного сервера на Rocky Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#дополнительные-стандартные-репозитории">&lt;span class="section-num">1.1&lt;/span> Дополнительные стандартные репозитории&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозитории-сообщества">&lt;span class="section-num">1.2&lt;/span> Репозитории сообщества&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-образа">&lt;span class="section-num">2&lt;/span> Установка образа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#после-установки">&lt;span class="section-num">3&lt;/span> После установки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#обновления">&lt;span class="section-num">3.1&lt;/span> Обновления&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-репозитории">&lt;span class="section-num">3.2&lt;/span> Дополнительные репозитории&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-часового-пояса">&lt;span class="section-num">3.3&lt;/span> Установка часового пояса&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-времени">&lt;span class="section-num">3.4&lt;/span> Синхронизация времени&lt;/a>&lt;/li>
&lt;li>&lt;a href="#повышение-комфорта-работы">&lt;span class="section-num">3.5&lt;/span> Повышение комфорта работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#безопасность">&lt;span class="section-num">3.6&lt;/span> Безопасность&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#fail2ban">&lt;span class="section-num">3.6.1&lt;/span> Fail2ban&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#администрирование">&lt;span class="section-num">3.7&lt;/span> Администрирование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#автоматическое-обновление">&lt;span class="section-num">3.7.1&lt;/span> Автоматическое обновление&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-дополнительного-программного-обеспечения">&lt;span class="section-num">4&lt;/span> Установка дополнительного программного обеспечения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#утилиты">&lt;span class="section-num">4.1&lt;/span> Утилиты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#rsync">&lt;span class="section-num">4.1.1&lt;/span> rsync&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#безопасность">&lt;span class="section-num">4.2&lt;/span> Безопасность&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#работа-с-let-s-encrypt">&lt;span class="section-num">4.2.1&lt;/span> Работа с Let&amp;rsquo;s Encrypt&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#синхронизация-времени">&lt;span class="section-num">4.3&lt;/span> Синхронизация времени&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#systemd-timesyncd">&lt;span class="section-num">4.3.1&lt;/span> systemd-timesyncd&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервер-сетевого-времени">&lt;span class="section-num">4.3.2&lt;/span> Сервер сетевого времени&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#вариации-на-тему-стека-lamp--linux-apache-mysql-php">&lt;span class="section-num">4.4&lt;/span> Вариации на тему стека LAMP (Linux, Apache, MySQL, PHP)&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#apache">&lt;span class="section-num">4.4.1&lt;/span> Apache&lt;/a>&lt;/li>
&lt;li>&lt;a href="#php">&lt;span class="section-num">4.4.2&lt;/span> PHP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#mysql">&lt;span class="section-num">4.4.3&lt;/span> Mysql&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#администрирование">&lt;span class="section-num">4.5&lt;/span> Администрирование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#резервное-копирование">&lt;span class="section-num">4.5.1&lt;/span> Резервное копирование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файловые-системы">&lt;span class="section-num">4.6&lt;/span> Файловые системы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#glusterfs">&lt;span class="section-num">4.6.1&lt;/span> GlusterFS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#dns-сервера">&lt;span class="section-num">4.7&lt;/span> DNS сервера&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Rocky Linux &amp;mdash; сборка RedHat Linux, пришедший на смену Centos (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/">Замена Centos&lt;/a>).&lt;/li>
&lt;li>Сайт: &lt;a href="https://rockylinux.org/" target="_blank" rel="noopener">https://rockylinux.org/&lt;/a>.&lt;/li>
&lt;li>Образы:
&lt;ul>
&lt;li>&lt;a href="https://rockylinux.org/download" target="_blank" rel="noopener">https://rockylinux.org/download&lt;/a>;&lt;/li>
&lt;li>&lt;a href="http://dl.rockylinux.org/vault/rocky/" target="_blank" rel="noopener">http://dl.rockylinux.org/vault/rocky/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="дополнительные-стандартные-репозитории">&lt;span class="section-num">1.1&lt;/span> Дополнительные стандартные репозитории&lt;/h3>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Стандартные дополнительные репозитории
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Repository&lt;/th>
&lt;th>Rocky 8&lt;/th>
&lt;th>Rocky 9&lt;/th>
&lt;th>Включён&lt;/th>
&lt;th>Примечание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Extras&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Дополнительные функции, не нарушающие совместимость исходного кода&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Plus&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Либо заменяет стандартный компонент, либо под одну архитектуру&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>RT (real time)&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Пакеты для&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NFV&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>TBD&lt;/td>
&lt;td>No&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SAP / SAP HANA&lt;/td>
&lt;td>No&lt;/td>
&lt;td>TBD&lt;/td>
&lt;td>No&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Devel / devel&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>No&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="репозитории-сообщества">&lt;span class="section-num">1.2&lt;/span> Репозитории сообщества&lt;/h3>
&lt;ul>
&lt;li>Дополнительные пакеты для Enterprise Linux (EPEL):
&lt;ul>
&lt;li>документация: &lt;a href="http://fedoraproject.org/wiki/EPEL" target="_blank" rel="noopener">http://fedoraproject.org/wiki/EPEL&lt;/a>;&lt;/li>
&lt;li>наиболее часто используемй репозиторий;&lt;/li>
&lt;li>сборки пакетов Fedora для каждого поддерживаемого корпоративного Linux;&lt;/li>
&lt;li>пакеты не заменяют базовые;&lt;/li>
&lt;li>установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf config-manager --set-enabled crb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Репозиторий Community Enterprise Linux (ELRepo):
&lt;ul>
&lt;li>фокусируется на более новых ядрах и пакетах драйверов kmod для улучшения поддержки оборудования;&lt;/li>
&lt;li>репозитории ядра должны быть включены для его использования;&lt;/li>
&lt;li>установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install elrepo-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>RPM Fusion:
&lt;ul>
&lt;li>программное обеспечение, которое Fedora Project или Red Hat не хотят поставлять в Enterprise Linux и Fedora;&lt;/li>
&lt;li>базовые пакеты не заменяются;&lt;/li>
&lt;li>установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install rpmfusion-free-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Репозиторий Remi:
&lt;ul>
&lt;li>сайт: &lt;a href="http://rpms.remirepo.net/" target="_blank" rel="noopener">http://rpms.remirepo.net/&lt;/a>;&lt;/li>
&lt;li>поддерживает большую коллекцию RPM, включая, среди прочего, последние версии PHP;&lt;/li>
&lt;li>это коллекция репозиториев;&lt;/li>
&lt;li>документация: &lt;a href="http://blog.remirepo.net/pages/English-FAQ" target="_blank" rel="noopener">http://blog.remirepo.net/pages/English-FAQ&lt;/a>;&lt;/li>
&lt;li>может конфликтовать с другими сторонними репозиториями.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>GhettoForge:
&lt;ul>
&lt;li>документация: &lt;a href="http://ghettoforge.org/index.php/Usage" target="_blank" rel="noopener">http://ghettoforge.org/index.php/Usage&lt;/a>;&lt;/li>
&lt;li>пакеты, которых нет в других сторонних репозиториях;&lt;/li>
&lt;li>пакеты, перезаписывающие базу, будут в репозитории &lt;code>gf-plus&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка-образа">&lt;span class="section-num">2&lt;/span> Установка образа&lt;/h2>
&lt;h2 id="после-установки">&lt;span class="section-num">3&lt;/span> После установки&lt;/h2>
&lt;ul>
&lt;li>Здесь даны общие шаги для большей части серверов.&lt;/li>
&lt;/ul>
&lt;h3 id="обновления">&lt;span class="section-num">3.1&lt;/span> Обновления&lt;/h3>
&lt;ul>
&lt;li>Обновить все пакеты
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="дополнительные-репозитории">&lt;span class="section-num">3.2&lt;/span> Дополнительные репозитории&lt;/h3>
&lt;ul>
&lt;li>Установим &lt;em>EPEL&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf config-manager --set-enabled crb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf -y install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-часового-пояса">&lt;span class="section-num">3.3&lt;/span> Установка часового пояса&lt;/h3>
&lt;ul>
&lt;li>Просмотрите список всех часовых поясов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl list-timezones
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите часовой пояс (например, UTC):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl set-timezone Etc/UTC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-времени">&lt;span class="section-num">3.4&lt;/span> Синхронизация времени&lt;/h3>
&lt;ul>
&lt;li>Запустите демон:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now chronyd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте работу демона &lt;code>chronyd&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chronyc -a tracking
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Включите сетевую синхронизацию времени:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl set-ntp &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте, работает ли он:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="повышение-комфорта-работы">&lt;span class="section-num">3.5&lt;/span> Повышение комфорта работы&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Программы для удобства работы в консоли:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install tmux mc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Программы мониторинга:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install htop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Утилита для ssh:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install mosh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="безопасность">&lt;span class="section-num">3.6&lt;/span> Безопасность&lt;/h3>
&lt;h4 id="fail2ban">&lt;span class="section-num">3.6.1&lt;/span> Fail2ban&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Защита от атак:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install fail2ban
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Следует сконфигурировать и запустить:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now fail2ban.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверьте работу:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tail -f /var/log/fail2ban.log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="администрирование">&lt;span class="section-num">3.7&lt;/span> Администрирование&lt;/h3>
&lt;h4 id="автоматическое-обновление">&lt;span class="section-num">3.7.1&lt;/span> Автоматическое обновление&lt;/h4>
&lt;ul>
&lt;li>При необходимости можно использовать автоматическое обновление (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/09/25/redhat-based-systems-auto-update/">Автообновление систем на базе деривативов RedHat&lt;/a>).&lt;/li>
&lt;li>Установка программного обеспечения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install dnf-automatic
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Задаёте необходимую конфигурацию в файле &lt;code>/etc/dnf/automatic.conf&lt;/code>.&lt;/li>
&lt;li>Запустите таймер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now dnf-automatic.timer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-дополнительного-программного-обеспечения">&lt;span class="section-num">4&lt;/span> Установка дополнительного программного обеспечения&lt;/h2>
&lt;ul>
&lt;li>Описываются дополнительные пакеты для специализированных серверов.&lt;/li>
&lt;/ul>
&lt;h3 id="утилиты">&lt;span class="section-num">4.1&lt;/span> Утилиты&lt;/h3>
&lt;h4 id="rsync">&lt;span class="section-num">4.1.1&lt;/span> rsync&lt;/h4>
&lt;ul>
&lt;li>Установим rsync:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install rsync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="безопасность">&lt;span class="section-num">4.2&lt;/span> Безопасность&lt;/h3>
&lt;h4 id="работа-с-let-s-encrypt">&lt;span class="section-num">4.2.1&lt;/span> Работа с Let&amp;rsquo;s Encrypt&lt;/h4>
&lt;ul>
&lt;li>Установим certbot:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install certbot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим модуль под Apache:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install python3-certbot-apache
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если используется Nginx, установим модуль под Nginx:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">install certbot python3-certbot-nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-времени">&lt;span class="section-num">4.3&lt;/span> Синхронизация времени&lt;/h3>
&lt;h4 id="systemd-timesyncd">&lt;span class="section-num">4.3.1&lt;/span> systemd-timesyncd&lt;/h4>
&lt;ul>
&lt;li>Можно использовать альтернативный метод синхронизации времени из пакета systemd.&lt;/li>
&lt;li>Установите демон синхронизации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install systemd-timesyncd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите демон:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now systemd-timesyncd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Включите сетевую синхронизацию времени:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl set-ntp &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте, работает ли он:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подробная информация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl timesync-status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="сервер-сетевого-времени">&lt;span class="section-num">4.3.2&lt;/span> Сервер сетевого времени&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>В файле &lt;code>/etc/chrony.conf&lt;/code> Разрешите подключение клиентов из локальной сети:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">allow 192.168.0.0/16
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Запустите сервер сетевого времени:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now chronyd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверьте пулы NTP:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chronyc sources
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверьте состояние синхронизации NTP:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chronyc tracking
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Чтобы принимать входящие запросы клиентов, разрешите службу NTP через брандмауэр:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --add-service&lt;span class="o">=&lt;/span>ntp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Перезапустите брандмауэр:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="вариации-на-тему-стека-lamp--linux-apache-mysql-php">&lt;span class="section-num">4.4&lt;/span> Вариации на тему стека LAMP (Linux, Apache, MySQL, PHP)&lt;/h3>
&lt;ul>
&lt;li>Устанавливается, если необходимо поддерживать приложение на PHP.&lt;/li>
&lt;li>Обычно используются базы данных Mysql или Postgresql.&lt;/li>
&lt;/ul>
&lt;h4 id="apache">&lt;span class="section-num">4.4.1&lt;/span> Apache&lt;/h4>
&lt;ul>
&lt;li>Установка Apache:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install httpd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка поддержки HTTPS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install mod_ssl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="php">&lt;span class="section-num">4.4.2&lt;/span> PHP&lt;/h4>
&lt;ul>
&lt;li>Установим php:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="mysql">&lt;span class="section-num">4.4.3&lt;/span> Mysql&lt;/h4>
&lt;ul>
&lt;li>Установим &lt;em>mariadb&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install mariadb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install mariadb-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим модуль для php:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install php-mysqlnd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="администрирование">&lt;span class="section-num">4.5&lt;/span> Администрирование&lt;/h3>
&lt;h4 id="резервное-копирование">&lt;span class="section-num">4.5.1&lt;/span> Резервное копирование&lt;/h4>
&lt;ul>
&lt;li>Для резервного копирования используется &lt;em>restic&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install restic
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="файловые-системы">&lt;span class="section-num">4.6&lt;/span> Файловые системы&lt;/h3>
&lt;h4 id="glusterfs">&lt;span class="section-num">4.6.1&lt;/span> GlusterFS&lt;/h4>
&lt;ul>
&lt;li>Установите пакет для последнего релиза GlusterFS (см. &lt;a href="https://wiki.centos.org/SpecialInterestGroup/Storage" target="_blank" rel="noopener">https://wiki.centos.org/SpecialInterestGroup/Storage&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install centos-release-gluster
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка клиента GlusterFS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install glusterfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install glusterfs-fuse
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="dns-сервера">&lt;span class="section-num">4.7&lt;/span> DNS сервера&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/05/23/dns-powerdns-recursor/">DNS. PowerDNS Recursor&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Утилита module</title><link>https://yamadharma.github.io/ru/post/2022/07/24/module-utility/</link><pubDate>Sun, 24 Jul 2022 16:14:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/07/24/module-utility/</guid><description>&lt;p>Утилита управления переменными окружения.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#environment-modules">&lt;span class="section-num">1.1&lt;/span> Environment Modules&lt;/a>&lt;/li>
&lt;li>&lt;a href="#lmod">&lt;span class="section-num">1.2&lt;/span> Lmod&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">2&lt;/span> Использование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#основные-команды">&lt;span class="section-num">2.1&lt;/span> Основные команды&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примеры-использования">&lt;span class="section-num">2.2&lt;/span> Примеры использования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Для удобства управления переменными окружения используется утилита &lt;code>module&lt;/code>.&lt;/li>
&lt;li>Каждому приложению соответствует конфигурационный файл (модуль), описывающий, как необходимо изменить переменные окружения для работы данного приложения.&lt;/li>
&lt;li>Состояния модуля:
&lt;ul>
&lt;li>загружен: необходимые значения добавляются к текущим переменным окружения;&lt;/li>
&lt;li>выгружен: настройки, соответствующие данному приложению, удаляются из переменных окружения.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Возможно независимо управлять несколькими модулями.&lt;/li>
&lt;li>Существует несколько программ, реализующих утилиту &lt;code>module&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="environment-modules">&lt;span class="section-num">1.1&lt;/span> Environment Modules&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://modules.sourceforge.net/" target="_blank" rel="noopener">http://modules.sourceforge.net/&lt;/a>.&lt;/li>
&lt;li>Докуменация на английском языке: &lt;a href="http://modules.sourceforge.net/man/module.html" target="_blank" rel="noopener">http://modules.sourceforge.net/man/module.html&lt;/a>.&lt;/li>
&lt;li>Оригинальная утилита.&lt;/li>
&lt;li>Создана примерно в 1990 году.&lt;/li>
&lt;/ul>
&lt;h3 id="lmod">&lt;span class="section-num">1.2&lt;/span> Lmod&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.tacc.utexas.edu/research-development/tacc-projects/lmod" target="_blank" rel="noopener">https://www.tacc.utexas.edu/research-development/tacc-projects/lmod&lt;/a>.&lt;/li>
&lt;li>Докуменация на английском языке: &lt;a href="https://lmod.readthedocs.io/" target="_blank" rel="noopener">https://lmod.readthedocs.io/&lt;/a>.&lt;/li>
&lt;li>Развитие &lt;em>Environment Modules&lt;/em>.
&lt;ul>
&lt;li>Поддерживает файлы конфигурации &lt;em>Environment Modules&lt;/em>;&lt;/li>
&lt;li>совместимая на уровне параметров командной строки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">2&lt;/span> Использование&lt;/h2>
&lt;h3 id="основные-команды">&lt;span class="section-num">2.1&lt;/span> Основные команды&lt;/h3>
&lt;ul>
&lt;li>&lt;code>module avail&lt;/code> : вывести список доступных модулей;&lt;/li>
&lt;li>&lt;code>module list&lt;/code> : вывести список загруженных модулей;&lt;/li>
&lt;li>&lt;code>module load module1&lt;/code> : загрузить модуль module1 версии version;&lt;/li>
&lt;li>&lt;code>module unload module1&lt;/code> : выгрузить модуль module1 версии version;&lt;/li>
&lt;li>&lt;code>module swap module1 module2&lt;/code> : заменить загруженный модуль module1 на module2;&lt;/li>
&lt;li>&lt;code>module purge&lt;/code> : выгрузить все загруженные модули;&lt;/li>
&lt;li>&lt;code>module whatis module1&lt;/code> : показать информацию о модуле module1;&lt;/li>
&lt;li>&lt;code>module save [env_name]&lt;/code> : сохранить текущий набор загруженных модулей под именем env_name. Если не указывать имя, то набор будет перезаписан набор по умолчанию;&lt;/li>
&lt;li>&lt;code>module restore [env_name]&lt;/code> : загрузить набор сохранённых модулей;&lt;/li>
&lt;li>&lt;code>module describe [env_name]&lt;/code> : показать состав набора сохранённых модулей&lt;/li>
&lt;/ul>
&lt;h3 id="примеры-использования">&lt;span class="section-num">2.2&lt;/span> Примеры использования&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Просмотр загруженных модулей:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ module list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Currently Loaded Modules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> autotools 2&lt;span class="o">)&lt;/span> prun/1.2 3&lt;span class="o">)&lt;/span> gnu7/7.3.0 4&lt;span class="o">)&lt;/span> openmpi3/3.1.3 5&lt;span class="o">)&lt;/span> ohpc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Просмотр доступных модулей:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ module avail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">​- /opt/ohpc/pub/modulefiles -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CUDA/10.0 cnpy_lib/1.0 hpcx/hpcx-stack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Python/Anaconda_v10.2019 gnu7/7.3.0 &lt;span class="o">(&lt;/span>L&lt;span class="o">)&lt;/span> hpcx/hpcx &lt;span class="o">(&lt;/span>D&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">EasyBuild/3.7.1 fltk/v1.3.5 hwloc/1.11.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Где:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">D: модуль, загружаемый по умолчанию&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">L: модуль, загруженный в настоящий момент.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Пример: выгрузка всех модулей и загрузка модулей CUDA/10.2 и Python/Anaconda_v10.2019:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ module purge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ module load CUDA/10.2 Python/Anaconda_v10.2019
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ module list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Currently Loaded Modules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> CUDA/10.2 2&lt;span class="o">)&lt;/span> Python/Anaconda_v10.2019
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Сохранение набора модулей по умолчанию:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ module save
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Saved current collection of modules to: &lt;span class="s2">&amp;#34;default&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Virtual Desktop Infrastructure</title><link>https://yamadharma.github.io/ru/post/2022/07/23/virtual-desktop-infrastructure/</link><pubDate>Sat, 23 Jul 2022 19:29:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/07/23/virtual-desktop-infrastructure/</guid><description>&lt;p>Инфраструктура виртуальных рабочих столов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#обшая-информация">&lt;span class="section-num">1&lt;/span> Обшая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-элементы-vdi">&lt;span class="section-num">2&lt;/span> Основные элементы VDI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#программное-обеспечение">&lt;span class="section-num">3&lt;/span> Программное обеспечение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#свободное">&lt;span class="section-num">3.1&lt;/span> Свободное&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ravada-vdi">&lt;span class="section-num">3.1.1&lt;/span> Ravada VDI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#openuds">&lt;span class="section-num">3.1.2&lt;/span> OpenUDS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="обшая-информация">&lt;span class="section-num">1&lt;/span> Обшая информация&lt;/h2>
&lt;ul>
&lt;li>Virtual Desktop Infrastructure (VDI) &amp;mdash; инфраструктура виртуальных рабочих столов.&lt;/li>
&lt;li>Общее название идеологии, согласно которой сотрудники для выполнения своих задач используют удаленные рабочие места, организованные на виртуальных машинах.&lt;/li>
&lt;li>Эта концепция похожа на использование терминального сервера.&lt;/li>
&lt;li>Отличается тем, что такой терминальный сервер организуется в виртуальной машине для каждого сотрудника отдельно.&lt;/li>
&lt;/ul>
&lt;h2 id="основные-элементы-vdi">&lt;span class="section-num">2&lt;/span> Основные элементы VDI&lt;/h2>
&lt;ul>
&lt;li>Система управления виртуальными машинами.&lt;/li>
&lt;li>Брокер соединений от пользователя к виртуальным машинам, единая точка входа пользователей с аутентификацией.&lt;/li>
&lt;li>Клиентское приложение или web-приложение для доступа к удалённому рабочему месту.&lt;/li>
&lt;li>Использование эталонного образа виртуальной машины, который будет клонироваться при создании виртуальной машины.&lt;/li>
&lt;li>Возможность создавать виртуальные машины по требованию пользователя.&lt;/li>
&lt;li>Сквозная аутентификация (SSO) в системе управления VDI и гостевой ОС внутри виртуальной машины.&lt;/li>
&lt;li>Возможность выполнения дополнительных скриптов и применения настроек после разворачивания виртуальной машины.&lt;/li>
&lt;/ul>
&lt;h2 id="программное-обеспечение">&lt;span class="section-num">3&lt;/span> Программное обеспечение&lt;/h2>
&lt;h3 id="свободное">&lt;span class="section-num">3.1&lt;/span> Свободное&lt;/h3>
&lt;h4 id="ravada-vdi">&lt;span class="section-num">3.1.1&lt;/span> Ravada VDI&lt;/h4>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://ravada.upc.edu/" target="_blank" rel="noopener">https://ravada.upc.edu/&lt;/a>&lt;/li>
&lt;li>Минимальный вариант VDI.&lt;/li>
&lt;li>Особенности:
&lt;ul>
&lt;li>KVM-бэкенд для Windows и Linux ВМ;&lt;/li>
&lt;li>режим киоска;&lt;/li>
&lt;li>удаленный доступ по протоколу Spice;&lt;/li>
&lt;li>быстрое клонирование ВМ для каждого пользователя;&lt;/li>
&lt;li>проброс USB-устройств;&lt;/li>
&lt;li>настраиваемый интерфейс конечных пользователей;&lt;/li>
&lt;li>администрирование из веб-браузера.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="openuds">&lt;span class="section-num">3.1.2&lt;/span> OpenUDS&lt;/h4>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/dkmstr/openuds" target="_blank" rel="noopener">https://github.com/dkmstr/openuds&lt;/a>.&lt;/li>
&lt;li>Продвинутая VDI.&lt;/li>
&lt;li>Использует различные системы управления VM (PVE, OpenNebula, OpenStack).&lt;/li>
&lt;/ul></description></item><item><title>Принципы работы на суперкомпьютере</title><link>https://yamadharma.github.io/ru/post/2022/07/22/principles-using-supercomputer/</link><pubDate>Fri, 22 Jul 2022 10:51:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/07/22/principles-using-supercomputer/</guid><description>&lt;p>Общие положения по работе клиентов на суперкомпьютере.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#что-такое-суперкомпьютер-кластер">&lt;span class="section-num">1&lt;/span> Что такое суперкомпьютер-кластер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#этапы-работы-на-суперкомпьютере">&lt;span class="section-num">2&lt;/span> Этапы работы на суперкомпьютере&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удаленный-доступ-к-суперкомпьютеру">&lt;span class="section-num">3&lt;/span> Удаленный доступ к суперкомпьютеру&lt;/a>&lt;/li>
&lt;li>&lt;a href="#передача-файлов-на-суперкомпьютер">&lt;span class="section-num">4&lt;/span> Передача файлов на суперкомпьютер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#хранение-файлов">&lt;span class="section-num">5&lt;/span> Хранение файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="что-такое-суперкомпьютер-кластер">&lt;span class="section-num">1&lt;/span> Что такое суперкомпьютер-кластер&lt;/h2>
&lt;ul>
&lt;li>Вычислительный кластер (суперкомпьютер) состоит из вычислительных узлов, объединенных высокоскоростной коммуникационной сетью.&lt;/li>
&lt;li>Каждый вычислительный узел имеет свою оперативную память и твердотельный накопитель, а также подключен к общему параллельному сетевому хранилищу.&lt;/li>
&lt;li>Чтобы независимые вычислительные узлы работали как единый компьютер, используется специальное параллельное программное обеспечение.&lt;/li>
&lt;li>Пользователь подключается к управляющему узлу, на котором нельзя запускать расчёты, с него можно только выполнять постановку задач в очередь.&lt;/li>
&lt;li>Непосредственное же выполнение расчётов происходит на мощных вычислительных узлах кластера, на которые задачи распределяет менеждер очереди задач (программа).&lt;/li>
&lt;/ul>
&lt;h2 id="этапы-работы-на-суперкомпьютере">&lt;span class="section-num">2&lt;/span> Этапы работы на суперкомпьютере&lt;/h2>
&lt;ul>
&lt;li>Пользователь подготавливает на своём компьютере исходные данные для имеющегося прикладного программного обеспечения суперкомпьютера или пишет собственную параллельную программу.&lt;/li>
&lt;li>Пользователь подключается к головному узлу кластера по SSH-протоколу (консолью), загружает исходные данные и ставит свою задачу в очередь на расчёт.&lt;/li>
&lt;li>Пользователь загружает результат с вычислительного кластера на свой персональный компьютер и изучает его локально.&lt;/li>
&lt;/ul>
&lt;h2 id="удаленный-доступ-к-суперкомпьютеру">&lt;span class="section-num">3&lt;/span> Удаленный доступ к суперкомпьютеру&lt;/h2>
&lt;ul>
&lt;li>Удалённое подключение к суперкомпьютеру осуществляется через головной узел по протоколу SSH.&lt;/li>
&lt;li>В операционных системах Linux и Mac OS для подключения используется приложение ssh, для Microsoft Windows рекомендуется свободно распространяемая программа PuTTY.&lt;/li>
&lt;/ul>
&lt;h2 id="передача-файлов-на-суперкомпьютер">&lt;span class="section-num">4&lt;/span> Передача файлов на суперкомпьютер&lt;/h2>
&lt;ul>
&lt;li>Для передачи файлов на вычислительный кластер воспользуйтесь программами, поддерживающими протокол SFTP.&lt;/li>
&lt;li>Для MS Windows рекомендуется программа WinSCP, для ОС Linux &amp;mdash; scp, для MacOS &amp;mdash; программы scp/Cyberduck/Mountain Duck.&lt;/li>
&lt;/ul>
&lt;h2 id="хранение-файлов">&lt;span class="section-num">5&lt;/span> Хранение файлов&lt;/h2>
&lt;ul>
&lt;li>В соответствии с правилами, пользователь самостоятельно обеспечивает резервное копирование своих данных.&lt;/li>
&lt;li>Хранение данных, которые уже не участвуют в вычислениях, на суперкомпьютере не допускается.&lt;/li>
&lt;li>Пользовательские директории имеют вид /home/&amp;lt;имя_пользователя&amp;gt;.&lt;/li>
&lt;li>Максимальный объем данных для пользователя обусловлен дисковой квотой, определяемой при регистрации.&lt;/li>
&lt;li>Для просмотра текущей квоты используйте команду checkquota.&lt;/li>
&lt;li>Кроме того, на каждом вычислительном узле доступен локальный каталог для временных файлов (&lt;code>/tmp&lt;/code>). После окончания работы программы временные файлы пользователя в &lt;code>/tmp&lt;/code> узла удаляются автоматически.&lt;/li>
&lt;/ul></description></item><item><title>Критерии выбора персонального компьютера</title><link>https://yamadharma.github.io/ru/post/2022/07/21/criteria-choosing-personal-computer/</link><pubDate>Thu, 21 Jul 2022 20:17:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/07/21/criteria-choosing-personal-computer/</guid><description>&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#область-применения">&lt;span class="section-num">1&lt;/span> Область применения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#универсальные">&lt;span class="section-num">1.1&lt;/span> Универсальные&lt;/a>&lt;/li>
&lt;li>&lt;a href="#для-развлечения--мультимедийные">&lt;span class="section-num">1.2&lt;/span> Для развлечения (мультимедийные)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#игровые">&lt;span class="section-num">1.3&lt;/span> Игровые&lt;/a>&lt;/li>
&lt;li>&lt;a href="#рабочие-станции">&lt;span class="section-num">1.4&lt;/span> Рабочие станции&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пафосные">&lt;span class="section-num">1.5&lt;/span> Пафосные&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#комплектация">&lt;span class="section-num">2&lt;/span> Комплектация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#диск">&lt;span class="section-num">2.1&lt;/span> Диск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#оперативная-память">&lt;span class="section-num">2.2&lt;/span> Оперативная память&lt;/a>&lt;/li>
&lt;li>&lt;a href="#экран">&lt;span class="section-num">2.3&lt;/span> Экран&lt;/a>&lt;/li>
&lt;li>&lt;a href="#видеокарта">&lt;span class="section-num">2.4&lt;/span> Видеокарта&lt;/a>&lt;/li>
&lt;li>&lt;a href="#интерфейсы">&lt;span class="section-num">2.5&lt;/span> Интерфейсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#цена">&lt;span class="section-num">3&lt;/span> Цена&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="область-применения">&lt;span class="section-num">1&lt;/span> Область применения&lt;/h2>
&lt;h3 id="универсальные">&lt;span class="section-num">1.1&lt;/span> Универсальные&lt;/h3>
&lt;h3 id="для-развлечения--мультимедийные">&lt;span class="section-num">1.2&lt;/span> Для развлечения (мультимедийные)&lt;/h3>
&lt;h3 id="игровые">&lt;span class="section-num">1.3&lt;/span> Игровые&lt;/h3>
&lt;h3 id="рабочие-станции">&lt;span class="section-num">1.4&lt;/span> Рабочие станции&lt;/h3>
&lt;h3 id="пафосные">&lt;span class="section-num">1.5&lt;/span> Пафосные&lt;/h3>
&lt;ul>
&lt;li>Чаще всего фирмы Apple.&lt;/li>
&lt;/ul>
&lt;h2 id="комплектация">&lt;span class="section-num">2&lt;/span> Комплектация&lt;/h2>
&lt;h3 id="диск">&lt;span class="section-num">2.1&lt;/span> Диск&lt;/h3>
&lt;ul>
&lt;li>Только SSD.
&lt;ul>
&lt;li>Ёмкость &amp;mdash; не менее 512 GB.&lt;/li>
&lt;li>На данный момент оптимальный размер &amp;mdash; 1 TB.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>HDD может использоваться для архивного хранения, но не для работы.&lt;/li>
&lt;/ul>
&lt;h3 id="оперативная-память">&lt;span class="section-num">2.2&lt;/span> Оперативная память&lt;/h3>
&lt;ul>
&lt;li>Минимальный объём &amp;mdash; 16 GB.&lt;/li>
&lt;li>Оптимальный объём &amp;mdash; 32 GB.&lt;/li>
&lt;li>Рекомендуемый объём &amp;mdash; 64 GB.&lt;/li>
&lt;/ul>
&lt;h3 id="экран">&lt;span class="section-num">2.3&lt;/span> Экран&lt;/h3>
&lt;ul>
&lt;li>Разрешение:
&lt;ul>
&lt;li>Минимальное: 1920x1080 (&lt;em>Full HD&lt;/em>).&lt;/li>
&lt;li>Рекомендуемое: 4K &amp;mdash; 3840×2160 (Ultra HD 4K).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Частота обновления:
&lt;ul>
&lt;li>Минимальная: 60 Гц.&lt;/li>
&lt;li>Рекомендуемая: 144Гц (минимум 120 Гц).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Диагональ:
&lt;ul>
&lt;li>27&amp;rsquo;&amp;rsquo;&amp;ndash;32&amp;rsquo;'.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Тип матрицы
&lt;ul>
&lt;li>Лучше не брать &lt;em>TN+Film&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="видеокарта">&lt;span class="section-num">2.4&lt;/span> Видеокарта&lt;/h3>
&lt;ul>
&lt;li>Начальный уровень:
&lt;ul>
&lt;li>Интегрированная видеокарта (Intel, AMD).&lt;/li>
&lt;li>GeForce GTX 1650.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Средний уровень:
&lt;ul>
&lt;li>GeForce GTX 1660 SUPER, GeForce RTX 2070 SUPER.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Высокий уровень:
&lt;ul>
&lt;li>GeForce RTX 2080 SUPER.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="интерфейсы">&lt;span class="section-num">2.5&lt;/span> Интерфейсы&lt;/h3>
&lt;ul>
&lt;li>USB:
&lt;ul>
&lt;li>не менее двух разъемов USB 3.0/3.1 формата USB-A;&lt;/li>
&lt;li>желательно наличие USB-C.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Разъём M.2.&lt;/li>
&lt;li>Ethernet 1000 Gbps или 10000 Gbps.&lt;/li>
&lt;li>WiFi &amp;mdash; полезен.&lt;/li>
&lt;li>Bluetooth &amp;mdash; полезен.&lt;/li>
&lt;li>HDMI 2.1.&lt;/li>
&lt;li>Displayport 2.0.&lt;/li>
&lt;/ul>
&lt;h2 id="цена">&lt;span class="section-num">3&lt;/span> Цена&lt;/h2>
&lt;ul>
&lt;li>Нижняя граница цены на приемлемый системный блок &amp;mdash; $1200.&lt;/li>
&lt;/ul></description></item><item><title>Маршрутизация. VyOS</title><link>https://yamadharma.github.io/ru/post/2022/06/03/routing-vyos/</link><pubDate>Fri, 03 Jun 2022 12:24:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/06/03/routing-vyos/</guid><description>&lt;p>Программный маршрутизатор &lt;em>VyOS&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#модель-распространения">&lt;span class="section-num">2&lt;/span> Модель распространения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#функционал">&lt;span class="section-num">3&lt;/span> Функционал&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурирование">&lt;span class="section-num">4&lt;/span> Конфигурирование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#быстрая-настройка">&lt;span class="section-num">4.1&lt;/span> Быстрая настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#режим-конфигурации">&lt;span class="section-num">4.1.1&lt;/span> Режим конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сохранение">&lt;span class="section-num">4.1.2&lt;/span> Сохранение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-интерфейсов">&lt;span class="section-num">4.1.3&lt;/span> Конфигурация интерфейсов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ssh-сервер">&lt;span class="section-num">4.1.4&lt;/span> SSH-сервер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервисы-dhcp-и-dns">&lt;span class="section-num">4.1.5&lt;/span> Сервисы DHCP и DNS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-nat">&lt;span class="section-num">4.1.6&lt;/span> Настройка NAT&lt;/a>&lt;/li>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">4.1.7&lt;/span> Брандмауэр&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-безопасности">&lt;span class="section-num">4.1.8&lt;/span> Настройка безопасности&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#образы-операционной-системы">&lt;span class="section-num">5&lt;/span> Образы операционной системы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайты.
&lt;ul>
&lt;li>Сайт: &lt;a href="https://vyos.net/" target="_blank" rel="noopener">https://vyos.net/&lt;/a>.&lt;/li>
&lt;li>Коммерческий сайт: &lt;a href="https://vyos.io/" target="_blank" rel="noopener">https://vyos.io/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/vyos/vyos-1x" target="_blank" rel="noopener">https://github.com/vyos/vyos-1x&lt;/a>.&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.vyos.io/" target="_blank" rel="noopener">https://docs.vyos.io/&lt;/a>.&lt;/li>
&lt;li>Документация в &lt;code>pdf&lt;/code>: &lt;a href="https://buildmedia.readthedocs.org/media/pdf/vyos/latest/vyos.pdf" target="_blank" rel="noopener">https://buildmedia.readthedocs.org/media/pdf/vyos/latest/vyos.pdf&lt;/a>.&lt;/li>
&lt;li>Блог: &lt;a href="https://blog.vyos.io/" target="_blank" rel="noopener">https://blog.vyos.io/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Поддержка Vagrant (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/12/using-vagrant/">Использование vagrant&lt;/a>).
&lt;ul>
&lt;li>Образы для Vagrant: &lt;a href="https://app.vagrantup.com/vyos/" target="_blank" rel="noopener">https://app.vagrantup.com/vyos/&lt;/a>.&lt;/li>
&lt;li>Плагин для Vagrant: &lt;a href="https://github.com/higebu/vagrant-vyos" target="_blank" rel="noopener">https://github.com/higebu/vagrant-vyos&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Форк проекта &lt;em>Vyatta&lt;/em>.&lt;/li>
&lt;li>Реализовано на основе дистрибутива Debian.&lt;/li>
&lt;li>Система команд похожа на Juniper.&lt;/li>
&lt;li>Подсистема маршрутизации основывается на проекте FRRouting (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/06/02/routing-frrouting/">Маршрутизация. FRRouting&lt;/a>).&lt;/li>
&lt;li>Можно купить аппаратную платформу, на которой возможно развернуть маршрутизатор:
&lt;ul>
&lt;li>&lt;a href="https://aliexpress.ru/popular/vyos-router.html" target="_blank" rel="noopener">https://aliexpress.ru/popular/vyos-router.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="модель-распространения">&lt;span class="section-num">2&lt;/span> Модель распространения&lt;/h2>
&lt;ul>
&lt;li>Можно собрать самому из исходного кода (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/07/06/vyos-build/">Сборка образа VyOS&lt;/a>).&lt;/li>
&lt;li>Образы LTS можно скачивать за плату.
&lt;ul>
&lt;li>Для учебных заведений и некоммерческих организаций предоставляется бесплатный доступ к релизам.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Образы для rolling релизов можно скачивать бесплатно.&lt;/li>
&lt;li>Rolling релизы:
&lt;ul>
&lt;li>&lt;a href="https://vyos.net/get/?dir=rolling/current/amd64" target="_blank" rel="noopener">https://vyos.net/get/?dir=rolling/current/amd64&lt;/a>;&lt;/li>
&lt;li>&lt;a href="https://community.vyos.net/get/" target="_blank" rel="noopener">https://community.vyos.net/get/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Блокируются российский ip-адреса.&lt;/li>
&lt;/ul>
&lt;h2 id="функционал">&lt;span class="section-num">3&lt;/span> Функционал&lt;/h2>
&lt;ul>
&lt;li>VPN: Dynamic Multipoint VPN (DMVPN), GRE, IPSec, IPSec VTI, OpenVPN (server и client), WireGuard.&lt;/li>
&lt;li>Туннели: L2TP, L2TPv3, VXLAN, PPTP, GRE, IPIP, SIT, IPIP, IPIP6, IP6IP6.&lt;/li>
&lt;li>Интерфейсы L2/L3: Ethernet Bridge, 802.1Q VLAN, QinQ, Агрегация портов (LACP и статическая).&lt;/li>
&lt;li>Маршрутизация: BGP, OSPF, OSPFv3, RIP, RIPng протоколов динамической маршрутизации.&lt;/li>
&lt;li>Статическая маршрутизация и Policy-Based Routing (PBR)&lt;/li>
&lt;li>QoS для приоритизации трафика.&lt;/li>
&lt;li>Высокая доступность: VRRP, WAN load-balancing, Conntrack-Sync, Clustering.&lt;/li>
&lt;li>Сетевые сервисы: DHCP, DNS recursive server, Network Address Translation, IGMP-Proxy, NTP, LLDP, mDNS repeater, PPPoE server, TFTP сервер.&lt;/li>
&lt;li>Фильтрация трафика: Zone-based firewall, stateful firewall.&lt;/li>
&lt;li>Политики: Shaping, Rate limiting, Priority-based queues.&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурирование">&lt;span class="section-num">4&lt;/span> Конфигурирование&lt;/h2>
&lt;h3 id="быстрая-настройка">&lt;span class="section-num">4.1&lt;/span> Быстрая настройка&lt;/h3>
&lt;ul>
&lt;li>Настроим шлюз NAT с двумя сетевыми интерфейсами (&lt;code>eth0&lt;/code> и &lt;code>eth1&lt;/code>).&lt;/li>
&lt;/ul>
&lt;h4 id="режим-конфигурации">&lt;span class="section-num">4.1.1&lt;/span> Режим конфигурации&lt;/h4>
&lt;ul>
&lt;li>В рабочем режиме в командной строке отображается символ &lt;code>$&lt;/code>.&lt;/li>
&lt;li>В режиме конфигурации в командной строке отображается &lt;code>#&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vyos@vyos$ configure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos#
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="сохранение">&lt;span class="section-num">4.1.2&lt;/span> Сохранение&lt;/h4>
&lt;ul>
&lt;li>После каждого изменения конфигурации необходимо применить изменения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">commit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В конце нужно сохранить конфигурацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">save
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация-интерфейсов">&lt;span class="section-num">4.1.3&lt;/span> Конфигурация интерфейсов&lt;/h4>
&lt;ul>
&lt;li>Внешний интерфейс: &lt;code>eth0&lt;/code>. Он получает адрес по DHCP.&lt;/li>
&lt;li>Внутренний интерфейс: &lt;code>eth1&lt;/code>. Использует статический IP-адрес &lt;code>192.168.0.1/24&lt;/code>.&lt;/li>
&lt;li>После перехода в режим конфигурации введём следующие команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth0 address dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth0 description &lt;span class="s1">&amp;#39;OUTSIDE&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth1 address &lt;span class="s1">&amp;#39;192.168.0.1/24&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth1 description &lt;span class="s1">&amp;#39;INSIDE&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="ssh-сервер">&lt;span class="section-num">4.1.4&lt;/span> SSH-сервер&lt;/h4>
&lt;ul>
&lt;li>Включим ssh-сервер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service ssh port &lt;span class="s1">&amp;#39;22&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="сервисы-dhcp-и-dns">&lt;span class="section-num">4.1.5&lt;/span> Сервисы DHCP и DNS&lt;/h4>
&lt;ul>
&lt;li>Сетевые настройки:
&lt;ul>
&lt;li>Шлюз по умолчанию и адрес сервера DNS: &lt;code>192.168.0.1/24&lt;/code>.&lt;/li>
&lt;li>Диапазон адресов для статических назначений: &lt;code>192.168.0.2/24&lt;/code>&amp;ndash;&lt;code>192.168.0.8/24&lt;/code>.&lt;/li>
&lt;li>Диапазон адресов для клиентов DHCP: &lt;code>192.168.0.9&lt;/code>&amp;ndash;&lt;code>192.168.0.254&lt;/code>.&lt;/li>
&lt;li>Время аренды адреса DHCP: однин день (86400 секунд).&lt;/li>
&lt;li>Рекурсор DNS могут использовать только хосты из локальной сети.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 default-router &lt;span class="s1">&amp;#39;192.168.0.1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 name-server &lt;span class="s1">&amp;#39;192.168.0.1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 domain-name &lt;span class="s1">&amp;#39;vyos.net&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 lease &lt;span class="s1">&amp;#39;86400&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 range &lt;span class="m">0&lt;/span> start 192.168.0.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 range &lt;span class="m">0&lt;/span> stop &lt;span class="s1">&amp;#39;192.168.0.254&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dns forwarding cache-size &lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dns forwarding listen-address &lt;span class="s1">&amp;#39;192.168.0.1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dns forwarding allow-from &lt;span class="s1">&amp;#39;192.168.0.0/24&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-nat">&lt;span class="section-num">4.1.6&lt;/span> Настройка NAT&lt;/h4>
&lt;ul>
&lt;li>Настроим правила SNAT для внутренней сети:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> nat &lt;span class="nb">source&lt;/span> rule &lt;span class="m">100&lt;/span> outbound-interface &lt;span class="s1">&amp;#39;eth0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> nat &lt;span class="nb">source&lt;/span> rule &lt;span class="m">100&lt;/span> &lt;span class="nb">source&lt;/span> address &lt;span class="s1">&amp;#39;192.168.0.0/24&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> nat &lt;span class="nb">source&lt;/span> rule &lt;span class="m">100&lt;/span> translation address masquerade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="брандмауэр">&lt;span class="section-num">4.1.7&lt;/span> Брандмауэр&lt;/h4>
&lt;ul>
&lt;li>Блокируем весь трафик, который не был инициирован со стороны локальной сети:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-IN default-action &lt;span class="s1">&amp;#39;drop&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-IN rule &lt;span class="m">10&lt;/span> action &lt;span class="s1">&amp;#39;accept&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-IN rule &lt;span class="m">10&lt;/span> state established &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-IN rule &lt;span class="m">10&lt;/span> state related &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL default-action &lt;span class="s1">&amp;#39;drop&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">10&lt;/span> action &lt;span class="s1">&amp;#39;accept&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">10&lt;/span> state established &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">10&lt;/span> state related &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">20&lt;/span> action &lt;span class="s1">&amp;#39;accept&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">20&lt;/span> icmp type-name &lt;span class="s1">&amp;#39;echo-request&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">20&lt;/span> protocol &lt;span class="s1">&amp;#39;icmp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">20&lt;/span> state new &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Разрешим SSH-доступ к маршрутизатору с внешнего интерфейса.&lt;/li>
&lt;li>Ограничивают до 4 запросов в минуту (для блокировки взлома грубой силой):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> action &lt;span class="s1">&amp;#39;drop&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> destination port &lt;span class="s1">&amp;#39;22&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> protocol &lt;span class="s1">&amp;#39;tcp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> recent count &lt;span class="s1">&amp;#39;4&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> recent &lt;span class="nb">time&lt;/span> &lt;span class="s1">&amp;#39;60&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> state new &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">31&lt;/span> action &lt;span class="s1">&amp;#39;accept&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">31&lt;/span> destination port &lt;span class="s1">&amp;#39;22&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">31&lt;/span> protocol &lt;span class="s1">&amp;#39;tcp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">31&lt;/span> state new &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Применим политики брандмауэра:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth0 firewall in name &lt;span class="s1">&amp;#39;OUTSIDE-IN&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth0 firewall &lt;span class="nb">local&lt;/span> name &lt;span class="s1">&amp;#39;OUTSIDE-LOCAL&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Зафиксируем изменения, сохраним конфигурацию и выйдем из режима конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vyos@vyos# commit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos# save
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Saving configuration to &lt;span class="s1">&amp;#39;/config/config.boot&amp;#39;&lt;/span>...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos# &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-безопасности">&lt;span class="section-num">4.1.8&lt;/span> Настройка безопасности&lt;/h4>
&lt;ul>
&lt;li>Заменим системного пользователя по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> system login user myvyosuser authentication plaintext-password mysecurepassword
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроим аутентификацию на основе ключа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> system login user myvyosuser authentication public-keys myusername@mydesktop &lt;span class="nb">type&lt;/span> ssh-rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> system login user myvyosuser authentication public-keys myusername@mydesktop key contents_of_id_rsa.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалим исходного пользователя &lt;code>vyos&lt;/code> полностью отключим аутентификацию по паролю для SSH:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">delete system login user vyos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service ssh disable-password-authentication
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Зафиксируем изменения, сохраним конфигурацию и выйдем из режима конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vyos@vyos# commit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos# save
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Saving configuration to &lt;span class="s1">&amp;#39;/config/config.boot&amp;#39;&lt;/span>...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos# &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="образы-операционной-системы">&lt;span class="section-num">5&lt;/span> Образы операционной системы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/course/nettech/gns3-vyos/">GNS3. Образ VyOS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/06/vyos-build/">Сборка образа VyOS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/16/vyos-build-repository/">Сборка образа VyOS. Репозиторий&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Маршрутизация. FRRouting</title><link>https://yamadharma.github.io/ru/post/2022/06/02/routing-frrouting/</link><pubDate>Thu, 02 Jun 2022 19:30:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/06/02/routing-frrouting/</guid><description>&lt;p>Проект &lt;em>FRRouting&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#протоколы">&lt;span class="section-num">2&lt;/span> Протоколы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-в-gns3">&lt;span class="section-num">3&lt;/span> Установка в GNS3&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#видео-установка-приложения--маршрутизатор-frr">&lt;span class="section-num">3.1&lt;/span> Видео: Установка приложения (маршрутизатор FRR)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://frrouting.org/" target="_blank" rel="noopener">https://frrouting.org/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/FRRouting/frr" target="_blank" rel="noopener">https://github.com/FRRouting/frr&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.frrouting.org/" target="_blank" rel="noopener">https://docs.frrouting.org/&lt;/a>.&lt;/li>
&lt;li>Форк проекта Quagga.&lt;/li>
&lt;li>Для управления используется оболочка &lt;em>vtysh&lt;/em>, система команд которой похожа на Cisco.&lt;/li>
&lt;/ul>
&lt;h2 id="протоколы">&lt;span class="section-num">2&lt;/span> Протоколы&lt;/h2>
&lt;ul>
&lt;li>Border Gateway Protocol (BGP)&lt;/li>
&lt;li>Intermediate System to Intermediate System (IS-IS)&lt;/li>
&lt;li>Open Shortest Path First (OSPF)&lt;/li>
&lt;li>Protocol-Independent Multicast (PIM)&lt;/li>
&lt;li>Routing Information Protocol (RIP)&lt;/li>
&lt;li>Routing Information Protocol next generation (RIPng)&lt;/li>
&lt;li>Enhanced Interior Gateway Routing Protocol (EIGRP)&lt;/li>
&lt;li>Next Hop Resolution Protocol (NHRP)&lt;/li>
&lt;li>Bidirectional Forwarding Detection (BFD)&lt;/li>
&lt;li>Policy-based Routing (PBR)&lt;/li>
&lt;/ul>
&lt;h2 id="установка-в-gns3">&lt;span class="section-num">3&lt;/span> Установка в GNS3&lt;/h2>
&lt;h3 id="видео-установка-приложения--маршрутизатор-frr">&lt;span class="section-num">3.1&lt;/span> Видео: Установка приложения (маршрутизатор FRR)&lt;/h3>
&lt;nav>
&lt;div class="nav nav-tabs" id="nav-tab" role="tablist">
&lt;a class="nav-item nav-link active "
id="nav-dcbfea" data-toggle="tab" href="#dcbfea"
role="tab" aria-controls="nav-home" aria-selected="true">RuTube&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-cabfde" data-toggle="tab" href="#cabfde"
role="tab" aria-controls="nav-home" aria-selected="true">Youtube&lt;/a>
&lt;/div>
&lt;/nav>
&lt;div class="tab-content" id="nav-tab-content">
&lt;div class="tab-pane fade show active " id="dcbfea" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe class="rutube-player" type="text/html"
width="720" height="405"
src="https://rutube.ru/play/embed/f90d7b7baaea8a0d5549384327207060"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0">
&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="cabfde" role="tabpanel" aria-labelledby="nav-1">
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/BgIzJo18yp8" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;/div></description></item><item><title>Дедупликация btrfs. Bees</title><link>https://yamadharma.github.io/ru/post/2022/05/28/deduplication-btrfs-filesystem-bees/</link><pubDate>Sat, 28 May 2022 14:51:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/28/deduplication-btrfs-filesystem-bees/</guid><description>&lt;p>BEES (Best-Effort Extent-Same) &amp;mdash; агент дедупликации &lt;em>btrfs&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#плюсы-и-минусы">&lt;span class="section-num">2&lt;/span> Плюсы и минусы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сильные-стороны">&lt;span class="section-num">2.1&lt;/span> Сильные стороны&lt;/a>&lt;/li>
&lt;li>&lt;a href="#слабые-стороны">&lt;span class="section-num">2.2&lt;/span> Слабые стороны&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">4&lt;/span> Использование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#запуск">&lt;span class="section-num">4.1&lt;/span> Запуск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">4.2&lt;/span> Конфигурация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/Zygo/bees" target="_blank" rel="noopener">https://github.com/Zygo/bees&lt;/a>&lt;/li>
&lt;li>Сайт: &lt;a href="https://zygo.github.io/bees/" target="_blank" rel="noopener">https://zygo.github.io/bees/&lt;/a>&lt;/li>
&lt;li>Уровень дедупликации: блочный.&lt;/li>
&lt;li>Работает как демон.&lt;/li>
&lt;li>Поддерживается инкрементное сканирование данных.&lt;/li>
&lt;/ul>
&lt;h2 id="плюсы-и-минусы">&lt;span class="section-num">2&lt;/span> Плюсы и минусы&lt;/h2>
&lt;h3 id="сильные-стороны">&lt;span class="section-num">2.1&lt;/span> Сильные стороны&lt;/h3>
&lt;ul>
&lt;li>Хеш-таблица с эффективным использованием места, можно использовать всего 1 ГБ хеш-таблицы на 10 ТБ уникальных данных.&lt;/li>
&lt;li>Демон постепенно выполняет дедупликацию новых данных, используя поиск по дереву btrfs.&lt;/li>
&lt;li>Поддержка сжатия btrfs, дедупликация комбинации сжатых и несжатых файлов.&lt;/li>
&lt;li>Постоянная хеш-таблица для быстрого перезапуска после выключения.&lt;/li>
&lt;li>Дедупликация всей файловой системы, включая моментальные снимки.&lt;/li>
&lt;li>Постоянный размер хеш-таблицы: использование оперативной памяти не увеличивается, если набор данных становится больше.&lt;/li>
&lt;li>Автоматическое саморегулирование в зависимости от загрузки системы.&lt;/li>
&lt;/ul>
&lt;h3 id="слабые-стороны">&lt;span class="section-num">2.2&lt;/span> Слабые стороны&lt;/h3>
&lt;ul>
&lt;li>Дедупликация только всей файловой системы.&lt;/li>
&lt;li>Требуются привилегии &lt;code>root&lt;/code> (или &lt;code>CAP_SYS_ADMIN&lt;/code>).&lt;/li>
&lt;li>Первый запуск может увеличить использование пространства метаданных, если существует много моментальных снимков.&lt;/li>
&lt;li>Постоянный размер хеш-таблицы: использование оперативной памяти не уменьшается, если набор данных становится меньше.&lt;/li>
&lt;li>Работает только с &lt;em>btrfs&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge bees
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">4&lt;/span> Использование&lt;/h2>
&lt;h3 id="запуск">&lt;span class="section-num">4.1&lt;/span> Запуск&lt;/h3>
&lt;ul>
&lt;li>Для запуска используем скрипт &lt;code>beesd&lt;/code> (в исходниках &lt;code>scripts/beesd&lt;/code>).&lt;/li>
&lt;li>Посмотрим идентификаторы &lt;code>UUID&lt;/code> файловых систем:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs filesystem show
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активируем демон дедупликации, указав &lt;code>UUID&lt;/code> в качестве идентификатора инстанса. Пусть &lt;code>UUID=&amp;quot;f8963df3-1320-4bc0-a125-62be185b029e&amp;quot;&lt;/code>, тогда команда активации будет иметь вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now beesd@f8963df3-1320-4bc0-a125-62be185b029e
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация">&lt;span class="section-num">4.2&lt;/span> Конфигурация&lt;/h3>
&lt;ul>
&lt;li>Для работы демона необходим файл конфигурации.&lt;/li>
&lt;li>Шаблон для файла конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/etc/bees/beesd.conf.sample
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируйте его, задав произвольное имя (например, &lt;code>root.conf&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /etc/bees/beesd.conf.sample /etc/bees/root.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В этом файле задайте поле &lt;code>UUID&lt;/code> с необходимым значение.&lt;/li>
&lt;li>Для запуска необходимо наличие файла с расширением &lt;code>.conf&lt;/code> и поля &lt;code>UUID&lt;/code>.&lt;/li>
&lt;li>Остальные поля конфигурации настраиваются по желанию. В противном случае используются значения по умолчанию.&lt;/li>
&lt;/ul></description></item><item><title>Дедупликация файловой системы btrfs</title><link>https://yamadharma.github.io/ru/post/2022/05/26/deduplication-btrfs-filesystem/</link><pubDate>Thu, 26 May 2022 14:29:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/26/deduplication-btrfs-filesystem/</guid><description>&lt;p>Дедупликация файловой системы btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#реализация">&lt;span class="section-num">2&lt;/span> Реализация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#duperemove">&lt;span class="section-num">2.1&lt;/span> duperemove&lt;/a>&lt;/li>
&lt;li>&lt;a href="#bees">&lt;span class="section-num">2.2&lt;/span> bees&lt;/a>&lt;/li>
&lt;li>&lt;a href="#bedup">&lt;span class="section-num">2.3&lt;/span> bedup&lt;/a>&lt;/li>
&lt;li>&lt;a href="#btrfs-dedup">&lt;span class="section-num">2.4&lt;/span> btrfs-dedup&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#дедупликация-на-уровне-файлов">&lt;span class="section-num">3&lt;/span> Дедупликация на уровне файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>При дедупликации идентифицируются блоки данных, которые имеют общие последовательности.&lt;/li>
&lt;li>Они объединяются в один экстент с семантикой копирования при записи.&lt;/li>
&lt;/ul>
&lt;h2 id="реализация">&lt;span class="section-num">2&lt;/span> Реализация&lt;/h2>
&lt;h3 id="duperemove">&lt;span class="section-num">2.1&lt;/span> duperemove&lt;/h3>
&lt;h3 id="bees">&lt;span class="section-num">2.2&lt;/span> bees&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/28/deduplication-btrfs-filesystem-bees/">Дедупликация btrfs. Bees&lt;/a>&lt;/li>
&lt;li>Уровень дедупликации: блочный.&lt;/li>
&lt;li>Работает как демон.&lt;/li>
&lt;li>Использую для дедупликации файловой системы.&lt;/li>
&lt;/ul>
&lt;h3 id="bedup">&lt;span class="section-num">2.3&lt;/span> bedup&lt;/h3>
&lt;h3 id="btrfs-dedup">&lt;span class="section-num">2.4&lt;/span> btrfs-dedup&lt;/h3>
&lt;h2 id="дедупликация-на-уровне-файлов">&lt;span class="section-num">3&lt;/span> Дедупликация на уровне файлов&lt;/h2>
&lt;ul>
&lt;li>Некоторые утилиты для дедупликации на уровне файлов поддерживают файловую систему &lt;em>btrfs&lt;/em>.&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/file-deduplication-linux/">Дедупликация файлов в Linux&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Дедупликация файлов в Linux</title><link>https://yamadharma.github.io/ru/post/2022/05/26/file-deduplication-linux/</link><pubDate>Thu, 26 May 2022 14:21:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/26/file-deduplication-linux/</guid><description>&lt;p>Утилиты дедупликации файлов в Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#jdupes">&lt;span class="section-num">1&lt;/span> &lt;code>jdupes&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="jdupes">&lt;span class="section-num">1&lt;/span> &lt;code>jdupes&lt;/code>&lt;/h2>
&lt;ul>
&lt;li>Форк &lt;code>fdupes&lt;/code>.&lt;/li>
&lt;li>Включает поддержку дедупликации BTRFS.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/jbruchon/jdupes" target="_blank" rel="noopener">https://github.com/jbruchon/jdupes&lt;/a>.&lt;/li>
&lt;/ul></description></item><item><title>Дедупликация данных</title><link>https://yamadharma.github.io/ru/post/2022/05/26/data-deduplication/</link><pubDate>Thu, 26 May 2022 13:31:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/26/data-deduplication/</guid><description>&lt;p>Дедупликация данных.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#оценка-метода">&lt;span class="section-num">2&lt;/span> Оценка метода&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#положительные-стороны-дедупликации">&lt;span class="section-num">2.1&lt;/span> Положительные стороны дедупликации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отрицательные-стороны-дедупликации">&lt;span class="section-num">2.2&lt;/span> Отрицательные стороны дедупликации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#уровни-детализации-дедупликации">&lt;span class="section-num">3&lt;/span> Уровни детализации дедупликации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#уровень-блоков">&lt;span class="section-num">3.1&lt;/span> Уровень блоков&lt;/a>&lt;/li>
&lt;li>&lt;a href="#уровень-файлов">&lt;span class="section-num">3.2&lt;/span> Уровень файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#уровень-байтов">&lt;span class="section-num">3.3&lt;/span> Уровень байтов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#место-выполнения-дедупликации">&lt;span class="section-num">4&lt;/span> Место выполнения дедупликации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#дедупликация-клиент-сервер">&lt;span class="section-num">4.1&lt;/span> Дедупликация клиент-сервер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дедупликация-на-клиенте">&lt;span class="section-num">4.2&lt;/span> Дедупликация на клиенте&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дедупликация-на-сервере">&lt;span class="section-num">4.3&lt;/span> Дедупликация на сервере&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#аппаратный-тип">&lt;span class="section-num">4.3.1&lt;/span> Аппаратный тип&lt;/a>&lt;/li>
&lt;li>&lt;a href="#программный-тип">&lt;span class="section-num">4.3.2&lt;/span> Программный тип&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#реализации">&lt;span class="section-num">5&lt;/span> Реализации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Дедупликация данных есть процесс, при котором устраняются избыточные копии информации.&lt;/li>
&lt;li>Снижаются текущие расходы на хранение информации.&lt;/li>
&lt;li>Дедупликация позволяет сохранять на носителях исключительно одну уникальную единицу информации.&lt;/li>
&lt;li>У дедупликации данных есть несколько уровней детализации:
&lt;ul>
&lt;li>байты;&lt;/li>
&lt;li>файлы;&lt;/li>
&lt;li>блоки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="оценка-метода">&lt;span class="section-num">2&lt;/span> Оценка метода&lt;/h2>
&lt;h3 id="положительные-стороны-дедупликации">&lt;span class="section-num">2.1&lt;/span> Положительные стороны дедупликации&lt;/h3>
&lt;ul>
&lt;li>Высокая эффективность хранения информации.&lt;/li>
&lt;li>Выгодность применения при низкой пропускной способности сети.&lt;/li>
&lt;li>Возможность чаще создавать бэкапы и хранить резервные копии данных дольше.&lt;/li>
&lt;/ul>
&lt;h3 id="отрицательные-стороны-дедупликации">&lt;span class="section-num">2.2&lt;/span> Отрицательные стороны дедупликации&lt;/h3>
&lt;ul>
&lt;li>Возможность возникновения конфликта данных (коллизии), если одновременно пара разных блоков генерируют один и тот же хеш-ключ.&lt;/li>
&lt;/ul>
&lt;h2 id="уровни-детализации-дедупликации">&lt;span class="section-num">3&lt;/span> Уровни детализации дедупликации&lt;/h2>
&lt;h3 id="уровень-блоков">&lt;span class="section-num">3.1&lt;/span> Уровень блоков&lt;/h3>
&lt;ul>
&lt;li>Наиболее популярный метод дедупликации.&lt;/li>
&lt;li>Проводится анализ данных по блокам, с дальнейшим сохранением лишь уникальных повторений информации для каждого отдельно взятого блока.&lt;/li>
&lt;li>Блоком считается одна логическая единица информации с характерным размером, который может варьироваться.&lt;/li>
&lt;li>Все данные при дедупликации на уровне блоков обрабатываются с применением хеширования.&lt;/li>
&lt;li>Хеш-алгоритмы позволяют создавать и хранить в базе дедупликации определённую сигнатуру (идентификатор), которая соответствует каждому отдельно взятому уникальному блоку данных.&lt;/li>
&lt;li>Разновидности блочной дедупликации:
&lt;ul>
&lt;li>с переменной длиной блока;&lt;/li>
&lt;li>с постоянной длиной блока.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="уровень-файлов">&lt;span class="section-num">3.2&lt;/span> Уровень файлов&lt;/h3>
&lt;ul>
&lt;li>Проводится сравнение нового файла с уже сохранённым.&lt;/li>
&lt;li>Сохраняется только ссылка на файл.&lt;/li>
&lt;li>Главное преимущество &amp;mdash; простота реализации.&lt;/li>
&lt;/ul>
&lt;h3 id="уровень-байтов">&lt;span class="section-num">3.3&lt;/span> Уровень байтов&lt;/h3>
&lt;ul>
&lt;li>Проводится анализ данных по байтам.&lt;/li>
&lt;li>Очень ресурсоёмко.&lt;/li>
&lt;/ul>
&lt;h2 id="место-выполнения-дедупликации">&lt;span class="section-num">4&lt;/span> Место выполнения дедупликации&lt;/h2>
&lt;ul>
&lt;li>Выполнение дедупликации можно классифицировать по:
&lt;ul>
&lt;li>месту выполнения;&lt;/li>
&lt;li>источнику данных (клиенту);&lt;/li>
&lt;li>стороне хранения (серверу).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="дедупликация-клиент-сервер">&lt;span class="section-num">4.1&lt;/span> Дедупликация клиент-сервер&lt;/h3>
&lt;ul>
&lt;li>Необходимые процессы могут запускаться как на сервере, так и на клиенте.&lt;/li>
&lt;li>Вычисляется хеш у каждого блока данных, после чего хеш отправляется на сервер в виде файла-списка различных хеш-ключей.&lt;/li>
&lt;li>На сервере производится сравнение списка этих ключей, а затем клиенту отправляются блоки с данными.&lt;/li>
&lt;/ul>
&lt;h3 id="дедупликация-на-клиенте">&lt;span class="section-num">4.2&lt;/span> Дедупликация на клиенте&lt;/h3>
&lt;ul>
&lt;li>Выполняется на источнике данных.&lt;/li>
&lt;li>После завершения процесса данные будут отправлены на устройства хранения информации.&lt;/li>
&lt;li>Высокая нагрузка на клиента (ОЗУ и процессор).&lt;/li>
&lt;li>Низкие требования к пропускной способности сети.&lt;/li>
&lt;/ul>
&lt;h3 id="дедупликация-на-сервере">&lt;span class="section-num">4.3&lt;/span> Дедупликация на сервере&lt;/h3>
&lt;ul>
&lt;li>Данные поступают на сервер в полностью необработанном виде (без кодирования и сжатия).&lt;/li>
&lt;/ul>
&lt;h4 id="аппаратный-тип">&lt;span class="section-num">4.3.1&lt;/span> Аппаратный тип&lt;/h4>
&lt;ul>
&lt;li>Устройство дедупликации представляет собой аппаратного решение, объединяющем логику дедупликации и процедуру восстановления данных.&lt;/li>
&lt;/ul>
&lt;h4 id="программный-тип">&lt;span class="section-num">4.3.2&lt;/span> Программный тип&lt;/h4>
&lt;ul>
&lt;li>Используется специальное программное обеспечения.&lt;/li>
&lt;/ul>
&lt;h2 id="реализации">&lt;span class="section-num">5&lt;/span> Реализации&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/file-deduplication-linux/">Дедупликация файлов в Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/deduplication-btrfs-filesystem/">Дедупликация файловой системы btrfs&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Клиенты ACME. acme.sh</title><link>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-acme-sh/</link><pubDate>Mon, 02 May 2022 17:11:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-acme-sh/</guid><description>&lt;p>Клиент протокола ACME, написанный на Unix shell.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/acmesh-official/acme.sh" target="_blank" rel="noopener">https://github.com/acmesh-official/acme.sh&lt;/a>&lt;/li>
&lt;li>Wiki: &lt;a href="https://github.com/acmesh-official/acme.sh/wiki" target="_blank" rel="noopener">https://github.com/acmesh-official/acme.sh/wiki&lt;/a>&lt;/li>
&lt;li>Провайдер по умолчанию: ZeroSSL.com.&lt;/li>
&lt;li>Работает с большим количеством провайдеров.&lt;/li>
&lt;/ul></description></item><item><title>Провайдеры ACME</title><link>https://yamadharma.github.io/ru/post/2022/05/02/acme-providers/</link><pubDate>Mon, 02 May 2022 17:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/02/acme-providers/</guid><description>&lt;p>Существующие провайдеры, работающие по протоколу ACME.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#letsencrypt">&lt;span class="section-num">1&lt;/span> Letsencrypt&lt;/a>&lt;/li>
&lt;li>&lt;a href="#zerossl">&lt;span class="section-num">2&lt;/span> ZeroSSL&lt;/a>&lt;/li>
&lt;li>&lt;a href="#buypass">&lt;span class="section-num">3&lt;/span> BuyPass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ssl-dot-com">&lt;span class="section-num">4&lt;/span> SSL.com&lt;/a>&lt;/li>
&lt;li>&lt;a href="#google-dot-com-public-ca">&lt;span class="section-num">5&lt;/span> Google.com Public CA&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="letsencrypt">&lt;span class="section-num">1&lt;/span> Letsencrypt&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://letsencrypt.org/" target="_blank" rel="noopener">https://letsencrypt.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="zerossl">&lt;span class="section-num">2&lt;/span> ZeroSSL&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://zerossl.com/" target="_blank" rel="noopener">https://zerossl.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="buypass">&lt;span class="section-num">3&lt;/span> BuyPass&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.buypass.com/" target="_blank" rel="noopener">https://www.buypass.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ssl-dot-com">&lt;span class="section-num">4&lt;/span> SSL.com&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.ssl.com/" target="_blank" rel="noopener">https://www.ssl.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="google-dot-com-public-ca">&lt;span class="section-num">5&lt;/span> Google.com Public CA&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://cloud.google.com/certificate-authority-service" target="_blank" rel="noopener">https://cloud.google.com/certificate-authority-service&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Клиенты ACME. Certbot</title><link>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-certbot/</link><pubDate>Mon, 02 May 2022 16:54:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-certbot/</guid><description>&lt;p>Клиент протокола ACME &lt;em>Certbot&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-реализации-snap-certbot">&lt;span class="section-num">2&lt;/span> Установка реализации &lt;em>snap certbot&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#получение-сертификатов">&lt;span class="section-num">3&lt;/span> Получение сертификатов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сертификаты-dns">&lt;span class="section-num">3.1&lt;/span> Сертификаты DNS&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">3.1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-программного-обеспечения">&lt;span class="section-num">3.1.2&lt;/span> Установка программного обеспечения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-bind">&lt;span class="section-num">3.1.3&lt;/span> Настройка BIND&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-certbot">&lt;span class="section-num">3.1.4&lt;/span> Настройка certbot&lt;/a>&lt;/li>
&lt;li>&lt;a href="#получение-сертификата">&lt;span class="section-num">3.1.5&lt;/span> Получение сертификата&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#сертификаты-http">&lt;span class="section-num">3.2&lt;/span> Сертификаты HTTP&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сервер-apache">&lt;span class="section-num">3.2.1&lt;/span> Сервер &lt;em>Apache&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервер-nginx">&lt;span class="section-num">3.2.2&lt;/span> Сервер &lt;em>Nginx&lt;/em>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Бесплатный программный инструмент с открытым исходным кодом для автоматического использования сертификатов Let’s Encrypt.&lt;/li>
&lt;li>Создан Electronic Frontier Foundation (EFF).&lt;/li>
&lt;li>Сайт: &lt;a href="https://certbot.eff.org/" target="_blank" rel="noopener">https://certbot.eff.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-реализации-snap-certbot">&lt;span class="section-num">2&lt;/span> Установка реализации &lt;em>snap certbot&lt;/em>&lt;/h2>
&lt;ul>
&lt;li>Установка &lt;em>Snap&lt;/em>
&lt;ul>
&lt;li>Centos
&lt;ul>
&lt;li>Установите репозиторий &lt;em>Epel&lt;/em>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf install epel-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите &lt;em>Snap&lt;/em>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf -y install snapd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Запустите &lt;em>Snap&lt;/em>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> --now snapd.socket
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ln -s /var/lib/snapd/snap /snap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите &lt;em>Snap&lt;/em> (перед этим необходимо немного подождать, чтобы запустился snapd)
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo snap install core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo snap refresh core
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка &lt;em>certbot&lt;/em>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo snap install --classic certbot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сделайте символьную ссылку для запуска:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo ln -s /snap/bin/certbot /usr/local/bin/certbot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="получение-сертификатов">&lt;span class="section-num">3&lt;/span> Получение сертификатов&lt;/h2>
&lt;h3 id="сертификаты-dns">&lt;span class="section-num">3.1&lt;/span> Сертификаты DNS&lt;/h3>
&lt;h4 id="общая-информация">&lt;span class="section-num">3.1.1&lt;/span> Общая информация&lt;/h4>
&lt;ul>
&lt;li>Для выпуска wildcard-сертификата необходимо выполнить &lt;em>DNS challenge request&lt;/em>, используя протокол ACMEv2.&lt;/li>
&lt;li>&lt;em>DNS challenge&lt;/em> представляет собой запись TXT, предоставленную клиентом &lt;em>certbot&lt;/em>, которую необходимо установить вручную в DNS.&lt;/li>
&lt;li>Нужно будет обновлять DNS при каждом обновлении сертификатов.
&lt;ul>
&lt;li>Чтобы не делать это вручную, воспользуйтесь &lt;em>rfc2136&lt;/em>, для которого в Certbot есть плагин &lt;code>certbot-dns-rfc2136&lt;/code>.&lt;/li>
&lt;li>Также необходимо настроить DNS-сервер, чтобы разрешить динамическое обновление TXT-записей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Документация: &lt;a href="https://certbot-dns-rfc2136.readthedocs.io/" target="_blank" rel="noopener">https://certbot-dns-rfc2136.readthedocs.io/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="установка-программного-обеспечения">&lt;span class="section-num">3.1.2&lt;/span> Установка программного обеспечения&lt;/h4>
&lt;ul>
&lt;li>Установка плагина &lt;code>certbot-dns-rfc2136&lt;/code> для &lt;em>Snap&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">snap &lt;span class="nb">set&lt;/span> certbot trust-plugin-with-root&lt;span class="o">=&lt;/span>ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo snap install certbot-dns-rfc2136
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сам &lt;em>Certbot&lt;/em> может находиться на произвольном сервере.&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-bind">&lt;span class="section-num">3.1.3&lt;/span> Настройка BIND&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Сгенерируйте секретный TSIG-ключ:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tsig-keygen -a HMAC-SHA512 example-key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Здесь &lt;code>example-key&lt;/code> &amp;mdash; имя вашего ключа. Выбирается произвольно. Можно назвать по имени домена.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Добавьте ключ в файл конфигурации &lt;em>Bind&lt;/em> &lt;code>/etc/named.conf&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">// /etc/named.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zone &amp;#34;domain.ltd&amp;#34; IN {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // this is for certbot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> update-policy {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> grant example-key name _acme-challenge.domain.ltd. txt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">key &amp;#34;example-key&amp;#34; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> algorithm hmac-sha512;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> secret &amp;#34;секретный_ключ&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Перезапустите &lt;em>named&lt;/em>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl restart named.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-certbot">&lt;span class="section-num">3.1.4&lt;/span> Настройка certbot&lt;/h4>
&lt;ul>
&lt;li>Сгенерируйте файл конфигурации для плагина &lt;em>rfc2136&lt;/em> &lt;code>/etc/letsencrypt/rfc2136_domain.ltd.ini&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Target DNS server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">dns_rfc2136_server&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">IP-адрес&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Target DNS port&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">dns_rfc2136_port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">53&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># TSIG key name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">dns_rfc2136_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">example-key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># TSIG key secret&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">dns_rfc2136_secret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">ключ_без_кавычек&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># TSIG key algorithm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">dns_rfc2136_algorithm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">HMAC-SHA512&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Поправьте права доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">600&lt;/span> /etc/letsencrypt/rfc2136_domain.ltd.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="получение-сертификата">&lt;span class="section-num">3.1.5&lt;/span> Получение сертификата&lt;/h4>
&lt;ul>
&lt;li>Выполните команду
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot certonly &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --dns-rfc2136 --force-renewal &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --dns-rfc2136-credentials /etc/letsencrypt/rfc2136_domain.ltd.ini &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --server https://acme-v02.api.letsencrypt.org/directory &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --email example@domain.ltd &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --agree-tos --no-eff-email &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --dns-rfc2136-propagation-seconds &lt;span class="m">60&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -d &lt;span class="s1">&amp;#39;domain.ltd&amp;#39;&lt;/span> -d &lt;span class="s1">&amp;#39;*.domain.ltd&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сертификаты помещаются в каталог &lt;code>/etc/letsencrypt/live/domain.ltd&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="сертификаты-http">&lt;span class="section-num">3.2&lt;/span> Сертификаты HTTP&lt;/h3>
&lt;h4 id="сервер-apache">&lt;span class="section-num">3.2.1&lt;/span> Сервер &lt;em>Apache&lt;/em>&lt;/h4>
&lt;ul>
&lt;li>Плагин &lt;code>certbot-apache&lt;/code> предоставляет автоматическую настройку &lt;em>Apache HTTP Server&lt;/em>.&lt;/li>
&lt;li>Он пытается найти конфигурацию каждого домена, а также добавляет рекомендованные для безопасности параметры, настройки использования сертификатов и пути к сертификатам Let&amp;rsquo;s Encrypt.&lt;/li>
&lt;li>Первоначальная настройка виртуальных хостов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot --apache
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновление сертификатов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot renew
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Изменение сертификатов без изменения файлов конфигурации &lt;em>apache&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot --apache certonly
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="сервер-nginx">&lt;span class="section-num">3.2.2&lt;/span> Сервер &lt;em>Nginx&lt;/em>&lt;/h4>
&lt;ul>
&lt;li>Плагин &lt;code>certbot-nginx&lt;/code> предоставляет автоматическую настройку &lt;em>Nginx HTTP Server&lt;/em>.&lt;/li>
&lt;li>Он пытается найти конфигурацию каждого домена, а также добавляет рекомендованные для безопасности параметры, настройки использования сертификатов и пути к сертификатам Let&amp;rsquo;s Encrypt.&lt;/li>
&lt;li>Первоначальная настройка виртуальных хостов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot --nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновление сертификатов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot renew
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Изменение сертификатов без изменения файлов конфигурации &lt;em>nginx&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot --nginx certonly
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Клиенты ACME</title><link>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients/</link><pubDate>Mon, 02 May 2022 16:50:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients/</guid><description>&lt;p>Выдача сертификатов SSL по протоколу ACME.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#certbot">&lt;span class="section-num">1&lt;/span> Certbot&lt;/a>&lt;/li>
&lt;li>&lt;a href="#acme-dot-sh">&lt;span class="section-num">2&lt;/span> acme.sh&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="certbot">&lt;span class="section-num">1&lt;/span> Certbot&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-certbot/">Клиенты ACME. Certbot&lt;/a>&lt;/li>
&lt;li>Наиболее популярный клиент ACME.&lt;/li>
&lt;li>Основной провайдер: Let&amp;rsquo;s Encrypt.&lt;/li>
&lt;li>Написан на &lt;em>python&lt;/em>.&lt;/li>
&lt;li>Есть реализация &lt;em>snap&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h2 id="acme-dot-sh">&lt;span class="section-num">2&lt;/span> acme.sh&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-acme-sh/">Клиенты ACME. acme.sh&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Критерии выбора ноутбука</title><link>https://yamadharma.github.io/ru/post/2022/04/30/criteria-choosing-laptop/</link><pubDate>Sat, 30 Apr 2022 20:06:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/30/criteria-choosing-laptop/</guid><description>&lt;p>Как выбрать ноутбук.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#размеры">&lt;span class="section-num">1&lt;/span> Размеры&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#портативные">&lt;span class="section-num">1.1&lt;/span> Портативные&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переносные">&lt;span class="section-num">1.2&lt;/span> Переносные&lt;/a>&lt;/li>
&lt;li>&lt;a href="#стационарные">&lt;span class="section-num">1.3&lt;/span> Стационарные&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#область-применения">&lt;span class="section-num">2&lt;/span> Область применения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#универсальные">&lt;span class="section-num">2.1&lt;/span> Универсальные&lt;/a>&lt;/li>
&lt;li>&lt;a href="#для-развлечения--мультимедийные">&lt;span class="section-num">2.2&lt;/span> Для развлечения (мультимедийные)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#игровые">&lt;span class="section-num">2.3&lt;/span> Игровые&lt;/a>&lt;/li>
&lt;li>&lt;a href="#рабочие-станции">&lt;span class="section-num">2.4&lt;/span> Рабочие станции&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пафосные">&lt;span class="section-num">2.5&lt;/span> Пафосные&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#комплектация">&lt;span class="section-num">3&lt;/span> Комплектация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#диск">&lt;span class="section-num">3.1&lt;/span> Диск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#оперативная-память">&lt;span class="section-num">3.2&lt;/span> Оперативная память&lt;/a>&lt;/li>
&lt;li>&lt;a href="#экран">&lt;span class="section-num">3.3&lt;/span> Экран&lt;/a>&lt;/li>
&lt;li>&lt;a href="#тип-матрицы">&lt;span class="section-num">3.4&lt;/span> Тип матрицы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#видеокарта">&lt;span class="section-num">3.5&lt;/span> Видеокарта&lt;/a>&lt;/li>
&lt;li>&lt;a href="#интерфейсы">&lt;span class="section-num">3.6&lt;/span> Интерфейсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#цена">&lt;span class="section-num">4&lt;/span> Цена&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="размеры">&lt;span class="section-num">1&lt;/span> Размеры&lt;/h2>
&lt;h3 id="портативные">&lt;span class="section-num">1.1&lt;/span> Портативные&lt;/h3>
&lt;ul>
&lt;li>Вес 1&amp;ndash;1,5 кг.&lt;/li>
&lt;li>Размер экрана: 13,3&amp;quot;&amp;ndash;14&amp;quot;.&lt;/li>
&lt;li>Можно возить с собой.&lt;/li>
&lt;/ul>
&lt;h3 id="переносные">&lt;span class="section-num">1.2&lt;/span> Переносные&lt;/h3>
&lt;ul>
&lt;li>Вес до 2,5 кг.&lt;/li>
&lt;li>Размер экрана: 15&amp;quot;&amp;ndash;17&amp;quot;.&lt;/li>
&lt;li>Можно переносить в пределах помещения.&lt;/li>
&lt;/ul>
&lt;h3 id="стационарные">&lt;span class="section-num">1.3&lt;/span> Стационарные&lt;/h3>
&lt;ul>
&lt;li>Вес 3 кг и выше.&lt;/li>
&lt;li>Размер экрана: 17&amp;quot; и выше.&lt;/li>
&lt;li>Стоит на столе.&lt;/li>
&lt;li>Обычно игровые или рабочие станции.&lt;/li>
&lt;/ul>
&lt;h2 id="область-применения">&lt;span class="section-num">2&lt;/span> Область применения&lt;/h2>
&lt;h3 id="универсальные">&lt;span class="section-num">2.1&lt;/span> Универсальные&lt;/h3>
&lt;h3 id="для-развлечения--мультимедийные">&lt;span class="section-num">2.2&lt;/span> Для развлечения (мультимедийные)&lt;/h3>
&lt;h3 id="игровые">&lt;span class="section-num">2.3&lt;/span> Игровые&lt;/h3>
&lt;h3 id="рабочие-станции">&lt;span class="section-num">2.4&lt;/span> Рабочие станции&lt;/h3>
&lt;h3 id="пафосные">&lt;span class="section-num">2.5&lt;/span> Пафосные&lt;/h3>
&lt;ul>
&lt;li>Чаще всего фирмы Apple.&lt;/li>
&lt;/ul>
&lt;h2 id="комплектация">&lt;span class="section-num">3&lt;/span> Комплектация&lt;/h2>
&lt;h3 id="диск">&lt;span class="section-num">3.1&lt;/span> Диск&lt;/h3>
&lt;ul>
&lt;li>Только SSD.
&lt;ul>
&lt;li>Ёмкость &amp;mdash; не менее 512 GB.&lt;/li>
&lt;li>На данный момент оптимальный размер &amp;mdash; 1 TB.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>HDD может использоваться для архивного хранения, но не для работы.&lt;/li>
&lt;/ul>
&lt;h3 id="оперативная-память">&lt;span class="section-num">3.2&lt;/span> Оперативная память&lt;/h3>
&lt;ul>
&lt;li>Минимальный объём &amp;mdash; 8 GB.&lt;/li>
&lt;li>Оптимальный объём &amp;mdash; 16 GB.&lt;/li>
&lt;li>Рекомендуемый объём &amp;mdash; 32 GB.&lt;/li>
&lt;/ul>
&lt;h3 id="экран">&lt;span class="section-num">3.3&lt;/span> Экран&lt;/h3>
&lt;ul>
&lt;li>Разрешение &amp;mdash; достаточно 1920x1080 (&lt;em>Full HD&lt;/em>).&lt;/li>
&lt;li>Более высокое разрешение не является необходимым.
&lt;ul>
&lt;li>Проблематично использовать. Плохая поддержка в операционных системах.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="тип-матрицы">&lt;span class="section-num">3.4&lt;/span> Тип матрицы&lt;/h3>
&lt;ul>
&lt;li>Лучше не брать &lt;em>TN+Film&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h3 id="видеокарта">&lt;span class="section-num">3.5&lt;/span> Видеокарта&lt;/h3>
&lt;ul>
&lt;li>С интегрированной видеокартой (Intel, AMD) меньше проблем.&lt;/li>
&lt;li>Дискретные видеокарты подходят для специального применения (инженерные расчёты, графика, игры).&lt;/li>
&lt;li>Видеокарты &lt;em>Nvidia&lt;/em> плохо поддерживаются в Linux (не в Windows).&lt;/li>
&lt;/ul>
&lt;h3 id="интерфейсы">&lt;span class="section-num">3.6&lt;/span> Интерфейсы&lt;/h3>
&lt;ul>
&lt;li>USB
&lt;ul>
&lt;li>USB-A &amp;mdash; чем больше, тем лучше.&lt;/li>
&lt;li>USB-C &amp;mdash; пока мало такой переферии.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Ethernet &amp;mdash; чаще всего присутствует стационарных моделях.&lt;/li>
&lt;li>WiFi &amp;mdash; необходим.&lt;/li>
&lt;li>Bluetooth &amp;mdash; полезен.&lt;/li>
&lt;li>HDMI &amp;mdash; если собираетесь выводить видео на экран или проектор.&lt;/li>
&lt;li>При недостатке интерфейсов есть смысл купить расширитель (док-станцию).&lt;/li>
&lt;/ul>
&lt;h2 id="цена">&lt;span class="section-num">4&lt;/span> Цена&lt;/h2>
&lt;ul>
&lt;li>Нижняя граница цены на приемлемый ноутбук &amp;mdash; $1800.&lt;/li>
&lt;/ul></description></item><item><title>Сертификаты ACME</title><link>https://yamadharma.github.io/ru/post/2022/04/30/acme-certificates/</link><pubDate>Sat, 30 Apr 2022 14:49:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/30/acme-certificates/</guid><description>&lt;p>SSL-сертификаты от &lt;em>Let&amp;rsquo;s Encrypt&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#провайдеры">&lt;span class="section-num">2&lt;/span> Провайдеры&lt;/a>&lt;/li>
&lt;li>&lt;a href="#инструментарий">&lt;span class="section-num">3&lt;/span> Инструментарий&lt;/a>&lt;/li>
&lt;li>&lt;a href="#тестирование-работы-выдачи-сертификатов-acme">&lt;span class="section-num">4&lt;/span> Тестирование работы выдачи сертификатов ACME&lt;/a>&lt;/li>
&lt;li>&lt;a href="#проверки-acme">&lt;span class="section-num">5&lt;/span> Проверки ACME&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проверка-http-01">&lt;span class="section-num">5.1&lt;/span> Проверка HTTP-01&lt;/a>&lt;/li>
&lt;li>&lt;a href="#проверка-dns-01">&lt;span class="section-num">5.2&lt;/span> Проверка DNS-01&lt;/a>&lt;/li>
&lt;li>&lt;a href="#проверка-tls-alpn-01">&lt;span class="section-num">5.3&lt;/span> Проверка TLS-ALPN-01&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://letsencrypt.org/" target="_blank" rel="noopener">https://letsencrypt.org/&lt;/a>&lt;/li>
&lt;li>Использует протокол ACME для выдачи сертификата.&lt;/li>
&lt;li>Наиболее известным провайдером сертификатов, выдаваемых по протоколу ACME, является Let&amp;rsquo;s Encrypt.&lt;/li>
&lt;/ul>
&lt;h2 id="провайдеры">&lt;span class="section-num">2&lt;/span> Провайдеры&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/02/acme-providers/">Провайдеры ACME&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="инструментарий">&lt;span class="section-num">3&lt;/span> Инструментарий&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/02/acme-clients/">Клиенты ACME&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="тестирование-работы-выдачи-сертификатов-acme">&lt;span class="section-num">4&lt;/span> Тестирование работы выдачи сертификатов ACME&lt;/h2>
&lt;ul>
&lt;li>Проверить на проблемы работу Let&amp;rsquo;s Encrypt можно с помощью сайта: &lt;a href="https://letsdebug.net/" target="_blank" rel="noopener">https://letsdebug.net/&lt;/a>.&lt;/li>
&lt;li>Видимость Ваших ресурсов из внешних сетей можно проверить на сайте &lt;a href="https://check-host.net/" target="_blank" rel="noopener">https://check-host.net/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="проверки-acme">&lt;span class="section-num">5&lt;/span> Проверки ACME&lt;/h2>
&lt;ul>
&lt;li>Для выдачи сертификата необходимо верифицировать хост, которому выдаётся сертификат.&lt;/li>
&lt;/ul>
&lt;h3 id="проверка-http-01">&lt;span class="section-num">5.1&lt;/span> Проверка HTTP-01&lt;/h3>
&lt;ul>
&lt;li>Этот тип проверки используется чаще всего.&lt;/li>
&lt;li>Let&amp;rsquo;s Encrypt выдаёт ACME-клиенту токен, а ACME-клиент записывает этот токен в файл на web-сервере по пути &lt;code>http://&amp;lt;YOUR_DOMAIN&amp;gt;/.well-known/acme-challenge/&amp;lt;TOKEN&amp;gt;&lt;/code>.
&lt;ul>
&lt;li>В этом файле содержится сам токен, плюс отпечаток ключа вашего аккаунта.&lt;/li>
&lt;li>Как только ACME-клиент сообщит Let&amp;rsquo;s Encrypt, что файл готов, Let&amp;rsquo;s Encrypt будет пытаться получить этот файл по URL (возможно, несколько раз, с различных адресов).&lt;/li>
&lt;li>Если полученный ответ будет верным, проверка считается успешной, и сертификат для выбранного домена готов к использованию.&lt;/li>
&lt;li>Если проверка прошла неудачно, требуется повторить попытку с новым сертификатом.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Реализация проверки HTTP-01 разрешает редиректы запросов, общим числом не более 10.
&lt;ul>
&lt;li>Редиректы принимаются только на адреса, начинающиеся с &lt;code>http:&lt;/code> или &lt;code>https:&lt;/code>, и только на порты 80 или 443.&lt;/li>
&lt;li>Редиректы на IP-адреса не принимаются.&lt;/li>
&lt;li>Если редирект выполнялся на URL c HTTPS, то сертификат не считается подтверждённым (т.к. проверка для новых сертификатов, может обнаружить самоподписанные или просроченные сертификаты).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Проверка HTTP-01 выполняется только с использованием порта 80. Произвольный порт для проверки снижает надёжность, и потому запрещён стандартом ACME.&lt;/li>
&lt;li>Плюсы:
&lt;ul>
&lt;li>Упрощённая автоматизация процесса, не требующая дополнительных знаний по настройке доменов.&lt;/li>
&lt;li>Выпуск сертификатов для доменов хостинг-провайдеров, привязанных по &lt;code>CNAME&lt;/code>.&lt;/li>
&lt;li>Совместим с уже настроенными web-серверами.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Минусы:
&lt;ul>
&lt;li>&lt;strong>Требует открытого порта 80&lt;/strong>.&lt;/li>
&lt;li>Let&amp;rsquo;s Encrypt не разрешает использовать эту проверку для сертификатов с подстановкой (wildcard-сертификатов).&lt;/li>
&lt;li>Для каждого web-сервера требуется свой файл.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="проверка-dns-01">&lt;span class="section-num">5.2&lt;/span> Проверка DNS-01&lt;/h3>
&lt;ul>
&lt;li>Эта проверка требует подтверждения прав на домен с помощью специальной TXT-записи для доменного имени.
&lt;ul>
&lt;li>Проверка DNS-01 разрешает выпускать сертификаты с подстановкой (wildcard-сертификаты).&lt;/li>
&lt;li>После того, как Let&amp;rsquo;s Encrypt передаёт ACME-клиенту токен, клиент создаёт содержимое TXT-записи на основе токена и ключа аккаунта, и записывает её в &lt;code>_acme-challenge.&amp;lt;YOUR_DOMAIN&amp;gt;&lt;/code>.&lt;/li>
&lt;li>Далее, Let&amp;rsquo;s Encrypt запрашивает TXT-запись в DNS-зоне домена. Если значения совпадают, то сертификат готов к использованию!&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для автоматизации процесса выпуска и отзыва сертификатов желательно, чтобы DNS-провайдер предоставлял API для автоматических обновлений.&lt;/li>
&lt;li>Let&amp;rsquo;s Encrypt придерживается стандартов DNS для поиска TXT-записи при проверке DNS-01, поэтому можно задействовать записи CNAME или NS для делегирования права ответа за другие DNS-зоны.
&lt;ul>
&lt;li>Например настроив субдомен &lt;code>_acme-challenge&lt;/code> для специального сервера валидации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для одного и того же доменного имени допускается несколько TXT-записей.
&lt;ul>
&lt;li>Например, когда требуется одновременно выполнить проверку и для обычного сертификата, и для wildcard-сертификата.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Рекомендуется удалять неактуальные TXT-записи, т.к. из-за большого размера ответа сервера при проверке Let&amp;rsquo;s Encrypt признает проверку неудачной.&lt;/li>
&lt;li>Плюсы:
&lt;ul>
&lt;li>Подходит для сертификатов с подстановкой (wildcard-сертификатов).&lt;/li>
&lt;li>Одна запись для нескольких web-серверов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Минусы:
&lt;ul>
&lt;li>У DNS-провайдера может не быть своего API.&lt;/li>
&lt;li>Хранение учётной записи для DNS API небезопасно.&lt;/li>
&lt;li>DNS API может не быть методов оценки период обновления записей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="проверка-tls-alpn-01">&lt;span class="section-num">5.3&lt;/span> Проверка TLS-ALPN-01&lt;/h3>
&lt;ul>
&lt;li>Замена проверки TLS-SNI-01.&lt;/li>
&lt;li>Проверка TLS-ALPN-01 выполняется через TLS handshake на порте 443.&lt;/li>
&lt;li>Плюсы:
&lt;ul>
&lt;li>Будет работать даже если порт 80 закрыт.&lt;/li>
&lt;li>Реализована целиком внутри слоя TLS&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Минусы:
&lt;ul>
&lt;li>Пока не поддерживается Apache, Nginx или Certbot, и, возможно, не будет поддерживаться.&lt;/li>
&lt;li>Как и для проверки HTTP-01, настраивать нужно ответ от каждого web-сервера.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Почта. Yahoo.com. Настройка почтового клиента</title><link>https://yamadharma.github.io/ru/post/2022/04/26/mail-yahoo-com-configuring-mail-client/</link><pubDate>Tue, 26 Apr 2022 17:01:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/26/mail-yahoo-com-configuring-mail-client/</guid><description>&lt;p>Настройка клиента для работы с почтой &lt;em>Yahoo.com&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#парольные-файлы-для-pass--см-dot-менеджер-паролей-pass--dot-dot-notes-20210428185000-менеджер-паролеи-pass-dot-md">&lt;span class="section-num">3&lt;/span> Парольные файлы для &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://mail.yahoo.com/" target="_blank" rel="noopener">https://mail.yahoo.com/&lt;/a>&lt;/li>
&lt;li>Используются локализованные названия для папок IMAP.&lt;/li>
&lt;li>Папки почты по умолчанию (отображение в web-интерфейсе):
&lt;ul>
&lt;li>&lt;code>INBOX&lt;/code>;&lt;/li>
&lt;li>&lt;code>Архив&lt;/code>;&lt;/li>
&lt;li>&lt;code>Корзина&lt;/code>;&lt;/li>
&lt;li>&lt;code>Спам&lt;/code>;&lt;/li>
&lt;li>&lt;code>Черновики&lt;/code>;&lt;/li>
&lt;li>&lt;code>Отправленные&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Папки почты по умолчанию (IMAP названия):
&lt;ul>
&lt;li>&lt;code>INBOX&lt;/code>;&lt;/li>
&lt;li>&lt;code>Archive&lt;/code>;&lt;/li>
&lt;li>&lt;code>Trash&lt;/code>;&lt;/li>
&lt;li>&lt;code>Bulk Mail&lt;/code>;&lt;/li>
&lt;li>&lt;code>Draft&lt;/code>;&lt;/li>
&lt;li>&lt;code>Sent&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Необходимо использовать пароль приложения: &lt;a href="https://help.yahoo.com/kb/generate-manage-third-party-passwords-sln15241.html" target="_blank" rel="noopener">https://help.yahoo.com/kb/generate-manage-third-party-passwords-sln15241.html&lt;/a>
&lt;ul>
&lt;li>Войдите на страницу безопасности учетной записи Yahoo &lt;a href="https://login.yahoo.com/account/security?.lang=en-US&amp;amp;.intl=us&amp;amp;.src=yhelp" target="_blank" rel="noopener">https://login.yahoo.com/account/security?.lang=en-US&amp;.intl=us&amp;.src=yhelp&lt;/a>.&lt;/li>
&lt;li>Нажмите «Создать пароль приложения» или «Создать и управлять паролями приложений».&lt;/li>
&lt;li>Введите название вашего приложения в текстовое поле.&lt;/li>
&lt;li>Щёлкните &lt;em>Создать пароль&lt;/em>.&lt;/li>
&lt;li>Следуйте инструкциям под паролем приложения.&lt;/li>
&lt;li>Щёлкните &lt;em>Готово&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/h2>
&lt;ul>
&lt;li>Справочная страница:
&lt;ul>
&lt;li>&lt;a href="https://help.yahoo.com/kb/SLN4075.html" target="_blank" rel="noopener">https://help.yahoo.com/kb/SLN4075.html&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://help.yahoo.com/kb/pop-access-settings-instructions-yahoo-mail-sln4724.html" target="_blank" rel="noopener">https://help.yahoo.com/kb/pop-access-settings-instructions-yahoo-mail-sln4724.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на &lt;code>yahoo.com&lt;/code> (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль приложения для вашего почтового ящика домена на &lt;code>yahoo.com&lt;/code>;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>smtp.mail.yahoo.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;
&lt;ul>
&lt;li>порт &amp;mdash; 465;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>защита соединения &amp;mdash; STARTTLS;
&lt;ul>
&lt;li>порт &amp;mdash; 587.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на &lt;code>yahoo.com&lt;/code> (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль приложения для вашего почтового ящика домена на &lt;code>yahoo.com&lt;/code>;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>imap.mail.yahoo.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 993.&lt;/li>
&lt;/ul>
&lt;h3 id="pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на &lt;code>yahoo.com&lt;/code> (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль приложения для вашего почтового ящика домена на &lt;code>yahoo.com&lt;/code>;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>pop.mail.yahoo.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 995.&lt;/li>
&lt;/ul>
&lt;h2 id="парольные-файлы-для-pass--см-dot-менеджер-паролей-pass--dot-dot-notes-20210428185000-менеджер-паролеи-pass-dot-md">&lt;span class="section-num">3&lt;/span> Парольные файлы для &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>)&lt;/h2>
&lt;ul>
&lt;li>Для входа через web-интерфейс: &lt;code>yahoo.com/account@yahoo.com.gpg&lt;/code>.&lt;/li>
&lt;li>Пароль приложения: &lt;code>yahoo.com/account@yahoo.com@apppassword.gpg&lt;/code>.&lt;/li>
&lt;li>Пароль приложения для SMTP: &lt;code>yahoo.com/account@yahoo.com@smtp.mail.yahoo.com.gpg&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>DavMail</title><link>https://yamadharma.github.io/ru/post/2022/04/10/davmail/</link><pubDate>Sun, 10 Apr 2022 19:02:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/10/davmail/</guid><description>&lt;p>DavMail &amp;mdash; прокси-сервер, позволяющая взаимодействовать с сервером Microsoft Exchange.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#пакетная-установка">&lt;span class="section-num">2.1&lt;/span> Пакетная установка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файлы-конфигурации">&lt;span class="section-num">3&lt;/span> Файлы конфигурации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#запуск-под-пользователем">&lt;span class="section-num">3.1&lt;/span> Запуск под пользователем&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-на-системном-уровне">&lt;span class="section-num">3.2&lt;/span> Запуск на системном уровне&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#параметры-настройки">&lt;span class="section-num">4&lt;/span> Параметры настройки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#протокол-exchange">&lt;span class="section-num">4.1&lt;/span> Протокол Exchange&lt;/a>&lt;/li>
&lt;li>&lt;a href="#url-адрес-owa">&lt;span class="section-num">4.2&lt;/span> URL-адрес OWA&lt;/a>&lt;/li>
&lt;li>&lt;a href="#порты">&lt;span class="section-num">4.3&lt;/span> Порты&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конфигурирование">&lt;span class="section-num">5&lt;/span> Конфигурирование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#протокол-o365modern">&lt;span class="section-num">5.1&lt;/span> Протокол &lt;code>O365Modern&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://davmail.sourceforge.net/" target="_blank" rel="noopener">http://davmail.sourceforge.net/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="пакетная-установка">&lt;span class="section-num">2.1&lt;/span> Пакетная установка&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Gentoo&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge net-mail/davmail-bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Не в основном дереве portage.&lt;/li>
&lt;li>Используйте оверлей &lt;em>pentoo&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="файлы-конфигурации">&lt;span class="section-num">3&lt;/span> Файлы конфигурации&lt;/h2>
&lt;ul>
&lt;li>Два варианта работы:
&lt;ul>
&lt;li>запуск под пользователем;&lt;/li>
&lt;li>запуск на системном уровне.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-под-пользователем">&lt;span class="section-num">3.1&lt;/span> Запуск под пользователем&lt;/h3>
&lt;ul>
&lt;li>Конфигурационный файл: &lt;code>~/.davmail.properties&lt;/code>.&lt;/li>
&lt;li>Запуск:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">davmail
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В трее появляется значок.&lt;/li>
&lt;li>Можно сконфигурить в графическом режиме, а после скопировать конфигурационный файл на системный уровень.&lt;/li>
&lt;li>Если сконфигурирована аутентификация Oauth2, то конфигурационный файл содержит токен доступа.
&lt;ul>
&lt;li>В таком виде использовать конфигурационный файл на системном уровне вряд ли получится.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>systemd-скрипт&lt;/em> &lt;code>/usr/lib/systemd/user/davmail.service&lt;/code> для запуска под пользователем:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Unit]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description=Davmail Exchange gateway for %i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Documentation=http://davmail.sourceforge.net/serversetup.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Documentation=http://davmail.sourceforge.net/advanced.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Documentation=http://davmail.sourceforge.net/sslsetup.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">After=network.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Service]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStart=/usr/bin/davmail %h/.davmail.properties
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Restart=on-failure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Install]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WantedBy=default.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DefaultInstance=davmail
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно поместить этот скрипт в каталог &lt;code>~/.config/systemd/user&lt;/code>.&lt;/li>
&lt;li>Запуск скрипта:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now davmail
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-на-системном-уровне">&lt;span class="section-num">3.2&lt;/span> Запуск на системном уровне&lt;/h3>
&lt;ul>
&lt;li>Конфигурационный файл: &lt;code>/etc/davmail.properties&lt;/code>.&lt;/li>
&lt;li>Запускается системным init-скриптом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now davmail
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;em>systemd-скрипт&lt;/em> &lt;code>/usr/lib/systemd/system/davmail.service&lt;/code> для запуска:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Unit]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description=Davmail Exchange gateway
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Documentation=http://davmail.sourceforge.net/serversetup.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Documentation=http://davmail.sourceforge.net/advanced.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Documentation=http://davmail.sourceforge.net/sslsetup.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">After=network.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Service]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type=simple
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User=davmail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PermissionsStartOnly=true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStartPre=/usr/bin/touch /var/log/davmail.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStartPre=/bin/chown davmail:davmail /var/log/davmail.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStart=/usr/bin/davmail -server /etc/davmail.properties
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SuccessExitStatus=143
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Restart=on-failure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Install]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WantedBy=multi-user.target
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="параметры-настройки">&lt;span class="section-num">4&lt;/span> Параметры настройки&lt;/h2>
&lt;h3 id="протокол-exchange">&lt;span class="section-num">4.1&lt;/span> Протокол Exchange&lt;/h3>
&lt;ul>
&lt;li>Параметр: &lt;code>davmail.mode&lt;/code>.&lt;/li>
&lt;li>&lt;code>O365Modern&lt;/code> : Современная проверка подлинности Office 365 (Oauth2).&lt;/li>
&lt;li>&lt;code>O365Interactive&lt;/code> : Современная проверка подлинности Office 365 с интерактивным окном браузера:
&lt;ul>
&lt;li>недоступно в автономном режиме (headless mode);&lt;/li>
&lt;li>требуется OpenJFX.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>O365Manual&lt;/code> : Современная проверка подлинности Office 365 с интерактивным диалогом:
&lt;ul>
&lt;li>недоступно в автономном режиме (headless mode).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>O365&lt;/code> : EWS режим Office 365.&lt;/li>
&lt;li>&lt;code>EWS&lt;/code> : Exchange 2007 и более поздние версии.&lt;/li>
&lt;li>&lt;code>WebDav&lt;/code> : Exchange 2007 и более ранний с режимом WebDav.&lt;/li>
&lt;li>&lt;code>Auto&lt;/code> : Автоматический режим WebDav с переключением в режим &lt;code>EWS&lt;/code> при ошибке.&lt;/li>
&lt;/ul>
&lt;h3 id="url-адрес-owa">&lt;span class="section-num">4.2&lt;/span> URL-адрес OWA&lt;/h3>
&lt;ul>
&lt;li>Параметр: &lt;code>davmail.url&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">davmail.url=https://outlook.office365.com/EWS/Exchange.asmx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>URL-адрес Outlook Web Access для доступа к серверу Exchange.&lt;/li>
&lt;li>&lt;code>https://outlook.office365.com/EWS/Exchange.asmx&lt;/code> : значение по умолчанию для Office 365;&lt;/li>
&lt;li>&lt;code>https://Your.Exchange.Server/EWS/Exchange.asmx&lt;/code> : для своего Exchange-сервера.&lt;/li>
&lt;li>Значение зависит от версии Microsoft Exchange.&lt;/li>
&lt;/ul>
&lt;h3 id="порты">&lt;span class="section-num">4.3&lt;/span> Порты&lt;/h3>
&lt;ul>
&lt;li>Значение локальных портов обычно равно стандартному порту + 1000:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">davmail.smtpPort=1025
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">davmail.imapPort=1143
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">davmail.popPort=1110
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">davmail.ldapPort=1389
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">davmail.caldavPort=1080
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурирование">&lt;span class="section-num">5&lt;/span> Конфигурирование&lt;/h2>
&lt;h3 id="протокол-o365modern">&lt;span class="section-num">5.1&lt;/span> Протокол &lt;code>O365Modern&lt;/code>&lt;/h3>
&lt;ul>
&lt;li>Для настройки используйте &lt;code>O365Interactive&lt;/code> или &lt;code>O365Manual&lt;/code>.&lt;/li>
&lt;li>Для работы используйте &lt;code>O365Modern&lt;/code>.&lt;/li>
&lt;li>При запуске в режиме &lt;code>O365Interactive&lt;/code> откроется окно с web-ссылкой и полем для заполнения.
&lt;ul>
&lt;li>Перейдите по ней и разрешите приложению доступ.&lt;/li>
&lt;li>После этого откроется пустое окно.&lt;/li>
&lt;li>Адресную строку из этого окна перенесите в поле в исходном окне.&lt;/li>
&lt;li>Сохраните конфигурацию.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Научная школа. Возможные инновации</title><link>https://yamadharma.github.io/ru/post/2022/04/07/scientific-school-possible-innovations/</link><pubDate>Thu, 07 Apr 2022 13:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/07/scientific-school-possible-innovations/</guid><description>&lt;p>Возможные инновации по результатам исследований.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#возможные-направления-инноваций">&lt;span class="section-num">1&lt;/span> Возможные направления инноваций&lt;/a>&lt;/li>
&lt;li>&lt;a href="#расчёт-оптических-приборов">&lt;span class="section-num">2&lt;/span> Расчёт оптических приборов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#технологии-devops">&lt;span class="section-num">3&lt;/span> Технологии DevOps&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="возможные-направления-инноваций">&lt;span class="section-num">1&lt;/span> Возможные направления инноваций&lt;/h2>
&lt;ul>
&lt;li>Расчёт оптических приборов.&lt;/li>
&lt;li>Управление сетевой инфраструктурой организации.&lt;/li>
&lt;li>Управление компьютерной инфраструктурой организации.&lt;/li>
&lt;/ul>
&lt;h2 id="расчёт-оптических-приборов">&lt;span class="section-num">2&lt;/span> Расчёт оптических приборов&lt;/h2>
&lt;ul>
&lt;li>Расчёт сложных оптических приборов:
&lt;ul>
&lt;li>определение параметров приборов по заданному необходимому пути лучей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В зависимости от длины волны излучения можно использовать в разных областях:
&lt;ul>
&lt;li>волноводные структуры;&lt;/li>
&lt;li>управление распространением электромагнитного излучения.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Методика построения суррогатных моделей для моделирования свойств сложных оптических систем.&lt;/li>
&lt;/ul>
&lt;h2 id="технологии-devops">&lt;span class="section-num">3&lt;/span> Технологии DevOps&lt;/h2>
&lt;ul>
&lt;li>Мы можем предложить широкий спектр консалтинговых услуг по следующим направлениям:
&lt;ul>
&lt;li>миграция программного обеспечения организации с проприетарного на свободно программное обеспечение (например, Windows -&amp;gt; Linux);&lt;/li>
&lt;li>управление и мониторинг сетевой инфраструктуры на основе свободного программного обеспечения;&lt;/li>
&lt;li>управление и мониторинг компьютерной инфраструктуры на основе свободного программного обеспечения;&lt;/li>
&lt;li>миграция сетевых каталогов на свободное программное обеспечение;&lt;/li>
&lt;li>миграция облачной инфраструктуры иностранных провайдеров в локальную облачную инфраструктуру организации;&lt;/li>
&lt;li>перевод офисной инфраструктуры на технологию documentation-as-code.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>rofi-pass</title><link>https://yamadharma.github.io/ru/post/2022/04/03/rofi-pass/</link><pubDate>Sun, 03 Apr 2022 19:11:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/03/rofi-pass/</guid><description>&lt;p>Скрипт bash для работы с менеджером паролей &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>), используя интерфейс &lt;em>rofi&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/19/launcher_rofi/">Запуск приложений. Rofi&lt;/a>).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#функциональность">&lt;span class="section-num">3&lt;/span> Функциональность&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#поиск-файла-конфигурации">&lt;span class="section-num">4.1&lt;/span> Поиск файла конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#стандартные-сочетания-клавиш">&lt;span class="section-num">4.2&lt;/span> Стандартные сочетания клавиш&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#интеграция-с-графическим-окружением">&lt;span class="section-num">5&lt;/span> Интеграция с графическим окружением&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#i3wm">&lt;span class="section-num">5.1&lt;/span> i3wm&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Интеграция &lt;em>pass&lt;/em> с &lt;em>rofi&lt;/em>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/carnager/rofi-pass" target="_blank" rel="noopener">https://github.com/carnager/rofi-pass&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Установка
&lt;ul>
&lt;li>
&lt;p>Gentoo&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge x11-misc/rofi-pass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Находится в репозитории &lt;a href="https://gpo.zugaina.org/Overlays/winny" target="_blank" rel="noopener">winny&lt;/a>.&lt;/li>
&lt;li>Добавить репозиторий:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">layman -a winny
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="функциональность">&lt;span class="section-num">3&lt;/span> Функциональность&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Открытие URL-адреса записей с помощью горячих клавиш.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Добавление новых записей в хранилище паролей.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Редактирование существующих записей.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Создание новых паролей для записей.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Перемещение/удаление существующих записей.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Поддержка нескольких хранилищ паролей.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Автозаполнение полей пользователя и/или пароля.&lt;/p>
&lt;ul>
&lt;li>Формат файлов паролей должен быть следующим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">foobarmysecurepassword
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user: MyUser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">url: http://my.url.foo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Автоматический ввод имени пользователя на основе пути файла пароля.&lt;/p>
&lt;ul>
&lt;li>Структура хранилища паролей должна быть следующей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">foo/bar/site.com/username
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Нужно установить &lt;code>default-autotype&lt;/code> в &lt;code>path :tab pass&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Автоматический ввод более одного поля с использованием записи &lt;code>autotype&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">foobarmysecurepassword
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user: MyUser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SomeField: foobar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AnotherField: barfoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">url: http://my.url.foo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">autotype: SomeField :tab user :tab AnotherField :tab pass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Используются флаги: &lt;code>:tab&lt;/code>, &lt;code>:enter&lt;/code>, &lt;code>:space&lt;/code>, &lt;code>:otp&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Генерация одноразовых паролей.&lt;/p>
&lt;ul>
&lt;li>Формат одноразовых паролей должен быть совместим с &lt;code>pass-otp&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[...]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">otpauth://[...]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно задать метод генерации одноразовых паролей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[...]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">otp_method: /opt/obscure-otp-generator/oog --some-option some args
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Поле &lt;code>:delay&lt;/code> вызывает задержку (по умолчанию 2 секунды).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Все горячие клавиши настраиваются в конфигурационном файле.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Имена полей &lt;code>user&lt;/code>, &lt;code>url&lt;/code>, &lt;code>autotype&lt;/code> можно настраивать.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="поиск-файла-конфигурации">&lt;span class="section-num">4.1&lt;/span> Поиск файла конфигурации&lt;/h3>
&lt;ul>
&lt;li>Конфигурации считывается в следующем порядке:
&lt;ul>
&lt;li>переменная среды &lt;code>ROFI_PASS_CONFIG&lt;/code>;&lt;/li>
&lt;li>&lt;code>$HOME/.config/rofi-pass/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/rofi-pass.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Загружается только первый найденный файл.&lt;/li>
&lt;li>Если файл конфигурации не существует, используются значения по умолчанию.&lt;/li>
&lt;li>Возможно установить переменную среды при запуске:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ROFI_PASS_CONFIG&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/path/to/config&amp;#34;&lt;/span> rofi-pass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="стандартные-сочетания-клавиш">&lt;span class="section-num">4.2&lt;/span> Стандартные сочетания клавиш&lt;/h3>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Сочетания клавиш для &lt;i>rofi-pass&lt;/i>
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Команда&lt;/th>
&lt;th>Сочетание клавиш&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>autotype&lt;/td>
&lt;td>&lt;code>Alt+1&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>type_user&lt;/td>
&lt;td>&lt;code>Alt+2&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>type_pass&lt;/td>
&lt;td>&lt;code>Alt+3&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>open_url&lt;/td>
&lt;td>&lt;code>Alt+4&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy_name&lt;/td>
&lt;td>&lt;code>Alt+u&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy_url&lt;/td>
&lt;td>&lt;code>Alt+l&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy_pass&lt;/td>
&lt;td>&lt;code>Alt+p&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show&lt;/td>
&lt;td>&lt;code>Alt+o&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy_entry&lt;/td>
&lt;td>&lt;code>Alt+2&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>type_entry&lt;/td>
&lt;td>&lt;code>Alt+1&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy_menu&lt;/td>
&lt;td>&lt;code>Alt+c&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>action_menu&lt;/td>
&lt;td>&lt;code>Alt+a&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>type_menu&lt;/td>
&lt;td>&lt;code>Alt+t&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>help&lt;/td>
&lt;td>&lt;code>Alt+h&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch&lt;/td>
&lt;td>&lt;code>Alt+x&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>insert_pass&lt;/td>
&lt;td>&lt;code>Alt+n&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="интеграция-с-графическим-окружением">&lt;span class="section-num">5&lt;/span> Интеграция с графическим окружением&lt;/h2>
&lt;h3 id="i3wm">&lt;span class="section-num">5.1&lt;/span> i3wm&lt;/h3>
&lt;ul>
&lt;li>Можно добавить в конфигурационный файл вызов &lt;em>rofi-pass&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym $mod+p exec &amp;#34;rofi-pass&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Neotree</title><link>https://yamadharma.github.io/ru/post/2022/03/23/emacs-neotree/</link><pubDate>Wed, 23 Mar 2022 18:52:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/03/23/emacs-neotree/</guid><description>&lt;p>Плагин к Emacs для отображения дерева каталогов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">2&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#темы-neotree">&lt;span class="section-num">2.1&lt;/span> Темы &lt;em>NeoTree&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сочетания-клавиш">&lt;span class="section-num">2.2&lt;/span> Сочетания клавиш&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отслеживание-каталога">&lt;span class="section-num">2.3&lt;/span> Отслеживание каталога&lt;/a>&lt;/li>
&lt;li>&lt;a href="#взаимодействие-с-projectile">&lt;span class="section-num">2.4&lt;/span> Взаимодействие с &lt;em>projectile&lt;/em>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>&lt;em>Neotree&lt;/em> основан на идее NerdTree для Vim.&lt;/li>
&lt;li>Отображает дерево каталогов в боковой панели.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/jaypei/emacs-neotree" target="_blank" rel="noopener">https://github.com/jaypei/emacs-neotree&lt;/a>&lt;/li>
&lt;li>Wiki: &lt;a href="https://www.emacswiki.org/emacs/NeoTree" target="_blank" rel="noopener">https://www.emacswiki.org/emacs/NeoTree&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">2&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="темы-neotree">&lt;span class="section-num">2.1&lt;/span> Темы &lt;em>NeoTree&lt;/em>&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Можно изменить тему NeoTree, используя переменную &lt;code>neo-theme&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Значение по умолчанию &lt;code>classic&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Используйте &lt;code>nerd&lt;/code>, если хотите, чтобы он больше всего походил на NERDTree в VIM.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Для настройки следует установить переменную &lt;code>neo-theme&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">neo-theme&lt;/span> &lt;span class="ss">&amp;#39;icons&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1&lt;/span>:
Параметры темы NeoTree
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Параметр&lt;/th>
&lt;th>Описание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>classic&lt;/td>
&lt;td>Использование иконок для отображения элементов&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ascii&lt;/td>
&lt;td>Использование символов &lt;code>x&lt;/code>, &lt;code>-&lt;/code> для отображения каталогов&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>arrow&lt;/td>
&lt;td>Использование стрелок Юникод&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>icons&lt;/td>
&lt;td>Использование пакета &lt;code>all-the-icons&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nerd&lt;/td>
&lt;td>Использование режима отступов и стрелкок как в NERDTree&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="сочетания-клавиш">&lt;span class="section-num">2.2&lt;/span> Сочетания клавиш&lt;/h3>
&lt;ul>
&lt;li>Сочетания работают только в буфере &lt;em>NeoTree&lt;/em>&lt;/li>
&lt;/ul>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 2&lt;/span>:
Сочетания клавиш NeoTree
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Клавиши&lt;/th>
&lt;th>Значение&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>n&lt;/code>&lt;/td>
&lt;td>следующая строка&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>p&lt;/code>&lt;/td>
&lt;td>предыдущая строка&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>SPC&lt;/code> или &lt;code>RET&lt;/code> или &lt;code>TAB&lt;/code>&lt;/td>
&lt;td>Открыть текущий элемент, если это файл. Свернуть/развернуть текущий элемент, если это каталог&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>U&lt;/code>&lt;/td>
&lt;td>Перейти вверх по каталогу&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>g&lt;/code>&lt;/td>
&lt;td>Обновить&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>A&lt;/code>&lt;/td>
&lt;td>Развернуть/свернуть окно NeoTree&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>H&lt;/code>&lt;/td>
&lt;td>Переключить отображение скрытых файлов&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>O&lt;/code>&lt;/td>
&lt;td>Рекурсивно открыть каталог&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>C-c&lt;/code> &lt;code>C-n&lt;/code>&lt;/td>
&lt;td>Создайте файл или создайте каталог, если имя файла заканчивается на &lt;code>/&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>C-c&lt;/code> &lt;code>C-d&lt;/code>&lt;/td>
&lt;td>Удалить файл или каталог&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>C-c&lt;/code> &lt;code>C-r&lt;/code>&lt;/td>
&lt;td>Переименуйте файл или каталог&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>C-c&lt;/code> &lt;code>C-c&lt;/code>&lt;/td>
&lt;td>Измените корневой каталог&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>C-c&lt;/code> &lt;code>C-p&lt;/code>&lt;/td>
&lt;td>Скопируйте файл или каталог&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="отслеживание-каталога">&lt;span class="section-num">2.3&lt;/span> Отслеживание каталога&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Каждый раз при открытии окна &lt;em>neotree&lt;/em> фокус переходит на текущий файл:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">neo-smart-open&lt;/span> &lt;span class="no">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="взаимодействие-с-projectile">&lt;span class="section-num">2.4&lt;/span> Взаимодействие с &lt;em>projectile&lt;/em>&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Переключение на корень проекта при открытии:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">defun&lt;/span> &lt;span class="nv">neotree-project-dir&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Open NeoTree using the git root.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">interactive&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">let&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nv">project-dir&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">projectile-project-root&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">file-name&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">buffer-file-name&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">neotree-toggle&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">if&lt;/span> &lt;span class="nv">project-dir&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">neo-global--window-exists-p&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">progn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">neotree-dir&lt;/span> &lt;span class="nv">project-dir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">neotree-find&lt;/span> &lt;span class="nv">file-name&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">message&lt;/span> &lt;span class="s">&amp;#34;Could not find git project root.&amp;#34;&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nv">global-set-key&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">f8&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="ss">&amp;#39;neotree-project-dir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Закачка с youtube</title><link>https://yamadharma.github.io/ru/post/2022/03/09/download-youtube/</link><pubDate>Wed, 09 Mar 2022 17:38:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/03/09/download-youtube/</guid><description>&lt;p>Возникла задача скопировать видео с Youtube. Основная часть содержимого &amp;mdash; это мои видеозаписи для преподавания.
Для этой задачи я использовал &lt;code>yt-dlp&lt;/code>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">2.1&lt;/span> Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">2.2&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#примеры-использования">&lt;span class="section-num">3&lt;/span> Примеры использования&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#скачавание-видео-с-youtube">&lt;span class="section-num">3.1&lt;/span> Скачавание видео с Youtube&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скачать-только-аудио-дорожку">&lt;span class="section-num">3.2&lt;/span> Скачать только аудио-дорожку&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скачивание-своего-общедоступного-видео-с-youtube">&lt;span class="section-num">3.3&lt;/span> Скачивание своего общедоступного видео с Youtube&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#постановка-задачи">&lt;span class="section-num">3.3.1&lt;/span> Постановка задачи&lt;/a>&lt;/li>
&lt;li>&lt;a href="#решение">&lt;span class="section-num">3.3.2&lt;/span> Решение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конфигурационный-файл">&lt;span class="section-num">4&lt;/span> Конфигурационный файл&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener">https://github.com/yt-dlp/yt-dlp&lt;/a>&lt;/li>
&lt;li>Является продвинутым форком &lt;code>youtube-dl&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="linux">&lt;span class="section-num">2.1&lt;/span> Linux&lt;/h3>
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>Установка &lt;code>yt-dlp&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge net-misc/yt-dlp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка в режиме совместимости с &lt;code>youtube-dl&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">USE&lt;/span>&lt;span class="o">=&lt;/span>yt-dlp emerge net-misc/youtube-dl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="windows">&lt;span class="section-num">2.2&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>C использованием &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install yt-dlp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="примеры-использования">&lt;span class="section-num">3&lt;/span> Примеры использования&lt;/h2>
&lt;h3 id="скачавание-видео-с-youtube">&lt;span class="section-num">3.1&lt;/span> Скачавание видео с Youtube&lt;/h3>
&lt;ul>
&lt;li>Просто указывается линк на скачиваемое видео:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yt-dlp &amp;lt;url&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="скачать-только-аудио-дорожку">&lt;span class="section-num">3.2&lt;/span> Скачать только аудио-дорожку&lt;/h3>
&lt;ul>
&lt;li>Опция &lt;code>-x&lt;/code> используется для загрузки только аудио (требуется &lt;em>FFmpeg&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">youtube-dl -x -f bestaudio &amp;lt;url&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="скачивание-своего-общедоступного-видео-с-youtube">&lt;span class="section-num">3.3&lt;/span> Скачивание своего общедоступного видео с Youtube&lt;/h3>
&lt;h4 id="постановка-задачи">&lt;span class="section-num">3.3.1&lt;/span> Постановка задачи&lt;/h4>
&lt;ul>
&lt;li>Видео добавлены в плейлисты по темам.&lt;/li>
&lt;li>Есть ссылки на чужие видео.&lt;/li>
&lt;li>Скачать нужно только своё общедоступное видео.&lt;/li>
&lt;li>Следует сохранить порядок расположения видео в плейлистах.&lt;/li>
&lt;/ul>
&lt;h4 id="решение">&lt;span class="section-num">3.3.2&lt;/span> Решение&lt;/h4>
&lt;ul>
&lt;li>&lt;code>%(playlist)s&lt;/code> : будем сортировать виде по плейлистам.&lt;/li>
&lt;li>&lt;code>%(playlist_index)s&lt;/code> : будем сохранять номер видео в плейлисте.&lt;/li>
&lt;li>&lt;code>%(title)s.%(ext)s&lt;/code> : будем сохранять видео с его названием.&lt;/li>
&lt;li>&lt;code>--write-comments&lt;/code> : будем сохранять всю дополнительную информацию в отдельный файл формата &lt;code>json&lt;/code>.&lt;/li>
&lt;li>&lt;code>--match-filter &amp;quot;uploader = 'Dmitry Kulyabov'&amp;quot;&lt;/code> : будем скачивать только те видео, который загрузили мы сами.&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Итоговый скрипт&lt;/p>
&lt;ul>
&lt;li>Итоговый скрипт будет иметь следующий вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yt-dlp -o &lt;span class="s2">&amp;#34;%(uploader)s/%(playlist)s/%(playlist_index)s - %(title)s.%(ext)s&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;https://www.youtube.com/user/&amp;lt;youtube user name&amp;gt;/playlists&amp;#34;&lt;/span> --write-comments --match-filter &lt;span class="s2">&amp;#34;uploader = &amp;#39;Dmitry Kulyabov&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="конфигурационный-файл">&lt;span class="section-num">4&lt;/span> Конфигурационный файл&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Конфигурационный файл служит для заданий опций по умолчанию.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Конфигурационный файл:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">~/.config/yt-dlp/config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Пример содержания конфигурационого файла:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Ignore errors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--ignore-errors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Save in ~/Videos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-o ~/Videos/%(title)s.%(ext)s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Prefer 1080p or lower resolutions, FPS &amp;lt; 60 Hz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-f bestvideo[ext=mp4][height&amp;lt;1200][fps&amp;lt;60]+bestaudio[ext=m4a]/bestvideo[height&amp;lt;1200][fps&amp;lt;60]+bestaudio/best[height&amp;lt;1200][fps&amp;lt;60]/best
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Использование sfdisk</title><link>https://yamadharma.github.io/ru/post/2022/03/08/using-sfdisk/</link><pubDate>Tue, 08 Mar 2022 19:45:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/03/08/using-sfdisk/</guid><description>&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#примеры-использования">&lt;span class="section-num">1&lt;/span> Примеры использования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="примеры-использования">&lt;span class="section-num">1&lt;/span> Примеры использования&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Создать один большой раздел&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;;&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sfdisk /dev/sda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Создать один большой раздел с определённым типом раздела&lt;/p>
&lt;ul>
&lt;li>W95 FAT32 (LBA)
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;,,c;&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sfdisk /dev/sda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>lvm
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;,,8e;&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sfdisk /dev/sdd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Три основных раздела: два по 50 МиБ и третья на всё остальное пространство:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sfdisk /dev/sda &lt;span class="s">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,50MiB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,50MiB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Раздел диспетчера загрузки OS2 размером 1 МБ, раздел DOS размером 50 МБ и три расширенных раздела (DOS D:, подкачка Linux, Linux):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sfdisk /dev/sda &lt;span class="s">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,1MiB,a
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,50MiB,6
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,,E
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,20MiB,4
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,16MiB,S
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Полезные команды&lt;/p>
&lt;ul>
&lt;li>список разделов
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sfdisk -l /dev/sda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>список расширенных разделов
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sfdisk -l -x /dev/sda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>список типов разделов
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sfdisk -T
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Ключи ssh</title><link>https://yamadharma.github.io/ru/post/2022/02/17/ssh-keys/</link><pubDate>Thu, 17 Feb 2022 14:53:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/17/ssh-keys/</guid><description>&lt;p>Создание и работа с ключами ssh.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#алгоритмы-шифрования-ssh">&lt;span class="section-num">1&lt;/span> Алгоритмы шифрования ssh&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#аутентификация">&lt;span class="section-num">1.1&lt;/span> Аутентификация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#отключение-ключей-у-сервера-sshd">&lt;span class="section-num">1.1.1&lt;/span> Отключение ключей у сервера &lt;code>sshd&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-серверных-ключей">&lt;span class="section-num">1.1.2&lt;/span> Создание серверных ключей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-клиентских-ключей">&lt;span class="section-num">1.1.3&lt;/span> Создание клиентских ключей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#симметричные-шифры">&lt;span class="section-num">1.2&lt;/span> Симметричные шифры&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурация-сервера">&lt;span class="section-num">1.2.1&lt;/span> Конфигурация сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-для-клиентов">&lt;span class="section-num">1.2.2&lt;/span> Конфигурация для клиентов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#обмен-ключами">&lt;span class="section-num">1.3&lt;/span> Обмен ключами&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-сервера">&lt;span class="section-num">1.3.1&lt;/span> Настройка сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">1.3.2&lt;/span> Настройка клиента&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файлы-ssh-ключей">&lt;span class="section-num">2&lt;/span> Файлы ssh-ключей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-ключа-ssh">&lt;span class="section-num">3&lt;/span> Создание ключа ssh&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавление-ssh-ключа-в-учётную-запись-github">&lt;span class="section-num">4&lt;/span> Добавление SSH-ключа в учётную запись GitHub&lt;/a>&lt;/li>
&lt;li>&lt;a href="#аутентификации-на-базе-ключей-ssh">&lt;span class="section-num">5&lt;/span> Аутентификации на базе ключей SSH&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#копирование-открытого-ключа-на-удалённый-хост-с-использованием-ssh-copy-id">&lt;span class="section-num">5.1&lt;/span> Копирование открытого ключа на удалённый хост с использованием &lt;code>ssh-copy-id&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копирование-открытого-ключа-с-помощью-ssh">&lt;span class="section-num">5.2&lt;/span> Копирование открытого ключа с помощью SSH&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="алгоритмы-шифрования-ssh">&lt;span class="section-num">1&lt;/span> Алгоритмы шифрования ssh&lt;/h2>
&lt;h3 id="аутентификация">&lt;span class="section-num">1.1&lt;/span> Аутентификация&lt;/h3>
&lt;p>В SSH поддерживается четыре алгоритма аутентификации по открытым ключам:&lt;/p>
&lt;ul>
&lt;li>DSA,
&lt;ul>
&lt;li>размер ключей DSA не может превышать 1024, его следует отключить&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>RSA
&lt;ul>
&lt;li>следует создавать ключ большого размера: 4096 бит&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ECDSA
&lt;ul>
&lt;li>ECDSA завязан на технологиях NIST, его следует отключить&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Ed25519
&lt;ul>
&lt;li>используется пока не везде&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="отключение-ключей-у-сервера-sshd">&lt;span class="section-num">1.1.1&lt;/span> Отключение ключей у сервера &lt;code>sshd&lt;/code>&lt;/h4>
&lt;ul>
&lt;li>Ключи отключаются у сервера.&lt;/li>
&lt;li>Если просто удалить ключ, он будет повторно создан при перезапуске демона.
&lt;ul>
&lt;li>Можно воспользоваться обходным путём с создать заведомо нерабочую символическую ссылку, которая помешает создать и использовать ключ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /etc/ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm ssh_host_ecdsa_key*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s ssh_host_ecdsa_key ssh_host_ecdsa_key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm ssh_host_dsa_key*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s ssh_host_dsa_key ssh_host_dsa_key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm ssh_host_key*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s ssh_host_key ssh_host_key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="создание-серверных-ключей">&lt;span class="section-num">1.1.2&lt;/span> Создание серверных ключей&lt;/h4>
&lt;ul>
&lt;li>Для RSA следует создать ключ большего размера:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /etc/ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm ssh_host_rsa_key*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-keygen -t rsa -b &lt;span class="m">4096&lt;/span> -f ssh_host_rsa_key &amp;lt; /dev/null
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="создание-клиентских-ключей">&lt;span class="section-num">1.1.3&lt;/span> Создание клиентских ключей&lt;/h4>
&lt;ul>
&lt;li>Для создания клиентских ключей лучше использовать команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -t ed25519
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-keygen -t rsa -b &lt;span class="m">4096&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="симметричные-шифры">&lt;span class="section-num">1.2&lt;/span> Симметричные шифры&lt;/h3>
&lt;ul>
&lt;li>Из 15 поддерживаемых в SSH алгоритмов симметричного шифрования, безопасными можно считать:
&lt;ul>
&lt;li>&lt;code>chacha20-poly1305&lt;/code>;&lt;/li>
&lt;li>&lt;code>aes*-ctr&lt;/code>;&lt;/li>
&lt;li>&lt;code>aes*-gcm&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Шифры &lt;code>3des-cbc&lt;/code> и &lt;code>arcfour&lt;/code> потенциально уязвимы в силу использования DES и RC4.&lt;/li>
&lt;li>Шифр &lt;code>cast128-cbc&lt;/code> применяет слишком короткий размер блока (64 бит).&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация-сервера">&lt;span class="section-num">1.2.1&lt;/span> Конфигурация сервера&lt;/h4>
&lt;ul>
&lt;li>В &lt;code>/etc/ssh/sshd_config&lt;/code> рекомендуется добавить:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Ciphers aes256-gcm@openssh.com,aes128-gcm@openssh.com,chacha20-poly1305@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация-для-клиентов">&lt;span class="section-num">1.2.2&lt;/span> Конфигурация для клиентов&lt;/h4>
&lt;ul>
&lt;li>В &lt;code>/etc/ssh/ssh_config&lt;/code> рекомендуется добавить:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Ciphers aes256-gcm@openssh.com,aes128-gcm@openssh.com,chacha20-poly1305@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="обмен-ключами">&lt;span class="section-num">1.3&lt;/span> Обмен ключами&lt;/h3>
&lt;ul>
&lt;li>Применяемые в SSH методы обмена ключей DH (Diffie-Hellman) и ECDH (Elliptic Curve Diffie-Hellman) можно считать безопасными.&lt;/li>
&lt;li>Из 8 поддерживаемых в SSH протоколов обмена ключами вызывают подозрения три, основанные на рекомендациях NIST:
&lt;ul>
&lt;li>&lt;code>ecdh-sha2-nistp256&lt;/code>;&lt;/li>
&lt;li>&lt;code>ecdh-sha2-nistp384&lt;/code>;&lt;/li>
&lt;li>&lt;code>ecdh-sha2-nistp521&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Не стоит использовать протоколы, основанные на &lt;em>SHA1&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-сервера">&lt;span class="section-num">1.3.1&lt;/span> Настройка сервера&lt;/h4>
&lt;ul>
&lt;li>В &lt;code>/etc/ssh/sshd_config&lt;/code> рекомендуется указать:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-клиента">&lt;span class="section-num">1.3.2&lt;/span> Настройка клиента&lt;/h4>
&lt;ul>
&lt;li>В &lt;code>/etc/ssh/ssh_config&lt;/code> рекомендуется добавить
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="файлы-ssh-ключей">&lt;span class="section-num">2&lt;/span> Файлы ssh-ключей&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>По умолчанию пользовательские ssh-ключи сохраняются в каталоге &lt;code>~/.ssh&lt;/code> в домашнем каталоге пользователя.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Убедитесь, что у вас ещё нет ключа.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Файлы закрытых ключей имеют названия типа &lt;code>id_&amp;lt;алгоритм&amp;gt;&lt;/code> (например, &lt;code>id_dsa&lt;/code>, &lt;code>id_rsa&lt;/code>).&lt;/p>
&lt;ul>
&lt;li>По умолчанию закрытые ключи имеют имена:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">id_dsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_ecdsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_ed25519
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Открытые ключи имеют дополнительные расширения &lt;code>.pub&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>По умолчанию публичные ключи имеют имена:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">id_dsa.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_ecdsa.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_ed25519.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_rsa.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="создание-ключа-ssh">&lt;span class="section-num">3&lt;/span> Создание ключа ssh&lt;/h2>
&lt;ul>
&lt;li>Ключ ssh создаётся командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -t &amp;lt;алгоритм&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте ключи:
&lt;ul>
&lt;li>по алгоритму &lt;em>rsa&lt;/em> с ключём размером 4096 бит:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -t rsa -b &lt;span class="m">4096&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>по алгоритму &lt;em>ed25519&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -t ed25519
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>При создании ключа команда попросит ввести любую ключевую фразу для более надёжной защиты вашего пароля. Можно пропустить этот этап, нажав &lt;code>Enter&lt;/code>.&lt;/li>
&lt;li>Сменить пароль на ключ можно с помощью команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="добавление-ssh-ключа-в-учётную-запись-github">&lt;span class="section-num">4&lt;/span> Добавление SSH-ключа в учётную запись GitHub&lt;/h2>
&lt;ul>
&lt;li>Скопируйте созданный SSH-ключ в буфер обмена командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">xclip -i &amp;lt; ~/.ssh/id_ed25519.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Откройте настройки своего аккаунта на GitHub и перейдем в раздел &lt;code>SSH and GPC keys&lt;/code>.&lt;/li>
&lt;li>Нажмите кнопку &lt;code>New SSH key&lt;/code>.&lt;/li>
&lt;li>Добавьте в поле &lt;code>Title&lt;/code> название этого ключа, например, &lt;code>ed25519@&amp;lt;hostname&amp;gt;&lt;/code>.&lt;/li>
&lt;li>Вставьте из буфера обмена в поле &lt;code>Key&lt;/code> ключ.&lt;/li>
&lt;li>Нажмите кнопку &lt;code>Add SSH key&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="аутентификации-на-базе-ключей-ssh">&lt;span class="section-num">5&lt;/span> Аутентификации на базе ключей SSH&lt;/h2>
&lt;ul>
&lt;li>При аутентификации по ключу можно войти на удалённый хост без пароля учетной записи для удаленного хоста.&lt;/li>
&lt;li>На удалённом хосте для сервера ssh долен быть настроен вход по ключу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Should we allow Pubkey (SSH version 2) authentication?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PubkeyAuthentication yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Where do we look for authorized public keys?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># If it doesn&amp;#39;t start with a slash, then it is
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># relative to the user&amp;#39;s home directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthorizedKeysFile .ssh/authorized_keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="копирование-открытого-ключа-на-удалённый-хост-с-использованием-ssh-copy-id">&lt;span class="section-num">5.1&lt;/span> Копирование открытого ключа на удалённый хост с использованием &lt;code>ssh-copy-id&lt;/code>&lt;/h3>
&lt;ul>
&lt;li>Скопируйте на удалённый хост открытый ключ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-copy-id username@remote_host
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="копирование-открытого-ключа-с-помощью-ssh">&lt;span class="section-num">5.2&lt;/span> Копирование открытого ключа с помощью SSH&lt;/h3>
&lt;ul>
&lt;li>Можно загрузить на удалённый хост ключи с помощью стандартного метода SSH:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cat ~/.ssh/id_rsa.pub &lt;span class="p">|&lt;/span> ssh username@remote_host &lt;span class="s2">&amp;#34;mkdir -p ~/.ssh &amp;amp;&amp;amp; cat &amp;gt;&amp;gt; ~/.ssh/authorized_keys&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Linutop Kiosk</title><link>https://yamadharma.github.io/ru/post/2022/02/15/linutop-kiosk/</link><pubDate>Tue, 15 Feb 2022 12:39:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/15/linutop-kiosk/</guid><description>&lt;ul>
&lt;li>Фирма Linutop выпускает MiniPC на ARM.&lt;/li>
&lt;li>Кроме того, собирает под них дистрибутивы Linux: Linutop OS, Linutop Kiosk и Linutop.TV.&lt;/li>
&lt;li>Это один из немногих дистрибутивов для киосков, собранный для ARM.&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#поддерживаемые-архитектуры">&lt;span class="section-num">1.1&lt;/span> Поддерживаемые архитектуры&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.linutop.com/software.en.html" target="_blank" rel="noopener">https://www.linutop.com/software.en.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="поддерживаемые-архитектуры">&lt;span class="section-num">1.1&lt;/span> Поддерживаемые архитектуры&lt;/h3>
&lt;ul>
&lt;li>x86&lt;/li>
&lt;li>x86_64&lt;/li>
&lt;li>ARM (Raspberry Pi: Zero, A, A+ ,B, B+, 2, 3).&lt;/li>
&lt;/ul></description></item><item><title>Porteus Kiosk</title><link>https://yamadharma.github.io/ru/post/2022/02/15/porteus-kiosk/</link><pubDate>Tue, 15 Feb 2022 11:36:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/15/porteus-kiosk/</guid><description>&lt;p>&lt;em>Porteus Kiosk&lt;/em> &amp;mdash; дистрибутив Linux, реализующий режим киоска (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/02/15/kiosk-mode/">Режим киоска&lt;/a>).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#поддерживаемые-архитектуры">&lt;span class="section-num">1.1&lt;/span> Поддерживаемые архитектуры&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#структура-дистрибутива">&lt;span class="section-num">2&lt;/span> Структура дистрибутива&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#модульная-структура">&lt;span class="section-num">2.1&lt;/span> Модульная структура&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#видео">&lt;span class="section-num">3&lt;/span> Видео&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурация-на-сервере">&lt;span class="section-num">3.1&lt;/span> Конфигурация на сервере&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3.2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование-после-установки">&lt;span class="section-num">3.3&lt;/span> Использование после установки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удалённый-доступ">&lt;span class="section-num">3.4&lt;/span> Удалённый доступ&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://porteus-kiosk.org/" target="_blank" rel="noopener">http://porteus-kiosk.org/&lt;/a>&lt;/li>
&lt;li>Есть централизованные платные сервисы.&lt;/li>
&lt;/ul>
&lt;h3 id="поддерживаемые-архитектуры">&lt;span class="section-num">1.1&lt;/span> Поддерживаемые архитектуры&lt;/h3>
&lt;ul>
&lt;li>Поддерживается только архитектура &lt;em>x86_64&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h2 id="структура-дистрибутива">&lt;span class="section-num">2&lt;/span> Структура дистрибутива&lt;/h2>
&lt;h3 id="модульная-структура">&lt;span class="section-num">2.1&lt;/span> Модульная структура&lt;/h3>
&lt;ul>
&lt;li>Часть программного обеспечения реализовано в виде модулей.&lt;/li>
&lt;li>Можно собирать собственный вариант дистрибутива с необходимыми модулями.&lt;/li>
&lt;li>Список модулей:
&lt;ul>
&lt;li>Citrix Receiver.&lt;/li>
&lt;li>Дополнительные шрифты.&lt;/li>
&lt;li>Поддержка печати для локальных и сетевых принтеров.&lt;/li>
&lt;li>Поддержка загрузки по PXE.&lt;/li>
&lt;li>Службы SSH и VNC для удалённого управления и мониторинга киоска&lt;/li>
&lt;li>Поддержка UEFI.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="видео">&lt;span class="section-num">3&lt;/span> Видео&lt;/h2>
&lt;h3 id="конфигурация-на-сервере">&lt;span class="section-num">3.1&lt;/span> Конфигурация на сервере&lt;/h3>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/3FmzjSAVHuc" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h3 id="установка">&lt;span class="section-num">3.2&lt;/span> Установка&lt;/h3>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/gWEFRG4mOl4" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h3 id="использование-после-установки">&lt;span class="section-num">3.3&lt;/span> Использование после установки&lt;/h3>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/TCykM713AjA" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h3 id="удалённый-доступ">&lt;span class="section-num">3.4&lt;/span> Удалённый доступ&lt;/h3>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/ZAA-ftK5eA0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div></description></item><item><title>Режим киоска</title><link>https://yamadharma.github.io/ru/post/2022/02/15/kiosk-mode/</link><pubDate>Tue, 15 Feb 2022 11:14:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/15/kiosk-mode/</guid><description>&lt;ul>
&lt;li>&lt;em>Режим киоска&lt;/em> &amp;mdash; особый режим работы компьютера с ограниченной функциональностью.&lt;/li>
&lt;li>Особенно распространены так называемые интернет-киоски (Internet kiosk) и цифровые вывески (digital signage).&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#функции-режима-киоска">&lt;span class="section-num">1&lt;/span> Функции режима киоска&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="функции-режима-киоска">&lt;span class="section-num">1&lt;/span> Функции режима киоска&lt;/h2>
&lt;ul>
&lt;li>Блокируются системные комбинации клавиш (&lt;code>Control&lt;/code> + &lt;code>Alt&lt;/code> + &lt;code>Delete&lt;/code>, &lt;code>Alt&lt;/code> + &lt;code>Tab&lt;/code> и др.).&lt;/li>
&lt;li>При использовании броузера:
&lt;ul>
&lt;li>блокируется меню броузера,&lt;/li>
&lt;li>фильтруется возможность ввода URL (белый или чёрный список),&lt;/li>
&lt;li>можно скрывать адресную строку,&lt;/li>
&lt;li>можно блокировать скачивание, печать.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Очистка сессии и возврат на начальный экран по истечении времени неактивности.&lt;/li>
&lt;li>Печать на принтере киоска без вывода окна настроек печати.&lt;/li>
&lt;li>Виртуальная клавиатура может подвергаться адаптации, иметь переключатель языков и возможность ввода спецсимволов.&lt;/li>
&lt;li>Удалённый мониторинг состояния киоска.&lt;/li>
&lt;li>Удалённое обновление программного обеспечения и/или контента.&lt;/li>
&lt;li>Удалённое управление киоском.&lt;/li>
&lt;li>Отключение экрана по расписанию.&lt;/li>
&lt;/ul></description></item><item><title>CentOS 8. Изменение адресов репозиториев</title><link>https://yamadharma.github.io/ru/post/2022/02/10/centos8-changing-repository-addresses/</link><pubDate>Thu, 10 Feb 2022 14:39:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/10/centos8-changing-repository-addresses/</guid><description>&lt;p>С 31 января 2022 года установка пакетов или обновление репозиториев в CentOS8 выдаёт ошибку.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#ошибка">&lt;span class="section-num">1&lt;/span> Ошибка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#причины">&lt;span class="section-num">2&lt;/span> Причины&lt;/a>&lt;/li>
&lt;li>&lt;a href="#устранение">&lt;span class="section-num">3&lt;/span> Устранение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="ошибка">&lt;span class="section-num">1&lt;/span> Ошибка&lt;/h2>
&lt;ul>
&lt;li>При работе с репозиториями в CentOS 8 появилась ошибка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Error: Failed to download metadata &lt;span class="k">for&lt;/span> repo &lt;span class="s1">&amp;#39;repo_name&amp;#39;&lt;/span>: Cannot prepare internal mirrorlist: No URLs in mirrorlist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="причины">&lt;span class="section-num">2&lt;/span> Причины&lt;/h2>
&lt;ul>
&lt;li>31 января 2022 года удалены все пакеты для &lt;em>CentOS8&lt;/em> с официальных зеркал.&lt;/li>
&lt;li>Вызвано прекращением поддержки &lt;em>CentOS8&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/">Замена Centos&lt;/a>).&lt;/li>
&lt;li>Теперь они перенесены на &lt;a href="https://vault.centos.org" target="_blank" rel="noopener">https://vault.centos.org&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="устранение">&lt;span class="section-num">3&lt;/span> Устранение&lt;/h2>
&lt;ul>
&lt;li>Следует обновить файлы описания репозиториев в &lt;code>/etc/yum.repos.d&lt;/code>.&lt;/li>
&lt;li>Следует использовать &lt;code>vault.centos.org&lt;/code> вместо &lt;code>mirror.centos.org&lt;/code>.&lt;/li>
&lt;li>Предлагается выполнить следующие команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo sed -i -e &lt;span class="s2">&amp;#34;s|mirrorlist=|#mirrorlist=|g&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-e &lt;span class="s2">&amp;#34;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-e &lt;span class="s2">&amp;#34;s|\$contentdir|centos|g&amp;#34;&lt;/span> /etc/yum.repos.d/CentOS-*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Тип ключа ssh</title><link>https://yamadharma.github.io/ru/post/2022/02/03/ssh-key-type/</link><pubDate>Thu, 03 Feb 2022 14:48:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/03/ssh-key-type/</guid><description>&lt;p>При подключении по &lt;em>ssh&lt;/em> получаю сообщение &lt;em>no matching host key type found. Their offer: ssh-rsa,ssh-dss&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#описание-ситуации">&lt;span class="section-num">1&lt;/span> Описание ситуации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#решение">&lt;span class="section-num">2&lt;/span> Решение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#однократное-подключение">&lt;span class="section-num">2.1&lt;/span> Однократное подключение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-для-конкретного-хоста">&lt;span class="section-num">2.2&lt;/span> Конфигурация для конкретного хоста&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-для-группы-хостов">&lt;span class="section-num">2.3&lt;/span> Конфигурация для группы хостов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="описание-ситуации">&lt;span class="section-num">1&lt;/span> Описание ситуации&lt;/h2>
&lt;ul>
&lt;li>После перехода на openssh-8.8 при подключении к серверам со старыми версиями системы появляется сообщение типа: &lt;em>no matching host key type found. Their offer: ssh-rsa,ssh-dss&lt;/em>.&lt;/li>
&lt;li>Старый ssh поддерживал механизмы ssh-rsa и ssh-dss, а в новой версии их отключили.&lt;/li>
&lt;/ul>
&lt;h2 id="решение">&lt;span class="section-num">2&lt;/span> Решение&lt;/h2>
&lt;ul>
&lt;li>Будем считать, что мы подключаемся к хосту &lt;code>192.168.0.10&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="однократное-подключение">&lt;span class="section-num">2.1&lt;/span> Однократное подключение&lt;/h3>
&lt;ul>
&lt;li>Зададим алгоритм подключения как опции командной строки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh -oHostKeyAlgorithms&lt;span class="o">=&lt;/span>+ssh-rsa root@192.168.0.10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-для-конкретного-хоста">&lt;span class="section-num">2.2&lt;/span> Конфигурация для конкретного хоста&lt;/h3>
&lt;ul>
&lt;li>Зададим конфигурацию конкретного хоста в файле &lt;code>~/.ssh/config&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host 192.168.0.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> HostKeyAlgorithms=+ssh-rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> PubkeyAcceptedKeyTypes +ssh-rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-для-группы-хостов">&lt;span class="section-num">2.3&lt;/span> Конфигурация для группы хостов&lt;/h3>
&lt;ul>
&lt;li>Можно задать группу хостов в виде шаблонов командной строки (wildcards).
&lt;ul>
&lt;li>Например, правило для сети:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host 192.168.0.*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> HostKeyAlgorithms=+ssh-rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> PubkeyAcceptedKeyTypes +ssh-rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно задать привило для всех хостов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> HostKeyAlgorithms=+ssh-rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> PubkeyAcceptedKeyTypes +ssh-rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Настройка LibreOffice</title><link>https://yamadharma.github.io/ru/post/2022/01/27/libreoffice-tuning/</link><pubDate>Thu, 27 Jan 2022 14:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/01/27/libreoffice-tuning/</guid><description>&lt;p>Настройка окружения для LibreOffice.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#используемые-графические-тулкиты">&lt;span class="section-num">1&lt;/span> Используемые графические тулкиты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#устранение-проблем">&lt;span class="section-num">2&lt;/span> Устранение проблем&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#зависания-или-аварийное-завершение-работы">&lt;span class="section-num">2.1&lt;/span> Зависания или аварийное завершение работы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проблемы-с-opencl">&lt;span class="section-num">2.1.1&lt;/span> Проблемы с OpenCL&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="используемые-графические-тулкиты">&lt;span class="section-num">1&lt;/span> Используемые графические тулкиты&lt;/h2>
&lt;ul>
&lt;li>LibreOffice попытается автоматически определить наиболее подходящий тулкит для пользовательского интерфейса в зависимости от среды рабочего стола.&lt;/li>
&lt;li>Чтобы принудительно использовать задать тулкит, надо использовать переменные среды:
&lt;ul>
&lt;li>&lt;code>SAL_USE_VCLPLUGIN=gen&lt;/code>: использовать универсальный графический тулкит;&lt;/li>
&lt;li>&lt;code>SAL_USE_VCLPLUGIN=gtk3&lt;/code>: использовать GTK-3;&lt;/li>
&lt;li>&lt;code>SAL_USE_VCLPLUGIN=kf5&lt;/code>: использовать QT5.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="устранение-проблем">&lt;span class="section-num">2&lt;/span> Устранение проблем&lt;/h2>
&lt;h3 id="зависания-или-аварийное-завершение-работы">&lt;span class="section-num">2.1&lt;/span> Зависания или аварийное завершение работы&lt;/h3>
&lt;h4 id="проблемы-с-opencl">&lt;span class="section-num">2.1.1&lt;/span> Проблемы с OpenCL&lt;/h4>
&lt;ul>
&lt;li>Можно отключить OpenCL для LibreOffice, задав переменные среды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">SAL_DISABLE_OPENCL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">SAL_DISABLEGL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Обновление пакетов python</title><link>https://yamadharma.github.io/ru/post/2022/01/21/update-all-python-packages/</link><pubDate>Fri, 21 Jan 2022 16:33:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/01/21/update-all-python-packages/</guid><description>&lt;p>Пакеты можно устанавливать с помощью системного менеджера пакетов, и с помощью пакетного менеджера самого &lt;em>python&lt;/em>, например &lt;em>pip&lt;/em>.
В последнем случае пакеты лучше устанавливать в каталоге пользователя (user-wide).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#список-всех-устаревших-пакетов">&lt;span class="section-num">1&lt;/span> Список всех устаревших пакетов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-всех-пакетов-python-в-linux">&lt;span class="section-num">2&lt;/span> Обновление всех пакетов python в Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-всех-пакетов-python-в-windows">&lt;span class="section-num">3&lt;/span> Обновление всех пакетов python в Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="список-всех-устаревших-пакетов">&lt;span class="section-num">1&lt;/span> Список всех устаревших пакетов&lt;/h2>
&lt;ul>
&lt;li>Создать список всех устаревших пакетов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip3 list --outdated
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создать список всех устаревших пакетов, установленных пользователем:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip3 list --outdated --user
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-всех-пакетов-python-в-linux">&lt;span class="section-num">2&lt;/span> Обновление всех пакетов python в Linux&lt;/h2>
&lt;ul>
&lt;li>Обновляем пакеты, установленные пользователем (&lt;code>--user&lt;/code>).&lt;/li>
&lt;li>С использованием &lt;code>pip&lt;/code> и &lt;code>grep&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip3 list --outdated --format&lt;span class="o">=&lt;/span>freeze --user &lt;span class="p">|&lt;/span> grep -v &lt;span class="s1">&amp;#39;^\-e&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> cut -d &lt;span class="o">=&lt;/span> -f &lt;span class="m">1&lt;/span> &lt;span class="p">|&lt;/span> xargs -n1 pip3 install -U --user
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>С использованием &lt;code>pip&lt;/code> и &lt;code>awk&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip3 list --outdated --user &lt;span class="p">|&lt;/span> cut -f1 -d&lt;span class="s1">&amp;#39; &amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> tr &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;\n&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{if(NR&amp;gt;=3)print)&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> cut -d&lt;span class="s1">&amp;#39; &amp;#39;&lt;/span> -f1 &lt;span class="p">|&lt;/span> xargs -n1 pip3 install -U --user
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-всех-пакетов-python-в-windows">&lt;span class="section-num">3&lt;/span> Обновление всех пакетов python в Windows&lt;/h2>
&lt;ul>
&lt;li>Обновляем пакеты, установленные пользователем (&lt;code>--user&lt;/code>).&lt;/li>
&lt;li>Используем &lt;em>powershell&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip freeze --user &lt;span class="p">|&lt;/span> %&lt;span class="o">{&lt;/span>&lt;span class="nv">$_&lt;/span>.split&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;==&amp;#39;&lt;/span>&lt;span class="o">)[&lt;/span>0&lt;span class="o">]}&lt;/span> &lt;span class="p">|&lt;/span> %&lt;span class="o">{&lt;/span>pip install --upgrade &lt;span class="nv">$_&lt;/span> --user&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Web консоль Cockpit</title><link>https://yamadharma.github.io/ru/post/2022/01/18/cockpit-web-console/</link><pubDate>Tue, 18 Jan 2022 17:23:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/01/18/cockpit-web-console/</guid><description>&lt;p>&lt;em>Cockpit&lt;/em> представляет собой инструмент для администрирования устройств под управлением Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#функционал">&lt;span class="section-num">2&lt;/span> Функционал&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-в-redhat-и-деривативах">&lt;span class="section-num">3.1&lt;/span> Установка в RedHat и деривативах:&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-модули">&lt;span class="section-num">3.2&lt;/span> Дополнительные модули&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#веб-интерфейс-приложения">&lt;span class="section-num">4&lt;/span> Веб-интерфейс приложения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h2 id="функционал">&lt;span class="section-num">2&lt;/span> Функционал&lt;/h2>
&lt;ul>
&lt;li>управление службами;&lt;/li>
&lt;li>менеджмент учетных записей;&lt;/li>
&lt;li>настройка брандмауэра;&lt;/li>
&lt;li>конфигурирование сетевых интерфейсов и подключений;&lt;/li>
&lt;li>чтение системных логов;&lt;/li>
&lt;li>контроль над виртуальными машинами;&lt;/li>
&lt;li>формирование отчетов на базе результатов диагностики;&lt;/li>
&lt;li>настройка дампа ядра;&lt;/li>
&lt;li>администрирование SELinux (Security-Enhanced Linux);&lt;/li>
&lt;li>обновление пакетов приложений;&lt;/li>
&lt;li>управление подписками.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/h2>
&lt;h3 id="установка-в-redhat-и-деривативах">&lt;span class="section-num">3.1&lt;/span> Установка в RedHat и деривативах:&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Centos 7&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yum install cockpit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Centos 8&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install cockpit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В CentOS 8 &lt;em>cockpit&lt;/em> устанавливается по умолчанию.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Запуск служб&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now cockpit.socket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Настройка брандмауэра&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-service&lt;span class="o">=&lt;/span>cockpit --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="дополнительные-модули">&lt;span class="section-num">3.2&lt;/span> Дополнительные модули&lt;/h3>
&lt;ul>
&lt;li>cockpit-composer&lt;/li>
&lt;li>cockpit-dashboard
&lt;ul>
&lt;li>Улучшенный дашборд для сервера.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>cockpit-doc&lt;/li>
&lt;li>cockpit-docker&lt;/li>
&lt;li>cockpit-kubernetes&lt;/li>
&lt;li>cockpit-machines
&lt;ul>
&lt;li>Работа с виртуальными машинами KVM.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>cockpit-machines-ovirt&lt;/li>
&lt;li>cockpit-packagekit
&lt;ul>
&lt;li>Работа с пакетами.&lt;/li>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yum install cockpit-packagekit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка необходимого программного обеспечения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yum install virt-install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>cockpit-pcp&lt;/li>
&lt;li>cockpit-storaged
&lt;ul>
&lt;li>Работа с устройствами хранения.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>cockpit-subscriptions&lt;/li>
&lt;li>cockpit-tests&lt;/li>
&lt;/ul>
&lt;h2 id="веб-интерфейс-приложения">&lt;span class="section-num">4&lt;/span> Веб-интерфейс приложения&lt;/h2>
&lt;ul>
&lt;li>Используется порт &lt;code>9090&lt;/code>.&lt;/li>
&lt;li>По умолчанию используется самоподписанный сертификат SSL.&lt;/li>
&lt;li>Язык лучше выбрать английский. Русский перевод крайне прискорбен.&lt;/li>
&lt;/ul></description></item><item><title>Подключение ресурсов через RSS</title><link>https://yamadharma.github.io/ru/post/2022/01/17/resources-to-rss/</link><pubDate>Mon, 17 Jan 2022 17:14:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/01/17/resources-to-rss/</guid><description>&lt;p>Мне удобно читать обновления web-ресурсов через RSS. К сожалению сейчас стало много ресурсов, не поддерживающих подключение через этот формат.
Но можно осуществить просмотр ресурсов через RSS, используя разные шлюзы.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#универсальный-шлюз-rsshub-dot-app">&lt;span class="section-num">2&lt;/span> Универсальный шлюз &lt;em>rsshub.app&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">3&lt;/span> Ресурсы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#vkontakte">&lt;span class="section-num">3.1&lt;/span> Vkontakte&lt;/a>&lt;/li>
&lt;li>&lt;a href="#telegram">&lt;span class="section-num">3.2&lt;/span> Telegram&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>RSS &amp;mdash; семейство XML-форматов, предназначенных для описания разных интернет ресурсов.&lt;/li>
&lt;li>В разных версиях аббревиатура RSS имела разные расшифровки:
&lt;ul>
&lt;li>Rich Site Summary (RSS 0.9x) &amp;mdash; обогащённая сводка сайта;&lt;/li>
&lt;li>RDF Site Summary (RSS 0.9 и 1.0) &amp;mdash; сводка сайта с применением инфраструктуры описания ресурсов;&lt;/li>
&lt;li>Really Simple Syndication (RSS 2.x) &amp;mdash; очень простое распространение.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Существуют специализированные приложения (RSS-агрегаторы), собирающие и обрабатывающие информацию RSS-каналов.&lt;/li>
&lt;/ul>
&lt;h2 id="универсальный-шлюз-rsshub-dot-app">&lt;span class="section-num">2&lt;/span> Универсальный шлюз &lt;em>rsshub.app&lt;/em>&lt;/h2>
&lt;ul>
&lt;li>Адрес: &lt;a href="https://rsshub.app/" target="_blank" rel="noopener">https://rsshub.app/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/DIYgod/RSSHub" target="_blank" rel="noopener">https://github.com/DIYgod/RSSHub&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.rsshub.app/en/" target="_blank" rel="noopener">https://docs.rsshub.app/en/&lt;/a>&lt;/li>
&lt;li>Имеет большое количество шлюзов для обработки разных ресурсов.&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">3&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Ресурсы, которыми я пользуюсь.&lt;/li>
&lt;/ul>
&lt;h3 id="vkontakte">&lt;span class="section-num">3.1&lt;/span> Vkontakte&lt;/h3>
&lt;ul>
&lt;li>Шлюз &lt;em>vkrss.ru&lt;/em>
&lt;ul>
&lt;li>Адрес: &lt;a href="https://vkrss.ru/" target="_blank" rel="noopener">https://vkrss.ru/&lt;/a>&lt;/li>
&lt;li>Если у вас группа &lt;code>https://vk.com/groupname&lt;/code>, то имя rss-канала будет &lt;code>https://vkrss.ru/groupname&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="telegram">&lt;span class="section-num">3.2&lt;/span> Telegram&lt;/h3>
&lt;ul>
&lt;li>Шлюз &lt;em>rsshub.app&lt;/em>
&lt;ul>
&lt;li>Если нужно подключить канал &lt;em>&lt;a href="https://t.me/channelname" target="_blank" rel="noopener">https://t.me/channelname&lt;/a>&lt;/em>, то имя rss-канала будет &lt;em>&lt;a href="https://rsshub.app/telegram/channel/channelname" target="_blank" rel="noopener">https://rsshub.app/telegram/channel/channelname&lt;/a>&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Использование vagrant</title><link>https://yamadharma.github.io/ru/post/2021/11/12/using-vagrant/</link><pubDate>Fri, 12 Nov 2021 12:11:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/11/12/using-vagrant/</guid><description>&lt;p>Использование vagrant.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#лицензия">&lt;span class="section-num">1.1&lt;/span> Лицензия&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подготовка-образа">&lt;span class="section-num">2&lt;/span> Подготовка образа&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#описание-установки">&lt;span class="section-num">2.2&lt;/span> Описание установки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#запуск-vagrant-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">3&lt;/span> Запуск Vagrant в текущем каталоге для VirtualBox&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#запуск-vagrant-под-windows-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">3.1&lt;/span> Запуск Vagrant под Windows в текущем каталоге для VirtualBox&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-vagrant-под-linux-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">3.2&lt;/span> Запуск Vagrant под Linux в текущем каталоге для VirtualBox&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-дополнений">&lt;span class="section-num">4&lt;/span> Установка дополнений&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.vagrantup.com/" target="_blank" rel="noopener">https://www.vagrantup.com/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/hashicorp/vagrant" target="_blank" rel="noopener">https://github.com/hashicorp/vagrant&lt;/a>&lt;/li>
&lt;li>Бинарные сборки: &lt;a href="https://releases.hashicorp.com/vagrant" target="_blank" rel="noopener">https://releases.hashicorp.com/vagrant&lt;/a> (на данный момент не доступно из России).&lt;/li>
&lt;li>Зеркало бинарных сборок:
&lt;ul>
&lt;li>&lt;a href="https://hashicorp-releases.yandexcloud.net/vagrant/" target="_blank" rel="noopener">https://hashicorp-releases.yandexcloud.net/vagrant/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Зеркало сборок из репозитория:
&lt;ul>
&lt;li>&lt;a href="https://sourceforge.net/projects/vagrant.mirror/files/" target="_blank" rel="noopener">https://sourceforge.net/projects/vagrant.mirror/files/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="лицензия">&lt;span class="section-num">1.1&lt;/span> Лицензия&lt;/h3>
&lt;h2 id="подготовка-образа">&lt;span class="section-num">2&lt;/span> Подготовка образа&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Подготовка образа проводится с помощью &lt;em>Packer&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/10/30/packer/">Packer&lt;/a>).&lt;/li>
&lt;li>Сайт: &lt;a href="https://www.packer.io/" target="_blank" rel="noopener">https://www.packer.io/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="описание-установки">&lt;span class="section-num">2.2&lt;/span> Описание установки&lt;/h3>
&lt;ul>
&lt;li>Ранее использовался язык описания JSON.&lt;/li>
&lt;li>После &lt;em>Packer-1.5&lt;/em> используется формат HCL2.&lt;/li>
&lt;/ul>
&lt;h2 id="запуск-vagrant-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">3&lt;/span> Запуск Vagrant в текущем каталоге для VirtualBox&lt;/h2>
&lt;ul>
&lt;li>Если необходимо, чтобы все файлы находились в рабочем каталоге, то следует установить дополнительные переменные среды.&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-vagrant-под-windows-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">3.1&lt;/span> Запуск Vagrant под Windows в текущем каталоге для VirtualBox&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Следует задать переменные окружения&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setx VAGRANT_HOME &lt;span class="s2">&amp;#34;X:/your/path/.vagrant.d&amp;#34;&lt;/span> /M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setx VAGRANT_DOTFILE_PATH &lt;span class="s2">&amp;#34;X:/your/path/.vagrant&amp;#34;&lt;/span> /M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setx VBOX_USER_HOME &lt;span class="s2">&amp;#34;X:/your/path/.vbox&amp;#34;&lt;/span> /M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setx VBOX_INSTALL_PATH &lt;span class="s2">&amp;#34;X:/your/path/vm&amp;#34;&lt;/span> /M
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Вместо &lt;code>X:&lt;/code> необходимо записать букву необходимого диска.&lt;/li>
&lt;li>Команда &lt;code>setx&lt;/code> добавляет переменные в постоянный список переменных окружения.&lt;/li>
&lt;li>Модификатор &lt;code>/M&lt;/code> добавляет переменные в системное окружение.&lt;/li>
&lt;li>Без этого модификатора переменные будут добавляться в окружение пользователя.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-vagrant-под-linux-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">3.2&lt;/span> Запуск Vagrant под Linux в текущем каталоге для VirtualBox&lt;/h3>
&lt;h2 id="установка-дополнений">&lt;span class="section-num">4&lt;/span> Установка дополнений&lt;/h2>
&lt;ul>
&lt;li>Список дополнений: &lt;a href="https://github.com/hashicorp/vagrant/wiki/Available-Vagrant-Plugins" target="_blank" rel="noopener">https://github.com/hashicorp/vagrant/wiki/Available-Vagrant-Plugins&lt;/a>&lt;/li>
&lt;li>Установка дополнения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant plugin install &amp;lt;plugin-name&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Дополнение скачивается с сайта .&lt;/li>
&lt;li>Поскольку доступ из России блокируется, следует явно указать зеркало для загрузки дополнений:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant plugin install --plugin-clean-sources --plugin-source https://rubygems.org &amp;lt;plugin-name&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Шрифты в Linux</title><link>https://yamadharma.github.io/ru/post/2021/10/27/linux-fonts/</link><pubDate>Wed, 27 Oct 2021 11:36:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/10/27/linux-fonts/</guid><description>&lt;p>Работа со шрифтами в Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#установка-шрифтов-microsoft">&lt;span class="section-num">1&lt;/span> Установка шрифтов Microsoft&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#основные-шрифты-microsoft">&lt;span class="section-num">1.1&lt;/span> Основные шрифты Microsoft&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ubuntu">&lt;span class="section-num">1.1.1&lt;/span> Ubuntu&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#шрифты-для-программирования">&lt;span class="section-num">2&lt;/span> Шрифты для программирования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="установка-шрифтов-microsoft">&lt;span class="section-num">1&lt;/span> Установка шрифтов Microsoft&lt;/h2>
&lt;h3 id="основные-шрифты-microsoft">&lt;span class="section-num">1.1&lt;/span> Основные шрифты Microsoft&lt;/h3>
&lt;h4 id="ubuntu">&lt;span class="section-num">1.1.1&lt;/span> Ubuntu&lt;/h4>
&lt;ul>
&lt;li>Шрифты Microsoft не идут под свободной лицензией.&lt;/li>
&lt;li>Для работы с ними нужно установить соответствующий пакет:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt-get install ttf-mscorefonts-installer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Вас попросят принять лицензию (EULA), после этого будут скачаны соответствующие шрифты (в виде архивов), распакованы и установлены в системе.&lt;/li>
&lt;li>Скачиваются они с проекта &lt;em>Corefonts&lt;/em> (&lt;a href="http://corefonts.sourceforge.net/" target="_blank" rel="noopener">http://corefonts.sourceforge.net/&lt;/a>).&lt;/li>
&lt;li>Обычно устанавливаются шрифты в каталог &lt;code>/usr/share/fonts/truetype/msttcorefonts&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="шрифты-для-программирования">&lt;span class="section-num">2&lt;/span> Шрифты для программирования&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/21/monospace-fonts/">Моноширинные шрифты&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Допустимые символы в имени файла</title><link>https://yamadharma.github.io/ru/post/2021/10/17/allowed-characters-filename/</link><pubDate>Sun, 17 Oct 2021 20:40:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/10/17/allowed-characters-filename/</guid><description>&lt;p>Допустимые символы в имени файла.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запрещённые-печатные-символы-ascii">&lt;span class="section-num">2&lt;/span> Запрещённые печатные символы ASCII&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#linux-unix">&lt;span class="section-num">2.1&lt;/span> Linux/Unix&lt;/a>&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">2.2&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#непечатаемые-символы">&lt;span class="section-num">3&lt;/span> Непечатаемые символы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#linux-unix">&lt;span class="section-num">3.1&lt;/span> Linux/Unix&lt;/a>&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">3.2&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#зарезервированные-имена-файлов">&lt;span class="section-num">4&lt;/span> Зарезервированные имена файлов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">4.1&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#другие-ограничения">&lt;span class="section-num">5&lt;/span> Другие ограничения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">5.1&lt;/span> Windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#macos">&lt;span class="section-num">5.2&lt;/span> macOS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Для Windows базируемся на документе &lt;a href="https://docs.microsoft.com/ru-ru/windows/win32/fileio/naming-a-file" target="_blank" rel="noopener">https://docs.microsoft.com/ru-ru/windows/win32/fileio/naming-a-file&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="запрещённые-печатные-символы-ascii">&lt;span class="section-num">2&lt;/span> Запрещённые печатные символы ASCII&lt;/h2>
&lt;h3 id="linux-unix">&lt;span class="section-num">2.1&lt;/span> Linux/Unix&lt;/h3>
&lt;ul>
&lt;li>&lt;code>/&lt;/code> (forward slash)&lt;/li>
&lt;/ul>
&lt;h3 id="windows">&lt;span class="section-num">2.2&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>&amp;lt;&lt;/code> (less than)&lt;/li>
&lt;li>&lt;code>&amp;gt;&lt;/code> (greater than)&lt;/li>
&lt;li>&lt;code>:&lt;/code> (colon), в NTFS имеет семантику альтернативных потоков данных (Alternate Data Streams)&lt;/li>
&lt;li>&lt;code>&amp;quot;&lt;/code> (double quote)&lt;/li>
&lt;li>&lt;code>/&lt;/code> (forward slash)&lt;/li>
&lt;li>&lt;code>\&lt;/code> (backslash)&lt;/li>
&lt;li>&lt;code>|&lt;/code> (vertical bar or pipe)&lt;/li>
&lt;li>&lt;code>?&lt;/code> (question mark)&lt;/li>
&lt;li>&lt;code>*&lt;/code> (asterisk)&lt;/li>
&lt;/ul>
&lt;h2 id="непечатаемые-символы">&lt;span class="section-num">3&lt;/span> Непечатаемые символы&lt;/h2>
&lt;h3 id="linux-unix">&lt;span class="section-num">3.1&lt;/span> Linux/Unix&lt;/h3>
&lt;ul>
&lt;li>&lt;code>0&lt;/code> или &lt;code>NUL&lt;/code> (NULL byte)&lt;/li>
&lt;/ul>
&lt;h3 id="windows">&lt;span class="section-num">3.2&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>0&lt;/code>&amp;ndash;&lt;code>31&lt;/code> (ASCII control characters)&lt;/li>
&lt;/ul>
&lt;h2 id="зарезервированные-имена-файлов">&lt;span class="section-num">4&lt;/span> Зарезервированные имена файлов&lt;/h2>
&lt;h3 id="windows">&lt;span class="section-num">4.1&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>CON&lt;/code>&lt;/li>
&lt;li>&lt;code>PRN&lt;/code>&lt;/li>
&lt;li>&lt;code>AUX&lt;/code>&lt;/li>
&lt;li>&lt;code>NUL&lt;/code>&lt;/li>
&lt;li>&lt;code>COM1&lt;/code>&lt;/li>
&lt;li>&lt;code>COM2&lt;/code>&lt;/li>
&lt;li>&lt;code>COM3&lt;/code>&lt;/li>
&lt;li>&lt;code>COM4&lt;/code>&lt;/li>
&lt;li>&lt;code>COM5&lt;/code>&lt;/li>
&lt;li>&lt;code>COM6&lt;/code>&lt;/li>
&lt;li>&lt;code>COM7&lt;/code>&lt;/li>
&lt;li>&lt;code>COM8&lt;/code>&lt;/li>
&lt;li>&lt;code>COM9&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT1&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT2&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT3&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT4&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT5&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT6&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT7&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT8&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT9&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="другие-ограничения">&lt;span class="section-num">5&lt;/span> Другие ограничения&lt;/h2>
&lt;h3 id="windows">&lt;span class="section-num">5.1&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>Имена файлов не могут заканчиваться пробелом или точкой.&lt;/li>
&lt;/ul>
&lt;h3 id="macos">&lt;span class="section-num">5.2&lt;/span> macOS&lt;/h3>
&lt;ul>
&lt;li>Двоеточие &lt;code>:&lt;/code> и косая черта &lt;code>/&lt;/code> запрещены в зависимости от контекста.&lt;/li>
&lt;li>Двоеточие &lt;code>:&lt;/code> используется в качестве разделителя в путях HFS, а косая черта &lt;code>/&lt;/code> используется в качестве разделителя в путях POSIX.&lt;/li>
&lt;/ul></description></item><item><title>Сброс пароля на коммутаторах Catalyst</title><link>https://yamadharma.github.io/ru/post/2021/10/06/password-reset-catalyst-switches/</link><pubDate>Wed, 06 Oct 2021 11:36:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/10/06/password-reset-catalyst-switches/</guid><description>&lt;p>Сброс пароля на коммутаторах Catalyst серий 2900, 2950, 2960, 3500, 3550.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">&lt;/nav>
&lt;/details>
&lt;ul>
&lt;li>
&lt;p>При нажатой кнопке выбора режима (mode) вставить шнур питания (не отпускать кнопку, до тех пор, пока индикатор над портом 1, не будет гореть, как минимум 2 секунды).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Ввести команду:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">flash_init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Ввести команду:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">load_helper
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Переименовать файл &lt;code>config.text&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rename flash:config.text flash:config.old
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Продолжить процесс загрузки:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">boot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Отказаться от входа в режим настройки (набрать &lt;code>no&lt;/code>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Перейти в пользовательский режим: (&lt;code>Enter&lt;/code>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Перейти в привилегированный режим:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">enable&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Вернуть имя ранее переименованному файлу:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rename flash:config.old flash:config.text
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Загрузить в running-config конфигурационный файл:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">copy startup run
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Перейти в конфигурационный режим:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">conf t
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Изменить пароль:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">enable&lt;/span> password &amp;lt;пароль&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Выйти из режима настройки (&lt;code>Ctrl+Z&lt;/code>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Сохранить конфигурацию:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">write memory
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Почта. Message-mode</title><link>https://yamadharma.github.io/ru/post/2021/09/27/emacs-mail-message-mode/</link><pubDate>Mon, 27 Sep 2021 19:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/27/emacs-mail-message-mode/</guid><description>&lt;p>Режим Emacs для создания писем.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#приёмы-работы">&lt;span class="section-num">2&lt;/span> Приёмы работы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#прикрепить-несколько-файлов">&lt;span class="section-num">2.1&lt;/span> Прикрепить несколько файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h2 id="приёмы-работы">&lt;span class="section-num">2&lt;/span> Приёмы работы&lt;/h2>
&lt;h3 id="прикрепить-несколько-файлов">&lt;span class="section-num">2.1&lt;/span> Прикрепить несколько файлов&lt;/h3>
&lt;ul>
&lt;li>Откройте каталог в режиме &lt;code>dired&lt;/code> с помощью &lt;code>C-x 4 d&lt;/code>.&lt;/li>
&lt;li>Введите &lt;code>M-x turn-on-gnus-dired-mode&lt;/code>.
&lt;ul>
&lt;li>Если у Вас &lt;code>M-x&lt;/code> привязано к &lt;code>helm&lt;/code>, то сделать это сразу не получится.&lt;/li>
&lt;li>Тогда Вам надо нажать на нужном каталоге &lt;code>C-RET&lt;/code>, а потом уже ввести &lt;code>M-x turn-on-gnus-dired-mode&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Отметьте необходимые файлы с помощью &lt;code>m&lt;/code>.&lt;/li>
&lt;li>Введите &lt;code>C-c RET C-a&lt;/code> для вставки в уже открытый буфер сообщений (или назначьте новый).&lt;/li>
&lt;/ul></description></item><item><title>Программное обеспечение для дисплейных классов</title><link>https://yamadharma.github.io/ru/post/2021/09/26/computer-classes-software/</link><pubDate>Sun, 26 Sep 2021 19:43:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/26/computer-classes-software/</guid><description>&lt;p>Программное обеспечение, устанавливаемое в дисплейных классах.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#устанавливаемое-программное-обеспечение">&lt;span class="section-num">1&lt;/span> Устанавливаемое программное обеспечение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#лицензии-программного-обеспечения">&lt;span class="section-num">2&lt;/span> Лицензии программного обеспечения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="устанавливаемое-программное-обеспечение">&lt;span class="section-num">1&lt;/span> Устанавливаемое программное обеспечение&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Программное обеспечение&lt;/th>
&lt;th>Linux&lt;/th>
&lt;th>Windows&lt;/th>
&lt;th>Лицензия&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Windows&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Microsoft Subscription Enrollment for Education Solutions&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Microsoft Office&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Microsoft Subscription Enrollment for Education Solutions&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Linux (gentoo, CentOS, Ubuntu)&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL-2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Офисный пакет LibreOffice&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>MPL-2.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Firefox&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>MPL-2.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Thunderbird&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>MPL-2.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Chrome&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Google Chrome Terms of Service&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SciLab&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>MIT License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Java OpenJDK&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>GPL-2 with the Classpath Exception&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Python&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Python Software Foundation License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7-zip&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>LGPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Far&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>BSD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Adobe Reader&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Adobe Software License Agreement&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Putty&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>MIT License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WinCP&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GPSS&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>GPSS World Student License Agreement 5.2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Perl&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Artistic License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Packet Tracer&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>Cisco Packet Tracer Software License Agreement&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OpenModelica&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>OSMC-PL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>VirtualBox&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>MIT License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Drupal&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Apache&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>Apache License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MariaDB&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL-2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Postfix&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>IBM-Public-License-1.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Dovecot&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>MIT License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fail2ban&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OpenSSH&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>OpenBSD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GNUPlot&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>gnuplot License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nasm&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>The 2-Clause BSD License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gdb&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>edb&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL-2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>maxima&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gcc&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DevCpp&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gfortran&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FreePascal&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>postgresql&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>PostgreSQL License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>python&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>Python Software Foundation License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>numpy&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>NumPy license&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>sympy&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>The 3-Clause BSD License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>matplotlib&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>Python Software Foundation License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vagrant&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>MIT License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>emacs&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Android Studio&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>Apache License 2.0&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="лицензии-программного-обеспечения">&lt;span class="section-num">2&lt;/span> Лицензии программного обеспечения&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Лицензия&lt;/th>
&lt;th>Ссылка на лицензию&lt;/th>
&lt;th>Пояснение&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Microsoft Subscription Enrollment for Education Solutions&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MPL-2.0&lt;/td>
&lt;td>&lt;a href="https://www.mozilla.org/en-US/MPL/2.0/" target="_blank" rel="noopener">https://www.mozilla.org/en-US/MPL/2.0/&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Google Chrome Terms of Service&lt;/td>
&lt;td>&lt;a href="https://www.google.com/intl/en/chrome/privacy/eula%5Ftext.html" target="_blank" rel="noopener">https://www.google.com/intl/en/chrome/privacy/eula%5Ftext.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MIT License&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener">https://opensource.org/licenses/MIT&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GPL-2 with the Classpath Exception&lt;/td>
&lt;td>&lt;a href="http://openjdk.java.net/legal/gplv2&amp;#43;ce.html" target="_blank" rel="noopener">http://openjdk.java.net/legal/gplv2+ce.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Python Software Foundation License&lt;/td>
&lt;td>&lt;a href="https://docs.python.org/3/license.html" target="_blank" rel="noopener">https://docs.python.org/3/license.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LGPL&lt;/td>
&lt;td>&lt;a href="https://www.gnu.org/licenses/lgpl.html" target="_blank" rel="noopener">https://www.gnu.org/licenses/lgpl.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>BSD&lt;/td>
&lt;td>&lt;a href="https://farmanager.com/license.php" target="_blank" rel="noopener">https://farmanager.com/license.php&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Adobe Software License Agreement&lt;/td>
&lt;td>&lt;a href="https://www.adobe.com/content/dam/acom/ru/legal/licenses-terms/pdf/Reader-EULA-ru%5FRU-20181207.pdf" target="_blank" rel="noopener">https://www.adobe.com/content/dam/acom/ru/legal/licenses-terms/pdf/Reader-EULA-ru%5FRU-20181207.pdf&lt;/a>&lt;/td>
&lt;td>Разрешает условное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MIT License&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener">https://opensource.org/licenses/MIT&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GPL&lt;/td>
&lt;td>&lt;a href="https://www.gnu.org/licenses/gpl.html" target="_blank" rel="noopener">https://www.gnu.org/licenses/gpl.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GPSS World Student License Agreement 5.2&lt;/td>
&lt;td>&lt;a href="http://www.minutemansoftware.com/stulicense.htm" target="_blank" rel="noopener">http://www.minutemansoftware.com/stulicense.htm&lt;/a>&lt;/td>
&lt;td>Разрешает условное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Artistic License&lt;/td>
&lt;td>&lt;a href="https://dev.perl.org/licenses/artistic.html" target="_blank" rel="noopener">https://dev.perl.org/licenses/artistic.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Cisco Packet Tracer Software License Agreement&lt;/td>
&lt;td>&lt;a href="https://www.netacad.com" target="_blank" rel="noopener">https://www.netacad.com&lt;/a>&lt;/td>
&lt;td>Разрешает условное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GPL-2&lt;/td>
&lt;td>&lt;a href="https://www.gnu.org/licenses/old-licenses/gpl-2.0.html" target="_blank" rel="noopener">https://www.gnu.org/licenses/old-licenses/gpl-2.0.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MPL-2.0&lt;/td>
&lt;td>&lt;a href="https://www.mozilla.org/en-US/MPL/2.0/" target="_blank" rel="noopener">https://www.mozilla.org/en-US/MPL/2.0/&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Google Chrome Terms of Service&lt;/td>
&lt;td>&lt;a href="https://www.google.com/intl/en/chrome/privacy/eula%5Ftext.html" target="_blank" rel="noopener">https://www.google.com/intl/en/chrome/privacy/eula%5Ftext.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OSMC-PL&lt;/td>
&lt;td>&lt;a href="https://www.openmodelica.org/developersresources/contributor-license-agreement?id=56:full-license" target="_blank" rel="noopener">https://www.openmodelica.org/developersresources/contributor-license-agreement?id=56:full-license&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Apache License 2.0&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/Apache-2.0" target="_blank" rel="noopener">https://opensource.org/licenses/Apache-2.0&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IBM-Public-License-1.0&lt;/td>
&lt;td>&lt;a href="http://www.postfix.org/IBM-Public-License-1.0.txt" target="_blank" rel="noopener">http://www.postfix.org/IBM-Public-License-1.0.txt&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OpenBSD&lt;/td>
&lt;td>&lt;a href="https://cvsweb.openbsd.org/src/share/misc/license.template?rev=HEAD" target="_blank" rel="noopener">https://cvsweb.openbsd.org/src/share/misc/license.template?rev=HEAD&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gnuplot License&lt;/td>
&lt;td>&lt;a href="https://fedoraproject.org/wiki/Licensing:Gnuplot?rd=Licensing/Gnuplot" target="_blank" rel="noopener">https://fedoraproject.org/wiki/Licensing:Gnuplot?rd=Licensing/Gnuplot&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>The 2-Clause BSD License&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/BSD-2-Clause" target="_blank" rel="noopener">https://opensource.org/licenses/BSD-2-Clause&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PostgreSQL License&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/postgresql" target="_blank" rel="noopener">https://opensource.org/licenses/postgresql&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Python Software Foundation License&lt;/td>
&lt;td>&lt;a href="https://docs.python.org/3/license.html" target="_blank" rel="noopener">https://docs.python.org/3/license.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NumPy license&lt;/td>
&lt;td>&lt;a href="http://www.numpy.org/license.html" target="_blank" rel="noopener">http://www.numpy.org/license.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>The 3-Clause BSD License&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/BSD-3-Clause" target="_blank" rel="noopener">https://opensource.org/licenses/BSD-3-Clause&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Дисплейные классы</title><link>https://yamadharma.github.io/ru/post/2021/09/26/computer-classes/</link><pubDate>Sun, 26 Sep 2021 19:40:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/26/computer-classes/</guid><description>&lt;p>Организация работы дисплейных классов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#программное-обеспечение">&lt;span class="section-num">2&lt;/span> Программное обеспечение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/12/regulations-display-classes/">Регламент работы дисплейных классов&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/07/regulations-access-supercomputer-rudn/">Регламент доступа к суперкомпьютеру РУДН&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="программное-обеспечение">&lt;span class="section-num">2&lt;/span> Программное обеспечение&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/26/computer-classes-software/">Программное обеспечение для дисплейных классов&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Обслуживание btrfs</title><link>https://yamadharma.github.io/ru/post/2021/09/23/btrfs-maintenence/</link><pubDate>Thu, 23 Sep 2021 10:22:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/23/btrfs-maintenence/</guid><description>&lt;p>Действия по обслуживанию Btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#проверка-целостности">&lt;span class="section-num">1&lt;/span> Проверка целостности&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дефрагментация">&lt;span class="section-num">2&lt;/span> Дефрагментация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#trim">&lt;span class="section-num">3&lt;/span> Trim&lt;/a>&lt;/li>
&lt;li>&lt;a href="#балансировка">&lt;span class="section-num">4&lt;/span> Балансировка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скрипт-btrfsmaintenance">&lt;span class="section-num">5&lt;/span> Скрипт btrfsmaintenance&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">5.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">5.2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск">&lt;span class="section-num">5.3&lt;/span> Запуск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удаление">&lt;span class="section-num">5.4&lt;/span> Удаление&lt;/a>&lt;/li>
&lt;li>&lt;a href="#фалы-конфигурации">&lt;span class="section-num">5.5&lt;/span> Фалы конфигурации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="проверка-целостности">&lt;span class="section-num">1&lt;/span> Проверка целостности&lt;/h2>
&lt;ul>
&lt;li>Следующая команда считывает все блоки данных и метаданных со всех устройств и проверяет контрольные суммы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs scrub start -Bd &amp;lt;путь&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Автоматически восстанавливает поврежденные блоки, если есть правильная копия.&lt;/li>
&lt;li>Не является средством проверки файловой системы (fsck) и не проверяет и не устраняет структурные повреждения в файловой системе.&lt;/li>
&lt;li>Пользователь должен запускать его вручную или через периодическую системную службу. Рекомендуемый период составляет месяц, но может быть и меньше.&lt;/li>
&lt;/ul>
&lt;h2 id="дефрагментация">&lt;span class="section-num">2&lt;/span> Дефрагментация&lt;/h2>
&lt;ul>
&lt;li>При первой записи Btrfs записывает данные последовательно.&lt;/li>
&lt;li>Механизм COW (Copy-On-Write) подразумевает, что любая последующая модификация файла не должна быть написана поверх старых данных, и соответственно, она помещается в свободный блок.&lt;/li>
&lt;li>Данное обстоятельство вызывает повышенную фрагментацию файловой системы.&lt;/li>
&lt;li>В Btrfs для борьбы с фрагментацией существует несколько методов:
&lt;ul>
&lt;li>дефрагментация с помощью команды
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs filesystem defragment &amp;lt;путь&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>опция монтирования &lt;code>-o nodatacow&lt;/code>, которая отключает COW для данных.
&lt;ul>
&lt;li>Можно применять к отдельному файлу либо к подтому/директории, в том числе рекурсивно.&lt;/li>
&lt;li>Атрибут &lt;code>nocow&lt;/code> можно также выставить новому или пустому файлу.&lt;/li>
&lt;li>Он отключает механизм &lt;em>copy on write&lt;/em>, благодаря чему Btrfs при обновлении содержимого файла будет всегда работать с фиксированной дисковой областью, записывая данные поверх существующих (на физическом уровне).&lt;/li>
&lt;li>Включение атрибута &lt;code>nocow&lt;/code> отключает проверку контрольной суммы файлов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>опция монтирования &lt;code>-o autodefrag&lt;/code>.
&lt;ul>
&lt;li>Обнаруживает небольшие случайные записи в файлы и ставит их в очередь для автоматического дефрагментации, поэтому файловая система будет дефрагментировать себя, пока она используется.&lt;/li>
&lt;li>Не подходит для виртуализации или высоконагруженных баз данных, но хорошо работает для небольших файлов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Оценить фрагментированность файлов можно при помощи утилиты &lt;code>filefrag&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="trim">&lt;span class="section-num">3&lt;/span> Trim&lt;/h2>
&lt;ul>
&lt;li>Btrfs может передавать SSD информацию о том, какие блоки данных больше не используются (удалённые файлы и т.д.).&lt;/li>
&lt;li>Это позволяет избежать постепенного снижения производительности SSD.&lt;/li>
&lt;li>Операция &lt;code>fstrim&lt;/code> предназначена для таких целей. Для большинства современных SSD она доступна.&lt;/li>
&lt;li>Btrfs автоматически определяет при монтировании твердотельные накопители.&lt;/li>
&lt;li>Для работы &lt;code>fstrim&lt;/code> необходим ручной запуск или установка опции монтирования &lt;code>-o discard&lt;/code>, которая будет запускать &lt;code>fstrim&lt;/code> после каждого удаления файла.&lt;/li>
&lt;/ul>
&lt;h2 id="балансировка">&lt;span class="section-num">4&lt;/span> Балансировка&lt;/h2>
&lt;ul>
&lt;li>Основной целью функции &lt;code>balance&lt;/code> является распределение групп блоков по всем устройствам.&lt;/li>
&lt;li>Работает только на смонтированной файловой системе.&lt;/li>
&lt;li>Btrfs использует двуступенчатый распределитель:
&lt;ul>
&lt;li>на первом этапе выделяются большие области пространства, известные как чанки (chunks) для определенных типов данных;&lt;/li>
&lt;li>на втором этапе выделяются блоки (blocks).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Существует три типа чанков:
&lt;ul>
&lt;li>Data chunks хранят обычные данные файла.&lt;/li>
&lt;li>Metadata Chunks хранят метаданные о файлах, включая, метки времени, контрольные суммы, имена файлов, владельца, разрешения и расширенные атрибуты.&lt;/li>
&lt;li>System Chunks это особый тип чанков, которые хранят данные о том, где находятся все остальные чанки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Только тот тип данных, для которого выделен блок, может быть сохранен в этом блоке.&lt;/li>
&lt;li>Ошибка &lt;code>ENOSPC&lt;/code> в Btrfs. Файловая система исчерпала пространство для данных или метаданных в существующих чанках и не может выделить новый чанк.
&lt;ul>
&lt;li>Запустите &lt;code>btrfs fi df &amp;lt;путь&amp;gt;&lt;/code> в файловой системе, которая вызвала ошибку.&lt;/li>
&lt;li>Если в строке &amp;ldquo;Данные&amp;rdquo; или &amp;ldquo;Метаданные&amp;rdquo; отображается значение &amp;ldquo;Итого&amp;rdquo;, которое значительно отличается от значения &amp;ldquo;Используется&amp;rdquo;, то это, вероятно, является причиной.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Команда &lt;code>btrfs balance&lt;/code> отправляет данные обратно через распределитель (allocator), что приводит к более компактному использованию чанков.&lt;/li>
&lt;li>Если запустить &lt;code>btrfs fi df &amp;lt;путь&amp;gt;&lt;/code> после запуска баланса, значения Total и Used станут намного ближе друг к другу, так как баланс удаляет фрагменты, которые больше не нужны.&lt;/li>
&lt;/ul>
&lt;h2 id="скрипт-btrfsmaintenance">&lt;span class="section-num">5&lt;/span> Скрипт btrfsmaintenance&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">5.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Выполняемые действия:
&lt;ul>
&lt;li>периодическая проверка целостности;&lt;/li>
&lt;li>периодическая балансировка;&lt;/li>
&lt;li>периодический trim для SSD;&lt;/li>
&lt;li>периодическая дефрагментация.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/kdave/btrfsmaintenance" target="_blank" rel="noopener">https://github.com/kdave/btrfsmaintenance&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="установка">&lt;span class="section-num">5.2&lt;/span> Установка&lt;/h3>
&lt;ul>
&lt;li>Gentoo Linux
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge sys-fs/btrfsmaintenance
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="запуск">&lt;span class="section-num">5.3&lt;/span> Запуск&lt;/h3>
&lt;ul>
&lt;li>Следует выбрать один из вариантов.&lt;/li>
&lt;li>Обновление таймеров через &lt;em>systemd&lt;/em> (при каждой загрузке системы):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now btrfsmaintenance-refresh.path
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Ручное обновление таймеров через &lt;em>systemd&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/share/btrfsmaintenance/btrfsmaintenance-refresh-cron.sh systemd-timer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Ручное обновление таблиц через &lt;em>crond&lt;/em> (без &lt;em>systemd&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/share/btrfsmaintenance/btrfsmaintenance-refresh-cron.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="удаление">&lt;span class="section-num">5.4&lt;/span> Удаление&lt;/h3>
&lt;ul>
&lt;li>Данные действия выполняют обычно менеджеры пакетов.&lt;/li>
&lt;li>Для удаления всех таймеров запустите:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/share/btrfsmaintenance/btrfsmaintenance-refresh-cron.sh uninstall
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="фалы-конфигурации">&lt;span class="section-num">5.5&lt;/span> Фалы конфигурации&lt;/h3>
&lt;ul>
&lt;li>В зависимости от дистрибутива конфигурация может находиться в следующих файлах:
&lt;ul>
&lt;li>&lt;code>/etc/sysconfig/btrfsmaintenance&lt;/code>: RedHat, SUSE и производные;&lt;/li>
&lt;li>&lt;code>/etc/default/btrfsmaintenance&lt;/code>: Debian и производные, Gentoo.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В качестве шаблона для этих файлов используется &lt;code>sysconfig.btrfsmaintenance&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>Установка загрузчика grub</title><link>https://yamadharma.github.io/ru/post/2021/09/19/installing-grub-bootloader/</link><pubDate>Sun, 19 Sep 2021 13:58:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/19/installing-grub-bootloader/</guid><description>&lt;p>Установка загрузчика grub2.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-с-uefi">&lt;span class="section-num">2&lt;/span> Установка с UEFI&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-в-режиме-uefi">&lt;span class="section-num">2.1&lt;/span> Установка в режиме UEFI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-без-доступа-к-uefi">&lt;span class="section-num">2.2&lt;/span> Установка без доступа к UEFI&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-в-режиме-chroot">&lt;span class="section-num">3&lt;/span> Установка в режиме chroot&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подмонтировать-каталоги">&lt;span class="section-num">3.1&lt;/span> Подмонтировать каталоги&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подмонтировать-виртуальные-файловые-системы">&lt;span class="section-num">3.2&lt;/span> Подмонтировать виртуальные файловые системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подмонтировать-виртуальные-файловые-системы-для-случая-uefi">&lt;span class="section-num">3.3&lt;/span> Подмонтировать виртуальные файловые системы для случая UEFI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перейти-в-chroot">&lt;span class="section-num">3.4&lt;/span> Перейти в chroot&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установим-grub">&lt;span class="section-num">3.5&lt;/span> Установим grub&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.gnu.org/software/grub/grub.html" target="_blank" rel="noopener">https://www.gnu.org/software/grub/grub.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-с-uefi">&lt;span class="section-num">2&lt;/span> Установка с UEFI&lt;/h2>
&lt;h3 id="установка-в-режиме-uefi">&lt;span class="section-num">2.1&lt;/span> Установка в режиме UEFI&lt;/h3>
&lt;ul>
&lt;li>Обычно разделы монтируются следующим образом:
&lt;ul>
&lt;li>&lt;code>/boot&lt;/code>: загрузочный раздел (значение по умолчанию для опции &lt;code>--boot-directory&lt;/code>);&lt;/li>
&lt;li>&lt;code>/boot/efi&lt;/code>: раздел UEFI (значение по умолчанию для опции &lt;code>--efi-directory&lt;/code>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Установка осуществляется следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grub-install --boot-directory&lt;span class="o">=&lt;/span>/boot --efi-directory&lt;span class="o">=&lt;/span>/boot/efi --target&lt;span class="o">=&lt;/span>x86_64-efi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если используются значения по умолчанию, можно просто выполнить:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grub-install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-без-доступа-к-uefi">&lt;span class="section-num">2.2&lt;/span> Установка без доступа к UEFI&lt;/h3>
&lt;ul>
&lt;li>Используется, если нужно установить EFI-версию GRUB2
&lt;ul>
&lt;li>из системы, загруженной в режиме BIOS;&lt;/li>
&lt;li>для другой архитектуры;&lt;/li>
&lt;li>на сменный носитель.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>При отсутствии доступа к переменным UEFI (&lt;code>efibootmgr&lt;/code> не работает):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grub-install --boot-directory&lt;span class="o">=&lt;/span>/boot --efi-directory&lt;span class="o">=&lt;/span>/boot/efi --target&lt;span class="o">=&lt;/span>x86_64-efi --removable
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-в-режиме-chroot">&lt;span class="section-num">3&lt;/span> Установка в режиме chroot&lt;/h2>
&lt;h3 id="подмонтировать-каталоги">&lt;span class="section-num">3.1&lt;/span> Подмонтировать каталоги&lt;/h3>
&lt;ul>
&lt;li>Создадим точку монтирования
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем партиции.
&lt;ul>
&lt;li>Например, для btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nv">subvol&lt;/span>&lt;span class="o">=&lt;/span>@ /dev/sda4 /mnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda2 /mnt/boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda1 /mnt/boot/efi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nv">subvol&lt;/span>&lt;span class="o">=&lt;/span>@var /dev/sda4 /mnt/var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nv">subvol&lt;/span>&lt;span class="o">=&lt;/span>@var-tmp /dev/sda4 /mnt/var/tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nv">subvol&lt;/span>&lt;span class="o">=&lt;/span>@home /dev/sda4 /mnt/home
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="подмонтировать-виртуальные-файловые-системы">&lt;span class="section-num">3.2&lt;/span> Подмонтировать виртуальные файловые системы&lt;/h3>
&lt;ul>
&lt;li>Для функционирования окружения &lt;em>chroot&lt;/em> необходимо подключить виртуальные файловые системы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -t proc proc /mnt/proc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -t sysfs sys /mnt/sys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /dev /mnt/dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -t devpts pts /mnt/dev/pts/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /run /mnt/run
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="подмонтировать-виртуальные-файловые-системы-для-случая-uefi">&lt;span class="section-num">3.3&lt;/span> Подмонтировать виртуальные файловые системы для случая UEFI&lt;/h3>
&lt;ul>
&lt;li>Для доступа к переменным UEFI нужно подмонтировать соответствующую виртуальную файловую систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -t efivarfs efivarfs /mnt/sys/firmware/efi/efivars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перейти-в-chroot">&lt;span class="section-num">3.4&lt;/span> Перейти в chroot&lt;/h3>
&lt;ul>
&lt;li>Перейдём в окружение chroot
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chroot /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установим-grub">&lt;span class="section-num">3.5&lt;/span> Установим grub&lt;/h3>
&lt;ul>
&lt;li>Установка grub выполняется стандартным образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grub-install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grub-mkconfig -o /boot/grub/grub.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Система виртуализации VirtualBox</title><link>https://yamadharma.github.io/ru/post/2021/09/17/virtualbox-virtualization-system/</link><pubDate>Fri, 17 Sep 2021 11:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/17/virtualbox-virtualization-system/</guid><description>&lt;p>Система виртуализации VirtualBox.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настойка-параметров">&lt;span class="section-num">2&lt;/span> Настойка параметров&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-хост-клавиши">&lt;span class="section-num">2.1&lt;/span> Настройка хост-клавиши&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#графический-интерфейс">&lt;span class="section-num">2.1.1&lt;/span> Графический интерфейс&lt;/a>&lt;/li>
&lt;li>&lt;a href="#командная-строка">&lt;span class="section-num">2.1.2&lt;/span> Командная строка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#папка-виртуальных-машин">&lt;span class="section-num">2.2&lt;/span> Папка виртуальных машин&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#значения-по-умолчанию">&lt;span class="section-num">2.2.1&lt;/span> Значения по умолчанию&lt;/a>&lt;/li>
&lt;li>&lt;a href="#графический-интерфейс">&lt;span class="section-num">2.2.2&lt;/span> Графический интерфейс&lt;/a>&lt;/li>
&lt;li>&lt;a href="#командная-строка">&lt;span class="section-num">2.2.3&lt;/span> Командная строка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#ошибки-при-эксплуатации">&lt;span class="section-num">3&lt;/span> Ошибки при эксплуатации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#macos">&lt;span class="section-num">3.1&lt;/span> MacOS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.virtualbox.org/" target="_blank" rel="noopener">https://www.virtualbox.org/&lt;/a>.&lt;/li>
&lt;li>Лицензия: GNU GPL-2 + проприетарная (&lt;a href="https://www.virtualbox.org/wiki/VirtualBox_PUEL" target="_blank" rel="noopener">https://www.virtualbox.org/wiki/VirtualBox_PUEL&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="настойка-параметров">&lt;span class="section-num">2&lt;/span> Настойка параметров&lt;/h2>
&lt;h3 id="настройка-хост-клавиши">&lt;span class="section-num">2.1&lt;/span> Настройка хост-клавиши&lt;/h3>
&lt;h4 id="графический-интерфейс">&lt;span class="section-num">2.1.1&lt;/span> Графический интерфейс&lt;/h4>
&lt;ul>
&lt;li>В меню выберите &lt;em>Файл&lt;/em>, &lt;em>Настройки&lt;/em>.&lt;/li>
&lt;li>Выберите &lt;em>Ввод&lt;/em>, вкладка &lt;em>Виртуальная машина&lt;/em>.&lt;/li>
&lt;li>Выберите &lt;em>Сочетание клавиш&lt;/em> в строке &lt;em>Хост-комбинация&lt;/em>.&lt;/li>
&lt;li>Нажмите новое сочетание клавиш.&lt;/li>
&lt;li>Нажмите ОК, чтобы сохранить изменения.&lt;/li>
&lt;/ul>
&lt;h4 id="командная-строка">&lt;span class="section-num">2.1.2&lt;/span> Командная строка&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Проверьте текущую комбинацию для хост-клавиши:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">VBoxManage getextradata global GUI/Input/HostKeyCombination
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>По умолчанию установлена комбинация &lt;code>65508&lt;/code>, соответствующая правой клавише &lt;code>Ctrl&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Установите нужную клавишу (в примере клавиша &lt;em>Menu&lt;/em>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">VBoxManage setextradata global GUI/Input/HostKeyCombination &lt;span class="m">65383&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Комбинации клавиш можно, например, посмотреть на странице &lt;a href="https://pythonhosted.org/pyglet/api/pyglet.window.key-module.html" target="_blank" rel="noopener">https://pythonhosted.org/pyglet/api/pyglet.window.key-module.html&lt;/a>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="папка-виртуальных-машин">&lt;span class="section-num">2.2&lt;/span> Папка виртуальных машин&lt;/h3>
&lt;h4 id="значения-по-умолчанию">&lt;span class="section-num">2.2.1&lt;/span> Значения по умолчанию&lt;/h4>
&lt;ul>
&lt;li>Linux: &lt;code>$HOME/VirtualBox VMs&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="графический-интерфейс">&lt;span class="section-num">2.2.2&lt;/span> Графический интерфейс&lt;/h4>
&lt;ul>
&lt;li>В меню выберите &lt;em>Файл&lt;/em>, &lt;em>Настройки&lt;/em>.&lt;/li>
&lt;li>Выберите &lt;em>Общие&lt;/em>, поле &lt;em>Папка для машин по умолчанию&lt;/em>.&lt;/li>
&lt;li>Установите новое значение, например &lt;code>/var/vm&lt;/code>.&lt;/li>
&lt;li>Нажмите ОК, чтобы сохранить изменения.&lt;/li>
&lt;/ul>
&lt;h4 id="командная-строка">&lt;span class="section-num">2.2.3&lt;/span> Командная строка&lt;/h4>
&lt;ul>
&lt;li>Установим папку для виртуальных машине в &lt;code>/var/vm&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">VBoxManage setproperty machinefolder /var/vm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно восстановить значение по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">VBoxManage setproperty machinefolder default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="ошибки-при-эксплуатации">&lt;span class="section-num">3&lt;/span> Ошибки при эксплуатации&lt;/h2>
&lt;h3 id="macos">&lt;span class="section-num">3.1&lt;/span> MacOS&lt;/h3>
&lt;ul>
&lt;li>Начиная с версии MacOS 10.13 требуется ряд новых полномочий для программного обеспечения.&lt;/li>
&lt;li>После установки кнопка с запросом разрешений находится в панели &amp;ldquo;Системные настройки&amp;rdquo;, раздел &amp;ldquo;Безопасность и конфиденциальность&amp;rdquo;.&lt;/li>
&lt;li>Данная кнопка активна примерно полчаса после установки программного обеспечения, после пропадает.&lt;/li>
&lt;li>В этом случае следует удалить программный продукт и установить заново.&lt;/li>
&lt;li>После этого добавить приложению разрешения.&lt;/li>
&lt;/ul></description></item><item><title>XDG. Пользовательские каталоги</title><link>https://yamadharma.github.io/ru/post/2021/09/16/xdg-user-directories/</link><pubDate>Thu, 16 Sep 2021 20:15:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/16/xdg-user-directories/</guid><description>&lt;p>Пользовательские каталоги по стандарту XDG.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#программы">&lt;span class="section-num">2&lt;/span> Программы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-каталогов">&lt;span class="section-num">2.1&lt;/span> Создание каталогов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запрос-имён-каталогов">&lt;span class="section-num">2.2&lt;/span> Запрос имён каталогов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конфигурационные-файлы">&lt;span class="section-num">3&lt;/span> Конфигурационные файлы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#локализация-названий-каталогов">&lt;span class="section-num">4&lt;/span> Локализация названий каталогов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Стандарт XDG задаёт стандартные имена для пользовательских каталогов.&lt;/li>
&lt;/ul>
&lt;h2 id="программы">&lt;span class="section-num">2&lt;/span> Программы&lt;/h2>
&lt;h3 id="создание-каталогов">&lt;span class="section-num">2.1&lt;/span> Создание каталогов&lt;/h3>
&lt;ul>
&lt;li>Для создания каталогов стандарта XDG служит программа &lt;code>xdg-user-dirs-update&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="запрос-имён-каталогов">&lt;span class="section-num">2.2&lt;/span> Запрос имён каталогов&lt;/h3>
&lt;ul>
&lt;li>Программа &lt;code>xdg-user-dir&lt;/code> служит для запроса имён каталогов, соответствующих стандартным переменным.&lt;/li>
&lt;li>Например, для получения каталога для переменной &lt;code>XDG_TEMPLATES_DIR&lt;/code> (это каталог, содержащий шаблоны):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-user-dir TEMPLATES
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурационные-файлы">&lt;span class="section-num">3&lt;/span> Конфигурационные файлы&lt;/h2>
&lt;ul>
&lt;li>Включение использования каталогов XDG и их кодировка задаются в файлах:
&lt;ul>
&lt;li>&lt;code>/etc/xdg/user-dirs.conf&lt;/code>: уровень системы;&lt;/li>
&lt;li>&lt;code>~/.config/user-dirs.conf&lt;/code>: уровень пользователя.&lt;/li>
&lt;li>Содержание данного файла имеет вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">filename_encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">UTF-8&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Имена каталогов по умолчанию (системный уровень) находятся в файле &lt;code>/etc/xdg/user-dirs.defaults&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Default settings for user directories&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The values are relative pathnames from the home directory and&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># will be translated on a per-path-element basis into the users locale&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DESKTOP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Desktop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DOWNLOAD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Downloads&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">TEMPLATES&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Templates&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">PUBLICSHARE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Public&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DOCUMENTS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Documents&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">MUSIC&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Music&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">PICTURES&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Pictures&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">VIDEOS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Videos&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Another alternative is:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#MUSIC=Documents/Music&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#PICTURES=Documents/Pictures&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#VIDEOS=Documents/Videos&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Локальный файл конфигурации &lt;code>~/.config/user-dirs.dirs&lt;/code> используется для явного задания имён каталогов.
&lt;ul>
&lt;li>Например, файл &lt;code>~/.config/user-dirs.dirs&lt;/code> со стандартными английскими названиями:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_DESKTOP_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Desktop&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_DOCUMENTS_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Documents&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_DOWNLOAD_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Downloads&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_MUSIC_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Music&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_PICTURES_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Pictures&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_PUBLICSHARE_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Public&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_TEMPLATES_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Templates&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_VIDEOS_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Videos&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Редактировать этот файл можно как непосредственно, так и с помощью утилиты &lt;code>xdg-user-dirs-update&lt;/code>.&lt;/li>
&lt;li>Например, зададим значение &lt;code>XDG_DOWNLOAD_DIR&lt;/code> как &lt;code>$HOME/Internet&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-user-dirs-update --set DOWNLOAD ~/Internet
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Локальный файл конфигурации &lt;code>~/.config/user-dirs.locale&lt;/code> используется для явной установки локали.&lt;/li>
&lt;/ul>
&lt;h2 id="локализация-названий-каталогов">&lt;span class="section-num">4&lt;/span> Локализация названий каталогов&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Иногда русские названия стандартных каталогов не очень удобны. Например, при работе в консоли приходится переключать язык.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Для принудительного создания каталогов с английскими именами можно использовать:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LC_ALL&lt;/span>&lt;span class="o">=&lt;/span>en_US xdg-user-dirs-update --force
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Для фиксации локали для каталогов нужно задать её в файле конфигурации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;en_US&amp;#39;&lt;/span> &amp;gt; ~/.config/user-dirs.locale
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>После этого надо пересоздать каталоги:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LC_ALL&lt;/span>&lt;span class="o">=&lt;/span>en_US xdg-user-dirs-update --force
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Менеджер библиографической информации Ebib</title><link>https://yamadharma.github.io/ru/post/2021/09/14/emacs-ebib-bibliography-manager/</link><pubDate>Tue, 14 Sep 2021 16:19:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/14/emacs-ebib-bibliography-manager/</guid><description>&lt;p>Менеджер библиографической информации &lt;em>Ebib&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#организация-библиографической-информации">&lt;span class="section-num">2&lt;/span> Организация библиографической информации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-списками-чтения">&lt;span class="section-num">3&lt;/span> Управление списками чтения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">3.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#комбинации-клавиш">&lt;span class="section-num">3.2&lt;/span> Комбинации клавиш&lt;/a>&lt;/li>
&lt;li>&lt;a href="#шаблоны-захвата">&lt;span class="section-num">3.3&lt;/span> Шаблоны захвата&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#модификаторы-шаблона">&lt;span class="section-num">3.3.1&lt;/span> Модификаторы шаблона&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пример-шаблона-захвата">&lt;span class="section-num">3.3.2&lt;/span> Пример шаблона захвата&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://joostkremers.github.io/ebib/" target="_blank" rel="noopener">https://joostkremers.github.io/ebib/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/joostkremers/ebib" target="_blank" rel="noopener">https://github.com/joostkremers/ebib&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://joostkremers.github.io/ebib/ebib-manual.html" target="_blank" rel="noopener">https://joostkremers.github.io/ebib/ebib-manual.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="организация-библиографической-информации">&lt;span class="section-num">2&lt;/span> Организация библиографической информации&lt;/h2>
&lt;h2 id="управление-списками-чтения">&lt;span class="section-num">3&lt;/span> Управление списками чтения&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">3.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Есть возможность управлять списком чтения в виде org-файла.&lt;/li>
&lt;li>Имя файла задаётся &lt;code>ebib-reading-list-file&lt;/code>.&lt;/li>
&lt;li>В строке режима буфера записи будет отображаться &lt;code>[R]&lt;/code> для записи из списка чтения.&lt;/li>
&lt;/ul>
&lt;h3 id="комбинации-клавиш">&lt;span class="section-num">3.2&lt;/span> Комбинации клавиш&lt;/h3>
&lt;ul>
&lt;li>&lt;code>R d&lt;/code>: пометить запись как выполненную.&lt;/li>
&lt;li>&lt;code>R a&lt;/code>: добавить текущую запись в список чтения.&lt;/li>
&lt;li>&lt;code>R v&lt;/code>: просмотр листа чтения.&lt;/li>
&lt;/ul>
&lt;h3 id="шаблоны-захвата">&lt;span class="section-num">3.3&lt;/span> Шаблоны захвата&lt;/h3>
&lt;ul>
&lt;li>Шаблон задаётся в переменной &lt;code>ebib-reading-list-template&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="модификаторы-шаблона">&lt;span class="section-num">3.3.1&lt;/span> Модификаторы шаблона&lt;/h4>
&lt;ul>
&lt;li>&lt;code>%K&lt;/code> (&lt;code>ebib-reading-list-create-org-identifier&lt;/code>)
&lt;ul>
&lt;li>Ключ записи. Заносится в свойства записи как &lt;code>:Custom_id:&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%T&lt;/code> (&lt;code>ebib-create-org-title&lt;/code>)
&lt;ul>
&lt;li>Название публикации&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%M&lt;/code> (&lt;code>ebib-reading-list-todo-marker&lt;/code>)
&lt;ul>
&lt;li>Метка выполнения записи.&lt;/li>
&lt;li>По умолчанию &lt;code>TODO&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%L&lt;/code> (&lt;code>ebib-create-org-link&lt;/code>)
&lt;ul>
&lt;li>Ссылка на файл публикации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%F&lt;/code> (&lt;code>ebib-create-org-file-link&lt;/code>)
&lt;ul>
&lt;li>Ссылка на файл публикации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%D&lt;/code> (&lt;code>ebib-create-org-doi-link&lt;/code>)
&lt;ul>
&lt;li>Ссылка на &lt;em>doi&lt;/em> публикации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%U&lt;/code> (&lt;code>bib-create-org-url-link&lt;/code>)
&lt;ul>
&lt;li>Ссылка на &lt;em>url&lt;/em> публикации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="пример-шаблона-захвата">&lt;span class="section-num">3.3.2&lt;/span> Пример шаблона захвата&lt;/h4>
&lt;ul>
&lt;li>Шаблон по умолчанию имеет вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">ebib-reading-list-template&lt;/span> &lt;span class="s">&amp;#34;* %M %T\n:PROPERTIES:\n%K\n:END:\n%F\n&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Vdirsyncer. Синхронизация адресной книги и календаря</title><link>https://yamadharma.github.io/ru/post/2021/09/12/vdirsyncer-synchronizing-address-book-calendar/</link><pubDate>Sun, 12 Sep 2021 16:01:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/12/vdirsyncer-synchronizing-address-book-calendar/</guid><description>&lt;p>Синхронизация локальной базы контактов и календаря.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурирование">&lt;span class="section-num">3&lt;/span> Конфигурирование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#типовая-конфигурация">&lt;span class="section-num">3.1&lt;/span> Типовая конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-с-google">&lt;span class="section-num">3.2&lt;/span> Синхронизация с Google&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-с-office-365">&lt;span class="section-num">3.3&lt;/span> Синхронизация с Office 365&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-с-yandex">&lt;span class="section-num">3.4&lt;/span> Синхронизация с Yandex&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-с-fuux">&lt;span class="section-num">3.5&lt;/span> Синхронизация с Fuux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#утилиты-для-работы-с-vdir">&lt;span class="section-num">4&lt;/span> Утилиты для работы с &lt;em>vdir&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#работа-из-emacs">&lt;span class="section-num">5&lt;/span> Работа из Emacs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обслуживание">&lt;span class="section-num">6&lt;/span> Обслуживание&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#запуск-через-таймер-systemd">&lt;span class="section-num">6.1&lt;/span> Запуск через таймер systemd&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://vdirsyncer.pimutils.org/" target="_blank" rel="noopener">http://vdirsyncer.pimutils.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/pimutils/vdirsyncer" target="_blank" rel="noopener">https://github.com/pimutils/vdirsyncer&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Linux
&lt;ul>
&lt;li>
&lt;p>Gentoo&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge vdirsyncer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурирование">&lt;span class="section-num">3&lt;/span> Конфигурирование&lt;/h2>
&lt;h3 id="типовая-конфигурация">&lt;span class="section-num">3.1&lt;/span> Типовая конфигурация&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>В поставке идёт пример файла конфигурации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># An example configuration for vdirsyncer.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Move it to ~/.vdirsyncer/config or ~/.config/vdirsyncer/config and edit it.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Run `vdirsyncer --help` for CLI usage.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Optional parameters are commented out.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This file doesn&amp;#39;t document all available parameters, see&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># http://vdirsyncer.pimutils.org/ for the rest of them.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[general]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># A folder where vdirsyncer can store some metadata about each pair.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">status_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;~/.vdirsyncer/status/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># CARDDAV&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[pair bob_contacts]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># A `[pair &amp;lt;name&amp;gt;]` block defines two storages `a` and `b` that should be&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># synchronized. The definition of these storages follows in `[storage &amp;lt;name&amp;gt;]`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># blocks. This is similar to accounts in OfflineIMAP.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;bob_contacts_local&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;bob_contacts_remote&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Synchronize all collections that can be found.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># You need to run `vdirsyncer discover` if new calendars/addressbooks are added&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># on the server.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">collections&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">[&amp;#34;from a&amp;#34;, &amp;#34;from b&amp;#34;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Synchronize the &amp;#34;display name&amp;#34; property into a local file (~/.contacts/displayname).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">metadata&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">[&amp;#34;displayname&amp;#34;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># To resolve a conflict the following values are possible:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># `null` - abort when collisions occur (default)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># `&amp;#34;a wins&amp;#34;` - assume a&amp;#39;s items to be more up-to-date&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># `&amp;#34;b wins&amp;#34;` - assume b&amp;#39;s items to be more up-to-date&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#conflict_resolution = null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[storage bob_contacts_local]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># A storage references actual data on a remote server or on the local disk.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Similar to repositories in OfflineIMAP.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;filesystem&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;~/.contacts/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">fileext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;.vcf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[storage bob_contacts_remote]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;carddav&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;https://owncloud.example.com/remote.php/carddav/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#username =&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The password can also be fetched from the system password storage, netrc or a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># custom command. See http://vdirsyncer.pimutils.org/en/stable/keyring.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#password =&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># CALDAV&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[pair bob_calendar]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;bob_calendar_local&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;bob_calendar_remote&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">collections&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">[&amp;#34;from a&amp;#34;, &amp;#34;from b&amp;#34;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Calendars also have a color property&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">metadata&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">[&amp;#34;displayname&amp;#34;, &amp;#34;color&amp;#34;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[storage bob_calendar_local]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;filesystem&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;~/.calendars/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">fileext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;.ics&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[storage bob_calendar_remote]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;caldav&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;https://owncloud.example.com/remote.php/caldav/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#username =&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#password =&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-с-google">&lt;span class="section-num">3.2&lt;/span> Синхронизация с Google&lt;/h3>
&lt;h3 id="синхронизация-с-office-365">&lt;span class="section-num">3.3&lt;/span> Синхронизация с Office 365&lt;/h3>
&lt;h3 id="синхронизация-с-yandex">&lt;span class="section-num">3.4&lt;/span> Синхронизация с Yandex&lt;/h3>
&lt;h3 id="синхронизация-с-fuux">&lt;span class="section-num">3.5&lt;/span> Синхронизация с Fuux&lt;/h3>
&lt;h2 id="утилиты-для-работы-с-vdir">&lt;span class="section-num">4&lt;/span> Утилиты для работы с &lt;em>vdir&lt;/em>&lt;/h2>
&lt;h2 id="работа-из-emacs">&lt;span class="section-num">5&lt;/span> Работа из Emacs&lt;/h2>
&lt;h2 id="обслуживание">&lt;span class="section-num">6&lt;/span> Обслуживание&lt;/h2>
&lt;h3 id="запуск-через-таймер-systemd">&lt;span class="section-num">6.1&lt;/span> Запуск через таймер systemd&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Дистрибутив включает файлы модулей для запуска с определённым интервалом (по умолчанию каждые 15 ± 5 минут).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Файл &lt;code>vdirsyncer.service&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Unit]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Synchronize calendars and contacts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Documentation&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">https://vdirsyncer.readthedocs.org/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Service]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">ExecStart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">/usr/bin/vdirsyncer sync&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">RuntimeMaxSec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Restart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">on-failure&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Файл &lt;code>vdirsyncer.timer&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Unit]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Synchronize vdirs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Timer]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">OnBootSec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">5m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">OnUnitActiveSec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">AccuracySec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">5m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Install]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">WantedBy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">timers.target&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Для запуска на уровне пользователя скопируйте их в каталог &lt;code>~/.config/systemd/user&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Для активации и запуска выполните:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> vdirsyncer.timer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl --user start vdirsyncer.timer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Контакты. Google-contacts</title><link>https://yamadharma.github.io/ru/post/2021/09/11/emacs-contacts-google-contacts/</link><pubDate>Sat, 11 Sep 2021 13:33:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/11/emacs-contacts-google-contacts/</guid><description>&lt;p>Пакет &lt;em>google-contacts&lt;/em>.&lt;/p>
&lt;p>На данный момент не работает из-за изменений API Google (замена Contacts API на People API).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#первый-запуск">&lt;span class="section-num">2.1&lt;/span> Первый запуск&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/jd/google-contacts.el" target="_blank" rel="noopener">https://github.com/jd/google-contacts.el&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/h2>
&lt;h3 id="первый-запуск">&lt;span class="section-num">2.1&lt;/span> Первый запуск&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Запустите google-contacts:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">M-x&lt;/span> &lt;span class="nv">google-contacts&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Будет запрошена учётная запись на google и будет предложено залогиниться.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Запрос откроется в &lt;em>eww&lt;/em> &amp;mdash; броузере emacs. Через меню откройте этот URL во внешнем броузере.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>При первом использовании необходимо вставить токен &lt;code>oauth2&lt;/code> в минибуфер emacs.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Затем необходимо ввести кодовую фразу для шифрования токена &lt;code>oauth2&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Это происходит потому, что &lt;em>google-contacts&lt;/em> использует &lt;code>oauth2.el&lt;/code>, который хранит информацию аутентификации в зашифрованном файле GPG с использованием &lt;code>plstore.el&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Если вы не хотите вводить пароль при каждом поиске контактов в Google, вам необходимо установить для &lt;code>plstore-cache-passphrase-for-simric-encryption&lt;/code> значение &lt;code>t&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">plstore-cache-passphrase-for-symmetric-encryption&lt;/span> &lt;span class="no">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Контакты</title><link>https://yamadharma.github.io/ru/post/2021/09/11/emacs-contacts/</link><pubDate>Sat, 11 Sep 2021 13:29:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/11/emacs-contacts/</guid><description>&lt;p>Управление контактами в Emacs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#системы-управления-контактами">&lt;span class="section-num">1&lt;/span> Системы управления контактами&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="системы-управления-контактами">&lt;span class="section-num">1&lt;/span> Системы управления контактами&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/11/emacs-contacts-google-contacts/">Emacs. Контакты. Google-contacts&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Подтома btrfs</title><link>https://yamadharma.github.io/ru/post/2021/08/27/btrfs-subvolumes/</link><pubDate>Fri, 27 Aug 2021 11:41:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/08/27/btrfs-subvolumes/</guid><description>&lt;p>Подтома (subvolumes) btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#именование-подтомов">&lt;span class="section-num">1&lt;/span> Именование подтомов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#список-подтомов">&lt;span class="section-num">1.1&lt;/span> Список подтомов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#минимально-рекомендуемый-набор-подтомов">&lt;span class="section-num">1.2&lt;/span> Минимально рекомендуемый набор подтомов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#создание-подтомов">&lt;span class="section-num">2&lt;/span> Создание подтомов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отключение-cow">&lt;span class="section-num">3&lt;/span> Отключение CoW&lt;/a>&lt;/li>
&lt;li>&lt;a href="#монтирование-подтомов-в-fstab">&lt;span class="section-num">4&lt;/span> Монтирование подтомов в fstab&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-нового-подтома">&lt;span class="section-num">5&lt;/span> Создание нового подтома&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="именование-подтомов">&lt;span class="section-num">1&lt;/span> Именование подтомов&lt;/h2>
&lt;ul>
&lt;li>Для определённости я называю подтома по шаблону &lt;code>@имя_подтома&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="список-подтомов">&lt;span class="section-num">1.1&lt;/span> Список подтомов&lt;/h3>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Возможные наименования подтомов btrfs
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Подтом&lt;/th>
&lt;th>Точка монтирования&lt;/th>
&lt;th>Описание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>@&lt;/code>&lt;/td>
&lt;td>&lt;code>/&lt;/code>&lt;/td>
&lt;td>Корневой каталог (системные файлы)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@home&lt;/code>&lt;/td>
&lt;td>&lt;code>/home&lt;/code>&lt;/td>
&lt;td>Домашний каталог с пользовательскими данными&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@snapshots&lt;/code>&lt;/td>
&lt;td>‒&lt;/td>
&lt;td>Корневой подтом для снапшотов&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@snapshots/root&lt;/code>&lt;/td>
&lt;td>&lt;code>/.snapshots&lt;/code>&lt;/td>
&lt;td>Содержит снапшоты корня, которые создает &lt;code>snapper&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@snapshots/home&lt;/code>&lt;/td>
&lt;td>&lt;code>/home/.snapshots&lt;/code>&lt;/td>
&lt;td>Содержит снапшоты домашнего каталога, которые создает &lt;code>snapper&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@machines&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/lib/machines&lt;/code>&lt;/td>
&lt;td>Если не существует, то создаст systemd&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@portables&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/lib/portables&lt;/code>&lt;/td>
&lt;td>Если не существует, то создаст systemd&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@docker&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/lib/docker&lt;/code>&lt;/td>
&lt;td>Докер создаёт подтома в &lt;code>./btrfs/subvolumes&lt;/code> либо в &lt;code>./XXX/btrfs/subvolumes&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@var&lt;/code>&lt;/td>
&lt;td>&lt;code>/var&lt;/code>&lt;/td>
&lt;td>Аналогично выше описанному&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@var_lib&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/lib&lt;/code>&lt;/td>
&lt;td>Вместо создания &lt;code>@machines&lt;/code>, &lt;code>@portables&lt;/code>, &lt;code>@docker&lt;/code> можно создать только этот, если в &lt;code>/var/lib&lt;/code> не будет храниться чего-то важного&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@var_tmp&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/tmp&lt;/code>&lt;/td>
&lt;td>Содержит временные файлы. Должен монтироваться с &lt;code>nodatacow&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@var_log&lt;/code> или &lt;code>@log&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/log&lt;/code>&lt;/td>
&lt;td>Содержит большое количество файлов, которые пишутся маленькими частями. Должен монтироваться с &lt;code>nodatacow&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@swap&lt;/code>&lt;/td>
&lt;td>&lt;code>/swap&lt;/code> или &lt;code>/var/swap&lt;/code>, или &lt;code>/var/lib/swap&lt;/code>&lt;/td>
&lt;td>Подтом для файла подкачки. Должен монтироваться с &lt;code>nodatacow&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/05/20/btrfs-swap-file/">Файл подкачки на btrfs&lt;/a>)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@libvirt&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/lib/libvirt/images&lt;/code>&lt;/td>
&lt;td>Образы для &lt;em>libvirt&lt;/em>. Должен монтироваться с &lt;code>nodatacow&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="минимально-рекомендуемый-набор-подтомов">&lt;span class="section-num">1.2&lt;/span> Минимально рекомендуемый набор подтомов&lt;/h3>
&lt;ul>
&lt;li>Минимум нужны два подтома: &lt;code>@&lt;/code> и &lt;code>@home&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="создание-подтомов">&lt;span class="section-num">2&lt;/span> Создание подтомов&lt;/h2>
&lt;ul>
&lt;li>При установки системы я создаю подтома следующим образом:
&lt;ul>
&lt;li>Подмонтируем раздел с btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9 /dev/sda4 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим подтома на btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var_tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var_log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage_local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage_com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @libvirt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="отключение-cow">&lt;span class="section-num">3&lt;/span> Отключение CoW&lt;/h2>
&lt;ul>
&lt;li>Для файловых систем с образами виртуальных машин следует отключить CoW (copy-on-write).&lt;/li>
&lt;li>Так же стоит отключить &lt;em>CoW&lt;/em> для часто изменяемых файлов (например, журналов).&lt;/li>
&lt;li>Подмонтируем файловую систему &lt;code>btrfs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@vm /dev/sda4 /mnt/gentoo/var/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@libvirt /dev/sda4 /mnt/gentoo/var/lib/libvirt/images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var_log /dev/sda4 /mnt/gentoo/var/log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var_tmp /dev/sda4 /mnt/gentoo/var/tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключим для этого подтома CoW:
&lt;ul>
&lt;li>Для &lt;code>/var/vm&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C vm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для &lt;code>/var/lib/libvirt/images&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/lib/libvirt/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C images
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для &lt;code>/var/log&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для &lt;code>/var/tmp&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Посмотреть результат можно командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lsattr -a /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lsattr -a /mnt/gentoo/var/lib/libvirt/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="монтирование-подтомов-в-fstab">&lt;span class="section-num">4&lt;/span> Монтирование подтомов в fstab&lt;/h2>
&lt;ul>
&lt;li>При монтировании я указываю универсальный идентификатор (UUID) файловой системы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># /etc/fstab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34; / btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@ 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34; /var btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@var 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34; /var/tmp btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@var_tmp 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34; /var/vm btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@vm 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34; /home btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@home 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34; /usr/portage btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@portage 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34; /usr/local/share/portage btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@portage_local 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34; /com/lib/portage btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@portage_com 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34; /var/lib/libvirt/images btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@libvirt 0 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Идентификатор файловой системы можно узнать следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">blkid /dev/sda4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="создание-нового-подтома">&lt;span class="section-num">5&lt;/span> Создание нового подтома&lt;/h2>
&lt;ul>
&lt;li>После установки системы может возникнуть необходимость создания дополнительных подтомов на существующем томе.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/btrfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount &lt;span class="nv">UUID&lt;/span>&lt;span class="o">=&lt;/span>f8963df3-1320-4bc0-a125-62be185b029e /mnt/btrfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvolume create /mnt/btrfs/@data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключим в &lt;code>/etc/fstab&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34;&lt;/span> /data btrfs relatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@data &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Файловая система btrfs</title><link>https://yamadharma.github.io/ru/post/2021/08/27/btrfs-file-system/</link><pubDate>Fri, 27 Aug 2021 11:33:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/08/27/btrfs-file-system/</guid><description>&lt;p>Файловая система &lt;em>Btrfs&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#свойства">&lt;span class="section-num">1.1&lt;/span> Свойства&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#разное">&lt;span class="section-num">2&lt;/span> Разное&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обслуживание-btrfs">&lt;span class="section-num">3&lt;/span> Обслуживание btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#необходимое-программное-обеспечение">&lt;span class="section-num">4&lt;/span> Необходимое программное обеспечение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#btrfs-progs">&lt;span class="section-num">4.1&lt;/span> btrfs-progs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#btrfsmaintenance">&lt;span class="section-num">4.2&lt;/span> btrfsmaintenance&lt;/a>&lt;/li>
&lt;li>&lt;a href="#snapper">&lt;span class="section-num">4.3&lt;/span> snapper&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h3 id="свойства">&lt;span class="section-num">1.1&lt;/span> Свойства&lt;/h3>
&lt;ul>
&lt;li>Копирование при записи (copy on write &amp;mdash; CoW).
&lt;ul>
&lt;li>Все копии файла суммарно занимают на диске столько же места сколько оригинал, а при изменениях файлов данные всегда пишутся в новые страницы.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Снапшоты.
&lt;ul>
&lt;li>Можно делать снимки состояния подтома на лету, а потом вернуть это состояние, например, после неудачного обновления или удаления чего-то нужного, просто отредактировав &lt;code>/etc/fstab&lt;/code> и выполнив &lt;code>mount -o remount mountpoint&lt;/code>.&lt;/li>
&lt;li>Для автоматического создания снапшотов можно использовать утилиту &lt;code>snapper&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Поддержка сжатия.&lt;/li>
&lt;li>Поддержка подтомов.
&lt;ul>
&lt;li>Вместо разделов предпочтительно использовать подтома.&lt;/li>
&lt;li>Подтома имеют динамический размер.&lt;/li>
&lt;li>Снапшоты являются по сути подтомами.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Поддержка дисков SSD.&lt;/li>
&lt;/ul>
&lt;h2 id="разное">&lt;span class="section-num">2&lt;/span> Разное&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/">Перенос Linux на btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-subvolumes/">Подтома btrfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="обслуживание-btrfs">&lt;span class="section-num">3&lt;/span> Обслуживание btrfs&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/23/btrfs-maintenence/">Обслуживание btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/deduplication-btrfs-filesystem/">Дедупликация файловой системы btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/21/btrfs-recovery/">Восстановление btrfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="необходимое-программное-обеспечение">&lt;span class="section-num">4&lt;/span> Необходимое программное обеспечение&lt;/h2>
&lt;h3 id="btrfs-progs">&lt;span class="section-num">4.1&lt;/span> btrfs-progs&lt;/h3>
&lt;ul>
&lt;li>Утилиты для работы с &lt;em>btrfs&lt;/em>.&lt;/li>
&lt;li>Установка
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge sys-fs/btrfs-progs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="btrfsmaintenance">&lt;span class="section-num">4.2&lt;/span> btrfsmaintenance&lt;/h3>
&lt;ul>
&lt;li>Скрипт для регулярного обслуживания файловой системы &lt;em>btrfs&lt;/em>&lt;/li>
&lt;li>Установка
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge sys-fs/btrfsmaintenance
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="snapper">&lt;span class="section-num">4.3&lt;/span> snapper&lt;/h3>
&lt;ul>
&lt;li>Управление снапшотами&lt;/li>
&lt;li>Установка
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-backup/snapper
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Выбор дистрибутива Linux</title><link>https://yamadharma.github.io/ru/post/2021/08/08/choosing-linux-distribution/</link><pubDate>Sun, 08 Aug 2021 11:20:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/08/08/choosing-linux-distribution/</guid><description>&lt;p>Какой дистрибутив Linux выбрать.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#серверный-компьютерный-парк">&lt;span class="section-num">1&lt;/span> Серверный компьютерный парк&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#требования">&lt;span class="section-num">1.1&lt;/span> Требования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#реализация">&lt;span class="section-num">1.2&lt;/span> Реализация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#обучение">&lt;span class="section-num">2&lt;/span> Обучение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#дисплейные-классы">&lt;span class="section-num">2.1&lt;/span> Дисплейные классы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#требования">&lt;span class="section-num">2.1.1&lt;/span> Требования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#реализация">&lt;span class="section-num">2.1.2&lt;/span> Реализация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#домашние-компьютеры-студентов">&lt;span class="section-num">2.2&lt;/span> Домашние компьютеры студентов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#специализированные-дистрибутивы-для-разных-предметов">&lt;span class="section-num">2.3&lt;/span> Специализированные дистрибутивы для разных предметов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#личное-использование">&lt;span class="section-num">3&lt;/span> Личное использование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#требования">&lt;span class="section-num">3.1&lt;/span> Требования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#реализация">&lt;span class="section-num">3.2&lt;/span> Реализация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="серверный-компьютерный-парк">&lt;span class="section-num">1&lt;/span> Серверный компьютерный парк&lt;/h2>
&lt;h3 id="требования">&lt;span class="section-num">1.1&lt;/span> Требования&lt;/h3>
&lt;ul>
&lt;li>Стабильность дистрибутива.&lt;/li>
&lt;li>Всё должно делаться само.&lt;/li>
&lt;li>Как можно больше автоматизации.&lt;/li>
&lt;/ul>
&lt;h3 id="реализация">&lt;span class="section-num">1.2&lt;/span> Реализация&lt;/h3>
&lt;ul>
&lt;li>Под описание подходят:
&lt;ul>
&lt;li>Debian;&lt;/li>
&lt;li>Ubuntu;&lt;/li>
&lt;li>Red Hat.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В качестве основного дистрибутива была принята CentOS.&lt;/li>
&lt;li>В связи с пертурбациями вокруг CentOS (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/">Замена Centos&lt;/a>), предполагается замена на Rocky Linux.&lt;/li>
&lt;/ul>
&lt;h2 id="обучение">&lt;span class="section-num">2&lt;/span> Обучение&lt;/h2>
&lt;h3 id="дисплейные-классы">&lt;span class="section-num">2.1&lt;/span> Дисплейные классы&lt;/h3>
&lt;h4 id="требования">&lt;span class="section-num">2.1.1&lt;/span> Требования&lt;/h4>
&lt;h4 id="реализация">&lt;span class="section-num">2.1.2&lt;/span> Реализация&lt;/h4>
&lt;ul>
&lt;li>В дисплейных классах развёрнут дистрибутив Gentoo.&lt;/li>
&lt;li>Это позволяет настраивать систему так, как будет нужным.&lt;/li>
&lt;/ul>
&lt;h3 id="домашние-компьютеры-студентов">&lt;span class="section-num">2.2&lt;/span> Домашние компьютеры студентов&lt;/h3>
&lt;h3 id="специализированные-дистрибутивы-для-разных-предметов">&lt;span class="section-num">2.3&lt;/span> Специализированные дистрибутивы для разных предметов&lt;/h3>
&lt;h2 id="личное-использование">&lt;span class="section-num">3&lt;/span> Личное использование&lt;/h2>
&lt;h3 id="требования">&lt;span class="section-num">3.1&lt;/span> Требования&lt;/h3>
&lt;ul>
&lt;li>Гибкость.&lt;/li>
&lt;li>Возможность поставить любую программу, любой версии.&lt;/li>
&lt;/ul>
&lt;h3 id="реализация">&lt;span class="section-num">3.2&lt;/span> Реализация&lt;/h3>
&lt;ul>
&lt;li>Для личного использования применяю Gentoo.&lt;/li>
&lt;/ul></description></item><item><title>Синхронизация файлов с помощью syncthing</title><link>https://yamadharma.github.io/ru/post/2021/08/01/synchronizing-files-syncthing/</link><pubDate>Sun, 01 Aug 2021 15:58:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/08/01/synchronizing-files-syncthing/</guid><description>&lt;p>Синхронизация файлов между хостами с помощью &lt;em>syncthing&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#варианты-приложения">&lt;span class="section-num">2&lt;/span> Варианты приложения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Позволяет синхронизировать файлы между несколькими устройствами.&lt;/li>
&lt;li>Лиценизия: MPL-2.0.&lt;/li>
&lt;li>Сайт: &lt;a href="https://syncthing.net/" target="_blank" rel="noopener">https://syncthing.net/&lt;/a>.&lt;/li>
&lt;li>Синхронизация происходит по дате изменения файла.&lt;/li>
&lt;li>Есть поддержка синхронизации на уровне блоков, то есть при небольших изменениях в файле будут синхронизированы только изменившиеся блоки, а не весь файл.&lt;/li>
&lt;li>&lt;em>Syncthing&lt;/em> фактически является заменой &lt;em>BitTorrent Sync&lt;/em> (сейчас &lt;em>Resilio Sync&lt;/em>) (&lt;a href="https://www.resilio.com/" target="_blank" rel="noopener">https://www.resilio.com/&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="варианты-приложения">&lt;span class="section-num">2&lt;/span> Варианты приложения&lt;/h2>
&lt;ul>
&lt;li>Официальный клиент:
&lt;ul>
&lt;li>Сайт: &lt;a href="https://syncthing.net/" target="_blank" rel="noopener">https://syncthing.net/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/syncthing/syncthing" target="_blank" rel="noopener">https://github.com/syncthing/syncthing&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>syncthing-android &amp;mdash; версия для Android:
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/syncthing/syncthing-android" target="_blank" rel="noopener">https://github.com/syncthing/syncthing-android&lt;/a>.&lt;/li>
&lt;li>Google Play: &lt;a href="https://play.google.com/store/apps/details?id=com.nutomic.syncthingandroid" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=com.nutomic.syncthingandroid&lt;/a>.&lt;/li>
&lt;li>F-Droid: &lt;a href="https://f-droid.org/ru/packages/com.nutomic.syncthingandroid/" target="_blank" rel="noopener">https://f-droid.org/ru/packages/com.nutomic.syncthingandroid/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Почта. Google. Настройка почтового клиента</title><link>https://yamadharma.github.io/ru/post/2021/07/06/mail-google-configuring-mail-client/</link><pubDate>Tue, 06 Jul 2021 14:27:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/06/mail-google-configuring-mail-client/</guid><description>&lt;p>Настройка клиента для работы с почтой &lt;em>Google.com&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#поисковые-запросы-в-web-интерфейсе-gmail">&lt;span class="section-num">3&lt;/span> Поисковые запросы в Web-интерфейсе Gmail&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#размер-почтового-сообщения">&lt;span class="section-num">3.1&lt;/span> Размер почтового сообщения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.google.com/" target="_blank" rel="noopener">https://www.google.com/&lt;/a>&lt;/li>
&lt;li>Используются локализованные названия для папок IMAP.&lt;/li>
&lt;li>Папки IMAP (кроме &lt;code>INBOX&lt;/code>) находятся в иерархии &lt;code>[Gmail]&lt;/code>.&lt;/li>
&lt;li>Имена папок нужно передавать в модифицированном UTF-7 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-imap-folder-encoding/">Почта. Кодировка папок IMAP&lt;/a>).&lt;/li>
&lt;li>Необходимо включить доступ по IMAP:
&lt;ul>
&lt;li>Откройте Gmail на компьютере.&lt;/li>
&lt;li>В правом верхнем углу нажмите на значок &lt;code>Настройки&lt;/code>, затем &lt;code>Все настройки&lt;/code>.&lt;/li>
&lt;li>Откройте вкладку &lt;code>Пересылка и POP/IMAP&lt;/code>.&lt;/li>
&lt;li>В разделе &lt;code>Доступ по протоколу IMAP&lt;/code> выберите &lt;code>Включить IMAP&lt;/code>.&lt;/li>
&lt;li>Нажмите &lt;code>Сохранить изменения&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Лимиты по трафику:
&lt;ul>
&lt;li>скачивание по IMAP: не более 2500 МБ в день;&lt;/li>
&lt;li>скачивание по POP: не более 1250 МБ в день;&lt;/li>
&lt;li>загрузка по IMAP: не более 500 МБ в день.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Размер вложения: до 25 МБ.
&lt;ul>
&lt;li>Если размер вложения превышает 25 МБ, web-интерфейс Gmail автоматически добавляет ссылку на Google Диск в электронное письмо вместо того, чтобы включать её в качестве вложения.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Поддерживает двуэтапную авторизацию.&lt;/li>
&lt;li>Для приложений, не поддерживающих двуэтапную авторизацию, следует использовать ключ приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2020/12/25/mail-google-connect/">Почта. Подключение к Google&lt;/a>).&lt;/li>
&lt;li>Google сохраняет всю электронную почту в папке &amp;ldquo;Все сообщения&amp;rdquo;.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/h2>
&lt;h3 id="smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на google.com (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от почтового ящика домена на google.com;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>smtp.gmail.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL:
&lt;ul>
&lt;li>порт &amp;mdash; 465;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>защита соединения &amp;mdash; STARTTLS:
&lt;ul>
&lt;li>порт &amp;mdash; 587.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на google.com (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на google.com;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>imap.gmail.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 993.&lt;/li>
&lt;/ul>
&lt;h3 id="pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на google.com (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на google.com;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>pop.gmail.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 995.&lt;/li>
&lt;/ul>
&lt;h2 id="поисковые-запросы-в-web-интерфейсе-gmail">&lt;span class="section-num">3&lt;/span> Поисковые запросы в Web-интерфейсе Gmail&lt;/h2>
&lt;h3 id="размер-почтового-сообщения">&lt;span class="section-num">3.1&lt;/span> Размер почтового сообщения&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Размер сообщения:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">size:&lt;span class="o">[&lt;/span>size in bytes&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>В дополнение к размеру вы можете использовать операторы поиска, такие как больше, больше, чем меньше, меньше и меньше, чем меньше, чтобы найти файлы любого определенного размера:&lt;/p>
&lt;ul>
&lt;li>&lt;code>larger_than&lt;/code>;&lt;/li>
&lt;li>&lt;code>smaller_than&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Примеры:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Все электронные письма размером более 5 МБ, содержащие файловые вложения:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">size:5mb has:attachment
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Электронные письма размером более 10 МБ, вложения в формате &lt;code>pdf&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">size:10mb has:attachment filename:pdf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Все электронные письма с размером вложений от 5 МБ до 8 МБ:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">larger_than:5m smaller_than:8M
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Почта. Кодировка папок IMAP</title><link>https://yamadharma.github.io/ru/post/2021/07/04/mail-imap-folder-encoding/</link><pubDate>Sun, 04 Jul 2021 20:43:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/04/mail-imap-folder-encoding/</guid><description>&lt;p>Национальные символы в именах почтовых ящиков на сервере должны кодироваться в модифицированную кодировку UTF-7.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#преобразование">&lt;span class="section-num">2&lt;/span> Преобразование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#декодирование">&lt;span class="section-num">2.1&lt;/span> Декодирование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>В соответствие с RFC2060 национальные символы в именах почтовых ящиков на сервере должны кодироваться в модифицированную кодировку UTF-7.&lt;/li>
&lt;li>Отличия от оригинальной UTF-7 связаны с особым значением символа &lt;code>+&lt;/code> в некоторых почтовых системах и символа &lt;code>/&lt;/code> в роли разделителя имён каталогов в Unix.&lt;/li>
&lt;/ul>
&lt;h2 id="преобразование">&lt;span class="section-num">2&lt;/span> Преобразование&lt;/h2>
&lt;h3 id="декодирование">&lt;span class="section-num">2.1&lt;/span> Декодирование&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Алгоритм декодирования имён папок:&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;amp;&lt;/code> -&amp;gt; &lt;code>+&lt;/code>;&lt;/li>
&lt;li>&lt;code>&amp;amp;-&lt;/code> -&amp;gt; &lt;code>&amp;amp;&lt;/code>;&lt;/li>
&lt;li>&lt;code>,&lt;/code> -&amp;gt; &lt;code>/&lt;/code>;&lt;/li>
&lt;li>UTF7 -&amp;gt; Текст.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Код (shell):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;amp;BB4EQgQ,BEAEMAQyBDsENQQ9BD0ESwQ1-&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/&amp;amp;\([^-]\)/+\1/g;s/&amp;amp;-/&amp;amp;/g;s/,/\//g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> iconv -f UTF7 -t UTF8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>В результате получаем:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Отправленные
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Почта. Office365. Настройка почтового клиента</title><link>https://yamadharma.github.io/ru/post/2021/07/04/mail-office365-configuring-mail-client/</link><pubDate>Sun, 04 Jul 2021 17:47:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/04/mail-office365-configuring-mail-client/</guid><description>&lt;p>Настройка клиента для работы с почтой &lt;em>Office365&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.office.com/" target="_blank" rel="noopener">https://www.office.com/&lt;/a>&lt;/li>
&lt;li>Используются стандартные названия для папок IMAP.&lt;/li>
&lt;li>Папки IMAP имеют локализованные названия. В web-интерфейсе они помечаются специальными иконками.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/h2>
&lt;ul>
&lt;li>Информация по настройке: &lt;a href="https://support.microsoft.com/en-us/office/pop-imap-and-smtp-settings-8361e398-8af4-4e97-b147-6c6c4ac95353" target="_blank" rel="noopener">https://support.microsoft.com/en-us/office/pop-imap-and-smtp-settings-8361e398-8af4-4e97-b147-6c6c4ac95353&lt;/a>&lt;/li>
&lt;li>SMTP по умолчанию отключен, его нужно включать в свойствах почтового ящика, опция &amp;ldquo;SMTP с проверкой подлинности&amp;rdquo;:
&lt;ul>
&lt;li>&lt;a href="https://docs.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/authenticated-client-smtp-submission" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/authenticated-client-smtp-submission&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на Office365 (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от почтового ящика домена на Office365;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>smtp.office365.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; STARTTLS;&lt;/li>
&lt;li>порт &amp;mdash; 587.&lt;/li>
&lt;/ul>
&lt;h3 id="imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на Office365 (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на Office365;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>outlook.office365.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 993.&lt;/li>
&lt;/ul>
&lt;h3 id="pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на Office365 (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на Office365;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>outlook.office365.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 995.&lt;/li>
&lt;/ul></description></item><item><title>Почта. Mail.ru. Настройка почтового клиента</title><link>https://yamadharma.github.io/ru/post/2021/07/04/mail-mail-ru-configuring-mail-client/</link><pubDate>Sun, 04 Jul 2021 15:30:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/04/mail-mail-ru-configuring-mail-client/</guid><description>&lt;p>Настройка клиента для работы с почтой &lt;em>Mail.ru&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://mail.ru/" target="_blank" rel="noopener">https://mail.ru/&lt;/a>&lt;/li>
&lt;li>Используются локализованные названия для папок IMAP.&lt;/li>
&lt;li>Папки почты по умолчанию:
&lt;ul>
&lt;li>&lt;code>INBOX&lt;/code>;&lt;/li>
&lt;li>&lt;code>Архив&lt;/code>;&lt;/li>
&lt;li>&lt;code>Корзина&lt;/code>;&lt;/li>
&lt;li>&lt;code>Спам&lt;/code>;&lt;/li>
&lt;li>&lt;code>Черновики&lt;/code>;&lt;/li>
&lt;li>&lt;code>Отправленные&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Имена папок можно передавать в Unicode.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/h2>
&lt;ul>
&lt;li>Справочная страница: &lt;a href="https://help.mail.ru/mail/mailer/popsmtp" target="_blank" rel="noopener">https://help.mail.ru/mail/mailer/popsmtp&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Mail.ru (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от почтового ящика домена на Mail.ru;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>smtp.mail.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 465.&lt;/li>
&lt;/ul>
&lt;h3 id="imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Mail.ru (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на Mail.ru;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>imap.mail.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 993.&lt;/li>
&lt;/ul>
&lt;h3 id="pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Mail.ru (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на Mail.ru;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>pop.mail.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 995.&lt;/li>
&lt;/ul></description></item><item><title>Почта. Yandex. Настройка почтового клиента</title><link>https://yamadharma.github.io/ru/post/2021/07/04/mail-yandex-configuring-mail-client/</link><pubDate>Sun, 04 Jul 2021 12:16:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/04/mail-yandex-configuring-mail-client/</guid><description>&lt;p>Настройка клиента для работы с почтой &lt;em>Yandex&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#усиленная-аутентификация">&lt;span class="section-num">3&lt;/span> Усиленная аутентификация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://yandex.ru/" target="_blank" rel="noopener">https://yandex.ru/&lt;/a>&lt;/li>
&lt;li>Используются стандартные названия для папок IMAP.&lt;/li>
&lt;li>Папки почты по умолчанию:
&lt;ul>
&lt;li>&lt;code>INBOX&lt;/code>;&lt;/li>
&lt;li>&lt;code>Archive&lt;/code>;&lt;/li>
&lt;li>&lt;code>Trash&lt;/code>;&lt;/li>
&lt;li>&lt;code>Spam&lt;/code>;&lt;/li>
&lt;li>&lt;code>Drafts&lt;/code>;&lt;/li>
&lt;li>&lt;code>Sent&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/h2>
&lt;h3 id="smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Яндексе (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от почтового ящика домена на Яндексе;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>smtp.yandex.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 465.&lt;/li>
&lt;/ul>
&lt;h3 id="imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Яндексе (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на Яндексе;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>imap.yandex.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 993.&lt;/li>
&lt;/ul>
&lt;h3 id="pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Яндексе (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на Яндексе;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>pop.yandex.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 995.&lt;/li>
&lt;/ul>
&lt;h2 id="усиленная-аутентификация">&lt;span class="section-num">3&lt;/span> Усиленная аутентификация&lt;/h2>
&lt;ul>
&lt;li>Возможна настройка аутентификации для приложений (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/01/mail-yandex-application-passwords/">Почта. Yandex. Пароли приложений&lt;/a>).&lt;/li>
&lt;/ul></description></item><item><title>Hugo. Шаблон для научных работников</title><link>https://yamadharma.github.io/ru/post/2021/07/02/hugo-template-for-scientists/</link><pubDate>Fri, 02 Jul 2021 15:02:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/02/hugo-template-for-scientists/</guid><description>&lt;p>Тема &lt;em>Wowchemy&lt;/em>. Бывшая &lt;em>Academic&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-шаблонов-wowchemy">&lt;span class="section-num">2&lt;/span> Обновление шаблонов Wowchemy&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#до-версии-5-dot-3">&lt;span class="section-num">2.1&lt;/span> До версии 5.3&lt;/a>&lt;/li>
&lt;li>&lt;a href="#общие-рекомендации">&lt;span class="section-num">2.2&lt;/span> Общие рекомендации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#устранение-проблем">&lt;span class="section-num">3&lt;/span> Устранение проблем&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ошибка-нарушение-безопасности">&lt;span class="section-num">3.1&lt;/span> Ошибка: нарушение безопасности&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#элементы-шаблонов-wowchemy">&lt;span class="section-num">4&lt;/span> Элементы шаблонов Wowchemy&lt;/a>&lt;/li>
&lt;li>&lt;a href="#типы-контента-wowchemy">&lt;span class="section-num">5&lt;/span> Типы контента Wowchemy&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://wowchemy.com/" target="_blank" rel="noopener">https://wowchemy.com/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/wowchemy" target="_blank" rel="noopener">https://github.com/wowchemy&lt;/a>&lt;/li>
&lt;li>Репозиторий модуля темы: &lt;a href="https://github.com/wowchemy/wowchemy-hugo-modules" target="_blank" rel="noopener">https://github.com/wowchemy/wowchemy-hugo-modules&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-шаблонов-wowchemy">&lt;span class="section-num">2&lt;/span> Обновление шаблонов Wowchemy&lt;/h2>
&lt;h3 id="до-версии-5-dot-3">&lt;span class="section-num">2.1&lt;/span> До версии 5.3&lt;/h3>
&lt;ul>
&lt;li>Примечания до версии 5.3 находятся в блоге &lt;a href="https://wowchemy.com/blog/" target="_blank" rel="noopener">https://wowchemy.com/blog/&lt;/a>.&lt;/li>
&lt;li>В файле &lt;code>go.mod&lt;/code> установите необходимую версию (например, &lt;code>5.3&lt;/code>), исправив строку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">require (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> github.com/wowchemy/wowchemy-hugo-modules/v5 v5.3.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите пути к модулям в конфигурации в файле &lt;code>config/_default/config.yaml&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">module&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github.com/wowchemy/wowchemy-hugo-modules/wowchemy-cms/v5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github.com/wowchemy/wowchemy-hugo-modules/wowchemy/v5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>или &lt;code>config/_default/config.toml&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">module&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[[&lt;/span>&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">imports&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;github.com/wowchemy/wowchemy-hugo-modules/wowchemy-cms/v5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[[&lt;/span>&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">imports&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;github.com/wowchemy/wowchemy-hugo-modules/wowchemy/v5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для использования с &lt;em>netlify&lt;/em>:
&lt;ul>
&lt;li>Обновите &lt;code>HUGO_VERSION&lt;/code> в &lt;code>netlify.toml&lt;/code> до необходимой версии &lt;code>0.84.4&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Обновите модуль:
&lt;ul>
&lt;li>текущий релиз:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo mod get -u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>текущая версия разработчика:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo mod get -u ./...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="общие-рекомендации">&lt;span class="section-num">2.2&lt;/span> Общие рекомендации&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Текущую версию можно найти:&lt;/p>
&lt;ul>
&lt;li>в файле &lt;code>themes/academic/data/academic.toml&lt;/code> (если всё делалось очень давно);&lt;/li>
&lt;li>в файле &lt;code>go.mod&lt;/code>:
&lt;ul>
&lt;li>точная версия (например, &lt;code>v5.0.0&lt;/code>);&lt;/li>
&lt;li>версия сборки в ​​​​форме &lt;code>v&amp;lt;dummy-version-number&amp;gt;-&amp;lt;date&amp;gt;-&amp;lt;build-number&amp;gt;&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Отредактируйте файл &lt;code>go.mod&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-v" data-lang="v">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">module&lt;/span> &lt;span class="nv">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nv">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">starter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">hugo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">academic&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">go&lt;/span> &lt;span class="mf">1.15&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">require&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nv">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">hugo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">themes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">plugin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">netlify&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">cms&lt;/span> &lt;span class="nv">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nv">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">hugo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">themes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">plugin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">netlify&lt;/span> &lt;span class="nv">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nv">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">hugo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">themes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">plugin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">reveal&lt;/span> &lt;span class="nv">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nv">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">hugo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nv">themes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">wowchemy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nv">v5&lt;/span> &lt;span class="nv">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Вы настраиваете версию модуля в операторе &lt;code>require&lt;/code>.&lt;/li>
&lt;li>Вместо версии &lt;code>main&lt;/code> можно задать конкретную версию модуля (в формате &lt;code>v5.x.y&lt;/code>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Обновите пути модулей в файле &lt;code>config/_default/config.yaml&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">module&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github.com/wowchemy/wowchemy-hugo-themes/modules/wowchemy-plugin-netlify-cms&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github.com/wowchemy/wowchemy-hugo-themes/modules/wowchemy-plugin-netlify&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github.com/wowchemy/wowchemy-hugo-themes/modules/wowchemy-plugin-reveal&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github.com/wowchemy/wowchemy-hugo-themes/modules/wowchemy/v5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Обновите переменную &lt;code>HUGO_VERSION&lt;/code> до рекомендованной (возите из примечания к выпуску &lt;a href="https://github.com/wowchemy/wowchemy-hugo-themes/releases" target="_blank" rel="noopener">https://github.com/wowchemy/wowchemy-hugo-themes/releases&lt;/a>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Проверьте, что локальная версия &lt;em>Hugo Extended&lt;/em> имеет необходимую версию.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Последовательно примените любые критические изменения из соответствующих примечаний к выпуску. Если в релизе нет раздела &lt;em>Breaking Changes&lt;/em>, то никаких изменений не требуется.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Обновите модули темы:&lt;/p>
&lt;ul>
&lt;li>до последней официальной версии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo mod get -u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>до текущей версии в репозитории:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo mod get -u ./...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>После этого &lt;code>main&lt;/code> в &lt;code>go.mod&lt;/code> будет заменена на конкретную версию.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Если Вы обновляете совсем старую версию, Вам может быть проще создать новый сайт и перенести папку &lt;code>content&lt;/code>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="устранение-проблем">&lt;span class="section-num">3&lt;/span> Устранение проблем&lt;/h2>
&lt;h3 id="ошибка-нарушение-безопасности">&lt;span class="section-num">3.1&lt;/span> Ошибка: нарушение безопасности&lt;/h3>
&lt;ul>
&lt;li>После обновления до 0.91 возникла следующая ошибка при генерации сайта:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo v0.91.0+extended linux/amd64 &lt;span class="nv">BuildDate&lt;/span>&lt;span class="o">=&lt;/span>2021-12-22T12:45:46+03:00 &lt;span class="nv">VendorInfo&lt;/span>&lt;span class="o">=&lt;/span>Gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ERROR render of &lt;span class="s2">&amp;#34;page&amp;#34;&lt;/span> failed: execute of template failed: template: project/single.html:5:3: executing &lt;span class="s2">&amp;#34;project/single.html&amp;#34;&lt;/span> at &amp;lt;partial &lt;span class="s2">&amp;#34;site_head&amp;#34;&lt;/span> .&amp;gt;: error calling partial: &lt;span class="s2">&amp;#34;/home/dharma/work/blog/git/resources/hugo_cache/modules/filecache/modules/pkg/mod/github.com/wowchemy/wowchemy-hugo-modules/wowchemy/v5@v5.0.0-20211221220555-87f69f8c265e/layouts/partials/site_head.html:207:13&amp;#34;&lt;/span>: execute of template failed: template: partials/site_head.html:207:13: executing &lt;span class="s2">&amp;#34;partials/site_head.html&amp;#34;&lt;/span> at &amp;lt;getenv &lt;span class="s2">&amp;#34;WC_POST_CSS&amp;#34;&lt;/span>&amp;gt;: error calling getenv: access denied: &lt;span class="s2">&amp;#34;WC_POST_CSS&amp;#34;&lt;/span> is not whitelisted in policy &lt;span class="s2">&amp;#34;security.funcs.getenv&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> the current security configuration is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>security&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">enableInlineShortcodes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>security.exec&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">allow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;^dart-sass-embedded$&amp;#39;&lt;/span>, &lt;span class="s1">&amp;#39;^go$&amp;#39;&lt;/span>, &lt;span class="s1">&amp;#39;^npx$&amp;#39;&lt;/span>, &lt;span class="s1">&amp;#39;^postcss$&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">osEnv&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;(?i)^(PATH|PATHEXT|APPDATA|TMP|TEMP|TERM)$&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>security.funcs&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">getenv&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;^HUGO_&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>security.http&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">methods&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;(?i)GET|POST&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">urls&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;.*&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Необходимо добавить строчки в белый список для переменной среды &lt;code>WC_POST_CSS&lt;/code>.&lt;/li>
&lt;li>Для &lt;code>config/_default/config.toml&lt;/code> (в формате TOML):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">security&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">funcs&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">getenv&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;^HUGO_&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;^WC_&amp;#34;&lt;/span>&lt;span class="p">,]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для &lt;code>config/_default/config.yaml&lt;/code> (в формате YAML):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">security&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">funcs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">getenv&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">​ - ^HUGO_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">​ - ^WC_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="элементы-шаблонов-wowchemy">&lt;span class="section-num">4&lt;/span> Элементы шаблонов Wowchemy&lt;/h2>
&lt;h2 id="типы-контента-wowchemy">&lt;span class="section-num">5&lt;/span> Типы контента Wowchemy&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/11/22/hugo-wowchemy-book/">Hugo. Wowchemy. Book&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Профессия Системный администратор</title><link>https://yamadharma.github.io/ru/post/2021/07/02/profession-system-administrator/</link><pubDate>Fri, 02 Jul 2021 12:02:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/02/profession-system-administrator/</guid><description>&lt;p>Профессия &lt;em>Системный администратор&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#отличие-от-программиста">&lt;span class="section-num">1&lt;/span> Отличие от программиста&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-направления-и-задачи-в-профессии">&lt;span class="section-num">2&lt;/span> Основные направления и задачи в профессии&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#системный-администратор-малой-компании">&lt;span class="section-num">2.1&lt;/span> Системный администратор малой компании&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администратор-веб-сервера">&lt;span class="section-num">2.2&lt;/span> Администратор веб-сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администратор-баз-данных">&lt;span class="section-num">2.3&lt;/span> Администратор баз данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сетевой-администратор">&lt;span class="section-num">2.4&lt;/span> Сетевой администратор&lt;/a>&lt;/li>
&lt;li>&lt;a href="#системный-архитектор">&lt;span class="section-num">2.5&lt;/span> Системный архитектор&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администратор-безопасности-сети">&lt;span class="section-num">2.6&lt;/span> Администратор безопасности сети&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администратор-систем-коммуникаций">&lt;span class="section-num">2.7&lt;/span> Администратор систем коммуникаций&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#что-должен-знать-и-уметь-сисадмин">&lt;span class="section-num">3&lt;/span> Что должен знать и уметь сисадмин&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#основные-задачи">&lt;span class="section-num">3.1&lt;/span> Основные задачи&lt;/a>&lt;/li>
&lt;li>&lt;a href="#личные-качества-системного-администратора">&lt;span class="section-num">3.2&lt;/span> Личные качества системного администратора&lt;/a>&lt;/li>
&lt;li>&lt;a href="#качества-для-каждого-сотрудника">&lt;span class="section-num">3.3&lt;/span> Качества для каждого сотрудника:&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#плюсы-и-минусы-профессии">&lt;span class="section-num">4&lt;/span> Плюсы и минусы профессии&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#плюсы">&lt;span class="section-num">4.1&lt;/span> Плюсы:&lt;/a>&lt;/li>
&lt;li>&lt;a href="#минусы">&lt;span class="section-num">4.2&lt;/span> Минусы:&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#профессиональные-уровни">&lt;span class="section-num">5&lt;/span> Профессиональные уровни&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#младший-системный-администратор">&lt;span class="section-num">5.1&lt;/span> Младший системный администратор&lt;/a>&lt;/li>
&lt;li>&lt;a href="#системный-администратор-среднего-уровня">&lt;span class="section-num">5.2&lt;/span> Системный администратор среднего уровня&lt;/a>&lt;/li>
&lt;li>&lt;a href="#старший-системному-администратору">&lt;span class="section-num">5.3&lt;/span> Старший системному администратору&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="отличие-от-программиста">&lt;span class="section-num">1&lt;/span> Отличие от программиста&lt;/h2>
&lt;ul>
&lt;li>Программирование &amp;mdash; создание компьютерных программ с помощью специальных языков.&lt;/li>
&lt;li>Системное администрирование &amp;mdash; процесс сопровождения программного и аппаратного обеспечения поддержки разработки программного обеспечения и функционирования организации.&lt;/li>
&lt;/ul>
&lt;h2 id="основные-направления-и-задачи-в-профессии">&lt;span class="section-num">2&lt;/span> Основные направления и задачи в профессии&lt;/h2>
&lt;h3 id="системный-администратор-малой-компании">&lt;span class="section-num">2.1&lt;/span> Системный администратор малой компании&lt;/h3>
&lt;ul>
&lt;li>Отвечает за всё:
&lt;ul>
&lt;li>поддержание работоспособности компьютеров;&lt;/li>
&lt;li>налаживание сетевых коммуникаций;&lt;/li>
&lt;li>обслуживанием веб-сервера;&lt;/li>
&lt;li>обслуживанием сети;&lt;/li>
&lt;li>мелкий ремонт компьютерного оборудования;&lt;/li>
&lt;li>helpdesk (эникейщик).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>ОС Windows;&lt;/li>
&lt;li>офисные и бухгалтерские программы.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="администратор-веб-сервера">&lt;span class="section-num">2.2&lt;/span> Администратор веб-сервера&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>установка и настройка ПО веб-сервера.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>Unix-системы (Linux и FreeBSD);&lt;/li>
&lt;li>веб-серверы (apache, nginx);&lt;/li>
&lt;li>Windows Server,&lt;/li>
&lt;li>почтовые серверы.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Знания:
&lt;ul>
&lt;li>сетевая модель передачи данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="администратор-баз-данных">&lt;span class="section-num">2.3&lt;/span> Администратор баз данных&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>работа с системами управления и хранения данных (СКУД, СХД);
&lt;ul>
&lt;li>MySQL, PostgreSQL, MS SQL, Oracle, Informix, Firebird;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>обслуживание систем баз данных;&lt;/li>
&lt;li>выявление и устранение неполадок баз данных;&lt;/li>
&lt;li>резервное копирование и восстановление баз данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>операционные системы, на которой работает база данных;&lt;/li>
&lt;li>язык программирования SQL.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="сетевой-администратор">&lt;span class="section-num">2.4&lt;/span> Сетевой администратор&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>сопровождение работы сетей;&lt;/li>
&lt;li>настройка маршрутизации;&lt;/li>
&lt;li>подключение сетевого оборудования.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>сетевые протоколы;&lt;/li>
&lt;li>системы биллинга;&lt;/li>
&lt;li>частные виртуальные сети (VPN).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Знания:
&lt;ul>
&lt;li>сетевые протоколы.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="системный-архитектор">&lt;span class="section-num">2.5&lt;/span> Системный архитектор&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>проектирование информационных систем.&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>знает все популярные ОС;&lt;/li>
&lt;li>работает с веб-серверами;&lt;/li>
&lt;li>работает с базами данных;&lt;/li>
&lt;li>работает со службами каталогов;&lt;/li>
&lt;li>работает с почтовыми серверами;&lt;/li>
&lt;li>работает системами CRM, ERP, CMS.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Системный архитектор занимает управленческое положение, формирует ТЗ для младших специалистов и контролирует их выполнение.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="администратор-безопасности-сети">&lt;span class="section-num">2.6&lt;/span> Администратор безопасности сети&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>занимается информационной безопасностью;&lt;/li>
&lt;li>работает с документами, регламентами безопасности.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Знания:
&lt;ul>
&lt;li>системы контроля доступа.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="администратор-систем-коммуникаций">&lt;span class="section-num">2.7&lt;/span> Администратор систем коммуникаций&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>настройка электронной почты, телефонии, внутренних чатов и голосовых конференций;&lt;/li>
&lt;li>работа с почтовыми серверами (Microsoft Exchange Server, qmail, Sendmail, Exim, Postfix).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>работа в основных программах-клиентах электронной почты (Microsoft Outlook, The Bat!, Mozilla Thunderbird, KMail, Evolution).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Знания:
&lt;ul>
&lt;li>сетевые протоколы;&lt;/li>
&lt;li>сетевые технологии.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="что-должен-знать-и-уметь-сисадмин">&lt;span class="section-num">3&lt;/span> Что должен знать и уметь сисадмин&lt;/h2>
&lt;h3 id="основные-задачи">&lt;span class="section-num">3.1&lt;/span> Основные задачи&lt;/h3>
&lt;ul>
&lt;li>работать с ПО, выявлять и ликвидировать ошибки;&lt;/li>
&lt;li>настраивать и обслуживать сети;&lt;/li>
&lt;li>проводить диагностику компьютера и устранять неполадки;&lt;/li>
&lt;li>работать с разными серверами;&lt;/li>
&lt;li>работать с системами управления и хранения баз данных;&lt;/li>
&lt;li>работать с клиентом, оказывать техподдержку;&lt;/li>
&lt;li>владеть несколькими языками программирования;&lt;/li>
&lt;li>документировать совершённые действия;&lt;/li>
&lt;li>знать технический английский язык.&lt;/li>
&lt;/ul>
&lt;h3 id="личные-качества-системного-администратора">&lt;span class="section-num">3.2&lt;/span> Личные качества системного администратора&lt;/h3>
&lt;ul>
&lt;li>аналитическое мышление;&lt;/li>
&lt;li>внимательность;&lt;/li>
&lt;li>стрессоустойчивость;&lt;/li>
&lt;li>умение работать в режиме многозадачности;&lt;/li>
&lt;li>обучаемость;&lt;/li>
&lt;li>терпеливость.&lt;/li>
&lt;/ul>
&lt;h3 id="качества-для-каждого-сотрудника">&lt;span class="section-num">3.3&lt;/span> Качества для каждого сотрудника:&lt;/h3>
&lt;ul>
&lt;li>ответственность;&lt;/li>
&lt;li>дисциплинированность;&lt;/li>
&lt;li>самоорганизованность.&lt;/li>
&lt;/ul>
&lt;h2 id="плюсы-и-минусы-профессии">&lt;span class="section-num">4&lt;/span> Плюсы и минусы профессии&lt;/h2>
&lt;h3 id="плюсы">&lt;span class="section-num">4.1&lt;/span> Плюсы:&lt;/h3>
&lt;ul>
&lt;li>важная должность;&lt;/li>
&lt;li>востребованность на рынке труда;&lt;/li>
&lt;li>высокий заработок;&lt;/li>
&lt;li>совмещение в нескольких организациях;&lt;/li>
&lt;li>возможность самостоятельно планировать рабочие часы, когда нет задач;&lt;/li>
&lt;li>перспективная профессия.&lt;/li>
&lt;/ul>
&lt;h3 id="минусы">&lt;span class="section-num">4.2&lt;/span> Минусы:&lt;/h3>
&lt;ul>
&lt;li>неравномерная нагрузка;&lt;/li>
&lt;li>высокая ответственность;&lt;/li>
&lt;li>сидячая работа;&lt;/li>
&lt;li>общение с пользователями как стресс-фактор.&lt;/li>
&lt;/ul>
&lt;h2 id="профессиональные-уровни">&lt;span class="section-num">5&lt;/span> Профессиональные уровни&lt;/h2>
&lt;h3 id="младший-системный-администратор">&lt;span class="section-num">5.1&lt;/span> Младший системный администратор&lt;/h3>
&lt;ul>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>администрировать Linux и Windows;&lt;/li>
&lt;li>разбираться в стеке протоколов TCP/IP, HTTP(S), DNS;&lt;/li>
&lt;li>знать bash, основы SQL и администрирования СУБД;&lt;/li>
&lt;li>заниматься диагностикой и ремонтом компьютера;&lt;/li>
&lt;li>знать технический английский язык.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="системный-администратор-среднего-уровня">&lt;span class="section-num">5.2&lt;/span> Системный администратор среднего уровня&lt;/h3>
&lt;ul>
&lt;li>Стаж:
&lt;ul>
&lt;li>от 1 года.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Требования:
&lt;ul>
&lt;li>высшее техническое образование.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>администрировать серверы под Linux (apache, nginx, MySQL, mongo, iptables, zabbix, redis, libvirt, docker);&lt;/li>
&lt;li>знать языки программирования и умение писать скрипты;&lt;/li>
&lt;li>знать серверное железо;&lt;/li>
&lt;li>знать технологию виртуализации данных для объединения физических дисковых устройств в логический модуль;&lt;/li>
&lt;li>работать с документацией;&lt;/li>
&lt;li>владеть техническим английским языком;&lt;/li>
&lt;li>быть ответственным и внимательным в работе.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="старший-системному-администратору">&lt;span class="section-num">5.3&lt;/span> Старший системному администратору&lt;/h3>
&lt;ul>
&lt;li>Стаж:
&lt;ul>
&lt;li>от 3 лет.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>обслуживание рабочих мест пользователей (ПК, оргтехника, телефон, ПО);&lt;/li>
&lt;li>исследование причин инцидентов и быстрый поиск оптимального решения;&lt;/li>
&lt;li>обслуживание Wi-Fi сети и серверов;&lt;/li>
&lt;li>обслуживание аудио / видео техники (А/В ресиверы, спутниковое ТВ, AppleTV, видеопроекторы);&lt;/li>
&lt;li>работа с базами данных и обеспечение информационной безопасности;&lt;/li>
&lt;li>обслуживание VoIP, спутниковой и сотовой связи;&lt;/li>
&lt;li>обслуживание устройств на платформе iOS (iPAD, iPhone);&lt;/li>
&lt;li>внимательность, опрятность, умение грамотно выражать свои мысли;&lt;/li>
&lt;li>навыки самостоятельного решения проблем;&lt;/li>
&lt;li>грамотно выстраивать структуру работы;&lt;/li>
&lt;li>быть лидером;&lt;/li>
&lt;li>технический английский язык.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Администрирование Cisco</title><link>https://yamadharma.github.io/ru/post/2021/06/16/cisco-administration/</link><pubDate>Wed, 16 Jun 2021 12:38:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/06/16/cisco-administration/</guid><description>&lt;p>Администрирование сетей и оборудования Cisco.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обслуживание">&lt;span class="section-num">2&lt;/span> Обслуживание&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/06/16/cisco-storm-control/">Cisco. Защита от широковещательного шторма&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/11/15/initial-cisco-switch-configuration/">Начальная конфигурация коммутатора Cisco&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/03/cisco-wlc/">Контроллер Cisco WLC&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/04/04/cisco-huawei-commands/">Сопоставление команд Cisco и Huawei&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="обслуживание">&lt;span class="section-num">2&lt;/span> Обслуживание&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/10/06/password-reset-catalyst-switches/">Сброс пароля на коммутаторах Catalyst&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Cisco. Защита от широковещательного шторма</title><link>https://yamadharma.github.io/ru/post/2021/06/16/cisco-storm-control/</link><pubDate>Wed, 16 Jun 2021 11:48:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/06/16/cisco-storm-control/</guid><description>&lt;p>Для борьбы с широковещательным штормом в сетевых устройствах Cisco используется параметр &lt;code>storm-control&lt;/code>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#описание">&lt;span class="section-num">1&lt;/span> Описание&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#задание-порогов-срабатывания">&lt;span class="section-num">2.1&lt;/span> Задание порогов срабатывания&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#однопороговый-вариант">&lt;span class="section-num">2.1.1&lt;/span> Однопороговый вариант&lt;/a>&lt;/li>
&lt;li>&lt;a href="#двупороговый-вариант">&lt;span class="section-num">2.1.2&lt;/span> Двупороговый вариант&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#реакция-на-шторм">&lt;span class="section-num">2.2&lt;/span> Реакция на шторм&lt;/a>&lt;/li>
&lt;li>&lt;a href="#восстановление-портов">&lt;span class="section-num">2.3&lt;/span> Восстановление портов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обнаружение-петель">&lt;span class="section-num">2.4&lt;/span> Обнаружение петель&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-на-все-порты-сразу">&lt;span class="section-num">2.5&lt;/span> Настройка на все порты сразу&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#проверка-работы">&lt;span class="section-num">3&lt;/span> Проверка работы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="описание">&lt;span class="section-num">1&lt;/span> Описание&lt;/h2>
&lt;ul>
&lt;li>Параметр &lt;code>storm-control&lt;/code> задаёт количество бродкастов в секунду.&lt;/li>
&lt;li>Всё, что свыше этого значения, отбрасывается.&lt;/li>
&lt;li>Порт при этом продолжает работать для пересылки всего остального трафика.&lt;/li>
&lt;li>В случае высокого значения &lt;code>storm-contorol&lt;/code> можно получить перегрузку ЦПУ коммутатора, в случае низкого значения можно иметь проблемы с работой DHCP и ARP.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/h2>
&lt;h3 id="задание-порогов-срабатывания">&lt;span class="section-num">2.1&lt;/span> Задание порогов срабатывания&lt;/h3>
&lt;ul>
&lt;li>Максимальный уровень широковещательного трафика задаётся либо в процентах от полосы пропускания (безразмерные значения), либо в битах в секунду (bps).&lt;/li>
&lt;li>Есть два варианта конфигурирования:
&lt;ul>
&lt;li>однопороговое,&lt;/li>
&lt;li>двупороговое.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="однопороговый-вариант">&lt;span class="section-num">2.1.1&lt;/span> Однопороговый вариант&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Задаётся максимальный порог и действие по достижении этого порога:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># int f0/1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control broadcast level 30.00&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control multicast level 30.00&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Команда устанавливает максимальный уровень широковещательного трафика в 30% от полосы пропускания.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="двупороговый-вариант">&lt;span class="section-num">2.1.2&lt;/span> Двупороговый вариант&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Указывается два порога.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>При достижении первого порога порт будет отключаться.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>При падении уровня трафика до второго порога порт будет включаться:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control broadcast level 30.00 10.00&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control multicast level 30.00 10.00&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Здесь первый порог &amp;mdash; 30% от полосы пропускания, второй порог &amp;mdash; 10% от полосы пропускания.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="реакция-на-шторм">&lt;span class="section-num">2.2&lt;/span> Реакция на шторм&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Необходимо задать действие при возникновении шторма&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># int f0/1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control action shutdown&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Вторая команда указывает на то, какое действие должно быть совершено, когда лимит будет достигнут. В данном случае мы отключаем порт (&lt;code>shutdown&lt;/code>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Если действие не указывать, то свитч будет просто фильтровать трафик, превышающий порог, и не отправлять никаких оповещений.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Можно включить SNMP-трапы и сообщения в Syslog:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control action trap&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="восстановление-портов">&lt;span class="section-num">2.3&lt;/span> Восстановление портов&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Чтобы коммутатор автоматически восстанавливал порт через некоторое время после отключения, необходимо в глобальной конфигурации задать:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># errdisable recovery cause storm-control&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># errdisable recovery interval 180&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>В данном случае восстановление происходит через 3 минуты (180 секунд).&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="обнаружение-петель">&lt;span class="section-num">2.4&lt;/span> Обнаружение петель&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>У коммутаторов Cisco есть также штатное средство обнаружения петель, основанное на периодической отправке keepalive-сообщений.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Эта опция обычно включена по умолчанию, и в случае срабатывания порт отключается.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Для механизма keepalive можно также настроить автоматическое включение интерфейса:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># errdisable recovery cause loopback&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-на-все-порты-сразу">&lt;span class="section-num">2.5&lt;/span> Настройка на все порты сразу&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для настройки параметров всех портов сразу используйте &lt;em>диапазон портов&lt;/em>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># interface range f0/1 - 24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if-range&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control broadcast level 30.00 10.00&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="проверка-работы">&lt;span class="section-num">3&lt;/span> Проверка работы&lt;/h2>
&lt;ul>
&lt;li>Используйте команду &lt;code>show storm-control&lt;/code>, чтобы проверить конфигурацию функции подавления широковещательной и многоадресной рассылки.&lt;/li>
&lt;li>Используйте команду &lt;code>show storm-control &amp;lt;интерфейс&amp;gt;&lt;/code>, чтобы проверить конфигурацию функции подавления широковещательной и многоадресной рассылки на интерфейсе.&lt;/li>
&lt;li>Используйте команду &lt;code>show run interface &amp;lt;интерфейс&amp;gt;&lt;/code>, чтобы проверить ловушку (trap), настроенную для порта.&lt;/li>
&lt;/ul></description></item><item><title>Обратные ссылки в Hugo</title><link>https://yamadharma.github.io/ru/post/2021/06/02/backlinks-hugo/</link><pubDate>Wed, 02 Jun 2021 17:19:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/06/02/backlinks-hugo/</guid><description>&lt;p>Можно создавать обратные ссылки и в самом Hugo.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#источники-обратных-ссылок">&lt;span class="section-num">1&lt;/span> Источники обратных ссылок&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-обратных-ссылок-из-emacs">&lt;span class="section-num">2&lt;/span> Создание обратных ссылок из emacs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-обратных-ссылок-с-помощью-генератора-hugo">&lt;span class="section-num">3&lt;/span> Создание обратных ссылок с помощью генератора Hugo&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">3.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#каталоги-для-новой-структуры">&lt;span class="section-num">3.2&lt;/span> Каталоги для новой структуры&lt;/a>&lt;/li>
&lt;li>&lt;a href="#шаблон-генерации-обратных-ссылок">&lt;span class="section-num">3.3&lt;/span> Шаблон генерации обратных ссылок&lt;/a>&lt;/li>
&lt;li>&lt;a href="#шаблон-страницы">&lt;span class="section-num">3.4&lt;/span> Шаблон страницы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#исправление-обратных-ссылок">&lt;span class="section-num">4&lt;/span> Исправление обратных ссылок&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="источники-обратных-ссылок">&lt;span class="section-num">1&lt;/span> Источники обратных ссылок&lt;/h2>
&lt;ul>
&lt;li>У меня обратные ссылки получаются из заметок в Org-roam, которые я стараюсь вести по методике Zettelkasten (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/02/18/zettelkasten-method/">Метод Zettelkasten&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="создание-обратных-ссылок-из-emacs">&lt;span class="section-num">2&lt;/span> Создание обратных ссылок из emacs&lt;/h2>
&lt;ul>
&lt;li>Обратные ссылки можно создавать напрямую при экспорте из &lt;em>emacs&lt;/em>.&lt;/li>
&lt;li>Для экспорта обратных ссылок я использовал следующий скрипт на &lt;em>elisp&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">;;; -*- mode: emacs-lisp; lexical-binding: t; coding: utf-8-unix; -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">;;; Export Backlinks&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">defun&lt;/span> &lt;span class="nv">ecf/org-roam--backlinks-list&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">with-temp-buffer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">if-let*&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nv">backlinks&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">org-roam--get-backlinks&lt;/span> &lt;span class="nv">file&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">grouped-backlinks&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">--group-by&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">nth&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="nv">it&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">backlinks&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">progn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">dolist&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">group&lt;/span> &lt;span class="nv">grouped-backlinks&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">let&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nv">file-from&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">car&lt;/span> &lt;span class="nv">group&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">bls&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">cdr&lt;/span> &lt;span class="nv">group&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">insert&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">format&lt;/span> &lt;span class="s">&amp;#34;- [[file:%s][%s]]\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">file-from&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">org-roam-db--get-title&lt;/span> &lt;span class="nv">file-from&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">dolist&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">backlink&lt;/span> &lt;span class="nv">bls&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">pcase-let&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nv">file-from&lt;/span> &lt;span class="nv">_&lt;/span> &lt;span class="o">,&lt;/span>&lt;span class="nv">props&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">backlink&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">s-trim&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">s-replace&lt;/span> &lt;span class="s">&amp;#34;\n&amp;#34;&lt;/span> &lt;span class="s">&amp;#34; &amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">prin1-to-string&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">plist-get&lt;/span> &lt;span class="nv">props&lt;/span> &lt;span class="nb">:content&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">insert&lt;/span> &lt;span class="s">&amp;#34;\n\n&amp;#34;&lt;/span>&lt;span class="p">)))))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">buffer-string&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">defun&lt;/span> &lt;span class="nv">ecf/org-export-preprocessor&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">backend&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">let&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">links&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">ecf/org-roam--backlinks-list&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">buffer-file-name&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">unless&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">string=&lt;/span> &lt;span class="nv">links&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">save-excursion&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">goto-char&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">point-max&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">insert&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">concat&lt;/span> &lt;span class="s">&amp;#34;\n* Backlinks\n&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">links&lt;/span>&lt;span class="p">)))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">;;; Export backlinks only for ox-hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">defun&lt;/span> &lt;span class="nv">ecf/org-export-preprocessor-hugo&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">backend&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">when&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">org-export-derived-backend-p&lt;/span> &lt;span class="nv">backend&lt;/span> &lt;span class="ss">&amp;#39;hugo&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">ecf/org-export-preprocessor&lt;/span> &lt;span class="ss">&amp;#39;hugo&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nv">add-hook&lt;/span> &lt;span class="ss">&amp;#39;org-export-before-processing-hook&lt;/span> &lt;span class="ss">&amp;#39;ecf/org-export-preprocessor-hugo&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Недостатки:
&lt;ul>
&lt;li>Использовался вызов внутреннего API org-roam. При этом он постоянно менялся.&lt;/li>
&lt;li>Расположение обратных ссылок жёстко кодируется.&lt;/li>
&lt;li>Обратные ссылки получались статичными: при изменении связей необходимо повторно экспортировать все связанные ноды.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="создание-обратных-ссылок-с-помощью-генератора-hugo">&lt;span class="section-num">3&lt;/span> Создание обратных ссылок с помощью генератора Hugo&lt;/h2>
&lt;ul>
&lt;li>Но, возможно, оптимальнее создавать их с помощью самого Hugo.&lt;/li>
&lt;/ul>
&lt;h3 id="общая-информация">&lt;span class="section-num">3.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Примеры создания обратных ссылок в Hugo:
&lt;ul>
&lt;li>&lt;a href="https://gabrielleearnshaw.medium.com/implementing-backlinks-in-a-hugo-website-e548d3d8f0e0" target="_blank" rel="noopener">https://gabrielleearnshaw.medium.com/implementing-backlinks-in-a-hugo-website-e548d3d8f0e0&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://seds.nl/notes/export_org_roam_backlinks_with_gohugo/" target="_blank" rel="noopener">https://seds.nl/notes/export_org_roam_backlinks_with_gohugo/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Есть тема для Hugo, основным свойством которой является поддержка обратных ссылок:
&lt;ul>
&lt;li>&lt;a href="https://github.com/kausalflow/connectome" target="_blank" rel="noopener">https://github.com/kausalflow/connectome&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для создания обратных ссылок необходимо поправить шаблон.&lt;/li>
&lt;li>Саму генерацию обратных ссылок будем выполнять с помощью механизма &lt;em>частичных шаблонов&lt;/em>:
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/templates/partials/" target="_blank" rel="noopener">https://gohugo.io/templates/partials/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Шаблон страницы будем делать на основе шаблона &lt;em>single page&lt;/em>:
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/templates/single-page-templates" target="_blank" rel="noopener">https://gohugo.io/templates/single-page-templates&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="каталоги-для-новой-структуры">&lt;span class="section-num">3.2&lt;/span> Каталоги для новой структуры&lt;/h3>
&lt;ul>
&lt;li>Добавим каталог &lt;code>layouts&lt;/code> в корень нашего сайта для создания собственных шаблонов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">layouts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── _default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── single.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── partials
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── backlinks.html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="шаблон-генерации-обратных-ссылок">&lt;span class="section-num">3.3&lt;/span> Шаблон генерации обратных ссылок&lt;/h3>
&lt;ul>
&lt;li>Зададим частичный шаблон &lt;code>layouts/partials/backlinks.html&lt;/code>, создающий список обратных ссылок и отображающий его:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{ $re := $.File.BaseFileName }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ $backlinks := slice }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ range .Site.AllPages }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ if and (findRE $re .RawContent) (not (eq $re .File.BaseFileName)) }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ $backlinks = $backlinks | append . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ end }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ end }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">hr&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ if gt (len $backlinks) 0 }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;bl-section&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h4&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Links to this note&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h4&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;backlinks&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ range $backlinks }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ .RelPermalink }}&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>{{ .Title }}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ end }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ else }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;bl-section&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h4&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>No notes link to this note&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h4&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ end }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="шаблон-страницы">&lt;span class="section-num">3.4&lt;/span> Шаблон страницы&lt;/h3>
&lt;ul>
&lt;li>Шаблон страницы лучше делать на основе используемой темы.&lt;/li>
&lt;li>Я использую шаблон &lt;em>Academic&lt;/em> (&lt;code>https://github.com/wowchemy/starter-hugo-academic&lt;/code>), основанную на модуле &lt;em>wowchemy&lt;/em> (&lt;code>https://github.com/wowchemy/wowchemy-hugo-modules.git&lt;/code>).
&lt;ul>
&lt;li>Скачиваю модуль:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/wowchemy/wowchemy-hugo-modules.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Копирую файл &lt;code>wowchemy-hugo-modules/wowchemy/layouts/_default/single.html&lt;/code> в локальный каталог. Он имеет следующий вид (зависит от темы):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{- define &amp;#34;main&amp;#34; -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">article&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;page_header&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article-container&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article-style&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ .Content }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;page_footer&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">article&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- end -}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавляю использование частичного шаблона обратных ссылок:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-diff" data-lang="diff">&lt;span class="line">&lt;span class="cl">&lt;span class="gd">--- orig/single.html 2021-06-02 18:12:17.337530907 +0300
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gd">&lt;/span>&lt;span class="gi">+++ single.html 2021-06-02 16:15:08.178764024 +0300
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">&lt;/span>&lt;span class="gu">@@ -8,6 +8,7 @@
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;div class=&amp;#34;article-style&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ .Content }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">​+ {{ partial &amp;#34;backlinks&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/div&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;page_footer&amp;#34; . }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Получаю следующий файл &lt;code>layouts/_default/single.html&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{- define &amp;#34;main&amp;#34; -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">article&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;page_header&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article-container&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article-style&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ .Content }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;backlinks&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;page_footer&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">article&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- end -}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="исправление-обратных-ссылок">&lt;span class="section-num">4&lt;/span> Исправление обратных ссылок&lt;/h2>
&lt;ul>
&lt;li>При экспорте &lt;em>ox-hugo&lt;/em> экспортирует ссылки как указатели на имя файла.&lt;/li>
&lt;li>Имя файла в каталоге &lt;em>org-roam&lt;/em> может отличаться от имени, которое имеет файл в каталоге для сайта.&lt;/li>
&lt;li>Имя для сайта задаётся полем &lt;code>#+EXPORT_FILE_NAME:&lt;/code>.&lt;/li>
&lt;li>Предлагается после экспорта заменять ссылки на файлы на внутренние ссылки Hugo типа &lt;code>{{&amp;lt; relref имя_файла &amp;gt;}}&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2020/11/26/hugo-markdown/">Синтаксис Markdown для генератора сайтов Hugo&lt;/a>).&lt;/li>
&lt;li>Имя файла предполагается брать из поля &lt;code>#+EXPORT_FILE_NAME:&lt;/code>.&lt;/li>
&lt;li>Для этого был написан скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="ch">#!/usr/bin/env python3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># -*- coding: utf-8 -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># org-roam-links&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">sys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">re&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">orgroamdir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;~/work/org/notes/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">find_md_links&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;Returns dict of links in markdown:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#39;regular&amp;#39;: [foo](some.url)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#39;footnotes&amp;#39;: [foo][3]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> [3]: some.url
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://stackoverflow.com/a/30738268/2755116&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">INLINE_LINK_RE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;\[([^\]]+)\]\(([^)]+)\)&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">FOOTNOTE_LINK_TEXT_RE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;\[([^\]]+)\]\[(\d+)\]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">FOOTNOTE_LINK_URL_RE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;\[(\d+)\]:\s+(\S+)&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">links&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">INLINE_LINK_RE&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">footnote_links&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">dict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">FOOTNOTE_LINK_TEXT_RE&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">footnote_urls&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">dict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">FOOTNOTE_LINK_URL_RE&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">footnotes_linking&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">footnote_links&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">footnotes_linking&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">footnote_links&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">footnote_urls&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">footnote_links&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="p">]]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;regular&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">links&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;footnotes&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">footnotes_linking&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">replace_md_links&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;Replace links url to f(url)&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">links&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">find_md_links&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">newmd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">links&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;regular&amp;#39;&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">newmd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">newmd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">links&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;footnotes&amp;#39;&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">newmd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">newmd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">newmd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;__main__&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filename&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">argv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fin&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filename&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;rt&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filetext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fin&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">export_file_name_re&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;#\+EXPORT_FILE_NAME:\s+\S+&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">IGNORECASE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">relref_re&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s2">&amp;#34;{{&amp;lt; relref &lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">(.+)&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2"> &amp;gt;}}&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">links&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">find_md_links&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filetext&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">mdlink&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">links&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;regular&amp;#39;&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fulllink&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mdlink&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">isrelref&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">relref_re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="k">match&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fulllink&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">isrelref&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">linkpath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">isrelref&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drop extention&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">linkpath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">splitext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fulllink&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># add extention&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">md2org&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">linkpath&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;.org&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">orgfile&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">expanduser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">orgroamdir&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">md2org&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">orgfile&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">orgfiletext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">orgfile&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">export_file_name_text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">export_file_name_re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">orgfiletext&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">export_file_name_link&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">export_file_name_text&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hugolink&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;{{&amp;lt; relref &lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">export_file_name_link&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2"> &amp;gt;}}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">isrelref&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filetext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">filetext&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;{{&amp;lt; relref &lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">linkpath&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2"> &amp;gt;}}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">hugolink&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filetext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">filetext&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">linkpath&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;.md&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">hugolink&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fin&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fin&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filename&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;wt&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fin&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filetext&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fin&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запуск скрипта осуществляется через &lt;code>Makefile&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-makefile" data-lang="makefile">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">all&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">fixlinks&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> find . -name &lt;span class="s2">&amp;#34;*.md&amp;#34;&lt;/span> -newer .fixlinks -exec ./org-roam-links &lt;span class="s1">&amp;#39;{}&amp;#39;&lt;/span> &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> touch .fixlinks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">clean&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> find . -name &lt;span class="s2">&amp;#34;*~&amp;#34;&lt;/span> -delete
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запуск осуществляется следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">make fixlinks clean
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скрипты помещаются в каталог &lt;code>content/&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>Ограничения ёмкости регистров TeX'а</title><link>https://yamadharma.github.io/ru/post/2021/05/28/limitations-capacity-tex-registers/</link><pubDate>Fri, 28 May 2021 10:47:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/28/limitations-capacity-tex-registers/</guid><description>&lt;ul>
&lt;li>TeX &amp;mdash; достаточно старая программа. Он разрабатывался ещё в те времена, когда в моде была обратная совместимость (legacy). Он должен был одинаково работать при смене версии программного обеспечения.&lt;/li>
&lt;li>TeX является мультиплатформенной программой. Он должен одинаково работать на разном оборудовании.&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общие-сведения">&lt;span class="section-num">1&lt;/span> Общие сведения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файлы-для-правки">&lt;span class="section-num">2&lt;/span> Файлы для правки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#tex-live">&lt;span class="section-num">2.1&lt;/span> TeX Live&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#ошибки">&lt;span class="section-num">3&lt;/span> Ошибки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#количество-открытых-файлов">&lt;span class="section-num">3.1&lt;/span> Количество открытых файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общие-сведения">&lt;span class="section-num">1&lt;/span> Общие сведения&lt;/h2>
&lt;ul>
&lt;li>В TeX есть набор ограничений, которые иногда мешают скомпилировать TeX-файл.&lt;/li>
&lt;li>Эти ограничения вполне адекватны.&lt;/li>
&lt;li>Возникновение таких проблем могут указывать на ошибку в файле.&lt;/li>
&lt;li>Лучше всего внести исправления в исходный файл, чтобы подобные ошибки не возникали.&lt;/li>
&lt;li>Но иногда без правки ограничений не обойтись.&lt;/li>
&lt;li>Многие ограничения сняты в реализациях &lt;code>XeTeX&lt;/code> и &lt;code>LuaTeX&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="файлы-для-правки">&lt;span class="section-num">2&lt;/span> Файлы для правки&lt;/h2>
&lt;h3 id="tex-live">&lt;span class="section-num">2.1&lt;/span> TeX Live&lt;/h3>
&lt;ul>
&lt;li>Рассматривается дистрибутив, установленный установщиком TeX Live (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/23/install-texlive/">Установка TeX Live&lt;/a>).&lt;/li>
&lt;li>Системный уровень
&lt;ul>
&lt;li>Все команды выполняются с полномочиями администратора:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При обычной установке настройки делаются в каталоге
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/local/texlive/texmf-local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Локальные настройки для форматов TeX находятся в файле
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/local/texlive/texmf-local/web2c/texmf.cnf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>Этот каталог задаётся переменной
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">TEXMFLOCAL
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После исправления файлов следует перегенерить форматы TeX:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">fmtutil-sys --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пользовательский уровень
&lt;ul>
&lt;li>Все операции выполняются с полномочиями пользователя.&lt;/li>
&lt;li>При обычной установке настройки делаются в каталоге
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">~/texmf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>Этот каталог задаётся переменной
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">TEXMFHOME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройки пользователя для форматов TeX находятся в файле
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">~/texmf/web2c/texmf.cnf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После исправления файлов следует перегенерить форматы TeX:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">fmtutil-user --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="ошибки">&lt;span class="section-num">3&lt;/span> Ошибки&lt;/h2>
&lt;h3 id="количество-открытых-файлов">&lt;span class="section-num">3.1&lt;/span> Количество открытых файлов&lt;/h3>
&lt;ul>
&lt;li>При компиляции ограничено количество открытых одновременно файлов.&lt;/li>
&lt;li>Ошибка выглядит следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">! TeX capacity exceeded, sorry &lt;span class="o">[&lt;/span>text input &lt;span class="nv">levels&lt;/span>&lt;span class="o">=&lt;/span>15&lt;span class="o">]&lt;/span>.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Необходимо увеличить количество открытых одновременно файлов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">%% web2c/texmf.cnf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">%% simultaneous input files and error insertions, also applies to MetaPost
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">max_in_open = 50
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Здесь мы увеличили количество одновременно открытых файлов до 50.&lt;/li>
&lt;/ul></description></item><item><title>Замена Centos</title><link>https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/</link><pubDate>Tue, 25 May 2021 15:22:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/</guid><description>&lt;p>После серии покупок (Centos -&amp;gt; RedHat -&amp;gt; IBM) дистрибутив &lt;em>Centos&lt;/em>, представляющий из себя свободную реализацию &lt;em>RedHat&lt;/em>, приказал долго жить.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#предыстория">&lt;span class="section-num">1&lt;/span> Предыстория&lt;/a>&lt;/li>
&lt;li>&lt;a href="#прекращение-публикации-исходных-текстов-redhat">&lt;span class="section-num">2&lt;/span> Прекращение публикации исходных текстов RedHat&lt;/a>&lt;/li>
&lt;li>&lt;a href="#альтернативы-centos">&lt;span class="section-num">3&lt;/span> Альтернативы Centos&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#условные-альтернативы">&lt;span class="section-num">3.1&lt;/span> Условные альтернативы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#rhel">&lt;span class="section-num">3.1.1&lt;/span> RHEL&lt;/a>&lt;/li>
&lt;li>&lt;a href="#centos-stream">&lt;span class="section-num">3.1.2&lt;/span> CentOS Stream&lt;/a>&lt;/li>
&lt;li>&lt;a href="#oracle-linux">&lt;span class="section-num">3.1.3&lt;/span> Oracle Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vzlinux">&lt;span class="section-num">3.1.4&lt;/span> VzLinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#suse-liberty-linux">&lt;span class="section-num">3.1.5&lt;/span> SUSE Liberty Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#полные-альтернативы">&lt;span class="section-num">3.2&lt;/span> Полные альтернативы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#rocky-linux">&lt;span class="section-num">3.2.1&lt;/span> Rocky Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#almalinux">&lt;span class="section-num">3.2.2&lt;/span> Almalinux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#что-выбрать">&lt;span class="section-num">4&lt;/span> Что выбрать&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="предыстория">&lt;span class="section-num">1&lt;/span> Предыстория&lt;/h2>
&lt;ul>
&lt;li>Red Hat купила Centos.&lt;/li>
&lt;li>IBM купила RedHat.&lt;/li>
&lt;li>Компания RedHat декларировала завершение разработки и поддержки &lt;em>CentOS&lt;/em> в конце 2021 года и переход на поддержку непрерывного релиза &lt;em>CentOS Stream&lt;/em>.
&lt;ul>
&lt;li>&lt;a href="https://blog.centos.org/2020/12/future-is-centos-stream/" target="_blank" rel="noopener">https://blog.centos.org/2020/12/future-is-centos-stream/&lt;/a>.&lt;/li>
&lt;li>&lt;del>&lt;a href="https://centos.rip/" target="_blank" rel="noopener">https://centos.rip/&lt;/a> (издевательский сайт)&lt;/del>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="прекращение-публикации-исходных-текстов-redhat">&lt;span class="section-num">2&lt;/span> Прекращение публикации исходных текстов RedHat&lt;/h2>
&lt;ul>
&lt;li>&lt;/li>
&lt;li>&lt;a href="https://www.redhat.com/en/blog/furthering-evolution-centos-stream" target="_blank" rel="noopener">https://www.redhat.com/en/blog/furthering-evolution-centos-stream&lt;/a>&lt;/li>
&lt;li>Компания Red Hat объявила об изменении подхода к публикации исходных текстов пакетов дистрибутива Red Hat Enterprise Linux и прекращении публикации кода пакетов в Git-репозитории &lt;a href="https://git.centos.org/" target="_blank" rel="noopener">https://git.centos.org/&lt;/a>.&lt;/li>
&lt;li>Единственным публично доступным источником исходных текстов пакетов RHEL теперь будет репозиторий CentOS Stream.&lt;/li>
&lt;li>Для клиентов и партнёров Red Hat будет оставлена возможность загрузки кода пакетов, соответствующих релизам RHEL, через клиентский портал компании, доступ к которому требует наличия учётной записи.&lt;/li>
&lt;li>В &lt;a href="https://git.centos.org/" target="_blank" rel="noopener">https://git.centos.org/&lt;/a> публиковались исходные тексты пакетов уже выпущенных релизов, а в репозитории CentOS Stream развивается код пакетов для ещё не выпущенных релизов.&lt;/li>
&lt;li>Из этого репозиторий альтернативные реализации брали исходные коды пакетов для сборки.&lt;/li>
&lt;li>AlmaLinux и Rocky Linux опубликовали заявления c планом дальнейших действий.&lt;/li>
&lt;li>AlmaLinux
&lt;ul>
&lt;li>&lt;a href="https://almalinux.org/blog/impact-of-rhel-changes/" target="_blank" rel="noopener">https://almalinux.org/blog/impact-of-rhel-changes/&lt;/a>&lt;/li>
&lt;li>Отслеживание изменений из репозитория CentOS Stream, использование репозитория Oracle Linux.&lt;/li>
&lt;li>
&lt;ul>
&lt;li>&lt;a href="https://almalinux.org/blog/future-of-almalinux/" target="_blank" rel="noopener">https://almalinux.org/blog/future-of-almalinux/&lt;/a>&lt;/li>
&lt;li>Проект AlmaLinux объявил об изменении стратегии развития&lt;/li>
&lt;li>Дистрибутив больше не будет полностью клонировать Red Hat Enterprise Linux и станет допускать наличие незначительных расхождений в поведении.&lt;/li>
&lt;li>Сохранит бинарную совместимость на уровне ABI.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Rocky Linux
&lt;ul>
&lt;li>&lt;a href="https://rockylinux.org/news/2023-06-22-press-release/" target="_blank" rel="noopener">https://rockylinux.org/news/2023-06-22-press-release/&lt;/a>&lt;/li>
&lt;li>Создании дополнительного репозитория &lt;a href="https://git.rockylinux.org/staging/src-rhel/rpms" target="_blank" rel="noopener">https://git.rockylinux.org/staging/src-rhel/rpms&lt;/a>, отслеживании рассинхронизированных обновлений.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="альтернативы-centos">&lt;span class="section-num">3&lt;/span> Альтернативы Centos&lt;/h2>
&lt;h3 id="условные-альтернативы">&lt;span class="section-num">3.1&lt;/span> Условные альтернативы&lt;/h3>
&lt;ul>
&lt;li>Данные дистрибутивы можно считать либо условными, либо временными альтернативами.&lt;/li>
&lt;/ul>
&lt;h4 id="rhel">&lt;span class="section-num">3.1.1&lt;/span> RHEL&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.redhat.com/" target="_blank" rel="noopener">https://www.redhat.com/&lt;/a>&lt;/li>
&lt;li>Собственно, это и есть первичный дистрибутив, который копируют.&lt;/li>
&lt;li>Отличается надёжностью, используется для корпоративных систем.&lt;/li>
&lt;li>Большой значение имеют дополнительные продукты: Satellite, Openstack, RHEV, Pacemaker, Gluster, Ceph, Openshift.&lt;/li>
&lt;li>&lt;span class="timestamp-wrapper">&lt;span class="timestamp">[2022-03-08 Вт]&lt;/span>&lt;/span>Компания Red Hat прекратила работу с организациями из России и Белоруссии (&lt;a href="https://www.redhat.com/en/blog/red-hats-response-war-ukraine" target="_blank" rel="noopener">https://www.redhat.com/en/blog/red-hats-response-war-ukraine&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Распространение&lt;/p>
&lt;ul>
&lt;li>В качестве компенсации за прекращение распространения CentOS предлагает программу для разработчиков (&lt;a href="https://developers.redhat.com/products/rhel/download" target="_blank" rel="noopener">Red Hat Developer&lt;/a>).&lt;/li>
&lt;li>В рамках этой программы можно установить 16 хостов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="3">
&lt;li>
&lt;p>Миграция с Centos8&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Репозиторий скриптов: &lt;a href="https://github.com/oamg/convert2rhel/" target="_blank" rel="noopener">https://github.com/oamg/convert2rhel/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Документация: &lt;a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/converting_from_an_rpm-based_linux_distribution_to_rhel/index" target="_blank" rel="noopener">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/converting_from_an_rpm-based_linux_distribution_to_rhel/index&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Обновить дистрибутив:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf update -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установить репозиторий:&lt;/p>
&lt;ul>
&lt;li>Загрузите GPG-ключ Red Hat:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -o /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release https://www.redhat.com/security/data/fd431d51.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Загрузите SSL-сертификат:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl --create-dirs -o /etc/rhsm/ca/redhat-uep.pem https://ftp.redhat.com/redhat/convert2rhel/redhat-uep.pem
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите файл репозитория &lt;code>Convert2RHEL&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -o /etc/yum.repos.d/convert2rhel.repo https://ftp.redhat.com/redhat/convert2rhel/version_number/convert2rhel.repo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Установите скрипт:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yum -y install convert2rhel
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Провести миграцию:&lt;/p>
&lt;ul>
&lt;li>С идентификатором организации и ключом активации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">convert2rhel --org organization_ID --activationkey activation_key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>С именем пользователя, паролем и идентификатором пула:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">convert2rhel --username username --password password --pool pool_ID
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="centos-stream">&lt;span class="section-num">3.1.2&lt;/span> CentOS Stream&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.centos.org/" target="_blank" rel="noopener">https://www.centos.org/&lt;/a>&lt;/li>
&lt;li>Это rolling release.&lt;/li>
&lt;li>Теряется основное преимущество &amp;mdash; стабильность.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Миграция на CentOS Stream&lt;/p>
&lt;ul>
&lt;li>Подключаем репозиторий CentOS Stream:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install centos-release-stream
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Указываем новый репозиторий в качестве репозитория по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf swap centos-&lt;span class="o">{&lt;/span>linux,stream&lt;span class="o">}&lt;/span>-repos
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Синхронизируем установленные пакеты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf distro-sync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="oracle-linux">&lt;span class="section-num">3.1.3&lt;/span> Oracle Linux&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.oracle.com/linux/" target="_blank" rel="noopener">https://www.oracle.com/linux/&lt;/a>&lt;/li>
&lt;li>Особенность &amp;mdash; собственное ядро &lt;em>Unbreakable Enterprise Kernel&lt;/em>.&lt;/li>
&lt;li>Нет доверия Ораклу. Они и дистрибутив сделали открытым в пику RedHat, чтобы пользователей перетянуть. В любой момент могут доступ прикрыть.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Миграция с Centos8&lt;/p>
&lt;ul>
&lt;li>Репозиторий скриптов: &lt;a href="https://github.com/oracle/centos2ol" target="_blank" rel="noopener">https://github.com/oracle/centos2ol&lt;/a>&lt;/li>
&lt;li>Обновить дистрибутив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf update -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачать скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/oracle/centos2ol.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Провести миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo bash centos2ol.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="vzlinux">&lt;span class="section-num">3.1.4&lt;/span> VzLinux&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://vzlinux.org/" target="_blank" rel="noopener">https://vzlinux.org/&lt;/a>&lt;/li>
&lt;li>Разрабатывает компания Virtuozzo (бывшее подразделение компании Parallels).&lt;/li>
&lt;li>Специализация: разработка серверного ПО для виртуализации на основе открытых проектов.&lt;/li>
&lt;li>Для них это побочное занятие.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Миграция с Centos8&lt;/p>
&lt;ul>
&lt;li>Репозиторий скриптов: &lt;a href="https://github.com/vzlinux/vzdeploy" target="_blank" rel="noopener">https://github.com/vzlinux/vzdeploy&lt;/a>&lt;/li>
&lt;li>Обновить дистрибутив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf update -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачать скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/vzlinux/vzdeploy.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Провести миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo bash vzdeploy8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="suse-liberty-linux">&lt;span class="section-num">3.1.5&lt;/span> SUSE Liberty Linux&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.suse.com/products/suse-liberty-linux/" target="_blank" rel="noopener">https://www.suse.com/products/suse-liberty-linux/&lt;/a>&lt;/li>
&lt;li>Пакеты пространства пользователя в SUSE Liberty Linux сформировано путём пересборки исходных SRPM-пакетов из RHEL 8.5.&lt;/li>
&lt;li>Пакет с ядром заменён на собственный вариант, основанный на ветке ядра Linux 5.3 и созданный путём пересборки пакета с ядром из дистрибутива SUSE Linux Enterprise 15 SP3.&lt;/li>
&lt;li>Дистрибутив формируется только для архитектуры x86-64.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="полные-альтернативы">&lt;span class="section-num">3.2&lt;/span> Полные альтернативы&lt;/h3>
&lt;h4 id="rocky-linux">&lt;span class="section-num">3.2.1&lt;/span> Rocky Linux&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://rockylinux.org/" target="_blank" rel="noopener">https://rockylinux.org/&lt;/a>&lt;/li>
&lt;li>Руководитель: Грегори Курцер (Gregory Kurtzer), основател CentOS.&lt;/li>
&lt;li>Для развития продуктов и поддержки сообщества разработчиков создана коммерческая компания Ctrl IQ.&lt;/li>
&lt;li>В финансировании проекта участвуют компании MontaVista, 45Drives, OpenDrives и Amazon Web Services.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Миграция с Centos8&lt;/p>
&lt;ul>
&lt;li>Репозиторий скриптов: &lt;a href="https://github.com/rocky-linux/rocky-tools" target="_blank" rel="noopener">https://github.com/rocky-linux/rocky-tools&lt;/a>&lt;/li>
&lt;li>Обновить дистрибутив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf update -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачать скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/rocky-linux/rocky-tools.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Провести миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo bash migrate2rocky.sh -r
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="almalinux">&lt;span class="section-num">3.2.2&lt;/span> Almalinux&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://almalinux.org/" target="_blank" rel="noopener">https://almalinux.org/&lt;/a>&lt;/li>
&lt;li>Основан компанией CloudLinux.&lt;/li>
&lt;li>Проект курирует отдельная некоммерческая организация AlmaLinux OS Foundation.&lt;/li>
&lt;li>Слишком быстро выходят сборки (сразу после выпуска RedHat).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Зачем делается этот дистрибутив&lt;/p>
&lt;ul>
&lt;li>в CloudLinux осознали, что CentOS сам освобождает место под солнцем, а значит его можно попытаться занять;&lt;/li>
&lt;li>CloudLinux давно уже пересобирали RHEL/CentOS, есть опыт и своя сборочная инфраструктура;&lt;/li>
&lt;li>есть технология KernelCare &amp;mdash; обновления ядер без перезагрузки;&lt;/li>
&lt;li>стали срочно делать свою пересборку CentOS, доделывать сборочную инфраструктуру;&lt;/li>
&lt;li>купили железо для сборок под новые архитектуры (например, arm), под которые CloudLinux ранее не собирался;&lt;/li>
&lt;li>CloudLinux проверяет ABI своих пакетов на соответствие ABI пакетов из RHEL;&lt;/li>
&lt;li>хотят продвигать свои идеи в RHEL через CentOS Stream и апстримы.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="3">
&lt;li>
&lt;p>Миграция с Centos8&lt;/p>
&lt;ul>
&lt;li>Репозиторий скриптов: &lt;a href="https://github.com/AlmaLinux/almalinux-deploy" target="_blank" rel="noopener">https://github.com/AlmaLinux/almalinux-deploy&lt;/a>&lt;/li>
&lt;li>Обновить дистрибутив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf update -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачать скрипт для обновления:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -O https://raw.githubusercontent.com/AlmaLinux/almalinux-deploy/master/almalinux-deploy.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Провести миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo bash almalinux-deploy.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="что-выбрать">&lt;span class="section-num">4&lt;/span> Что выбрать&lt;/h2>
&lt;ul>
&lt;li>Наблюдается паритет у Rocky Linux и Almalinux.&lt;/li>
&lt;li>На данный момент склоняюсь более к Rocky Linux.&lt;/li>
&lt;/ul></description></item><item><title>Комментирование для статических сайтов</title><link>https://yamadharma.github.io/ru/post/2021/05/25/commenting-static-sites/</link><pubDate>Tue, 25 May 2021 11:46:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/25/commenting-static-sites/</guid><description>&lt;p>Статические сайты являются системами без сохранения состояния. Поэтому не могут обрабатывать изменяющиеся данные, такие как учётные записи пользователей, комментарии и т. д.
Для этого требуются некие внешние базы данных, взаимодействующих со статическим сайтом.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#поддержка-комментариев-в-сайтах-созданных-hugo">&lt;span class="section-num">1&lt;/span> Поддержка комментариев в сайтах, созданных Hugo&lt;/a>&lt;/li>
&lt;li>&lt;a href="#disqus-стандарт-de-facto">&lt;span class="section-num">2&lt;/span> Disqus - стандарт de facto&lt;/a>&lt;/li>
&lt;li>&lt;a href="#альтернативы-disqus">&lt;span class="section-num">3&lt;/span> Альтернативы Disqus&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#commento">&lt;span class="section-num">3.1&lt;/span> Commento&lt;/a>&lt;/li>
&lt;li>&lt;a href="#remark42">&lt;span class="section-num">3.2&lt;/span> Remark42&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="поддержка-комментариев-в-сайтах-созданных-hugo">&lt;span class="section-num">1&lt;/span> Поддержка комментариев в сайтах, созданных Hugo&lt;/h2>
&lt;p>По умолчанию Hugo может использовать для комментариев сервисы &lt;a href="https://disqus.com/" target="_blank" rel="noopener">Disqus&lt;/a> и &lt;a href="https://commento.io/" target="_blank" rel="noopener">Commento&lt;/a>.&lt;/p>
&lt;h2 id="disqus-стандарт-de-facto">&lt;span class="section-num">2&lt;/span> Disqus - стандарт de facto&lt;/h2>
&lt;blockquote>
&lt;p>Если Вы не платите за товар, то Вы и есть товар.&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;a href="https://disqus.com/" target="_blank" rel="noopener">https://disqus.com/&lt;/a>&lt;/li>
&lt;li>Практически стандартная платформа для комментариев.&lt;/li>
&lt;li>Есть бесплатные и платные планы.
&lt;ul>
&lt;li>&lt;a href="https://disqus.com/pricing/" target="_blank" rel="noopener">https://disqus.com/pricing/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Есть информация, что в 2017 году Discuss приобрела компания &lt;a href="https://zetaglobal.com/" target="_blank" rel="noopener">Zeta Global&lt;/a>. Основная деятельность компании &amp;mdash; продажа маркетинговых данных.&lt;/li>
&lt;li>Недостатки:
&lt;ul>
&lt;li>Тяжёлый виджет.&lt;/li>
&lt;li>Большое количество телеметрии:
&lt;ul>
&lt;li>&lt;a href="http://donw.io/post/github-comments/" target="_blank" rel="noopener">http://donw.io/post/github-comments/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://habr.com/ru/post/327424/" target="_blank" rel="noopener">https://habr.com/ru/post/327424/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Нет поддержки markdown.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="альтернативы-disqus">&lt;span class="section-num">3&lt;/span> Альтернативы Disqus&lt;/h2>
&lt;h3 id="commento">&lt;span class="section-num">3.1&lt;/span> Commento&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://commento.io/" target="_blank" rel="noopener">https://commento.io/&lt;/a>&lt;/li>
&lt;li>Для использования как сервиса существует только платный план.&lt;/li>
&lt;li>Исходный код открыт:
&lt;ul>
&lt;li>&lt;a href="https://gitlab.com/commento" target="_blank" rel="noopener">https://gitlab.com/commento&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Можно расположить на своём хостинге:
&lt;ul>
&lt;li>&lt;a href="https://docs.commento.io/getting-started/self-hosting/" target="_blank" rel="noopener">https://docs.commento.io/getting-started/self-hosting/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Особенности:
&lt;ul>
&lt;li>Импорт из Disqus.&lt;/li>
&lt;li>Голосование (upvote/downvote) на карточке комментария.&lt;/li>
&lt;li>Закрепление комментариев в начале треда.&lt;/li>
&lt;li>Модерация с верификацией, удалением сообщений, банами и ограничением частоты комментирования.&lt;/li>
&lt;li>Определение спама.&lt;/li>
&lt;li>Настраиваемые уведомления (почта).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="remark42">&lt;span class="section-num">3.2&lt;/span> Remark42&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://remark42.com/" target="_blank" rel="noopener">https://remark42.com/&lt;/a>&lt;/li>
&lt;li>Демонстрация работы:
&lt;ul>
&lt;li>&lt;a href="https://remark42.com/demo/" target="_blank" rel="noopener">https://remark42.com/demo/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Исходный код открыт:
&lt;ul>
&lt;li>&lt;a href="https://github.com/umputun/remark42" target="_blank" rel="noopener">https://github.com/umputun/remark42&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Нет сервиса, только хостинг на своём оборудовании.&lt;/li>
&lt;li>Особенности:
&lt;ul>
&lt;li>Импорт из Disqus.&lt;/li>
&lt;li>Голосование (upvote/downvote) на карточке комментария.&lt;/li>
&lt;li>Логин по OAuth, по почте.&lt;/li>
&lt;li>Модерация с верификацией, удалением сообщений и банами.&lt;/li>
&lt;li>Загрузка картинок.&lt;/li>
&lt;li>Сортировка комментариев.&lt;/li>
&lt;li>Настраиваемые уведомления (телеграм, RSS).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для Hugo надо настраивать отдельно:
&lt;ul>
&lt;li>&lt;a href="https://blog.lasall.dev/post/hugo-and-comments-with-remark42/" target="_blank" rel="noopener">https://blog.lasall.dev/post/hugo-and-comments-with-remark42/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Перенос Linux на btrfs</title><link>https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/</link><pubDate>Fri, 21 May 2021 20:38:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/</guid><description>&lt;p>Перенос Gentoo Linux с одного диска на другой. На новом диске делается система btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#исходное-состояние-системы">&lt;span class="section-num">1&lt;/span> Исходное состояние системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#разбиение-диска">&lt;span class="section-num">2&lt;/span> Разбиение диска&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подготовка-раздела-с-btrfs">&lt;span class="section-num">3&lt;/span> Подготовка раздела с btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копирование-существующих-файловых-систем">&lt;span class="section-num">4&lt;/span> Копирование существующих файловых систем&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-загрузчика">&lt;span class="section-num">5&lt;/span> Установка загрузчика&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создадим-файл-монтирования-fstab">&lt;span class="section-num">6&lt;/span> Создадим файл монтирования fstab&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#копирование-специальных-файловых-систем">&lt;span class="section-num">6.1&lt;/span> Копирование специальных файловых систем&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файл-подкачки-на-файловой-системе-btrfs">&lt;span class="section-num">7&lt;/span> Файл подкачки на файловой системе btrfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="исходное-состояние-системы">&lt;span class="section-num">1&lt;/span> Исходное состояние системы&lt;/h2>
&lt;ul>
&lt;li>Исходно система установлена на LVM:
&lt;ul>
&lt;li>&lt;code>/dev/sdb1&lt;/code>: &lt;code>/boot/EFI&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/sdb2&lt;/code>: &lt;code>/boot&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/root&lt;/code>: &lt;code>/&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/var&lt;/code>: &lt;code>/var&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/var_tmp&lt;/code>: &lt;code>/var/tmp&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/vm&lt;/code>: &lt;code>/var/vm&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/portage&lt;/code>: &lt;code>/usr/portage&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/portage_local&lt;/code>: &lt;code>/usr/local/share/portage&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/portage_com&lt;/code>: &lt;code>/com/lib/portage&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/home&lt;/code>: &lt;code>/home&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="разбиение-диска">&lt;span class="section-num">2&lt;/span> Разбиение диска&lt;/h2>
&lt;ul>
&lt;li>Установим тип разбиения в GPT.&lt;/li>
&lt;li>Разобьём на партиции:
&lt;ul>
&lt;li>p1 &amp;mdash; 500M, для &lt;code>EFI&lt;/code>.&lt;/li>
&lt;li>p2 &amp;mdash; 500&amp;ndash;1024M, для &lt;code>/boot&lt;/code>.&lt;/li>
&lt;li>p3 &amp;mdash; двойная оперативная память, для &lt;code>swap&lt;/code>.
&lt;ul>
&lt;li>Также можно разместить файл подкачки на &lt;code>btrfs&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/05/20/btrfs-swap-file/">Файл подкачки на btrfs&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>p4 &amp;mdash; всё остальное для &lt;code>btrfs&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Создадим файловые системы:
&lt;ul>
&lt;li>p1 (&lt;code>EFI&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkfs.vfat -F32 -n EFI /dev/sda1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>p2 (&lt;code>/boot&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkfs.ext4 -L boot /dev/sda2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>p3 (&lt;code>swap&lt;/code> в случае отдельной партиции):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkswap -L swap /dev/sda3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>p4 (&lt;code>btrfs&lt;/code>)
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkfs.btrfs /dev/sda4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="подготовка-раздела-с-btrfs">&lt;span class="section-num">3&lt;/span> Подготовка раздела с btrfs&lt;/h2>
&lt;ul>
&lt;li>Подмонтируем раздел с btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9 /dev/sda4 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим подтома на btrfs (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-subvolumes/">Подтома btrfs&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var_tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var_log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @home
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>И подтома специально для &lt;em>Gentoo Linux&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage_local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage_com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если используется файл подкачки на файловой системе, то создадим для него подтом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="копирование-существующих-файловых-систем">&lt;span class="section-num">4&lt;/span> Копирование существующих файловых систем&lt;/h2>
&lt;ul>
&lt;li>Создадим точку монтирования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/from
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем root-партицию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/vgs/root /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/gentoo/@
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>/var&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/vgs/var /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/gentoo/@var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>portage&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/vgs/portage /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/gentoo/@portage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>portage_local&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/vgs/portage_local /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/gentoo/@portage_local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>/boot&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda2 /mnt/to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sdb2 /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/from
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-загрузчика">&lt;span class="section-num">5&lt;/span> Установка загрузчика&lt;/h2>
&lt;ul>
&lt;li>Перемонтируем файловую систему &lt;code>btrfs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">umount /mnt/gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@ /dev/sda4 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var /dev/sda4 /mnt/gentoo/var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var_tmp /dev/sda4 /mnt/gentoo/var/tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda2 /mnt/gentoo/boot/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda1 /mnt/gentoo/boot/efi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем псевдо-файловые системы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /dev /mnt/gentoo/dev/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /proc /mnt/gentoo/proc/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /sys /mnt/gentoo/sys/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /run /mnt/gentoo/run/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -t efivarfs efivarfs /mnt/gentoo/sys/firmware/efi/efivars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим загрузчик:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chroot /mnt/gentoo/ /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grub-install /boot/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grub-mkconfig -o /boot/grub/grub.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="создадим-файл-монтирования-fstab">&lt;span class="section-num">6&lt;/span> Создадим файл монтирования fstab&lt;/h2>
&lt;ul>
&lt;li>Узнаем идентификатор партиции с файловой системой btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">blkid /dev/sda4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Получим строчку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим файл &lt;code>/mnt/gentoo/etc/fstab&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">LABEL=&amp;#34;boot&amp;#34; /boot ext4 relatime,discard 1 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LABEL=&amp;#34;EFI&amp;#34; /boot/efi vfat defaults,discard,flush,tz=UTC 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LABEL=&amp;#34;swap&amp;#34; none swap sw 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34; / btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@ 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34; /var btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@var 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34; /var/tmp btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@var_tmp 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34; /var/vm btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@vm 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34; /home btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@home 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34; /usr/portage btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@portage 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34; /usr/local/share/portage btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@portage_local 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34; /com/lib/portage btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@portage_com 0 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если используется файл подкачки, то вместо отдельной партиции следует подключить этот файл в &lt;code>/mnt/gentoo/etc/fstab&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34; /swap btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@swap 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/swap/swapfile none swap sw 0 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="копирование-специальных-файловых-систем">&lt;span class="section-num">6.1&lt;/span> Копирование специальных файловых систем&lt;/h3>
&lt;ul>
&lt;li>Файловые системы с отключённым CoW (copy-on-write) копируются после монтирования каталога.&lt;/li>
&lt;li>Скопируем файлы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/vgs/vm /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/gentoo/var/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="файл-подкачки-на-файловой-системе-btrfs">&lt;span class="section-num">7&lt;/span> Файл подкачки на файловой системе btrfs&lt;/h2>
&lt;ul>
&lt;li>Для раздела файла подкачки следует отключить CoW (copy-on-write).&lt;/li>
&lt;li>Подмонтируем файловую систему &lt;code>btrfs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@ /dev/sda4 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим точку монтирования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/gentoo/swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем подтом &lt;code>@swap&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nv">subvol&lt;/span>&lt;span class="o">=&lt;/span>@swap /dev/sda4 /mnt/gentoo/swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключим для этого подтома CoW:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chattr +C /mnt/gentoo/swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">truncate -s &lt;span class="m">0&lt;/span> /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим права доступа &lt;code>600&lt;/code> к файлу подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">600&lt;/span> /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим размер файла подкачки исходя из размера оперативной памяти:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">fallocate -l &lt;span class="k">$(&lt;/span>free -h --si &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;NR == 2 {print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span> /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отформатируем файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkswap /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активируем файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">swapon /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Window manager i3</title><link>https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/</link><pubDate>Fri, 14 May 2021 11:32:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/</guid><description>&lt;p>Менеджер окон &lt;em>i3&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозиторий-конфигурации">&lt;span class="section-num">2&lt;/span> Репозиторий конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-конфигурации">&lt;span class="section-num">3&lt;/span> Файл конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#навигация">&lt;span class="section-num">4&lt;/span> Навигация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#клавиша-модификатор">&lt;span class="section-num">4.1&lt;/span> Клавиша-модификатор&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-комбинации-клавиш">&lt;span class="section-num">4.2&lt;/span> Основные комбинации клавиш&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перемещение-фокуса">&lt;span class="section-num">4.3&lt;/span> Перемещение фокуса&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перемещение-окон">&lt;span class="section-num">4.4&lt;/span> Перемещение окон&lt;/a>&lt;/li>
&lt;li>&lt;a href="#modifying-windows">&lt;span class="section-num">4.5&lt;/span> Modifying windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#структура-расположения-контейнеров">&lt;span class="section-num">4.6&lt;/span> Структура расположения контейнеров&lt;/a>&lt;/li>
&lt;li>&lt;a href="#floating">&lt;span class="section-num">4.7&lt;/span> Floating&lt;/a>&lt;/li>
&lt;li>&lt;a href="#рабочие-области--workspaces">&lt;span class="section-num">4.8&lt;/span> Рабочие области (workspaces)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#opening-applications-closing-windows">&lt;span class="section-num">4.9&lt;/span> Opening applications / Closing windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#выход-перезапуск">&lt;span class="section-num">4.10&lt;/span> Выход/Перезапуск&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#терминал">&lt;span class="section-num">5.1&lt;/span> Терминал&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-окном-с-помощью-мышки">&lt;span class="section-num">5.2&lt;/span> Управление окном с помощью мышки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#строка-статуса">&lt;span class="section-num">5.3&lt;/span> Строка статуса&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#i3bar">&lt;span class="section-num">5.3.1&lt;/span> i3bar&lt;/a>&lt;/li>
&lt;li>&lt;a href="#py3status">&lt;span class="section-num">5.3.2&lt;/span> py3status&lt;/a>&lt;/li>
&lt;li>&lt;a href="#polybar">&lt;span class="section-num">5.3.3&lt;/span> polybar&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#запуск-приложений">&lt;span class="section-num">5.4&lt;/span> Запуск приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#rofi">&lt;span class="section-num">5.4.1&lt;/span> rofi&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#блокировка-экрана">&lt;span class="section-num">5.5&lt;/span> Блокировка экрана&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#блокировщик-экрана-i3lock">&lt;span class="section-num">5.5.1&lt;/span> Блокировщик экрана &lt;code>i3lock&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#блокировщик-экрана-i3lock-color">&lt;span class="section-num">5.5.2&lt;/span> Блокировщик экрана &lt;code>i3lock-color&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#приложения">&lt;span class="section-num">6&lt;/span> Приложения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#снимки-экрана">&lt;span class="section-num">6.1&lt;/span> Снимки экрана&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#совместимость-приложений">&lt;span class="section-num">7&lt;/span> Совместимость приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#java">&lt;span class="section-num">7.1&lt;/span> Java&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#серое-окно-приложения-не-меняют-размер-с-помощью-wm-меню-сразу-закрываются">&lt;span class="section-num">7.1.1&lt;/span> Серое окно, приложения не меняют размер с помощью WM, меню сразу закрываются&lt;/a>&lt;/li>
&lt;li>&lt;a href="#меню-в-приложениях-плавает-отдельно-им-невозможно-пользоваться">&lt;span class="section-num">7.1.2&lt;/span> Меню в приложениях плавает отдельно, им невозможно пользоваться&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Тайловый менеджер окон.&lt;/li>
&lt;li>&lt;a href="https://i3wm.org/" target="_blank" rel="noopener">https://i3wm.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="репозиторий-конфигурации">&lt;span class="section-num">2&lt;/span> Репозиторий конфигурации&lt;/h2>
&lt;ul>
&lt;li>Я сделал репозиторий со своей конфигурацией: &lt;a href="https://github.com/yamadharma/config-i3" target="_blank" rel="noopener">https://github.com/yamadharma/config-i3&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="файл-конфигурации">&lt;span class="section-num">3&lt;/span> Файл конфигурации&lt;/h2>
&lt;ul>
&lt;li>Файлы конфигурации просматриваются в следующем порядке:
&lt;ul>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3/config&lt;/code> (&lt;code>~/.config/i3/config&lt;/code>);&lt;/li>
&lt;li>&lt;code>~/.i3/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_DIRS/i3/config&lt;/code> (&lt;code>/etc/xdg/i3/config&lt;/code>);&lt;/li>
&lt;li>&lt;code>/etc/i3/config&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Начиная с версии 4.20, можно подключать другие файлы конфигурации из основного файла конфигурации &lt;em>i3&lt;/em>.
&lt;ul>
&lt;li>Примеры использования директивы &lt;code>include&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Тильда преобразуется в домашний каталог пользователя&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include ~/.config/i3/assignments.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Переменные среды разыменовываются&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include $HOME/.config/i3/assignments.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Символы подстановки раскрываются&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include ~/.config/i3/config.d/*.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Можно выполнять команду&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include ~/.config/i3/`hostname`.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Каждый путь загружается только один раз&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include ~/.config/i3/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Относительные пути интерпретируются относительно каталога конфигурационного файла&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include assignments.conf&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="навигация">&lt;span class="section-num">4&lt;/span> Навигация&lt;/h2>
&lt;h3 id="клавиша-модификатор">&lt;span class="section-num">4.1&lt;/span> Клавиша-модификатор&lt;/h3>
&lt;ul>
&lt;li>В качестве модификатора обычно используется:
&lt;ul>
&lt;li>&lt;code>Alt&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">set $mod Mod1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Super&lt;/code> (Клавиша со значком &lt;em>Windows&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">set $mod Mod4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Предпочитаю &lt;code>Super&lt;/code>, чтобы не конфликтовать с Emacs.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="основные-комбинации-клавиш">&lt;span class="section-num">4.2&lt;/span> Основные комбинации клавиш&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Enter&lt;/code>: открыть терминал.&lt;/li>
&lt;/ul>
&lt;h3 id="перемещение-фокуса">&lt;span class="section-num">4.3&lt;/span> Перемещение фокуса&lt;/h3>
&lt;ul>
&lt;li>Фокус можно перемещать как с помощью стрелок, так и с помощью буквенных клавиш, как в редакторе &lt;em>vi&lt;/em>.
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>h&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Left&lt;/code>: сдвиг фокуса влево.&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>j&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Down&lt;/code>: сдвиг фокуса вниз.&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>k&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Up&lt;/code>: сдвиг фокуса вверх.&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>l&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Right&lt;/code>: сдвиг фокуса вправо.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация выглядит следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Home row direction keys, like vim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $left h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $down j
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $up k
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $right l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Move your focus around
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$left focus left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$down focus down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$up focus up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$right focus right
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Or use $mod+[up|down|left|right]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Left focus left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Down focus down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Up focus up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Right focus right
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Впрочем, следует заметить, что также могут использоваться и другие соглашения:
&lt;ul>
&lt;li>&lt;code>j&lt;/code>: влево;&lt;/li>
&lt;li>&lt;code>k&lt;/code>: вниз;&lt;/li>
&lt;li>&lt;code>l&lt;/code>: вверх;&lt;/li>
&lt;li>&lt;code>;&lt;/code>: вправо.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Поскольку в данном менеджере окон поддерживаются контейнеры, то можно переключить фокус на родительский контейнер:
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>a&lt;/code>: переключить фокус на родительский контейнер.&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Move focus to the parent container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+a focus parent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Space&lt;/code>: переключить режим фокуса.&lt;/li>
&lt;/ul>
&lt;h3 id="перемещение-окон">&lt;span class="section-num">4.4&lt;/span> Перемещение окон&lt;/h3>
&lt;ul>
&lt;li>Делается аналогично перемещению фокуса, но с добавлением модификатора &lt;code>Shift&lt;/code>:
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>h&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Left&lt;/code>: перемещение влево;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>j&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Down&lt;/code>: перемещение вниз;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>k&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Up&lt;/code>: перемещение вверх;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>l&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Right&lt;/code>: перемещение вправо.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация выглядит следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Move the focused window with the same, but add Shift
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$left move left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$down move down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$up move up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$right move right
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Ditto, with arrow keys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Left move left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Down move down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Up move up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Right move right
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="modifying-windows">&lt;span class="section-num">4.5&lt;/span> Modifying windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + f toggle fullscreen&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + v split a window vertically&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + h split a window horizontally&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + r resize mode&lt;/li>
&lt;/ul>
&lt;h3 id="структура-расположения-контейнеров">&lt;span class="section-num">4.6&lt;/span> Структура расположения контейнеров&lt;/h3>
&lt;ul>
&lt;li>Поддерживаются следующие расположения контейнеров:
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>e&lt;/code>: переключение разделённого расположения (split layout);&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>s&lt;/code>: стековое размещение (stacking layout);&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>w&lt;/code>: размещение с табами (tabbed layout).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Switch the current container between different layout styles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+s layout stacking
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+w layout tabbed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+e layout toggle split
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для раскладки по умолчанию я использую табы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### Layout mode for new containers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## default|stacking|tabbed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">workspace_layout tabbed
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="floating">&lt;span class="section-num">4.7&lt;/span> Floating&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + Shift + Space toggle floating&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + Left click drag floating&lt;/li>
&lt;/ul>
&lt;h3 id="рабочие-области--workspaces">&lt;span class="section-num">4.8&lt;/span> Рабочие области (workspaces)&lt;/h3>
&lt;ul>
&lt;li>Сконфигурим рабочие области:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Define names for workspaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws1 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws2 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws3 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws4 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws5 5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws6 6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws7 7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws8 8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws9 9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws10 10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>0&lt;/code> &amp;ndash; &lt;code>9&lt;/code>: переключиться на соответствующую рабочую область:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Switch to workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+1 workspace $ws1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+2 workspace $ws2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+3 workspace $ws3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+4 workspace $ws4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+5 workspace $ws5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+6 workspace $ws6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+7 workspace $ws7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+8 workspace $ws8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+9 workspace $ws9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+0 workspace $ws10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>0&lt;/code> &amp;ndash; &lt;code>9&lt;/code>: перенести окно на соответствующую рабочую область:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Move focused container to workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+1 move container to workspace $ws1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+2 move container to workspace $ws2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+3 move container to workspace $ws3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+4 move container to workspace $ws4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+5 move container to workspace $ws5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+6 move container to workspace $ws6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+7 move container to workspace $ws7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+8 move container to workspace $ws8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+9 move container to workspace $ws9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+0 move container to workspace $ws10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="opening-applications-closing-windows">&lt;span class="section-num">4.9&lt;/span> Opening applications / Closing windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + d open application launcher (dmenu)&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + Shift + q kill a window&lt;/li>
&lt;/ul>
&lt;h3 id="выход-перезапуск">&lt;span class="section-num">4.10&lt;/span> Выход/Перезапуск&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>c&lt;/code>: перечитать конфигурационный файл.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## reload the configuration file
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+c reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>r&lt;/code>: перестартовать &lt;em>i3&lt;/em>, сохранив сессию.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+r restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>e&lt;/code>: выход из &lt;em>i3&lt;/em>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## exit i3 (logs you out of your X session)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+e exec &amp;#34;i3-nagbar -t warning -m &amp;#39;You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.&amp;#39; -B &amp;#39;Yes, exit i3&amp;#39; &amp;#39;i3-msg exit&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/h2>
&lt;h3 id="терминал">&lt;span class="section-num">5.1&lt;/span> Терминал&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>В качестве терминала я использую kitty.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Конфигурация запуска терминала:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">set $term kitty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Return exec $term
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В этом случае запускается одно окно терминала.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Для работы я использую специальную настройку сессии терминала. Я её запускаю при входе в сессию. Для этого я приспособил комбинацию &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Enter&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Return exec kitty --session ~/.config/kitty/startup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="управление-окном-с-помощью-мышки">&lt;span class="section-num">5.2&lt;/span> Управление окном с помощью мышки&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Можно управлять окнами с помощью мышки.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Привязка осуществляется следующей командой:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym [--release] [--border] [--whole-window] [--exclude-titlebar] [&amp;lt;Modifiers&amp;gt;+]button&amp;lt;n&amp;gt; command
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>По умолчанию привязка запускается только при нажатии на строку заголовка окна.&lt;/li>
&lt;li>Если указан флаг &lt;code>--release&lt;/code>, он запустится, когда кнопка мыши будет отпущена.&lt;/li>
&lt;li>Если указан флаг &lt;code>--whole-window&lt;/code>, то привязка также будет выполняться при щелчке по любой части окна, за исключением границы.&lt;/li>
&lt;li>Чтобы привязка выполнялась при щелчке границы, нужно указать флаг &lt;code>--border&lt;/code>.&lt;/li>
&lt;li>Если задан флаг &lt;code>--exclude-titlebar&lt;/code>, заголовок не будет учитываться для привязки клавиш.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Примеры.&lt;/p>
&lt;ul>
&lt;li>Средняя кнопка на заголовке закрывает окно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym --release button2 kill
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Средняя кнопка и модификатор над любой частью окна закрывает окно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym --whole-window $mod+button2 kill
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Правая кнопка мыши переключает плавающий режим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym button3 floating toggle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+button3 floating toggle
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Боковые кнопки мыши перемещают окно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym button9 move left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym button8 move right
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="строка-статуса">&lt;span class="section-num">5.3&lt;/span> Строка статуса&lt;/h3>
&lt;h4 id="i3bar">&lt;span class="section-num">5.3.1&lt;/span> i3bar&lt;/h4>
&lt;ul>
&lt;li>Отрисовку панели осуществляет утилита &lt;code>i3bar&lt;/code>.&lt;/li>
&lt;li>Отображается вверху или внизу экрана.&lt;/li>
&lt;li>Содержит:
&lt;ul>
&lt;li>область с кнопками переключения рабочих областей &lt;em>i3&lt;/em>;&lt;/li>
&lt;li>системную строку, генерируемую при помощи &lt;code>i3status&lt;/code> или аналогов;&lt;/li>
&lt;li>системный трей с иконками программ.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В конфигурационном файле задаётся следующим образом (&lt;a href="https://i3wm.org/docs/userguide.html#_configuring_i3bar" target="_blank" rel="noopener">https://i3wm.org/docs/userguide.html#_configuring_i3bar&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/i3/config -*- mode: conf-unix; -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Start i3bar to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status_command i3status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Поддержка иконок в i3bar&lt;/p>
&lt;ul>
&lt;li>В &lt;code>i3bar&lt;/code> можно использовать шрифты иконок (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/21/monospace-fonts/">Моноширинные шрифты&lt;/a>).&lt;/li>
&lt;li>Наиболее распространённым является шрифт &lt;a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome&lt;/a>.&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge media-fonts/fontawesome
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для вставки шрифта в файл можно использовать список кодов для иконок &lt;a href="https://fontawesome.com/cheatsheet" target="_blank" rel="noopener">https://fontawesome.com/cheatsheet&lt;/a>.&lt;/li>
&lt;li>Шрифт лучше явно обозначить в конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> …
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> font pango:Source Sans Pro, FontAwesome 5 Free 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> …
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для набора символа по его коду следует использовать конфигурации клавиш. Например, для набора символа с кодом &lt;code>0xf004&lt;/code>, требуется набрать:
&lt;ul>
&lt;li>приложения на основе GTK: &lt;code>Ctrl&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>u&lt;/code>, &lt;code>f004&lt;/code>, &lt;code>Enter&lt;/code>;&lt;/li>
&lt;li>emacs: &lt;code>Ctrl&lt;/code> + &lt;code>x&lt;/code>, &lt;code>8&lt;/code>, &lt;code>Enter&lt;/code>, &lt;code>f004&lt;/code>, &lt;code>Enter&lt;/code>;&lt;/li>
&lt;li>vim: &lt;code>Ctrl&lt;/code> + &lt;code>v&lt;/code>, &lt;code>uf004&lt;/code>;&lt;/li>
&lt;li>urxvt: удерживая &lt;code>Ctrl&lt;/code> + &lt;code>Shift&lt;/code>, наберите &lt;code>f004&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>i3status&lt;/p>
&lt;ul>
&lt;li>Использовано &lt;a href="https://igancev.ru/2020-05-11-configuring-i3status-in-i3wm" target="_blank" rel="noopener">https://igancev.ru/2020-05-11-configuring-i3status-in-i3wm&lt;/a>.&lt;/li>
&lt;li>&lt;code>i3status&lt;/code> генерирует строку состояния для &lt;code>i3bar&lt;/code>.&lt;/li>
&lt;li>Содержит встроенные модули:
&lt;ul>
&lt;li>IPv6 &amp;mdash; получает и выводит IPv6 адрес.&lt;/li>
&lt;li>Disk &amp;mdash; отображает информацию о занятом и свободном месте в файловой системе.&lt;/li>
&lt;li>Run-watch &amp;mdash; мониторинг определённого процесса в системе.&lt;/li>
&lt;li>Path-exists &amp;mdash; проверяет на существование путь в файловой системе.&lt;/li>
&lt;li>Wireless &amp;mdash; позволяет выводить подключения к WIFI сети, уровень сигнала, имя точки доступа.&lt;/li>
&lt;li>Ethernet &amp;mdash; предоставляет IP адрес и скорость соединения сетевого интерфейса.&lt;/li>
&lt;li>Battery &amp;mdash; показ уровня заряда батареи.&lt;/li>
&lt;li>CPU-Temperature &amp;mdash; показ температуры процессора.&lt;/li>
&lt;li>CPU Usage &amp;mdash; использование процессора в процентах.&lt;/li>
&lt;li>Memory &amp;mdash; использование оперативной памяти.&lt;/li>
&lt;li>Load &amp;mdash; среднее значение загрузки системы за 1, 5 и 15 минут (Load Overage).&lt;/li>
&lt;li>Time &amp;mdash; время в текущей временной зоне.&lt;/li>
&lt;li>TzTime &amp;mdash; время в заданной временной зоне.&lt;/li>
&lt;li>DDate &amp;mdash; дата.&lt;/li>
&lt;li>Volume &amp;mdash; управление громкостью звука.&lt;/li>
&lt;li>File Contents &amp;mdash; вывод содержимого указанного файла.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Модули в строке можно переиспользовать по нескольку раз, управляя порядком вывода.&lt;/li>
&lt;li>Конфигурацию условно можно разделить на 3 части:
&lt;ul>
&lt;li>блок &lt;code>general&lt;/code> &amp;mdash; содержит общие параметры;&lt;/li>
&lt;li>переменная &lt;code>order&lt;/code> &amp;mdash; в неё записывается порядок вывода интересующих модулей;&lt;/li>
&lt;li>блоки конфигурации модулей &amp;mdash; непосредственно настройки самих блоков с метриками.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В конфигурации i3bar задаётся конфигурационный файл для i3status:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/i3/config -*- mode: conf-unix; -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Start i3bar to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> font pango:Source Sans Pro, FontAwesome 5 Free 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status_command i3status --config ~/.config/i3/i3status/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Структура информационной панели задаётся в конфигурационном файле:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### -*- mode: conf-unix; -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## ~/.config/i3/i3status/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">general {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> colors = true # включение/выключение поддержки цветов true/false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> interval = 1 # интервал обновления строки статуса, в секундах
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> output_format = &amp;#34;i3bar&amp;#34; # формат вывода, устанавливаем i3bar (JSON)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># порядок вывода модулей
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">order += &amp;#34;run_watch openvpn&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">order += &amp;#34;run_watch openconnect&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">order += &amp;#34;volume master&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">order += &amp;#34;wireless _first_&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">order += &amp;#34;battery all&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">order += &amp;#34;disk /&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">order += &amp;#34;memory&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">order += &amp;#34;cpu_usage&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">order += &amp;#34;cpu_temperature 0&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">order += &amp;#34;tztime local&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># отслеживание процесса openvpn
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># служит как индикатор работы openvpn клиента
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># при запуске openvpn необходимо
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># указывать параметр --writepid /var/run/openvpn.pid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">run_watch openvpn {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pidfile = &amp;#34;/var/run/openvpn.pid&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format = &amp;#34; openvpn&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # если пареметр format_down оставить пустым,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # то при неактивном процессе блок будет отсутствовать
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format_down=&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># аналогичный блок индикатор openconnect vpn клиента
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># требуется запуск клиента с параметром --pid-file=/var/run/openconnect.pid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">run_watch openconnect {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pidfile = &amp;#34;/var/run/openconnect.pid&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format = &amp;#34; openconnect vpn&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format_down=&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># управление громкостью звука
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">volume master {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format = &amp;#34; %volume&amp;#34; # шаблон громкости в активном состоянии
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format_muted = &amp;#34; %volume&amp;#34; # шаблон громкости в состоянии muted (без звука)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> device = &amp;#34;default&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mixer = &amp;#34;Master&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mixer_idx = 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># индикатор WIFI
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wireless _first_ {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # шаблон вывода, можно дополнить
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # наименованием подключения %essid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # и ip адресом %ip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format_up = &amp;#34;%quality %frequency&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format_down = &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># состояние заряда батареи
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">battery all {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # шаблон вывода, можно дополнить
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # оставшимся временем работы %emptytime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # энергопотреблением %consumption в ваттах
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format = &amp;#34;%status %percentage&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # true - показ процента заряда от 0 до 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # false - показ процента заряда от 0 до n, с учетом
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # изношенности аккумулятора
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> last_full_capacity = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format_down = &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status_chr = &amp;#34;&amp;#34; # статус подзарядки
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status_bat = &amp;#34;&amp;#34; # статус в режиме работы от батареи
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status_unk = &amp;#34;? UNK&amp;#34; # неизвестный статус
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status_full = &amp;#34;&amp;#34; # статус полного заряда
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path = &amp;#34;/sys/class/power_supply/BAT%d/uevent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # нижний порог заряда, после которого блок
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # будет окрашен в &amp;#34;color_bad&amp;#34; (по умолчанию красный)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # подробнее в man i3status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> low_threshold = 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># отслеживаемый накопитель
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">disk &amp;#34;/&amp;#34; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # доступные переменные:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # %used, %percentage_used - занятое пространство
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # %free, %percentage_free - свободное пространство
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # %avail, %percentage_avail - доступное пространство
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # %total - всего
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format = &amp;#34; %avail&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # будет окрашен в &amp;#34;color_bad&amp;#34; (по умолчанию красный)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # при достижении нижнего порога менее 10GB доступного пространства
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> low_threshold = &amp;#34;10&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> threshold_type = &amp;#34;gbytes_avail&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format_below_threshold = &amp;#34; Warning: %avail&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># миниторинг оперативной памяти
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">memory {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # доступные переменные:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # %total, percentage_total
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # %used, percentage_used
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # %free, percentage_free
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # %available, percentage_available
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # %shared, percentage_shared
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format = &amp;#34; %used&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # порог, при котором вывод окрасится в
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # желтый (degraded) или красный (critical)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # а формат вывода изменится на format_degraded
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> threshold_degraded = &amp;#34;1G&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> threshold_critical = &amp;#34;200M&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format_degraded = &amp;#34;MEMORY &amp;lt; %available&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># температура процессора
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cpu_temperature 0 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format = &amp;#34; %degrees&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # верхний порог температуры, при достижении которого
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # вывод окрасится красным,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # и формат изменится на format_above_threshold
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> max_threshold = &amp;#34;80&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format_above_threshold = &amp;#34; %degrees&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path = &amp;#34;/sys/class/thermal/thermal_zone0/temp&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># использование центрального процессора
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cpu_usage {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # %usage - процентное использование ЦП
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # %cpu&amp;lt;N&amp;gt; - начиная с %cpu0 и далее показывает использование ядер
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format = &amp;#34; %usage&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # доступны параметры:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # degraded_threshold, окрас в желтый, по умолчанию 90
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # max_threshold, окрас в красный, по умолчанию 95
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # и кастомные форматы для них
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # format_above_degraded_threshold и format_above_threshold
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># вывод даты и времени по заданному формату
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tztime local {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> format = &amp;#34; %d %b %Y  %H:%M:%S&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="py3status">&lt;span class="section-num">5.3.2&lt;/span> py3status&lt;/h4>
&lt;ul>
&lt;li>&lt;code>py3status&lt;/code> &amp;mdash; это расширяемая оболочка для &lt;code>i3status&lt;/code>, написанная на python.&lt;/li>
&lt;li>Сайт: &lt;a href="https://py3status.readthedocs.io/" target="_blank" rel="noopener">https://py3status.readthedocs.io/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/ultrabug/py3status" target="_blank" rel="noopener">https://github.com/ultrabug/py3status&lt;/a>.&lt;/li>
&lt;li>Можно управлять &lt;code>i3bar&lt;/code>:
&lt;ul>
&lt;li>используя один из доступных модулей, поставляемых с &lt;code>py3status&lt;/code>;&lt;/li>
&lt;li>группировать несколько модулей и автоматически или вручную циклически отображать их отображение;&lt;/li>
&lt;li>писать свои собственные модули и отображать их вывод на панели;&lt;/li>
&lt;li>обрабатывать события кликов на &lt;code>i3bar&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Отображается вверху или внизу экрана.&lt;/li>
&lt;li>Содержит:
&lt;ul>
&lt;li>область с кнопками переключения рабочих областей &lt;em>i3&lt;/em>;&lt;/li>
&lt;li>системную строку;&lt;/li>
&lt;li>системный трей с иконками программ.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Запуск py3status&lt;/p>
&lt;ul>
&lt;li>Запускается вместо &lt;code>i3bar&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/i3/config -*- mode: conf-unix; -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Start py3status to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> font pango:Iosevka Nerd Font 12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status_command py3status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Использует конфигурационный файл от &lt;code>i3status&lt;/code> или собственную конфигурацию.&lt;/li>
&lt;li>Порядок поиска конфигурационного файла:
&lt;ul>
&lt;li>&lt;code>$XDG_CONFIG_HOME/py3status/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3status/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3/i3status.conf&lt;/code>;&lt;/li>
&lt;li>&lt;code>~/.i3status.conf&lt;/code>;&lt;/li>
&lt;li>&lt;code>~/.i3/i3status.conf&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_DIRS/i3status/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/i3status.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="polybar">&lt;span class="section-num">5.3.3&lt;/span> polybar&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Отдельное приложение для строки статуса.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Применяется для замены &lt;em>i3bar&lt;/em>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://polybar.github.io/" target="_blank" rel="noopener">https://polybar.github.io/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://github.com/polybar/polybar" target="_blank" rel="noopener">https://github.com/polybar/polybar&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Темы для &lt;em>polybar&lt;/em>: &lt;a href="https://github.com/adi1090x/polybar-themes" target="_blank" rel="noopener">https://github.com/adi1090x/polybar-themes&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Одним из побудительных мотивов установки &lt;em>polybar&lt;/em> может быть то, что здесь можно без проблем настроить индикатор раскладки клавиатуры.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">USE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;i3wm&amp;#34;&lt;/span> emerge x11-misc/polybar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Конфигурационный файл:&lt;/p>
&lt;ul>
&lt;li>стандартное расположение: &lt;code>~/.config/polybar/config&lt;/code> (&lt;code>$XDG_CONFIG_HOME/polybar/config&lt;/code>);&lt;/li>
&lt;li>использую для локальных настроек только для &lt;em>i3&lt;/em>: &lt;code>~/.config/i3/polybar/config&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Скрипт запуска&lt;/p>
&lt;ul>
&lt;li>Создадим скрипт запуска &lt;code>polybar&lt;/code>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># ~/.config/i3/polybar/launch.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Terminate already running bar instances&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">killall -q polybar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># If all your bars have ipc enabled, you can also use&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># polybar-msg cmd quit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Wait until the processes have been shut down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> pgrep -u &lt;span class="nv">$UID&lt;/span> -x polybar &amp;gt;/dev/null&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> sleep 1&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Launch Polybar, using config location ~/.config/i3/polybar/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">polybar --config&lt;span class="o">=&lt;/span>~/.config/i3/polybar/config i3 &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Polybar launched...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим права на исполнение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod +x ~/.config/i3/polybar/launch.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавим вызов &lt;code>polybar&lt;/code> в файл конфигурации &lt;em>i3&lt;/em>. Конфигурацию для &lt;em>i3bar&lt;/em> следует закомментировать.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Start i3bar to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># font pango:Source Sans Pro, FontAwesome 5 Free 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># status_command i3status --config ~/.config/i3/i3status/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Start polybar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exec_always --no-startup-id ~/.config/i3/polybar/launch.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="запуск-приложений">&lt;span class="section-num">5.4&lt;/span> Запуск приложений&lt;/h3>
&lt;ul>
&lt;li>По умолчанию используется &lt;code>dmenu&lt;/code>.&lt;/li>
&lt;li>Можно заменить на &lt;code>rofi&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/19/launcher_rofi/">Запуск приложений. Rofi&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h4 id="rofi">&lt;span class="section-num">5.4.1&lt;/span> rofi&lt;/h4>
&lt;ul>
&lt;li>Используется для запуска приложений, переключения окон.&lt;/li>
&lt;li>&lt;a href="https://github.com/davatorium/rofi" target="_blank" rel="noopener">https://github.com/davatorium/rofi&lt;/a>&lt;/li>
&lt;li>Конфигурация по умолчанию находится в &lt;code>~/.config/rofi/config&lt;/code>.&lt;/li>
&lt;li>Для выбора темы можно использовать команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rofi-theme-selector
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для запуска программ используется несколько мод:
&lt;ul>
&lt;li>&lt;code>run&lt;/code>: запускать приложения из пути (&lt;code>$PATH&lt;/code>) с возможностью запуска в терминале.&lt;/li>
&lt;li>&lt;code>drun&lt;/code>: запускать приложения на основе desctop-файлов (по стандарту XDG).&lt;/li>
&lt;li>&lt;code>window&lt;/code>: переключение между окнами в оконном менеджере, совместимом со спецификацией EWMH.&lt;/li>
&lt;li>&lt;code>ssh&lt;/code>: подключение к удаленному хосту через &lt;code>ssh&lt;/code>.&lt;/li>
&lt;li>&lt;code>file-browser&lt;/code>: базовый файловый броузер для открытия файлов.&lt;/li>
&lt;li>&lt;code>keys&lt;/code>: список внутренних привязок клавиш.&lt;/li>
&lt;li>&lt;code>script&lt;/code>: использование простых скриптов.&lt;/li>
&lt;li>&lt;code>combi&lt;/code>: объединяет несколько мод в одну.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Использование запятых в файле настроек &lt;em>i3&lt;/em> может привести к проблемам. Лучше использовать файл настроек &lt;em>rofi&lt;/em> или замените запятые символом &lt;code>#&lt;/code>, например, заменить строку
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rofi -combi-modi window,drun,ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>на
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rofi -combi-modi window#drun#ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Возможная конфигурация в командной строке команды &lt;code>rofi&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $menu rofi -combi-modi window#drun -show combi -modi combi -show-icons
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Конфигурация с помощью конфигурационного файла (поместим его в &lt;code>~/.config/i3/rofi/config&lt;/code>).&lt;/li>
&lt;/ul>
&lt;h3 id="блокировка-экрана">&lt;span class="section-num">5.5&lt;/span> Блокировка экрана&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для отключения экрана можно использовать DPMS:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">exec --no-startup-id xset dpms 1800&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Отключается через 30 минут.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="блокировщик-экрана-i3lock">&lt;span class="section-num">5.5.1&lt;/span> Блокировщик экрана &lt;code>i3lock&lt;/code>&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>В качестве блокировщика экрана используем &lt;code>i3lock&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>Установка
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge x11-misc/i3lock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование в конфигурационном файле:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">set $Locker i3lock --color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">000000 &amp;amp;&amp;amp; sleep 1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>sleep 1&lt;/code> добавляет небольшую задержку, чтобы предотвратить возможное состояние гонки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Для блокировки экрана после заданного периода времени можно использовать &lt;code>xautolock&lt;/code> или &lt;code>xss-lock&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Использование &lt;code>xautolock&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge x11-misc/xautolock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование в конфигурационном файле:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">exec --no-startup-id xautolock -time 10 -locker &amp;#34;$Locker&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Блокирует через 10 минут.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование &lt;code>xss-lock&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge x11-misc/xss-lock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование в конфигурационном файле:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">exec --no-startup-id xss-lock -- &amp;#34;$Locker&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="блокировщик-экрана-i3lock-color">&lt;span class="section-num">5.5.2&lt;/span> Блокировщик экрана &lt;code>i3lock-color&lt;/code>&lt;/h4>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/Raymo111/i3lock-color" target="_blank" rel="noopener">https://github.com/Raymo111/i3lock-color&lt;/a>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Дополнительные возможности в i3lock-color&lt;/p>
&lt;ul>
&lt;li>Дополнительное управление цветом элементов.&lt;/li>
&lt;li>Размытие текущего экрана и использование его в качестве фона блокировки.&lt;/li>
&lt;li>Отображение часов в индикаторе.&lt;/li>
&lt;li>Обновление по таймеру, а не при каждом нажатии клавиши.&lt;/li>
&lt;li>Отображение раскладки клавиатуры.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>Порт находится в оверлее &lt;code>guru&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge x11-misc/i3lock-color
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="приложения">&lt;span class="section-num">6&lt;/span> Приложения&lt;/h2>
&lt;h3 id="снимки-экрана">&lt;span class="section-num">6.1&lt;/span> Снимки экрана&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для скриншотов можно использовать &lt;a href="https://github.com/resurrecting-open-source-projects/scrot" target="_blank" rel="noopener">scrot&lt;/a>.&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge media-gfx/scrot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Добавим в конфигурационный файл:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Screenshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Screenshot active display
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym --release Print exec --no-startup-id scrot &amp;#39;%Y-%m-%d_%H-%M-%S_$wx$h.png&amp;#39; -e &amp;#39;mv $f `xdg-user-dir PICTURES` 2&amp;gt;/dev/null&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Screenshot current window
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym --release $mod+Print exec --no-startup-id scrot -u &amp;#39;%Y-%m-%d_%H-%M-%S_$wx$h.png&amp;#39; -e &amp;#39;mv $f `xdg-user-dir PICTURES` 2&amp;gt;/dev/null&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Screenshot selected region
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym --release $mod+Shift+Print exec --no-startup-id scrot -s &amp;#39;%Y-%m-%d_%H-%M-%S_$wx$h.png&amp;#39; -e &amp;#39;mv $f `xdg-user-dir PICTURES` 2&amp;gt;/dev/null&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>По клавише &lt;code>PrtScr&lt;/code> делается скриншот.&lt;/li>
&lt;li>По клавише &lt;code>mod&lt;/code> + &lt;code>PrtScr&lt;/code> делается скриншот активного окна.&lt;/li>
&lt;li>По клавише &lt;code>mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>PrtScr&lt;/code> предлагается выделить область экрана, скриншот которой следует сделать.&lt;/li>
&lt;li>Скриншоты переносятся в каталог $XDG_PICTURES_DIR (обычно &lt;code>~/Pictures&lt;/code> или &lt;code>~/Изображения&lt;/code>) (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/09/16/xdg-user-directories/">XDG. Пользовательские каталоги&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="совместимость-приложений">&lt;span class="section-num">7&lt;/span> Совместимость приложений&lt;/h2>
&lt;h3 id="java">&lt;span class="section-num">7.1&lt;/span> Java&lt;/h3>
&lt;h4 id="серое-окно-приложения-не-меняют-размер-с-помощью-wm-меню-сразу-закрываются">&lt;span class="section-num">7.1.1&lt;/span> Серое окно, приложения не меняют размер с помощью WM, меню сразу закрываются&lt;/h4>
&lt;ul>
&lt;li>В стандартных тулкитах для Java жестко зашит список оконных менеджеров.&lt;/li>
&lt;li>Следует установить переменную окружения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">_JAVA_AWT_WM_NONREPARENTING&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="меню-в-приложениях-плавает-отдельно-им-невозможно-пользоваться">&lt;span class="section-num">7.1.2&lt;/span> Меню в приложениях плавает отдельно, им невозможно пользоваться&lt;/h4>
&lt;ul>
&lt;li>В выпусках Java до версии 9 GTK интерфейс ориентирован на GTK2, в последующих версиях на GTK3.&lt;/li>
&lt;li>GTK LookAndFeel может работать с GTK версий 2, 2.2 и 3.&lt;/li>
&lt;li>По умолчанию используется GTK3.&lt;/li>
&lt;li>Следует явно задать более старую версию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">JAVA_TOOL_OPTIONS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;-Djdk.gtk.version=2.2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Have I Been Pwned (HIBP)</title><link>https://yamadharma.github.io/ru/post/2021/05/03/have-i-been-pwned-hibp/</link><pubDate>Mon, 03 May 2021 15:21:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/03/have-i-been-pwned-hibp/</guid><description>&lt;p>Сервис &lt;em>Have I Been Pwned?&lt;/em> содержит данные по скомпрометированным интернет-ресурсам и позволяет проверить, скомпрометирована ли Ваша личная информация.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#порядок-работы">&lt;span class="section-num">2&lt;/span> Порядок работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#клиентские-утилиты">&lt;span class="section-num">3&lt;/span> Клиентские утилиты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#passchek">&lt;span class="section-num">3.1&lt;/span> passchek&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pwnedpasswords-dot-sh">&lt;span class="section-num">3.2&lt;/span> pwnedpasswords.sh&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт &lt;a href="https://haveibeenpwned.com/" target="_blank" rel="noopener">https://haveibeenpwned.com/&lt;/a>&lt;/li>
&lt;li>Код &lt;a href="https://github.com/HaveIBeenPwned/" target="_blank" rel="noopener">https://github.com/HaveIBeenPwned/&lt;/a>&lt;/li>
&lt;li>Написан на C#.&lt;/li>
&lt;li>Лицензия BSD.&lt;/li>
&lt;li>2021-05-28 открыты исходные сервиса:
&lt;ul>
&lt;li>&lt;a href="https://www.troyhunt.com/pwned-passwords-open-source-in-the-dot-net-foundation-and-working-with-the-fbi/" target="_blank" rel="noopener">https://www.troyhunt.com/pwned-passwords-open-source-in-the-dot-net-foundation-and-working-with-the-fbi/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="порядок-работы">&lt;span class="section-num">2&lt;/span> Порядок работы&lt;/h2>
&lt;ul>
&lt;li>Переходим на сайт &lt;a href="https://haveibeenpwned.com/" target="_blank" rel="noopener">https://haveibeenpwned.com/&lt;/a>.&lt;/li>
&lt;li>Вводим адрес электронной почты и нажимаем кнопку &lt;em>pwned&lt;/em>.&lt;/li>
&lt;li>Если адрес скомпрометирован, то появится сообщение &lt;em>Oh no - pwned!&lt;/em>.
&lt;ul>
&lt;li>Будет показана информация о сайтах, допустивших утечку.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В противном случае появится сообщение &lt;em>Good news - no pwnage found!&lt;/em>.&lt;/li>
&lt;li>На сайте также имеется страница &lt;em>Взломанные пароли&lt;/em> &lt;em>(Pwned Passwords)&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h2 id="клиентские-утилиты">&lt;span class="section-num">3&lt;/span> Клиентские утилиты&lt;/h2>
&lt;h3 id="passchek">&lt;span class="section-num">3.1&lt;/span> passchek&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://github.com/edyatl/passchek" target="_blank" rel="noopener">https://github.com/edyatl/passchek&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="pwnedpasswords-dot-sh">&lt;span class="section-num">3.2&lt;/span> pwnedpasswords.sh&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://github.com/jamesridgway/pwnedpasswords.sh" target="_blank" rel="noopener">https://github.com/jamesridgway/pwnedpasswords.sh&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Администрирование Windows</title><link>https://yamadharma.github.io/ru/post/2021/05/01/windows-administration/</link><pubDate>Sat, 01 May 2021 16:28:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/01/windows-administration/</guid><description>&lt;p>Вопросы системного администрирования Windows.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">1&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-программным-обеспечением">&lt;span class="section-num">2&lt;/span> Управление программным обеспечением&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-операционной-системы">&lt;span class="section-num">3&lt;/span> Настройка операционной системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#интерфейс-пользователя">&lt;span class="section-num">4&lt;/span> Интерфейс пользователя&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="установка">&lt;span class="section-num">1&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/08/windows-kms-keys/">Windows. Ключи KMS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/08/windows-unattended-simple-autounattend/">Windows. Автоустановка. Простой файл ответов&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="управление-программным-обеспечением">&lt;span class="section-num">2&lt;/span> Управление программным обеспечением&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/01/software-installed-windows/">Программное обеспечение, устанавливаемое на Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-операционной-системы">&lt;span class="section-num">3&lt;/span> Настройка операционной системы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/11/16/windows-time-synchronization/">Windows. Синхронизация времени&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="интерфейс-пользователя">&lt;span class="section-num">4&lt;/span> Интерфейс пользователя&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/09/window-manager-windows/">Window manager для Windows&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Менеджеры паролей</title><link>https://yamadharma.github.io/ru/post/2021/04/29/password-managers/</link><pubDate>Thu, 29 Apr 2021 11:56:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/04/29/password-managers/</guid><description>&lt;p>Менеджеры паролей, которые я использовал.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#lastpass">&lt;span class="section-num">1&lt;/span> LastPass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#keepassxc">&lt;span class="section-num">2&lt;/span> KeePassXC&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pass">&lt;span class="section-num">3&lt;/span> pass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="lastpass">&lt;span class="section-num">1&lt;/span> LastPass&lt;/h2>
&lt;h2 id="keepassxc">&lt;span class="section-num">2&lt;/span> KeePassXC&lt;/h2>
&lt;h2 id="pass">&lt;span class="section-num">3&lt;/span> pass&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Менеджер паролей pass</title><link>https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/</link><pubDate>Wed, 28 Apr 2021 18:50:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/</guid><description>&lt;p>Менеджер паролей &lt;code>pass&lt;/code> &amp;mdash; программа, сделанная в рамках идеологии Unix. Также носит название стандартного менеджера паролей для Unix (&lt;em>The standard Unix password manager&lt;/em>).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#основные-свойства">&lt;span class="section-num">1&lt;/span> Основные свойства&lt;/a>&lt;/li>
&lt;li>&lt;a href="#структура-базы-паролей">&lt;span class="section-num">2&lt;/span> Структура базы паролей&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#семантическая-структура-базы-паролей">&lt;span class="section-num">2.1&lt;/span> Семантическая структура базы паролей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#реализации">&lt;span class="section-num">3&lt;/span> Реализации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#утилиты-командной-строки">&lt;span class="section-num">3.1&lt;/span> Утилиты командной строки:&lt;/a>&lt;/li>
&lt;li>&lt;a href="#графические-интерфейсы">&lt;span class="section-num">3.2&lt;/span> Графические интерфейсы:&lt;/a>&lt;/li>
&lt;li>&lt;a href="#приложения-для-android">&lt;span class="section-num">3.3&lt;/span> Приложения для Android&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#password-store">&lt;span class="section-num">3.3.1&lt;/span> Password Store&lt;/a>&lt;/li>
&lt;li>&lt;a href="#openkeychain-easy-pgp">&lt;span class="section-num">3.3.2&lt;/span> OpenKeychain: Easy PGP&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#пакеты-для-emacs">&lt;span class="section-num">3.4&lt;/span> Пакеты для Emacs&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pass">&lt;span class="section-num">3.4.1&lt;/span> pass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#helm-pass">&lt;span class="section-num">3.4.2&lt;/span> helm-pass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ivy-pass">&lt;span class="section-num">3.4.3&lt;/span> ivy-pass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">4&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ключи-gpg">&lt;span class="section-num">5.1&lt;/span> Ключи GPG&lt;/a>&lt;/li>
&lt;li>&lt;a href="#инициализация-хранилища">&lt;span class="section-num">5.2&lt;/span> Инициализация хранилища&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pass">&lt;span class="section-num">5.2.1&lt;/span> pass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gopass">&lt;span class="section-num">5.2.2&lt;/span> gopass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#qtpass">&lt;span class="section-num">5.2.3&lt;/span> qtpass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#синхронизация-с-git">&lt;span class="section-num">5.3&lt;/span> Синхронизация с git&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gopass">&lt;span class="section-num">5.3.1&lt;/span> gopass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#тонкие-настройки">&lt;span class="section-num">5.4&lt;/span> Тонкие настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#устранение-сбоев">&lt;span class="section-num">5.5&lt;/span> Устранение сбоев&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#невозможно-расшифровать-пароль">&lt;span class="section-num">5.5.1&lt;/span> Невозможно расшифровать пароль&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#работа-с-паролями">&lt;span class="section-num">6&lt;/span> Работа с паролями&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-нового-пароля">&lt;span class="section-num">6.1&lt;/span> Создание нового пароля&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ручная-правка-базы-паролей">&lt;span class="section-num">6.2&lt;/span> Ручная правка базы паролей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#миграция-баз-паролей-из-других-программ">&lt;span class="section-num">7&lt;/span> Миграция баз паролей из других программ&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#скрипты-для-миграции">&lt;span class="section-num">7.1&lt;/span> Скрипты для миграции&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pass-import">&lt;span class="section-num">7.1.1&lt;/span> pass-import&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отдельные-скрипты">&lt;span class="section-num">7.1.2&lt;/span> Отдельные скрипты&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конкретные-рецепты">&lt;span class="section-num">7.2&lt;/span> Конкретные рецепты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#lastpass">&lt;span class="section-num">7.2.1&lt;/span> LastPass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#дополнительные-возможности">&lt;span class="section-num">8&lt;/span> Дополнительные возможности&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проверка-утечки-пароля">&lt;span class="section-num">8.1&lt;/span> Проверка утечки пароля&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pass">&lt;span class="section-num">8.1.1&lt;/span> pass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gopass">&lt;span class="section-num">8.1.2&lt;/span> gopass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#интеграция-с-другими-программами">&lt;span class="section-num">9&lt;/span> Интеграция с другими программами&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="основные-свойства">&lt;span class="section-num">1&lt;/span> Основные свойства&lt;/h2>
&lt;ul>
&lt;li>Данные хранятся в файловой системе в виде каталогов и файлов.&lt;/li>
&lt;li>Файлы шифруются с помощью GPG-ключа.&lt;/li>
&lt;/ul>
&lt;h2 id="структура-базы-паролей">&lt;span class="section-num">2&lt;/span> Структура базы паролей&lt;/h2>
&lt;ul>
&lt;li>Структура базы может быть произвольной, если Вы собираетесь использовать её напрямую, без промежуточного программного обеспечения. Тогда семантику структуры базы данных Вы держите в своей голове.&lt;/li>
&lt;li>Если же необходимо использовать дополнительное программное обеспечение, необходимо семантику заложить в структуру базы паролей.&lt;/li>
&lt;/ul>
&lt;h3 id="семантическая-структура-базы-паролей">&lt;span class="section-num">2.1&lt;/span> Семантическая структура базы паролей&lt;/h3>
&lt;ul>
&lt;li>Рассмотрим пользователя &lt;code>user&lt;/code> в домене &lt;code>example.com&lt;/code>, порт &lt;code>22&lt;/code>.&lt;/li>
&lt;li>Отсутствие имени пользователя или порта в имени файла означает, что любое имя пользователя и порт будут совпадать:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">example.com.pgp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Соответствующее имя пользователя может быть именем файла внутри каталога, имя которого совпадает с хостом. Это полезно, если в базе есть пароли для нескольких пользователей на одном хосте:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">example.com/user.pgp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Имя пользователя также может быть записано в виде префикса, отделенного от хоста знаком &lt;code>@&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">user@example.com.pgp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Соответствующий порт может быть указан после хоста, отделённый двоеточием (&lt;code>:&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">example.com:22.pgp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">example.com:22/user.pgp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user@example.com:22.pgp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Эти все записи могут быть расположены в произвольных каталогах, задающих Вашу собственную иерархию.&lt;/li>
&lt;/ul>
&lt;h2 id="реализации">&lt;span class="section-num">3&lt;/span> Реализации&lt;/h2>
&lt;h3 id="утилиты-командной-строки">&lt;span class="section-num">3.1&lt;/span> Утилиты командной строки:&lt;/h3>
&lt;ul>
&lt;li>На данный момент существует 2 основных реализации:
&lt;ul>
&lt;li>&lt;code>pass&lt;/code> &amp;mdash; классическая реализация в виде shell-скриптов (&lt;a href="https://www.passwordstore.org/" target="_blank" rel="noopener">https://www.passwordstore.org/&lt;/a>);&lt;/li>
&lt;li>&lt;code>gopass&lt;/code> &amp;mdash; реализация на go с дополнительными интегрированными функциями (&lt;a href="https://www.gopass.pw/" target="_blank" rel="noopener">https://www.gopass.pw/&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Дальше в тексте будет использоваться программа &lt;code>pass&lt;/code>, но всё то же самое можно сделать с помощью программы &lt;code>gopass&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="графические-интерфейсы">&lt;span class="section-num">3.2&lt;/span> Графические интерфейсы:&lt;/h3>
&lt;ul>
&lt;li>&lt;code>qtpass&lt;/code> &amp;mdash; может работать как графический интерфейс к &lt;code>pass&lt;/code>, так и как самостоятельная программа. В настройках можно переключаться между использованием &lt;code>pass&lt;/code> и &lt;code>gnupg&lt;/code>.&lt;/li>
&lt;li>&lt;code>gopass-ui&lt;/code> &amp;mdash; интерфейс к &lt;code>gopass&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="приложения-для-android">&lt;span class="section-num">3.3&lt;/span> Приложения для Android&lt;/h3>
&lt;h4 id="password-store">&lt;span class="section-num">3.3.1&lt;/span> Password Store&lt;/h4>
&lt;ul>
&lt;li>URL: &lt;a href="https://play.google.com/store/apps/details?id=dev.msfjarvis.aps" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=dev.msfjarvis.aps&lt;/a>&lt;/li>
&lt;li>Репозиторий с кодом: &lt;a href="https://github.com/android-password-store/Android-Password-Store" target="_blank" rel="noopener">https://github.com/android-password-store/Android-Password-Store&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://android-password-store.github.io/docs/" target="_blank" rel="noopener">https://android-password-store.github.io/docs/&lt;/a>&lt;/li>
&lt;li>Для синхронизации с git необходимо импортировать ssh-ключи.&lt;/li>
&lt;li>Поддерживает разблокировку по биометрическим данным.&lt;/li>
&lt;li>Для работы требует наличия &lt;em>OpenKeychain: Easy PGP&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h4 id="openkeychain-easy-pgp">&lt;span class="section-num">3.3.2&lt;/span> OpenKeychain: Easy PGP&lt;/h4>
&lt;ul>
&lt;li>URL: &lt;a href="https://play.google.com/store/apps/details?id=org.sufficientlysecure.keychain" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=org.sufficientlysecure.keychain&lt;/a>&lt;/li>
&lt;li>Операции с ключами pgp.&lt;/li>
&lt;li>Необходимо будет импортировать pgp-ключи.&lt;/li>
&lt;li>Не поддерживает разблокировку по биометрическим данным. Необходимо набирать пароль ключа.&lt;/li>
&lt;/ul>
&lt;h3 id="пакеты-для-emacs">&lt;span class="section-num">3.4&lt;/span> Пакеты для Emacs&lt;/h3>
&lt;h4 id="pass">&lt;span class="section-num">3.4.1&lt;/span> pass&lt;/h4>
&lt;ul>
&lt;li>Основной режим для управления хранилищем и редактирования записей.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/NicolasPetton/pass" target="_blank" rel="noopener">https://github.com/NicolasPetton/pass&lt;/a>&lt;/li>
&lt;li>Позволяет редактировать базу данных паролей.&lt;/li>
&lt;li>Запуск:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">M-x&lt;/span> &lt;span class="nv">pass&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="helm-pass">&lt;span class="section-num">3.4.2&lt;/span> helm-pass&lt;/h4>
&lt;ul>
&lt;li>Интерфейс &lt;em>helm&lt;/em> для &lt;em>pass&lt;/em>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/emacs-helm/helm-pass" target="_blank" rel="noopener">https://github.com/emacs-helm/helm-pass&lt;/a>&lt;/li>
&lt;li>Запуск:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">M-x&lt;/span> &lt;span class="nv">helm-pass&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выдаёт в минибуфере список записей из базы паролей. При нажатии &lt;code>Enter&lt;/code> копирует пароль в буфер.&lt;/li>
&lt;/ul>
&lt;h4 id="ivy-pass">&lt;span class="section-num">3.4.3&lt;/span> ivy-pass&lt;/h4>
&lt;ul>
&lt;li>Интерфейс &lt;em>ivy&lt;/em> для &lt;em>pass&lt;/em>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/ecraven/ivy-pass" target="_blank" rel="noopener">https://github.com/ecraven/ivy-pass&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">4&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Linux&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>&lt;code>pass&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/pass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>gopass&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/gopass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>qtpass&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/qtpass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Gopass UI
&lt;ul>
&lt;li>Находится в оверлее awesome (&lt;a href="https://gitlab.awesome-it.de/overlays/awesome/" target="_blank" rel="noopener">https://gitlab.awesome-it.de/overlays/awesome/&lt;/a>).&lt;/li>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/gopass-ui
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Macintosh&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">brew install pass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Windows&lt;/p>
&lt;ul>
&lt;li>&lt;code>pass&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install pass4win
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>gopass&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install gopass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/h2>
&lt;h3 id="ключи-gpg">&lt;span class="section-num">5.1&lt;/span> Ключи GPG&lt;/h3>
&lt;ul>
&lt;li>Просмотр списка ключей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --list-secret-keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если ключа нет, нужно создать новый:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --full-generate-key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="инициализация-хранилища">&lt;span class="section-num">5.2&lt;/span> Инициализация хранилища&lt;/h3>
&lt;h4 id="pass">&lt;span class="section-num">5.2.1&lt;/span> pass&lt;/h4>
&lt;ul>
&lt;li>Инициализируем хранилище:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass init &amp;lt;gpg-id or email&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="gopass">&lt;span class="section-num">5.2.2&lt;/span> gopass&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Для &lt;code>gopass&lt;/code> можно просто ввести:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Программа запросит ключ и почту для git.&lt;/li>
&lt;li>Будет инициализирована сразу структура git в каталоге &lt;code>~/.password-store&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="qtpass">&lt;span class="section-num">5.2.3&lt;/span> qtpass&lt;/h4>
&lt;ul>
&lt;li>Также можно инициализировать с помощью графического инструмента &lt;code>qtpass&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">qtpass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-с-git">&lt;span class="section-num">5.3&lt;/span> Синхронизация с git&lt;/h3>
&lt;h4 id="gopass">&lt;span class="section-num">5.3.1&lt;/span> gopass&lt;/h4>
&lt;ul>
&lt;li>При инициализации &lt;code>gopass&lt;/code> инициализирует также структуру git.&lt;/li>
&lt;li>При необходимости это можно сделать отдельно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass git init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Также можно задать адрес репозитория на хостинге (репозиторий необходимо предварительно создать):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass git remote add origin git@github.com:&amp;lt;git_username&amp;gt;/&amp;lt;git_repo&amp;gt;.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для синхронизации выполняется следующая команда:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass sync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="тонкие-настройки">&lt;span class="section-num">5.4&lt;/span> Тонкие настройки&lt;/h3>
&lt;ul>
&lt;li>По умолчанию каталог с паролями называется &lt;code>~/.password-store&lt;/code>. Но его можно задать также с помощью переменной окружения &lt;code>PASSWORD_STORE_DIR&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="устранение-сбоев">&lt;span class="section-num">5.5&lt;/span> Устранение сбоев&lt;/h3>
&lt;h4 id="невозможно-расшифровать-пароль">&lt;span class="section-num">5.5.1&lt;/span> Невозможно расшифровать пароль&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Команда &lt;code>gopass show secret&lt;/code> выдаёт &lt;code>Error: Failed to decrypt&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Можно установить в &lt;code>~/.bashrc&lt;/code> или &lt;code>~/.profile&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">GPG_TTY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>tty&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;a href="https://github.com/gopasspw/gopass/issues/208" target="_blank" rel="noopener">https://github.com/gopasspw/gopass/issues/208&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/gopasspw/gopass/issues/209" target="_blank" rel="noopener">https://github.com/gopasspw/gopass/issues/209&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="работа-с-паролями">&lt;span class="section-num">6&lt;/span> Работа с паролями&lt;/h2>
&lt;h3 id="создание-нового-пароля">&lt;span class="section-num">6.1&lt;/span> Создание нового пароля&lt;/h3>
&lt;h3 id="ручная-правка-базы-паролей">&lt;span class="section-num">6.2&lt;/span> Ручная правка базы паролей&lt;/h3>
&lt;ul>
&lt;li>Базу паролей можно редактировать и без использования специальных утилит.&lt;/li>
&lt;li>Можно использовать для исправления структуры каталогов и имён файлов.&lt;/li>
&lt;li>Синхронизацию с &lt;em>git&lt;/em> придётся выполнять вручную.&lt;/li>
&lt;li>Не следует использовать символьные ссылки. Они не переносимы между разными операционными системами и могут нарушиться при синхронизации (например, с Android).&lt;/li>
&lt;li>После ручного редактирования рекомендуется проверить структуру базы паролей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass fsck
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="миграция-баз-паролей-из-других-программ">&lt;span class="section-num">7&lt;/span> Миграция баз паролей из других программ&lt;/h2>
&lt;h3 id="скрипты-для-миграции">&lt;span class="section-num">7.1&lt;/span> Скрипты для миграции&lt;/h3>
&lt;h4 id="pass-import">&lt;span class="section-num">7.1.1&lt;/span> pass-import&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://github.com/roddhjav/pass-import" target="_blank" rel="noopener">https://github.com/roddhjav/pass-import&lt;/a>&lt;/li>
&lt;li>Расширение для &lt;code>pass&lt;/code>.&lt;/li>
&lt;li>Можно использовать для разных менеджеров паролей:
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Целевой менеджер паролей&lt;/th>
&lt;th>Формат&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>csv&lt;/td>
&lt;td>csv&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gopass&lt;/td>
&lt;td>gopass&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>keepass&lt;/td>
&lt;td>kdbx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>keepassx2&lt;/td>
&lt;td>kdbx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>keepassxc&lt;/td>
&lt;td>kdbx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pass&lt;/td>
&lt;td>pass&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>Находится в оверлее &lt;code>wjn-overlay&lt;/code> (&lt;a href="https://data.gpo.zugaina.org/wjn-overlay/" target="_blank" rel="noopener">https://data.gpo.zugaina.org/wjn-overlay/&lt;/a>).&lt;/li>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/pass-import
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Использование&lt;/p>
&lt;ul>
&lt;li>Для &lt;code>pass&lt;/code>:
&lt;ul>
&lt;li>Автоопределение формата источника:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass import path/to/passwords
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если автоопределение не сработало:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass import &amp;lt;password_manager&amp;gt; path/to/passwords
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если конвертация не для &lt;code>pass&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pimport &amp;lt;new_pm&amp;gt; &amp;lt;former_pm&amp;gt; path/to/passwords --out path/to/destination/pm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="отдельные-скрипты">&lt;span class="section-num">7.1.2&lt;/span> Отдельные скрипты&lt;/h4>
&lt;ul>
&lt;li>На странице &lt;a href="https://www.passwordstore.org/" target="_blank" rel="noopener">https://www.passwordstore.org/&lt;/a> приведён список отдельных скриптов для миграции из разных служб.&lt;/li>
&lt;li>Используйте в целях эксперимента.&lt;/li>
&lt;/ul>
&lt;h3 id="конкретные-рецепты">&lt;span class="section-num">7.2&lt;/span> Конкретные рецепты&lt;/h3>
&lt;h4 id="lastpass">&lt;span class="section-num">7.2.1&lt;/span> LastPass&lt;/h4>
&lt;ul>
&lt;li>В меню выберите &lt;em>Account options &amp;gt; Advanced &amp;gt; Export &amp;gt; LastPass CVS File&lt;/em>.&lt;/li>
&lt;li>Сохраняем результат в файл &lt;code>lastpass_export.csv&lt;/code>.&lt;/li>
&lt;li>Конвертация с помощью &lt;code>pass-import&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass import lastpass lastpass_export.csv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Альтернативный вариант. Не используйте его. Результат не соответствует структуре именования &lt;code>pass&lt;/code>.
&lt;ul>
&lt;li>Скачайте скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget https://git.zx2c4.com/password-store/plain/contrib/importers/lastpass2pass.rb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сделайте скрипт исполняемым:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod +x lastpass2pass.rb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Импортируйте пароли:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">./lastpass2pass.rb lastpass_export.csv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="дополнительные-возможности">&lt;span class="section-num">8&lt;/span> Дополнительные возможности&lt;/h2>
&lt;h3 id="проверка-утечки-пароля">&lt;span class="section-num">8.1&lt;/span> Проверка утечки пароля&lt;/h3>
&lt;ul>
&lt;li>Проверка утечки пароля производится с помощью сервиса &lt;a href="https://haveibeenpwned.com/" target="_blank" rel="noopener">https://haveibeenpwned.com/&lt;/a> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/03/have-i-been-pwned-hibp/">Have I Been Pwned (HIBP)&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h4 id="pass">&lt;span class="section-num">8.1.1&lt;/span> pass&lt;/h4>
&lt;ul>
&lt;li>Проверка производится с помощью плагина &lt;code>pass-audit&lt;/code>.&lt;/li>
&lt;li>Код: &lt;a href="https://github.com/roddhjav/pass-audit" target="_blank" rel="noopener">https://github.com/roddhjav/pass-audit&lt;/a>.&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Gentoo:
Находится в репозитории &lt;a href="https://github.com/yamadharma/gentoo-portage-local" target="_blank" rel="noopener">https://github.com/yamadharma/gentoo-portage-local&lt;/a>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/pass-audit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Использование:
&lt;ul>
&lt;li>Проверка по парольному каталогу или по парольной записи:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass audit &lt;span class="o">[&lt;/span>каталог или одна запись&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Без параметра проверяет всю базу паролей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="gopass">&lt;span class="section-num">8.1.2&lt;/span> gopass&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Простая проверка качества пароля&lt;/p>
&lt;ul>
&lt;li>Простая проверка качества пароля по парольному каталогу или по парольной записи:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass audit &lt;span class="o">[&lt;/span>каталог или одна запись&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Без параметра проверяет всю базу паролей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Проверка утечки пароля&lt;/p>
&lt;ul>
&lt;li>Начиная с версии gopass-1.12.0 команда создания интерфейса взаимодействия с HIPB выделена в отдельную утилиту.&lt;/li>
&lt;li>Проверка производится с помощью плагина &lt;code>gopass-hibp&lt;/code>.&lt;/li>
&lt;li>Код: &lt;a href="https://github.com/gopasspw/gopass-hibp" target="_blank" rel="noopener">https://github.com/gopasspw/gopass-hibp&lt;/a>.&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/gopass-hibp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Использование:
&lt;ul>
&lt;li>Использование HIBPv2 API
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass-hibp api
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сравнение хешей паролей с дампом HIBP:
&lt;ul>
&lt;li>Скачиваем дамп SHA-1 хешей паролей с &lt;a href="https://haveibeenpwned.com/Passwords" target="_blank" rel="noopener">https://haveibeenpwned.com/Passwords&lt;/a> и распаковываем его.&lt;/li>
&lt;li>Проверяем пароли:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass-hibp dump pwned-passwords-1.0.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>Этот вариант помедленнее.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Проверяет сразу все записи в базе паролей. Один пароль проверить нельзя.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="интеграция-с-другими-программами">&lt;span class="section-num">9&lt;/span> Интеграция с другими программами&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/11/20/password-manager-pass-integration/">Менеджер паролей pass. Интеграция с другими программами&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Мультимедиа сервер PipeWire</title><link>https://yamadharma.github.io/ru/post/2021/04/28/pipewire-multimedia-server/</link><pubDate>Wed, 28 Apr 2021 16:28:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/04/28/pipewire-multimedia-server/</guid><description>&lt;p>PipeWire есть новый аудио и видео сервер. В основном для Wayland. Должен заменить другие видео-серверы.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка-пользовательской-сессии">&lt;span class="section-num">3&lt;/span> Настройка пользовательской сессии&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#права-пользователя">&lt;span class="section-num">3.1&lt;/span> Права пользователя&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-запуска-на-уровне-пользователя">&lt;span class="section-num">3.2&lt;/span> Настройка запуска на уровне пользователя&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-запуска-на-уровне-системы">&lt;span class="section-num">3.3&lt;/span> Настройка запуска на уровне системы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование-с-другими-серверами">&lt;span class="section-num">4&lt;/span> Использование с другими серверами&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#замена-pulseaudio">&lt;span class="section-num">4.1&lt;/span> Замена PulseAudio&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pulseaudio-с-поддержкой-запуска-как-демон">&lt;span class="section-num">4.1.1&lt;/span> PulseAudio с поддержкой запуска как демон&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pulseaudio-без-поддержки-запуска-кок-демон">&lt;span class="section-num">4.1.2&lt;/span> PulseAudio без поддержки запуска кок демон&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#замена-jack">&lt;span class="section-num">4.2&lt;/span> Замена Jack&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#проверка-работы">&lt;span class="section-num">5&lt;/span> Проверка работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">6&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурационные-файлы">&lt;span class="section-num">6.1&lt;/span> Конфигурационные файлы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#профили-устройств">&lt;span class="section-num">6.2&lt;/span> Профили устройств&lt;/a>&lt;/li>
&lt;li>&lt;a href="#изменение-частоты-дискретизации">&lt;span class="section-num">6.3&lt;/span> Изменение частоты дискретизации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий проекта: &lt;a href="https://gitlab.freedesktop.org/pipewire/pipewire" target="_blank" rel="noopener">https://gitlab.freedesktop.org/pipewire/pipewire&lt;/a>&lt;/li>
&lt;li>Wiki проекта: &lt;a href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/home" target="_blank" rel="noopener">https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/home&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Чтобы использовать PipeWire вместо PulseAudio для звукового сервера, включите USE-флаг &lt;code>USE=sound-server&lt;/code> для &lt;code>media-video/pipewire&lt;/code> и отключите USE-флаг &lt;code>USE=daemon&lt;/code> для &lt;code>media-sound/pulseaudio&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Добавьте в файл &lt;code>/etc/portage/package.use&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">media-video/pipewire sound-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">media-sound/pulseaudio -daemon
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Удалите &lt;code>media-sound/pulseaudio-daemon&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -Cv media-sound/pulseaudio-daemon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emerge -Cv media-sound/paprefs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установить само приложение:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge media-video/pipewire
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emerge media-video/wireplumber
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-пользовательской-сессии">&lt;span class="section-num">3&lt;/span> Настройка пользовательской сессии&lt;/h2>
&lt;h3 id="права-пользователя">&lt;span class="section-num">3.1&lt;/span> Права пользователя&lt;/h3>
&lt;ul>
&lt;li>Желательно добавить пользователя в группу &lt;code>audio&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">usermod -aG audio &amp;lt;user&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-запуска-на-уровне-пользователя">&lt;span class="section-num">3.2&lt;/span> Настройка запуска на уровне пользователя&lt;/h3>
&lt;ul>
&lt;li>По умолчанию &lt;em>PipeWire&lt;/em> настроен на использование &lt;em>systemd&lt;/em>.&lt;/li>
&lt;li>Следует настроить его запуск для пользователя.&lt;/li>
&lt;li>Флаг &lt;code>--now&lt;/code> позволяет одновременно активировать и запускать сервис.&lt;/li>
&lt;li>Отключите &lt;code>pulseaudio&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user disable --now pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для каждого пользователя можно установить активацию по обращению к сокету:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.socket pipewire-pulse.socket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В качестве альтернативы можно сразу запускать необходимый процесс:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.service pipewire-pulse.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключите демон сессии &lt;code>pipewire-media-session.service&lt;/code> и запустите &lt;code>wireplumber&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user disable pipewire-media-session.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl --user --force &lt;span class="nb">enable&lt;/span> --now wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-запуска-на-уровне-системы">&lt;span class="section-num">3.3&lt;/span> Настройка запуска на уровне системы&lt;/h3>
&lt;ul>
&lt;li>Под пользователем &lt;code>root&lt;/code> можно настроить запуск сервисов на уровне системы, заменив &lt;code>--user&lt;/code> на &lt;code>--global&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --global &lt;span class="nb">enable&lt;/span> pipewire.socket pipewire-pulse.socket
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl --global --force &lt;span class="nb">enable&lt;/span> wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При выборе этого варианта службы должны быть запущены вручную под пользователем пользователем.&lt;/li>
&lt;/ul>
&lt;h2 id="использование-с-другими-серверами">&lt;span class="section-num">4&lt;/span> Использование с другими серверами&lt;/h2>
&lt;h3 id="замена-pulseaudio">&lt;span class="section-num">4.1&lt;/span> Замена PulseAudio&lt;/h3>
&lt;h4 id="pulseaudio-с-поддержкой-запуска-как-демон">&lt;span class="section-num">4.1.1&lt;/span> PulseAudio с поддержкой запуска как демон&lt;/h4>
&lt;ul>
&lt;li>Ранее &lt;em>PulseAudio&lt;/em> собиралась только с поддержкой запуска как демон.&lt;/li>
&lt;li>Если &lt;em>PulseAudio&lt;/em> настроено с поддержкой запуска как демона&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>, то его необходимо отключить:
&lt;ul>
&lt;li>запретить запуск &lt;code>pulseaudio&lt;/code>;&lt;/li>
&lt;li>отключить запуск в файле конфигурации:
&lt;ul>
&lt;li>отредактируйте файл &lt;code>/etc/pulse/daemon.conf&lt;/code> и замените &lt;code>daemonize&lt;/code> на &lt;code>daemonize = no&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Одновременно отключим &lt;em>PulseAudio&lt;/em> и включим &lt;em>PipeWire&lt;/em> для каждого пользователя:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user disable --now pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.socket pipewire-pulse.socket wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно замаскировать PulseAudio (но он всё равно может стартовать автоматически):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user mask pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Кроме того, рекомендуется удалить файлы, оставшиеся от PulseAudio:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm -r ~/.config/pulse/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="pulseaudio-без-поддержки-запуска-кок-демон">&lt;span class="section-num">4.1.2&lt;/span> PulseAudio без поддержки запуска кок демон&lt;/h4>
&lt;ul>
&lt;li>Теперь &lt;em>PulseAudio&lt;/em> рекомендуется собирать без поддержки демона.&lt;/li>
&lt;li>В этом случае всё работает сразу.&lt;/li>
&lt;li>Напомним, что на уровне пользователя следует подключить &lt;code>pipewire-pulse.socket&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user disable --now pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.socket pipewire-pulse.socket wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="замена-jack">&lt;span class="section-num">4.2&lt;/span> Замена Jack&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для маршрутизации клиентов Jack через PipeWire в настоящее время
предпочтительно запускать их через &lt;code>pw-jack&lt;/code>, который использует
&lt;code>LD_PRELOAD&lt;/code> для использования библиотек PipeWire вместо Jack, например:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pw-jack &amp;lt;application&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Можно задать собственный размер буфера, установив размер_буфера/частота_дискретизации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PIPEWIRE_LATENCY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;128/48000&amp;#34;&lt;/span> pw-jack &amp;lt;application&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="проверка-работы">&lt;span class="section-num">5&lt;/span> Проверка работы&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Для &lt;em>PipeWire&lt;/em> возможно посмотреть информацию по серверу &lt;code>pipewire&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LANG&lt;/span>&lt;span class="o">=&lt;/span>C pactl info &lt;span class="p">|&lt;/span> grep &lt;span class="s2">&amp;#34;Server Name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В результате должна присутствовать строчка типа такой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Server Name: PulseAudio &lt;span class="o">(&lt;/span>on PipeWire 0.3.56&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">6&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="конфигурационные-файлы">&lt;span class="section-num">6.1&lt;/span> Конфигурационные файлы&lt;/h3>
&lt;ul>
&lt;li>Конфигурация, идущая в комплекте с дистрибутивом, находится в &lt;code>/usr/share/pipewire&lt;/code>.&lt;/li>
&lt;li>Для изменения параметров скопируйте файлы конфигурации в:
&lt;ul>
&lt;li>&lt;code>/etc/pipewire&lt;/code>: уровень системы;&lt;/li>
&lt;li>&lt;code>~/.config/pipewire&lt;/code>: уровень пользователя.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="профили-устройств">&lt;span class="section-num">6.2&lt;/span> Профили устройств&lt;/h3>
&lt;ul>
&lt;li>Профили устройств хранятся в каталоге &lt;code>~/.local/state/pipewire/media-session.d/&lt;/code>.&lt;/li>
&lt;li>При запуске в первый раз с подключёнными внешними устройствами (например, usb-устройствами), профили для них не создаются. Необходимо их переподключить в этом случае.&lt;/li>
&lt;/ul>
&lt;h3 id="изменение-частоты-дискретизации">&lt;span class="section-num">6.3&lt;/span> Изменение частоты дискретизации&lt;/h3>
&lt;ul>
&lt;li>По умолчанию &lt;em>PipeWire&lt;/em> глобально устанавливает частоту дискретизации равную 48 КГц.&lt;/li>
&lt;li>Для изменения нужно отредактировать строку &lt;code>default.clock.rate = 48000&lt;/code> в файле конфигурации &lt;code>/etc/pipewire/pipewire.conf&lt;/code> или &lt;code>~/.config/pipewire/pipewire.conf&lt;/code>.&lt;/li>
&lt;li>Например, если вы хотите частоту дискретизации в 192 КГц, раскомментируйте строку и поменяйте её на &lt;code>default.clock.rate = 192000&lt;/code>.&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>В Gentoo это означает, что &lt;code>pulseaudio&lt;/code> скомпилирован с флагом &lt;code>daemon&lt;/code>.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Загрузочная флешка</title><link>https://yamadharma.github.io/ru/post/2021/04/10/bootable-usb-stick/</link><pubDate>Sat, 10 Apr 2021 18:46:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/04/10/bootable-usb-stick/</guid><description>&lt;p>Задача состояла в том, чтобы сделать загрузочную флешку, способную загружать ISO-образы.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#программный-загрузчик">&lt;span class="section-num">1&lt;/span> Программный загрузчик&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-под-windows">&lt;span class="section-num">2.1&lt;/span> Установка под Windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-для-linux">&lt;span class="section-num">2.2&lt;/span> Установка для Linux&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-из-командной-строки">&lt;span class="section-num">2.2.1&lt;/span> Установка из командной строки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#графическая-установка">&lt;span class="section-num">2.2.2&lt;/span> Графическая установка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#копирование-образов-систем">&lt;span class="section-num">2.3&lt;/span> Копирование образов систем&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#используемые-образы-операционных-систем">&lt;span class="section-num">3&lt;/span> Используемые образы операционных систем&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#systemrescue">&lt;span class="section-num">3.1&lt;/span> SystemRescue&lt;/a>&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">3.2&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#видезапись">&lt;span class="section-num">4&lt;/span> Видезапись&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;p>Несмотря на наличие usb-диска в корпусе Zalman ZM-VE300 (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/06/06/zalman-zm-ve300/">Контейнер для жесткого диска Zalman ZM-VE300&lt;/a>), хотелось также иметь бутовую флешку, загружающую операционные системы из ISO-образов.&lt;/p>
&lt;h2 id="программный-загрузчик">&lt;span class="section-num">1&lt;/span> Программный загрузчик&lt;/h2>
&lt;ul>
&lt;li>В качестве программного загрузчика был выбран Ventoy:
&lt;ul>
&lt;li>&lt;a href="https://www.ventoy.net/" target="_blank" rel="noopener">https://www.ventoy.net/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/ventoy/Ventoy" target="_blank" rel="noopener">https://github.com/ventoy/Ventoy&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Основан на загрузчике &lt;code>grub2&lt;/code> (&lt;a href="https://ru.wikipedia.org/wiki/GNU_GRUB" target="_blank" rel="noopener">https://ru.wikipedia.org/wiki/GNU_GRUB&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="установка-под-windows">&lt;span class="section-num">2.1&lt;/span> Установка под Windows&lt;/h3>
&lt;ul>
&lt;li>Скачиваем откомпилированный образ для Windows из &lt;a href="https://github.com/ventoy/Ventoy/releases" target="_blank" rel="noopener">https://github.com/ventoy/Ventoy/releases&lt;/a>.&lt;/li>
&lt;li>Запускаем установщик:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Ventoy2Disk.exe
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-для-linux">&lt;span class="section-num">2.2&lt;/span> Установка для Linux&lt;/h3>
&lt;ul>
&lt;li>Скачиваем откомпилированный образ для Linux из &lt;a href="https://github.com/ventoy/Ventoy/releases" target="_blank" rel="noopener">https://github.com/ventoy/Ventoy/releases&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h4 id="установка-из-командной-строки">&lt;span class="section-num">2.2.1&lt;/span> Установка из командной строки&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Запустить от пользователя &lt;code>root&lt;/code> установщик:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Ventoy2Disk.sh &lt;span class="o">{&lt;/span> -i &lt;span class="p">|&lt;/span> -I &lt;span class="p">|&lt;/span> -u &lt;span class="o">}&lt;/span> /dev/sdX
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Здесь&lt;/p>
&lt;ul>
&lt;li>&lt;code>/dev/sdX&lt;/code> &amp;mdash; usb-диск (флешка);&lt;/li>
&lt;li>&lt;code>-i&lt;/code> &amp;mdash; установить загрузчик;&lt;/li>
&lt;li>&lt;code>-I&lt;/code> &amp;mdash; установить загрузчик принудительно (даже если на флешке был уже установлен этот загрузчик);&lt;/li>
&lt;li>&lt;code>-u&lt;/code> &amp;mdash; обновить загрузчик.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="графическая-установка">&lt;span class="section-num">2.2.2&lt;/span> Графическая установка&lt;/h4>
&lt;ul>
&lt;li>Начиная с версии 1.0.52 поддерживается графическая установка.&lt;/li>
&lt;li>Исполняемый файл имеет название вида &lt;code>VentoyGUI.&amp;lt;архитектура&amp;gt;&lt;/code>.&lt;/li>
&lt;li>Установщик запускается из-под пользователя &lt;code>root&lt;/code> или из-под обычного пользователя.&lt;/li>
&lt;/ul>
&lt;h3 id="копирование-образов-систем">&lt;span class="section-num">2.3&lt;/span> Копирование образов систем&lt;/h3>
&lt;ul>
&lt;li>После завершения установки usb-накопитель будет разделен на 2 раздела.&lt;/li>
&lt;li>1 раздел форматируется по умолчанию файловой системой exFAT (можно потом переформатировать самому, по желанию в FAT32/NTFS/UDF/XFS/Ext2/Ext3/Ext4).&lt;/li>
&lt;li>Образы операционных систем копируются на 2 раздел.&lt;/li>
&lt;li>По умолчанию поиск образов систем ведётся во всех подкаталогах.&lt;/li>
&lt;li>2 раздел служебный (для UEFI).&lt;/li>
&lt;/ul>
&lt;h2 id="используемые-образы-операционных-систем">&lt;span class="section-num">3&lt;/span> Используемые образы операционных систем&lt;/h2>
&lt;h3 id="systemrescue">&lt;span class="section-num">3.1&lt;/span> SystemRescue&lt;/h3>
&lt;ul>
&lt;li>В качестве образа для администрирования системы обычно использую SystemRescue.
&lt;ul>
&lt;li>&lt;a href="https://www.system-rescue-cd.org/" target="_blank" rel="noopener">https://www.system-rescue-cd.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="windows">&lt;span class="section-num">3.2&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>У нас имеется лицензия на Windows for Education. Поэтому я использую следующий образ:
&lt;ul>
&lt;li>&lt;a href="https://www.microsoft.com/ru-ru/software-download/vlacademicwindows10iso" target="_blank" rel="noopener">https://www.microsoft.com/ru-ru/software-download/vlacademicwindows10iso&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="видезапись">&lt;span class="section-num">4&lt;/span> Видезапись&lt;/h2>
&lt;p>Видеозапись процесса создания бутовой флешки.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/vHFncWdJCzY" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div></description></item><item><title>Системное администрирование</title><link>https://yamadharma.github.io/ru/post/2021/04/10/system-administration/</link><pubDate>Sat, 10 Apr 2021 18:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/04/10/system-administration/</guid><description>&lt;p>По мере сил занимаюсь настройкой компьютеров. В основном на Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#оборудование">&lt;span class="section-num">1&lt;/span> Оборудование&lt;/a>&lt;/li>
&lt;li>&lt;a href="#графическое-окружение">&lt;span class="section-num">2&lt;/span> Графическое окружение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#x11">&lt;span class="section-num">2.1&lt;/span> X11&lt;/a>&lt;/li>
&lt;li>&lt;a href="#wayland">&lt;span class="section-num">2.2&lt;/span> Wayland&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#операционные-системы">&lt;span class="section-num">3&lt;/span> Операционные системы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">3.1&lt;/span> Windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">3.2&lt;/span> Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-операционных-систем">&lt;span class="section-num">3.3&lt;/span> Установка операционных систем&lt;/a>&lt;/li>
&lt;li>&lt;a href="#серверные-системы">&lt;span class="section-num">3.4&lt;/span> Серверные системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-программным-обеспечением">&lt;span class="section-num">3.5&lt;/span> Управление программным обеспечением&lt;/a>&lt;/li>
&lt;li>&lt;a href="#терминальный-доступ">&lt;span class="section-num">3.6&lt;/span> Терминальный доступ&lt;/a>&lt;/li>
&lt;li>&lt;a href="#утилиты-настройки-среды">&lt;span class="section-num">3.7&lt;/span> Утилиты настройки среды&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файловые-системы">&lt;span class="section-num">4&lt;/span> Файловые системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#форматы-файлов">&lt;span class="section-num">5&lt;/span> Форматы файлов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#csv">&lt;span class="section-num">5.1&lt;/span> csv&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#языки-программирования">&lt;span class="section-num">6&lt;/span> Языки программирования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#разработка">&lt;span class="section-num">7&lt;/span> Разработка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#серверы-приложений">&lt;span class="section-num">8&lt;/span> Серверы приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#drupal">&lt;span class="section-num">8.1&lt;/span> Drupal&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ojs">&lt;span class="section-num">8.2&lt;/span> OJS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#управление-и-мониторинг">&lt;span class="section-num">9&lt;/span> Управление и мониторинг&lt;/a>&lt;/li>
&lt;li>&lt;a href="#шрифты">&lt;span class="section-num">10&lt;/span> Шрифты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пользовательские-программы">&lt;span class="section-num">11&lt;/span> Пользовательские программы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#утилиты">&lt;span class="section-num">11.1&lt;/span> Утилиты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обработка-видео">&lt;span class="section-num">11.2&lt;/span> Обработка видео&lt;/a>&lt;/li>
&lt;li>&lt;a href="#виртуализация">&lt;span class="section-num">11.3&lt;/span> Виртуализация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#редакторы">&lt;span class="section-num">11.4&lt;/span> Редакторы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#офисные-программы">&lt;span class="section-num">11.5&lt;/span> Офисные программы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#работа-с-дисками">&lt;span class="section-num">11.6&lt;/span> Работа с дисками&lt;/a>&lt;/li>
&lt;li>&lt;a href="#вычисления">&lt;span class="section-num">11.7&lt;/span> Вычисления&lt;/a>&lt;/li>
&lt;li>&lt;a href="#квантовая-химия">&lt;span class="section-num">11.8&lt;/span> Квантовая химия&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-файлов">&lt;span class="section-num">11.9&lt;/span> Синхронизация файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файлы-конфигурации">&lt;span class="section-num">11.10&lt;/span> Файлы конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сетевые-клиенты">&lt;span class="section-num">11.11&lt;/span> Сетевые клиенты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#телеконференции">&lt;span class="section-num">11.12&lt;/span> Телеконференции&lt;/a>&lt;/li>
&lt;li>&lt;a href="#наборы-программ">&lt;span class="section-num">11.13&lt;/span> Наборы программ&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#безопасность">&lt;span class="section-num">12&lt;/span> Безопасность&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сети">&lt;span class="section-num">13&lt;/span> Сети&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#cisco">&lt;span class="section-num">13.1&lt;/span> Cisco&lt;/a>&lt;/li>
&lt;li>&lt;a href="#протоколы">&lt;span class="section-num">13.2&lt;/span> Протоколы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vpn">&lt;span class="section-num">13.3&lt;/span> VPN&lt;/a>&lt;/li>
&lt;li>&lt;a href="#мониторинг">&lt;span class="section-num">13.4&lt;/span> Мониторинг&lt;/a>&lt;/li>
&lt;li>&lt;a href="#железо">&lt;span class="section-num">13.5&lt;/span> Железо&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервисы">&lt;span class="section-num">13.6&lt;/span> Сервисы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#dns">&lt;span class="section-num">13.6.1&lt;/span> DNS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#организация-обучения">&lt;span class="section-num">14&lt;/span> Организация обучения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#профессиональные-требования">&lt;span class="section-num">15&lt;/span> Профессиональные требования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#devops">&lt;span class="section-num">16&lt;/span> DevOps&lt;/a>&lt;/li>
&lt;li>&lt;a href="#инфраструктура-в-рудн">&lt;span class="section-num">17&lt;/span> Инфраструктура в РУДН&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="оборудование">&lt;span class="section-num">1&lt;/span> Оборудование&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/04/30/criteria-choosing-laptop/">Критерии выбора ноутбука&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/07/21/criteria-choosing-personal-computer/">Критерии выбора персонального компьютера&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/11/system-administrator-tools/">Набор вещей для системного администратора&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="графическое-окружение">&lt;span class="section-num">2&lt;/span> Графическое окружение&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/">Переход на Sway&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/pipewire-multimedia-server/">Мультимедиа сервер PipeWire&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/16/xdg-user-directories/">XDG. Пользовательские каталоги&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/04/02/xdg-mime-applications/">XDG. Приложения MIME&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/12/26/using-compose-key/">Ввод с помощью Compose&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/19/tiling-window-manager/">Тайловые оконные менеджеры&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="x11">&lt;span class="section-num">2.1&lt;/span> X11&lt;/h3>
&lt;h3 id="wayland">&lt;span class="section-num">2.2&lt;/span> Wayland&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/14/wayland/">Wayland&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="операционные-системы">&lt;span class="section-num">3&lt;/span> Операционные системы&lt;/h2>
&lt;h3 id="windows">&lt;span class="section-num">3.1&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/01/windows-administration/">Администрирование Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="linux">&lt;span class="section-num">3.2&lt;/span> Linux&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/07/linux-administration/">Администрирование Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-операционных-систем">&lt;span class="section-num">3.3&lt;/span> Установка операционных систем&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/04/10/bootable-usb-stick/">Загрузочная флешка&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/">Перенос Linux на btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/19/installing-grub-bootloader/">Установка загрузчика grub&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/11/12/using-vagrant/">Использование vagrant&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="серверные-системы">&lt;span class="section-num">3.4&lt;/span> Серверные системы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/">Замена Centos&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/02/10/centos8-changing-repository-addresses/">CentOS 8. Изменение адресов репозиториев&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/25/redhat-based-systems-auto-update/">Автообновление систем на базе деривативов RedHat&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="управление-программным-обеспечением">&lt;span class="section-num">3.5&lt;/span> Управление программным обеспечением&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/01/21/update-all-python-packages/">Обновление пакетов python&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="терминальный-доступ">&lt;span class="section-num">3.6&lt;/span> Терминальный доступ&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/07/23/virtual-desktop-infrastructure/">Virtual Desktop Infrastructure&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="утилиты-настройки-среды">&lt;span class="section-num">3.7&lt;/span> Утилиты настройки среды&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/07/24/module-utility/">Утилита module&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="файловые-системы">&lt;span class="section-num">4&lt;/span> Файловые системы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-file-system/">Файловая система btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/data-deduplication/">Дедупликация данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="форматы-файлов">&lt;span class="section-num">5&lt;/span> Форматы файлов&lt;/h2>
&lt;h3 id="csv">&lt;span class="section-num">5.1&lt;/span> csv&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/06/csv-csvkit/">Формат CSV. csvkit&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="языки-программирования">&lt;span class="section-num">6&lt;/span> Языки программирования&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/11/05/hcl-programming-language/">Язык программирования HCL&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="разработка">&lt;span class="section-num">7&lt;/span> Разработка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/14/update-bitbucket-ssh-host-keys/">Обновление хостовых ключей ssh Bitbucket Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="серверы-приложений">&lt;span class="section-num">8&lt;/span> Серверы приложений&lt;/h2>
&lt;h3 id="drupal">&lt;span class="section-num">8.1&lt;/span> Drupal&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/13/move-drupal-other-machine/">Перенос Drupal на другую машину&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="ojs">&lt;span class="section-num">8.2&lt;/span> OJS&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/10/22/open-journal-systems/">Open Journal Systems&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="управление-и-мониторинг">&lt;span class="section-num">9&lt;/span> Управление и мониторинг&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/01/18/cockpit-web-console/">Web консоль Cockpit&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="шрифты">&lt;span class="section-num">10&lt;/span> Шрифты&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/10/27/linux-fonts/">Шрифты в Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="пользовательские-программы">&lt;span class="section-num">11&lt;/span> Пользовательские программы&lt;/h2>
&lt;h3 id="утилиты">&lt;span class="section-num">11.1&lt;/span> Утилиты&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/27/pdf-grep/">Pdf. Поиск подстроки&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/27/desktop-search/">Локальные поисковики&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="обработка-видео">&lt;span class="section-num">11.2&lt;/span> Обработка видео&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/23/video-kdenlive/">Видео. KDEnlive&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/10/21/video-processing-command-line/">Обработка видео. Командная строка&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/03/09/download-youtube/">Закачка с youtube&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="виртуализация">&lt;span class="section-num">11.3&lt;/span> Виртуализация&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/17/virtualbox-virtualization-system/">Система виртуализации VirtualBox&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="редакторы">&lt;span class="section-num">11.4&lt;/span> Редакторы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/12/24/emacs/">Emacs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/04/vim-editor/">Редактор vim&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="офисные-программы">&lt;span class="section-num">11.5&lt;/span> Офисные программы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/01/27/libreoffice-tuning/">Настройка LibreOffice&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/19/microsoft-office-alternatives/">Альтернативы Microsoft Office&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="работа-с-дисками">&lt;span class="section-num">11.6&lt;/span> Работа с дисками&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/03/08/using-sfdisk/">Использование sfdisk&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="вычисления">&lt;span class="section-num">11.7&lt;/span> Вычисления&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/07/22/principles-using-supercomputer/">Принципы работы на суперкомпьютере&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/07/regulations-access-supercomputer-rudn/">Регламент доступа к суперкомпьютеру РУДН&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="квантовая-химия">&lt;span class="section-num">11.8&lt;/span> Квантовая химия&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/10/17/quantum-chemistry-gamess/">Квантовая химия. Gamess&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-файлов">&lt;span class="section-num">11.9&lt;/span> Синхронизация файлов&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/10/27/rclone/">rclone&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/08/01/synchronizing-files-syncthing/">Синхронизация файлов с помощью syncthing&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="файлы-конфигурации">&lt;span class="section-num">11.10&lt;/span> Файлы конфигурации&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/10/28/configuration-file-management-chezmoi/">Управление файлами конфигурации. Домашний каталог. Chezmoi&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/30/configuration-file-management-repo/">Управление файлами конфигурации. Домашний каталог. Репозиторий&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="сетевые-клиенты">&lt;span class="section-num">11.11&lt;/span> Сетевые клиенты&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/02/28/google-chrome-flags/">Флаги запуска google chrome&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="телеконференции">&lt;span class="section-num">11.12&lt;/span> Телеконференции&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/23/video-conferencing-software-analogues/">Аналоги программ для видеоконференций&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="наборы-программ">&lt;span class="section-num">11.13&lt;/span> Наборы программ&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/26/android-apps/">Программы на Android&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="безопасность">&lt;span class="section-num">12&lt;/span> Безопасность&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/04/29/password-managers/">Менеджеры паролей&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/03/have-i-been-pwned-hibp/">Have I Been Pwned (HIBP)&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/02/03/ssh-key-type/">Тип ключа ssh&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/04/30/acme-certificates/">Сертификаты ACME&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/03/hsts-mechanism/">Механизм HSTS&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="сети">&lt;span class="section-num">13&lt;/span> Сети&lt;/h2>
&lt;h3 id="cisco">&lt;span class="section-num">13.1&lt;/span> Cisco&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/06/16/cisco-administration/">Администрирование Cisco&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="протоколы">&lt;span class="section-num">13.2&lt;/span> Протоколы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/26/ipv6-protocol/">Протокол IPv6&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="vpn">&lt;span class="section-num">13.3&lt;/span> VPN&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/02/05/l2tp-ipsec-vpn-client-setup/">VPN. L2TP+IPsec. Подключение клиента&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/19/cisco-vpn-client-setup/">Подключение к Cisco VPN&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="мониторинг">&lt;span class="section-num">13.4&lt;/span> Мониторинг&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/02/observium-monitoring-system/">Система мониторинга Observium&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/20/librenms-monitoring-system/">Система мониторинга LibreNMS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/16/bandwidth-network-speed-monitoring/">Мониторинг пропускной способности и скорости сети&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="железо">&lt;span class="section-num">13.5&lt;/span> Железо&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/19/small-form-factor-pluggable/">Формат Small Form-factor Pluggable (SFP)&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="сервисы">&lt;span class="section-num">13.6&lt;/span> Сервисы&lt;/h3>
&lt;h4 id="dns">&lt;span class="section-num">13.6.1&lt;/span> DNS&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/05/23/dns-powerdns-recursor/">DNS. PowerDNS Recursor&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/05/26/public-dns-resolvers/">Общедоступные резольверы DNS&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="организация-обучения">&lt;span class="section-num">14&lt;/span> Организация обучения&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/26/computer-classes/">Дисплейные классы&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="профессиональные-требования">&lt;span class="section-num">15&lt;/span> Профессиональные требования&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/02/profession-system-administrator/">Профессия Системный администратор&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="devops">&lt;span class="section-num">16&lt;/span> DevOps&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/16/continuous-integration-github-actions/">Непрерывная интеграция. GitHub Actions&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="инфраструктура-в-рудн">&lt;span class="section-num">17&lt;/span> Инфраструктура в РУДН&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/04/20/switching-domain-pfur/">Переход на домен pfur.ru&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/11/computer-specifications/">Спецификации компьютеров&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/15/servers-donskaya/">Сервера на Донской&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/13/network-donskaya/">Сеть на Донской&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Верификация коммитов git с помощью GPG</title><link>https://yamadharma.github.io/ru/post/2021/01/28/verifying-git-commits-gpg/</link><pubDate>Thu, 28 Jan 2021 18:47:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/01/28/verifying-git-commits-gpg/</guid><description>&lt;p>Настроим верификацию коммитов git с помощью GPG.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#верификация-коммитов-с-помощью-pgp">&lt;span class="section-num">2&lt;/span> Верификация коммитов с помощью &lt;em>PGP&lt;/em>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-ключа">&lt;span class="section-num">2.1&lt;/span> Создание ключа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#экспорт-ключа">&lt;span class="section-num">2.2&lt;/span> Экспорт ключа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавление-gpg-ключа-в-github">&lt;span class="section-num">2.3&lt;/span> Добавление GPG ключа в GitHub&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подписывание-коммитов-git">&lt;span class="section-num">2.4&lt;/span> Подписывание коммитов git&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-автоматических-подписей-коммитов-git">&lt;span class="section-num">2.5&lt;/span> Настройка автоматических подписей коммитов git&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование-keybase">&lt;span class="section-num">3&lt;/span> Использование Keybase&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#генерация-gpg-ключа">&lt;span class="section-num">3.1&lt;/span> Генерация GPG ключа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавление-gpg-ключа-в-github">&lt;span class="section-num">3.2&lt;/span> Добавление GPG ключа в GitHub&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#проверка-коммитов-в-git">&lt;span class="section-num">4&lt;/span> Проверка коммитов в Git&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#режим-бдительности--vigilant-mode">&lt;span class="section-num">4.1&lt;/span> Режим бдительности (vigilant mode)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Коммиты имеют следующие свойства:
&lt;ul>
&lt;li>author (автор) &amp;mdash; контрибьютор, выполнивший работу (указывается для справки);&lt;/li>
&lt;li>committer (коммитер) &amp;mdash; пользователь, который закоммитил изменения.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Эти свойства можно переопределить при совершении коммита.&lt;/li>
&lt;li>Авторство коммита можно подделать.&lt;/li>
&lt;li>В git есть функция подписи коммитов.&lt;/li>
&lt;li>Для подписывания коммитов используется технология PGP (см. &lt;a href="https://yamadharma.github.io/ru/post/2020/12/18/using-pgp/">Работа с PGP&lt;/a>).&lt;/li>
&lt;li>Подпись коммита позволяет удостовериться в том, кто является коммитером. Авторство не проверяется.&lt;/li>
&lt;/ul>
&lt;h2 id="верификация-коммитов-с-помощью-pgp">&lt;span class="section-num">2&lt;/span> Верификация коммитов с помощью &lt;em>PGP&lt;/em>&lt;/h2>
&lt;ul>
&lt;li>Как настроить PGP-подпись коммитов с помощью &lt;code>gpg&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="создание-ключа">&lt;span class="section-num">2.1&lt;/span> Создание ключа&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Генерируем ключ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --full-generate-key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Из предложенных опций выбираем:
&lt;ul>
&lt;li>тип &lt;em>RSA and RSA&lt;/em>;&lt;/li>
&lt;li>размер 4096;&lt;/li>
&lt;li>выберите срок действия; значение по умолчанию &amp;mdash; 0 (срок действия не истекает никогда).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>GPG запросит личную информацию, которая сохранится в ключе:
&lt;ul>
&lt;li>Имя (не менее 5 символов).&lt;/li>
&lt;li>Адрес электронной почты.
&lt;ul>
&lt;li>При вводе email убедитесь, что он соответствует адресу, используемому на GitHub.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Комментарий. Можно ввести что угодно или нажать клавишу ввода, чтобы оставить это поле пустым.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="экспорт-ключа">&lt;span class="section-num">2.2&lt;/span> Экспорт ключа&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Выводим список ключей и копируем отпечаток приватного ключа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --list-secret-keys --keyid-format LONG
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Отпечаток ключа &amp;mdash; это последовательность байтов, используемая для идентификации более длинного, по сравнению с самим отпечатком ключа.&lt;/li>
&lt;li>Формат строки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">sec Алгоритм/Отпечаток_ключа Дата_создания [Флаги] [Годен_до]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ID_ключа
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Экспортируем ключ в формате ASCII по его отпечатку:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --armor --export &amp;lt;PGP Fingerprint&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="добавление-gpg-ключа-в-github">&lt;span class="section-num">2.3&lt;/span> Добавление GPG ключа в GitHub&lt;/h3>
&lt;ul>
&lt;li>Копируем ключ и добавляем его в настройках профиля на GitHub (или GitLab).&lt;/li>
&lt;li>Cкопируйте ваш сгенерированный PGP ключ в буфер обмена:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --armor --export &amp;lt;PGP Fingerprint&amp;gt; &lt;span class="p">|&lt;/span> xclip -sel clip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перейдите в настройки GitHub (&lt;a href="https://github.com/settings/keys" target="_blank" rel="noopener">https://github.com/settings/keys&lt;/a>), нажмите на кнопку &lt;em>New GPG key&lt;/em> и вставьте полученный ключ в поле ввода.&lt;/li>
&lt;/ul>
&lt;h3 id="подписывание-коммитов-git">&lt;span class="section-num">2.4&lt;/span> Подписывание коммитов git&lt;/h3>
&lt;ul>
&lt;li>Подпись коммитов при работе через терминал:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git commit -a -S -m &lt;span class="s1">&amp;#39;your commit message&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Флаг &lt;code>-S&lt;/code> означает создание подписанного коммита. При этом может потребоваться ввод кодовой фразы, заданной при генерации GPG-ключа.&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-автоматических-подписей-коммитов-git">&lt;span class="section-num">2.5&lt;/span> Настройка автоматических подписей коммитов git&lt;/h3>
&lt;ul>
&lt;li>Используя введёный email, укажите Git применять его при подписи коммитов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global user.signingkey &amp;lt;PGP Fingerprint&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global commit.gpgsign &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global gpg.program &lt;span class="k">$(&lt;/span>which gpg2&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование-keybase">&lt;span class="section-num">3&lt;/span> Использование Keybase&lt;/h2>
&lt;ul>
&lt;li>Для генерации и хранения GPG ключей можно использовать Keybase &lt;a href="https://keybase.io/" target="_blank" rel="noopener">https://keybase.io/&lt;/a>.&lt;/li>
&lt;li>После того, как вы зарегистрируетесь в Keybase, зайдите в терминал и запустите следующие команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">keybase login
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="генерация-gpg-ключа">&lt;span class="section-num">3.1&lt;/span> Генерация GPG ключа&lt;/h3>
&lt;ul>
&lt;li>Создайте новый GPG ключ, используя ваше настоящее имя и email, сохраненный в GitHub:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">keybase pgp gen
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Просмотр списка ключей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">keybase pgp list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="добавление-gpg-ключа-в-github">&lt;span class="section-num">3.2&lt;/span> Добавление GPG ключа в GitHub&lt;/h3>
&lt;ul>
&lt;li>Cкопируйте ваш сгенерированный PGP ключ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">keybase pgp &lt;span class="nb">export&lt;/span> &lt;span class="p">|&lt;/span> xclip -i
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перейдите в настройки GitHub (&lt;a href="https://github.com/settings/keys" target="_blank" rel="noopener">https://github.com/settings/keys&lt;/a>), нажмите на кнопку &lt;em>New GPG key&lt;/em> и вставьте полученный ключ в поле ввода.&lt;/li>
&lt;/ul>
&lt;h2 id="проверка-коммитов-в-git">&lt;span class="section-num">4&lt;/span> Проверка коммитов в Git&lt;/h2>
&lt;ul>
&lt;li>GitHub и GitLab будут показывать значок &lt;em>Verified&lt;/em> рядом с вашими новыми коммитами.&lt;/li>
&lt;/ul>
&lt;h3 id="режим-бдительности--vigilant-mode">&lt;span class="section-num">4.1&lt;/span> Режим бдительности (vigilant mode)&lt;/h3>
&lt;ul>
&lt;li>На GitHub есть настройка &lt;a href="https://docs.github.com/en/github/authenticating-to-github/managing-commit-signature-verification/displaying-verification-statuses-for-all-of-your-commits" target="_blank" rel="noopener">vigilant mode&lt;/a>.&lt;/li>
&lt;li>Все неподписанные коммиты будут явно помечены как &lt;em>Unverified&lt;/em>.&lt;/li>
&lt;li>Включается это в настройках в разделе &lt;em>SSH and GPG keys&lt;/em>. Установите метку на &lt;em>Flag unsigned commits as unverified&lt;/em>.&lt;/li>
&lt;/ul></description></item><item><title>Почта. Синхронизация. mbsync</title><link>https://yamadharma.github.io/ru/post/2021/01/22/mail-synchronization-mbsync/</link><pubDate>Fri, 22 Jan 2021 15:10:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/01/22/mail-synchronization-mbsync/</guid><description>&lt;p>Настройка синхронизации IMAP с помощью &lt;em>mbsync&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#описание">&lt;span class="section-num">1&lt;/span> Описание&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">3&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общие-положения">&lt;span class="section-num">3.1&lt;/span> Общие положения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-учётных-записей">&lt;span class="section-num">3.2&lt;/span> Конфигурация учётных записей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#общие-параметры">&lt;span class="section-num">3.3&lt;/span> Общие параметры&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примеры-конфигурации-для-разных-провайдеров">&lt;span class="section-num">3.4&lt;/span> Примеры конфигурации для разных провайдеров&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gmail">&lt;span class="section-num">3.4.1&lt;/span> Gmail&lt;/a>&lt;/li>
&lt;li>&lt;a href="#apple">&lt;span class="section-num">3.4.2&lt;/span> Apple&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gmx">&lt;span class="section-num">3.4.3&lt;/span> GMX&lt;/a>&lt;/li>
&lt;li>&lt;a href="#proton">&lt;span class="section-num">3.4.4&lt;/span> Proton&lt;/a>&lt;/li>
&lt;li>&lt;a href="#yandex">&lt;span class="section-num">3.4.5&lt;/span> Yandex&lt;/a>&lt;/li>
&lt;li>&lt;a href="#mail-dot-ru">&lt;span class="section-num">3.4.6&lt;/span> Mail.ru&lt;/a>&lt;/li>
&lt;li>&lt;a href="#office365">&lt;span class="section-num">3.4.7&lt;/span> Office365&lt;/a>&lt;/li>
&lt;li>&lt;a href="#yahoo-dot-com">&lt;span class="section-num">3.4.8&lt;/span> Yahoo.com&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#синхронизация">&lt;span class="section-num">4&lt;/span> Синхронизация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-синхронизации">&lt;span class="section-num">4.1&lt;/span> Настройка синхронизации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-из-командной-строки">&lt;span class="section-num">4.2&lt;/span> Запуск из командной строки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-по-таймеру">&lt;span class="section-num">4.3&lt;/span> Запуск по таймеру&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#поддержка-почтовых-файлов">&lt;span class="section-num">5&lt;/span> Поддержка почтовых файлов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#удаление-дубликатов">&lt;span class="section-num">5.1&lt;/span> Удаление дубликатов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#перенос-почтовых-файлов-на-другую-машину">&lt;span class="section-num">6&lt;/span> Перенос почтовых файлов на другую машину&lt;/a>&lt;/li>
&lt;li>&lt;a href="#технические-моменты">&lt;span class="section-num">7&lt;/span> Технические моменты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#имена-почтовых-файлов">&lt;span class="section-num">7.1&lt;/span> Имена почтовых файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="описание">&lt;span class="section-num">1&lt;/span> Описание&lt;/h2>
&lt;ul>
&lt;li>&lt;code>isync&lt;/code> / &lt;code>mbsync&lt;/code> &amp;mdash; программа для синхронизации IMAP и локальных почтовых файлов.&lt;/li>
&lt;li>&lt;code>isync&lt;/code> &amp;mdash; старое название (для совместимости).&lt;/li>
&lt;/ul>
&lt;p>Домашняя страница: &lt;a href="https://isync.sourceforge.io/" target="_blank" rel="noopener">https://isync.sourceforge.io/&lt;/a>.&lt;/p>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge isync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">3&lt;/span> Настройка&lt;/h2>
&lt;h3 id="общие-положения">&lt;span class="section-num">3.1&lt;/span> Общие положения&lt;/h3>
&lt;ul>
&lt;li>Все учётные записи приводятся к единой структуре.&lt;/li>
&lt;li>Папки IMAP унифицируются следующим образом: Inbox, Archive, Sent, Trash, Drafts, Spam.&lt;/li>
&lt;li>В принципе, никто не мешает использовать названия папок самого IMAP-сервера.&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-учётных-записей">&lt;span class="section-num">3.2&lt;/span> Конфигурация учётных записей&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Учётные записи делаем по полному наименованию почты. Я это делаю потому, что у меня есть почтовые ящики с одинаковыми именами в разных почтовых доменах.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Создать необходимые каталоги:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkdir -p ~/Maildir/account@domain
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Можно создать каталоги все скопом из конфигурационного файла &lt;code>~/.mbsyncrc&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAILDIR&lt;/span>&lt;span class="o">=&lt;/span>~/Maildir
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># make mailbox directories&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grep -e &lt;span class="s2">&amp;#34;^IMAPAccount&amp;#34;&lt;/span> ~/.mbsyncrc &lt;span class="p">|&lt;/span> cut -d&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span> -f2 &lt;span class="p">|&lt;/span> xargs -I &lt;span class="o">{}&lt;/span> -n &lt;span class="m">1&lt;/span> mkdir -p &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">MAILDIR&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/{}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Делаем конфигурационный файл для &lt;em>mbsync&lt;/em>. Файл называется &lt;code>~/.mbsyncrc&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Чтобы не хранить пароли в конфигурационном файле (оператор &lt;code>Pass&lt;/code>) будем использовать хранение пароля, совместимое с &lt;em>emacs&lt;/em> (с использованием оператора &lt;code>PassCmd&lt;/code>):&lt;/p>
&lt;ul>
&lt;li>
&lt;p>в файле &lt;code>~/.authinfo.gpg&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/22/mail-password-authentication/">Emacs. Почта. Парольная аутентификация&lt;/a>):&lt;/p>
&lt;ul>
&lt;li>структура команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@example.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>в менеджере паролей &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>):&lt;/p>
&lt;ul>
&lt;li>структура команды:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/example.com/account@example.com&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Начиная с версии &lt;em>mbsync-1.4.1&lt;/em> операторы &lt;code>Master&lt;/code> и &lt;code>Slave&lt;/code> заменены на &lt;code>Far&lt;/code> и &lt;code>Near&lt;/code>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="общие-параметры">&lt;span class="section-num">3.3&lt;/span> Общие параметры&lt;/h3>
&lt;ul>
&lt;li>Установка параметра &lt;code>CopyArrivalDate&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># By default (CopyArrivalDate no), if you copy an old email from inbox to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Archive (e.g.) it will get the date of the copy assigned, instead of just
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># keeping its original date of arrival! Also see:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># https://rakhim.org/fastmail-setup-with-emacs-mu4e-and-mbsync-on-macos/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># https://wiki.archlinux.org/index.php/Isync#Emails_on_remote_server_have_the_wrong_date
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="примеры-конфигурации-для-разных-провайдеров">&lt;span class="section-num">3.4&lt;/span> Примеры конфигурации для разных провайдеров&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Может потребоваться для разных провайдеров увеличить тайм-аут соединения (по умолчанию равно &lt;code>20&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Вместо &lt;code>pass&lt;/code> можно использовать &lt;code>gopass&lt;/code>. При последовательном запуске нескольких &lt;code>pass&lt;/code> утилита может не находить ключ &lt;em>pgp&lt;/em>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="gmail">&lt;span class="section-num">3.4.1&lt;/span> Gmail&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://www.google.com/intl/ru/gmail/about/" target="_blank" rel="noopener">https://www.google.com/intl/ru/gmail/about/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/06/mail-google-configuring-mail-client/">Почта. Google. Настройка почтового клиента&lt;/a>&lt;/li>
&lt;li>Из-за структуры тегов Gmail необходимо явно задавать названия почтовых ящиков в директивах &lt;code>Far&lt;/code> и &lt;code>Near&lt;/code>.&lt;/li>
&lt;li>Папка &amp;ldquo;Отправленные&amp;rdquo; не синхронизируется потому, что Google сохраняет всю электронную почту в папке &amp;ldquo;Все сообщения&amp;rdquo;, и в результате мы получим локально дубликаты.&lt;/li>
&lt;li>При использовании двуфакторной аутентификации (2FA) необходимо использовать &lt;em>пароль приложения&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2020/12/25/mail-google-connect/">Почта. Подключение к Google&lt;/a>).
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># IMAPAccount (gmail)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Pass ***************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## To store the password in an encrypted file use PassCmd instead of Pass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@gmail.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;pass email/google.com/account@gmail.com@apppassword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/google.com/account@gmail.com&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Port 993
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLVersions TLSv1.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@gmail.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@gmail.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@gmail.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@gmail.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@gmail.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmail.com-remote:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmail.com-local:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Far :account@gmail.com-remote:&amp;#34;[Gmail]/Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmail.com-remote:&amp;#34;[Gmail]/&amp;amp;BBoEPgRABDcEOAQ9BDA-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmail.com-local:&amp;#34;Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Far :account@gmail.com-remote:&amp;#34;[Gmail]/Spam&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmail.com-remote:&amp;#34;[Gmail]/&amp;amp;BCEEPwQwBDw-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmail.com-local:&amp;#34;Spam&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Far :account@gmail.com-remote:&amp;#34;[Gmail]/All Mail&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmail.com-remote:&amp;#34;[Gmail]/&amp;amp;BBIEQQRP- &amp;amp;BD8EPgRHBEIEMA-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmail.com-local:&amp;#34;Archive&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Far :account@gmail.com-remote:&amp;#34;[Gmail]/Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmail.com-remote:&amp;#34;[Gmail]/&amp;amp;BCcENQRABD0EPgQyBDgEOgQ4-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmail.com-local:&amp;#34;Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group account@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-drafts
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="apple">&lt;span class="section-num">3.4.2&lt;/span> Apple&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://www.icloud.com/mail" target="_blank" rel="noopener">https://www.icloud.com/mail&lt;/a>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># IMAPAccount (Apple)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@icloud.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.mail.me.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PORT 993
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@icloud.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@icloud.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLVersion TLSv1.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@icloud.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@icloud.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@icloud.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@icloud.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@icloud.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@icloud.com-all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@icloud.com-remote:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@icloud.com-local:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Included mailboxes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Patterns &amp;#34;INBOX&amp;#34; &amp;#34;Archive&amp;#34; &amp;#34;Trash&amp;#34; &amp;#34;Spam&amp;#34; &amp;#34;Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@icloud.com-sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@icloud.com-remote:&amp;#34;Sent Messages&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@icloud.com-local:&amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group account@icloud.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@icloud.com-sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@icloud.com-all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="gmx">&lt;span class="section-num">3.4.3&lt;/span> GMX&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://www.gmx.com/" target="_blank" rel="noopener">https://www.gmx.com/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.gmx.net/" target="_blank" rel="noopener">https://www.gmx.net/&lt;/a>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># IMAPAccount (GMX)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@gmx.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.gmx.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@gmx.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@gmx.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLVersion TLSv1.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@gmx.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@gmx.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@gmx.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@gmx.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@gmx.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmx.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmx.com-remote:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmx.com-local:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Patterns &amp;#34;INBOX&amp;#34; &amp;#34;Archive&amp;#34; &amp;#34;Trash&amp;#34; &amp;#34;Spam&amp;#34; &amp;#34;Drafts&amp;#34; &amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="proton">&lt;span class="section-num">3.4.4&lt;/span> Proton&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://protonmail.com/" target="_blank" rel="noopener">https://protonmail.com/&lt;/a>&lt;/li>
&lt;li>Заблокирован в России.&lt;/li>
&lt;li>Для работы необходимо установить локальное приложение &lt;a href="https://protonmail.com/bridge/" target="_blank" rel="noopener">https://protonmail.com/bridge/&lt;/a>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># IMAPAccount (Proton)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@protonmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PORT 1111
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@protonmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@protonmail.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLType STARTTLS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLVersion TLSv1.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@protonmail.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@protonmail.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@protonmail.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@protonmail.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@protonmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@protonmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@protonmail.com-remote:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@protonmail.com-local:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Patterns &amp;#34;INBOX&amp;#34; &amp;#34;Archive&amp;#34; &amp;#34;Trash&amp;#34; &amp;#34;Spam&amp;#34; &amp;#34;Drafts&amp;#34; &amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="yandex">&lt;span class="section-num">3.4.5&lt;/span> Yandex&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yandex.ru/" target="_blank" rel="noopener">https://yandex.ru/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-yandex-configuring-mail-client/">Почта. Yandex. Настройка почтового клиента&lt;/a>&lt;/li>
&lt;li>Пароли приложений
&lt;ul>
&lt;li>При подключении паролей приложений обычные пароли использовать не получится. Придётся сгенерить пароль приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/01/mail-yandex-application-passwords/">Почта. Yandex. Пароли приложений&lt;/a>).&lt;/li>
&lt;li>Для паролей &lt;code>pass&lt;/code>:
&lt;ul>
&lt;li>Пароль для приложения почты можно назвать &lt;code>account@yandex.ru@apppassword@mail&lt;/code>.&lt;/li>
&lt;li>Пароль для smtp следует именовать как &lt;code>account@yandex.ru@smtp.yandex.ru&lt;/code> (это тот же пароль для почтового приложения).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## IMAPAccount (Yandex)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@yandex.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.yandex.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@yandex.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Pass ***************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## To store the password in an encrypted file use PassCmd instead of Pass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@yandex.ru/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;pass email/yandex.ru/account@yandex.ru@apppassword@mail&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/yandex.ru/account@yandex.ru&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLVersion TLSv1.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@yandex.ru-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@yandex.ru/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@yandex.ru/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@yandex.ru-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@yandex.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yandex.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yandex.ru-remote:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yandex.ru-local:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Patterns &amp;#34;INBOX&amp;#34; &amp;#34;Archive&amp;#34; &amp;#34;Trash&amp;#34; &amp;#34;Spam&amp;#34; &amp;#34;Drafts&amp;#34; &amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="mail-dot-ru">&lt;span class="section-num">3.4.6&lt;/span> Mail.ru&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-mail-ru-configuring-mail-client/">Почта. Mail.ru. Настройка почтового клиента&lt;/a>&lt;/li>
&lt;li>Пароли приложений
&lt;ul>
&lt;li>При подключении паролей приложений обычные пароли использовать не получится. Придётся сгенерить пароль приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/10/27/mail-ru-passwords/">Пароли mail.ru&lt;/a>).&lt;/li>
&lt;li>Для паролей &lt;code>pass&lt;/code>:
&lt;ul>
&lt;li>Пароль для приложения почты можно назвать &lt;code>account@mail.ru@apppassword@mail&lt;/code>.&lt;/li>
&lt;li>Пароль для smtp следует именовать как &lt;code>account@mail.ru@smtp.mail.ru&lt;/code> (это тот же пароль для почтового приложения).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## IMAPAccount (Mail.ru)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@mail.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.mail.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@mail.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Pass ***************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## To store the password in an encrypted file use PassCmd instead of Pass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@mail.ru@apppassword@mail/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/mail.ru/account@mail.ru@apppassword@mail&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLVersion TLSv1.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@mail.ru-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@mail.ru/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@mail.ru/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@mail.ru-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@mail.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;Корзина&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;Спам&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;Spam&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;Черновики&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;Архив&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;Archive&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;Отправленные&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group account@mail.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-sent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="office365">&lt;span class="section-num">3.4.7&lt;/span> Office365&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-office365-configuring-mail-client/">Почта. Office365. Настройка почтового клиента&lt;/a>&lt;/li>
&lt;li>Названия IMAP-ящиков даётся в модифицированной кодировке UTF-7 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-imap-folder-encoding/">Почта. Кодировка папок IMAP&lt;/a>).&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Аутентификация &lt;em>LOGIN&lt;/em>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Конфигурация &lt;em>mbsync&lt;/em>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## IMAPAccount (outlook.office365.com)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host smtp.office365.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Pass ***************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## To store the password in an encrypted file use PassCmd instead of Pass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@example.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/example.com/account@example.com&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLVersion TLSv1.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PipelineDepth 50
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@example.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@example.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@example.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@example.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;&amp;amp;BCMENAQwBDsENQQ9BD0ESwQ1-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;&amp;amp;BB0ENQQ2BDUEOwQwBEIENQQ7BEwEPQQwBE8- &amp;amp;BD8EPgRHBEIEMA-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;Spam&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;&amp;amp;BCcENQRABD0EPgQyBDgEOgQ4-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;Archive1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;Archive&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;&amp;amp;BB4EQgQ,BEAEMAQyBDsENQQ9BD0ESwQ1-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-sent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Конфигурация SMTP для Emacs:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">send-mail-function&lt;/span> &lt;span class="ss">&amp;#39;smtpmail-send-it&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-smtp-server&lt;/span> &lt;span class="s">&amp;#34;example.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-stream-type&lt;/span> &lt;span class="ss">&amp;#39;starttls&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-smtp-service&lt;/span> &lt;span class="mi">587&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Для smtp следует именовать пароль &lt;em>pass&lt;/em> как &lt;code>account@example.com@smtp.office365.com&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Аутентификация &lt;em>Oauth2&lt;/em> с &lt;em>DavMail&lt;/em>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Аутентификацию &lt;em>oauth2&lt;/em> можно настроить с помощью &lt;em>DavMail&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/04/10/davmail/">DavMail&lt;/a>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Сначала настройте &lt;em>DavMail&lt;/em> аутентификацией &lt;code>O365Interactive&lt;/code> или &lt;code>O365Manual&lt;/code>, а потом переключите в режим &lt;code>O365Modern&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>В конфигурации меняется блок аутентификации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">IMAPAccount account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Port 1143
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Pass ***************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## To store the password in an encrypted file use PassCmd instead of Pass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@example.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/example.com/account@example.com&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLType None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PipelineDepth 50
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Конфигурация SMTP для Emacs:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">send-mail-function&lt;/span> &lt;span class="ss">&amp;#39;smtpmail-send-it&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-smtp-server&lt;/span> &lt;span class="s">&amp;#34;localhost&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-stream-type&lt;/span> &lt;span class="ss">&amp;#39;plain&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-smtp-service&lt;/span> &lt;span class="mi">1025&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Для smtp следует именовать пароль &lt;em>pass&lt;/em> как &lt;code>account@example.com@localhost&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="yahoo-dot-com">&lt;span class="section-num">3.4.8&lt;/span> Yahoo.com&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/04/26/mail-yahoo-com-configuring-mail-client/">Почта. Yahoo.com. Настройка почтового клиента&lt;/a>&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## IMAPAccount (Yahoo.com)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@yahoo.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.mail.yahoo.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@yahoo.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@yahoo.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;gopass email/yahoo.com/account@yahoo.com@apppassword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSLVersion TLSv1.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PipelineDepth 50
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@yahoo.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@yahoo.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@yahoo.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@yahoo.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@yahoo.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;Bulk Mail&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;Spam&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;Draft&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;Archive&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;Archive&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group account@yahoo.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-sent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="синхронизация">&lt;span class="section-num">4&lt;/span> Синхронизация&lt;/h2>
&lt;h3 id="настройка-синхронизации">&lt;span class="section-num">4.1&lt;/span> Настройка синхронизации&lt;/h3>
&lt;ul>
&lt;li>Будем настраивать синхронизацию нескольких учётных записей.&lt;/li>
&lt;li>Для хранения паролей будем использовать аутентификацию, совместимую с emacs (например, файл формата &lt;code>.authinfo&lt;/code>) (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/22/mail-password-authentication/">Emacs. Почта. Парольная аутентификация&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-из-командной-строки">&lt;span class="section-num">4.2&lt;/span> Запуск из командной строки&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Синхронизация конкретной учётной записи:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mbsync &amp;lt;chanel&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Синхронизация всех учётных записей:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mbsync --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-по-таймеру">&lt;span class="section-num">4.3&lt;/span> Запуск по таймеру&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для синхронизации с помощью &lt;code>systemd&lt;/code> надо добавить сервис и таймер.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>После создания этих файлов добавьте &lt;code>mbsync.timer&lt;/code> в &lt;code>systemctl&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user --now &lt;span class="nb">enable&lt;/span> mbsync.timer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>~/.config/systemd/user/mbsync.service&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/systemd/user/mbsync.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Unit]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description=Mailbox synchronization service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Service]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type=oneshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStart=/usr/bin/mbsync -a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>~/.config/systemd/user/mbsync.service&lt;/code>. Здесь мы после синхронизации запускаем индексирование для &lt;code>mu&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/systemd/user/mbsync.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Unit]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description=Mailbox synchronization service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Service]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type=oneshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStart=-/usr/bin/mbsync -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStartPost=-/usr/bin/mu index
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Знак &lt;code>-&lt;/code> перед командой позволяет игнорировать код возврата.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>~/.config/systemd/user/mbsync.timer&lt;/code>. Настраиваем запуск &lt;code>mbsync&lt;/code> через 2 минуты после загрузки, а затем запускаем каждые 5 минут.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/systemd/user/mbsync.timer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Unit]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description=Mailbox synchronization timer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Timer]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OnBootSec=2m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OnUnitActiveSec=5m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Unit=mbsync.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Install]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WantedBy=timers.target
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="поддержка-почтовых-файлов">&lt;span class="section-num">5&lt;/span> Поддержка почтовых файлов&lt;/h2>
&lt;h3 id="удаление-дубликатов">&lt;span class="section-num">5.1&lt;/span> Удаление дубликатов&lt;/h3>
&lt;ul>
&lt;li>При копировании могут возникать дубликаты сообщений.&lt;/li>
&lt;li>Их можно удалить (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/09/09/removing-duplicate-messages/">Почта. Удаление дубликатов сообщений из локальных почтовых ящиков&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="перенос-почтовых-файлов-на-другую-машину">&lt;span class="section-num">6&lt;/span> Перенос почтовых файлов на другую машину&lt;/h2>
&lt;ul>
&lt;li>Имя почтового файла содержит имя хоста. Поэтому просто так синхронизировать почтовую базу между хостами не получится.&lt;/li>
&lt;li>Синхронизация может понадобиться для случая, когда у Вас большие почтовые ящики, а сервер квотирует почтовый трафик.&lt;/li>
&lt;li>Предлагается скопировать текущую базу на другой хост (в качестве первоначальной постовой базы), а потом переименовать файлы почты.
&lt;ul>
&lt;li>Необходимо скопировать данные с &lt;code>host1&lt;/code> на &lt;code>host2&lt;/code>.&lt;/li>
&lt;li>Проведём проверку переименования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/Maildir/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find . -iname &lt;span class="s2">&amp;#34;*host1*&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;p;s:host1:host2:&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> xargs -n2 -p mv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проведём переименование, убрав ключ &lt;code>p&lt;/code> у &lt;code>xargs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/Maildir/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find . -iname &lt;span class="s2">&amp;#34;*host1*&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;p;s:host1:host2:&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> xargs -n2 mv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="технические-моменты">&lt;span class="section-num">7&lt;/span> Технические моменты&lt;/h2>
&lt;h3 id="имена-почтовых-файлов">&lt;span class="section-num">7.1&lt;/span> Имена почтовых файлов&lt;/h3>
&lt;ul>
&lt;li>Информация по почтовым файлам хранится либо в каталоге &lt;code>~/.mbsync&lt;/code> в файлах вида:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;lt;remote account&amp;gt;:&amp;lt;remote!folder&amp;gt;:&amp;lt;&lt;span class="nb">local&lt;/span> account&amp;gt;:&amp;lt;local!folder&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Либо информация хранится в почтовых папках в файлах &lt;code>.mbsyncstate&lt;/code> (параметр &lt;code>SyncState *&lt;/code>).&lt;/li>
&lt;li>В файле &lt;code>.uidvalidity&lt;/code> хранится последняя отметка времени и идентификатор.&lt;/li>
&lt;li>Файлы сообщений именуются по шаблону:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;lt;timestamp&amp;gt;.&amp;lt;PID&amp;gt;_&amp;lt;counter&amp;gt;.&amp;lt;hostname&amp;gt;,U&lt;span class="o">=&lt;/span>&amp;lt;increment&amp;gt;:2,&amp;lt;flags&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Пакетный менеджер для Windows. Chocolatey</title><link>https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/</link><pubDate>Mon, 18 Jan 2021 11:23:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/</guid><description>&lt;p>Наиболее популярным пакетным менеджером для Windows является &lt;em>Chocolatey&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">1&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-chocolatey">&lt;span class="section-num">2&lt;/span> Установка Chocolatey&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-настройки">&lt;span class="section-num">3&lt;/span> Дополнительные настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пакеты">&lt;span class="section-num">4&lt;/span> Пакеты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#работа-с-программным-обеспечением">&lt;span class="section-num">5&lt;/span> Работа с программным обеспечением&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сервисные-функции">&lt;span class="section-num">5.1&lt;/span> Сервисные функции&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-пакета">&lt;span class="section-num">5.2&lt;/span> Установка пакета&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удаление-пакета">&lt;span class="section-num">5.3&lt;/span> Удаление пакета&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-пакетов">&lt;span class="section-num">5.4&lt;/span> Обновление пакетов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#автоматическое-обновление-пакетов">&lt;span class="section-num">5.5&lt;/span> Автоматическое обновление пакетов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="ресурсы">&lt;span class="section-num">1&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Домашняя страница: &lt;a href="https://chocolatey.org/" target="_blank" rel="noopener">https://chocolatey.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/chocolatey/choco" target="_blank" rel="noopener">https://github.com/chocolatey/choco&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-chocolatey">&lt;span class="section-num">2&lt;/span> Установка Chocolatey&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Порядок установки описан на странице &lt;a href="https://chocolatey.org/install" target="_blank" rel="noopener">https://chocolatey.org/install&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установка проводится в PowerShell.&lt;/p>
&lt;ul>
&lt;li>PowerShell должен быть запущен с правами администратора.&lt;/li>
&lt;li>Проще всего запустить его комбинаций клавиш &lt;code>Win+X&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Команда установки находится на странице &lt;a href="https://chocolatey.org/install" target="_blank" rel="noopener">https://chocolatey.org/install&lt;/a>.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/_1O4vKHhm3I" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h2 id="дополнительные-настройки">&lt;span class="section-num">3&lt;/span> Дополнительные настройки&lt;/h2>
&lt;ul>
&lt;li>Для того, чтобы установка происходила без запроса подтверждения, можно сделать следующую настройку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco feature &lt;span class="nb">enable&lt;/span> -n&lt;span class="o">=&lt;/span>allowGlobalConfirmation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>Обратно включить запрос подтверждения можно командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco feature disable -n&lt;span class="o">=&lt;/span>allowGlobalConfirmation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="пакеты">&lt;span class="section-num">4&lt;/span> Пакеты&lt;/h2>
&lt;ul>
&lt;li>Список пакетов находится на странице &lt;a href="https://chocolatey.org/packages" target="_blank" rel="noopener">https://chocolatey.org/packages&lt;/a>.&lt;/li>
&lt;li>Список пакетов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="работа-с-программным-обеспечением">&lt;span class="section-num">5&lt;/span> Работа с программным обеспечением&lt;/h2>
&lt;h3 id="сервисные-функции">&lt;span class="section-num">5.1&lt;/span> Сервисные функции&lt;/h3>
&lt;ul>
&lt;li>Информация по ключам командной строки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco --help
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Список пакетов в репозитории:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Список установленных пакетов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco list --local-only
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-пакета">&lt;span class="section-num">5.2&lt;/span> Установка пакета&lt;/h3>
&lt;ul>
&lt;li>Для установки пакета нужно выполнить команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install package_name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы установить без запроса на подтверждение, следует добавить ключ &lt;code>y&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install package_name -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="удаление-пакета">&lt;span class="section-num">5.3&lt;/span> Удаление пакета&lt;/h3>
&lt;ul>
&lt;li>Для удаления пакета нужно выполнить команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco uninstall package_name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="обновление-пакетов">&lt;span class="section-num">5.4&lt;/span> Обновление пакетов&lt;/h3>
&lt;ul>
&lt;li>Для обновления пакета нужно выполнить команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco upgrade package_name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для обновления всех установленных пакетов нужно выполнить команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco upgrade all -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="автоматическое-обновление-пакетов">&lt;span class="section-num">5.5&lt;/span> Автоматическое обновление пакетов&lt;/h3>
&lt;ul>
&lt;li>Для автоматического обновления пакетов используется пакет &lt;code>choco-upgrade-all-at&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install choco-upgrade-all-at
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновление можно выполнить командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco-upgrade-all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы задать время обновления, нужно устанавливать с определёнными параметрами:
&lt;ul>
&lt;li>если не указывать никаких параметров, &lt;code>choco-upgrade-all-at&lt;/code> по умолчанию будет запускаться ежедневно в 2 часа ночи и прерываться в 4 часа ночи;&lt;/li>
&lt;li>запуск &lt;code>choco upgrade all -y&lt;/code> ежедневно (по умолчанию) в 23:00 и прерывание в 1:00 ( по умолчанию &lt;code>ABORTTIME&lt;/code> равно +2 часа):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install choco-upgrade-all-at --params &lt;span class="s2">&amp;#34;&amp;#39;/TIME:23:00&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>запуск &lt;code>choco upgrade all -y&lt;/code> ежедневно в 4:00 и прерывание в 8:00:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install choco-upgrade-all-at --params &lt;span class="s2">&amp;#34;&amp;#39;/DAILY:yes /TIME:04:00 /ABORTTIME:08:00&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>запуск &lt;code>choco upgrade all -y&lt;/code> каждое воскресенье в 1:00 и прерывание в 3:00:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install choco-upgrade-all-at --params &lt;span class="s2">&amp;#34;&amp;#39;/WEEKLY:yes /DAY:SUN /TIME:01:00&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Параметры можно отредактировать, запустив команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco-upgrade-all -EditConfig
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Почта. Подключение к Google</title><link>https://yamadharma.github.io/ru/post/2020/12/25/mail-google-connect/</link><pubDate>Fri, 25 Dec 2020 16:55:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/12/25/mail-google-connect/</guid><description>&lt;p>Google по умолчанию блокирует подключение сторонних клиентов.&lt;/p>
&lt;p>@@hugo{{&amp;lt; toc &amp;gt;}}@@&lt;/p>
&lt;h2 id="8b89f0">&lt;span class="section-num">1&lt;/span> &lt;del>Явное разрешение подключения&lt;/del>&lt;/h2>
&lt;ul>
&lt;li>Начиная с 30 мая 2022 года Google больше не поддерживает сторонние приложения и устройства, которые предлагают войти в аккаунт Google только с помощью имени пользователя и пароля.&lt;/li>
&lt;li>Следующие рекомендации больше &lt;strong>не работают&lt;/strong>.
&lt;ul>
&lt;li>Перейти на страницу безопасности Google &lt;a href="https://myaccount.google.com/security" target="_blank" rel="noopener">https://myaccount.google.com/security&lt;/a>.&lt;/li>
&lt;li>Переключить «Небезопасные приложения заблокированы» на «Небезопасные приложения разрешены».&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="двухэтапная-аутентификация">&lt;span class="section-num">2&lt;/span> Двухэтапная аутентификация&lt;/h2>
&lt;ul>
&lt;li>В Google Mail используется проприетарное расширение SASL XOAUTH2 для поддержки токенов OAuth 2.0 для аутентификации SMTP/IMAP.&lt;/li>
&lt;li>Подключите на учётной записи двухэтапную аутентификацию: &lt;a href="https://myaccount.google.com/signinoptions/two-step-verification/enroll-welcome" target="_blank" rel="noopener">https://myaccount.google.com/signinoptions/two-step-verification/enroll-welcome&lt;/a>.&lt;/li>
&lt;li>Необходимо включить двухэтапную аутентификацию для устройств, не поддерживающих двухэтапную аутентификацию. Для этого необходимо:
&lt;ul>
&lt;li>Перейти по адресу &lt;a href="https://myaccount.google.com/apppasswords" target="_blank" rel="noopener">https://myaccount.google.com/apppasswords&lt;/a>.&lt;/li>
&lt;li>Подключиться к необходимой учётной записи.&lt;/li>
&lt;li>Сгенерить пароль приложения.&lt;/li>
&lt;li>Поместите полученный пароль в файл аутентификации (например, &lt;code>~/.authinfo&lt;/code>) вместо Вашего пароля.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Почта. GNUS</title><link>https://yamadharma.github.io/ru/post/2020/12/21/emacs-mail-gnus/</link><pubDate>Mon, 21 Dec 2020 19:44:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/12/21/emacs-mail-gnus/</guid><description>&lt;p>Gnus является программой для чтения новостей. Также он может работать и с почтой.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#аутентификация">&lt;span class="section-num">1&lt;/span> Аутентификация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#чтение-сообщений">&lt;span class="section-num">2&lt;/span> Чтение сообщений&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="аутентификация">&lt;span class="section-num">1&lt;/span> Аутентификация&lt;/h2>
&lt;p>Для аутентификации будем использовать файл формата &lt;code>.authinfo&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/22/mail-password-authentication/">Почта. Парольная аутентификация&lt;/a>).&lt;/p>
&lt;h2 id="чтение-сообщений">&lt;span class="section-num">2&lt;/span> Чтение сообщений&lt;/h2>
&lt;ul>
&lt;li>Введите &lt;code>M-x gnus&lt;/code> для загрузки Gnus.&lt;/li>
&lt;li>Gnus подключается к серверу, отображает список групп (почтовые папки отображаются как группы).&lt;/li>
&lt;li>Gnus также указывает количество непрочитанных сообщений в каждой группе.&lt;/li>
&lt;li>Нажмите &lt;code>RET&lt;/code> (&lt;code>gnus-group-select-group&lt;/code>), чтобы просмотреть сообщения в группе.&lt;/li>
&lt;li>После этого Gnus переходит в сводное представление для этой группы.&lt;/li>
&lt;/ul>
&lt;p>&lt;a id="table--gnus-summary-view">&lt;/a>&lt;/p>
&lt;div class="table-caption">
&lt;span class="table-number">&lt;a href="#table--gnus-summary-view">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1&lt;/a>&lt;/span>:
Сочетания клавиш для чтения сообщений Gnus
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Описание&lt;/th>
&lt;th>Комбинация клавиш&lt;/th>
&lt;th>Команда&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Отображает выбранное сообщение или прокручивает отображаемое сообщение вниз&lt;/td>
&lt;td>RET&lt;/td>
&lt;td>&lt;code>gnus­summary­scroll­up&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Показать следующую страницу выбранного сообщения или перейти к следующему непрочитанному сообщению&lt;/td>
&lt;td>SPC&lt;/td>
&lt;td>&lt;code>gnus­summary­next­page&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Показать предыдущую страницу выбранного сообщения&lt;/td>
&lt;td>&lt;backspace>&lt;/td>
&lt;td>&lt;code>gnus­summary­prev­page&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ответить автору сообщения, процитировав исходное сообщение&lt;/td>
&lt;td>R&lt;/td>
&lt;td>&lt;code>gnus­summary­reply­withoriginal&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ответить автору сообщения, но не цитировать исходное сообщение&lt;/td>
&lt;td>r&lt;/td>
&lt;td>&lt;code>gnus­summary­reply&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ответить всем, процитировав исходное сообщение&lt;/td>
&lt;td>F&lt;/td>
&lt;td>&lt;code>gnus­summary­followup­withoriginal&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ответить всем, но не цитировать исходное сообщение&lt;/td>
&lt;td>f&lt;/td>
&lt;td>&lt;code>gnus­summary­followup&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Написать сообщение&lt;/td>
&lt;td>m&lt;/td>
&lt;td>&lt;code>gnus­summary­mail­otherwindow&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Удалить текущее сообщение&lt;/td>
&lt;td>B DEL&lt;/td>
&lt;td>&lt;code>gnus­summary­delete­article&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Переместить текущее сообщение в другую группу&lt;/td>
&lt;td>B m&lt;/td>
&lt;td>&lt;code>gnus­summary­move­article&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Выйти из текущей группы и вернуться к экрану выбора группы&lt;/td>
&lt;td>q&lt;/td>
&lt;td>&lt;code>gnus­summary­exit&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Работа с PGP</title><link>https://yamadharma.github.io/ru/post/2020/12/18/using-pgp/</link><pubDate>Fri, 18 Dec 2020 12:39:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/12/18/using-pgp/</guid><description>&lt;p>Использование набора программ GPG (GNU ревлизация PGP).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#экспорт-ключей-pgp">&lt;span class="section-num">1&lt;/span> Экспорт ключей PGP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gpg-agent">&lt;span class="section-num">2&lt;/span> &lt;code>gpg-agent&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск">&lt;span class="section-num">2.2&lt;/span> Запуск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перезапуск-агента">&lt;span class="section-num">2.3&lt;/span> Перезапуск агента&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">2.4&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pinentry">&lt;span class="section-num">2.5&lt;/span> pinentry&lt;/a>&lt;/li>
&lt;li>&lt;a href="#кэширование-паролей">&lt;span class="section-num">2.6&lt;/span> Кэширование паролей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#шифрование">&lt;span class="section-num">3&lt;/span> Шифрование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#симметричное-шифрование">&lt;span class="section-num">3.1&lt;/span> Симметричное шифрование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="экспорт-ключей-pgp">&lt;span class="section-num">1&lt;/span> Экспорт ключей PGP&lt;/h2>
&lt;ul>
&lt;li>Экспорт ключей
&lt;ul>
&lt;li>Экспорт всех открытых ключей в текстовый файл в кодировке base64:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg -a --export &amp;gt; mypubkeys.asc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Экспорт всех зашифрованных закрытых ключей (которые также будут включать соответствующие открытые ключи) в текстовый файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg -a --export-secret-keys &amp;gt; myprivatekeys.asc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Опционально экспортируется &lt;code>trustdb&lt;/code> gpg в текстовый файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --export-ownertrust &amp;gt; otrust.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Импорт ключей
&lt;ul>
&lt;li>Выполните команды &lt;code>gpg --import&lt;/code> для двух файлов &lt;code>asc&lt;/code>, а затем проверьте наличие новых ключей с помощью &lt;code>gpg -k&lt;/code> и &lt;code>gpg -K&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --import myprivatekeys.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg --import mypubkeys.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg -K
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg -k
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При желании также импортируйте файл &lt;code>trustdb&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --import-ownertrust otrust.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте шифрование и дешифрование с помощью команд &lt;code>gpg -er USERID&lt;/code> и &lt;code>gpg -d&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="gpg-agent">&lt;span class="section-num">2&lt;/span> &lt;code>gpg-agent&lt;/code>&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Используется для временного хранения пароля.&lt;/li>
&lt;li>Предоставляются пользовательские сокеты &lt;code>systemd&lt;/code>:
&lt;ul>
&lt;li>основной сокет &lt;code>gpg-agent.socket&lt;/code> используется &lt;em>gpg&lt;/em> для подключения к демону &lt;code>gpg-agent&lt;/code>;&lt;/li>
&lt;li>сокет &lt;code>gpg-agent-extra.socket&lt;/code> на локальной системе используется для настройки переадресации Unix-сокета с удалённой системы;&lt;/li>
&lt;li>&lt;code>gpg-agent-browser.socket&lt;/code> позволяет веб-браузерам обращаться к демону &lt;code>gpg-agent&lt;/code>;&lt;/li>
&lt;li>&lt;code>gpg-agent-ssh.socket&lt;/code> может использоваться SSH для кэширования ключей SSH, добавленных программой ssh-add;&lt;/li>
&lt;li>&lt;code>dirmngr.socket&lt;/code> запускает демон GnuPG, обрабатывающий соединения с серверами ключей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="запуск">&lt;span class="section-num">2.2&lt;/span> Запуск&lt;/h3>
&lt;ul>
&lt;li>Активизируются сокеты, а не сам &lt;code>gpg-agent&lt;/code>.&lt;/li>
&lt;li>Запуск под управлением &lt;code>systemd&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now gpg-agent.socket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перезапуск-агента">&lt;span class="section-num">2.3&lt;/span> Перезапуск агента&lt;/h3>
&lt;ul>
&lt;li>После обновления настроек следует перезапустить агента, передав команду &lt;code>RELOADAGENT&lt;/code> программе &lt;code>gpg-connect-agent&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg-connect-agent reloadagent /bye
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка">&lt;span class="section-num">2.4&lt;/span> Настройка&lt;/h3>
&lt;ul>
&lt;li>Настраивается в файле &lt;code>~/.gnupg/gpg-agent.conf&lt;/code>.&lt;/li>
&lt;li>Время жизни для ключей в кэше с момента последнего использования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">default-cache-ttl 3600
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="pinentry">&lt;span class="section-num">2.5&lt;/span> pinentry&lt;/h3>
&lt;ul>
&lt;li>gpg-agent использует pinentry для отображения диалога запроса пароля.&lt;/li>
&lt;li>Вариант диалога настраивается в файле настроек &lt;code>~/.gnupg/gpg-agent.conf&lt;/code>.&lt;/li>
&lt;li>Чтобы установить конкретный диалог, установите опцию &lt;code>pinentry-program&lt;/code> в файле &lt;code>~/.gnupg/gpg-agent.conf&lt;/code>, например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pinentry-program /usr/bin/pinentry-curses
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Существуют разные реализации pinentry.&lt;/li>
&lt;li>Просмотр реализаций:
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">eselect pinentry list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="кэширование-паролей">&lt;span class="section-num">2.6&lt;/span> Кэширование паролей&lt;/h3>
&lt;ul>
&lt;li>Время кеширования определяется параметрами &lt;code>max-cache-ttl&lt;/code> и &lt;code>default-cache-ttl&lt;/code>.&lt;/li>
&lt;li>Чтобы вводить пароль всего один раз за сеанс, нужно установить их на очень высокое значение, например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## gpg-agent.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">max-cache-ttl 60480000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default-cache-ttl 60480000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для кэширования паролей в режиме эмуляции SSH следует установить параметры &lt;code>default-cache-ttl-ssh&lt;/code> и &lt;code>max-cache-ttl-ssh&lt;/code>, например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## gpg-agent.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default-cache-ttl-ssh 60480000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">max-cache-ttl-ssh 60480000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="шифрование">&lt;span class="section-num">3&lt;/span> Шифрование&lt;/h2>
&lt;ul>
&lt;li>Шифрование может быть симметричным и ассиметричным.&lt;/li>
&lt;li>Симметричное шифрование шифруется и расшифровывается приватным ключом или одной и той же парольной фразой.&lt;/li>
&lt;li>Ассиметричное шифрование шифруется публичным ключом, расшифровывается приватным.&lt;/li>
&lt;/ul>
&lt;h3 id="симметричное-шифрование">&lt;span class="section-num">3.1&lt;/span> Симметричное шифрование&lt;/h3>
&lt;ul>
&lt;li>Зашифровать файл:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg -c filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>или&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --symmetric filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Расшифровать файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --decrypt-files filename.gpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Расшифровать файл с выводом на терминал:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --decrypt filename.gpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Работа с 1С в РУДН</title><link>https://yamadharma.github.io/ru/post/2020/12/09/working-with-1c-rudn-university/</link><pubDate>Wed, 09 Dec 2020 11:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/12/09/working-with-1c-rudn-university/</guid><description>&lt;p>Работа с 1С в РУДН.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#виды-подключения">&lt;span class="section-num">1&lt;/span> Виды подключения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#модули-1с">&lt;span class="section-num">2&lt;/span> Модули 1С&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#управление-вузом">&lt;span class="section-num">2.1&lt;/span> Управление ВУЗом&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#тонкий-клиент">&lt;span class="section-num">2.1.1&lt;/span> Тонкий клиент&lt;/a>&lt;/li>
&lt;li>&lt;a href="#web-клиент">&lt;span class="section-num">2.1.2&lt;/span> Web-клиент&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#расписание">&lt;span class="section-num">2.2&lt;/span> Расписание&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#тонкий-клиент">&lt;span class="section-num">2.2.1&lt;/span> Тонкий клиент&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#итилиум">&lt;span class="section-num">2.3&lt;/span> Итилиум&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#тонкий-клиент">&lt;span class="section-num">2.3.1&lt;/span> Тонкий клиент&lt;/a>&lt;/li>
&lt;li>&lt;a href="#web-клиент">&lt;span class="section-num">2.3.2&lt;/span> Web-клиент&lt;/a>&lt;/li>
&lt;li>&lt;a href="#мобильное-приложение">&lt;span class="section-num">2.3.3&lt;/span> Мобильное приложение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#документооборот">&lt;span class="section-num">2.4&lt;/span> Документооборот&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#тонкий-клиент">&lt;span class="section-num">2.4.1&lt;/span> Тонкий клиент&lt;/a>&lt;/li>
&lt;li>&lt;a href="#web-клиент">&lt;span class="section-num">2.4.2&lt;/span> Web-клиент&lt;/a>&lt;/li>
&lt;li>&lt;a href="#мобильное-приложение">&lt;span class="section-num">2.4.3&lt;/span> Мобильное приложение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-извне-сети-университета">&lt;span class="section-num">2.4.4&lt;/span> Подключение извне сети Университета&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="виды-подключения">&lt;span class="section-num">1&lt;/span> Виды подключения&lt;/h2>
&lt;ul>
&lt;li>Часть сервисов 1С доступны непосредственно из сети.&lt;/li>
&lt;li>Часть сервисов доступна через VPN из внешний сети и напрямую из локальной сети Университета.&lt;/li>
&lt;li>При подключении модно выбрать одну из опций:
&lt;ul>
&lt;li>&lt;em>На веб-сервере&lt;/em>
&lt;ul>
&lt;li>Доступен как изнутри, так и извне.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>На сервере 1С:Предприятие&lt;/em>
&lt;ul>
&lt;li>Задаётся локальный адрес сервера или кластера серверов.&lt;/li>
&lt;li>Доступен через внутреннюю сеть либо через VPN.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="модули-1с">&lt;span class="section-num">2&lt;/span> Модули 1С&lt;/h2>
&lt;h3 id="управление-вузом">&lt;span class="section-num">2.1&lt;/span> Управление ВУЗом&lt;/h3>
&lt;h4 id="тонкий-клиент">&lt;span class="section-num">2.1.1&lt;/span> Тонкий клиент&lt;/h4>
&lt;ul>
&lt;li>Рекомендуемое название: &lt;em>Управление ВУЗом&lt;/em>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>На веб-сервере&lt;/p>
&lt;ul>
&lt;li>Расположение информационной базы на веб-сервере: &lt;code>https://vuz.rudn.ru/VUZ_RUDN/&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>На сервере 1С:Предприятие&lt;/p>
&lt;ul>
&lt;li>Кластер серверов: &lt;code>192.168.125.103:1941&lt;/code>&lt;/li>
&lt;li>Имя информационной базы: &lt;code>VUZ_RUDN&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="web-клиент">&lt;span class="section-num">2.1.2&lt;/span> Web-клиент&lt;/h4>
&lt;ul>
&lt;li>Ссылка:
&lt;ul>
&lt;li>&lt;a href="https://vuz.rudn.ru/VUZ_RUDN" target="_blank" rel="noopener">https://vuz.rudn.ru/VUZ_RUDN&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://eisweb.rudn.ru/VUZ_RUDN" target="_blank" rel="noopener">https://eisweb.rudn.ru/VUZ_RUDN&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="расписание">&lt;span class="section-num">2.2&lt;/span> Расписание&lt;/h3>
&lt;h4 id="тонкий-клиент">&lt;span class="section-num">2.2.1&lt;/span> Тонкий клиент&lt;/h4>
&lt;ul>
&lt;li>Рекомендуемое название: Расписание&lt;/li>
&lt;li>Сервер: 192.168.125.107&lt;/li>
&lt;li>Имя ИБ: &lt;code>RASP_RUDN&lt;/code>&lt;/li>
&lt;li>Замечание: Если после настройки отображается ошибка установки соединения, необходимо вручную прописать в файл &lt;code>/etc/hosts&lt;/code> локальной машины сопоставление DNS-имени сервера 1C:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">192.168.125.107 rasp1cserapp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="итилиум">&lt;span class="section-num">2.3&lt;/span> Итилиум&lt;/h3>
&lt;ul>
&lt;li>Система Service Desk Итилиум &amp;mdash; управление IT-услугами на платформе 1С.&lt;/li>
&lt;li>Сайт: &lt;a href="https://itilium.ru/service-desk" target="_blank" rel="noopener">https://itilium.ru/service-desk&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h4 id="тонкий-клиент">&lt;span class="section-num">2.3.1&lt;/span> Тонкий клиент&lt;/h4>
&lt;ul>
&lt;li>Рекомендуемое название: Итилиум&lt;/li>
&lt;li>Кластер серверов: 192.168.125.103:2441&lt;/li>
&lt;li>Имя ИБ: &lt;code>ITL_RUDN&lt;/code>&lt;/li>
&lt;/ul>
&lt;h4 id="web-клиент">&lt;span class="section-num">2.3.2&lt;/span> Web-клиент&lt;/h4>
&lt;ul>
&lt;li>Ссылка: &lt;a href="https://eisweb.rudn.ru/ITL_RUDN/" target="_blank" rel="noopener">https://eisweb.rudn.ru/ITL_RUDN/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="мобильное-приложение">&lt;span class="section-num">2.3.3&lt;/span> Мобильное приложение&lt;/h4>
&lt;ul>
&lt;li>Android: &lt;a href="https://play.google.com/store/apps/details?id=com.desnol.itiliummobile.itiliummobile&amp;amp;hl=ru" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=com.desnol.itiliummobile.itiliummobile&amp;hl=ru&lt;/a>.&lt;/li>
&lt;li>iOS: &lt;a href="https://itunes.apple.com/ru/app/%D0%B8%D1%82%D0%B8%D0%BB%D0%B8%D1%83%D0%BC/id1057128487?platform=iphone&amp;amp;preserveScrollPosition=true#platform/iphone" target="_blank" rel="noopener">https://itunes.apple.com/ru/app/%D0%B8%D1%82%D0%B8%D0%BB%D0%B8%D1%83%D0%BC/id1057128487?platform=iphone&amp;preserveScrollPosition=true#platform/iphone&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h3 id="документооборот">&lt;span class="section-num">2.4&lt;/span> Документооборот&lt;/h3>
&lt;h4 id="тонкий-клиент">&lt;span class="section-num">2.4.1&lt;/span> Тонкий клиент&lt;/h4>
&lt;ul>
&lt;li>Рекомендуемое название: &lt;em>СЭД&lt;/em>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>На веб-сервере&lt;/p>
&lt;ul>
&lt;li>Расположение информационной базы на веб-сервере: &lt;code>https://sed.rudn.ru/DGU_RUDN&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>На сервере 1С:Предприятие&lt;/p>
&lt;ul>
&lt;li>Кластер серверов: &lt;code>192.168.125.183&lt;/code>&lt;/li>
&lt;li>Имя информационной базы: &lt;code>DGU_RUDN&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="web-клиент">&lt;span class="section-num">2.4.2&lt;/span> Web-клиент&lt;/h4>
&lt;ul>
&lt;li>Ссылка: &lt;a href="https://sed.rudn.ru/" target="_blank" rel="noopener">https://sed.rudn.ru/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h4 id="мобильное-приложение">&lt;span class="section-num">2.4.3&lt;/span> Мобильное приложение&lt;/h4>
&lt;ul>
&lt;li>Google Play: &lt;a href="https://play.google.com/store/apps/details?id=ru.rudn.sed" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=ru.rudn.sed&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="подключение-извне-сети-университета">&lt;span class="section-num">2.4.4&lt;/span> Подключение извне сети Университета&lt;/h4>
&lt;ul>
&lt;li>Подключение извне корпоративной сети РУДН проводится с помощью VPN по протоколу Cisco AnyConnect (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/08/19/cisco-vpn-client-setup/">Подключение к Cisco VPN&lt;/a>).&lt;/li>
&lt;li>Клиента для Windows можно получить с сайта &lt;a href="https://vpn.rudn.ru:444/" target="_blank" rel="noopener">https://vpn.rudn.ru:444/&lt;/a>.&lt;/li>
&lt;li>В настройках укажите в качестве шлюза &lt;code>vpn.rudn.ru:444&lt;/code>.&lt;/li>
&lt;li>При первом подключении будет запрошен логин и пароль.&lt;/li>
&lt;li>Рекомендуется разрешить сохранение парольной информации для дальнейших сессий.&lt;/li>
&lt;li>DNS сервер РУДН не поддерживает DNSSEC, поэтому рекомендуется отключить его у локального кэширующего DNS-сервера.&lt;/li>
&lt;/ul></description></item><item><title>Генератор статических сайтов Hugo</title><link>https://yamadharma.github.io/ru/post/2020/12/07/hugo-site-generator/</link><pubDate>Mon, 07 Dec 2020 14:06:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/12/07/hugo-site-generator/</guid><description>&lt;p>Особенности генератора статических сайтов Hugo.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#темы">&lt;span class="section-num">1&lt;/span> Темы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#язык-описания-страниц">&lt;span class="section-num">2&lt;/span> Язык описания страниц&lt;/a>&lt;/li>
&lt;li>&lt;a href="#собственная-favicon-для-сайта">&lt;span class="section-num">3&lt;/span> Собственная favicon для сайта&lt;/a>&lt;/li>
&lt;li>&lt;a href="#взаимодействие-с-внешними-сервисами">&lt;span class="section-num">4&lt;/span> Взаимодействие с внешними сервисами&lt;/a>&lt;/li>
&lt;li>&lt;a href="#процесс-создания-блога">&lt;span class="section-num">5&lt;/span> Процесс создания блога&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-статического-сайта">&lt;span class="section-num">6&lt;/span> Создание статического сайта&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="темы">&lt;span class="section-num">1&lt;/span> Темы&lt;/h2>
&lt;ul>
&lt;li>В рамах Hugo создан набор разнообразных тем.&lt;/li>
&lt;li>Для сайта научного работника или научной группы можно рекомендовать набор тем Wowchemy (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/07/02/hugo-template-for-scientists/">Hugo. Шаблон для научных работников&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="язык-описания-страниц">&lt;span class="section-num">2&lt;/span> Язык описания страниц&lt;/h2>
&lt;ul>
&lt;li>В качестве языка описания страниц используется Markdown. Сам Hugo использует библиотеку &lt;a href="https://github.com/yuin/goldmark/" target="_blank" rel="noopener">Goldmark&lt;/a>. Этот диалект полностью соответствует спецификации &lt;a href="https://commonmark.org/" target="_blank" rel="noopener">CommonMark&lt;/a>.&lt;/li>
&lt;li>Язык расширен в основном за счёт операторов (shortcodes) и поддержки расширений для диаграмм, LaTeX и др. ( см. &lt;a href="https://yamadharma.github.io/ru/post/2020/11/26/hugo-markdown/">Синтаксис Markdown для генератора сайтов Hugo&lt;/a>).&lt;/li>
&lt;li>Кроме того, возможно использование и других диалектов Markdown.&lt;/li>
&lt;li>Также возможно использование других легковесных языков разметки (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/28/lightweight-markup-languages/">Легковесные языки разметки&lt;/a>): &lt;a href="https://github.com/niklasfasching/go-org" target="_blank" rel="noopener">Emacs Org-mode&lt;/a>, &lt;a href="https://asciidoctor.org/" target="_blank" rel="noopener">AsciiDoc&lt;/a>, &lt;a href="http://docutils.sourceforge.net/rst.html" target="_blank" rel="noopener">RST&lt;/a> через внешние программы.&lt;/li>
&lt;/ul>
&lt;h2 id="собственная-favicon-для-сайта">&lt;span class="section-num">3&lt;/span> Собственная favicon для сайта&lt;/h2>
&lt;ul>
&lt;li>Собственная иконка для сайта делается в виде файла &lt;code>icon.png&lt;/code>, размеры 512x512 пикселей.&lt;/li>
&lt;li>Иконка располагается в каталоге &lt;code>assets/media/&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="взаимодействие-с-внешними-сервисами">&lt;span class="section-num">4&lt;/span> Взаимодействие с внешними сервисами&lt;/h2>
&lt;ul>
&lt;li>Для комментариев используются сервисы &lt;a href="https://disqus.com/" target="_blank" rel="noopener">Disqus&lt;/a> и &lt;a href="https://commento.io/" target="_blank" rel="noopener">Commento&lt;/a> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/25/commenting-static-sites/">Комментирование для статических сайтов&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="процесс-создания-блога">&lt;span class="section-num">5&lt;/span> Процесс создания блога&lt;/h2>
&lt;ul>
&lt;li>Предлагается не писать заметки непосредственно для сайта, а использовать систему генерации статических сайтов как бэкенд для систем ведения заметок.&lt;/li>
&lt;li>Предлагается использовать режим &lt;em>org-roam&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/11/23/org-roam-hugo-export/">Org-roam. Экспорт в Hugo&lt;/a>) редактора &lt;em>emacs&lt;/em> как реализации &lt;em>Zettelkasten&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/02/18/zettelkasten-method/">Метод Zettelkasten&lt;/a>).&lt;/li>
&lt;li>Для реализации методики &lt;em>Zettelkasten&lt;/em> на сайте необходима реализация обратных ссылок (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/06/02/backlinks-hugo/">Обратные ссылки в Hugo&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="создание-статического-сайта">&lt;span class="section-num">6&lt;/span> Создание статического сайта&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/04/12/creating-hugo-site/">Создание сайта на Hugo&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Переход на Sway</title><link>https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/</link><pubDate>Thu, 10 Sep 2020 10:33:15 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/</guid><description>&lt;p>Решил попробовать &lt;a href="https://wayland.freedesktop.org/" target="_blank" rel="noopener">Wayland&lt;/a>. По этой причине пришлось &lt;a href="http://way-cooler.org/blog/2020/01/09/way-cooler-post-mortem.html" target="_blank" rel="noopener">перейти&lt;/a> с &lt;a href="https://awesomewm.org/" target="_blank" rel="noopener">awesome&lt;/a> на &lt;a href="https://swaywm.org/" target="_blank" rel="noopener">swlay&lt;/a>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-sway">&lt;span class="section-num">2&lt;/span> Установка &lt;code>sway&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#репозитории-gentoo">&lt;span class="section-num">2.1&lt;/span> Репозитории &lt;code>gentoo&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#первоначальная-конфигурация">&lt;span class="section-num">3&lt;/span> Первоначальная конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#комбинации-клавиш">&lt;span class="section-num">4&lt;/span> Комбинации клавиш&lt;/a>&lt;/li>
&lt;li>&lt;a href="#замена-приложений">&lt;span class="section-num">5&lt;/span> Замена приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ресурсы-по-миграции-с-x-window">&lt;span class="section-num">5.1&lt;/span> Ресурсы по миграции с X Window&lt;/a>&lt;/li>
&lt;li>&lt;a href="#снимки-экрана">&lt;span class="section-num">5.2&lt;/span> Снимки экрана&lt;/a>&lt;/li>
&lt;li>&lt;a href="#видеозапись-экрана--скринкаст">&lt;span class="section-num">5.3&lt;/span> Видеозапись экрана (скринкаст)&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#видеозапись-экрана-командная-строка">&lt;span class="section-num">5.3.1&lt;/span> Видеозапись экрана &amp;ndash; командная строка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#видеозапись-экрана-графическое-приложение">&lt;span class="section-num">5.3.2&lt;/span> Видеозапись экрана &amp;ndash; графическое приложение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#строка-состояний">&lt;span class="section-num">5.4&lt;/span> Строка состояний&lt;/a>&lt;/li>
&lt;li>&lt;a href="#уведомления">&lt;span class="section-num">5.5&lt;/span> Уведомления&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-вывода">&lt;span class="section-num">5.6&lt;/span> Настройка вывода&lt;/a>&lt;/li>
&lt;li>&lt;a href="#меню-программ--launcher">&lt;span class="section-num">5.7&lt;/span> Меню программ (launcher)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#буфер-обмена">&lt;span class="section-num">5.8&lt;/span> Буфер обмена&lt;/a>&lt;/li>
&lt;li>&lt;a href="#блокировка-экрана">&lt;span class="section-num">5.9&lt;/span> Блокировка экрана&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#swaylock">&lt;span class="section-num">5.9.1&lt;/span> swaylock&lt;/a>&lt;/li>
&lt;li>&lt;a href="#swaylock-effects">&lt;span class="section-num">5.9.2&lt;/span> swaylock-effects&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#совместимость-приложений">&lt;span class="section-num">6&lt;/span> Совместимость приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#java">&lt;span class="section-num">6.1&lt;/span> Java&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#серое-окно-приложения-не-меняют-размер-с-помощью-wm-меню-сразу-закрываются">&lt;span class="section-num">6.1.1&lt;/span> Серое окно, приложения не меняют размер с помощью WM, меню сразу закрываются&lt;/a>&lt;/li>
&lt;li>&lt;a href="#меню-в-приложениях-плавает-отдельно-им-невозможно-пользоваться">&lt;span class="section-num">6.1.2&lt;/span> Меню в приложениях плавает отдельно, им невозможно пользоваться&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#приложения-gtk-plus-запускаются-с-задержкой">&lt;span class="section-num">6.2&lt;/span> Приложения GTK+ запускаются с задержкой&lt;/a>&lt;/li>
&lt;li>&lt;a href="#qt-приложения">&lt;span class="section-num">6.3&lt;/span> Qt приложения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://swaywm.org/" target="_blank" rel="noopener">https://swaywm.org/&lt;/a>&lt;/li>
&lt;li>Создавался для замены i3 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>) под Wayland.&lt;/li>
&lt;/ul>
&lt;h2 id="установка-sway">&lt;span class="section-num">2&lt;/span> Установка &lt;code>sway&lt;/code>&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-wm/sway
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="репозитории-gentoo">&lt;span class="section-num">2.1&lt;/span> Репозитории &lt;code>gentoo&lt;/code>&lt;/h3>
&lt;p>Программы для Wayland есть как в основном репозитории, так и
дополнительных. Хочу порекомендовать для просмотра следующие
репозитории:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/epsilon-0/wayland-desktop" target="_blank" rel="noopener">wayland-desktop&lt;/a>&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">layman -a wayland-desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;a href="https://wiki.gentoo.org/wiki/Project:GURU" target="_blank" rel="noopener">guru&lt;/a>&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">layman -a guru
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="первоначальная-конфигурация">&lt;span class="section-num">3&lt;/span> Первоначальная конфигурация&lt;/h2>
&lt;ul>
&lt;li>Файл конфигурации ищется в следующем порядке:
&lt;ul>
&lt;li>&lt;code>~/.sway/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/sway/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>~/.i3/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/sway/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/i3/config&lt;/code>.&lt;/li>
&lt;li>Переменная окружения &lt;code>$XDG_CONFIG_HOME&lt;/code> по умолчанию установлена в &lt;code>~/.config/&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пакет устанавливает глобальную конфигурацию в &lt;code>/etc/sway/config&lt;/code>.&lt;/li>
&lt;li>При желании внести изменение в конфигурацию можно скопировать файл глобальной конфигурации в локальную:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p ~/.config/sway
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /etc/sway/config ~/.config/sway/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="комбинации-клавиш">&lt;span class="section-num">4&lt;/span> Комбинации клавиш&lt;/h2>
&lt;p>Основные сочетания клавиш:&lt;/p>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Enter&lt;/code> &amp;ndash; открыть новый терминал;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>d&lt;/code> &amp;ndash; запустить программу;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>0&lt;/code>.. &lt;code>9&lt;/code> &amp;ndash; переключение между workspace&amp;rsquo;ами;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>0&lt;/code> .. &lt;code>9&lt;/code> &amp;ndash; перемещение окон в заданный workspace;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>q&lt;/code> &amp;ndash; закрыть текущее окно;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + стрелки &amp;ndash; перемещение между окнами, вместо стрелочек также могут быть использованы клавиши «J» (влево), «K» (вниз), «L» (вверх) и «;» (вправо);&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + стрелки &amp;ndash; перемещение окон в пределах workspace&amp;rsquo;а, вместо стрелок также могут быть использованы буквы и точка с запятой;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>v&lt;/code> &amp;ndash; использовать вертикальное разбиение;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>h&lt;/code> &amp;ndash; использовать горизонтальное разбиение;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>e&lt;/code> &amp;ndash; размещение окон по-умолчанию (default layout);&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>s&lt;/code> &amp;ndash; стековое размещение (stacking layout);&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>w&lt;/code> &amp;ndash; размещение с табами (tabbed layout);&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>f&lt;/code> &amp;ndash; раскрыть окно во весь экран или свернуть его обратно;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Space&lt;/code> &amp;ndash; разрешить свободное перемещение окна (floating mode) или вернуть его в мозаику;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>c&lt;/code> &amp;ndash; перечитать конфигурацию &lt;code>sway&lt;/code> (перестартовать);&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>e&lt;/code> &amp;ndash; выйти из &lt;code>sway&lt;/code>.&lt;/li>
&lt;/ul>
&lt;p>Кроме того, часть сочетаний клавиш определяется в файлах, определяющих конкретный функционал.&lt;/p>
&lt;h2 id="замена-приложений">&lt;span class="section-num">5&lt;/span> Замена приложений&lt;/h2>
&lt;h3 id="ресурсы-по-миграции-с-x-window">&lt;span class="section-num">5.1&lt;/span> Ресурсы по миграции с X Window&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://github.com/swaywm/sway/wiki/i3-Migration-Guide" target="_blank" rel="noopener">https://github.com/swaywm/sway/wiki/i3-Migration-Guide&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/swaywm/sway/wiki/Useful-add-ons-for-sway" target="_blank" rel="noopener">https://github.com/swaywm/sway/wiki/Useful-add-ons-for-sway&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://wiki.gentoo.org/wiki/List_of_software_for_Wayland" target="_blank" rel="noopener">https://wiki.gentoo.org/wiki/List_of_software_for_Wayland&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/natpen/awesome-wayland" target="_blank" rel="noopener">https://github.com/natpen/awesome-wayland&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://arewewaylandyet.com/" target="_blank" rel="noopener">https://arewewaylandyet.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="снимки-экрана">&lt;span class="section-num">5.2&lt;/span> Снимки экрана&lt;/h3>
&lt;p>Исходно использовался &lt;code>scrot&lt;/code>.&lt;/p>
&lt;p>Для Wayland перешёл на связку &lt;a href="https://github.com/emersion/grim" target="_blank" rel="noopener">grim&lt;/a> (получение снимка экрана) + &lt;a href="https://github.com/emersion/slurp" target="_blank" rel="noopener">slurp&lt;/a> (выделение области экрана):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -uv gui-apps/slurp gui-apps/grim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Настроим получение снимков экрана:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/sway/config.d/80-screenshots.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Screenshot active display
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym Print exec grim -t png &amp;#34;$(xdg-user-dir PICTURES)&amp;#34;/$(date +%Y-%m-%d_%H-%M-%S).png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Screenshot current window
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Print exec grim -g &amp;#34;$(swaymsg -t get_tree | jq -r &amp;#39;.. | select(.pid? and .visible?) | .rect | &amp;#34;\(.x),\(.y) \(.width)x\(.height)&amp;#34;&amp;#39;)&amp;#34; &amp;#34;$(xdg-user-dir PICTURES)&amp;#34;/$(date +%Y-%m-%d_%H-%M-%S).png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Screenshot selected region
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Print exec grim -t png -g &amp;#34;$(slurp)&amp;#34; &amp;#34;$(xdg-user-dir PICTURES)&amp;#34;/$(date +%Y-%m-%d_%H-%M-%S).png
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>При нажатии клавиши &lt;code>PrtScr&lt;/code> делается снимок всего экрана.&lt;/li>
&lt;li>При нажатии &lt;code>Mod4&lt;/code> + &lt;code>PrtScr&lt;/code> делается снимок активного окна.&lt;/li>
&lt;li>При нажатии &lt;code>Mod4&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>PrtScr&lt;/code> предлагается выбрать область экрана, снимок которой следует сделать.&lt;/li>
&lt;/ul>
&lt;h3 id="видеозапись-экрана--скринкаст">&lt;span class="section-num">5.3&lt;/span> Видеозапись экрана (скринкаст)&lt;/h3>
&lt;p>Ранее использовался &lt;a href="https://www.maartenbaert.be/simplescreenrecorder/" target="_blank" rel="noopener">SimpleScreenRecorder&lt;/a>.&lt;/p>
&lt;h4 id="видеозапись-экрана-командная-строка">&lt;span class="section-num">5.3.1&lt;/span> Видеозапись экрана &amp;ndash; командная строка&lt;/h4>
&lt;p>Для записи из командной строки используем &lt;a href="https://github.com/ammen99/wf-recorder" target="_blank" rel="noopener">wf-recorder&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/wf-recorder
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Варианты использования:&lt;/p>
&lt;ul>
&lt;li>Запись всего экрана в файл &lt;code>recording.mkv&lt;/code> (только видео):&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wf-recorder -f recording&lt;span class="k">$(&lt;/span>date +%Y-%m-%d_%H-%M-%S&lt;span class="k">)&lt;/span>.mkv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Если файл не указывать, запись будет в текущий каталог.&lt;/p>
&lt;ul>
&lt;li>Запись фрагмента экрана (тут имя файла задаётся по времени начала
записи):&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wf-recorder -g &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>slurp&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -f &lt;span class="k">$(&lt;/span>date +%Y-%m-%d_%H-%M-%S&lt;span class="k">)&lt;/span>.mkv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Запись со звуком:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wf-recorder --audio -f &lt;span class="k">$(&lt;/span>date +%Y-%m-%d_%H-%M-%S&lt;span class="k">)&lt;/span>.mkv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Запись с использование GPU (VAAPI интерфейс):&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wf-recorder --audio -f &lt;span class="k">$(&lt;/span>date +%Y-%m-%d_%H-%M-%S&lt;span class="k">)&lt;/span>.mkv -c h264_vaapi -d /dev/dri/renderD128
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="видеозапись-экрана-графическое-приложение">&lt;span class="section-num">5.3.2&lt;/span> Видеозапись экрана &amp;ndash; графическое приложение&lt;/h4>
&lt;p>Для захвата десктопа в Wayland используется плагин &lt;a href="https://hg.sr.ht/~scoopta/wlrobs" target="_blank" rel="noopener">wlrobs&lt;/a>.&lt;/p>
&lt;h3 id="строка-состояний">&lt;span class="section-num">5.4&lt;/span> Строка состояний&lt;/h3>
&lt;p>Sway поддерживает свою строку состояний &lt;code>sway-bar&lt;/code>. Удобное и минималистическое приложение. Однако, удручает, что иконки в трее не активны.&lt;/p>
&lt;p>Попробуем использовать более продвинутый вариант &amp;ndash; &lt;a href="https://github.com/Alexays/Waybar" target="_blank" rel="noopener">waybar&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/waybar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Конфигурация:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## sway-bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Read `man 5 sway-bar` for more information about this section.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># # When the status_command prints a new line to stdout, swaybar updates.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># # The default just shows the current date and time.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># status_command while date +&amp;#39;%Y-%m-%d %H:%M:%S&amp;#39;; do sleep 1; done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># colors {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># statusline #ffffff
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># background #323232
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># inactive_workspace #32323200 #32323200 #5c5c5c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Waybar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># &amp;lt;https://github.com/Alexays/Waybar&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exec_always ~/.config/sway/scripts/waybar.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Waybar Tooltips don&amp;#39;t steel focus
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">no_focus [app_id=&amp;#34;waybar&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">for_window [app_id=&amp;#34;waybar&amp;#34; floating] {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> move position cursor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> move down 60px # adjust if some menus still don&amp;#39;t fit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Конфигурацию &lt;code>waybar&lt;/code> поместил в &lt;code>~/.config/sway/other/waybar&lt;/code>.&lt;/p>
&lt;h3 id="уведомления">&lt;span class="section-num">5.5&lt;/span> Уведомления&lt;/h3>
&lt;p>Используется &lt;a href="https://github.com/emersion/mako" target="_blank" rel="noopener">mako&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/mako
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Сконфигурировал следующим образом:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/sway/config.d/80-mako.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Light
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exec_always mako --font &amp;#39;Source Code Pro 10&amp;#39; --background-color &amp;#39;#fdf6e3&amp;#39; --text-color &amp;#39;#657b83&amp;#39; --default-timeout 5000 --width 400 --markup 1 --border-radius 5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Dark
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># exec_always mako --font &amp;#39;Source Code Pro 10&amp;#39; --background-color &amp;#39;#002b36&amp;#39; --text-color &amp;#39;#839496&amp;#39; --default-timeout 5000 --width 400 --markup 1 --border-radius 5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="настройка-вывода">&lt;span class="section-num">5.6&lt;/span> Настройка вывода&lt;/h3>
&lt;p>В XWindow используется программа &lt;code>xrandr&lt;/code> (с её помощью можно изменять параметры вывода изображения RandR). В &lt;code>sway&lt;/code> можно управлять с помощью &lt;code>swaymsg output&lt;/code> или с помощью утилиты &lt;a href="https://github.com/emersion/wlr-randr" target="_blank" rel="noopener">wlr-randr&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/wlr-randr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="меню-программ--launcher">&lt;span class="section-num">5.7&lt;/span> Меню программ (launcher)&lt;/h3>
&lt;p>Для запуска программы используется &lt;code>dmenu&lt;/code>. Если не нравится, можно заменить.&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://hg.sr.ht/~scoopta/wofi" target="_blank" rel="noopener">wofi&lt;/a> &amp;mdash; аналог &lt;code>rofi&lt;/code> для Wayland. Попроще, конечно.&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/wofi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>В отличии от &lt;code>dmenu&lt;/code> запоминает последние выбранные команды.&lt;/p>
&lt;p>Общая конфигурация:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ~/.config/sway/config.d/80-launcher.conf
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># dmenu
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="n">menu&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dmenu_path&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dmenu&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">xargs&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">swaymsg&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">exec&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">--
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># wofi
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --show &amp;lt;mode&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;lt;mode&amp;gt;:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - `run` - searches $PATH for executables and allows them to be run by selecting them.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - `drun` - searches $XDG_DATA_HOME/applications and $XDG_DATA_DIRS/applications for desktop files and allows them to be run by selecting them.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - `dmenu` - reads from stdin and displays options which when selected will be output to stdout.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># set $menu dmenu_path | wofi -c ~/.config/sway/other/wofi/config -s ~/.config/sway/other/wofi/style.css --show dmenu | xargs swaymsg exec --
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># rofi
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># set $menu rofi -combi-modi window#drun -show combi -modi combi -show-icons
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set $menu rofi -m $(swaymsg -t get_outputs | jq &amp;#39;map(select(.active) | .focused) | index(true)&amp;#39;) -show combi -modi combi -combi-modi window#drun -show-icons -run-command &amp;#39;swaymsg exec -- {cmd}&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># gmenu
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># set $menu gtkmenu --width 500 --height 260 -no-generic
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set $menu nwggrid
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># bemenu
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># set $menu j4-dmenu-desktop --dmenu=&amp;#34;bemenu-run.sh -l 30&amp;#34; --term=&amp;#34;alacritty&amp;#34; --no-generic
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># Start your launcher
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">bindsym&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="k">mod&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">exec&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="n">menu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="буфер-обмена">&lt;span class="section-num">5.8&lt;/span> Буфер обмена&lt;/h3>
&lt;p>Предлагается использовать &lt;a href="https://github.com/bugaevc/wl-clipboard" target="_blank" rel="noopener">wl-clipboard&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/wl-clipboard
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Пакет содержит две утилиты: &lt;code>wl-copy&lt;/code> и &lt;code>wl-paste&lt;/code>.&lt;/p>
&lt;p>Пример использования:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># copy a simple text message&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wl-copy Hello world!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># copy the list of files in Downloads&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ls ~/Downloads &lt;span class="p">|&lt;/span> wl-copy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># copy an image file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wl-copy &amp;lt; ~/Pictures/photo.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># paste to a file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wl-paste &amp;gt; clipboard.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># grep each pasted word in file source.c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="k">for&lt;/span> word in &lt;span class="k">$(&lt;/span>wl-paste&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> grep &lt;span class="nv">$word&lt;/span> source.c&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># copy the previous command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wl-copy &lt;span class="s2">&amp;#34;!!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># replace the current selection with the list of types it&amp;#39;s offered in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wl-paste --list-types &lt;span class="p">|&lt;/span> wl-copy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="блокировка-экрана">&lt;span class="section-num">5.9&lt;/span> Блокировка экрана&lt;/h3>
&lt;h4 id="swaylock">&lt;span class="section-num">5.9.1&lt;/span> swaylock&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Общая информация&lt;/p>
&lt;ul>
&lt;li>Официальное приложение для блокировки экрана для &lt;em>Sway&lt;/em> &amp;mdash; &lt;em>swaylock&lt;/em>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/swaywm/swaylock" target="_blank" rel="noopener">https://github.com/swaywm/swaylock&lt;/a>&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge gui-apps/swaylock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В информационной панеле &lt;em>waybar&lt;/em> есть опция для отключения блокировки при простое (например, для демонстрации слайдов).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Блокировка при простое&lt;/p>
&lt;ul>
&lt;li>Заблокировать экран после 300 секунд бездействия.&lt;/li>
&lt;li>Затем выключить дисплей ещё через 300 секунд.&lt;/li>
&lt;li>Включить экран при возобновлении работы.&lt;/li>
&lt;li>Также заблокировать экран перед тем, как компьютер перейдет в спящий режим.&lt;/li>
&lt;li>Конфигурационный файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### ~/.config/sway/config.d/80-lock.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### Idle lock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - Lock your screen after 300 seconds of inactivity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - Then turn off your displays after another 300 seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - Turn your screens back on when resumed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - Also lock your screen before your computer goes to sleep
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exec swayidle -w \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout 300 &amp;#39;swaylock -f -c 000000 -k&amp;#39; \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout 600 &amp;#39;swaymsg &amp;#34;output * dpms off&amp;#34;&amp;#39; \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resume &amp;#39;swaymsg &amp;#34;output * dpms on&amp;#34;&amp;#39; \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> before-sleep &amp;#39;swaylock -f -c 000000 -k&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="3">
&lt;li>
&lt;p>Ручная блокировка&lt;/p>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Ctrl&lt;/code> + &lt;code>l&lt;/code> для немедленной блокировки экрана.&lt;/li>
&lt;li>Через 10 секунд выключить экран.&lt;/li>
&lt;li>Конфигурационный файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### ~/.config/sway/config.d/80-lock.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### Manual lock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - Mod + Ctrl + l to lock the screen immediately
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - In 10 sec also switch the screen off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $lockman exec bash ~/.config/sway/scripts/lockman.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Ctrl+l exec $lockman
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скрипт блокировки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># ~/.config/sway/scripts/lockman.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Times the screen off and puts it to background&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swayidle &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> timeout &lt;span class="m">10&lt;/span> &lt;span class="s1">&amp;#39;swaymsg &amp;#34;output * dpms off&amp;#34;&amp;#39;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> resume &lt;span class="s1">&amp;#39;swaymsg &amp;#34;output * dpms on&amp;#34;&amp;#39;&lt;/span> &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Locks the screen immediately&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swaylock -c &lt;span class="m">550000&lt;/span> -k
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kills last background task so idle timer doesn&amp;#39;t keep running&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">kill&lt;/span> %%
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="swaylock-effects">&lt;span class="section-num">5.9.2&lt;/span> swaylock-effects&lt;/h4>
&lt;ul>
&lt;li>&lt;em>swaylock-effects&lt;/em> является форком &lt;em>swaylock&lt;/em>:
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/mortie/swaylock-effects" target="_blank" rel="noopener">https://github.com/mortie/swaylock-effects&lt;/a>&lt;/li>
&lt;li>Добавляет встроенные скриншоты и эффекты манипулирования изображениями, такие как размытие.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="совместимость-приложений">&lt;span class="section-num">6&lt;/span> Совместимость приложений&lt;/h2>
&lt;h3 id="java">&lt;span class="section-num">6.1&lt;/span> Java&lt;/h3>
&lt;h4 id="серое-окно-приложения-не-меняют-размер-с-помощью-wm-меню-сразу-закрываются">&lt;span class="section-num">6.1.1&lt;/span> Серое окно, приложения не меняют размер с помощью WM, меню сразу закрываются&lt;/h4>
&lt;ul>
&lt;li>В стандартных тулкитах для Java жестко зашит список оконных менеджеров.&lt;/li>
&lt;li>Следует установить переменную окружения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">_JAVA_AWT_WM_NONREPARENTING&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="меню-в-приложениях-плавает-отдельно-им-невозможно-пользоваться">&lt;span class="section-num">6.1.2&lt;/span> Меню в приложениях плавает отдельно, им невозможно пользоваться&lt;/h4>
&lt;ul>
&lt;li>В выпусках Java до версии 9 GTK интерфейс ориентирован на GTK2, в последующих версиях на GTK3.&lt;/li>
&lt;li>GTK LookAndFeel может работать с GTK версий 2, 2.2 и 3.&lt;/li>
&lt;li>По умолчанию используется GTK3.&lt;/li>
&lt;li>Следует явно задать более старую версию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">JAVA_TOOL_OPTIONS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;-Djdk.gtk.version=2.2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Например, в файле &lt;code>~/.profile&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$XDG_SESSION_DESKTOP&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;sway&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$XDG_SESSION_DESKTOP&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;i3&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://github.com/swaywm/sway/issues/595&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">_JAVA_AWT_WM_NONREPARENTING&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">JAVA_TOOL_OPTIONS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;-Djdk.gtk.version=2.2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="приложения-gtk-plus-запускаются-с-задержкой">&lt;span class="section-num">6.2&lt;/span> Приложения GTK+ запускаются с задержкой&lt;/h3>
&lt;ul>
&lt;li>Приложения GTK+ ожидают запуск &lt;code>xdg-desktop-portal&lt;/code> через D-Bus.&lt;/li>
&lt;li>Ожидание прекращается по таймауту потому, что активированная служба D-Bus не знает, к какому &lt;code>WAYLAND_DISPLAY&lt;/code> подключиться.&lt;/li>
&lt;li>Это можно исправить, добавив в файл конфигурации следующее:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exec&lt;/span> systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exec&lt;/span> &lt;span class="nb">hash&lt;/span> dbus-update-activation-environment 2&amp;gt;/dev/null &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="qt-приложения">&lt;span class="section-num">6.3&lt;/span> Qt приложения&lt;/h3>
&lt;ul>
&lt;li>Qt по умолчанию использует бэкэнд X11 вместо собственного бэкэнда Wayland. Чтобы использовать бэкэнд Wayland, установите &lt;code>QT_QPA_PLATFORM=wayland&lt;/code>.&lt;/li>
&lt;li>Qt прорисовает оформление окон на стороне клиента. Чтобы отключить это, установите &lt;code>QT_WAYLAND_DISABLE_WINDOWDECORATION=&amp;quot;1&amp;quot;&lt;/code>.&lt;/li>
&lt;/ul></description></item></channel></rss>