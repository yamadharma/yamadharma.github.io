---
title: "Настройка vpn-клиента Континент АП"
author: ["Dmitry S. Kulyabov"]
date: 2025-02-05T18:32:00+03:00
lastmod: 2026-02-20T19:23:00+03:00
tags: ["security", "sysadmin"]
categories: ["computer-science"]
draft: false
slug: "configuring-continent-ap-vpn-client"
---

Настройка vpn-клиента Континент АП (Ztn Client).

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Общая информация {#общая-информация}

-   Сайт: <https://www.securitycode.ru/products/skzi-kontinent-ap/>
-   ZTN Client есть клиентское приложение, разработанное компанией «Код Безопасности» (<https://www.securitycode.ru/>).
-   Предназначенно для обеспечения безопасности и конфиденциальности корпоративных данных.
-   Основано на технологии нулевого доверия (Zero Trust Network).
-   ZTN Client доступен для различных платформ: Windows, Linux, macOS, ОС Аврора, Android и iOS.


## <span class="section-num">2</span> Особенности ZTN Client {#особенности-ztn-client}

-   Многофакторная аутентификация (MFA)
    -   Использование нескольких методов проверки подлинности для пользователей и устройств, что значительно повышает уровень безопасности доступа к корпоративным ресурсам.
-   Гибкие политики доступа
    -   Возможность создания и управления политиками доступа, которые определяют, кто и какие ресурсы может использовать, обеспечивая детализированный контроль над доступом к корпоративной информации.
-   Мониторинг и аналитика
    -   Встроенные инструменты для отслеживания сетевой активности в режиме реального времени и оперативного реагирования на подозрительные действия.


## <span class="section-num">3</span> Классы защиты {#классы-защиты}

-   ZTN Client поддерживает классы защиты: КС1, КС2 и КС3
    -   КС1 : Базовая защита от обычных угроз.
    -   КС2 : Усиленная защита, включающая защиту от криптоаналитических атак и контроль целостности данных.
    -   КС3 : Максимальная защита с использованием замкнутой программной среды и специализированного ПО.


### <span class="section-num">3.1</span> ZTN Client КС1 {#ztn-client-кс1}

-   Уровень защиты
    -   Обеспечивает защиту информации, требующей обычной степени конфиденциальности и целостности.
-   Функции
    -   Защита от типичных методов атак, используемых большинством злоумышленников.
    -   Подходит для защиты обычных данных, не содержащих государственной или коммерческой тайны, а также персональных данных.


### <span class="section-num">3.2</span> ZTN Client КС2 {#ztn-client-кс2}

-   Уровень защиты
    -   Обеспечивает защиту информации с повышенной степенью конфиденциальности и целостности.
-   Функции
    -   Эффективное противодействие техническим возможностям широкого круга потенциальных атакующих, включая криптоаналитические атаки и скрытые каналы передачи информации.
    -   Встроенная система контроля целостности данных, позволяющая обнаруживать любые изменения или несанкционированный доступ.
    -   Используется для защиты банковской и коммерческой информации, а также государственных и военных секретов.


### <span class="section-num">3.3</span> ZTN Client КС3 {#ztn-client-кс3}

-   Уровень защиты
    -   Предназначен для защиты информации с высокой степенью важности и уровнем угрозы утечки.
-   Функции
    -   Надёжная аутентификация пользователей.
    -   Конфиденциальность информации при её передаче и обработке.
    -   Противодействие несанкционированному доступу к информации.
    -   Создание и контроль замкнутой программной среды с использованием специализированного ПО.


## <span class="section-num">4</span> Установка ZTN Client (Linux) {#установка-ztn-client--linux}


### <span class="section-num">4.1</span> Установка {#установка}

-   Распакуйте программу в корень файловой системы:
    ```shell
    sudo tar --zstd -C / -xpvf ztn-4.5.0-1269.ks1.el.x86_64.tar.zst
    ```


### <span class="section-num">4.2</span> Дополнительные файлы {#дополнительные-файлы}

-   Скрипт сервиса требует наличие функций в `/lib/lsb/init-functions`.
-   Вариант скрипта можно найти на странице: <https://www.linuxfromscratch.org/lfs/view/development/scripts/apds02.html>.
-   Я взял скрипт из пакета sysvinit-utils debian: <http://ftp.de.debian.org/debian/pool/main/s/sysvinit/sysvinit-utils_3.14-4_amd64.deb>
-   Скачайте его: <https://disk.yandex.ru/d/VJl93JTNo-LR2w>
-   Установите:
    ```shell
    sudo mkdir -p /lib/lsb
    sudo cp init-functions /lib/lsb
    ```


### <span class="section-num">4.3</span> Подготовка {#подготовка}

-   Запустите _Continent Terminal Station_:
    ```shell
    sudo systemctl enable --now cts.service
    ```
-   Запустите генератор энтропии:
    ```shell
    /usr/share/cts/bin/cts generate-entropy
    ```

    -   Вводите запрашиваемые символы для генерации случайных чисел.


### <span class="section-num">4.4</span> Контрольные суммы {#контрольные-суммы}

-   Это не  обязательно.
-   Проверьте контрольные суммы:
    ```shell
    sudo -i /usr/share/cts/bin/ctsic -c -p
    ```
-   Если возникли проблемы, можно сделать следующее.
-   Повторное создание списка файлов, подлежащих контролю (содержится в файле `/etc/cts/filelist`):
    ```shell
    sudo /usr/share/cts/bin/autoctsic
    ```
-   Пересчитайте контрольные суммы:
    ```shell
    sudo /usr/share/cts/bin/ctsic compute
    ```


### <span class="section-num">4.5</span> Регистрация {#регистрация}

-   Запустите для регистрации (графическая программа):
    ```shell
    /usr/share/cts/bin/ctsregg
    ```
-   Выберите _Онлайн-регистрация_ -&gt; _Физическое лицо_.
-   Заполните все поля, отмеченные звёздочками.
-   В поле Электронная почта следует указать свою корпоративную почту в формате `family-ab@rudn.ru`.


### <span class="section-num">4.6</span> Настройка {#настройка}

-   Отключаем проверку сертификатов по CRL:
    ```shell
    sudo -i /usr/share/cts/bin/cts edit settings general -cert-check-on-crl no
    ```


### <span class="section-num">4.7</span> Профиль {#профиль}

-   Если у вас остался старый профиль, удалите его:
    ```shell
    /usr/share/cts/bin/cts delete profile -name Cluster-KFW-1
    ```
-   Импортируйте профиль:
    ```shell
    /usr/share/cts/bin/cts import profile -path profile.ts4 -file-pass WWzpc_1QcQ
    ```

    -   На запрос _Введите имя профиля_ введите `Cluster-KFW-1`.
    -   Параметр `-path` должен указывать на файл профиля.


### <span class="section-num">4.8</span> Вход по имени и паролю (не работает) {#вход-по-имени-и-паролю--не-работает}

-   На данный момент это не работает.
-   Используйте сертификат.
-   Переключите профиль на режим входа по имени и паролю:
    ```shell
    /usr/share/cts/bin/cts edit profile -name Cluster-KFW-1 -auth login -login family-ab@rudn.ru -default yes
    ```


### <span class="section-num">4.9</span> Вход по сертификату {#вход-по-сертификату}


#### <span class="section-num">4.9.1</span> Запрос сертификата {#запрос-сертификата}

-   Запросите сертификат:
    -   консольный вариант:
        ```shell
        /usr/share/cts/bin/cts request
        ```
    -   графический вариант:
        ```shell
        /usr/share/cts/bin/ctsg
        ```
-   Заполните поля для типа _Физическое лицо_.
-   Почту укажите свою рабочую.
-   ИНН: введите 12 единиц.
-   СНИЛС: введите 11 единиц.
-   DNS имя: не надо.
-   URI ссылка: не надо.
-   IP адрес: не надо.
-   Имя файла как в почте: family-ab
-   Файл family-ab.req будет в домашнем каталоге.


#### <span class="section-num">4.9.2</span> Отправка запроса {#отправка-запроса}

-   Созданный файл необходимо направить:
    -   Вариант 1. Вложением с Вашей корпоративной почты по адресу support@rudn.ru, указав тему письма: «Запрос на сертификат VPN Континент АП»
    -   Вариант 2. Оставив обращение через раздел «Техническая поддержка» в Личном кабинете РУДН. Категория обращения «Не работает интернет, сетевые ресурсы» (IT-инфраструктура), суть проблемы «Запрос на сертификат VPN Континент АП» к обращению необходимо приложить файл запроса, добавить краткое описание и отправить обращение.
-   Вы получите по почте сертификат `Фамилия Имя Отчество.cer`.


#### <span class="section-num">4.9.3</span> Импорт сертификата {#импорт-сертификата}

-   Импортируйте полученный сертификат:
    ```shell
    /usr/share/cts/bin/cts add cert -type user -path 'Фамилия Имя Отчество.cer'
    ```
-   То же самое можно сделать из графического интерфейса:
    ```shell
    /usr/share/cts/bin/ctsg
    ```


#### <span class="section-num">4.9.4</span> Активация входа по сертификату {#активация-входа-по-сертификату}

-   На данный момент это не работает.
-   Переключите профиль на режим входа по имени и паролю:
    ```shell
    /usr/share/cts/bin/cts edit profile -name Cluster-KFW-1 -auth cert -select-cert -default yes
    ```


### <span class="section-num">4.10</span> Просмотр конфигурации {#просмотр-конфигурации}

-   Посмотрите параметры профиля:
    ```shell
    /usr/share/cts/bin/cts show profile
    ```
-   Посмотреть настройки соединения:
    ```shell
    /usr/share/cts/bin/cts show config
    ```
-   Посмотреть параметры конфигурации:
    ```shell
    /usr/share/cts/bin/cts show settings
    ```


### <span class="section-num">4.11</span> Подключение {#подключение}

-   Подключитесь к vpn:
    ```shell
    cts connect auto
    ```
-   Можно подключиться с указанием конкретного профиля:
    ```shell
    cts connect -profile Cluster-KFW-1 -store-password
    ```


## <span class="section-num">5</span> Установка ZTN Client (Windows) {#установка-ztn-client--windows}


### <span class="section-num">5.1</span> Пререквизиты {#пререквизиты}

-   Возможно, следует установить Visual C++ Redistributable Packages for Visual Studio 2013:
    ```shell
    choco install vcredist2013 -y
    ```
-   Делайте это только в том случае, когда возникнут проблемы при установке самой программы.


### <span class="section-num">5.2</span> Установка {#установка}

-   Установите приложение.
-   Перегрузите машину.


### <span class="section-num">5.3</span> После установки {#после-установки}

-   Наберите энтропию.
-   Зарегистрируйтесь.
-   Импортируйте профиль.
    -   Пароль: WWzpc_1QcQ


### <span class="section-num">5.4</span> Отключение проверки CRL {#отключение-проверки-crl}

-   Остановите запущенную версию программы.
-   Запустите с правами администратора.
-   Отключите проверку CRL в настройках (Параметры → Основные).
-   Остановите запущенную версию программы.
-   Запустите под пользователем.


### <span class="section-num">5.5</span> Сертификат {#сертификат}

-   Получите сертификат.
-   Импортируйте сертификат.
