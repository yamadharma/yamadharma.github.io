<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Sysadmin | Д. С. Кулябов</title><link>https://yamadharma.github.io/ru/tag/sysadmin/</link><atom:link href="https://yamadharma.github.io/ru/tag/sysadmin/index.xml" rel="self" type="application/rss+xml"/><description>Sysadmin</description><generator>Hugo Blox Builder (https://hugoblox.com)</generator><language>ru-ru</language><copyright>© 2024 Dmitry S. Kulyabov</copyright><lastBuildDate>Sat, 02 Nov 2024 19:06:00 +0300</lastBuildDate><image><url>https://yamadharma.github.io/media/icon_hu15752663207405015554.png</url><title>Sysadmin</title><link>https://yamadharma.github.io/ru/tag/sysadmin/</link></image><item><title>Администрирование сетевых подсистем</title><link>https://yamadharma.github.io/ru/course/net-os-admin/</link><pubDate>Thu, 19 Oct 2023 17:19:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/course/net-os-admin/</guid><description>&lt;p>Курс Администрирование сетевых подсистем.&lt;/p>
&lt;ul class="list-unstyled">
&lt;li>
&lt;h5>&lt;a href="https://yamadharma.github.io/ru/course/net-os-admin/lab/">Лабораторные работы&lt;/a>&lt;/h5>
&lt;p>Курс Администрирование сетевых подсистем. Лабораторные работы.
&lt;/p>
&lt;/li>
&lt;li>
&lt;h5>&lt;a href="https://yamadharma.github.io/ru/course/net-os-admin/method/">Методические замечания&lt;/a>&lt;/h5>
&lt;p>Курс Администрирование сетевых подсистем. Методические замечания.
&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Лабораторные работы</title><link>https://yamadharma.github.io/ru/course/net-os-admin/lab/</link><pubDate>Thu, 19 Oct 2023 17:39:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/course/net-os-admin/lab/</guid><description>&lt;p>Курс Администрирование сетевых подсистем. Лабораторные работы.&lt;/p>
&lt;ul class="list-unstyled">
&lt;li>
&lt;h5>&lt;a href="https://yamadharma.github.io/ru/course/net-os-admin/lab/2023-10-23-net-os-admin-lab-install-automation/">Автоматизация установки операционных систем&lt;/a>&lt;/h5>
&lt;p>Автоматизация установки операционных систем.
&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Автоматизация установки операционных систем</title><link>https://yamadharma.github.io/ru/course/net-os-admin/lab/2023-10-23-net-os-admin-lab-install-automation/</link><pubDate>Mon, 23 Oct 2023 13:04:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/course/net-os-admin/lab/2023-10-23-net-os-admin-lab-install-automation/</guid><description>&lt;p>Автоматизация установки операционных систем.&lt;/p>
&lt;h2 id="видео">&lt;span class="section-num">1&lt;/span> Видео&lt;/h2>
&lt;h3 id="packer-создание-box-файла">&lt;span class="section-num">1.1&lt;/span> Packer: создание box файла&lt;/h3>
&lt;nav>
&lt;div class="nav nav-tabs" id="nav-tab" role="tablist">
&lt;a class="nav-item nav-link active "
id="nav-edafbc" data-toggle="tab" href="#edafbc"
role="tab" aria-controls="nav-home" aria-selected="true">RuTube&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-dfebac" data-toggle="tab" href="#dfebac"
role="tab" aria-controls="nav-home" aria-selected="true">VKVideo&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-acfebd" data-toggle="tab" href="#acfebd"
role="tab" aria-controls="nav-home" aria-selected="true">Youtube&lt;/a>
&lt;/div>
&lt;/nav>
&lt;div class="tab-content" id="nav-tab-content">
&lt;div class="tab-pane fade show active " id="edafbc" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe class="rutube-player" type="text/html"
width="720" height="405"
src="https://rutube.ru/play/embed/5ca02ddb70b62eb6ec824903ab2bff97"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0">
&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="dfebac" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe
src="https://vk.com/video_ext.php?oid=606414976&amp;id=456239571&amp;hd=2"
width="720" height="405" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" frameborder="0" allowfullscreen>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="acfebd" role="tabpanel" aria-labelledby="nav-1">
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/B1n2nWrXQ2M?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="vagrant-запуск-виртуальной-машины">&lt;span class="section-num">1.2&lt;/span> Vagrant: запуск виртуальной машины&lt;/h3>
&lt;nav>
&lt;div class="nav nav-tabs" id="nav-tab" role="tablist">
&lt;a class="nav-item nav-link active "
id="nav-adfecb" data-toggle="tab" href="#adfecb"
role="tab" aria-controls="nav-home" aria-selected="true">RuTube&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-cdebaf" data-toggle="tab" href="#cdebaf"
role="tab" aria-controls="nav-home" aria-selected="true">VKVideo&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-dacfeb" data-toggle="tab" href="#dacfeb"
role="tab" aria-controls="nav-home" aria-selected="true">Youtube&lt;/a>
&lt;/div>
&lt;/nav>
&lt;div class="tab-content" id="nav-tab-content">
&lt;div class="tab-pane fade show active " id="adfecb" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe class="rutube-player" type="text/html"
width="720" height="405"
src="https://rutube.ru/play/embed/62fc8bdec2792bbd1dc146519da69689"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0">
&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="cdebaf" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe
src="https://vk.com/video_ext.php?oid=606414976&amp;id=456239572&amp;hd=2"
width="720" height="405" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" frameborder="0" allowfullscreen>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="dacfeb" role="tabpanel" aria-labelledby="nav-1">
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/7VbuL3jPhKw?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="packer-и-vagrant-под-windows">&lt;span class="section-num">1.3&lt;/span> Packer и Vagrant под Windows&lt;/h3>
&lt;nav>
&lt;div class="nav nav-tabs" id="nav-tab" role="tablist">
&lt;a class="nav-item nav-link active "
id="nav-bfadec" data-toggle="tab" href="#bfadec"
role="tab" aria-controls="nav-home" aria-selected="true">RuTube&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-daebfc" data-toggle="tab" href="#daebfc"
role="tab" aria-controls="nav-home" aria-selected="true">Youtube&lt;/a>
&lt;/div>
&lt;/nav>
&lt;div class="tab-content" id="nav-tab-content">
&lt;div class="tab-pane fade show active " id="bfadec" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe class="rutube-player" type="text/html"
width="720" height="405"
src="https://rutube.ru/play/embed/bd71894a8c9a6c616da23276939247df"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0">
&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="daebfc" role="tabpanel" aria-labelledby="nav-1">
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/u58DRlSm4YI?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="vagrant-provisioning">&lt;span class="section-num">1.4&lt;/span> Vagrant: provisioning&lt;/h3>
&lt;nav>
&lt;div class="nav nav-tabs" id="nav-tab" role="tablist">
&lt;a class="nav-item nav-link active "
id="nav-bcadef" data-toggle="tab" href="#bcadef"
role="tab" aria-controls="nav-home" aria-selected="true">RuTube&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-fbdeac" data-toggle="tab" href="#fbdeac"
role="tab" aria-controls="nav-home" aria-selected="true">Youtube&lt;/a>
&lt;/div>
&lt;/nav>
&lt;div class="tab-content" id="nav-tab-content">
&lt;div class="tab-pane fade show active " id="bcadef" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe class="rutube-player" type="text/html"
width="720" height="405"
src="https://rutube.ru/play/embed/55c2d2498f5ffda4bf79657237313417"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0">
&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="fbdeac" role="tabpanel" aria-labelledby="nav-1">
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/Z9zvD_Uzq6Q?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;/div></description></item><item><title>Методические замечания</title><link>https://yamadharma.github.io/ru/course/net-os-admin/method/</link><pubDate>Thu, 19 Oct 2023 17:44:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/course/net-os-admin/method/</guid><description>&lt;p>Курс Администрирование сетевых подсистем. Методические замечания.&lt;/p>
&lt;ul class="list-unstyled">
&lt;li>
&lt;h5>&lt;a href="https://yamadharma.github.io/ru/course/net-os-admin/method/2023-10-19-net-os-admin-workspace-laboratory-work/">Рабочее пространство для лабораторной работы&lt;/a>&lt;/h5>
&lt;p>При выполнении лабораторной работы следует придерживаться структуры рабочего пространства.
&lt;/p>
&lt;/li>
&lt;li>
&lt;h5>&lt;a href="https://yamadharma.github.io/ru/course/net-os-admin/method/2024-08-20-net-os-admin-laboratory-workflow/">Процесс выполнения лабораторных работ&lt;/a>&lt;/h5>
&lt;p>Процесс выполнения лабораторных работ.
&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Рабочее пространство для лабораторной работы</title><link>https://yamadharma.github.io/ru/course/net-os-admin/method/2023-10-19-net-os-admin-workspace-laboratory-work/</link><pubDate>Thu, 19 Oct 2023 17:57:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/course/net-os-admin/method/2023-10-19-net-os-admin-workspace-laboratory-work/</guid><description>&lt;p>При выполнении лабораторной работы следует придерживаться структуры рабочего пространства.&lt;/p>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Описание построено на рекомендациях &lt;a href="https://yamadharma.github.io/ru/post/2021/01/16/workspace-laboratory-work/">Рабочее пространство для лабораторной работы&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/yamadharma/course-directory-student-template" target="_blank" rel="noopener">https://github.com/yamadharma/course-directory-student-template&lt;/a>.&lt;/li>
&lt;li>Репозиторий с примерами кода: &lt;a href="https://github.com/yamadharma/net-os-admin-lab-code" target="_blank" rel="noopener">https://github.com/yamadharma/net-os-admin-lab-code&lt;/a>&lt;/li>
&lt;li>Аббревиатура курса: &lt;code>net-os-admin&lt;/code>&lt;/li>
&lt;li>Учебный год: 2024&amp;ndash;2025&lt;/li>
&lt;/ul>
&lt;h2 id="создание-репозитория-для-курса-администрирование-сетевых-подсистем">&lt;span class="section-num">2&lt;/span> Создание репозитория для курса Администрирование сетевых подсистем&lt;/h2>
&lt;ul>
&lt;li>Создадим репозиторий с помощью утилит командной строки gh (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/04/github-command-line-utilities/">github: утилиты командной строки&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p ~/work/study/2024-2025/&lt;span class="s2">&amp;#34;Администрирование сетевых подсистем&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/work/study/2024-2025/&lt;span class="s2">&amp;#34;Администрирование сетевых подсистем&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gh repo create study_2024-2025_net-os-admin --template&lt;span class="o">=&lt;/span>yamadharma/course-directory-student-template --public
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone --recursive git@github.com:&amp;lt;owner&amp;gt;/study_2024-2025_net-os-admin.git net-os-admin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-каталога-курса">&lt;span class="section-num">3&lt;/span> Настройка каталога курса&lt;/h2>
&lt;ul>
&lt;li>При создании структуры название курса берётся из следующих мест:
&lt;ul>
&lt;li>название курса находится в файле &lt;code>COURSE&lt;/code>;&lt;/li>
&lt;li>каталог курса называется как аббревиатура курса.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Перейдите в каталог курса:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/work/study/2024-2025/&lt;span class="s2">&amp;#34;Администрирование сетевых подсистем&amp;#34;&lt;/span>/net-os-admin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалите лишние файлы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm package.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте необходимые каталоги:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">make prepare
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отправьте файлы на сервер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -am &lt;span class="s1">&amp;#39;feat(main): make course structure&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="видео">&lt;span class="section-num">4&lt;/span> Видео&lt;/h2>
&lt;nav>
&lt;div class="nav nav-tabs" id="nav-tab" role="tablist">
&lt;a class="nav-item nav-link active "
id="nav-bcdeaf" data-toggle="tab" href="#bcdeaf"
role="tab" aria-controls="nav-home" aria-selected="true">RuTube&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-ebdacf" data-toggle="tab" href="#ebdacf"
role="tab" aria-controls="nav-home" aria-selected="true">VKVideo&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-debcfa" data-toggle="tab" href="#debcfa"
role="tab" aria-controls="nav-home" aria-selected="true">Youtube&lt;/a>
&lt;/div>
&lt;/nav>
&lt;div class="tab-content" id="nav-tab-content">
&lt;div class="tab-pane fade show active " id="bcdeaf" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe class="rutube-player" type="text/html"
width="720" height="405"
src="https://rutube.ru/play/embed/20ca1a0b52e1e900445be6cab5c5a2ac"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0">
&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="ebdacf" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe
src="https://vk.com/video_ext.php?oid=606414976&amp;id=456239573&amp;hd=2"
width="720" height="405" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" frameborder="0" allowfullscreen>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="debcfa" role="tabpanel" aria-labelledby="nav-1">
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/CUSA_V8dIrE?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;/div></description></item><item><title>Процесс выполнения лабораторных работ</title><link>https://yamadharma.github.io/ru/course/net-os-admin/method/2024-08-20-net-os-admin-laboratory-workflow/</link><pubDate>Tue, 20 Aug 2024 12:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/course/net-os-admin/method/2024-08-20-net-os-admin-laboratory-workflow/</guid><description>&lt;p>Процесс выполнения лабораторных работ.&lt;/p>
&lt;h2 id="основные-принципы">&lt;span class="section-num">1&lt;/span> Основные принципы&lt;/h2>
&lt;ul>
&lt;li>В процессе выполнения лабораторных работ студенты реализуют технологию &lt;em>инфраструктура как код&lt;/em> (англ. Infrastructure-as-Code; Iac).&lt;/li>
&lt;/ul>
&lt;h2 id="подготовка-стенда">&lt;span class="section-num">2&lt;/span> Подготовка стенда&lt;/h2>
&lt;ul>
&lt;li>Подготовка стенда заключается в создании файла с развёрнутым образом виртуальной машины (box-файл).&lt;/li>
&lt;li>Этот файл импортируется в систему управления виртуальными машинами.&lt;/li>
&lt;li>После этого он не требуется.&lt;/li>
&lt;li>Рекомендуется сохранить полученный образ для непредвиденных случаев.&lt;/li>
&lt;/ul>
&lt;h2 id="процесс-выполнения-работы">&lt;span class="section-num">3&lt;/span> Процесс выполнения работы&lt;/h2>
&lt;ul>
&lt;li>Каждая лабораторная работа направлена на настройку определённого сетевого сервиса.&lt;/li>
&lt;li>Студент создаёт виртуальные машины и загружает операционную систему.&lt;/li>
&lt;li>Во время настройки студент записывает выполняемые операции в виде кода.&lt;/li>
&lt;li>Созданный код помещается в отчёт по лабораторной работе.&lt;/li>
&lt;li>После создания кода студент уничтожает существующие виртуальные машины и пересоздаёт их на основе созданного кода.&lt;/li>
&lt;/ul></description></item><item><title>Gentoo. Создание ebuild для Rust</title><link>https://yamadharma.github.io/ru/post/2024/11/02/gentoo-ebuild-rust/</link><pubDate>Sat, 02 Nov 2024 19:06:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/11/02/gentoo-ebuild-rust/</guid><description>&lt;p>Gentoo. Создание ebuild для программ на Rust.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#pycargoebuild">&lt;span class="section-num">1&lt;/span> pycargoebuild&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">1.2&lt;/span> Использование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="pycargoebuild">&lt;span class="section-num">1&lt;/span> pycargoebuild&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/projg2/pycargoebuild/" target="_blank" rel="noopener">https://github.com/projg2/pycargoebuild/&lt;/a>&lt;/li>
&lt;li>Генератор ebuild с использованием инфраструктуры Cargo.&lt;/li>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-portage/pycargoebuild
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="использование">&lt;span class="section-num">1.2&lt;/span> Использование&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Создать новый ebuild:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pycargoebuild &amp;lt;package-directory&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;em>package-directory&lt;/em> : каталог, содержащий &lt;code>Cargo.toml&lt;/code>.&lt;/li>
&lt;li>Создаётся файл ebuild в текущем каталоге.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Обновить существующий ebuild:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pycargoebuild -i &amp;lt;current-file&amp;gt;.ebuild &amp;lt;package-directory&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Установочный образ Windows</title><link>https://yamadharma.github.io/ru/post/2024/10/22/windows-installation-image/</link><pubDate>Tue, 22 Oct 2024 14:08:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/10/22/windows-installation-image/</guid><description>&lt;p>Установочный образ Windows.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общее-описание">&lt;span class="section-num">1&lt;/span> Общее описание&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#sysprep">&lt;span class="section-num">1.1&lt;/span> Sysprep&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#создание-образа">&lt;span class="section-num">2&lt;/span> Создание образа&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#порядок-действий">&lt;span class="section-num">2.1&lt;/span> Порядок действий&lt;/a>&lt;/li>
&lt;li>&lt;a href="#развёртывание-чистой-windows-на-эталонном-компьютере">&lt;span class="section-num">2.2&lt;/span> Развёртывание чистой Windows на эталонном компьютере&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-необходимых-приложений">&lt;span class="section-num">2.3&lt;/span> Установка необходимых приложений&lt;/a>&lt;/li>
&lt;li>&lt;a href="#очистка-windows-после-настройки">&lt;span class="section-num">2.4&lt;/span> Очистка Windows после настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подготовка-к-развёртыванию">&lt;span class="section-num">2.5&lt;/span> Подготовка к развёртыванию&lt;/a>&lt;/li>
&lt;li>&lt;a href="#захват-настроенного-образа-windows-с-помощью-dism">&lt;span class="section-num">2.6&lt;/span> Захват настроенного образа Windows с помощью DISM&lt;/a>&lt;/li>
&lt;li>&lt;a href="#замена-оригинального-образа-windows--install-dot-wim--на-носителе">&lt;span class="section-num">2.7&lt;/span> Замена оригинального образа Windows (Install.wim) на носителе&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общее-описание">&lt;span class="section-num">1&lt;/span> Общее описание&lt;/h2>
&lt;ul>
&lt;li>Можно создать образ Windows с предустановленным программным обеспечением и устанавливать его на хосты.&lt;/li>
&lt;li>Недостаток такого подхода в том, что для обновления любого приложения необходимо пересобрать образ заново.&lt;/li>
&lt;/ul>
&lt;h3 id="sysprep">&lt;span class="section-num">1.1&lt;/span> Sysprep&lt;/h3>
&lt;ul>
&lt;li>Утилита: &lt;code>C:\Windows\System32\Sysprep\sysprep.exe&lt;/code>&lt;/li>
&lt;li>Штатный инструмент развёртывания Windows.&lt;/li>
&lt;li>Действия sysprep:
&lt;ul>
&lt;li>удаляются имя хоста, SID, GUID, идентификаторы Active Directory;&lt;/li>
&lt;li>машина выводится из домена (для последующего успешного добавления в домен с новым именем);&lt;/li>
&lt;li>удаляются plug-and-play драйвера, что уменьшает риск возникновения проблем с совместимостью;&lt;/li>
&lt;li>опционально удаляются логи;&lt;/li>
&lt;li>удаляются точки восстановления;&lt;/li>
&lt;li>удаляется профиль локального администратора и этот аккаунт отключается;&lt;/li>
&lt;li>обеспечивается загрузка целевой машины в режим аудита, позволяющий устанавливать дополнительные приложения и драйверы;&lt;/li>
&lt;li>обеспечивается запуск mini-setup (oobe) при первом запуске для смены имени машины и другой дополнительной конфигурации;&lt;/li>
&lt;li>сбрасывается период активации Windows (сброс возможен до 3 раз).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="создание-образа">&lt;span class="section-num">2&lt;/span> Создание образа&lt;/h2>
&lt;h3 id="порядок-действий">&lt;span class="section-num">2.1&lt;/span> Порядок действий&lt;/h3>
&lt;ul>
&lt;li>Развёртывание чистой Windows на эталонном компьютере (виртуальной машине).&lt;/li>
&lt;li>Вход в режим аудита, установка необходимых приложений, настройка окружения.&lt;/li>
&lt;li>Очистка Windows после настройки.&lt;/li>
&lt;li>Загрузка в среде WinPE и захват WIM образа Windows с помощью DISM.&lt;/li>
&lt;li>Замена оригинального &lt;code>install.wim&lt;/code> на установочном ISO образе.&lt;/li>
&lt;/ul>
&lt;h3 id="развёртывание-чистой-windows-на-эталонном-компьютере">&lt;span class="section-num">2.2&lt;/span> Развёртывание чистой Windows на эталонном компьютере&lt;/h3>
&lt;ul>
&lt;li>Выполните ручную установку Windows.&lt;/li>
&lt;li>Не обязательно устанавливать систему полностью, достаточно остановиться на этапе OOBE (когда вам предлагают выбрать региональные настройки и создать учётную запись).
&lt;ul>
&lt;li>На этом этапе нажмите &lt;code>Ctrl + Shift + F3&lt;/code>.&lt;/li>
&lt;li>Это переведёт компьютер в режим аудита (Audit Mode), в котором будет выполнен автоматический вход под встроенной учётной записью &lt;code>Administrator&lt;/code>.&lt;/li>
&lt;li>Это эквивалентно команде:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">%windir%&lt;span class="se">\s&lt;/span>ystem32&lt;span class="se">\s&lt;/span>ysprep&lt;span class="se">\s&lt;/span>ysprep.exe /audit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После появления рабочего стола, сверните окно утилиты &lt;code>sysprep&lt;/code>, не закрывая его.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="установка-необходимых-приложений">&lt;span class="section-num">2.3&lt;/span> Установка необходимых приложений&lt;/h3>
&lt;ul>
&lt;li>Можно приступить к установке программ, обновлений, настройке нужных параметров Windows.&lt;/li>
&lt;li>Можно настроить ярлыки на рабочем столе, плитки в меню Start, фоновые рисунки, заставки, цветовые схемы и прочее.&lt;/li>
&lt;li>Можно настроить параметры локальной групповой политики с помощью редактора &lt;code>gpedit.msc&lt;/code>.&lt;/li>
&lt;li>Чтобы применить настройки текущего пользователю к шаблонному пользователю &lt;code>Default&lt;/code>, создайте файл ответов &lt;code>unattend.xml&lt;/code> в каталоге &lt;code>C:\Windows\System32\Sysprep&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;unattend&lt;/span> &lt;span class="na">xmlns=&lt;/span>&lt;span class="s">&amp;#34;urn:schemas-microsoft-com:unattend&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;settings&lt;/span> &lt;span class="na">pass=&lt;/span>&lt;span class="s">&amp;#34;specialize&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;component&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;Microsoft-Windows-Shell-Setup&amp;#34;&lt;/span> &lt;span class="na">processorArchitecture=&lt;/span>&lt;span class="s">&amp;#34;amd64&amp;#34;&lt;/span> &lt;span class="na">publicKeyToken=&lt;/span>&lt;span class="s">&amp;#34;31bf3856ad364e35&amp;#34;&lt;/span> &lt;span class="na">language=&lt;/span>&lt;span class="s">&amp;#34;neutral&amp;#34;&lt;/span> &lt;span class="na">versionScope=&lt;/span>&lt;span class="s">&amp;#34;nonSxS&amp;#34;&lt;/span> &lt;span class="na">xmlns:wcm=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.microsoft.com/WMIConfig/2002/State&amp;#34;&lt;/span> &lt;span class="na">xmlns:xsi=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;CopyProfile&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/CopyProfile&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/component&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/settings&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/unattend&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="очистка-windows-после-настройки">&lt;span class="section-num">2.4&lt;/span> Очистка Windows после настройки&lt;/h3>
&lt;ul>
&lt;li>Удалите имеющиеся теневые копии и точки восстановления:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vssadmin delete shadows /All /Quiet
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Очистите неиспользуемые файлы компонентов и обновлений в папке WinSxS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Dism.exe /Online /Cleanup-Image /StartComponentCleanup /ResetBase
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалите загруженные файлы обновлений Windows:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">del %windir%&lt;span class="se">\S&lt;/span>oftwareDistribution&lt;span class="se">\D&lt;/span>ownload&lt;span class="se">\*&lt;/span>.* /f /s /q
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выполните очистку диска с помощью утилиты &lt;code>cleanmgr&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Cleanmgr /sagerun:1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Очистите логи Windows:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> /F &lt;span class="s2">&amp;#34;tokens=*&amp;#34;&lt;/span> %1 in &lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;wevtutil.exe el&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span> DO wevtutil.exe cl &lt;span class="s2">&amp;#34;%1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Очистите корзину:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Clear-RecycleBin -Force Clear-RecycleBin -Force
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="подготовка-к-развёртыванию">&lt;span class="section-num">2.5&lt;/span> Подготовка к развёртыванию&lt;/h3>
&lt;ul>
&lt;li>Разверните окно &lt;code>sysprep&lt;/code> и выберите опции:
&lt;ul>
&lt;li>Enter System Out-of-Box Experience (OOBE)&lt;/li>
&lt;li>Generalize&lt;/li>
&lt;li>Shutdown&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Это эквивалентно команде:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">%windir%&lt;span class="se">\s&lt;/span>ystem32&lt;span class="se">\s&lt;/span>ysprep&lt;span class="se">\s&lt;/span>ysprep.exe /generalize /oobe /shutdown
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="захват-настроенного-образа-windows-с-помощью-dism">&lt;span class="section-num">2.6&lt;/span> Захват настроенного образа Windows с помощью DISM&lt;/h3>
&lt;ul>
&lt;li>Нужно выполнить офлайн захват образа установленной Windows в WIM файл и поместить его на отдельный диск.&lt;/li>
&lt;li>Загрузите компьютер с эталонной версией Windows с загрузочного диска в среде WinPE (WinRE).&lt;/li>
&lt;li>Можно загрузиться с установочного диска с Windows и на этапе начала установки нажать Shift+F10, чтобы открыть командную строку.&lt;/li>
&lt;li>Нужно идентифицировать буквы диска, которые назначены разделу с Windows и чистому разделу, куда будет скопирован WIM файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">diskpart
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">list vol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Пусть диску с Windows присвоена бука &lt;code>c:&lt;/code>, а пустому диску буква &lt;code>d:&lt;/code>.&lt;/li>
&lt;li>Чтобы выполнить захват офлайн образа Windows на диске &lt;code>c:&lt;/code> и поместить полученный WIM образ на &lt;code>d:&lt;/code>, выполните команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dism /capture-image /imagefile:D:&lt;span class="se">\i&lt;/span>nstall.wim /capturedir:C:&lt;span class="se">\ &lt;/span>/ScratchDir:D:&lt;span class="se">\ &lt;/span>/name:&lt;span class="s2">&amp;#34;Win10Image&amp;#34;&lt;/span> /compress:maximum /checkintegrity /verify /bootable
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="замена-оригинального-образа-windows--install-dot-wim--на-носителе">&lt;span class="section-num">2.7&lt;/span> Замена оригинального образа Windows (Install.wim) на носителе&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>После получения образа Windows можно заменить файл с оригинальным установочным образом &lt;code>install.wim&lt;/code> (или &lt;code>install.esd&lt;/code>) в каталоге &lt;code>\sources&lt;/code> на установочном носителе.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Если вы используете &lt;code>FAT32&lt;/code>, то вы не сможете разместить файл больше 4 Гб на этой файловой системе. В этом случае большой WIM файл нужно разбить на несколько файлов &lt;code>SWM&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Dism /Split-Image /ImageFile:D:&lt;span class="se">\s&lt;/span>ources&lt;span class="se">\i&lt;/span>nstall.wim /SWMFile:c:&lt;span class="se">\t&lt;/span>mp&lt;span class="se">\i&lt;/span>nstall.swm /FileSize:3500
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В данном случае DISM создаст файлы вида &lt;code>install.swm&lt;/code>, &lt;code>install2.swm&lt;/code> и т. д.&lt;/li>
&lt;li>Их нужно скопировать в папку &lt;code>\sources&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>XDG. Каталоги</title><link>https://yamadharma.github.io/ru/post/2024/10/19/xdg-directories/</link><pubDate>Sat, 19 Oct 2024 18:21:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/10/19/xdg-directories/</guid><description>&lt;p>XDG. Каталоги&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#каталоги-xdg">&lt;span class="section-num">2&lt;/span> Каталоги XDG&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#каталоги-xdg-и-переменные-окружения">&lt;span class="section-num">2.1&lt;/span> Каталоги XDG и переменные окружения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#домашние-каталоги-пользователя-и-переменные-окружения">&lt;span class="section-num">2.2&lt;/span> Домашние каталоги пользователя и переменные окружения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#другие-операционные-системы">&lt;span class="section-num">2.3&lt;/span> Другие операционные системы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#программные-реализации">&lt;span class="section-num">3&lt;/span> Программные реализации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#xdg">&lt;span class="section-num">3.1&lt;/span> xdg&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Спецификация: &lt;a href="https://specifications.freedesktop.org/basedir-spec/" target="_blank" rel="noopener">https://specifications.freedesktop.org/basedir-spec/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="каталоги-xdg">&lt;span class="section-num">2&lt;/span> Каталоги XDG&lt;/h2>
&lt;h3 id="каталоги-xdg-и-переменные-окружения">&lt;span class="section-num">2.1&lt;/span> Каталоги XDG и переменные окружения&lt;/h3>
&lt;ul>
&lt;li>&lt;code>$XDG_DATA_DIRS&lt;/code> : &lt;code>/usr/local/share/:/usr/share/&lt;/code>, упорядоченный по предпочтениям набор каталогов для поиска файлов данных.&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_DIRS&lt;/code> : &lt;code>/etc/xdg&lt;/code>, упорядоченный по предпочтениям набор каталогов для поиска файлов конфигурации.&lt;/li>
&lt;/ul>
&lt;h3 id="домашние-каталоги-пользователя-и-переменные-окружения">&lt;span class="section-num">2.2&lt;/span> Домашние каталоги пользователя и переменные окружения&lt;/h3>
&lt;ul>
&lt;li>&lt;code>XDG_DATA_HOME&lt;/code> : &lt;code>$HOME/.local/share&lt;/code>, пользовательские файлы данных.&lt;/li>
&lt;li>&lt;code>XDG_CONFIG_HOME&lt;/code> : &lt;code>$HOME/.config&lt;/code>, пользовательские файлы конфигурации.&lt;/li>
&lt;li>&lt;code>XDG_STATE_HOME&lt;/code> : &lt;code>$HOME/.local/state&lt;/code>, данные о состоянии, которые должны сохраняться между перезапусками (приложения), но не являются важными или переносимыми.&lt;/li>
&lt;li>&lt;code>XDG_CACHE_HOME&lt;/code> : &lt;code>$HOME/.cache&lt;/code>, файлы второстепенных данных, специфичные для пользователя.&lt;/li>
&lt;li>&lt;code>XDG_RUNTIME_HOME&lt;/code> : &lt;code>/run/user/$UID&lt;/code>, несущественные для пользователя файлы времени выполнения и другие файловые объекты (такие как сокеты, именованные каналы и т. д.).&lt;/li>
&lt;li>&lt;code>$HOME/.local/bin&lt;/code>, пользовательские исполняемые файлы.&lt;/li>
&lt;/ul>
&lt;h3 id="другие-операционные-системы">&lt;span class="section-num">2.3&lt;/span> Другие операционные системы&lt;/h3>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Каталоги XDG для разных операционных систем
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Переменная окружения XDG&lt;/th>
&lt;th>Linux (и BSD)&lt;/th>
&lt;th>Mac&lt;/th>
&lt;th>Windows&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>XDG_DATA_DIRS&lt;/code>&lt;/td>
&lt;td>&lt;code>/usr/local/share&lt;/code>, &lt;code>/usr/share&lt;/code>&lt;/td>
&lt;td>&lt;code>/Library/Application Support&lt;/code>&lt;/td>
&lt;td>&lt;code>%PROGRAMDATA%&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>XDG_DATA_HOME&lt;/code>&lt;/td>
&lt;td>&lt;code>~/.local/share&lt;/code>&lt;/td>
&lt;td>&lt;code>~/Library/Application Support&lt;/code>&lt;/td>
&lt;td>&lt;code>%APPDATA%&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>XDG_CONFIG_DIRS&lt;/code>&lt;/td>
&lt;td>&lt;code>/etc/xdg&lt;/code>&lt;/td>
&lt;td>&lt;code>/Library/Application Support&lt;/code>&lt;/td>
&lt;td>&lt;code>%PROGRAMDATA%&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>XDG_CONFIG_HOME&lt;/code>&lt;/td>
&lt;td>&lt;code>~/.config&lt;/code>&lt;/td>
&lt;td>&lt;code>~/Library/Application Support&lt;/code>&lt;/td>
&lt;td>&lt;code>%APPDATA%&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>XDG_CACHE_HOME&lt;/code>&lt;/td>
&lt;td>&lt;code>~/.cache&lt;/code>&lt;/td>
&lt;td>&lt;code>~/Library/Caches&lt;/code>&lt;/td>
&lt;td>&lt;code>%LOCALAPPDATA%&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="программные-реализации">&lt;span class="section-num">3&lt;/span> Программные реализации&lt;/h2>
&lt;h3 id="xdg">&lt;span class="section-num">3.1&lt;/span> xdg&lt;/h3>
&lt;ul>
&lt;li>Кроссплатформенный пакет, реализующий стандарт XDG.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/OpenPeeDeeP/xdg" target="_blank" rel="noopener">https://github.com/OpenPeeDeeP/xdg&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Indico. Обновление</title><link>https://yamadharma.github.io/ru/post/2024/09/24/indico-update/</link><pubDate>Tue, 24 Sep 2024 11:23:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/24/indico-update/</guid><description>&lt;p>Обновление Indico.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#обновление-пререквизитов">&lt;span class="section-num">1&lt;/span> Обновление пререквизитов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#postgres">&lt;span class="section-num">1.1&lt;/span> Postgres&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#бэкап-базы-данных">&lt;span class="section-num">1.1.1&lt;/span> Бэкап базы данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-postgres">&lt;span class="section-num">1.1.2&lt;/span> Обновление Postgres&lt;/a>&lt;/li>
&lt;li>&lt;a href="#восстановление-базы-данных">&lt;span class="section-num">1.1.3&lt;/span> Восстановление базы данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#обновление-indico">&lt;span class="section-num">2&lt;/span> Обновление Indico&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-indico">&lt;span class="section-num">3&lt;/span> Установка Indico&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">4&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="обновление-пререквизитов">&lt;span class="section-num">1&lt;/span> Обновление пререквизитов&lt;/h2>
&lt;h3 id="postgres">&lt;span class="section-num">1.1&lt;/span> Postgres&lt;/h3>
&lt;ul>
&lt;li>Делается, если нужно изменить версию PostgreSQL.&lt;/li>
&lt;/ul>
&lt;h4 id="бэкап-базы-данных">&lt;span class="section-num">1.1.1&lt;/span> Бэкап базы данных&lt;/h4>
&lt;ul>
&lt;li>Сделайте бекап базы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u postgres pg_dump -U postgres indico &amp;gt; indico.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="обновление-postgres">&lt;span class="section-num">1.1.2&lt;/span> Обновление Postgres&lt;/h4>
&lt;ul>
&lt;li>Версии, которая идёт в комплекте с дистрибутивом, достаточно.&lt;/li>
&lt;li>Но лучше установить версию поновее.&lt;/li>
&lt;li>Смотрим, какие версии в наличии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf module list postgresql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим postgresql-16:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf module reset postgresql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf module &lt;span class="nb">enable&lt;/span> postgresql:16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf -y install postgresql-server postgresql-upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте установленную версию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">postgres -V
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Инициализируем базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">postgresql-setup --initdb --unit postgresql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверим, что в &lt;code>/var/lib/pgsql/data/postgresql.conf&lt;/code> установлен алгоритм шифрования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">password_encryption = scram-sha-256
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустим postgres:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now postgresql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="восстановление-базы-данных">&lt;span class="section-num">1.1.3&lt;/span> Восстановление базы данных&lt;/h4>
&lt;ul>
&lt;li>Подключимся к базе данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u postgres psql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим базу данных (укажите необходимый пароль):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">indico&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">indico&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WITH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PASSWORD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;lt;password&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">indico&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">indico&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">OWNER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">indico&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="k">connect&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">indico&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SCHEMA&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">indico&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавьте расширение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su - postgres -c &lt;span class="s1">&amp;#39;psql indico -c &amp;#34;CREATE EXTENSION unaccent; CREATE EXTENSION pg_trgm;&amp;#34;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте подключение к базе данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">psql --username indico --password --host localhost indico
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После подключения посмотрите параметры соединения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">conninfo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Восстановите данные из резервной копии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u postgres psql -d indico -f indico.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-indico">&lt;span class="section-num">2&lt;/span> Обновление Indico&lt;/h2>
&lt;ul>
&lt;li>Остановим Celery:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl stop indico-celery.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Теперь переключитесь на пользователя &lt;code>indico&lt;/code> и активируйте virtualenv:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su - indico
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.venv/bin/activate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте версию Python:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">python -V
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если версия &amp;lt; 3.12, то установим необходимую версию Python:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">indico setup upgrade-python --force-version 3.12
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите indico:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip install setuptools
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pip install -U indico
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">indico setup create-symlinks ~/web/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите плагины:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip install -U indico-plugins
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите схемы базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">indico db upgrade
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">indico db --all-plugins upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перезапустите uWSGI:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch ~/web/indico.wsgi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Снова запустите Celery:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl start indico-celery.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-indico">&lt;span class="section-num">3&lt;/span> Установка Indico&lt;/h2>
&lt;ul>
&lt;li>Если версия слишком старая, либо Вы обновили систему, лучше установить бинарники заново.&lt;/li>
&lt;li>Удалите старую установку python:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm -rf /opt/indico/.pyenv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Теперь переключитесь на пользователя &lt;code>indico&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su - indico
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Загрузите установщик:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer &lt;span class="p">|&lt;/span> bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите python-3.12:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.bashrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pyenv install 3.12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pyenv global 3.12
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите indico:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">python -m venv --upgrade-deps --prompt indico ~/.venv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.venv/bin/activate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;source ~/.venv/bin/activate&amp;#39;&lt;/span> &amp;gt;&amp;gt; ~/.bashrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pip install setuptools wheel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pip install uwsgi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pip install indico
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">4&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Документация: &lt;a href="https://docs.getindico.io/en/stable/installation/upgrade/" target="_blank" rel="noopener">https://docs.getindico.io/en/stable/installation/upgrade/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Система управления событиями Indico</title><link>https://yamadharma.github.io/ru/post/2024/09/24/indico-event-organisation/</link><pubDate>Tue, 24 Sep 2024 11:13:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/24/indico-event-organisation/</guid><description>&lt;p>Система управления событиями Indico.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администрирование">&lt;span class="section-num">2&lt;/span> Администрирование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Система управления событиями.&lt;/li>
&lt;li>Сайт: &lt;a href="https://getindico.io/" target="_blank" rel="noopener">https://getindico.io/&lt;/a>&lt;/li>
&lt;li>Документация:
&lt;ul>
&lt;li>&lt;a href="https://learn.getindico.io/" target="_blank" rel="noopener">https://learn.getindico.io/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.getindico.io/" target="_blank" rel="noopener">https://docs.getindico.io/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/indico/indico" target="_blank" rel="noopener">https://github.com/indico/indico&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="администрирование">&lt;span class="section-num">2&lt;/span> Администрирование&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/24/indico-update/">Indico. Обновление&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Huawei. Протокол VCMP</title><link>https://yamadharma.github.io/ru/post/2024/09/21/huawei-vcmp/</link><pubDate>Sat, 21 Sep 2024 12:49:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/21/huawei-vcmp/</guid><description>&lt;p>Huawei. Протокол VCMP.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#домен-vcmp">&lt;span class="section-num">2&lt;/span> Домен VCMP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#роли-vcmp">&lt;span class="section-num">3&lt;/span> Роли VCMP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">4.1&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление">&lt;span class="section-num">4.2&lt;/span> Управление&lt;/a>&lt;/li>
&lt;li>&lt;a href="#информация">&lt;span class="section-num">4.3&lt;/span> Информация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Протокол управления VLAN.&lt;/li>
&lt;li>Используется для реализации централизованного управления и обслуживания VLAN.&lt;/li>
&lt;li>VCMP есть собственный протокол Huawei, который работает на канальном уровне для передачи информации VLAN и обеспечивает согласованность информации VLAN в сети уровня 2.&lt;/li>
&lt;li>Аналогичен протоколу Cisco VTP.&lt;/li>
&lt;/ul>
&lt;h2 id="домен-vcmp">&lt;span class="section-num">2&lt;/span> Домен VCMP&lt;/h2>
&lt;ul>
&lt;li>Домен VCMP состоит из коммутаторов, имеющих одинаковое доменное имя VCMP и подключённых через транковые или гибридные интерфейсы.&lt;/li>
&lt;li>Все коммутаторы в домене VCMP должны использовать одно и то же имя домена, и каждый коммутатор может присоединиться только к одному домену VCMP.&lt;/li>
&lt;li>Коммутаторы в разных доменах VCMP не могут синхронизировать информацию VLAN.&lt;/li>
&lt;li>Домен VCMP определяет область действия административного коммутатора и управляемых коммутаторов.&lt;/li>
&lt;li>Коммутаторы в домене VCMP управляются административным коммутатором.&lt;/li>
&lt;li>В домене VCMP имеется только один административный коммутатор и несколько управляемых коммутаторов.&lt;/li>
&lt;li>Прозрачные и тихие коммутаторы VCMP не принадлежат ни одному домену VCMP.&lt;/li>
&lt;/ul>
&lt;h2 id="роли-vcmp">&lt;span class="section-num">3&lt;/span> Роли VCMP&lt;/h2>
&lt;ul>
&lt;li>Сервер (Server).
&lt;ul>
&lt;li>Сервер VCMP синхронизирует информацию VLAN с другими коммутаторами в локальном домене VCMP.&lt;/li>
&lt;li>Если сети VLAN создаются или удаляются, а также имена или описания VLAN изменяются на сервере VCMP, конфигурации синхронизируются с другими коммутаторами в домене VCMP.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Клиент (Client).
&lt;ul>
&lt;li>Клиент VCMP принадлежит указанному домену VCMP и синхронизирует информацию VLAN с сервером VCMP.&lt;/li>
&lt;li>Если сети VLAN создаются или удаляются либо имена или описания VLAN изменяются на клиенте VCMP, конфигурации не синхронизируются с другими коммутаторами в домене VCMP.&lt;/li>
&lt;li>Информация VLAN на клиенте VCMP перезаписывается информацией, отправленной сервером VCMP.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Прозрачный (Transparent).
&lt;ul>
&lt;li>Прозрачный коммутатор VCMP не влияет на другие коммутаторы в локальном домене VCMP и не зависит от поведения управления VCMP.&lt;/li>
&lt;li>Прозрачный коммутатор VCMP прозрачно пересылает пакеты VCMP только по транковым или гибридным каналам.&lt;/li>
&lt;li>Если VLAN создаются или удаляются, а также имена или описания VLAN изменяются на прозрачном коммутаторе VCMP, информация VLAN на прозрачном коммутаторе VCMP не влияет на информацию на сервере VCMP и не синхронизируется с другими коммутаторами в домене VCMP.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Тихий (Silent).
&lt;ul>
&lt;li>Тихий коммутатор VCMP не влияет на другие коммутаторы в локальном домене VCMP и не зависит от поведения управления VCMP.&lt;/li>
&lt;li>Предотвращает передачу пакетов VCMP из домена VCMP в другие домены VCMP.&lt;/li>
&lt;li>Отбрасывает полученные пакеты VCMP.&lt;/li>
&lt;li>Если VLAN создаются или удаляются, а также имена или описания VLAN изменяются на тихом коммутаторе VCMP, информация VLAN на тихом коммутаторе VCMP не влияет на информацию на сервере VCMP и не синхронизируется с другими коммутаторами в домене VCMP.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="настройка">&lt;span class="section-num">4.1&lt;/span> Настройка&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Аутентификация в домене:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vcmp authentication sha2-256 password &amp;lt;пароль&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установка идентификатора сервера:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vcmp device-id &amp;lt;идентификатор&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Домен VCMP:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vcmp domain &amp;lt;домен&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установка роли коммутатора:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vcmp role &amp;lt;роль&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Роли могут быть следующими:
&lt;ul>
&lt;li>&lt;code>client&lt;/code>&lt;/li>
&lt;li>&lt;code>server&lt;/code>&lt;/li>
&lt;li>&lt;code>silent&lt;/code>&lt;/li>
&lt;li>&lt;code>transparent&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="управление">&lt;span class="section-num">4.2&lt;/span> Управление&lt;/h3>
&lt;ul>
&lt;li>Сброс настроек на клиенте:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">reset vcmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="информация">&lt;span class="section-num">4.3&lt;/span> Информация&lt;/h3>
&lt;ul>
&lt;li>Статус vcmp:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">display vcmp status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Изменения VLAN:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">display vcmp track
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Moodle. Обновление</title><link>https://yamadharma.github.io/ru/post/2024/09/15/moodle-upgrade/</link><pubDate>Sun, 15 Sep 2024 16:37:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/15/moodle-upgrade/</guid><description>&lt;p>Moodle. Обновление.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#обновление-пререквизитов">&lt;span class="section-num">1&lt;/span> Обновление пререквизитов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#postgres">&lt;span class="section-num">1.1&lt;/span> Postgres&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#бэкап-базы-данных">&lt;span class="section-num">1.1.1&lt;/span> Бэкап базы данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-postgres">&lt;span class="section-num">1.1.2&lt;/span> Обновление Postgres&lt;/a>&lt;/li>
&lt;li>&lt;a href="#восстановление-базы-данных">&lt;span class="section-num">1.1.3&lt;/span> Восстановление базы данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#php">&lt;span class="section-num">1.2&lt;/span> PHP&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проверка-расширений">&lt;span class="section-num">1.2.1&lt;/span> Проверка расширений&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-php">&lt;span class="section-num">1.2.2&lt;/span> Обновление php&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#обновление-moodle">&lt;span class="section-num">2&lt;/span> Обновление Moodle&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">3&lt;/span> Ресурсы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#документация-moodle">&lt;span class="section-num">3.1&lt;/span> Документация Moodle&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="обновление-пререквизитов">&lt;span class="section-num">1&lt;/span> Обновление пререквизитов&lt;/h2>
&lt;h3 id="postgres">&lt;span class="section-num">1.1&lt;/span> Postgres&lt;/h3>
&lt;ul>
&lt;li>Делается, если нужно изменить версию PostgreSQL.&lt;/li>
&lt;/ul>
&lt;h4 id="бэкап-базы-данных">&lt;span class="section-num">1.1.1&lt;/span> Бэкап базы данных&lt;/h4>
&lt;ul>
&lt;li>Сделайте бекап базы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u postgres pg_dump -U postgres moodle &amp;gt; moodle.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="обновление-postgres">&lt;span class="section-num">1.1.2&lt;/span> Обновление Postgres&lt;/h4>
&lt;ul>
&lt;li>Версии, которая идёт в комплекте с дистрибутивом, достаточно.&lt;/li>
&lt;li>Но лучше установить версию поновее.&lt;/li>
&lt;li>Смотрим, какие версии в наличии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf module list postgresql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим postgresql-16:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf module reset postgresql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf module &lt;span class="nb">enable&lt;/span> postgresql:16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf -y install postgresql-server postgresql-upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте установленную версию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">postgres -V
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Инициализируем базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">postgresql-setup --initdb --unit postgresql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверим, что в &lt;code>/var/lib/pgsql/data/postgresql.conf&lt;/code> установлен алгоритм шифрования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">password_encryption = scram-sha-256
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустим postgres:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now postgresql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="восстановление-базы-данных">&lt;span class="section-num">1.1.3&lt;/span> Восстановление базы данных&lt;/h4>
&lt;ul>
&lt;li>Подключимся к базе данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u postgres psql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим базу данных (укажите необходимый пароль):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">moodle&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">moodle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WITH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PASSWORD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;lt;password&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">moodle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">OWNER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">moodle&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="k">connect&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">moodle&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SCHEMA&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">moodle&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте подключение к базе данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">psql --username moodle --password --host localhost moodle
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После подключения посмотрите параметры соединения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">conninfo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Восстановите данные из резервной копии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u postgres psql -d moodle -f moodle.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="php">&lt;span class="section-num">1.2&lt;/span> PHP&lt;/h3>
&lt;h4 id="проверка-расширений">&lt;span class="section-num">1.2.1&lt;/span> Проверка расширений&lt;/h4>
&lt;ul>
&lt;li>Проверить установленные расширения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf install php-pgsql php-gd php-intl php-xmlrpc php-soap php-opcache php-sodium php-fpm php-pecl-zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="обновление-php">&lt;span class="section-num">1.2.2&lt;/span> Обновление php&lt;/h4>
&lt;ul>
&lt;li>Установим репозиторий remi:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf config-manager --set-enabled crb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf install epel-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf install dnf-utils http://rpms.remirepo.net/enterprise/remi-release-9.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Смотрим, какие версии в наличии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf module list php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим php-8.2:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf module reset php
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf module &lt;span class="nb">enable&lt;/span> php:remi-8.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf -y install php php-cli php-pgsql php-opcache php-pdo php-pecl-mcrypt php-sodium
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf -y update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перезапустим сервисы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl restart php-fpm.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl restart httpd.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-moodle">&lt;span class="section-num">2&lt;/span> Обновление Moodle&lt;/h2>
&lt;ul>
&lt;li>Перейдём в каталог с moodle:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /var/www/moodle/web-git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите git:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git pull
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Посмотрим ветки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git branch -a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выберите нужную ветвь:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git branch --track MOODLE_405_STABLE origin/MOODLE_405_STABLE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git checkout MOODLE_405_STABLE
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Исправьте разрешения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R apache:apache /var/www/moodle/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">restorecon -vR /var/www/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите установку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u apache /usr/bin/php /var/www/moodle/web-git/admin/cli/upgrade.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">3&lt;/span> Ресурсы&lt;/h2>
&lt;h3 id="документация-moodle">&lt;span class="section-num">3.1&lt;/span> Документация Moodle&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://docs.moodle.org/405/en/Git_for_Administrators" target="_blank" rel="noopener">https://docs.moodle.org/405/en/Git_for_Administrators&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.moodle.org/405/en/Upgrading" target="_blank" rel="noopener">https://docs.moodle.org/405/en/Upgrading&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.moodle.org/405/en/Administration_via_command_line" target="_blank" rel="noopener">https://docs.moodle.org/405/en/Administration_via_command_line&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Системы управления обучением</title><link>https://yamadharma.github.io/ru/post/2024/09/14/learning-management-systems/</link><pubDate>Sat, 14 Sep 2024 16:52:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/14/learning-management-systems/</guid><description>&lt;p>Системы управления обучением (Learning Management Systems, LMS).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общие-вопросы">&lt;span class="section-num">1&lt;/span> Общие вопросы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#системы">&lt;span class="section-num">2&lt;/span> Системы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общие-вопросы">&lt;span class="section-num">1&lt;/span> Общие вопросы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/10/17/mooc-platforms/">Платформы MOOC&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="системы">&lt;span class="section-num">2&lt;/span> Системы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/15/moodle-learning-management-system/">Система управления обучением Moodle&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Обновление деривативов RedHat</title><link>https://yamadharma.github.io/ru/post/2024/09/12/redhat-derivatives-update/</link><pubDate>Thu, 12 Sep 2024 12:48:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/12/redhat-derivatives-update/</guid><description>&lt;p>Обновление деривативов RedHat.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проект-elevate">&lt;span class="section-num">1.1&lt;/span> Проект ELevate&lt;/a>&lt;/li>
&lt;li>&lt;a href="#предварительные-действия">&lt;span class="section-num">1.2&lt;/span> Предварительные действия&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#7-8">&lt;span class="section-num">2&lt;/span> 7 → 8&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#обновление-centos-7-до-rocky-8">&lt;span class="section-num">2.1&lt;/span> Обновление Centos 7 до Rocky 8&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2.1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подготовка-к-обновлению">&lt;span class="section-num">2.1.2&lt;/span> Подготовка к обновлению&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление">&lt;span class="section-num">2.1.3&lt;/span> Обновление&lt;/a>&lt;/li>
&lt;li>&lt;a href="#после-обновления">&lt;span class="section-num">2.1.4&lt;/span> После обновления&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#8-9">&lt;span class="section-num">3&lt;/span> 8 → 9&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#обновление-oracle-8-до-oracle-9">&lt;span class="section-num">3.1&lt;/span> Обновление Oracle 8 до Oracle 9&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">3.1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подготовка-к-обновлению">&lt;span class="section-num">3.1.2&lt;/span> Подготовка к обновлению&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление">&lt;span class="section-num">3.1.3&lt;/span> Обновление&lt;/a>&lt;/li>
&lt;li>&lt;a href="#после-обновления">&lt;span class="section-num">3.1.4&lt;/span> После обновления&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#обновление-rocky-8-до-rocky-9">&lt;span class="section-num">3.2&lt;/span> Обновление Rocky 8 до Rocky 9&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">3.2.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подготовка-к-обновлению">&lt;span class="section-num">3.2.2&lt;/span> Подготовка к обновлению&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление">&lt;span class="section-num">3.2.3&lt;/span> Обновление&lt;/a>&lt;/li>
&lt;li>&lt;a href="#после-обновления">&lt;span class="section-num">3.2.4&lt;/span> После обновления&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h3 id="проект-elevate">&lt;span class="section-num">1.1&lt;/span> Проект ELevate&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://almalinux.org/elevate/" target="_blank" rel="noopener">https://almalinux.org/elevate/&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://wiki.almalinux.org/elevate/" target="_blank" rel="noopener">https://wiki.almalinux.org/elevate/&lt;/a>&lt;/li>
&lt;li>Поддерживает следующие пути обновления и миграции:
&lt;ul>
&lt;li>обновление с CentOS 6 до CentOS 7;&lt;/li>
&lt;li>обновление с CentOS 7 до AlmaLinux 8, CentOS Stream 8, Euro Linux 8, Oracle Linux 8 или Rocky Linux 8;&lt;/li>
&lt;li>обновление Scientific Linux 7 до AlmaLinux 8;&lt;/li>
&lt;li>обновление с 8.x до 9.x в том же дистрибутиве;&lt;/li>
&lt;li>миграция на Oracle Linux 9 доступна с утилитой Oracle Leapp.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="предварительные-действия">&lt;span class="section-num">1.2&lt;/span> Предварительные действия&lt;/h3>
&lt;ul>
&lt;li>Определите версию операционной системы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cat /etc/os-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="7-8">&lt;span class="section-num">2&lt;/span> 7 → 8&lt;/h2>
&lt;h3 id="обновление-centos-7-до-rocky-8">&lt;span class="section-num">2.1&lt;/span> Обновление Centos 7 до Rocky 8&lt;/h3>
&lt;h4 id="общая-информация">&lt;span class="section-num">2.1.1&lt;/span> Общая информация&lt;/h4>
&lt;ul>
&lt;li>Будем использовать проект Elevate.&lt;/li>
&lt;/ul>
&lt;h4 id="подготовка-к-обновлению">&lt;span class="section-num">2.1.2&lt;/span> Подготовка к обновлению&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Обновите систему:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo yum -y upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Перегрузите машину:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установите пакет &lt;em>elevate-release&lt;/em>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo yum install -y http://repo.almalinux.org/elevate/elevate-release-latest-el&lt;span class="k">$(&lt;/span>rpm --eval %rhel&lt;span class="k">)&lt;/span>.noarch.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установите утилиты для миграции:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo yum install -y leapp-upgrade leapp-data-rocky
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Другие варианты установки: &lt;code>centos&lt;/code>, &lt;code>almalinux&lt;/code>, &lt;code>eurolinux&lt;/code>, &lt;code>oraclelinux&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Лучше установить SELinux в &lt;code>permissive&lt;/code> в файле &lt;code>/etc/selinux/config&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Перегрузите компьютер.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Восстановите метки SELinux:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo restorecon -vR /
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Удалите внешние репозитории:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yum remove epel-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yum remove rpmforge-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yum remove elrepo-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Удалите неподдерживаемые модули ядра:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo rmmod pata_acpi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rmmod floppy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверьте возможность обновления:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo leapp preupgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Отчёт находится в файле &lt;code>/var/log/leapp/leapp-report.txt&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Там же находятся и рекомендации по устранению проблем.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Тут же будет список неподписанных пакетов, которые, скорее всего, вам придётся установить заново после обновления.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Также создаётся файл &lt;code>/var/log/leapp/answerfile&lt;/code>, где нужно подтвердить действия.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Подтвердите удаление модуляя PAM PKCS#11:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo leapp answer --section remove_pam_pkcs11_module_check.confirm&lt;span class="o">=&lt;/span>True
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>После исправления запустите утилиту опять. И так до устранения основных недостатков.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="обновление">&lt;span class="section-num">2.1.3&lt;/span> Обновление&lt;/h4>
&lt;ul>
&lt;li>После подготовки сделайте обновление:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo leapp upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После скачивания необходимых пакетов будет предложено перегрузить машину.&lt;/li>
&lt;li>После перезагрузки начнётся процесс обновления.&lt;/li>
&lt;/ul>
&lt;h4 id="после-обновления">&lt;span class="section-num">2.1.4&lt;/span> После обновления&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Удалите старые пакеты от Centos7:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rpm -qa &lt;span class="p">|&lt;/span> grep -E &lt;span class="s1">&amp;#39;el7[.-]&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> xargs rpm -e
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Выполните последующие действия либо обновляйте до следующей версии.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установите внешние репозитории:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Обновите необновлённые пакеты:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установите удалённые пакеты, например:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install fail2ban
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now fail2ban.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Установите SELinux в &lt;code>enforcing&lt;/code> в файле &lt;code>/etc/selinux/config&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="8-9">&lt;span class="section-num">3&lt;/span> 8 → 9&lt;/h2>
&lt;h3 id="обновление-oracle-8-до-oracle-9">&lt;span class="section-num">3.1&lt;/span> Обновление Oracle 8 до Oracle 9&lt;/h3>
&lt;h4 id="общая-информация">&lt;span class="section-num">3.1.1&lt;/span> Общая информация&lt;/h4>
&lt;ul>
&lt;li>Материалы:
&lt;ul>
&lt;li>&lt;a href="https://blogs.oracle.com/linux/post/upgrade-oracle-linux-8-to-oracle-linux-9-using-leapp" target="_blank" rel="noopener">https://blogs.oracle.com/linux/post/upgrade-oracle-linux-8-to-oracle-linux-9-using-leapp&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.oracle.com/en/operating-systems/oracle-linux/9/leapp/leapp-PreparingfortheUpgrade.html#chap-leapp-prep" target="_blank" rel="noopener">https://docs.oracle.com/en/operating-systems/oracle-linux/9/leapp/leapp-PreparingfortheUpgrade.html#chap-leapp-prep&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="подготовка-к-обновлению">&lt;span class="section-num">3.1.2&lt;/span> Подготовка к обновлению&lt;/h4>
&lt;ul>
&lt;li>Обновите систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите утилиту &lt;em>Leapp&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf install leapp-upgrade --enablerepo&lt;span class="o">=&lt;/span>ol8_appstream,ol8_baseos_latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Лучше установить SELinux в &lt;code>permissive&lt;/code> в файле &lt;code>/etc/selinux/config&lt;/code>.&lt;/li>
&lt;li>Перегрузите компьютер.&lt;/li>
&lt;li>Восстановите метки SELinux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo restorecon -vR /
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалите внешние репозитории:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf remove epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте возможность обновления:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo leapp preupgrade --oraclelinux
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отчёт находится в файле &lt;code>/var/log/leapp/leapp-report.txt&lt;/code>.&lt;/li>
&lt;li>Там же находятся и рекомендации по устранению проблем.&lt;/li>
&lt;li>Тут же будет список неподписанных пакетов, которые, скорее всего, вам придётся установить заново после обновления.&lt;/li>
&lt;li>Также создаётся файл &lt;code>/var/log/leapp/answerfile&lt;/code>, где нужно подтвердить действия.&lt;/li>
&lt;li>После исправления запустите утилиту опять. И так до устранения основных недостатков.&lt;/li>
&lt;/ul>
&lt;h4 id="обновление">&lt;span class="section-num">3.1.3&lt;/span> Обновление&lt;/h4>
&lt;ul>
&lt;li>После подготовки сделайте обновление:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo leapp upgrade --oraclelinux
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После скачивания необходимых пакетов будет предложено перегрузить машину.&lt;/li>
&lt;li>После перезагрузки начнётся процесс обновления.&lt;/li>
&lt;/ul>
&lt;h4 id="после-обновления">&lt;span class="section-num">3.1.4&lt;/span> После обновления&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Установите внешние репозитории:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Обновите необновлённые пакеты:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установите удалённые пакеты, например:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install fail2ban
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now fail2ban.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Установите SELinux в &lt;code>enforcing&lt;/code> в файле &lt;code>/etc/selinux/config&lt;/code>.&lt;/li>
&lt;li>Установите ядро Unbreakable Enterprise Kernel:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install kernel-uek kernel-uek-modules kernel-uek-modules-extra
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="обновление-rocky-8-до-rocky-9">&lt;span class="section-num">3.2&lt;/span> Обновление Rocky 8 до Rocky 9&lt;/h3>
&lt;h4 id="общая-информация">&lt;span class="section-num">3.2.1&lt;/span> Общая информация&lt;/h4>
&lt;ul>
&lt;li>Будем использовать проект Elevate.&lt;/li>
&lt;/ul>
&lt;h4 id="подготовка-к-обновлению">&lt;span class="section-num">3.2.2&lt;/span> Подготовка к обновлению&lt;/h4>
&lt;ul>
&lt;li>Обновите систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf -y upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перегрузите машину:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите пакет &lt;em>elevate-release&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf install -y http://repo.almalinux.org/elevate/elevate-release-latest-el&lt;span class="k">$(&lt;/span>rpm --eval %rhel&lt;span class="k">)&lt;/span>.noarch.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отменить исключение пакетов, выполненное при предыдущем обновлении:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf config-manager --save --setopt &lt;span class="nv">exclude&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите утилиты для миграции:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf install -y leapp-upgrade leapp-data-rocky
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Лучше установить SELinux в &lt;code>permissive&lt;/code> в файле &lt;code>/etc/selinux/config&lt;/code>.&lt;/li>
&lt;li>Перегрузите компьютер.&lt;/li>
&lt;li>Восстановите метки SELinux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo restorecon -vR /
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалите внешние репозитории:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf remove epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте возможность обновления:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo leapp preupgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отчёт находится в файле &lt;code>/var/log/leapp/leapp-report.txt&lt;/code>.&lt;/li>
&lt;li>Там же находятся и рекомендации по устранению проблем.&lt;/li>
&lt;li>Тут же будет список неподписанных пакетов, которые, скорее всего, вам придётся установить заново после обновления.&lt;/li>
&lt;li>Также создаётся файл &lt;code>/var/log/leapp/answerfile&lt;/code>, где нужно подтвердить действия.&lt;/li>
&lt;li>Общие исправления для Rocky Linux 8.
&lt;ul>
&lt;li>Изменение конфигурации firewalld:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo sed -i &lt;span class="s2">&amp;#34;s/^AllowZoneDrifting=.*/AllowZoneDrifting=no/&amp;#34;&lt;/span> /etc/firewalld/firewalld.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удаление файла конфигурации сети для неподдерживаемого типа сетевого устройства:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm /etc/sysconfig/network-scripts/ifcfg-&lt;span class="o">[&lt;/span>device_name&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обход требования проверки устройства VDO в файле ответов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo leapp answer --section check_vdo.no_vdo_devices&lt;span class="o">=&lt;/span>True
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалите неподдерживаемые модули ядра:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo rmmod ip_set
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>После исправления запустите утилиту опять. И так до устранения основных недостатков.&lt;/li>
&lt;/ul>
&lt;h4 id="обновление">&lt;span class="section-num">3.2.3&lt;/span> Обновление&lt;/h4>
&lt;ul>
&lt;li>Обычно пакеты &lt;code>make-devel&lt;/code> и &lt;code>rocky-logos&lt;/code> приводят к сбою обновления. Удалите их:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf remove make-devel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf remove rocky-logos
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После подготовки сделайте обновление:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo leapp upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После скачивания необходимых пакетов будет предложено перегрузить машину.&lt;/li>
&lt;li>После перезагрузки начнётся процесс обновления.&lt;/li>
&lt;/ul>
&lt;h4 id="после-обновления">&lt;span class="section-num">3.2.4&lt;/span> После обновления&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Удалите старые пакеты от Rocky Linux 8:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo rpm -qa &lt;span class="p">|&lt;/span> grep -E &lt;span class="s1">&amp;#39;el8[.-]&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> xargs rpm -e
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Выполните последующие действия либо обновляйте до следующей версии.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установите внешние репозитории:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf config-manager --set-enabled crb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Обновите необновлённые пакеты:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf -y update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установите удалённые пакеты, например:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf -y install fail2ban
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> --now fail2ban.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Установите SELinux в &lt;code>enforcing&lt;/code> в файле &lt;code>/etc/selinux/config&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Администрирование Huawei</title><link>https://yamadharma.github.io/ru/post/2024/09/06/huawei-administration/</link><pubDate>Fri, 06 Sep 2024 15:34:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/06/huawei-administration/</guid><description>&lt;p>Администрирование Huawei.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обслуживание">&lt;span class="section-num">2&lt;/span> Обслуживание&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/04/04/cisco-huawei-commands/">Сопоставление команд Cisco и Huawei&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/06/initial-switch-configuration-huawei/">Начальная конфигурация коммутатора Huawei&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/21/huawei-vcmp/">Huawei. Протокол VCMP&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="обслуживание">&lt;span class="section-num">2&lt;/span> Обслуживание&lt;/h2></description></item><item><title>Начальная конфигурация коммутатора Huawei</title><link>https://yamadharma.github.io/ru/post/2024/09/06/initial-switch-configuration-huawei/</link><pubDate>Fri, 06 Sep 2024 15:31:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/06/initial-switch-configuration-huawei/</guid><description>&lt;p>Начальная конфигурация коммутатора Huawei.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#подготовка">&lt;span class="section-num">1&lt;/span> Подготовка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#базовая-конфигурация">&lt;span class="section-num">2&lt;/span> Базовая конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#переход-в-режим-конфигурации">&lt;span class="section-num">2.1&lt;/span> Переход в режим конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#зададим-имя-устройства">&lt;span class="section-num">2.2&lt;/span> Зададим имя устройства&lt;/a>&lt;/li>
&lt;li>&lt;a href="#административный-пользователь">&lt;span class="section-num">2.3&lt;/span> Административный пользователь&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-ssh">&lt;span class="section-num">2.4&lt;/span> Настройка ssh&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dhcp-snooping">&lt;span class="section-num">2.5&lt;/span> DHCP snooping&lt;/a>&lt;/li>
&lt;li>&lt;a href="#uplink-интерфейс">&lt;span class="section-num">2.6&lt;/span> Uplink интерфейс&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сетевые-настройки">&lt;span class="section-num">2.7&lt;/span> Сетевые настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-vcmp">&lt;span class="section-num">2.8&lt;/span> Настройка VCMP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-lldp">&lt;span class="section-num">2.9&lt;/span> Настройка lldp&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-других-портов">&lt;span class="section-num">2.10&lt;/span> Настройка других портов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сохранение-конфигурации">&lt;span class="section-num">2.11&lt;/span> Сохранение конфигурации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#добавление-в-dns">&lt;span class="section-num">3&lt;/span> Добавление в DNS&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#nsupdate">&lt;span class="section-num">3.1&lt;/span> nsupdate&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подключение-к-системе-мониторинга">&lt;span class="section-num">4&lt;/span> Подключение к системе мониторинга&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-snmp">&lt;span class="section-num">4.1&lt;/span> Настройка SNMP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пользователь-для-бекапа-конфига">&lt;span class="section-num">4.2&lt;/span> Пользователь для бекапа конфига&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-к-observium">&lt;span class="section-num">4.3&lt;/span> Подключение к Observium&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-к-librenms">&lt;span class="section-num">4.4&lt;/span> Подключение к Librenms&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="подготовка">&lt;span class="section-num">1&lt;/span> Подготовка&lt;/h2>
&lt;ul>
&lt;li>На Linux для конфигурации используется Minicom.&lt;/li>
&lt;li>Запускайте по пользователем &lt;code>root&lt;/code>.&lt;/li>
&lt;li>Для первоначальной конфигурации задайте ключ &lt;code>-s&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">minicom -s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выставите параметры Скорость/Четность/Биты (Bps/Par/Bits) = 9600 8N1.&lt;/li>
&lt;li>Укажите последовательный порт:
&lt;ul>
&lt;li>последовательный порт: &lt;code>/dev/ttyS[0-3]&lt;/code>;&lt;/li>
&lt;li>порт USB: &lt;code>/dev/ttyUSB0&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Итоговая конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">A - Последовательный порт : /dev/ttyUSB0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">B - Размещение lock-файла : /var/lock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">C - Программа при выходе :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">D - Программа при запуске :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">E - Скорость/Чётность/Биты : 9600 8N1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">F - Аппаратное управление потоком : Да
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">G - Программное управление потоком : Нет
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После изменений в меню выбрать &amp;ldquo;Сохранить настройки как dfl&amp;rdquo; или под своим именем.&lt;/li>
&lt;/ul>
&lt;h2 id="базовая-конфигурация">&lt;span class="section-num">2&lt;/span> Базовая конфигурация&lt;/h2>
&lt;h3 id="переход-в-режим-конфигурации">&lt;span class="section-num">2.1&lt;/span> Переход в режим конфигурации&lt;/h3>
&lt;ul>
&lt;li>Получаем приглашение &lt;code>&amp;lt;HUAWEI&amp;gt;&lt;/code>.&lt;/li>
&lt;li>Переходим в режим конфигурации командой &lt;code>system-view&lt;/code>.&lt;/li>
&lt;li>Приглашение меняется на &lt;code>[HUAWEI]&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;lt;HUAWEI&amp;gt;system-view
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>HUAWEI&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="зададим-имя-устройства">&lt;span class="section-num">2.2&lt;/span> Зададим имя устройства&lt;/h3>
&lt;ul>
&lt;li>Имя устройства имеет вид: &amp;lt;тип устройства&amp;gt;-&amp;lt;помещение&amp;gt;-&amp;lt;номер устройства&amp;gt;, например &lt;code>sw-103-1&lt;/code>.&lt;/li>
&lt;li>Зададим имя устройства:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>HUAWEI&lt;span class="o">]&lt;/span>&lt;span class="c1">#sysname sw-103-1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="административный-пользователь">&lt;span class="section-num">2.3&lt;/span> Административный пользователь&lt;/h3>
&lt;ul>
&lt;li>Зададим пользователя admin и пароль для него:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>aaa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-aaa&lt;span class="o">]&lt;/span>local-user admin password irreversible-cipher &amp;lt;пароль&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Назначаем пользователю уровень привилегий (15 самый высокий):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-aaa&lt;span class="o">]&lt;/span>local-user admin privilege level &lt;span class="m">15&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Включаем доступ по SSH для пользователя:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-aaa&lt;span class="o">]&lt;/span>local-user admin service-type telnet terminal ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключаем запрос смены пароля по истечению определённого промежутка времени (опционально):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-aaa&lt;span class="o">]&lt;/span>undo local-aaa-user password policy administrator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-aaa&lt;span class="o">]&lt;/span>quit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-ssh">&lt;span class="section-num">2.4&lt;/span> Настройка ssh&lt;/h3>
&lt;ul>
&lt;li>Включим ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>stelnet server &lt;span class="nb">enable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>ssh server-source all-interface
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>ssh authentication-type default password
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим ключ (необходимо, чтобы было настроено имя домена):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>rsa local-key-pair create
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Задаём алгоритмы ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>ssh server cipher aes256_ctr aes128_ctr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>ssh server hmac sha2_256
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>ssh server key-exchange dh_group16_sha512 dh_group15_sha512 dh_group14_sha256 dh_group_exchange_sha256
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>ssh client cipher aes256_ctr aes128_ctr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>ssh client hmac sha2_256
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>ssh client key-exchange dh_group16_sha512 dh_group15_sha512 dh_group14_sha256 dh_group_exchange_sha256
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>ssh server dh-exchange min-len &lt;span class="m">2048&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>ssh server publickey rsa_sha2_512 rsa_sha2_256 ecc rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Задаём протокол для подключения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>user-interface vty &lt;span class="m">0&lt;/span> &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-ui-vty0-4&lt;span class="o">]&lt;/span>authentication-mode aaa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-ui-vty0-4&lt;span class="o">]&lt;/span>protocol inbound ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-ui-vty0-4&lt;span class="o">]&lt;/span>quit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="dhcp-snooping">&lt;span class="section-num">2.5&lt;/span> DHCP snooping&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/05/dhcp-snooping/">DHCP snooping&lt;/a>&lt;/li>
&lt;li>Для использования DHCP snooping нам потребуется включить на коммутаторе глобально DHCP и DHCP snooping:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>dhcp &lt;span class="nb">enable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>dhcp snooping &lt;span class="nb">enable&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="uplink-интерфейс">&lt;span class="section-num">2.6&lt;/span> Uplink интерфейс&lt;/h3>
&lt;ul>
&lt;li>Сделаем последний порт транковым:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>interface GigabitEthernet1/0/48
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-GigabitEthernet0/0/48&lt;span class="o">]&lt;/span>port link-type trunk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-GigabitEthernet0/0/48&lt;span class="o">]&lt;/span>port trunk allow-pass vlan all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-GigabitEthernet0/0/48&lt;span class="o">]&lt;/span>dhcp snooping trusted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-GigabitEthernet0/0/48&lt;span class="o">]&lt;/span>quit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сделали порт доверенным для &lt;em>DHCP snooping&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h3 id="сетевые-настройки">&lt;span class="section-num">2.7&lt;/span> Сетевые настройки&lt;/h3>
&lt;ul>
&lt;li>Зададим адрес 192.168.0.1/24,
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>interface Vlanif &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-Vlanif10&lt;span class="o">]&lt;/span>ip address 192.168.1.10 &lt;span class="m">24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-Vlanif10&lt;span class="o">]&lt;/span>quit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Зададим шлюз 192.168.0.254:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>ip route-static 0.0.0.0 0.0.0.0 192.168.0.254
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-vcmp">&lt;span class="section-num">2.8&lt;/span> Настройка VCMP&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/21/huawei-vcmp/">Huawei. Протокол VCMP&lt;/a>&lt;/li>
&lt;li>Подключаем как клиента:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>vcmp role client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>vcmp domain &amp;lt;domain&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>vcmp authentication sha2-256 password &amp;lt;пароль&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-lldp">&lt;span class="section-num">2.9&lt;/span> Настройка lldp&lt;/h3>
&lt;ul>
&lt;li>Подключим поддержку протокола lldp:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>lldp &lt;span class="nb">enable&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключим cdp на все порты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>interface range GigabitEthernet 0/0/1 to GigabitEthernet 0/0/48
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-port-group&lt;span class="o">]&lt;/span>lldp compliance cdp receive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-port-group&lt;span class="o">]&lt;/span>quit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-других-портов">&lt;span class="section-num">2.10&lt;/span> Настройка других портов&lt;/h3>
&lt;ul>
&lt;li>Настроим другие порты для подключения клиентских устройств:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>interface range GigabitEthernet 0/0/1 to GigabitEthernet 0/0/46
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-port-group&lt;span class="o">]&lt;/span>port link-type access
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-port-group&lt;span class="o">]&lt;/span>port default vlan &lt;span class="m">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-port-group&lt;span class="o">]&lt;/span>quit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="сохранение-конфигурации">&lt;span class="section-num">2.11&lt;/span> Сохранение конфигурации&lt;/h3>
&lt;ul>
&lt;li>Сохраните конфигурацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;lt;sw-103-1&amp;gt;save
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="добавление-в-dns">&lt;span class="section-num">3&lt;/span> Добавление в DNS&lt;/h2>
&lt;ul>
&lt;li>Необходимо добавить коммутатор в DNS.&lt;/li>
&lt;/ul>
&lt;h3 id="nsupdate">&lt;span class="section-num">3.1&lt;/span> nsupdate&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/28/nsupdate-dynamic-dns-editor/">nsupdate: динамический редактор зон DNS&lt;/a>&lt;/li>
&lt;li>Добавьте адрес коммутатора в DNS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;update add sw-103-1.example.com 86400 a 192.168.0.1\nshow\nsend&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> nsupdate -v -k /etc/named/keys/example.com.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="подключение-к-системе-мониторинга">&lt;span class="section-num">4&lt;/span> Подключение к системе мониторинга&lt;/h2>
&lt;h3 id="настройка-snmp">&lt;span class="section-num">4.1&lt;/span> Настройка SNMP&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Посмотреть статус SNMP:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;lt;sw-103-1&amp;gt;display snmp-agent sys-info
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Укажем версию протокола по умолчанию для работы snmp:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>snmp-agent sys-info version v2c
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Удалим 3 версию:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>undo snmp-agent sys-info version v3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Настроим представление MIB:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>snmp-agent mib-view included iso-view iso
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Активируем на всех интерфейсах:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>snmp-agent protocol source-status all-interface
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Чтобы можно было указать простые snmp комьюнити введем команду:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>snmp-agent community complexity-check disable
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Настройте доступ к серверу мониторинга по SNMP.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Пусть сервер мониторинга имеет адрес: 192.168.0.5.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Имя коммьюнити для чтения: rocom.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>acl name SNMP &lt;span class="m">3999&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-acl-adv-SNMP&lt;span class="o">]&lt;/span>rule &lt;span class="m">1&lt;/span> permit ip &lt;span class="nb">source&lt;/span> 192.168.0.5 &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-acl-adv-SNMP&lt;span class="o">]&lt;/span>quit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>snmp community &lt;span class="nb">read&lt;/span> rocom acl SNMP
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Добавьте коммутатор в свой DNS.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="пользователь-для-бекапа-конфига">&lt;span class="section-num">4.2&lt;/span> Пользователь для бекапа конфига&lt;/h3>
&lt;ul>
&lt;li>Добавим пользователя для бекапа конфига:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1&lt;span class="o">]&lt;/span>aaa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-aaa&lt;span class="o">]&lt;/span>local-user readconf password irreversible-cipher &amp;lt;пароль&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Назначаем пользователю уровень привилегий (15 самый высокий):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-aaa&lt;span class="o">]&lt;/span>local-user readconf privilege level &lt;span class="m">15&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Включаем доступ по SSH для пользователя:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-aaa&lt;span class="o">]&lt;/span>local-user readconf service-type telnet terminal ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>sw-103-1-aaa&lt;span class="o">]&lt;/span>quit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="подключение-к-observium">&lt;span class="section-num">4.3&lt;/span> Подключение к Observium&lt;/h3>
&lt;ul>
&lt;li>Подключитесь к Observium.&lt;/li>
&lt;li>Добавьте коммутатор в список наблюдения в Observium:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@observium ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># /opt/observium/add_device.php sw-103-1 rocom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@observium ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># /opt/observium/discovery.php -h sw-103-1; /opt/observium/poller.php -h sw-103-1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="подключение-к-librenms">&lt;span class="section-num">4.4&lt;/span> Подключение к Librenms&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Подключитесь к Librenms (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/03/20/librenms-monitoring-system/">Система мониторинга LibreNMS&lt;/a>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Добавьте коммутатор в список наблюдения в Librenms:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u librenms /usr/local/bin/lnms device:add sw-103-1 -c rocom
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -u librenms /usr/local/bin/lnms device:poll sw-103-1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Если есть в базе данное устройство, но под другим именем, то можно его переименовать:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u librenms /usr/local/bin/lnms device:rename &amp;lt;old hostname&amp;gt; &amp;lt;new hostname&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>KVM. QEMU Guest Agent</title><link>https://yamadharma.github.io/ru/post/2024/09/05/kvm-qemu-guest-agent/</link><pubDate>Thu, 05 Sep 2024 16:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/05/kvm-qemu-guest-agent/</guid><description>&lt;p>KVM. QEMU Guest Agent.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#деривативы-redhat">&lt;span class="section-num">2.1&lt;/span> Деривативы Redhat&lt;/a>&lt;/li>
&lt;li>&lt;a href="#деривативы-debian">&lt;span class="section-num">2.2&lt;/span> Деривативы Debian&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#проверка-работы">&lt;span class="section-num">3&lt;/span> Проверка работы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#proxmox">&lt;span class="section-num">3.1&lt;/span> Proxmox&lt;/a>&lt;/li>
&lt;li>&lt;a href="#libvirt">&lt;span class="section-num">3.2&lt;/span> libvirt&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Программа-демон, которая устанавливается на ВМ.&lt;/li>
&lt;li>Обеспечивает выполнение команд на ВМ и обмен информацией между ВМ и узлом кластера.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="деривативы-redhat">&lt;span class="section-num">2.1&lt;/span> Деривативы Redhat&lt;/h3>
&lt;ul>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf -y install qemu-guest-agent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Включите службу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> --now qemu-guest-agent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="деривативы-debian">&lt;span class="section-num">2.2&lt;/span> Деривативы Debian&lt;/h3>
&lt;ul>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt install qemu-guest-agent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Включите службу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> --now qemu-guest-agent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="проверка-работы">&lt;span class="section-num">3&lt;/span> Проверка работы&lt;/h2>
&lt;h3 id="proxmox">&lt;span class="section-num">3.1&lt;/span> Proxmox&lt;/h3>
&lt;ul>
&lt;li>В консоли Proxmox выполните команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">qm agent &amp;lt;vmid&amp;gt; ping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В случае, если гостевые средства интеграции доступы эта команда возвращает пустой вывод.&lt;/li>
&lt;li>Если средства интеграции не доступны, то должна отобразиться ошибка.&lt;/li>
&lt;/ul>
&lt;h3 id="libvirt">&lt;span class="section-num">3.2&lt;/span> libvirt&lt;/h3>
&lt;ul>
&lt;li>В консоли выполните команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">virsh qemu-agent-command &amp;lt;vm_id&amp;gt;_&amp;lt;vm_name&amp;gt; &lt;span class="s1">&amp;#39;{&amp;#34;execute&amp;#34;: &amp;#34;guest-info&amp;#34;, &amp;#34;arguments&amp;#34;: {}}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Перенос виртуальной машины на Proxmox</title><link>https://yamadharma.github.io/ru/post/2024/09/04/migrating-virtual-machine-proxmox/</link><pubDate>Wed, 04 Sep 2024 16:58:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/04/migrating-virtual-machine-proxmox/</guid><description>&lt;p>Перенос виртуальной машины на Proxmox.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#перенос-образа-kvm">&lt;span class="section-num">1&lt;/span> Перенос образа kvm&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-виртуальной-машины">&lt;span class="section-num">1.1&lt;/span> Создание виртуальной машины&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#графический-интерфейс">&lt;span class="section-num">1.1.1&lt;/span> Графический интерфейс&lt;/a>&lt;/li>
&lt;li>&lt;a href="#интерфейс-командной-строки">&lt;span class="section-num">1.1.2&lt;/span> Интерфейс командной строки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#копирование-образа-диска">&lt;span class="section-num">1.2&lt;/span> Копирование образа диска&lt;/a>&lt;/li>
&lt;li>&lt;a href="#импорт-диска">&lt;span class="section-num">1.3&lt;/span> Импорт диска&lt;/a>&lt;/li>
&lt;li>&lt;a href="#после-переноса">&lt;span class="section-num">1.4&lt;/span> После переноса&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="перенос-образа-kvm">&lt;span class="section-num">1&lt;/span> Перенос образа kvm&lt;/h2>
&lt;h3 id="создание-виртуальной-машины">&lt;span class="section-num">1.1&lt;/span> Создание виртуальной машины&lt;/h3>
&lt;ul>
&lt;li>Создадим виртуальную машину в Proxmox с помощью графической утилиты или утилиты командной строки &lt;code>qm&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="графический-интерфейс">&lt;span class="section-num">1.1.1&lt;/span> Графический интерфейс&lt;/h4>
&lt;ul>
&lt;li>Вкладка &lt;em>General&lt;/em>. Идентификатор виртуальной машины (VM ID) будет задан автоматически (следующий свободный).&lt;/li>
&lt;li>Вкладка &lt;em>OS&lt;/em>. Операционная система выбирает &lt;em>Do Not Use Any Media&lt;/em>.&lt;/li>
&lt;li>Вкладка &lt;em>Disk&lt;/em>. Удалите диск по умолчанию &lt;code>scsi0&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="интерфейс-командной-строки">&lt;span class="section-num">1.1.2&lt;/span> Интерфейс командной строки&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Пусть идентификатор машины будет 111 (для определённости).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Рекомендуется использовать на всех виртуальных машинах &lt;em>qemu agent&lt;/em>, для обеспечения взаимодействия между гипервизором и виртуальной машиной (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/09/05/kvm-qemu-guest-agent/">KVM. QEMU Guest Agent&lt;/a>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Создадим виртуальную машину:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">qm create &lt;span class="m">111&lt;/span> --name vm111 --bootdisk scsi0 --net0 virtio,bridge&lt;span class="o">=&lt;/span>vmbr0,firewall&lt;span class="o">=&lt;/span>1,mtu&lt;span class="o">=&lt;/span>1,tag&lt;span class="o">=&lt;/span>&lt;span class="m">100&lt;/span> --agent &lt;span class="nv">enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> --scsihw virtio-scsi-pci
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>здесь у нас используется VLAN=100;&lt;/li>
&lt;li>&lt;code>mtu=1&lt;/code> : установить MTU таким же, как у родительского интерфейса (&lt;code>vmbr0&lt;/code>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="копирование-образа-диска">&lt;span class="section-num">1.2&lt;/span> Копирование образа диска&lt;/h3>
&lt;ul>
&lt;li>Необходимо выключить исходную виртуальную машину на хосте источнике.&lt;/li>
&lt;li>Найти образ жесткого диска, который используется в виртуальной машине.&lt;/li>
&lt;li>Пусть образ диска называется &lt;code>kvm_disk.qcow2&lt;/code>.&lt;/li>
&lt;li>Скопируем образ на хост назначения (Proxmox):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">scp /var/lib/libvirt/images/kvm_disk.qcow2 proxmox.example.com:/var/lib/vz/images
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="импорт-диска">&lt;span class="section-num">1.3&lt;/span> Импорт диска&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Импортируйте скопированный диск:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">qm importdisk &lt;span class="m">111&lt;/span> /var/lib/vz/images/kvm_disk.qcow2 local-lvm --format raw
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В результате будет выдано имя получившегося диска в виде &lt;code>unused0:local-lvm:vm-111-disk-0&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Подключите виртуальный диск к виртуальной машине:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">qm &lt;span class="nb">set&lt;/span> &lt;span class="m">111&lt;/span> --scsi0 local-lvm:vm-111-disk-0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Подключить можно и через графический интерфейс.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="после-переноса">&lt;span class="section-num">1.4&lt;/span> После переноса&lt;/h3>
&lt;ul>
&lt;li>Проверьте настройку виртуальной машины.&lt;/li>
&lt;li>Проверьте ip-адрес машины (у вас изменился mac-адрес).&lt;/li>
&lt;li>Установите, если надо quemu-guest-agent (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/09/05/kvm-qemu-guest-agent/">KVM. QEMU Guest Agent&lt;/a>).&lt;/li>
&lt;/ul></description></item><item><title>NetBox. Первоначальная настройка</title><link>https://yamadharma.github.io/ru/post/2024/09/03/netbox-initial-setup/</link><pubDate>Tue, 03 Sep 2024 19:19:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/03/netbox-initial-setup/</guid><description>&lt;p>NetBox. Первоначальная настройка.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#настройка-организации">&lt;span class="section-num">1&lt;/span> Настройка организации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#регионы">&lt;span class="section-num">1.1&lt;/span> Регионы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сайты">&lt;span class="section-num">1.2&lt;/span> Сайты&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#ipam">&lt;span class="section-num">2&lt;/span> IPAM&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#vlan">&lt;span class="section-num">2.1&lt;/span> VLAN&lt;/a>&lt;/li>
&lt;li>&lt;a href="#префиксы">&lt;span class="section-num">2.2&lt;/span> Префиксы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="настройка-организации">&lt;span class="section-num">1&lt;/span> Настройка организации&lt;/h2>
&lt;h3 id="регионы">&lt;span class="section-num">1.1&lt;/span> Регионы&lt;/h3>
&lt;ul>
&lt;li>Локальная ссылка: &lt;a href="https://netbox.example.com/dcim/regions/" target="_blank" rel="noopener">https://netbox.example.com/dcim/regions/&lt;/a>&lt;/li>
&lt;li>Можно делать иерархию.&lt;/li>
&lt;li>Я задал в регионах:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Moscow
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно добавить родительский регион:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Russia
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="сайты">&lt;span class="section-num">1.2&lt;/span> Сайты&lt;/h3>
&lt;ul>
&lt;li>Сделал сайты по территориям (зданиям):
&lt;ul>
&lt;li>Donskaya&lt;/li>
&lt;li>Pavlovskaya&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="ipam">&lt;span class="section-num">2&lt;/span> IPAM&lt;/h2>
&lt;h3 id="vlan">&lt;span class="section-num">2.1&lt;/span> VLAN&lt;/h3>
&lt;ul>
&lt;li>Локальная ссылка: &lt;a href="https://netbox.example.com/ipam/vlans/" target="_blank" rel="noopener">https://netbox.example.com/ipam/vlans/&lt;/a>&lt;/li>
&lt;li>Загрузил VLAN в CSV-виде:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vid,name,status,site
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1,default,active,donskaya
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2,management,active,donskaya
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="префиксы">&lt;span class="section-num">2.2&lt;/span> Префиксы&lt;/h3>
&lt;ul>
&lt;li>Локальная ссылка: &lt;a href="https://netbox.example.com/ipam/prefixes/" target="_blank" rel="noopener">https://netbox.example.com/ipam/prefixes/&lt;/a>&lt;/li>
&lt;li>Загрузил префиксы в CSV-виде:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">prefix,status,vlan,description
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.128.0.0/16,active,1,&amp;#34;VLAN по умолчанию&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.129.0.0/16,active,2,&amp;#34;Коммутаторы&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Wayland. Удалённый доступ. Waypipe</title><link>https://yamadharma.github.io/ru/post/2024/09/01/wayland-remote-desktop-waypipe/</link><pubDate>Sun, 01 Sep 2024 19:22:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/09/01/wayland-remote-desktop-waypipe/</guid><description>&lt;p>Wayland. Удалённый доступ. Waypipe.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">2&lt;/span> Использование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://gitlab.freedesktop.org/mstoeckl/waypipe/" target="_blank" rel="noopener">https://gitlab.freedesktop.org/mstoeckl/waypipe/&lt;/a>&lt;/li>
&lt;li>Описание: &lt;a href="https://mstoeckl.com/notes/gsoc/blog.html" target="_blank" rel="noopener">https://mstoeckl.com/notes/gsoc/blog.html&lt;/a>&lt;/li>
&lt;li>Позволяет запускать приложения на другом хосте.&lt;/li>
&lt;li>Waypipe обеспечивает трансляцию на другой хост через один сетевой сокет сообщений Wayland и сериализированных изменений в буферах разделяемой памяти и DMABUF.&lt;/li>
&lt;li>В качестве транспорта может применяться SSH по аналогии со встроенным в SSH перенаправлением протокола X11 (&lt;code>ssh -X&lt;/code>).&lt;/li>
&lt;li>Waypipe должен быть установлен как на стороне клиента, так и на стороне сервера - один экземпляр выступает в роли сервера Wayland, а второй клиента Wayland.&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">2&lt;/span> Использование&lt;/h2>
&lt;ul>
&lt;li>Для запуска программы weston-terminal с другого хоста и отображения интерфейса на текущей системе достаточно выполнить команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">waypipe ssh -C user@server weston-terminal
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Аргументы командной строки:
&lt;ul>
&lt;li>до &lt;code>ssh&lt;/code> применяются только к &lt;code>waypipe&lt;/code>;&lt;/li>
&lt;li>после &lt;code>ssh&lt;/code> применяются к &lt;code>ssh&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Файловая система ipfs</title><link>https://yamadharma.github.io/ru/post/2024/08/30/ipfs-file-system/</link><pubDate>Fri, 30 Aug 2024 20:27:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/30/ipfs-file-system/</guid><description>&lt;p>Файловая система ipfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#каталоги">&lt;span class="section-num">3&lt;/span> Каталоги&lt;/a>&lt;/li>
&lt;li>&lt;a href="#web-консоль">&lt;span class="section-num">4&lt;/span> Web-консоль&lt;/a>&lt;/li>
&lt;li>&lt;a href="#команды">&lt;span class="section-num">5&lt;/span> Команды&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#редактирование-настроек">&lt;span class="section-num">5.1&lt;/span> Редактирование настроек&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#запуск">&lt;span class="section-num">6&lt;/span> Запуск&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#системный-демон">&lt;span class="section-num">6.1&lt;/span> Системный демон&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пользовательский-демон">&lt;span class="section-num">6.2&lt;/span> Пользовательский демон&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пользовательский-демон-в-другом-каталоге">&lt;span class="section-num">6.3&lt;/span> Пользовательский демон в другом каталоге&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#первичная-настройка">&lt;span class="section-num">7&lt;/span> Первичная настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#cors">&lt;span class="section-num">7.1&lt;/span> CORS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">8&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>IPFS состоит из следующих уровней:&lt;/li>
&lt;li>уровень имён: пользователи могут выбирать глобальные имена (привязка к DNS при помощи записей TXT);&lt;/li>
&lt;li>уровень файлов: файловая система с изменяемыми файлами и снимками;&lt;/li>
&lt;li>уровень объектов: неизменяемые объекты (могут или храниться в распределённой хеш-таблице (если маленькие), или скачиваться как в торрентах);&lt;/li>
&lt;li>уровень обмена данными: протокол BitSwap;&lt;/li>
&lt;li>уровень маршрутизации: как узлам добираться друг до друга;&lt;/li>
&lt;li>сетевой уровень: по каким протоколам узлам связываться между собой;&lt;/li>
&lt;li>уровень подлинности узлов (identity): чтобы нельзя было дублировать слишком много узлов (узлы с заданным номером), нарушая целостность сети.&lt;/li>
&lt;li>Сайт: &lt;a href="https://ipfs.tech/" target="_blank" rel="noopener">https://ipfs.tech/&lt;/a>&lt;/li>
&lt;li>Репозиторий описания: &lt;a href="https://github.com/ipfs/ipfs" target="_blank" rel="noopener">https://github.com/ipfs/ipfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/h3>
&lt;ul>
&lt;li>В portage присутствует реализация kubo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge net-p2p/kubo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="каталоги">&lt;span class="section-num">3&lt;/span> Каталоги&lt;/h2>
&lt;ul>
&lt;li>Каталог по умолчанию для системного демона:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/var/lib/ipfs/.ipfs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Конфигурационный файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$IPFS_PATH&lt;/span>/config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Конфигурационный файл для системного демона:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/var/lib/ipfs/.ipfs/config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Конфигурационный файл для пользовательского демона:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">~/.ipfs/config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="web-консоль">&lt;span class="section-num">4&lt;/span> Web-консоль&lt;/h2>
&lt;ul>
&lt;li>Подключиться к web-консоли:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">http://localhost:5001/webui/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройки IPFS можно менять в webui.&lt;/li>
&lt;li>Локальный IPFS-шлюз:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">http://localhost:8080/ipfs/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="команды">&lt;span class="section-num">5&lt;/span> Команды&lt;/h2>
&lt;h3 id="редактирование-настроек">&lt;span class="section-num">5.1&lt;/span> Редактирование настроек&lt;/h3>
&lt;ul>
&lt;li>Общая команда редактирования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ipfs config edit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="запуск">&lt;span class="section-num">6&lt;/span> Запуск&lt;/h2>
&lt;h3 id="системный-демон">&lt;span class="section-num">6.1&lt;/span> Системный демон&lt;/h3>
&lt;ul>
&lt;li>Инициализируйте файловую систему ipfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su -s /bin/sh -c &lt;span class="s2">&amp;#34;ipfs init -e&amp;#34;&lt;/span> ipfs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запуск системного демона:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> --now ipfs.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="пользовательский-демон">&lt;span class="section-num">6.2&lt;/span> Пользовательский демон&lt;/h3>
&lt;ul>
&lt;li>Инициализируйте файловую систему ipfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ipfs init -e
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запуск пользовательского демона:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> --now ipfs@username.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="пользовательский-демон-в-другом-каталоге">&lt;span class="section-num">6.3&lt;/span> Пользовательский демон в другом каталоге&lt;/h3>
&lt;ul>
&lt;li>Инициализируйте файловую систему ipfs в каталоге &lt;code>/data/ipfs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo mkdir -p /data/ipfs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo chown -R username /data/ipfs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">IPFS_PATH&lt;/span>&lt;span class="o">=&lt;/span>/data/ipfs/ ipfs init -e
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте переопределение для сервиса systemd:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl edit ipfs@username.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отредактируйте файл &lt;code>/etc/systemd/system/ipfs@username.service.d/override.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">Service&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Environment&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">IPFS_PATH&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="nx">ipfs&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запуск пользовательского демона:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> --now ipfs@username.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="первичная-настройка">&lt;span class="section-num">7&lt;/span> Первичная настройка&lt;/h2>
&lt;ul>
&lt;li>Проверьте работу ipfs, откройте в броузере:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">http://localhost:8080/ipfs/QmS4ustL54uo8FzR9455qaxZwuMiUhyvMcX9Ba8nUH4uVv/readme
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="cors">&lt;span class="section-num">7.1&lt;/span> CORS&lt;/h3>
&lt;ul>
&lt;li>Cross-origin Resource Sharing (CORS) есть механизм безопасности браузера, который предотвращает доступ неавторизованных скриптов к ресурсам из разных доменов.&lt;/li>
&lt;li>Можно настроить свой узел, чтобы разрешить обработку запросов из других доменов, установив соответствующие заголовки в конфигурации узла:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin &lt;span class="s1">&amp;#39;[&amp;#34;http://ip_вашего сервера:5001&amp;#34;, &amp;#34;http://127.0.0.1:5001&amp;#34;, &amp;#34;https://webui.ipfs.io&amp;#34;]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods &lt;span class="s1">&amp;#39;[&amp;#34;PUT&amp;#34;, &amp;#34;GET&amp;#34;, &amp;#34;POST&amp;#34;]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Или прописать wildcard:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin &lt;span class="s1">&amp;#39;[&amp;#34;*&amp;#34;]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods &lt;span class="s1">&amp;#39;[&amp;#34;PUT&amp;#34;, &amp;#34;GET&amp;#34;, &amp;#34;POST&amp;#34;]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">8&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Awesome IPFS &lt;a href="https://github.com/ipfs/awesome-ipfs" target="_blank" rel="noopener">https://github.com/ipfs/awesome-ipfs&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Редактирование текста в броузере</title><link>https://yamadharma.github.io/ru/post/2024/08/28/emacs-edit-text-area-browser/</link><pubDate>Wed, 28 Aug 2024 21:01:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/28/emacs-edit-text-area-browser/</guid><description>&lt;p>Emacs. Редактирование текста в броузере.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#edit-with-emacs">&lt;span class="section-num">2&lt;/span> Edit with Emacs&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#плагины-для-броузера">&lt;span class="section-num">2.1&lt;/span> Плагины для броузера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пакет-для-emacs">&lt;span class="section-num">2.2&lt;/span> Пакет для emacs&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#ghost-text">&lt;span class="section-num">3&lt;/span> Ghost Text&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#плагины-для-броузера">&lt;span class="section-num">3.1&lt;/span> Плагины для броузера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пакет-для-emacs">&lt;span class="section-num">3.2&lt;/span> Пакет для emacs&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Позволяет редактировать текстовые области веб-страницы с помощью Emacs (и других редакторов).&lt;/li>
&lt;/ul>
&lt;h2 id="edit-with-emacs">&lt;span class="section-num">2&lt;/span> Edit with Emacs&lt;/h2>
&lt;h3 id="плагины-для-броузера">&lt;span class="section-num">2.1&lt;/span> Плагины для броузера&lt;/h3>
&lt;ul>
&lt;li>Chrome:
&lt;ul>
&lt;li>Плагин: &lt;a href="https://chrome.google.com/webstore/detail/edit-with-emacs/ljobjlafonikaiipfkggjbhkghgicgoh" target="_blank" rel="noopener">https://chrome.google.com/webstore/detail/edit-with-emacs/ljobjlafonikaiipfkggjbhkghgicgoh&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Firefox:
&lt;ul>
&lt;li>Плагин: &lt;a href="https://addons.mozilla.org/en-US/firefox/addon/edit-with-emacs1/" target="_blank" rel="noopener">https://addons.mozilla.org/en-US/firefox/addon/edit-with-emacs1/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/stsquad/emacs_chrome" target="_blank" rel="noopener">https://github.com/stsquad/emacs_chrome&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="пакет-для-emacs">&lt;span class="section-num">2.2&lt;/span> Пакет для emacs&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/stsquad/emacs_chrome" target="_blank" rel="noopener">https://github.com/stsquad/emacs_chrome&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ghost-text">&lt;span class="section-num">3&lt;/span> Ghost Text&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://ghosttext.fregante.com/" target="_blank" rel="noopener">https://ghosttext.fregante.com/&lt;/a>&lt;/li>
&lt;li>Система более удобная и продвинутая, чем &lt;em>Edit with Emacs&lt;/em>, но работает не всегда.&lt;/li>
&lt;li>Поддерживаемые редакторы:
&lt;ul>
&lt;li>Emacs&lt;/li>
&lt;li>Sublime Text&lt;/li>
&lt;li>VS Code&lt;/li>
&lt;li>Vim&lt;/li>
&lt;li>Neovim&lt;/li>
&lt;li>ACME Editor&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="плагины-для-броузера">&lt;span class="section-num">3.1&lt;/span> Плагины для броузера&lt;/h3>
&lt;ul>
&lt;li>Firefox:
&lt;ul>
&lt;li>Плагин: &lt;a href="https://addons.mozilla.org/ru/firefox/addon/ghosttext/" target="_blank" rel="noopener">https://addons.mozilla.org/ru/firefox/addon/ghosttext/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Chrome:
&lt;ul>
&lt;li>Плагин: &lt;a href="https://chromewebstore.google.com/detail/ghosttext/godiecgffnchndlihlpaajjcplehddca" target="_blank" rel="noopener">https://chromewebstore.google.com/detail/ghosttext/godiecgffnchndlihlpaajjcplehddca&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="пакет-для-emacs">&lt;span class="section-num">3.2&lt;/span> Пакет для emacs&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/alpha22jp/atomic-chrome" target="_blank" rel="noopener">https://github.com/alpha22jp/atomic-chrome&lt;/a>&lt;/li>
&lt;li>Ввод в Emacs мгновенно и непрерывно отображается в браузере.&lt;/li>
&lt;li>Броузер и emacs обновляются до одного и того же содержимого в двух направлениях.&lt;/li>
&lt;/ul></description></item><item><title>Система установки SALI</title><link>https://yamadharma.github.io/ru/post/2024/08/27/sali-automatic-linux-installer/</link><pubDate>Tue, 27 Aug 2024 17:42:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/27/sali-automatic-linux-installer/</guid><description>&lt;p>Система установки SALI&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://gitlab.com/surfsara/sali" target="_blank" rel="noopener">https://gitlab.com/surfsara/sali&lt;/a>&lt;/li>
&lt;li>Позволяет устанавливать Linux на несколько компьютеров одновременно.&lt;/li>
&lt;li>Загрузка образов поддерживается через BitTorrent и rsync.&lt;/li>
&lt;/ul></description></item><item><title>Sway. Сочетания клавиш</title><link>https://yamadharma.github.io/ru/post/2024/08/24/sway-keybindings/</link><pubDate>Sat, 24 Aug 2024 20:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/24/sway-keybindings/</guid><description>&lt;p>Sway. Сочетания клавиш.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#источники-вдохновения">&lt;span class="section-num">1&lt;/span> Источники вдохновения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#семантические-комментарии">&lt;span class="section-num">2&lt;/span> Семантические комментарии&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сочетания-клавиш">&lt;span class="section-num">3&lt;/span> Сочетания клавиш&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="источники-вдохновения">&lt;span class="section-num">1&lt;/span> Источники вдохновения&lt;/h2>
&lt;ul>
&lt;li>Примеры раскладки клавиатуры были взяты из следующих источников:
&lt;ul>
&lt;li>&lt;a href="https://regolith-desktop.com/docs/reference/keybindings/" target="_blank" rel="noopener">https://regolith-desktop.com/docs/reference/keybindings/&lt;/a>
&lt;ul>
&lt;li>Настройка сочетаний клавиш для Regolith Linux/&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://mark.stosberg.com/sway-keybindings/" target="_blank" rel="noopener">https://mark.stosberg.com/sway-keybindings/&lt;/a>
&lt;ul>
&lt;li>Просто описание используемых сочетаний клавиш, инспирированных дистрибутивом Regolith Linux.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="семантические-комментарии">&lt;span class="section-num">2&lt;/span> Семантические комментарии&lt;/h2>
&lt;ul>
&lt;li>Для обозначения раскладки клавиш в файле конфигурации используется семантические комментарии.&lt;/li>
&lt;li>Категория (category) используется для группировки типов действий, действие (action) используется для обозначения конкретного действия, сочетание клавиш (keybinding) используется для указания конкретных клавиш.&lt;/li>
&lt;li>Формат разработан таким образом, чтобы его можно было легко анализировать скриптом и можно было читать в его исходной форме людьми:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## &amp;lt;category&amp;gt; // &amp;lt;action&amp;gt; // &amp;lt;keybinding&amp;gt; ## &amp;lt;reserved for user notes&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Текст внутри &lt;code>&amp;lt;category&amp;gt;&lt;/code>, &lt;code>&amp;lt;action&amp;gt;&lt;/code>, &lt;code>&amp;lt;keybinding&amp;gt;&lt;/code> не должен содержать последовательности &lt;code>##&lt;/code>, &lt;code>//&lt;/code> или перевод строки.&lt;/li>
&lt;li>Например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Navigate // Relative Window // &amp;lt;Super&amp;gt; ↑ ↓ ← → ##
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Left focus left
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="сочетания-клавиш">&lt;span class="section-num">3&lt;/span> Сочетания клавиш&lt;/h2>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Сочетания клаыиш для Sway
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Действие&lt;/th>
&lt;th>Сочетание клавиш&lt;/th>
&lt;th>Описание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Launch - Application&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>Space&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Launch - Browser&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> Enter&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Launch - Command&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> Space&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Launch - File Browser&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> n&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Launch - File Search&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎇ Alt&lt;/code> &lt;code>Space&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Launch - Notification Viewer&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>n&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Launch - Terminal&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>Enter&lt;/code>&lt;/td>
&lt;td>Запустить терминал&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Launch - This Dialog&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> ?&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Bluetooth Settings&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> b&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Carry Window to Workspace 1 - 10&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎇ Alt&lt;/code> &lt;code>0&lt;/code> .. &lt;code>9&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Carry Window to Workspace 11 - 19&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎇ Alt&lt;/code> &lt;code>⎈ Ctrl&lt;/code> 1..9&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Containing Workspace&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎈ Ctrl&lt;/code> &lt;code>⇧ Shift&lt;/code> &lt;code>↑&lt;/code> &lt;code>↓&lt;/code> &lt;code>←&lt;/code> &lt;code>→&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Display Settings&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> d&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Load Window Layout&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> .&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Move Window to Workspace 1 - 10&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> 0..9&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Move Window to Workspace 11 - 19&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎈ Ctrl&lt;/code> &lt;code>⇧ Shift&lt;/code> 1..9&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Move to Scratchpad&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎈ Ctrl&lt;/code> m&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Next Window Orientation&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> Backspace&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Save Window Layout&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> ,&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Settings&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> c&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Tile/Float Focus Toggle&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> t&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Toggle Bar&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> i&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Wifi Settings&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> w&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Window Floating Toggle&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> f&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Window Fullscreen Toggle&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> f&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Window Layout Mode&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> t&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Window Position&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> k j h l&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modify - Window Position&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> ↑ ↓ ← →&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Navigate - Next Workspace&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> Tab&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Navigate - Next Workspace&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎇ Alt&lt;/code> →&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Navigate - Previous Workspace&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎇ Alt&lt;/code> ←&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Navigate - Previous Workspace&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> Tab&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Navigate - Relative Window&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> k j h l&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Navigate - Relative Window&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> ↑ ↓ ← →&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Navigate - Scratchpad&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎈ Ctrl&lt;/code> a&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Navigate - Window by Name&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎈ Ctrl&lt;/code> Space&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Navigate - Workspace 11-19&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎈ Ctrl&lt;/code> 1..9&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Navigate - Workspaces 1-10&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> 0..9&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Resize - Enter Resize Mode&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> r&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Session - Exit App&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> q&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Session - Lock Screen&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> Escape&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Session - Logout&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> e&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Session - Power Down&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> p&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Session - Reboot&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> b&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Session - Refresh Session&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> r&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Session - Reload Config&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> c&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Session - Restart&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎈ Ctrl&lt;/code> r&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Session - Sleep&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⇧ Shift&lt;/code> &lt;code>s&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Session - Terminate App&lt;/td>
&lt;td>&lt;code>◆ Super&lt;/code> &lt;code>⎇ Alt&lt;/code> &lt;code>q&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Агент для ключей keychain</title><link>https://yamadharma.github.io/ru/post/2024/08/23/keychain/</link><pubDate>Fri, 23 Aug 2024 17:12:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/23/keychain/</guid><description>&lt;p>Агент для ключей keychain.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#интеграция-в-систему">&lt;span class="section-num">3&lt;/span> Интеграция в систему&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Набор скриптов для управления ssh-agent и gpg-agent.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/h3>
&lt;ul>
&lt;li>Установим пакет:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge net-misc/keychain
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="интеграция-в-систему">&lt;span class="section-num">3&lt;/span> Интеграция в систему&lt;/h2>
&lt;ul>
&lt;li>Добавьте в &lt;code>~/.bashrc&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">keychain ~/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. ~/.keychain/&lt;span class="si">${&lt;/span>&lt;span class="nv">HOSTNAME&lt;/span>&lt;span class="si">}&lt;/span>-sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. ~/.keychain/&lt;span class="si">${&lt;/span>&lt;span class="nv">HOSTNAME&lt;/span>&lt;span class="si">}&lt;/span>-sh-gpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>По желанию можно добавить ещё несколько ключей.&lt;/li>
&lt;/ul></description></item><item><title>Агент для ключей gpg-agent</title><link>https://yamadharma.github.io/ru/post/2024/08/23/gpg-agent/</link><pubDate>Fri, 23 Aug 2024 13:55:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/23/gpg-agent/</guid><description>&lt;p>Агент для ключей gpg-agent.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#отличия-gpg-agent-от-ssh-agent">&lt;span class="section-num">1.1&lt;/span> Отличия gpg-agent от ssh-agent&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/a>&lt;/li>
&lt;li>&lt;a href="#fedora">&lt;span class="section-num">2.2&lt;/span> Fedora&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#структура">&lt;span class="section-num">3&lt;/span> Структура&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сокеты">&lt;span class="section-num">3.1&lt;/span> Сокеты&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#работа-с-ключами-ssh">&lt;span class="section-num">4&lt;/span> Работа с ключами ssh&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-ssh-auth-sock">&lt;span class="section-num">4.1&lt;/span> Установка SSH_AUTH_SOCK&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавление-поддержки-в-gpg-agent">&lt;span class="section-num">4.2&lt;/span> Добавление поддержки в gpg-agent&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавление-ключей">&lt;span class="section-num">4.3&lt;/span> Добавление ключей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h3 id="отличия-gpg-agent-от-ssh-agent">&lt;span class="section-num">1.1&lt;/span> Отличия gpg-agent от ssh-agent&lt;/h3>
&lt;ul>
&lt;li>Можно выбирать, какие конкретно ключи хранить в агенте и они там будут храниться после перезагрузки.&lt;/li>
&lt;li>Для каждого ключа можно отдельно задать время жизни доступа к нему и дополнительное подтверждение на использование.&lt;/li>
&lt;li>У gpg-agent есть дополнительный уровень защиты &amp;mdash; пароль на доступ к ключу.&lt;/li>
&lt;li>Есть GUI для контроля доступа.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/h3>
&lt;ul>
&lt;li>Установим gpg:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-crypt/gnupg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим приложение для ввода пароля:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-crypt/pinentry
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="fedora">&lt;span class="section-num">2.2&lt;/span> Fedora&lt;/h3>
&lt;h2 id="структура">&lt;span class="section-num">3&lt;/span> Структура&lt;/h2>
&lt;h3 id="сокеты">&lt;span class="section-num">3.1&lt;/span> Сокеты&lt;/h3>
&lt;ul>
&lt;li>gnupg предоставляет пользовательские сокеты systemd, которые включены по умолчанию: gpg-agent.socket, gpg-agent-extra.socket, gpg-agent-browser.socket, gpg-agent-ssh.socket и dirmngr.socket
&lt;ul>
&lt;li>основной сокет &lt;code>gpg-agent.socket&lt;/code> используется gpg для подключения к демону &lt;code>gpg-agent&lt;/code>;&lt;/li>
&lt;li>&lt;code>gpg-agent-extra.socket&lt;/code> &amp;mdash; настройка переадресации Unix-сокета с удалённой системы, что позволяет использовать &lt;code>gpg&lt;/code> на удалённой системе без передачи на неё закрытых ключей;&lt;/li>
&lt;li>&lt;code>gpg-agent-browser.socket&lt;/code> позволяет веб-браузерам обращаться к демону &lt;code>gpg-agent&lt;/code>;&lt;/li>
&lt;li>&lt;code>gpg-agent-ssh.socket&lt;/code> может использоваться SSH для кэширования ключей SSH, добавленных программой ssh-add;&lt;/li>
&lt;li>&lt;code>dirmngr.socket&lt;/code> запускает демон GnuPG, обрабатывающий соединения с серверами ключей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="работа-с-ключами-ssh">&lt;span class="section-num">4&lt;/span> Работа с ключами ssh&lt;/h2>
&lt;ul>
&lt;li>gpg-agent поддерживает эмуляцию агента OpenSSH.&lt;/li>
&lt;/ul>
&lt;h3 id="установка-ssh-auth-sock">&lt;span class="section-num">4.1&lt;/span> Установка SSH_AUTH_SOCK&lt;/h3>
&lt;ul>
&lt;li>Установите переменные окружения (в &lt;code>~/.bashrc&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">unset&lt;/span> SSH_AGENT_PID
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">gnupg_SSH_AUTH_SOCK_by&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="nv">0&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -ne &lt;span class="nv">$$&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">SSH_AUTH_SOCK&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>gpgconf --list-dirs agent-ssh-socket&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="добавление-поддержки-в-gpg-agent">&lt;span class="section-num">4.2&lt;/span> Добавление поддержки в gpg-agent&lt;/h3>
&lt;ul>
&lt;li>Включим поддержку ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> enable-ssh-support &amp;gt;&amp;gt; ~/.gnupg/gpg-agent.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="добавление-ключей">&lt;span class="section-num">4.3&lt;/span> Добавление ключей&lt;/h3>
&lt;ul>
&lt;li>Идентификаторы одобренных для агента ключей сохраняются в &lt;code>~/.gnupg/sshcontrol&lt;/code>.&lt;/li>
&lt;li>Рекомендуется отключить в &lt;code>/etc/ssh/ssh_config&lt;/code>, &lt;code>~/.ssh/config&lt;/code> опцию &lt;code>AddKeysToAgent&lt;/code>, ответственную за автоматическое добавление ключей ssh.&lt;/li>
&lt;li>Их можно туда добавлять вручную или через &lt;code>ssh-add&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_ed25519
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_ecdsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сначала &lt;code>ssh&lt;/code> спросит парольную фразу для ключа, после чего появится диалог, где нужно выбрать пароль для шифрования ключа в агенте, обычно это простая короткая фраза (не пароль к ключу).&lt;/li>
&lt;/ul></description></item><item><title>Агент для ключей ssh-agent</title><link>https://yamadharma.github.io/ru/post/2024/08/22/ssh-agent/</link><pubDate>Thu, 22 Aug 2024 20:08:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/22/ssh-agent/</guid><description>&lt;p>Агент для ключей ssh-agent.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">2&lt;/span> Использование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Является агентом по умолчанию, включённым в OpenSSH.&lt;/li>
&lt;li>Вводить парольную фразу каждый раз, когда используется &lt;em>ssh&lt;/em> не очень удобно.&lt;/li>
&lt;li>Удобнее ввести пароль один раз, а затем все время пользоваться.&lt;/li>
&lt;li>Для этой задачи используется &lt;em>ssh-agent&lt;/em>.&lt;/li>
&lt;li>&lt;em>ssh-agent&lt;/em> хранит секретные ключи.&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">2&lt;/span> Использование&lt;/h2>
&lt;ul>
&lt;li>&lt;em>ssh-agent&lt;/em> создаёт файл-сокет с именем &lt;code>/tmp/ssh-XXXXXXXX/agent.ppid&lt;/code>, через который осуществляется взаимодействие с агентом.&lt;/li>
&lt;li>Всем дочерним процессам агент при помощи переменных окружения &lt;code>SSH_AUTH_SOCK&lt;/code> (имя файла-сокета) и &lt;code>SSH_AGENT_PID&lt;/code> (идентификатор процесс агента) сообщает информацию о том, как с ним можно связаться.&lt;/li>
&lt;li>Чтобы использовать эти переменные, запустите через &lt;code>eval&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">eval&lt;/span> &lt;span class="k">$(&lt;/span>ssh-agent&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Программа &lt;em>ssh-add&lt;/em> добавляет и удаляет ключи у агента:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-add options file
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После того как агент запущен и выполняется, необходимо сообщить ему информацию о ключах, например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_ed25519
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При вызове без параметров &lt;em>ssh-add&lt;/em> сообщает агенту информацию о ключах из файлов &lt;code>identity&lt;/code>, &lt;code>id_dsa&lt;/code> и &lt;code>id_rsa&lt;/code>.&lt;/li>
&lt;li>При этом программа спрашивает парольную фразу для каждого из ключей.&lt;/li>
&lt;li>Ключ, для которого правильно была введена парольная фраза передаётся агенту.&lt;/li>
&lt;li>Если в качестве аргумента командной строки указан файл, программа сообщает агенту информацию только о том ключе, который находится в файле.&lt;/li>
&lt;li>Список известных агенту секретных ключей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-add -l
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Опции командной строки программы &lt;em>ssh-add&lt;/em>:
&lt;ul>
&lt;li>&lt;code>-l&lt;/code> : показать список отпечатков известных агенту ключей;&lt;/li>
&lt;li>&lt;code>-L&lt;/code> : показать информацию обо всех открытых ключах, соответствующих секретным ключам, известным &lt;em>ssh-add&lt;/em>;&lt;/li>
&lt;li>&lt;code>-d&lt;/code> : удалить ключ у агента;&lt;/li>
&lt;li>&lt;code>-D&lt;/code> : удалить все ключи у агента;&lt;/li>
&lt;li>&lt;code>-x&lt;/code> : заблокировать агента паролем;&lt;/li>
&lt;li>&lt;code>-X&lt;/code> : разблокировать агента.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Чтобы запустить агент автоматически и убедиться, что только один &lt;code>ssh-agent&lt;/code> процесс выполняется одновременно, добавьте следующее в &lt;code>~/.bashrc&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> ! pgrep -u &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$USER&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> ssh-agent &amp;gt; /dev/null&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssh-agent -t 1h &amp;gt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$XDG_RUNTIME_DIR&lt;/span>&lt;span class="s2">/ssh-agent.env&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> ! -f &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$SSH_AUTH_SOCK&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">source&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$XDG_RUNTIME_DIR&lt;/span>&lt;span class="s2">/ssh-agent.env&amp;#34;&lt;/span> &amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Подпись коммитов git</title><link>https://yamadharma.github.io/ru/post/2024/08/22/verifying-git-commits/</link><pubDate>Thu, 22 Aug 2024 15:13:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/22/verifying-git-commits/</guid><description>&lt;p>Подпись коммитов git.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#варианты-подписания-коммитов">&lt;span class="section-num">2&lt;/span> Варианты подписания коммитов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Коммиты имеют следующие свойства:&lt;/p>
&lt;ul>
&lt;li>author (автор) &amp;mdash; контрибьютор, выполнивший работу (указывается для справки);&lt;/li>
&lt;li>committer (коммитер) &amp;mdash; пользователь, который закоммитил изменения.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Эти свойства можно переопределить при совершении коммита.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Авторство коммита можно подделать.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>В git есть функция подписи коммитов.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Подпись коммита позволяет удостовериться в том, кто является коммитером. Авторство не проверяется.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="варианты-подписания-коммитов">&lt;span class="section-num">2&lt;/span> Варианты подписания коммитов&lt;/h2>
&lt;ul>
&lt;li>Для подписывания коммитов используются:
&lt;ul>
&lt;li>технология PGP:
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/01/28/verifying-git-commits-gpg/">Верификация коммитов git с помощью GPG&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ключи SSH:
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/14/verifying-git-commits-ssh/">Подпись коммитов git ключом ssh&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Агенты для хранения ключей</title><link>https://yamadharma.github.io/ru/post/2024/08/22/key-storage-agent/</link><pubDate>Thu, 22 Aug 2024 15:04:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/22/key-storage-agent/</guid><description>&lt;p>Агенты для хранения ключей.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#агенты-для-ключей">&lt;span class="section-num">2&lt;/span> Агенты для ключей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Когда клиент пытается использовать ключ, он сначала делает запрос к агенту хранения ключей и делегирует ему криптографическую операцию с закрытым ключом.&lt;/li>
&lt;li>Без агента клиент напрямую читает ключи с диска, если ключ зашифрован, то клиент спрашивает соответствующую парольную фразу.&lt;/li>
&lt;/ul>
&lt;h2 id="агенты-для-ключей">&lt;span class="section-num">2&lt;/span> Агенты для ключей&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/22/ssh-agent/">Агент для ключей ssh-agent&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/23/gpg-agent/">Агент для ключей gpg-agent&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/23/keychain/">Агент для ключей keychain&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Wayland. Менеджер окон Sway</title><link>https://yamadharma.github.io/ru/post/2024/08/21/wayland-sway/</link><pubDate>Wed, 21 Aug 2024 21:14:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/21/wayland-sway/</guid><description>&lt;p>Менеджер окон Sway.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#замена-приложений">&lt;span class="section-num">3&lt;/span> Замена приложений&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://swaywm.org/" target="_blank" rel="noopener">https://swaywm.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/swaywm/sway" target="_blank" rel="noopener">https://github.com/swaywm/sway&lt;/a>&lt;/li>
&lt;li>Создавался для замены i3 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>) под Wayland.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/">Переход на Sway&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="замена-приложений">&lt;span class="section-num">3&lt;/span> Замена приложений&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/11/wayland-applications/">Wayland. Аналоги приложений&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/12/08/sway-systemd-integration/">Sway. Интеграция systemd&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/24/sway-keybindings/">Sway. Сочетания клавиш&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/12/sway-configuration/">Sway. Конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/20/sway-loading/">Sway. Загрузка&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Подпись коммитов git ключом ssh</title><link>https://yamadharma.github.io/ru/post/2024/08/14/verifying-git-commits-ssh/</link><pubDate>Wed, 14 Aug 2024 22:08:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/14/verifying-git-commits-ssh/</guid><description>&lt;p>Подпись коммитов git ключом ssh.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подпись-коммитов-git-ключом-ssh">&lt;span class="section-num">2&lt;/span> Подпись коммитов git ключом ssh&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ключ-для-подписи">&lt;span class="section-num">2.1&lt;/span> Ключ для подписи&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-подписи-ключом-ssh">&lt;span class="section-num">2.2&lt;/span> Настройка подписи ключом ssh&lt;/a>&lt;/li>
&lt;li>&lt;a href="#доверенные-подписи">&lt;span class="section-num">2.3&lt;/span> Доверенные подписи&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#итоговый-config-git-config">&lt;span class="section-num">3&lt;/span> Итоговый &lt;code>~/config/git/config&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>В git можно производить подпись коммитов с помощью ssh-ключа.&lt;/li>
&lt;/ul>
&lt;h2 id="подпись-коммитов-git-ключом-ssh">&lt;span class="section-num">2&lt;/span> Подпись коммитов git ключом ssh&lt;/h2>
&lt;h3 id="ключ-для-подписи">&lt;span class="section-num">2.1&lt;/span> Ключ для подписи&lt;/h3>
&lt;ul>
&lt;li>Создадим ключ для подписи коммитов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -t ed25519 -f ~/.ssh/id_ed25519-git -C &lt;span class="s2">&amp;#34;your_email@example.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавляем ключ в агент (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/08/22/key-storage-agent/">Агенты для хранения ключей&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_ed25519-git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавьте ключ в учётную запись github (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/04/github-command-line-utilities/">github: утилиты командной строки&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gh ssh-key add ~/.ssh/id_ed25519-git.pub --title your_email@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gh ssh-key add ~/.ssh/id_ed25519-git.pub --title your_email@example.com --type signing
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-подписи-ключом-ssh">&lt;span class="section-num">2.2&lt;/span> Настройка подписи ключом ssh&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Настроим подписывание в git:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global commit.gpgsign &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global gpg.format ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Получим список ключей (используя агент хранения ключей, &lt;a href="https://yamadharma.github.io/ru/post/2024/08/22/key-storage-agent/">Агенты для хранения ключей&lt;/a>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-add -L
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Указываем ключ:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global user.signingkey &lt;span class="s2">&amp;#34;ssh-ed25519 &amp;lt;key_id&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Для проверки работы подписывания запустите команду в любом из ваших репозиториев:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git commit --allow-empty --message&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Testing SSH signing&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="доверенные-подписи">&lt;span class="section-num">2.3&lt;/span> Доверенные подписи&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Проверим созданный коммит:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git show --show-signature
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Git не видит подписи.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Необходимо внести ключ в список доверенных подписантов.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Сконфигурируем git:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global gpg.ssh.allowedSignersFile ~/.ssh/allowed_signers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">touch ~/.ssh/allowed_signers
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Формат этого файла:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;email&amp;gt;[,&amp;lt;email&amp;gt;...] &amp;lt;key_type&amp;gt; &amp;lt;public_key&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Добавляем ключ в файл:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;user_email&amp;gt; ssh-ed25519 &amp;lt;key_id&amp;gt;&amp;#34;&lt;/span> &amp;gt; ~/.ssh/authorized_signatures
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="итоговый-config-git-config">&lt;span class="section-num">3&lt;/span> Итоговый &lt;code>~/config/git/config&lt;/code>&lt;/h2>
&lt;ul>
&lt;li>В файле &lt;code>~/config/git/config&lt;/code> должно будет появиться следующее:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">gpg&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">ssh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">gpg&lt;/span> &lt;span class="s2">&amp;#34;ssh&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">allowedSignersFile&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="err">~/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ssh&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="nx">allowed_signers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">signingkey&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">ssh-ed25519&lt;/span> &lt;span class="nx">AAAAC3NzaC1lZDI1NTE5AAAAIGXySeykoPLO4ChvQuGVrveXJ&lt;/span>&lt;span class="err">+&lt;/span>&lt;span class="nx">m0rxQEJFl1XQ0OKF2Y&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;hr></description></item><item><title>Лаунчеры. Fuzzel</title><link>https://yamadharma.github.io/ru/post/2024/08/11/launcher-fuzzel/</link><pubDate>Sun, 11 Aug 2024 12:25:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/11/launcher-fuzzel/</guid><description>&lt;p>Fuzzel.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-активности">&lt;span class="section-num">3&lt;/span> Дополнительные активности&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#пароли">&lt;span class="section-num">3.1&lt;/span> Пароли&lt;/a>&lt;/li>
&lt;li>&lt;a href="#закладки">&lt;span class="section-num">3.2&lt;/span> Закладки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#networkmanager">&lt;span class="section-num">3.3&lt;/span> NetworkManager&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://codeberg.org/dnkl/fuzzel" target="_blank" rel="noopener">https://codeberg.org/dnkl/fuzzel&lt;/a>&lt;/li>
&lt;li>Для среды Wayland.&lt;/li>
&lt;li>Нечёткий поиск соответствия.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/h2>
&lt;h2 id="дополнительные-активности">&lt;span class="section-num">3&lt;/span> Дополнительные активности&lt;/h2>
&lt;h3 id="пароли">&lt;span class="section-num">3.1&lt;/span> Пароли&lt;/h3>
&lt;h3 id="закладки">&lt;span class="section-num">3.2&lt;/span> Закладки&lt;/h3>
&lt;h3 id="networkmanager">&lt;span class="section-num">3.3&lt;/span> NetworkManager&lt;/h3></description></item><item><title>Лаунчеры</title><link>https://yamadharma.github.io/ru/post/2024/08/11/launcher/</link><pubDate>Sun, 11 Aug 2024 12:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/11/launcher/</guid><description>&lt;p>Лаунчеры.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#задачи">&lt;span class="section-num">2&lt;/span> Задачи&lt;/a>&lt;/li>
&lt;li>&lt;a href="#приложения">&lt;span class="section-num">3&lt;/span> Приложения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#fuzzel">&lt;span class="section-num">3.1&lt;/span> Fuzzel&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Лаунчеры заменяют командную строку.&lt;/li>
&lt;li>Они преобразуют текстовую информацию в интерактивный список.&lt;/li>
&lt;/ul>
&lt;h2 id="задачи">&lt;span class="section-num">2&lt;/span> Задачи&lt;/h2>
&lt;ul>
&lt;li>Выбор эмодзи.&lt;/li>
&lt;li>Подбор пароля.&lt;/li>
&lt;li>Выбор кода TOTP MFA.&lt;/li>
&lt;li>Выбора буфера обмена.&lt;/li>
&lt;li>Выбор загрузок.&lt;/li>
&lt;li>Выбор сетевого подключения.&lt;/li>
&lt;li>Выбор истории/закладок.&lt;/li>
&lt;li>Выбор окна, рабочей области для переключения.&lt;/li>
&lt;/ul>
&lt;h2 id="приложения">&lt;span class="section-num">3&lt;/span> Приложения&lt;/h2>
&lt;h3 id="fuzzel">&lt;span class="section-num">3.1&lt;/span> Fuzzel&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/11/launcher-fuzzel/">Лаунчеры. Fuzzel&lt;/a>&lt;/li>
&lt;li>Для среды Wayland.&lt;/li>
&lt;/ul></description></item><item><title>NetBox. Плагины</title><link>https://yamadharma.github.io/ru/post/2024/07/22/netbox-plugins/</link><pubDate>Mon, 22 Jul 2024 17:45:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/07/22/netbox-plugins/</guid><description>&lt;p>Плагины NetBox.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-плагинов">&lt;span class="section-num">2&lt;/span> Установка плагинов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установите-пакет-python">&lt;span class="section-num">2.1&lt;/span> Установите пакет Python&lt;/a>&lt;/li>
&lt;li>&lt;a href="#включите-плагин">&lt;span class="section-num">2.2&lt;/span> Включите плагин&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройте-плагин">&lt;span class="section-num">2.3&lt;/span> Настройте плагин&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запустите-миграцию-базы-данных">&lt;span class="section-num">2.4&lt;/span> Запустите миграцию базы данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#статические-файлы">&lt;span class="section-num">2.5&lt;/span> Статические файлы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перезапустите-службу-wsgi">&lt;span class="section-num">2.6&lt;/span> Перезапустите службу WSGI&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#удаление-плагинов">&lt;span class="section-num">3&lt;/span> Удаление плагинов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#отключите-плагин">&lt;span class="section-num">3.1&lt;/span> Отключите плагин&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удалите-конфигурацию">&lt;span class="section-num">3.2&lt;/span> Удалите конфигурацию&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переиндексируйте-записи-поиска">&lt;span class="section-num">3.3&lt;/span> Переиндексируйте записи поиска&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удалите-пакет-python">&lt;span class="section-num">3.4&lt;/span> Удалите пакет Python&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перезапустите-службу-wsgi">&lt;span class="section-num">3.5&lt;/span> Перезапустите службу WSGI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удалите-таблицы-базы-данных">&lt;span class="section-num">3.6&lt;/span> Удалите таблицы базы данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удалите-записи-миграции-django">&lt;span class="section-num">3.7&lt;/span> Удалите записи миграции Django&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Основные плагины: &lt;a href="https://netboxlabs.com/netbox-plugins/" target="_blank" rel="noopener">https://netboxlabs.com/netbox-plugins/&lt;/a>&lt;/li>
&lt;li>Плагины NetBox являются приложениями Django.&lt;/li>
&lt;li>Плагины могут добавлять свои собственные модели и представления, но не могут вмешиваться в работу существующих компонентов.&lt;/li>
&lt;li>Архитектура плагинов NetBox позволяет следующее:
&lt;ul>
&lt;li>добавлять новые модели данных;&lt;/li>
&lt;li>добавлять новые URL-адреса и представления.
&lt;ul>
&lt;li>могут регистрировать URL-адреса &lt;code>/plugins&lt;/code> для предоставления пользователям возможности просмотра;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>добавлять контент в существующие шаблоны моделей;&lt;/li>
&lt;li>добавлять пункты в меню навигации;&lt;/li>
&lt;li>добавлять собственное промежуточное программное обеспечение;&lt;/li>
&lt;li>объявлять параметры конфигурации;
&lt;ul>
&lt;li>параметры конфигурации определяются пользователем в разделе &lt;code>PLUGINS_CONFIG&lt;/code> в &lt;code>configuration.py&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка-плагинов">&lt;span class="section-num">2&lt;/span> Установка плагинов&lt;/h2>
&lt;h3 id="установите-пакет-python">&lt;span class="section-num">2.1&lt;/span> Установите пакет Python&lt;/h3>
&lt;ul>
&lt;li>Загрузите и установите пакет Python плагина, следуя инструкциям по установке.&lt;/li>
&lt;li>Плагины, публикуемые через PyPI, обычно устанавливаются с помощью утилиты &lt;code>pip&lt;/code> командной строки.&lt;/li>
&lt;li>Обязательно установите плагин в виртуальной среде NetBox.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> /opt/netbox/venv/bin/activate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>venv&lt;span class="o">)&lt;/span> $ pip install &amp;lt;package&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Альтернативно, можно установить плагин вручную:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">python setup.py install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="включите-плагин">&lt;span class="section-num">2.2&lt;/span> Включите плагин&lt;/h3>
&lt;ul>
&lt;li>В &lt;code>configuration.py&lt;/code> добавьте имя плагина в список &lt;code>PLUGINS&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="l">PLUGINS = [&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;plugin_name&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройте-плагин">&lt;span class="section-num">2.3&lt;/span> Настройте плагин&lt;/h3>
&lt;ul>
&lt;li>Если плагин требует какой-либо настройки, задайте её в &lt;code>configuration.py&lt;/code> в параметре &lt;code>PLUGINS_CONFIG&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="l">PLUGINS_CONFIG = {&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">&amp;#39;plugin_name&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">&amp;#39;foo&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;bar&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">&amp;#39;buzz&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;bazz&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>}&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>}&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="запустите-миграцию-базы-данных">&lt;span class="section-num">2.4&lt;/span> Запустите миграцию базы данных&lt;/h3>
&lt;ul>
&lt;li>Если плагин вводит новые модели базы данных, выполните миграцию схемы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>venv&lt;span class="o">)&lt;/span> $ &lt;span class="nb">cd&lt;/span> /opt/netbox/netbox/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>venv&lt;span class="o">)&lt;/span> $ python3 manage.py migrate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="статические-файлы">&lt;span class="section-num">2.5&lt;/span> Статические файлы&lt;/h3>
&lt;ul>
&lt;li>Плагины могут упаковывать статические ресурсы, такие как изображения или скрипты, для непосредственного обслуживания HTTP-интерфейсом.&lt;/li>
&lt;li>Убедитесь, что они скопированы в статический корневой каталог с именем &lt;code>collectstatic&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>venv&lt;span class="o">)&lt;/span> $ &lt;span class="nb">cd&lt;/span> /opt/netbox/netbox/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>venv&lt;span class="o">)&lt;/span> $ python3 manage.py collectstatic
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перезапустите-службу-wsgi">&lt;span class="section-num">2.6&lt;/span> Перезапустите службу WSGI&lt;/h3>
&lt;ul>
&lt;li>Перезапустите службу WSGI:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl restart netbox netbox-rq
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="удаление-плагинов">&lt;span class="section-num">3&lt;/span> Удаление плагинов&lt;/h2>
&lt;h3 id="отключите-плагин">&lt;span class="section-num">3.1&lt;/span> Отключите плагин&lt;/h3>
&lt;ul>
&lt;li>Отключите плагин, удалив его из списка &lt;code>PLUGINS&lt;/code> список в &lt;code>configuration.py&lt;/code> .&lt;/li>
&lt;/ul>
&lt;h3 id="удалите-конфигурацию">&lt;span class="section-num">3.2&lt;/span> Удалите конфигурацию&lt;/h3>
&lt;ul>
&lt;li>Удалите запись о плагине в словаре &lt;code>PLUGINS_CONFIG&lt;/code> в &lt;code>configuration.py&lt;/code> .&lt;/li>
&lt;/ul>
&lt;h3 id="переиндексируйте-записи-поиска">&lt;span class="section-num">3.3&lt;/span> Переиндексируйте записи поиска&lt;/h3>
&lt;ul>
&lt;li>Запустите команду &lt;code>reindex&lt;/code> для переиндексации глобальной поисковой системы.&lt;/li>
&lt;li>Это удалит все устаревшие записи, относящиеся к объектам, предоставляемым плагином:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt/netbox/netbox/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> /opt/netbox/venv/bin/activate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>venv&lt;span class="o">)&lt;/span> $ python3 manage.py reindex
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="удалите-пакет-python">&lt;span class="section-num">3.4&lt;/span> Удалите пакет Python&lt;/h3>
&lt;ul>
&lt;li>Используйте &lt;code>pip&lt;/code>, чтобы удалить установленный плагин:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> /opt/netbox/venv/bin/activate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>venv&lt;span class="o">)&lt;/span> $ pip uninstall &amp;lt;package&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перезапустите-службу-wsgi">&lt;span class="section-num">3.5&lt;/span> Перезапустите службу WSGI&lt;/h3>
&lt;ul>
&lt;li>Перезапустите службу WSGI:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl restart netbox
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="удалите-таблицы-базы-данных">&lt;span class="section-num">3.6&lt;/span> Удалите таблицы базы данных&lt;/h3>
&lt;ul>
&lt;li>Этот шаг необходим только для плагинов, которые создали одну или несколько таблиц базы данных.&lt;/li>
&lt;li>Войдите в оболочку базы данных PostgreSQL (&lt;code>manage.py dbshell&lt;/code>), чтобы определить, создал ли плагин какие-либо таблицы SQL.&lt;/li>
&lt;li>Можно запустить командe &lt;code>\dt&lt;/code> без шаблона для вывода списка всех таблиц.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">netbox&lt;/span>&lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="se">\d&lt;/span>t pluginname_*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалите каждую из перечисленных таблиц:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">netbox&lt;/span>&lt;span class="o">=&lt;/span>&amp;gt; DROP TABLE pluginname_foo&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">netbox&lt;/span>&lt;span class="o">=&lt;/span>&amp;gt; DROP TABLE pluginname_bar&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="удалите-записи-миграции-django">&lt;span class="section-num">3.7&lt;/span> Удалите записи миграции Django&lt;/h3>
&lt;ul>
&lt;li>После удаления таблиц, созданных плагином, миграции, создавшие эти таблицы, также необходимо удалить из истории миграции Django.&lt;/li>
&lt;li>Это необходимо для того, чтобы иметь возможность переустановить плагин позже.&lt;/li>
&lt;li>Если бы история миграции осталась на месте, Django пропустил бы все миграции, которые были выполнены в ходе предыдущей установки, что привело бы к сбою плагина после переустановки.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">netbox&lt;/span>&lt;span class="o">=&lt;/span>&amp;gt; SELECT * FROM django_migrations WHERE &lt;span class="nv">app&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;pluginname&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">netbox&lt;/span>&lt;span class="o">=&lt;/span>&amp;gt; DELETE FROM django_migrations WHERE &lt;span class="nv">app&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;pluginname&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Почтовый клиент aerc</title><link>https://yamadharma.github.io/ru/post/2024/07/17/email-client-aerc/</link><pubDate>Wed, 17 Jul 2024 18:55:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/07/17/email-client-aerc/</guid><description>&lt;p>Консольный почтовый клиент aerc.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-команды">&lt;span class="section-num">3&lt;/span> Основные команды&lt;/a>&lt;/li>
&lt;li>&lt;a href="#полезное">&lt;span class="section-num">4&lt;/span> Полезное&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#формате-html">&lt;span class="section-num">4.1&lt;/span> Формате HTML&lt;/a>&lt;/li>
&lt;li>&lt;a href="#адресная-книга-vcard">&lt;span class="section-num">4.2&lt;/span> Адресная книга VCARD&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://aerc-mail.org/" target="_blank" rel="noopener">https://aerc-mail.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий:
&lt;ul>
&lt;li>&lt;a href="https://git.sr.ht/~rjarry/aerc" target="_blank" rel="noopener">https://git.sr.ht/~rjarry/aerc&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/rjarry/aerc" target="_blank" rel="noopener">https://github.com/rjarry/aerc&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Сочетания клавиш в стиле Vim.&lt;/li>
&lt;li>Поддержка нескольких учетных записей: IMAP, Maildir, Notmuch, Mbox и JMAP.&lt;/li>
&lt;li>Протоколы передачи: IMAP, JMAP, SMTP, sendmail.&lt;/li>
&lt;li>Асинхронная поддержка IMAP и JMAP.&lt;/li>
&lt;li>Подписание, шифрование и проверка PGP с помощью GNUpg.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge mail-client/aerc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="основные-команды">&lt;span class="section-num">3&lt;/span> Основные команды&lt;/h2>
&lt;ul>
&lt;li>Перемещение между электронными письмами: &lt;code>j&lt;/code>, &lt;code>k&lt;/code>, &lt;code>Page up&lt;/code>, &lt;code>Page down&lt;/code>, стрелки, &lt;code>gg&lt;/code>, &lt;code>G&lt;/code>.&lt;/li>
&lt;li>Перемещение между папками: &lt;code>Shift+j&lt;/code>, &lt;code>Shift+k&lt;/code>.&lt;/li>
&lt;li>Просмотр электронной почты: &lt;code>Enter&lt;/code>.&lt;/li>
&lt;li>Вернуться к списку адресов электронной почты: &lt;code>q&lt;/code>.&lt;/li>
&lt;li>Удалить электронную почту: &lt;code>:delete&lt;/code>.&lt;/li>
&lt;li>Написать электронное письмо: &lt;code>C&lt;/code>.&lt;/li>
&lt;li>Отправить письмо: &lt;code>:q&lt;/code>.&lt;/li>
&lt;li>Ответ: &lt;code>Rr&lt;/code>.&lt;/li>
&lt;li>Ответить всем: &lt;code>rr&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="полезное">&lt;span class="section-num">4&lt;/span> Полезное&lt;/h2>
&lt;h3 id="формате-html">&lt;span class="section-num">4.1&lt;/span> Формате HTML&lt;/h3>
&lt;ul>
&lt;li>В электронных письмах в формате HTML будут отображаться теги HTML.&lt;/li>
&lt;li>Для рендеринга используется броузер w3.&lt;/li>
&lt;li>Добавьте строку в &lt;code>$XDG_CONFIG_HOME/aerc/aerc.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">text/html=/usr/bin/w3m -T text/html -o display_link_number=1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="адресная-книга-vcard">&lt;span class="section-num">4.2&lt;/span> Адресная книга VCARD&lt;/h3>
&lt;ul>
&lt;li>Используйте &lt;code>khard&lt;/code>.&lt;/li>
&lt;li>Настройте в &lt;code>$XDG_CONFIG_HOME/aerc/aerc.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[compose]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">address-book-cmd=khard email --parsable --remove-first-line %s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Gentoo. Постустановка</title><link>https://yamadharma.github.io/ru/post/2024/07/06/gentoo-post-installation/</link><pubDate>Sat, 06 Jul 2024 16:06:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/07/06/gentoo-post-installation/</guid><description>&lt;p>Постустановка Gentoo.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-репозиториев">&lt;span class="section-num">2&lt;/span> Настройка репозиториев&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#репозиторий-gentoo">&lt;span class="section-num">2.1&lt;/span> Репозиторий gentoo&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозитории-karma">&lt;span class="section-num">2.2&lt;/span> Репозитории karma&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-репозиториев">&lt;span class="section-num">2.3&lt;/span> Синхронизация репозиториев&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-оверлеи">&lt;span class="section-num">2.4&lt;/span> Дополнительные оверлеи&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#guru">&lt;span class="section-num">2.4.1&lt;/span> guru&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gentoo-zh">&lt;span class="section-num">2.4.2&lt;/span> gentoo-zh&lt;/a>&lt;/li>
&lt;li>&lt;a href="#science">&lt;span class="section-num">2.4.3&lt;/span> science&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-программного-обеспечения">&lt;span class="section-num">3&lt;/span> Установка программного обеспечения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-конфигурация">&lt;span class="section-num">3.1&lt;/span> Общая конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#работа-в-консоли">&lt;span class="section-num">3.2&lt;/span> Работа в консоли&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#файловый-менеджер-mc">&lt;span class="section-num">3.2.1&lt;/span> Файловый менеджер mc&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#графическое-окружение">&lt;span class="section-num">3.3&lt;/span> Графическое окружение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#kde">&lt;span class="section-num">3.3.1&lt;/span> KDE&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gnome">&lt;span class="section-num">3.3.2&lt;/span> Gnome&lt;/a>&lt;/li>
&lt;li>&lt;a href="#sway">&lt;span class="section-num">3.3.3&lt;/span> Sway&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#средства-разработки">&lt;span class="section-num">3.4&lt;/span> Средства разработки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#git">&lt;span class="section-num">3.4.1&lt;/span> git&lt;/a>&lt;/li>
&lt;li>&lt;a href="#python">&lt;span class="section-num">3.4.2&lt;/span> python&lt;/a>&lt;/li>
&lt;li>&lt;a href="#node-dot-js">&lt;span class="section-num">3.4.3&lt;/span> Node.js&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#редакторы">&lt;span class="section-num">3.5&lt;/span> Редакторы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#zed">&lt;span class="section-num">3.5.1&lt;/span> Zed&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vscode">&lt;span class="section-num">3.5.2&lt;/span> VScode&lt;/a>&lt;/li>
&lt;li>&lt;a href="#emacs">&lt;span class="section-num">3.5.3&lt;/span> Emacs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vim">&lt;span class="section-num">3.5.4&lt;/span> Vim&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#обслуживание-системы">&lt;span class="section-num">3.6&lt;/span> Обслуживание системы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#дедупликация-файлов">&lt;span class="section-num">3.6.1&lt;/span> Дедупликация файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#утилиты-пользователя">&lt;span class="section-num">3.7&lt;/span> Утилиты пользователя&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#менеджер-закладок-buku">&lt;span class="section-num">3.7.1&lt;/span> Менеджер закладок buku&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-ключами">&lt;span class="section-num">3.7.2&lt;/span> Управление ключами&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Описание моей настройки Gentoo.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-репозиториев">&lt;span class="section-num">2&lt;/span> Настройка репозиториев&lt;/h2>
&lt;ul>
&lt;li>Настройка репозиториев исходит из того, что я использую свой репозиторий с конфигурациями (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/05/25/gentoo-karma-repository/">Gentoo. Репозиторий karma&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h3 id="репозиторий-gentoo">&lt;span class="section-num">2.1&lt;/span> Репозиторий gentoo&lt;/h3>
&lt;ul>
&lt;li>Установите основной репозиторий (если это ещё не сделано):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emaint sync -r gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R portage:portage /var/db/repos/gentoo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="репозитории-karma">&lt;span class="section-num">2.2&lt;/span> Репозитории karma&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Установите репозитории с настройками (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/05/25/gentoo-karma-repository/">Gentoo. Репозиторий karma&lt;/a>)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Добавьте репозиторий &lt;code>karma&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">eselect repository add karma git https://github.com/yamadharma/karma.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emaint sync -r karma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R portage:portage /var/db/repos/karma
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Добавьте репозиторий &lt;code>karma-profiles&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">eselect repository add karma-profiles git https://github.com/yamadharma/karma-profiles.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emaint sync -r karma-profiles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R portage:portage /var/db/repos/karma-profiles
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Сделайте ссылки на файлы конфигурации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">. /var/db/repos/karma-profiles/scripts/portage
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-репозиториев">&lt;span class="section-num">2.3&lt;/span> Синхронизация репозиториев&lt;/h3>
&lt;ul>
&lt;li>Синхронизуйте репозитории:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emaint sync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="дополнительные-оверлеи">&lt;span class="section-num">2.4&lt;/span> Дополнительные оверлеи&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/">Gentoo. Дополнительные репозитории&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="guru">&lt;span class="section-num">2.4.1&lt;/span> guru&lt;/h4>
&lt;ul>
&lt;li>Добавление репозитория guru:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> guru
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="gentoo-zh">&lt;span class="section-num">2.4.2&lt;/span> gentoo-zh&lt;/h4>
&lt;ul>
&lt;li>Добавление репозитория gentoo-zh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> gentoo-zh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="science">&lt;span class="section-num">2.4.3&lt;/span> science&lt;/h4>
&lt;ul>
&lt;li>Добавление репозитория science:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> science
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-программного-обеспечения">&lt;span class="section-num">3&lt;/span> Установка программного обеспечения&lt;/h2>
&lt;h3 id="общая-конфигурация">&lt;span class="section-num">3.1&lt;/span> Общая конфигурация&lt;/h3>
&lt;ul>
&lt;li>Зададим флаги emerge:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### Emerge&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Зададим флаги emerge:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Verbose output&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>-v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="работа-в-консоли">&lt;span class="section-num">3.2&lt;/span> Работа в консоли&lt;/h3>
&lt;ul>
&lt;li>Для установки всего необходимого для работы в консоли необходимо использовать файл &lt;code>term.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### Terminal&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="файловый-менеджер-mc">&lt;span class="section-num">3.2.1&lt;/span> Файловый менеджер mc&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/26/midnight-commander-file-manager/">Файловый менеджер Midnight Commander&lt;/a>&lt;/li>
&lt;li>Установка файлового менеджера mc:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Установка файлового менеджера mc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> app-misc/mc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="графическое-окружение">&lt;span class="section-num">3.3&lt;/span> Графическое окружение&lt;/h3>
&lt;h4 id="kde">&lt;span class="section-num">3.3.1&lt;/span> KDE&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Для установки KDE необходимо использовать файл &lt;code>kde.sh&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### KDE&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установим все программы KDE:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Install all KDE programs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> kde-apps/kde-apps-meta
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="gnome">&lt;span class="section-num">3.3.2&lt;/span> Gnome&lt;/h4>
&lt;ul>
&lt;li>Для установки Gnome необходимо использовать файл &lt;code>gnome.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### Gnome&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="sway">&lt;span class="section-num">3.3.3&lt;/span> Sway&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/">Переход на Sway&lt;/a>&lt;/li>
&lt;li>Для установки Gnome необходимо использовать файл &lt;code>sway.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### Sway&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Sway&lt;/p>
&lt;ul>
&lt;li>Установим собственно Sway:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> gui-wm/sway
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Работа с буфером обмена&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Общие программы для работы с буфером обмена:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Wayland clipboard&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> gui-apps/wl-clipboard
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установим &lt;code>cliphist&lt;/code> (репозиторий &lt;code>guru&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> app-misc/cliphist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="средства-разработки">&lt;span class="section-num">3.4&lt;/span> Средства разработки&lt;/h3>
&lt;ul>
&lt;li>Для установки всего необходимого для работы в консоли необходимо использовать файл &lt;code>dev.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### Dev tools&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="git">&lt;span class="section-num">3.4.1&lt;/span> git&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>github&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>gitea&lt;/p>
&lt;ul>
&lt;li>Утилиты для работы с Gitea.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Gitea&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Утилита командной строки для работы с сервером Gitea (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/11/11/interacting-gitea-command-line/">Взаимодействие с gitea из командной строки&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> dev-util/tea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="python">&lt;span class="section-num">3.4.2&lt;/span> python&lt;/h4>
&lt;ul>
&lt;li>Утилиты для работы с python.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Python&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>pipx&lt;/p>
&lt;ul>
&lt;li>Установка пакетов python:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> dev-python/pipx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="node-dot-js">&lt;span class="section-num">3.4.3&lt;/span> Node.js&lt;/h4>
&lt;ul>
&lt;li>Утилиты для работы с Node.js.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Node.js&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>pnpm&lt;/p>
&lt;ul>
&lt;li>Управление пакетами Node.js (оверлей &lt;code>karma&lt;/code>, см. &lt;a href="https://yamadharma.github.io/ru/post/2024/05/25/gentoo-karma-repository/">Gentoo. Репозиторий karma&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> sys-apps/pnpm-bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>yarn&lt;/p>
&lt;ul>
&lt;li>Управление пакетами Node.js:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> sys-apps/yarn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="редакторы">&lt;span class="section-num">3.5&lt;/span> Редакторы&lt;/h3>
&lt;ul>
&lt;li>Для установки редакторов необходимо использовать файл &lt;code>edit.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### Edit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="zed">&lt;span class="section-num">3.5.1&lt;/span> Zed&lt;/h4>
&lt;ul>
&lt;li>Установка редактора &lt;em>Zed&lt;/em> (оверлей &lt;code>gentoo-zh&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Установка редактора Zed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># emerge ${EMERGE_FLAGS} app-editors/zed&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="vscode">&lt;span class="section-num">3.5.2&lt;/span> VScode&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Установка редактора &lt;em>VSCode&lt;/em>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Установка редактора VSCode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> app-editors/vscode
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установка редактора набора LSP-серверов для &lt;em>VSCode&lt;/em> (оверлей &lt;code>guru&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> dev-util/vscode-langservers-extracted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="emacs">&lt;span class="section-num">3.5.3&lt;/span> Emacs&lt;/h4>
&lt;h4 id="vim">&lt;span class="section-num">3.5.4&lt;/span> Vim&lt;/h4>
&lt;h3 id="обслуживание-системы">&lt;span class="section-num">3.6&lt;/span> Обслуживание системы&lt;/h3>
&lt;ul>
&lt;li>Для установки системных утилит необходимо использовать файл &lt;code>sys.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### System tools&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="дедупликация-файлов">&lt;span class="section-num">3.6.1&lt;/span> Дедупликация файлов&lt;/h4>
&lt;ul>
&lt;li>Установим &lt;em>jdupes&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/02/23/file-deduplication-jdupes/">Дедупликация файлов. jdupes&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> jdupes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="утилиты-пользователя">&lt;span class="section-num">3.7&lt;/span> Утилиты пользователя&lt;/h3>
&lt;ul>
&lt;li>Для установки пользовательских утилит необходимо использовать файл &lt;code>user.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### User utils&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="менеджер-закладок-buku">&lt;span class="section-num">3.7.1&lt;/span> Менеджер закладок buku&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/22/buku-bookmark-manager/">Менеджер закладок buku&lt;/a>&lt;/li>
&lt;li>Установим менеджер закладок:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Buku&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> www-misc/buku
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим интерфейс к броузеру:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> www-misc/bukubrow-bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="управление-ключами">&lt;span class="section-num">3.7.2&lt;/span> Управление ключами&lt;/h4>
&lt;ul>
&lt;li>Установим демон управления ключами:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Keys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># emerge ${EMERGE_FLAGS} net-misc/keychain&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Перепрошивка точки доступа Cisco Aironet</title><link>https://yamadharma.github.io/ru/post/2024/07/03/flashing-cisco-aironet/</link><pubDate>Wed, 03 Jul 2024 12:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/07/03/flashing-cisco-aironet/</guid><description>&lt;p>Перепрошивка точки доступа Cisco Aironet.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#версии-образа-системы">&lt;span class="section-num">1.1&lt;/span> Версии образа системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отличия-прошивок">&lt;span class="section-num">1.2&lt;/span> Отличия прошивок&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подготовка-к-обновлению-программного-обеспечения">&lt;span class="section-num">2&lt;/span> Подготовка к обновлению программного обеспечения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сброс-настроек">&lt;span class="section-num">2.1&lt;/span> Сброс настроек&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#перевод-из-облегчённого-режима-в-автономный">&lt;span class="section-num">3&lt;/span> Перевод из облегчённого режима в автономный&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перевод-из-автономного-режима-в-облегчённый">&lt;span class="section-num">4&lt;/span> Перевод из автономного режима в облегчённый&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Точки доступа Cisco могут работать в двух режимах:
&lt;ul>
&lt;li>Autonomous AP IOS Software;
&lt;ul>
&lt;li>автономная точка доступа;&lt;/li>
&lt;li>управляется самостоятельно по http/https или telnet/ssh.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Lightweight AP IOS Software:
&lt;ul>
&lt;li>точка доступа управляется с WLC с контроллера беспроводной сети Cisco (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/03/03/cisco-wlc/">Контроллер Cisco WLC&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="версии-образа-системы">&lt;span class="section-num">1.1&lt;/span> Версии образа системы&lt;/h3>
&lt;ul>
&lt;li>Выясните версию IOS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В имени файла закодированы параметры образа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">&amp;lt;модель_точки&amp;gt;-&amp;lt;функции&amp;gt;-tar.&amp;lt;версия&amp;gt;.tar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В поле функция указан вариант образа:
&lt;ul>
&lt;li>легковесная точка доступа:
&lt;ul>
&lt;li>&lt;code>k9w8&lt;/code>;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>автономная точка доступа:
&lt;ul>
&lt;li>&lt;code>k9w7&lt;/code>;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>облегченный образ для восстановления:
&lt;ul>
&lt;li>&lt;code>rcvk9w8&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="отличия-прошивок">&lt;span class="section-num">1.2&lt;/span> Отличия прошивок&lt;/h3>
&lt;ul>
&lt;li>У легковесной прошивки:
&lt;ul>
&lt;li>нет режима &lt;code>configure terminal&lt;/code>;&lt;/li>
&lt;li>нет команды &lt;code>archive&lt;/code> для обновления прошивки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="подготовка-к-обновлению-программного-обеспечения">&lt;span class="section-num">2&lt;/span> Подготовка к обновлению программного обеспечения&lt;/h2>
&lt;h3 id="сброс-настроек">&lt;span class="section-num">2.1&lt;/span> Сброс настроек&lt;/h3>
&lt;ul>
&lt;li>Зажимаем на точке доступа кнопку &lt;code>Mode&lt;/code>, включаем питание.&lt;/li>
&lt;li>Удерживаем кнопку нажатой ~ 30с, пока светодиод на точке не загорится красным.&lt;/li>
&lt;li>Отпускаем кнопку, светодиод мигает зелёным.&lt;/li>
&lt;li>Учётные данные по умолчанию:
&lt;ul>
&lt;li>логин: &lt;code>cisco&lt;/code>;&lt;/li>
&lt;li>пароль: &lt;code>Cisco&lt;/code>;&lt;/li>
&lt;li>enable: &lt;code>Cisco&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="перевод-из-облегчённого-режима-в-автономный">&lt;span class="section-num">3&lt;/span> Перевод из облегчённого режима в автономный&lt;/h2>
&lt;ul>
&lt;li>Подключиться к точке доступа по консольному кабелю.&lt;/li>
&lt;li>Войдите в режим конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">debug capwap console cli
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновим прошивку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">archive tar /xtract tftp://10.10.1.4/ap1g1-k9w7-tar.153-3.JK.tar flash:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалим старую прошивку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">del /force /recursive flash:/ap1g1-k9w8-mx.153-3.JK
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перезагружаем точку доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="перевод-из-автономного-режима-в-облегчённый">&lt;span class="section-num">4&lt;/span> Перевод из автономного режима в облегчённый&lt;/h2>
&lt;ul>
&lt;li>Подключиться к точке доступа по консольному кабелю.&lt;/li>
&lt;li>Войдите в режим конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">configure terminal
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновим прошивку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">archive tar /xtract tftp://10.10.1.4/ap3g2-rcvk9w8-tar.153-3.JF11.tar flash:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалим старую прошивку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">del /force /recursive flash:/ap3g2-rcvk9w7-tar.153-3.JF11.tar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перезагружаем точку доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Использование Яндекс-диска</title><link>https://yamadharma.github.io/ru/post/2024/06/25/using-yandex-disk/</link><pubDate>Tue, 25 Jun 2024 15:32:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/25/using-yandex-disk/</guid><description>&lt;p>Использование Яндекс-диска.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#монтирование-с-помощью-rclone">&lt;span class="section-num">1&lt;/span> Монтирование с помощью rclone&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">1.1&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ручное-монтирование">&lt;span class="section-num">1.2&lt;/span> Ручное монтирование&lt;/a>&lt;/li>
&lt;li>&lt;a href="#монтирование-с-помощью-systemd">&lt;span class="section-num">1.3&lt;/span> Монтирование с помощью systemd&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="монтирование-с-помощью-rclone">&lt;span class="section-num">1&lt;/span> Монтирование с помощью rclone&lt;/h2>
&lt;h3 id="настройка">&lt;span class="section-num">1.1&lt;/span> Настройка&lt;/h3>
&lt;ul>
&lt;li>Настройте доступ к yandex.ru с помощью:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="ручное-монтирование">&lt;span class="section-num">1.2&lt;/span> Ручное монтирование&lt;/h3>
&lt;ul>
&lt;li>Пусть учётная запись называется &lt;code>account.yandex.ru&lt;/code>.&lt;/li>
&lt;li>Подключить диск можно следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p ~/n/account@yandex.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rclone mount account@yandex.ru:/ ~/n/account@yandex.ru &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="монтирование-с-помощью-systemd">&lt;span class="section-num">1.3&lt;/span> Монтирование с помощью systemd&lt;/h3>
&lt;ul>
&lt;li>Создайте файл &lt;code>~/.config/systemd/user/rclone@.service&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># User service for Rclone mounting&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Place in ~/.config/systemd/user/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># File must include the &amp;#39;@&amp;#39; (ex rclone@.service)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># As your normal user, run&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># systemctl --user daemon-reload&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># You can now start/enable each remote by using rclone@&amp;lt;remote&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># systemctl --user enable --now rclone@dropbox&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Unit&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Description&lt;/span>&lt;span class="o">=&lt;/span>rclone: Remote FUSE filesystem &lt;span class="k">for&lt;/span> cloud storage config %i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Documentation&lt;/span>&lt;span class="o">=&lt;/span>man:rclone&lt;span class="o">(&lt;/span>1&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">After&lt;/span>&lt;span class="o">=&lt;/span>network-online.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Wants&lt;/span>&lt;span class="o">=&lt;/span>network-online.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">AssertPathIsDirectory&lt;/span>&lt;span class="o">=&lt;/span>%h/n/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Service&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Type&lt;/span>&lt;span class="o">=&lt;/span>notify
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ExecStartPre&lt;/span>&lt;span class="o">=&lt;/span>-/usr/bin/mkdir -p %h/n/%i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ExecStart&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> /usr/bin/rclone mount &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --config&lt;span class="o">=&lt;/span>%h/.config/rclone/rclone.conf &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --allow-non-empty &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --vfs-cache-mode writes &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --vfs-cache-max-size 100M &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --dir-cache-time 72h &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --vfs-read-chunk-size-limit 128M &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --vfs-read-chunk-size-limit off &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --log-level INFO &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --log-file /tmp/rclone-%i.log &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --umask &lt;span class="m">022&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --allow-other &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> %i: %h/n/%i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ExecStop&lt;/span>&lt;span class="o">=&lt;/span>/bin/fusermount -uz %h/n/%i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Install&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">WantedBy&lt;/span>&lt;span class="o">=&lt;/span>default.target
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перегрузите список сервисов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user daemon-reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавьте сервис в автозапуск:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now rclone@account@yandex.ru
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Консоль linux. Kmscon</title><link>https://yamadharma.github.io/ru/post/2024/06/25/linux-console-kmscon/</link><pubDate>Tue, 25 Jun 2024 12:08:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/25/linux-console-kmscon/</guid><description>&lt;p>Консоль linux. Kmscon.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#функции">&lt;span class="section-num">1.1&lt;/span> Функции&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#включение-kmscon">&lt;span class="section-num">3&lt;/span> Включение kmscon&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#включение-на-всех-терминалах">&lt;span class="section-num">3.1&lt;/span> Включение на всех терминалах&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файлы-настройки">&lt;span class="section-num">4&lt;/span> Файлы настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#поддержка-hidpi">&lt;span class="section-num">5&lt;/span> Поддержка HiDPI&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Эмулятор терминала.&lt;/li>
&lt;li>Основан на kernel mode setting Linux.&lt;/li>
&lt;li>Попытка заменить реализацию VT в ядре консолью пользовательского пространства.&lt;/li>
&lt;li>Автор не работает над программой.&lt;/li>
&lt;li>Стабильного ментейнера нет.&lt;/li>
&lt;li>Репозиторий текущий: &lt;a href="https://github.com/aetf/kmscon" target="_blank" rel="noopener">https://github.com/aetf/kmscon&lt;/a>&lt;/li>
&lt;li>Репозитории исторические:
&lt;ul>
&lt;li>&lt;a href="https://cgit.freedesktop.org/~dvdhrm/kmscon/" target="_blank" rel="noopener">https://cgit.freedesktop.org/~dvdhrm/kmscon/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/MacSlow/kmscon" target="_blank" rel="noopener">https://github.com/MacSlow/kmscon&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="функции">&lt;span class="section-num">1.1&lt;/span> Функции&lt;/h3>
&lt;ul>
&lt;li>Полная реализация vt220–vt510.&lt;/li>
&lt;li>Полная поддержка интернационализации:
&lt;ul>
&lt;li>поддерживает Юникод, CJK;&lt;/li>
&lt;li>обработка клавиатуры через &lt;em>libxkbcommon&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Аппаратное ускорение рендеринга.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/h3>
&lt;ul>
&lt;li>В основном репозитории:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge sys-apps/kmscon
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="включение-kmscon">&lt;span class="section-num">3&lt;/span> Включение kmscon&lt;/h2>
&lt;ul>
&lt;li>Обычно для tty1 существует специальная конфигурация systemd.
&lt;ul>
&lt;li>Можно продолжать запускать традиционный agetty на tty1 и запускать kmscon на всех остальных виртуальных терминалах.&lt;/li>
&lt;li>Можно запустить kmscon как на tty1, так и на других VT.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Чтобы включить kmscon на tty1, отключите &lt;code>getty@tty1.service&lt;/code> и включить &lt;code>kmsconvt@tty1.service&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="включение-на-всех-терминалах">&lt;span class="section-num">3.1&lt;/span> Включение на всех терминалах&lt;/h3>
&lt;ul>
&lt;li>Чтобы включить kmscon на всех виртуальных терминалах, выполните:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -s /usr/lib/systemd/system/kmsconvt&lt;span class="se">\@&lt;/span>.service /etc/systemd/system/autovt&lt;span class="se">\@&lt;/span>.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Это заставит &lt;code>systemd-login&lt;/code> использовать &lt;code>kmsconvt@.service&lt;/code> вместо &lt;code>getty@.service&lt;/code> для новых VT.&lt;/li>
&lt;li>Если &lt;code>kmscon&lt;/code> не может запуститься по какой-либо причине, будет запущен &lt;code>getty@.service&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="файлы-настройки">&lt;span class="section-num">4&lt;/span> Файлы настройки&lt;/h2>
&lt;ul>
&lt;li>Для настройки используются файлы:
&lt;ul>
&lt;li>&lt;code>/etc/kmscon/kmscon.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="поддержка-hidpi">&lt;span class="section-num">5&lt;/span> Поддержка HiDPI&lt;/h2>
&lt;ul>
&lt;li>Можно изменить размер шрифта на лету с помощью &lt;code>Ctrl++&lt;/code>, &lt;code>Ctrl+Shift+=&lt;/code>, &lt;code>Ctrl+-&lt;/code>.&lt;/li>
&lt;li>Можно установить &lt;code>font-dpi&lt;/code> и &lt;code>font-size&lt;/code> в &lt;code>/etc/kmscon/kmscon.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">font-dpi=192
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Sway. Загрузка</title><link>https://yamadharma.github.io/ru/post/2024/06/20/sway-loading/</link><pubDate>Thu, 20 Jun 2024 21:29:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/20/sway-loading/</guid><description>&lt;p>Загрузка сессии Sway.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#дисплей-менеджеры">&lt;span class="section-num">1&lt;/span> Дисплей-менеджеры&lt;/a>&lt;/li>
&lt;li>&lt;a href="#загрузка-переменных-среды-перед-сессией">&lt;span class="section-num">2&lt;/span> Загрузка переменных среды перед сессией&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#скрипт-загрузки-sway">&lt;span class="section-num">2.1&lt;/span> Скрипт загрузки Sway&lt;/a>&lt;/li>
&lt;li>&lt;a href="#локальные-переменные-среды-для-sway">&lt;span class="section-num">2.2&lt;/span> Локальные переменные среды для Sway&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="дисплей-менеджеры">&lt;span class="section-num">1&lt;/span> Дисплей-менеджеры&lt;/h2>
&lt;h2 id="загрузка-переменных-среды-перед-сессией">&lt;span class="section-num">2&lt;/span> Загрузка переменных среды перед сессией&lt;/h2>
&lt;ul>
&lt;li>Для работоспособности Sway необходимо часть переменных загрузить перед сессией (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/06/20/sway-application-compatibility/">Sway. Совместимость приложений&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h3 id="скрипт-загрузки-sway">&lt;span class="section-num">2.1&lt;/span> Скрипт загрузки Sway&lt;/h3>
&lt;ul>
&lt;li>Можно использовать наработки Fedora.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://gitlab.com/fedora/sigs/sway/sway-config-fedora" target="_blank" rel="noopener">https://gitlab.com/fedora/sigs/sway/sway-config-fedora&lt;/a>&lt;/li>
&lt;li>Для запуска используется скрипт &lt;code>/usr/bin/start-sway&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Internal variables&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">readonly&lt;/span> &lt;span class="nv">_SWAY_COMMAND&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/usr/bin/sway&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">SWAY_EXTRA_ARGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## General exports&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">XDG_CURRENT_DESKTOP&lt;/span>&lt;span class="o">=&lt;/span>sway
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">XDG_SESSION_DESKTOP&lt;/span>&lt;span class="o">=&lt;/span>sway
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">XDG_SESSION_TYPE&lt;/span>&lt;span class="o">=&lt;/span>wayland
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Hardware compatibility&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># We can&amp;#39;t be sure that the virtual GPU is compatible with Sway.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># We should be attempting to detect an EGL driver instead, but that appears&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># to be a bit more complicated.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="k">$(&lt;/span>systemd-detect-virt --vm&lt;span class="k">)&lt;/span> in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;none&amp;#34;&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;kvm&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># There&amp;#39;s two drivers we can get here, depending on the 3D acceleration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># flag state: either virtio_gpu/virgl or kms_swrast/llvmpipe.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># The former one causes graphical glitches in OpenGL apps when using&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># &amp;#39;pixman&amp;#39; renderer. The latter will crash &amp;#39;gles2&amp;#39; renderer outright.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Neither of those support &amp;#39;vulkan&amp;#39;.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># The choice is obvious, at least until we learn to detect the driver&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># instead of abusing the virtualization technology identifier.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># See also: https://gitlab.freedesktop.org/wlroots/wlroots/-/issues/2871&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">WLR_RENDERER&lt;/span>&lt;span class="o">=&lt;/span>pixman
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># &amp;#39;pixman&amp;#39; on virtio_gpu with recent kernels is glitchy. Appears that&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># it only affects atomic KMS, and legacy interface works.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">WLR_DRM_NO_ATOMIC&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># WLR_NO_HARDWARE_CURSORS=1 is not needed with legacy DRM interface&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://github.com/swaywm/sway/issues/6581&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">WLR_NO_HARDWARE_CURSORS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Apply `environment.d(5)` customizations&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This can be used to share the custom environment configs with systemd --user.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Importing `systemd --user show-environment` here may have unexpected&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># consequences, such as getting a leftover `WAYLAND_DISPLAY` or `DISPLAY`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># and breaking Sway startup. Thus, the direct call to a systemd generator.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> -o allexport
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">eval&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>/usr/lib/systemd/user-environment-generators/30-systemd-environment-d-generator&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> +o allexport
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Load Sway-specific system environment customizations&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f /etc/sway/environment &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">set&lt;/span> -o allexport
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># shellcheck source=/dev/null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> . /etc/sway/environment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">set&lt;/span> +o allexport
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Load Sway-specific user environment customizations&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">XDG_CONFIG_HOME&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="nv">$HOME&lt;/span>&lt;span class="p">/.config&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/sway/environment&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">set&lt;/span> -o allexport
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># shellcheck source=/dev/null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> . &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">XDG_CONFIG_HOME&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="nv">$HOME&lt;/span>&lt;span class="p">/.config&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/sway/environment&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">set&lt;/span> +o allexport
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Unexport internal variables&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># export -n is not POSIX :(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">_SWAY_EXTRA_ARGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$SWAY_EXTRA_ARGS&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">unset&lt;/span> SWAY_EXTRA_ARGS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Log all exported WLR_ variables&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nv">_WLR_VARS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>env &lt;span class="p">|&lt;/span> grep &lt;span class="s1">&amp;#39;^WLR_&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">printf&lt;/span> &lt;span class="s1">&amp;#39;environment variables for wlroots: %s&amp;#39;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$_WLR_VARS&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tr &lt;span class="s1">&amp;#39;\n&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39; &amp;#39;&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> systemd-cat -p notice -t &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">_SWAY_COMMAND&lt;/span>&lt;span class="p">##*/&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Start sway with extra arguments and send output to the journal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># shellcheck disable=SC2086 # quoted expansion of EXTRA_ARGS can produce empty field&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exec&lt;/span> systemd-cat -- &lt;span class="nv">$_SWAY_COMMAND&lt;/span> &lt;span class="nv">$_SWAY_EXTRA_ARGS&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$@&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Этот скрипт читает переменные для сессии Sway из файлов:
&lt;ul>
&lt;li>&lt;code>/etc/sway/environment&lt;/code>;&lt;/li>
&lt;li>&lt;code>${XDG_CONFIG_HOME}/sway/environment&lt;/code> (&lt;code>~/.config/sway/environment&lt;/code>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для запуска этого файла из стандартный дисплей-менеджеров нужно поправить файл &lt;code>/usr/share/wayland-sessions/sway.desktop&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">Desktop&lt;/span> &lt;span class="nx">Entry&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Name&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">Sway&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Comment&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">An&lt;/span> &lt;span class="nx">i3-compatible&lt;/span> &lt;span class="nx">Wayland&lt;/span> &lt;span class="nx">compositor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Exec&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">start-sway&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Type&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">Application&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">DesktopNames&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">sway&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Эти патчи добавлены в оверлей &lt;em>karma&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/">Gentoo. Дополнительные репозитории&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h3 id="локальные-переменные-среды-для-sway">&lt;span class="section-num">2.2&lt;/span> Локальные переменные среды для Sway&lt;/h3>
&lt;ul>
&lt;li>Файл с заданными локальными переменными находится в &lt;code>~/.config/sway/environment&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># -*- mode: shell -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># vim: set ft=sh:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This file will be sourced from /usr/bin/start-sway script.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># User-specific variables should be placed in $XDG_CONFIG_HOME/sway/environment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Pass extra arguments to the /usr/bin/sway executable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#SWAY_EXTRA_ARGS=&amp;#34;$SWAY_EXTRA_ARGS --unsupported-gpu&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#SWAY_EXTRA_ARGS=&amp;#34;$SWAY_EXTRA_ARGS --debug&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Set environment variables&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Useful variables for wlroots:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://gitlab.freedesktop.org/wlroots/wlroots/-/blob/master/docs/env_vars.md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#WLR_NO_HARDWARE_CURSORS=1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Исправления для Java (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/06/20/sway-application-compatibility/">Sway. Совместимость приложений&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Java compatibility&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">_JAVA_AWT_WM_NONREPARENTING&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Исправления для Qt (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/06/20/sway-application-compatibility/">Sway. Совместимость приложений&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Qt tuning&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># QT_QPA_PLATFORM=wayland&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">QT_QPA_PLATFORM&lt;/span>&lt;span class="o">=&lt;/span>xcb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">QT_QPA_PLATFORMTHEME&lt;/span>&lt;span class="o">=&lt;/span>qt6ct
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">QT_WAYLAND_DISABLE_WINDOWDECORATION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">QT_WAYLAND_FORCE_DPI&lt;/span>&lt;span class="o">=&lt;/span>physical
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Sway. Совместимость приложений</title><link>https://yamadharma.github.io/ru/post/2024/06/20/sway-application-compatibility/</link><pubDate>Thu, 20 Jun 2024 21:26:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/20/sway-application-compatibility/</guid><description>&lt;p>Sway. Совместимость приложений.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#java">&lt;span class="section-num">1&lt;/span> Java&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#серое-окно-приложения-не-меняют-размер-с-помощью-wm-меню-сразу-закрываются">&lt;span class="section-num">1.1&lt;/span> Серое окно, приложения не меняют размер с помощью WM, меню сразу закрываются&lt;/a>&lt;/li>
&lt;li>&lt;a href="#меню-в-приложениях-плавает-отдельно-им-невозможно-пользоваться">&lt;span class="section-num">1.2&lt;/span> Меню в приложениях плавает отдельно, им невозможно пользоваться&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#приложения-gtk-plus-запускаются-с-задержкой">&lt;span class="section-num">2&lt;/span> Приложения GTK+ запускаются с задержкой&lt;/a>&lt;/li>
&lt;li>&lt;a href="#qt-приложения">&lt;span class="section-num">3&lt;/span> Qt приложения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#avidemux">&lt;span class="section-num">4&lt;/span> Avidemux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="java">&lt;span class="section-num">1&lt;/span> Java&lt;/h2>
&lt;h3 id="серое-окно-приложения-не-меняют-размер-с-помощью-wm-меню-сразу-закрываются">&lt;span class="section-num">1.1&lt;/span> Серое окно, приложения не меняют размер с помощью WM, меню сразу закрываются&lt;/h3>
&lt;ul>
&lt;li>В стандартных тулкитах для Java жестко зашит список оконных менеджеров.&lt;/li>
&lt;li>Следует установить переменную окружения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">_JAVA_AWT_WM_NONREPARENTING&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="меню-в-приложениях-плавает-отдельно-им-невозможно-пользоваться">&lt;span class="section-num">1.2&lt;/span> Меню в приложениях плавает отдельно, им невозможно пользоваться&lt;/h3>
&lt;ul>
&lt;li>В выпусках Java до версии 9 GTK интерфейс ориентирован на GTK2, в последующих версиях на GTK3.&lt;/li>
&lt;li>GTK LookAndFeel может работать с GTK версий 2, 2.2 и 3.&lt;/li>
&lt;li>По умолчанию используется GTK3.&lt;/li>
&lt;li>Следует явно задать более старую версию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">JAVA_TOOL_OPTIONS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;-Djdk.gtk.version=2.2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Например, в файле &lt;code>~/.profile&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$XDG_SESSION_DESKTOP&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;sway&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$XDG_SESSION_DESKTOP&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;i3&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://github.com/swaywm/sway/issues/595&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">_JAVA_AWT_WM_NONREPARENTING&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">JAVA_TOOL_OPTIONS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;-Djdk.gtk.version=2.2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="приложения-gtk-plus-запускаются-с-задержкой">&lt;span class="section-num">2&lt;/span> Приложения GTK+ запускаются с задержкой&lt;/h2>
&lt;ul>
&lt;li>Приложения GTK+ ожидают запуск &lt;code>xdg-desktop-portal&lt;/code> через D-Bus.&lt;/li>
&lt;li>Ожидание прекращается по таймауту потому, что активированная служба D-Bus не знает, к какому &lt;code>WAYLAND_DISPLAY&lt;/code> подключиться.&lt;/li>
&lt;li>Это можно исправить, добавив в файл конфигурации следующее:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exec&lt;/span> systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exec&lt;/span> &lt;span class="nb">hash&lt;/span> dbus-update-activation-environment 2&amp;gt;/dev/null &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="qt-приложения">&lt;span class="section-num">3&lt;/span> Qt приложения&lt;/h2>
&lt;ul>
&lt;li>Qt по умолчанию использует бэкэнд X11 вместо собственного бэкэнда Wayland. Чтобы использовать бэкэнд Wayland, установите &lt;code>QT_QPA_PLATFORM=wayland&lt;/code>.&lt;/li>
&lt;li>Qt прорисовает оформление окон на стороне клиента. Чтобы отключить это, установите &lt;code>QT_WAYLAND_DISABLE_WINDOWDECORATION=&amp;quot;1&amp;quot;&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="avidemux">&lt;span class="section-num">4&lt;/span> Avidemux&lt;/h2>
&lt;ul>
&lt;li>При запуске Avidemux под Wayland не отображается окно просмотра.&lt;/li>
&lt;li>Следует установить переменную окружения &lt;code>QT_QPA_PLATFORM=xcb&lt;/code> или &lt;code>WAYLAND_DISPLAY=0&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">QT_QPA_PLATFORM&lt;/span>&lt;span class="o">=&lt;/span>xcb avidemux3_qt5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Альтернативно можно задать опцию &lt;code>--platform 'xcb'&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">avidemux3_qt5 --platform &lt;span class="s1">&amp;#39;xcb&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>NetBox. Установка</title><link>https://yamadharma.github.io/ru/post/2024/06/19/netbox-install/</link><pubDate>Wed, 19 Jun 2024 18:13:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/19/netbox-install/</guid><description>&lt;p>Установка NetBox.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#системные-требования">&lt;span class="section-num">1&lt;/span> Системные требования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#предварительная-подготовка">&lt;span class="section-num">2&lt;/span> Предварительная подготовка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-компонент">&lt;span class="section-num">3&lt;/span> Установка компонент&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#python">&lt;span class="section-num">3.1&lt;/span> Python&lt;/a>&lt;/li>
&lt;li>&lt;a href="#postgres">&lt;span class="section-num">3.2&lt;/span> Postgres&lt;/a>&lt;/li>
&lt;li>&lt;a href="#redis">&lt;span class="section-num">3.3&lt;/span> Redis&lt;/a>&lt;/li>
&lt;li>&lt;a href="#netbox">&lt;span class="section-num">3.4&lt;/span> NetBox&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#предварительная-установка-netbox">&lt;span class="section-num">3.4.1&lt;/span> Предварительная установка NetBox&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-netbox">&lt;span class="section-num">3.4.2&lt;/span> Конфигурация Netbox&lt;/a>&lt;/li>
&lt;li>&lt;a href="#развёртывание-netbox">&lt;span class="section-num">3.4.3&lt;/span> Развёртывание NetBox&lt;/a>&lt;/li>
&lt;li>&lt;a href="#суперпользователь">&lt;span class="section-num">3.4.4&lt;/span> Суперпользователь&lt;/a>&lt;/li>
&lt;li>&lt;a href="#планирование-очистки-рабочей-среды">&lt;span class="section-num">3.4.5&lt;/span> Планирование очистки рабочей среды&lt;/a>&lt;/li>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">3.4.6&lt;/span> Брандмауэр&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#gunicorn">&lt;span class="section-num">3.5&lt;/span> Gunicorn&lt;/a>&lt;/li>
&lt;li>&lt;a href="#http-сервер">&lt;span class="section-num">3.6&lt;/span> HTTP-сервер&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#nginx">&lt;span class="section-num">3.6.1&lt;/span> Nginx&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ssl-сертификат">&lt;span class="section-num">3.6.2&lt;/span> SSL-сертификат&lt;/a>&lt;/li>
&lt;li>&lt;a href="#selinux">&lt;span class="section-num">3.6.3&lt;/span> SELinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">3.6.4&lt;/span> Брандмауэр&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-http-сервера">&lt;span class="section-num">3.6.5&lt;/span> Запуск http-сервера&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-https-сертификата-letsencrypt">&lt;span class="section-num">3.7&lt;/span> Установка https-сертификата LetsEncrypt&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-certbot">&lt;span class="section-num">3.7.1&lt;/span> Установка &lt;em>certbot&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервер-nginx">&lt;span class="section-num">3.7.2&lt;/span> Сервер &lt;em>Nginx&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурационный-файл-nginx">&lt;span class="section-num">3.7.3&lt;/span> Конфигурационный файл &lt;em>Nginx&lt;/em>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="системные-требования">&lt;span class="section-num">1&lt;/span> Системные требования&lt;/h2>
&lt;h2 id="предварительная-подготовка">&lt;span class="section-num">2&lt;/span> Предварительная подготовка&lt;/h2>
&lt;ul>
&lt;li>Будем устанавливать на отдельную операционную систему.&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-компонент">&lt;span class="section-num">3&lt;/span> Установка компонент&lt;/h2>
&lt;h3 id="python">&lt;span class="section-num">3.1&lt;/span> Python&lt;/h3>
&lt;ul>
&lt;li>Установим python-3.12:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install python3.12 python3.12-devel
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавим варианты python в список альтернатив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">alternatives --remove python /usr/bin/python3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alternatives --install /usr/bin/python python /usr/bin/python3.12 &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выберем необходимую версию python:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">alternatives --config python
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="postgres">&lt;span class="section-num">3.2&lt;/span> Postgres&lt;/h3>
&lt;ul>
&lt;li>Версии, которая идёт в комплекте с дистрибутивом, достаточно.&lt;/li>
&lt;li>Но лучше установить версию поновее.&lt;/li>
&lt;li>Смотрим, какие версии в наличии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf module list postgresql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим postgresql-16:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf module -y install postgresql:16
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте установленную версию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">postgres -V
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Инициализируем базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">postgresql-setup --initdb --unit postgresql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверим, что в &lt;code>/var/lib/pgsql/data/postgresql.conf&lt;/code> установлен алгоритм шифрования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">password_encryption = scram-sha-256
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Замените параметры внутреннего подключения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -i -e &lt;span class="s1">&amp;#39;s/^\(host[ ]*all.*\)ident/\1scram-sha-256/&amp;#39;&lt;/span> /var/lib/pgsql/data/pg_hba.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустим postgres:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now postgresql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключимся к базе данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u postgres psql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим базу данных (укажите необходимый пароль):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">netbox&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">netbox&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WITH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PASSWORD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;lt;password&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">netbox&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">OWNER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">netbox&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="k">connect&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">netbox&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SCHEMA&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">netbox&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте подключение к базе данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">psql --username netbox --password --host localhost netbox
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После подключения посмотрите параметры соединения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">conninfo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="redis">&lt;span class="section-num">3.3&lt;/span> Redis&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Redis &amp;mdash; быстрое хранилище данных типа ключ‑значение в памяти.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>С 2024 года сменила лицензию на SSPL (закрытую).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установим redis:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install redis
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Запустим redis:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now redis
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверим, что сервер работает:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">redis-cli ping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В качестве ответа должен быть &lt;code>PONG&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="netbox">&lt;span class="section-num">3.4&lt;/span> NetBox&lt;/h3>
&lt;h4 id="предварительная-установка-netbox">&lt;span class="section-num">3.4.1&lt;/span> Предварительная установка NetBox&lt;/h4>
&lt;ul>
&lt;li>Установим необходимое программное обеспечение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install gcc libxml2-devel libxslt-devel libffi-devel libpq-devel openssl-devel redhat-rpm-config git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Клонируем репозиторий:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /opt/netbox/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt/netbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone -b master --depth &lt;span class="m">1&lt;/span> https://github.com/netbox-community/netbox.git .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим нового системного пользователя:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">groupadd --system netbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adduser --system -m -g netbox netbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R netbox:netbox /opt/netbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown --recursive netbox /opt/netbox/netbox/media/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown --recursive netbox /opt/netbox/netbox/reports/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown --recursive netbox /opt/netbox/netbox/scripts/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация-netbox">&lt;span class="section-num">3.4.2&lt;/span> Конфигурация Netbox&lt;/h4>
&lt;ul>
&lt;li>Создадим файл конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt/netbox/netbox/netbox/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp configuration_example.py configuration.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сконфигурим необходимые параметры.&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>ALLOWED_HOSTS&lt;/p>
&lt;ul>
&lt;li>Список допустимых имен хостов и IP-адресов, по которым можно связаться с этим сервером (имя вашего сервера).&lt;/li>
&lt;li>Необходимо указать хотя бы одно имя или IP-адрес, например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ALLOWED_HOSTS = [&amp;#39;netbox.example.com&amp;#39;, &amp;#39;192.0.2.123&amp;#39;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если вы еще не уверены, каким будет доменное имя и/или IP-адрес установки NetBox, вы можете установить подстановочный знак (звездочку), чтобы разрешить все значения хоста:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ALLOWED_HOSTS&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;*&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>DATABASE&lt;/p>
&lt;ul>
&lt;li>Сведения о конфигурации базы данных.&lt;/li>
&lt;li>Нужно задать имя пользователя и пароль, используемые при настройке PostgreSQL.&lt;/li>
&lt;li>Если служба запущена на удалённом хосте, обновите параметры HOST и PORT:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">DATABASE = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;NAME&amp;#39;: &amp;#39;netbox&amp;#39;, # Database name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;USER&amp;#39;: &amp;#39;netbox&amp;#39;, # PostgreSQL username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;PASSWORD&amp;#39;: &amp;#39;&amp;lt;password&amp;gt;&amp;#39;, # PostgreSQL password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;HOST&amp;#39;: &amp;#39;localhost&amp;#39;, # Database server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;PORT&amp;#39;: &amp;#39;&amp;#39;, # Database port (leave blank for default)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;CONN_MAX_AGE&amp;#39;: 300, # Max database connection age (seconds)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="3">
&lt;li>
&lt;p>REDIS&lt;/p>
&lt;ul>
&lt;li>NetBox требует указания двух отдельных баз данных Redis: &lt;code>tasks&lt;/code> и &lt;code>caching&lt;/code>.&lt;/li>
&lt;li>Обе они могут предоставляться одной и той же службой Redis, однако каждый из них должен иметь уникальный числовой идентификатор базы данных.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">REDIS = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;tasks&amp;#39;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;HOST&amp;#39;: &amp;#39;localhost&amp;#39;, # Redis server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;PORT&amp;#39;: 6379, # Redis port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;PASSWORD&amp;#39;: &amp;#39;&amp;#39;, # Redis password (optional)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;DATABASE&amp;#39;: 0, # Database ID
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;SSL&amp;#39;: False, # Use SSL (optional)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;caching&amp;#39;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;HOST&amp;#39;: &amp;#39;localhost&amp;#39;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;PORT&amp;#39;: 6379,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;PASSWORD&amp;#39;: &amp;#39;&amp;#39;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;DATABASE&amp;#39;: 1, # Unique ID for second database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;SSL&amp;#39;: False,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="4">
&lt;li>
&lt;p>SECRET_KEY&lt;/p>
&lt;ul>
&lt;li>Этому параметру должен быть назначен случайно сгенерированный ключ, используемый в качестве соли для хеширования и связанных с ним криптографических функций.&lt;/li>
&lt;li>Этот ключ должен быть уникальным для данной установки, и его рекомендуется иметь длину не менее 50 символов. Его не следует использовать за пределами локальной системы.&lt;/li>
&lt;li>Простой скрипт Python с именем &lt;code>generate_secret_key.py&lt;/code> предоставляется в родительском каталоге для помощи в создании подходящего ключа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">python3 ../generate_secret_key.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В случае высокодоступной установки с несколькими веб-серверами &lt;code>SECRET_KEY&lt;/code> должен быть одинаковым на всех серверах, чтобы поддерживать постоянное состояние сеанса пользователя.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="развёртывание-netbox">&lt;span class="section-num">3.4.3&lt;/span> Развёртывание NetBox&lt;/h4>
&lt;ul>
&lt;li>Скрипт обновления выполнит следующие действия:
&lt;ul>
&lt;li>создание виртуального окружения Python;&lt;/li>
&lt;li>установка необходимых пакетов Python;&lt;/li>
&lt;li>запуск миграции схемы базы данных;&lt;/li>
&lt;li>создание локальной документации;&lt;/li>
&lt;li>объединение статических файлов ресурсов на диске.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Запускаем скрипт установки Netbox:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u netbox &lt;span class="nv">PYTHON&lt;/span>&lt;span class="o">=&lt;/span>/usr/bin/python3.12 /opt/netbox/upgrade.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="суперпользователь">&lt;span class="section-num">3.4.4&lt;/span> Суперпользователь&lt;/h4>
&lt;ul>
&lt;li>NetBox не имеет предустановленных учётных записей пользователей.&lt;/li>
&lt;li>Необходимо создать суперпользователя (административную учетную запись), чтобы иметь возможность войти в NetBox.&lt;/li>
&lt;li>Войдём в виртуальную среду Python:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> /opt/netbox/venv/bin/activate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим учётную запись суперпользователя:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt/netbox/netbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">python3 manage.py createsuperuser
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Указывать адрес электронной почты пользователя не обязательно.&lt;/li>
&lt;/ul>
&lt;h4 id="планирование-очистки-рабочей-среды">&lt;span class="section-num">3.4.5&lt;/span> Планирование очистки рабочей среды&lt;/h4>
&lt;ul>
&lt;li>NetBox включает в себя скрипт &lt;code>housekeeping&lt;/code>, который выполняет повторяющиеся задачи очистки (очистка старых сеансов и записей об изменениях с истекшим сроком действия).&lt;/li>
&lt;li>Установим его:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo ln -s /opt/netbox/contrib/netbox-housekeeping.sh /etc/cron.daily/netbox-housekeeping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="брандмауэр">&lt;span class="section-num">3.4.6&lt;/span> Брандмауэр&lt;/h4>
&lt;ul>
&lt;li>Настроим брандмауэр:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-port&lt;span class="o">=&lt;/span>8000/tcp --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="gunicorn">&lt;span class="section-num">3.5&lt;/span> Gunicorn&lt;/h3>
&lt;ul>
&lt;li>NetBox работает как приложение WSGI для HTTP-сервера.&lt;/li>
&lt;li>Можно использовать Gunicorn или uWSGI.&lt;/li>
&lt;li>Скопируем файл конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u netbox cp /opt/netbox/contrib/gunicorn.py /opt/netbox/gunicorn.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим скрипты для systemd:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp -v /opt/netbox/contrib/*.service /etc/systemd/system/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl daemon-reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустим сервисы &lt;code>netbox&lt;/code> и &lt;code>netbox-rq&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now netbox netbox-rq
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="http-сервер">&lt;span class="section-num">3.6&lt;/span> HTTP-сервер&lt;/h3>
&lt;h4 id="nginx">&lt;span class="section-num">3.6.1&lt;/span> Nginx&lt;/h4>
&lt;ul>
&lt;li>Установим nginx.&lt;/li>
&lt;li>Выберем нужный модуль:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf module list nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf module switch-to nginx:1.24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf -y install nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируем шаблон файла конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /opt/netbox/contrib/nginx.conf /etc/nginx/conf.d/netbox.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Замените &lt;code>netbox.example.com&lt;/code> именем домена или IP-адресом сервера.&lt;/li>
&lt;/ul>
&lt;h4 id="ssl-сертификат">&lt;span class="section-num">3.6.2&lt;/span> SSL-сертификат&lt;/h4>
&lt;ul>
&lt;li>Сгенерим самоподписанный SSL-сертификат в качестве заглушки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /etc/ssl/private /etc/ssl/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openssl req -x509 -nodes -days &lt;span class="m">365&lt;/span> -newkey rsa:2048 -keyout /etc/ssl/private/netbox.key -out /etc/ssl/certs/netbox.crt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Потом заменим его на нормальный.&lt;/li>
&lt;/ul>
&lt;h4 id="selinux">&lt;span class="section-num">3.6.3&lt;/span> SELinux&lt;/h4>
&lt;ul>
&lt;li>Настройте политики SELinux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setsebool httpd_can_network_connect &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P httpd_can_network_connect &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="брандмауэр">&lt;span class="section-num">3.6.4&lt;/span> Брандмауэр&lt;/h4>
&lt;ul>
&lt;li>Настроим брандмауэр:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-servic&lt;span class="o">={&lt;/span>http,https&lt;span class="o">}&lt;/span> --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="запуск-http-сервера">&lt;span class="section-num">3.6.5&lt;/span> Запуск http-сервера&lt;/h4>
&lt;ul>
&lt;li>Запустим nginx:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-https-сертификата-letsencrypt">&lt;span class="section-num">3.7&lt;/span> Установка https-сертификата LetsEncrypt&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-certbot/">Клиенты ACME. Certbot&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="установка-certbot">&lt;span class="section-num">3.7.1&lt;/span> Установка &lt;em>certbot&lt;/em>&lt;/h4>
&lt;ul>
&lt;li>Проверьте, что установлен репозитории EPEL:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите &lt;em>certbot&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install certbot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для веб-сервера Apache:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install python3-certbot-apache
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для веб-сервера Nginx:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install python3-certbot-nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="сервер-nginx">&lt;span class="section-num">3.7.2&lt;/span> Сервер &lt;em>Nginx&lt;/em>&lt;/h4>
&lt;ul>
&lt;li>Плагин &lt;code>certbot-nginx&lt;/code> предоставляет автоматическую настройку &lt;em>Nginx HTTP Server&lt;/em>.&lt;/li>
&lt;li>Он пытается найти конфигурацию каждого домена, а также добавляет рекомендованные для безопасности параметры, настройки использования сертификатов и пути к сертификатам Let&amp;rsquo;s Encrypt.&lt;/li>
&lt;li>Первоначальная настройка виртуальных хостов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot --nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновление сертификатов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot renew
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Изменение сертификатов без изменения файлов конфигурации &lt;em>nginx&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot --nginx certonly
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурационный-файл-nginx">&lt;span class="section-num">3.7.3&lt;/span> Конфигурационный файл &lt;em>Nginx&lt;/em>&lt;/h4>
&lt;ul>
&lt;li>В файле &lt;code>/etc/nginx/conf.d/netbox.conf&lt;/code> должны быть следующие записи:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ssl_certificate /etc/letsencrypt/live/yourwebsite.com/fullchain.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssl_certificate_key /etc/letsencrypt/live/yourwebsite.com/privkey.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">include /etc/letsencrypt/options-ssl-nginx.conf;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Система управления сетью NetBox</title><link>https://yamadharma.github.io/ru/post/2024/06/19/netbox/</link><pubDate>Wed, 19 Jun 2024 17:52:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/19/netbox/</guid><description>&lt;p>Система управления сетью NetBox.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#плагины">&lt;span class="section-num">3&lt;/span> Плагины&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#dhcp">&lt;span class="section-num">3.1&lt;/span> DHCP&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://netboxlabs.com/oss/netbox/" target="_blank" rel="noopener">http://netboxlabs.com/oss/netbox/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/netbox-community/netbox" target="_blank" rel="noopener">https://github.com/netbox-community/netbox&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://netbox.readthedocs.io" target="_blank" rel="noopener">https://netbox.readthedocs.io&lt;/a>&lt;/li>
&lt;li>Приложение для управления и документирования компьютерных сетей.&lt;/li>
&lt;li>Основные функции:
&lt;ul>
&lt;li>IP address management (IPAM): IP сети и адреса, VRFs, и VLAN;&lt;/li>
&lt;li>DataCenter infrastructure management (DCIM): организация стоечного оборудования по группам и устройствам;&lt;/li>
&lt;li>устройства: типы устройств и место установки;&lt;/li>
&lt;li>соединения: сеть, консоль, силовые соединения;&lt;/li>
&lt;li>виртуализация: виртуальные машины и кластеры;&lt;/li>
&lt;li>схемы передачи данных: схемы дальней связи и провайдеры;&lt;/li>
&lt;li>секреты: зашифрованное хранение конфиденциальных учетных данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Стек приложений:
&lt;ul>
&lt;li>HTTP service: nginx или Apache;&lt;/li>
&lt;li>WSGI service: gunicorn или uWSGI;&lt;/li>
&lt;li>application: Django/Python, &amp;gt;= python-3.10;&lt;/li>
&lt;li>database: — PostgreSQL, &amp;gt;=postgresql-9.12;&lt;/li>
&lt;li>task queuing: Redis/django-rq;&lt;/li>
&lt;li>live device access: NAPALM.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/19/netbox-install/">NetBox. Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/03/netbox-initial-setup/">NetBox. Первоначальная настройка&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="плагины">&lt;span class="section-num">3&lt;/span> Плагины&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/07/22/netbox-plugins/">NetBox. Плагины&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="dhcp">&lt;span class="section-num">3.1&lt;/span> DHCP&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/07/22/netbox-plugin-netbox-kea/">NetBox. Плагин netbox-kea&lt;/a>
&lt;ul>
&lt;li>Позволяет получать информацию о выданных адресах.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Сервер ISC DHCP</title><link>https://yamadharma.github.io/ru/post/2024/06/19/server-isc-dhcp/</link><pubDate>Wed, 19 Jun 2024 15:26:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/19/server-isc-dhcp/</guid><description>&lt;p>Сервер ISC DHCP.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление">&lt;span class="section-num">2&lt;/span> Управление&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Стандартный сервер DHCP.&lt;/li>
&lt;li>Развитие прекращено.&lt;/li>
&lt;li>Рекомендован переход на Kea DHCP (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/06/18/dhcp-kea-server/">Сервер DHCP Kea&lt;/a>).&lt;/li>
&lt;li>Сайт: &lt;a href="https://www.isc.org/dhcp/" target="_blank" rel="noopener">https://www.isc.org/dhcp/&lt;/a>&lt;/li>
&lt;li>Лицензия: Mozilla Public License 2.0. Ранее была лицензия ISC License.&lt;/li>
&lt;/ul>
&lt;h2 id="управление">&lt;span class="section-num">2&lt;/span> Управление&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/25/dynamically-updating-bind-dns-isc-dhcp/">Динамическое обновление DNS-сервера BIND при помощи ISC DHCP&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Динамическое обновление DNS-сервера BIND при помощи Kea DHCP</title><link>https://yamadharma.github.io/ru/post/2024/06/18/dynamically-updating-bind-dns-kea-dhcp/</link><pubDate>Tue, 18 Jun 2024 11:23:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/18/dynamically-updating-bind-dns-kea-dhcp/</guid><description>&lt;p>Динамическое обновление DNS-сервера BIND при помощи Kea DHCP.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#ключи">&lt;span class="section-num">1&lt;/span> Ключи&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-dns-bind">&lt;span class="section-num">2&lt;/span> Настройка DNS Bind&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-kea-dhcp">&lt;span class="section-num">3&lt;/span> Настройка Kea DHCP&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ключ">&lt;span class="section-num">3.1&lt;/span> Ключ&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервис-ddns">&lt;span class="section-num">3.2&lt;/span> Сервис ddns&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервис-dhcp4">&lt;span class="section-num">3.3&lt;/span> Сервис dhcp4&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="ключи">&lt;span class="section-num">1&lt;/span> Ключи&lt;/h2>
&lt;ul>
&lt;li>Создадим ключ на сервере с BIND9:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tsig-keygen -a HMAC-SHA512 DHCP_UPDATER &amp;gt; /etc/named/keys/dhcp_updater.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Файл &lt;code>/etc/named/keys/dhcp_updater.key&lt;/code> будет иметь следующий вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">key &amp;#34;DHCP_UPDATER&amp;#34; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> algorithm hmac-sha512;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> secret &amp;#34;psFFSGdUIwK36l1G82LOw15PuIH4W5uB8h/cw7F0XDsjniBbwm/59tM+V3ydcCs15VLpe2pxlUlggWilytQqgg==&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Поправим права доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R named:named /etc/named/keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-dns-bind">&lt;span class="section-num">2&lt;/span> Настройка DNS Bind&lt;/h2>
&lt;ul>
&lt;li>Настройка происходит в файле &lt;code>/etc/named.conf&lt;/code>.&lt;/li>
&lt;li>Ключ находится в файле &lt;code>/etc/named/keys/dhcp_updater.key&lt;/code>.&lt;/li>
&lt;li>Подключим ключ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">include &amp;#34;/etc/named/keys/dhcp_updater.key&amp;#34;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Разрешим обновление зон:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">zone &amp;#34;local.zone&amp;#34; IN {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type master;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> file &amp;#34;local.zone.db&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> allow-update { key DHCP_UPDATER; };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> update-policy {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> grant DHCP_UPDATER wildcard *.local.zone A DHCID;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zone &amp;#34;0.168.192.in-addr.arpa&amp;#34; IN {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type master;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> file &amp;#34;192.168.0.db&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> update-policy {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> grant DHCP_UPDATER wildcard *.0.168.192.in-addr.arpa PTR DHCID;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сделаем проверку конфигурационного файла:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">named-checkconf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перестартуйте сервер DNS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl restart named.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-kea-dhcp">&lt;span class="section-num">3&lt;/span> Настройка Kea DHCP&lt;/h2>
&lt;h3 id="ключ">&lt;span class="section-num">3.1&lt;/span> Ключ&lt;/h3>
&lt;ul>
&lt;li>Файл ключа назовём &lt;code>/etc/kea/tsig-keys.json&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /etc/kea/tsig-keys.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перенесём ключ на сервер Kea DHCP и перепишем его в формате json:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;tsig-keys&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;DHCP_UPDATER&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;algorithm&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;hmac-sha512&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;secret&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;psFFSGdUIwK36l1G82LOw15PuIH4W5uB8h/cw7F0XDsjniBbwm/59tM+V3ydcCs15VLpe2pxlUlggWilytQqgg==&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сменим владельца:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown kea:root /etc/kea/tsig-keys.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Поправим права доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">640&lt;/span> /etc/kea/tsig-keys.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="сервис-ddns">&lt;span class="section-num">3.2&lt;/span> Сервис ddns&lt;/h3>
&lt;ul>
&lt;li>Настройка происходит в файле &lt;code>/etc/kea/kea-dhcp-ddns.conf&lt;/code>.&lt;/li>
&lt;li>Файл будет иметь следующий вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;DhcpDdns&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;127.0.0.1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">53001&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;control-socket&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;socket-type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;unix&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;socket-name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;/tmp/kea-ddns-ctrl-socket&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">include&lt;/span> &lt;span class="s2">&amp;#34;/etc/kea/tsig-keys.json&amp;#34;&lt;/span>&lt;span class="o">?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;forward-ddns&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ddns-domains&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;local.zone.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;key-name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;DHCP_UPDATER&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;dns-servers&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;192.168.0.1&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;reverse-ddns&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ddns-domains&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;0.168.192.in-addr.arpa.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;key-name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;DHCP_UPDATER&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;dns-servers&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;192.168.0.1&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;loggers&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;kea-dhcp-ddns&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;output_options&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;output&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;stdout&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;%-5p %m\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;severity&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;INFO&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;debuglevel&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обратите особое внимание на точку в конце имени зоны, иначе DDNS завершится сбоем и сообщит, что не удалось найти соответствующее полное доменное имя.&lt;/li>
&lt;li>Можно определить несколько DNS-серверов.&lt;/li>
&lt;li>Раздел журналирования оставлен из шаблона.&lt;/li>
&lt;li>Изменим владельца файла:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown kea:root /etc/kea/kea-dhcp-ddns.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверим файл на наличие возможных синтаксических ошибок:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">kea-dhcp-ddns -t /etc/kea/kea-dhcp-ddns.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустим службу ddns:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now kea-dhcp-ddns.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверим статус работы службы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl status kea-dhcp-ddns.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="сервис-dhcp4">&lt;span class="section-num">3.3&lt;/span> Сервис dhcp4&lt;/h3>
&lt;ul>
&lt;li>Настройка происходит в файле &lt;code>/etc/kea/kea-dhcp4.conf&lt;/code>.&lt;/li>
&lt;li>Включим динамическое обновление:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;dhcp-ddns&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;enable-updates&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;ddns-qualifying-suffix&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;local.zone&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;ddns-override-client-update&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Включаем обновления DDNS.&lt;/li>
&lt;li>Затем мы сообщаем DHCP-серверу, каким будет DNS-суффикс по умолчанию.
&lt;ul>
&lt;li>Если клиент предоставляет только своё имя хоста, это вызывает проблемы для DDNS, поскольку он не будет знать, что такое полное доменное имя, и поэтому не будет знать, какую зону обновлять.&lt;/li>
&lt;li>Другими словами, команда &lt;code>ddns-qualifying-suffix&lt;/code> используется для указания того, какое доменное имя должно быть добавлено к имени хоста.&lt;/li>
&lt;li>Можно определить это для каждой подсети.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для параметра &lt;code>ddns-override-client-update&lt;/code> устанавливается значение &lt;code>true&lt;/code>, поскольку мы не хотим, чтобы клиент решал, какие записи обновлять.&lt;/li>
&lt;li>Проверим файл на наличие возможных синтаксических ошибок:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">kea-dhcp4 -t /etc/kea/kea-dhcp4.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перезапустим службу, чтобы изменения вступили в силу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl restart kea-dhcp4.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверим статус:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl status kea-dhcp4.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Сервер DHCP Kea</title><link>https://yamadharma.github.io/ru/post/2024/06/18/dhcp-kea-server/</link><pubDate>Tue, 18 Jun 2024 11:07:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/18/dhcp-kea-server/</guid><description>&lt;p>Сервер DHCP Kea.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#особенности">&lt;span class="section-num">1.1&lt;/span> Особенности&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">3&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнения">&lt;span class="section-num">4&lt;/span> Дополнения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.isc.org/kea/" target="_blank" rel="noopener">https://www.isc.org/kea/&lt;/a>&lt;/li>
&lt;li>Современный стандартный сервер DHCP.&lt;/li>
&lt;li>Репозиторий:
&lt;ul>
&lt;li>&lt;a href="https://gitlab.isc.org/isc-projects/kea" target="_blank" rel="noopener">https://gitlab.isc.org/isc-projects/kea&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/isc-projects/kea" target="_blank" rel="noopener">https://github.com/isc-projects/kea&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Документация: &lt;a href="https://kea.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">https://kea.readthedocs.io/en/latest/index.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="особенности">&lt;span class="section-num">1.1&lt;/span> Особенности&lt;/h3>
&lt;ul>
&lt;li>Модульная конструкция компонентов
&lt;ul>
&lt;li>Расширяется с помощью модулей-хуков.&lt;/li>
&lt;li>Дистрибутив Kea включает отдельные демоны для сервера DHCPv4, сервера DHCPv6 и модуля динамического DNS (DDNS).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Онлайн-реконфигурация с помощью REST API.
&lt;ul>
&lt;li>Kea использует файл конфигурации JSON, который можно изменить удалённо без остановки и перезапуска сервера.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Панель управления через веб-интерфейс.&lt;/li>
&lt;li>Поддерживает базы данных MySQL, PostgreSQL:
&lt;ul>
&lt;li>упрощает интеграцию с другими системами;&lt;/li>
&lt;li>можно использовать один и тот же сервер резервирования хостов для нескольких DHCP-серверов;&lt;/li>
&lt;li>администрирование глобальных параметров из централизованной системы настройки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/07/dhcp-server-installation/">DHCP. Установка сервера DHCP Kea&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">3&lt;/span> Настройка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/18/dynamically-updating-bind-dns-kea-dhcp/">Динамическое обновление DNS-сервера BIND при помощи Kea DHCP&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="дополнения">&lt;span class="section-num">4&lt;/span> Дополнения&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/07/22/netbox-plugin-netbox-kea/">NetBox. Плагин netbox-kea&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Proxmox. Вспомогательные скрипты</title><link>https://yamadharma.github.io/ru/post/2024/06/04/proxmox-helper-scripts/</link><pubDate>Tue, 04 Jun 2024 13:34:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/04/proxmox-helper-scripts/</guid><description>&lt;p>Вспомогательные скрипты для Proxmox.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-сервера">&lt;span class="section-num">2&lt;/span> Настройка сервера&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#proxmox-ve-post-install">&lt;span class="section-num">2.1&lt;/span> Proxmox VE Post Install&lt;/a>&lt;/li>
&lt;li>&lt;a href="#proxmox-ve-processor-microcode">&lt;span class="section-num">2.2&lt;/span> Proxmox VE Processor Microcode&lt;/a>&lt;/li>
&lt;li>&lt;a href="#proxmox-ve-cpu-scaling-governor">&lt;span class="section-num">2.3&lt;/span> Proxmox VE CPU Scaling Governor&lt;/a>&lt;/li>
&lt;li>&lt;a href="#proxmox-ve-kernel-clean">&lt;span class="section-num">2.4&lt;/span> Proxmox VE Kernel Clean&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Proxmox VE Helper-Scripts&lt;/li>
&lt;li>Сайт: &lt;a href="https://helper-scripts.com/" target="_blank" rel="noopener">https://helper-scripts.com/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/tteck/Proxmox" target="_blank" rel="noopener">https://github.com/tteck/Proxmox&lt;/a>&lt;/li>
&lt;li>Сборник скриптов для Proxmov VE.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-сервера">&lt;span class="section-num">2&lt;/span> Настройка сервера&lt;/h2>
&lt;h3 id="proxmox-ve-post-install">&lt;span class="section-num">2.1&lt;/span> Proxmox VE Post Install&lt;/h3>
&lt;ul>
&lt;li>Отключение Enterprise Repo.&lt;/li>
&lt;li>Добавление или исправление источников PVE.&lt;/li>
&lt;li>Включение No-Subscription Repo.&lt;/li>
&lt;li>Добавление тестового репозитория.&lt;/li>
&lt;li>Отключение подписки nag.&lt;/li>
&lt;li>Обновление Proxmox VE.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bash -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>wget -qLO - https://github.com/tteck/Proxmox/raw/main/misc/post-pve-install.sh&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="proxmox-ve-processor-microcode">&lt;span class="section-num">2.2&lt;/span> Proxmox VE Processor Microcode&lt;/h3>
&lt;ul>
&lt;li>Добавление пакета для загрузки микрокода процессора:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bash -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>wget -qLO - https://github.com/tteck/Proxmox/raw/main/misc/microcode.sh&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="proxmox-ve-cpu-scaling-governor">&lt;span class="section-num">2.3&lt;/span> Proxmox VE CPU Scaling Governor&lt;/h3>
&lt;ul>
&lt;li>Частота CPU регулируется в зависимости от рабочей нагрузки.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bash -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>wget -qLO - https://github.com/tteck/Proxmox/raw/main/misc/scaling-governor.sh&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="proxmox-ve-kernel-clean">&lt;span class="section-num">2.4&lt;/span> Proxmox VE Kernel Clean&lt;/h3>
&lt;ul>
&lt;li>Удаление неиспользуемых образов ядра.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bash -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>wget -qLO - https://github.com/tteck/Proxmox/raw/main/misc/kernel-clean.sh&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Linux. Установка Proxmox VE</title><link>https://yamadharma.github.io/ru/post/2024/06/04/proxmox-ve-install/</link><pubDate>Tue, 04 Jun 2024 11:23:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/04/proxmox-ve-install/</guid><description>&lt;p>Установка Proxmox VE.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#стандартная-установка">&lt;span class="section-num">2.1&lt;/span> Стандартная установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#web-интерфейс">&lt;span class="section-num">2.2&lt;/span> Web-интерфейс&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка-после-установки">&lt;span class="section-num">3&lt;/span> Настройка после установки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#повышение-комфорта-работы">&lt;span class="section-num">3.1&lt;/span> Повышение комфорта работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скрипты-для-тьюнинга--см-dot-proxmox-dot-вспомогательные-скрипты-20240604133400-proxmox-вспомогательные-скрипты-dot-md">&lt;span class="section-num">3.2&lt;/span> Скрипты для тьюнинга (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/06/04/proxmox-helper-scripts/">Proxmox. Вспомогательные скрипты&lt;/a>)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#безопасность">&lt;span class="section-num">3.3&lt;/span> Безопасность&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка-сети-с-vlan">&lt;span class="section-num">4&lt;/span> Настройка сети с VLAN&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.proxmox.com/en/proxmox-virtual-environment" target="_blank" rel="noopener">https://www.proxmox.com/en/proxmox-virtual-environment&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="стандартная-установка">&lt;span class="section-num">2.1&lt;/span> Стандартная установка&lt;/h3>
&lt;ul>
&lt;li>Если Вы используете железный RAID-контроллер, не используйте с ним файловую систему ZFS.&lt;/li>
&lt;li>После завершения установки, сервер нужно перезагрузить с помощью кнопки &lt;code>Reboot&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="web-интерфейс">&lt;span class="section-num">2.2&lt;/span> Web-интерфейс&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Веб-интерфейс управления станет доступен по адресу:&lt;/p>
&lt;div class="verse">
&lt;p>&lt;a href="https://ip_%d0%b0%d0%b4%d1%80%d0%b5%d1%81_%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80%d0%b0:8006" target="_blank" rel="noopener">https://ip_адрес_сервера:8006&lt;/a>&lt;br />&lt;/p>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-после-установки">&lt;span class="section-num">3&lt;/span> Настройка после установки&lt;/h2>
&lt;h3 id="повышение-комфорта-работы">&lt;span class="section-num">3.1&lt;/span> Повышение комфорта работы&lt;/h3>
&lt;ul>
&lt;li>Программы для удобства работы в консоли:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt -y install tmux mc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Программы мониторинга:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt -y install htop lsof
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Утилита для ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt -y install mosh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удобство работы с bash:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt -y install bash-completion
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Разные утилиты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt -y install p7zip-full git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для удалённой работы с kitty:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt -y install kitty-terminfo kitty-shell-integration
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="скрипты-для-тьюнинга--см-dot-proxmox-dot-вспомогательные-скрипты-20240604133400-proxmox-вспомогательные-скрипты-dot-md">&lt;span class="section-num">3.2&lt;/span> Скрипты для тьюнинга (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/06/04/proxmox-helper-scripts/">Proxmox. Вспомогательные скрипты&lt;/a>)&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Proxmox VE Post Install&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bash -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>wget -qLO - https://github.com/tteck/Proxmox/raw/main/misc/post-pve-install.sh&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Proxmox VE Processor Microcode&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bash -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>wget -qLO - https://github.com/tteck/Proxmox/raw/main/misc/microcode.sh&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="безопасность">&lt;span class="section-num">3.3&lt;/span> Безопасность&lt;/h3>
&lt;ul>
&lt;li>Установите и настройте fail2ban (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/10/30/fail2ban-basic-settings/">fail2ban. Основные настройки&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt install fail2ban
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После настройки запустите его:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now fail2ban
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-сети-с-vlan">&lt;span class="section-num">4&lt;/span> Настройка сети с VLAN&lt;/h2>
&lt;ul>
&lt;li>Будем делать сеть на основе Open vSwitch.&lt;/li>
&lt;li>Установим Open vSwitch:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt-get install openvswitch-switch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим &lt;em>OVS Bridge&lt;/em> c поддержкой VLAN из графического интерфейса и прикрепим его к сетевому интерфейсу.&lt;/li>
&lt;li>Например, установим мост &lt;code>vmbr1&lt;/code> на интерфейс &lt;code>eno2&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">auto eno2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface eno2 inet manual
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ovs_type OVSPort
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ovs_bridge vmbr1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto vmbr1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface vmbr1 inet manual
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ovs_type OVSBridge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ovs_ports eno2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для создания VLAN для самого сервера создаём &lt;em>OVSIntPort&lt;/em>.&lt;/li>
&lt;li>После настроек нажимаем &lt;em>Apply Configuration&lt;/em> в графическом интерфейсе.&lt;/li>
&lt;li>Виртуальные машины прикрепляем на созданный мост, настройках сети устанавливаем нужный &lt;em>VLAN Tag&lt;/em>.&lt;/li>
&lt;/ul></description></item><item><title>Linux. Дистрибутив Proxmox</title><link>https://yamadharma.github.io/ru/post/2024/06/04/linux-proxmox-distribution/</link><pubDate>Tue, 04 Jun 2024 10:45:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/04/linux-proxmox-distribution/</guid><description>&lt;p>Дистрибутив Proxmox.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#proxmox-virtual-environment--proxmox-ve">&lt;span class="section-num">2&lt;/span> Proxmox Virtual Environment (Proxmox VE)&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-и-настройка">&lt;span class="section-num">2.1&lt;/span> Установка и настройка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Набор дистрибутивов Linux.&lt;/li>
&lt;li>Основаны на Debian GNU/Linux.&lt;/li>
&lt;li>Разрабатывается австрийской фирмой Proxmox Server Solutions GmbH, спонсируемой Internet Foundation Austria.&lt;/li>
&lt;li>Сайт: &lt;a href="https://www.proxmox.com/" target="_blank" rel="noopener">https://www.proxmox.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="proxmox-virtual-environment--proxmox-ve">&lt;span class="section-num">2&lt;/span> Proxmox Virtual Environment (Proxmox VE)&lt;/h2>
&lt;ul>
&lt;li>Основной дистрибутив набора.&lt;/li>
&lt;li>Система виртуализации.&lt;/li>
&lt;li>В качестве гипервизоров использует KVM и LXC (начиная с версии 4.0, в версиях до 3.4 включительно вместо него использовался OpenVZ).&lt;/li>
&lt;li>Управление виртуальными машинами и администрирование самого сервера производятся через веб-интерфейс либо через интерфейс командной строки.&lt;/li>
&lt;/ul>
&lt;h3 id="установка-и-настройка">&lt;span class="section-num">2.1&lt;/span> Установка и настройка&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/04/proxmox-ve-install/">Linux. Установка Proxmox VE&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/04/proxmox-helper-scripts/">Proxmox. Вспомогательные скрипты&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/04/migrating-virtual-machine-proxmox/">Перенос виртуальной машины на Proxmox&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Скачать фотографии с google photo</title><link>https://yamadharma.github.io/ru/post/2024/06/01/google-photo-download/</link><pubDate>Sat, 01 Jun 2024 16:42:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/01/google-photo-download/</guid><description>&lt;p>Скачать фотографии с google photo.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#прагматика">&lt;span class="section-num">1&lt;/span> Прагматика&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скачивание-фотографий">&lt;span class="section-num">2&lt;/span> Скачивание фотографий&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переименование-фотографий">&lt;span class="section-num">3&lt;/span> Переименование фотографий&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копируем-фотографии-на-телефон">&lt;span class="section-num">4&lt;/span> Копируем фотографии на телефон&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="прагматика">&lt;span class="section-num">1&lt;/span> Прагматика&lt;/h2>
&lt;ul>
&lt;li>Необходимо было скачать фотографии с сервиса Google Photo.&lt;/li>
&lt;li>Кроме того, желательно разместить их на другом облачном сервисе.&lt;/li>
&lt;li>Предполагается разместить на Яндекс с тарифом из группы Яндекс Плюс.&lt;/li>
&lt;li>На этом тарифе фотографии размещаются без учёта места под них в случае, если загружаются с мобильного телефона.&lt;/li>
&lt;li>Предполагается следующий алгоритм:
&lt;ul>
&lt;li>Скачать фотографии на локальный компьютер.&lt;/li>
&lt;li>Переименовать фотографии.&lt;/li>
&lt;li>Перенести фотографии на телефон.&lt;/li>
&lt;li>Скопировать фотографии в локальное хранилище.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="скачивание-фотографий">&lt;span class="section-num">2&lt;/span> Скачивание фотографий&lt;/h2>
&lt;ul>
&lt;li>Скачивать будем с помощью rclone (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/10/27/rclone/">rclone&lt;/a>).&lt;/li>
&lt;li>Запусти команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим учётную запись &lt;code>google-photo&lt;/code> для сервиса &lt;code>Google Photos&lt;/code>.&lt;/li>
&lt;li>Проверьте соединение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone ls google-photo:media
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим каталог для скачивания:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p ~/work-local/google-photo/sync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачаем фотографии с размещением по месяцам:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/work-local/google-photo/sync
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rclone sync google-photo:media/by-month .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если будет ошибка о превышении квоты на скорость чтения, поставьте ограничение (10 запросов в секунду):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone sync --tpslimit &lt;span class="m">10&lt;/span> google-photo:media/by-month .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="переименование-фотографий">&lt;span class="section-num">3&lt;/span> Переименование фотографий&lt;/h2>
&lt;ul>
&lt;li>Подготовим каталог, из которого будем переносить фотографии на телефон:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p ~/work-local/google-photo/phone
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сдублируем фотографии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/work-local/google-photo/sync
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find . -type f -exec ln &lt;span class="s1">&amp;#39;{}&amp;#39;&lt;/span> ../phone/ &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Переименуем фотографии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">jhead -n%Y%m%d-%H%M%S *.jpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">jhead -n%Y%m%d-%H%M%S *.jpeg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">jhead -n%Y%m%d-%H%M%S *.jpe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exiftool &lt;span class="s2">&amp;#34;-filename&amp;lt;createdate&amp;#34;&lt;/span> -globaltimeshift &lt;span class="s2">&amp;#34;-0:0:1 0:0:0&amp;#34;&lt;/span> -d %Y%m%d-%H%M%S.%%e .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Также можно переименовать файлы на основе времени создания:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> i in *.png&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> mv -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>date -r &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> +&lt;span class="s2">&amp;#34;%Y%m%d-%H%M%S&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">.png&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> i in *.gif&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> mv -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>date -r &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> +&lt;span class="s2">&amp;#34;%Y%m%d-%H%M%S&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">.gif&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> i in *.mp4&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> mv -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>date -r &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> +&lt;span class="s2">&amp;#34;%Y%m%d-%H%M%S&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">.mp4&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> i in *.avi&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> mv -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>date -r &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> +&lt;span class="s2">&amp;#34;%Y%m%d-%H%M%S&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">.avi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="копируем-фотографии-на-телефон">&lt;span class="section-num">4&lt;/span> Копируем фотографии на телефон&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Подключим телефон.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Посмотрим список подключённых устройств:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">simple-mtpfs -l
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Подмонтируем телефон (от был под номером &lt;code>1&lt;/code> в списке устройств):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p ~/n/mtp/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">simple-mtpfs --device &lt;span class="m">1&lt;/span> ~/n/mtp/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Создадим каталог на телефоне для фотографий:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p ~/n/mtp/google-photo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируем (или перенесём) файлы на телефон:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -aiv ~/work-local/google-photo/phone/* ~/n/mtp/google-photo/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно удалять файлы по мере копирования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -aiv --remove-source-files ~/work-local/google-photo/phone/* ~/n/mtp/google-photo/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Вы можете потом поправить время создания файлов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">jhead -ft *.jpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Установка Linux в WSL</title><link>https://yamadharma.github.io/ru/post/2024/05/30/linux-wsl-install/</link><pubDate>Thu, 30 May 2024 16:16:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/05/30/linux-wsl-install/</guid><description>&lt;p>Установка Linux в WSL.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ссылки">&lt;span class="section-num">1.1&lt;/span> Ссылки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#документация">&lt;span class="section-num">1.1.1&lt;/span> Документация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-дистрибутивов">&lt;span class="section-num">2&lt;/span> Установка дистрибутивов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#wsl-plus-ubuntu">&lt;span class="section-num">2.1&lt;/span> WSL + Ubuntu&lt;/a>&lt;/li>
&lt;li>&lt;a href="#fedora">&lt;span class="section-num">2.2&lt;/span> Fedora&lt;/a>&lt;/li>
&lt;li>&lt;a href="#arch">&lt;span class="section-num">2.3&lt;/span> Arch&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#первичная-настройка">&lt;span class="section-num">3&lt;/span> Первичная настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#поддержка-systemd">&lt;span class="section-num">4&lt;/span> Поддержка systemd&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-базового-программного-обеспечения">&lt;span class="section-num">5&lt;/span> Установка базового программного обеспечения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#fedora">&lt;span class="section-num">5.1&lt;/span> Fedora&lt;/a>&lt;/li>
&lt;li>&lt;a href="#arch">&lt;span class="section-num">5.2&lt;/span> Arch&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#emacs">&lt;span class="section-num">6&lt;/span> Emacs&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#fedora">&lt;span class="section-num">6.1&lt;/span> Fedora&lt;/a>&lt;/li>
&lt;li>&lt;a href="#arch">&lt;span class="section-num">6.2&lt;/span> Arch&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h3 id="ссылки">&lt;span class="section-num">1.1&lt;/span> Ссылки&lt;/h3>
&lt;h4 id="документация">&lt;span class="section-num">1.1.1&lt;/span> Документация&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://learn.microsoft.com/ru-ru/windows/wsl/install" target="_blank" rel="noopener">https://learn.microsoft.com/ru-ru/windows/wsl/install&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://learn.microsoft.com/ru-ru/windows/wsl/setup/environment" target="_blank" rel="noopener">https://learn.microsoft.com/ru-ru/windows/wsl/setup/environment&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://learn.microsoft.com/en-us/windows/wsl/systemd" target="_blank" rel="noopener">https://learn.microsoft.com/en-us/windows/wsl/systemd&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://learn.microsoft.com/en-us/windows/wsl/wsl-config" target="_blank" rel="noopener">https://learn.microsoft.com/en-us/windows/wsl/wsl-config&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/mikeroyal/WSL-Guide" target="_blank" rel="noopener">https://github.com/mikeroyal/WSL-Guide&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-дистрибутивов">&lt;span class="section-num">2&lt;/span> Установка дистрибутивов&lt;/h2>
&lt;h3 id="wsl-plus-ubuntu">&lt;span class="section-num">2.1&lt;/span> WSL + Ubuntu&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Установите wsl:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wsl --install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>включает дополнительные компоненты WSL и платформы виртуальных машин;&lt;/li>
&lt;li>скачивает и устанавливает последнюю версию ядра Linux;&lt;/li>
&lt;li>задаёт WSL 2 в качестве среды по умолчанию;&lt;/li>
&lt;li>скачивает и устанавливает дистрибутив Ubuntu Linux.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Во время установки потребуется перезапустить компьютер.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="fedora">&lt;span class="section-num">2.2&lt;/span> Fedora&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/VSWSL/Fedora-WSL" target="_blank" rel="noopener">https://github.com/VSWSL/Fedora-WSL&lt;/a>&lt;/li>
&lt;li>Misrosoft Store: &lt;a href="https://www.microsoft.com/store/apps/9NPCP8DRCHSN" target="_blank" rel="noopener">https://www.microsoft.com/store/apps/9NPCP8DRCHSN&lt;/a>&lt;/li>
&lt;li>Установите из Misrosoft Store.&lt;/li>
&lt;li>Во время установки потребуется перезапустить компьютер.&lt;/li>
&lt;/ul>
&lt;h3 id="arch">&lt;span class="section-num">2.3&lt;/span> Arch&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/VSWSL/Arch-WSL" target="_blank" rel="noopener">https://github.com/VSWSL/Arch-WSL&lt;/a>&lt;/li>
&lt;li>Misrosoft Store: &lt;a href="https://www.microsoft.com/store/apps/9MZNMNKSM73X" target="_blank" rel="noopener">https://www.microsoft.com/store/apps/9MZNMNKSM73X&lt;/a>&lt;/li>
&lt;li>Установите из Misrosoft Store.&lt;/li>
&lt;li>Во время установки потребуется перезапустить компьютер.&lt;/li>
&lt;/ul>
&lt;h2 id="первичная-настройка">&lt;span class="section-num">3&lt;/span> Первичная настройка&lt;/h2>
&lt;ul>
&lt;li>После завершения установки будет предложено создать имя пользователя и пароль для дистрибутива Linux.&lt;/li>
&lt;li>Для каждого дистрибутива Linux используются свои имя пользователя и пароль, и они не связаны с именем пользователя Windows.&lt;/li>
&lt;/ul>
&lt;h2 id="поддержка-systemd">&lt;span class="section-num">4&lt;/span> Поддержка systemd&lt;/h2>
&lt;ul>
&lt;li>Убедитесь, что версия WSL: 0.67.6 или более поздняя:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wsl --version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В консоли Linux перейдите под суперпользователя:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -i
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Откройте для редактирования файл &lt;code>/etc/wsl.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vi /etc/wsl.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активируйте systemd:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">boot&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">systemd&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Из консоли Windows остановите выполнение WSL:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wsl.exe --shutdown
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После повторного запуска WSL проверьте работу systemd:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl list-unit-files --type&lt;span class="o">=&lt;/span>service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-базового-программного-обеспечения">&lt;span class="section-num">5&lt;/span> Установка базового программного обеспечения&lt;/h2>
&lt;ul>
&lt;li>В консоли Linux перейдите под суперпользователя:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -i
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="fedora">&lt;span class="section-num">5.1&lt;/span> Fedora&lt;/h3>
&lt;ul>
&lt;li>Обновите систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка системных библиотек:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install vulkan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Устанавливаем утилиту для удобства работы &lt;em>tmux&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install tmux
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Устанавливаем утилиту для удобства работы &lt;em>mc&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install mc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Автодополнение для bash:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install bash-completion
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Просмотр pdf:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install evince
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Терминал kitty:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install kitty
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите libreoffice:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install libreoffice
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="arch">&lt;span class="section-num">5.2&lt;/span> Arch&lt;/h3>
&lt;ul>
&lt;li>Используется пакетный менеджер &lt;em>pacman&lt;/em> (&lt;a href="https://wiki.archlinux.org/title/Pacman_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29" target="_blank" rel="noopener">https://wiki.archlinux.org/title/Pacman_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&lt;/a>).&lt;/li>
&lt;li>Обновите систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -Suy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Устанавливаем утилиту для удобства работы &lt;em>tmux&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S tmux
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Устанавливаем утилиту для удобства работы &lt;em>mc&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S mc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Автодополнение для bash:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S bash-completion
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Просмотр pdf:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S evince
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Терминал kitty:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S kitty
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите libreoffice:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S libreoffice-fresh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="emacs">&lt;span class="section-num">6&lt;/span> Emacs&lt;/h2>
&lt;h3 id="fedora">&lt;span class="section-num">6.1&lt;/span> Fedora&lt;/h3>
&lt;ul>
&lt;li>Установите emacs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install emacs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="arch">&lt;span class="section-num">6.2&lt;/span> Arch&lt;/h3>
&lt;ul>
&lt;li>Установите emacs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S emacs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Windows. Установка в kvm</title><link>https://yamadharma.github.io/ru/post/2024/05/29/windows-install-kvm/</link><pubDate>Wed, 29 May 2024 19:46:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/05/29/windows-install-kvm/</guid><description>&lt;p>Установка Windows на KVM.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#пререквизиты">&lt;span class="section-num">1&lt;/span> Пререквизиты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-windows">&lt;span class="section-num">2&lt;/span> Установка Windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#после-установки">&lt;span class="section-num">3&lt;/span> После установки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="пререквизиты">&lt;span class="section-num">1&lt;/span> Пререквизиты&lt;/h2>
&lt;ul>
&lt;li>Рекомендуется использовать драйвера Virtio для Windows.&lt;/li>
&lt;li>Работа через устройства Virtio осуществляется быстрее, чем через эмуляцию SCSI и т.д.&lt;/li>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-emulation/virtio-win
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно просто скачать с репозитория:
&lt;ul>
&lt;li>&lt;a href="https://github.com/virtio-win/virtio-win-pkg-scripts/blob/master/README.md" target="_blank" rel="noopener">https://github.com/virtio-win/virtio-win-pkg-scripts/blob/master/README.md&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Проще всего использовать образ iso-диска и подмонтировать его как второй cdrom.&lt;/li>
&lt;/ul>
&lt;h2 id="установка-windows">&lt;span class="section-num">2&lt;/span> Установка Windows&lt;/h2>
&lt;ul>
&lt;li>Можно устанавливать с помощью какого-либо графического интерфейса управления qemu, например с помощью virt-manager:&lt;/li>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-emulation/virt-manager
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При установке следует выбрать пункт о дополнительной конфигурации перед установкой.&lt;/li>
&lt;li>На этом этапе следует добавить второй виртуальный cdrom с драйверами virtio-win.&lt;/li>
&lt;li>У жёсткого диска установите шину VirtIO.&lt;/li>
&lt;/ul>
&lt;h2 id="после-установки">&lt;span class="section-num">3&lt;/span> После установки&lt;/h2>
&lt;ul>
&lt;li>Поменяйте в настройках типы устройств:
&lt;ul>
&lt;li>сетевую карту на Virtio;&lt;/li>
&lt;li>видео: QXL.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Установите сертификат RedHat с CD-диска.&lt;/li>
&lt;li>Установите драйвера Virtio.&lt;/li>
&lt;/ul></description></item><item><title>Syncthing. Командная строка</title><link>https://yamadharma.github.io/ru/post/2024/05/29/syncthing-cli/</link><pubDate>Wed, 29 May 2024 15:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/05/29/syncthing-cli/</guid><description>&lt;p>Настройка Syncthing из командной строки.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#основные-команды">&lt;span class="section-num">1&lt;/span> Основные команды&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="основные-команды">&lt;span class="section-num">1&lt;/span> Основные команды&lt;/h2>
&lt;ul>
&lt;li>Создание идентификатора устройства, файлов конфигурации и папки по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">syncthing generate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Начать синхронизацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">syncthing --no-browser
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Получить идентификатор устройства:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">syncthing --device-id
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно получить идентификатор из конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">syncthing cli show system &lt;span class="p">|&lt;/span> jq .myID
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавить другую машину:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">syncthing cli config devices add --device-id &lt;span class="nv">$DEVICE_ID_OTHER&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Поделиться папкой с другой машиной:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">syncthing cli config folders &lt;span class="nv">$FOLDER_ID&lt;/span> devices add --device-id &lt;span class="nv">$DEVICE_ID_OTHER&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установить автоматическое принятие папок с другой машины:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">syncthing cli config devices &lt;span class="nv">$DEVICE_ID_OTHER&lt;/span> auto-accept-folders &lt;span class="nb">set&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Посмотреть идентификаторы папок:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">syncthing cli config folders list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Посмотреть идентификаторы папок из конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">syncthing cli config dump-json &lt;span class="p">|&lt;/span> jq &lt;span class="s1">&amp;#39;.folders[] | .id&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Посмотреть идентификатор папки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">syncthing cli config dump-json &lt;span class="p">|&lt;/span> jq &lt;span class="s1">&amp;#39;.folders[] | select(.path == &amp;#34;/folder/path&amp;#34;) | .id&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Темы оформления</title><link>https://yamadharma.github.io/ru/post/2024/05/22/themes/</link><pubDate>Wed, 22 May 2024 21:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/05/22/themes/</guid><description>&lt;p>Темы оформления.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#редакторы">&lt;span class="section-num">1&lt;/span> Редакторы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">2&lt;/span> Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="редакторы">&lt;span class="section-num">1&lt;/span> Редакторы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/02/15/emacs-themes/">Emacs. Темы&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="linux">&lt;span class="section-num">2&lt;/span> Linux&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/07/linux-themes/">Linux. Темы оформления&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Gentoo. Компиляция системы clang</title><link>https://yamadharma.github.io/ru/post/2024/05/16/gentoo-compiling-clang/</link><pubDate>Thu, 16 May 2024 15:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/05/16/gentoo-compiling-clang/</guid><description>&lt;p>Переход на Clang для компиляции системы.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-системы">&lt;span class="section-num">3&lt;/span> Обновление системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#основная-системная-конфигурация">&lt;span class="section-num">4.1&lt;/span> Основная системная конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-для-каждого-пакета">&lt;span class="section-num">4.2&lt;/span> Конфигурация для каждого пакета&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#компиляция-ядра">&lt;span class="section-num">5&lt;/span> Компиляция ядра&lt;/a>&lt;/li>
&lt;li>&lt;a href="#c-plus-plus-abi">&lt;span class="section-num">6&lt;/span> C++ ABI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">7&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Обязательно должен быть запасной вариант с &lt;em>GCC&lt;/em>.&lt;/li>
&lt;li>На данный момент система не сможет скомпилировать все, что использует &lt;em>Clang&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Установите &lt;code>llvm-libunwind&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge --deselect libunwind
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">FEATURES&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-protect-owned&amp;#34;&lt;/span> emerge -vO llvm-libunwind
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите &lt;em>Clang&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge sys-devel/clang-runtime sys-devel/clang sys-libs/compiler-rt sys-libs/compiler-rt-sanitizers sys-devel/lld-toolchain-symlinks sys-devel/lld
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите библиотеку для C++:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge sys-libs/libcxxabi sys-libs/libcxx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Вместо &lt;code>lld&lt;/code> можно использовать линкер &lt;code>mold&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge mold
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-системы">&lt;span class="section-num">3&lt;/span> Обновление системы&lt;/h2>
&lt;ul>
&lt;li>Перекомпилим пакеты с библиотекой &lt;code>libunwind&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">revdep-rebuild --library libunwind -- --keep-going
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалите библиотеку &lt;code>libunwind&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -cv libunwind
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Необходимо перекомпилить программы, слинкованные со стандартной библиотекой &lt;code>libstdc++&lt;/code>.&lt;/li>
&lt;li>Проверьте, какие программы надо перекомпилить:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">revdep-rebuild --library libstdc++ -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перекомпилим эти пакеты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">revdep-rebuild --library libstdc++ -- --keep-going
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="основная-системная-конфигурация">&lt;span class="section-num">4.1&lt;/span> Основная системная конфигурация&lt;/h3>
&lt;ul>
&lt;li>Файл &lt;code>/etc/portage/make.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># this sources the PORTDIR_OVERLAY variable defined by layman. however, the variable expanded by layman was empty&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># source /var/db/repos/gentoo/local/layman/make.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## This is added to make options by linux-mod.eclass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">BUILD_FIXES&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;LLVM=1 LLVM_IAS=1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CFLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${CFLAGS} -flto=thin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#CFLAGS=&amp;#34;${CFLAGS} -mllvm -extra-vectorizer-passes -mllvm -enable-cond-stores-vec -mllvm -slp-vectorize-hor-store -mllvm -enable-loopinterchange -mllvm -enable-loop-distribute -mllvm -enable-unroll-and-jam -mllvm -enable-loop-flatten -mllvm -interleave-small-loop-scalar-reduction -mllvm -unroll-runtime-multi-exit -mllvm -aggressive-ext-opt -fno-math-errno -fno-trapping-math -falign-functions=32 -funroll-loops -fno-semantic-interposition -fcf-protection=none -mharden-sls=none -fomit-frame-pointer -mprefer-vector-width=256 -flto&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CXXFLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${CFLAGS} ${CXXFLAGS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CC&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;clang&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CPP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;clang-cpp&amp;#34;&lt;/span> &lt;span class="c1"># necessary for xorg-server and possibly other packages&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CXX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;clang++&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">AR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;llvm-ar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;llvm-nm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RANLIB&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;llvm-ranlib&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># No need to set this, clang-common can handle this based on chosen USE flags&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#LDFLAGS=&amp;#34;${LDFLAGS} -fuse-ld=lld&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#LDFLAGS=&amp;#34;${LDFLAGS} -Wl,-O2 -Wl,--as-needed -Wl,--undefined-version&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#LDFLAGS=&amp;#34;${LDFLAGS} -rtlib=compiler-rt -unwindlib=libunwind&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#LDFLAGS=&amp;#34;${LDFLAGS} -fuse-ld=mold&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LDFLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${LDFLAGS} -flto&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-для-каждого-пакета">&lt;span class="section-num">4.2&lt;/span> Конфигурация для каждого пакета&lt;/h3>
&lt;ul>
&lt;li>Можно задать компилятор для каждого пакета в отдельности в файле &lt;code>/etc/portage/package.env&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc itself&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">binutils&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc itself # configure: error: AR&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">binutils&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc itself&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">util&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mingw64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">toolchain&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc itself&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gdb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc itself&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">util&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gengetopt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.23&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin86&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># error: ISO C99&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#media-video/obs-studio compiler-gcc # cef plugin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#media-video/obs-studio compiler-clang-no-lto&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">emulation&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">virtualbox&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># ld.lld error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">emulation&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kvm&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># ld.lld error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#app-emulation/qemu compiler-gcc # ERROR: sizeof(size_t) doesn&amp;#39;t match&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#dev-lang/mono compiler-gcc # ld.lld error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#app-cdr/cdrtools compiler-gcc # configure error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#dev-libs/libsecp256k1 compiler-gcc # unrecognized command-line option&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#dev-util/ostree compiler-gcc # ld.lld error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#dev-python/ruamel-yaml-clib compiler-gcc # incompatible function pointer types&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#dev-qt/qtwebengine:5 compiler-gcc # build fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#media-libs/libpano13 compiler-gcc # build fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#media-libs/tg_owt compiler-gcc # build fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#media-libs/phonon compiler-gcc # build fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#media-libs/vigra compiler-gcc # build fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#net-print/hplip compiler-gcc # error: ISO C++17&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#sys-boot/syslinux compiler-gcc # &amp;#39;stdarg.h&amp;#39; file not found&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#sys-libs/db compiler-gcc # build fails with USE=&amp;#34;cxx&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#sys-process/tini compiler-gcc # ld.lld error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libgudev&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#net-dialup/ppp compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#media-libs/audiofile compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#app-crypt/chntpw compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">exact&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libfpx&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">djbfft&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">visualization&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gnuplot&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sqlite&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.45&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">editors&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">emacs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc-jit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">talloc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tevent&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#app-text/freelib compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">editors&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wily&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mathematics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gretl&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openjdk&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openjdk&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">11&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openjdk&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">17&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openjdk&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">commons&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">daemon&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">perl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">PDL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.63&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">python&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">scipy&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">python&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pygame&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">games&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openscenegraph&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#dev-util/intel-graphics-compiler compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#dev-libs/intel-compute-runtime compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libdnet&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">llvm&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lld&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opencl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opencl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">util&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spirv&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">llvm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">translator&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lldb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lto&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">video&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vlc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lto&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">intel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">intrinsics&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ddcutil&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mail&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">client&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">thunderbird&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#www-client/chromium compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vcs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cvs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vcs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">darcs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">binutils&lt;/span> &lt;span class="c1"># need ld&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">agg&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fox&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">motif&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lto&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gnu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">efi&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">memtest86&lt;/span>&lt;span class="o">+&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#sys-apps/fwupd-efi compiler-clang-binutils&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fwupd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">efi&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">flashrom&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mesa&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lto&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">zathura&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pdf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mupdf&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ldb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tdb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cdb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sssd&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">coinor&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">osi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.108&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># bug: #919825&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">blender&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">4.0&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemtap&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">virtualgl&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libphonenumber&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ffcall&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">util&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">yacc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libbpf&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">perl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">OpenGL&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">xmlrpc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">liboil&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">liblouis&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">snappy&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libcdio&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">samba&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lang&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gprolog&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">log4cpp&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libiodbc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ddd&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">totem&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">parser&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lisp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ecl&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mariadb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">perl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">PGPLOT&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">analyzer&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rrdtool&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lang&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">harbour&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">avidemux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">video&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">avidemux&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">avidemux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plugins&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nds&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openldap&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">serf&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mathematics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pari&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># needs fix makefiles&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">python&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cysignals&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">accessibility&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">brltty&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">video&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ffmpeg&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">office&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dia&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tesseract&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">perl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">PDL&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">perl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">OpenGL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">GLUT&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openssh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">contrib&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">haskell&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">network&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">haskell&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">old&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">haskell&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">resolv&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dante&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">keyutils&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libnftnl&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sound&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sox&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libgphoto2&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dns&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bind&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tools&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sane&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">backends&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">paper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clip&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i18n&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">scim&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mathematics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">octave&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mathematics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">octave&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#sci-mathematics/octave compiler-clang-mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libgamin&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">redshift&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#sci-visualization/scidavis compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">glusterfs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">exempi&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">urt&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libopenraw&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libsidplay&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libdc1394&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">autopano&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">C&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libdv&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">video&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gpac&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">povray&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openglide&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sound&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">audacity&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">firewall&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ipset&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">graphicsmagick&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libayatana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appindicator&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gtk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vnc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">omniORB&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">inkscape&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">print&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gutenprint&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">netkit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">telnetd&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">autofs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openafs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#media-libs/libva-intel-media-driver compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#sci-geosciences/liblas compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lang&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openmodelica&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sqlite&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1">## Bug #928745&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">video&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mpv&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">emulation&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dosemu&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lha&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">arj&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fbreader&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cdr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cdrtools&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Нужно задать конфигурации для разных компиляторов.&lt;/li>
&lt;li>Конфигурация для компилятора &lt;em>gcc&lt;/em> в файле &lt;code>/etc/portage/env/compiler-gcc&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">COMMON_FLAGS=&amp;#34;-O2 -march=native&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CXXFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LDFLAGS=&amp;#34;-Wl,--as-needed&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CC=&amp;#34;gcc&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CXX=&amp;#34;g++&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CPP=&amp;#34;gcc -E&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AR=&amp;#34;ar&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NM=&amp;#34;nm&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RANLIB=&amp;#34;ranlib&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OBJCOPY=&amp;#34;objcopy&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STRIP=&amp;#34;strip&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LD=&amp;#34;ld&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Конфигурация для компилятора &lt;em>clang&lt;/em> без &lt;em>LTO&lt;/em> в файле &lt;code>/etc/portage/env/compiler-clang-no-lto&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Normal settings here
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">COMMON_FLAGS=&amp;#34;-O2 -march=native&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CXXFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CC=&amp;#34;clang&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CPP=&amp;#34;clang-cpp&amp;#34; # necessary for xorg-server and possibly other packages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CXX=&amp;#34;clang++&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AR=&amp;#34;llvm-ar&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NM=&amp;#34;llvm-nm&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RANLIB=&amp;#34;llvm-ranlib&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># No need to set this, clang-common can handle this based on chosen USE flags
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># LDFLAGS=&amp;#34;${LDFLAGS} -fuse-ld=lld -rtlib=compiler-rt -unwindlib=libunwind -Wl,--as-needed&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># LDFLAGS=&amp;#34;-fuse-ld=lld -rtlib=compiler-rt -unwindlib=libunwind -Wl,--as-needed&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="компиляция-ядра">&lt;span class="section-num">5&lt;/span> Компиляция ядра&lt;/h2>
&lt;ul>
&lt;li>Ядро Linux можно скомпилировать с помощью &lt;em>Clang&lt;/em> и набора инструментов &lt;em>LLVM&lt;/em>, определив переменную среды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LLVM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы настроить специальные параметры ядра &lt;em>Clang&lt;/em>, такие как оптимизация времени компоновки или целостность потока управления, выполните следующую команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LLVM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> make menuconfig
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Далее скомпилируйте ядро ​​как обычно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LLVM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> make
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Раньше необходимо было объявить &lt;code>LLVM_IAS=1&lt;/code> для использования внутреннего ассемблера Clang для ядра.&lt;/li>
&lt;li>Это больше не требуется, поскольку &lt;code>LLVM=1&lt;/code> теперь включён по умолчанию.&lt;/li>
&lt;/ul>
&lt;h2 id="c-plus-plus-abi">&lt;span class="section-num">6&lt;/span> C++ ABI&lt;/h2>
&lt;ul>
&lt;li>Для Clang по умолчанию устанавливается библиотека C++ &lt;code>libcxx&lt;/code>.&lt;/li>
&lt;li>При компиляции с помощью &lt;em>gcc&lt;/em> используется библиотека &lt;code>libstdc++&lt;/code>.&lt;/li>
&lt;li>Необходимо, как минимум, перекомпилить приложения, использующие библиотеку &lt;code>libstdc++&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">revdep-rebuild --library libstdc++ -- -v --keep-going
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">7&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://wiki.gentoo.org/wiki/Clang" target="_blank" rel="noopener">https://wiki.gentoo.org/wiki/Clang&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://wiki.gentoo.org/wiki/Clang/Bootstrapping" target="_blank" rel="noopener">https://wiki.gentoo.org/wiki/Clang/Bootstrapping&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Система виртуализации VMware</title><link>https://yamadharma.github.io/ru/post/2024/05/16/vmware-virtualization-system/</link><pubDate>Thu, 16 May 2024 11:33:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/05/16/vmware-virtualization-system/</guid><description>&lt;ul>
&lt;li>Система виртуализации VMware:
&lt;ul>
&lt;li>VMware Workstation Pro for PC&lt;/li>
&lt;li>VMware Fusion Pro for Mac&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#лицензия">&lt;span class="section-num">2&lt;/span> Лицензия&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.vmware.com/products/desktop-hypervisor.html" target="_blank" rel="noopener">https://www.vmware.com/products/desktop-hypervisor.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="лицензия">&lt;span class="section-num">2&lt;/span> Лицензия&lt;/h2>
&lt;ul>
&lt;li>С 13 мая 2024 года локальные гипервизоры Workstation Pro и Fusion Pro бесплатны для личного использования.&lt;/li>
&lt;li>Для коммерческого использования требуется платная подписка.&lt;/li>
&lt;li>Сообщение в блоге: &lt;a href="https://blogs.vmware.com/workstation/2024/05/vmware-workstation-pro-now-available-free-for-personal-use.html" target="_blank" rel="noopener">https://blogs.vmware.com/workstation/2024/05/vmware-workstation-pro-now-available-free-for-personal-use.html&lt;/a>&lt;/li>
&lt;li>Для доступа к загрузкам нужна учётная запись.&lt;/li>
&lt;li>Сайт доступа: &lt;a href="https://support.broadcom.com/" target="_blank" rel="noopener">https://support.broadcom.com/&lt;/a>.&lt;/li>
&lt;li>Чтобы добрать до ссылки на бинарники, нужно заполнить много форм.&lt;/li>
&lt;li>Соединения из России блокируются.&lt;/li>
&lt;li>Могу рекомендовать сторонние ресурсы, например &lt;a href="https://www.comss.ru/list.php?c=vm_apps" target="_blank" rel="noopener">https://www.comss.ru/list.php?c=vm_apps&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Linux. Настройка vlan</title><link>https://yamadharma.github.io/ru/post/2024/05/13/linux-vlan-configuration/</link><pubDate>Mon, 13 May 2024 10:34:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/05/13/linux-vlan-configuration/</guid><description>&lt;p>Linux. Настройка vlan&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#поддержка-vlan-ядром">&lt;span class="section-num">2&lt;/span> Поддержка VLAN ядром&lt;/a>&lt;/li>
&lt;li>&lt;a href="#networkmanager-для-настройки-vlan-интерфейса">&lt;span class="section-num">3&lt;/span> NetworkManager для настройки VLAN интерфейса&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-интерфейса">&lt;span class="section-num">3.1&lt;/span> Создание интерфейса&lt;/a>&lt;/li>
&lt;li>&lt;a href="#назначение-ip-адреса">&lt;span class="section-num">3.2&lt;/span> Назначение IP-адреса&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удаление-интерфейса-vlan">&lt;span class="section-num">3.3&lt;/span> Удаление интерфейса VLAN&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>VLAN (Virtual Local Area Network) позволяет разделить сеть на канальном уровне на несколько изолированных широковещательных доменов.&lt;/li>
&lt;li>С помощью VLAN можно настроить несколько сетей на одном физическом порту сервера.&lt;/li>
&lt;li>При использовании 802.1Q VLAN сетевым пакетам добавляется специальный тег (тегированный трафик) с номером VLAN (&lt;code>VLAN ID&lt;/code>, 1&amp;ndash;4094).&lt;/li>
&lt;li>Предназначение VLAN:
&lt;ul>
&lt;li>сегментирование сети (разделение устройств на изолированные группы);&lt;/li>
&lt;li>уменьшение количества сетевого оборудования;&lt;/li>
&lt;li>снижение нагрузки на сеть для уменьшения широковещательного трафика;&lt;/li>
&lt;li>улучшение безопасности и управляемости сети.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="поддержка-vlan-ядром">&lt;span class="section-num">2&lt;/span> Поддержка VLAN ядром&lt;/h2>
&lt;ul>
&lt;li>Проверьте загрузку модуля ядра Linux 8021q:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lsmod &lt;span class="p">|&lt;/span> grep 8021q
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Загрузите модуль ядра Linux 8021q:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">modprobe 8021q
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавьте модуль в автозагрузку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> 8021q &amp;gt;&amp;gt; /etc/modules-load.d/8021q.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="networkmanager-для-настройки-vlan-интерфейса">&lt;span class="section-num">3&lt;/span> NetworkManager для настройки VLAN интерфейса&lt;/h2>
&lt;h3 id="создание-интерфейса">&lt;span class="section-num">3.1&lt;/span> Создание интерфейса&lt;/h3>
&lt;ul>
&lt;li>Команда для создания VLAN-соединения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nmcli connection add &lt;span class="nb">type&lt;/span> vlan con-name &amp;lt;con-name&amp;gt; ifname &amp;lt;ifname&amp;gt; dev &amp;lt;device&amp;gt; id &amp;lt;vlan_id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Будем придерживаться следующих соглашений:
&lt;ul>
&lt;li>Тег VLAN : &amp;lt;vlan_id&amp;gt; (число от 0 до 4095);&lt;/li>
&lt;li>con-name :vlan&amp;lt;vlan_id&amp;gt;-con&lt;/li>
&lt;li>ifname : vlan&amp;lt;vlan_id&amp;gt;-if&lt;/li>
&lt;li>device: ens5 (какой в системе);&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Создадим VLAN интерфейс с номером VLAN 10 на устройстве &lt;code>ens5&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nmcli connection add &lt;span class="nb">type&lt;/span> vlan con-name vlan10-con ifname vlan10-if dev ens5 id &lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте, что устройство создано:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nmcli device
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте сетевые интерфейсы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nmcli connection show
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После настройки выполните перезагрузку NetworkManager:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl restart NetworkManager
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="назначение-ip-адреса">&lt;span class="section-num">3.2&lt;/span> Назначение IP-адреса&lt;/h3>
&lt;ul>
&lt;li>Зададим следующие значения:
&lt;ul>
&lt;li>соединение: &lt;code>vlan10-con&lt;/code>;&lt;/li>
&lt;li>ip-адрес и сетевая маска: &lt;code>192.168.10.10/24&lt;/code>;&lt;/li>
&lt;li>шлюз по умолчанию: &lt;code>192.168.10.254&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Назначим IP-адрес:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nmcli connection modify vlan10-con ipv4.addresses &lt;span class="s1">&amp;#39;192.168.10.10/24&amp;#39;&lt;/span> ipv4.gateway &lt;span class="s1">&amp;#39;192.168.10.254&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Изменим настройку DHCP по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo nmcli connection modify vlan10-con ipv4.method manual
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Просмотрим адрес:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ip addr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="удаление-интерфейса-vlan">&lt;span class="section-num">3.3&lt;/span> Удаление интерфейса VLAN&lt;/h3>
&lt;ul>
&lt;li>Деактивируйте соединение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo nmcli connection down vlan10-con
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите команду &lt;code>ip addr&lt;/code>, чтобы убедиться, что устройства больше нет в списке:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ip addr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите команду &lt;code>sudo nmcli connection&lt;/code>, чтобы просмотреть список доступных подключений:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nmcli connection
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалите соединение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nmcli connection delete vlan10-con
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите команду &lt;code>sudo nmcli connection&lt;/code>, чтобы просмотреть список доступных подключений:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nmcli connection
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>DHCP. Установка сервера DHCP Kea</title><link>https://yamadharma.github.io/ru/post/2024/05/07/dhcp-server-installation/</link><pubDate>Tue, 07 May 2024 11:39:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/05/07/dhcp-server-installation/</guid><description>&lt;p>Установка сервера DHCP ISC Kea.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#особенности">&lt;span class="section-num">1.1&lt;/span> Особенности&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#опции-dhcp">&lt;span class="section-num">2&lt;/span> Опции DHCP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#репозиторий-rockylinux">&lt;span class="section-num">3.1&lt;/span> Репозиторий RockyLinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозиторий-isc">&lt;span class="section-num">3.2&lt;/span> Репозиторий ISC&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#kea-2-dot-6">&lt;span class="section-num">3.2.1&lt;/span> Kea-2.6&lt;/a>&lt;/li>
&lt;li>&lt;a href="#kea-2-dot-4">&lt;span class="section-num">3.2.2&lt;/span> Kea-2.4&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#инструментарий-миграции-keama">&lt;span class="section-num">3.3&lt;/span> Инструментарий миграции keama&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подготовка">&lt;span class="section-num">4&lt;/span> Подготовка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">4.1&lt;/span> Брандмауэр&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подготовка-базы-данных">&lt;span class="section-num">5&lt;/span> Подготовка базы данных&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#postgresql">&lt;span class="section-num">5.1&lt;/span> PostgreSQL&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-базы-данных">&lt;span class="section-num">5.1.1&lt;/span> Создание базы данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#заполнение-базы-данных">&lt;span class="section-num">5.1.2&lt;/span> Заполнение базы данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-базы-данных">&lt;span class="section-num">5.1.3&lt;/span> Обновление базы данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#миграция-с-isc-dhcp-на-isc-kea">&lt;span class="section-num">5.2&lt;/span> Миграция с ISC DHCP на ISC Kea&lt;/a>&lt;/li>
&lt;li>&lt;a href="#тьюнинг-базы-данных">&lt;span class="section-num">5.3&lt;/span> Тьюнинг базы данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-базы-данных-для-kea">&lt;span class="section-num">5.4&lt;/span> Конфигурация базы данных для Kea&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#виртуальные-интерфейсы">&lt;span class="section-num">6&lt;/span> Виртуальные интерфейсы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#миграция-интерфейсов">&lt;span class="section-num">6.1&lt;/span> Миграция интерфейсов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-интерфейсов-для-kea">&lt;span class="section-num">6.2&lt;/span> Конфигурация интерфейсов для Kea&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#управляющий-агент-kea-ctrl-agent">&lt;span class="section-num">7&lt;/span> Управляющий агент kea-ctrl-agent&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#по-умолчанию">&lt;span class="section-num">7.1&lt;/span> По умолчанию&lt;/a>&lt;/li>
&lt;li>&lt;a href="#доступ-по-сети">&lt;span class="section-num">7.2&lt;/span> Доступ по сети&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">7.2.1&lt;/span> Брандмауэр&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сертификаты">&lt;span class="section-num">7.2.2&lt;/span> Сертификаты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурационный-файл">&lt;span class="section-num">7.2.3&lt;/span> Конфигурационный файл&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пример-запроса">&lt;span class="section-num">7.2.4&lt;/span> Пример запроса&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#запуск">&lt;span class="section-num">8&lt;/span> Запуск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#утилиты">&lt;span class="section-num">9&lt;/span> Утилиты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#просмотр-арендованных-адресов">&lt;span class="section-num">9.1&lt;/span> Просмотр арендованных адресов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#postgres">&lt;span class="section-num">9.1.1&lt;/span> Postgres&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#после-установки">&lt;span class="section-num">10&lt;/span> После установки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.isc.org/kea/" target="_blank" rel="noopener">https://www.isc.org/kea/&lt;/a>&lt;/li>
&lt;li>Репозиторий:
&lt;ul>
&lt;li>&lt;a href="https://gitlab.isc.org/isc-projects/kea" target="_blank" rel="noopener">https://gitlab.isc.org/isc-projects/kea&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/isc-projects/kea" target="_blank" rel="noopener">https://github.com/isc-projects/kea&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Документация: &lt;a href="https://kea.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">https://kea.readthedocs.io/en/latest/index.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="особенности">&lt;span class="section-num">1.1&lt;/span> Особенности&lt;/h3>
&lt;ul>
&lt;li>Модульная конструкция компонентов
&lt;ul>
&lt;li>Расширяется с помощью модулей-хуков.&lt;/li>
&lt;li>Дистрибутив Kea включает отдельные демоны для сервера DHCPv4, сервера DHCPv6 и модуля динамического DNS (DDNS).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Онлайн-реконфигурация с помощью REST API.
&lt;ul>
&lt;li>Kea использует файл конфигурации JSON, который можно изменить удалённо без остановки и перезапуска сервера.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Панель управления через веб-интерфейс.&lt;/li>
&lt;li>Поддерживает базы данных MySQL, PostgreSQL:
&lt;ul>
&lt;li>упрощает интеграцию с другими системами;&lt;/li>
&lt;li>можно использовать один и тот же сервер резервирования хостов для нескольких DHCP-серверов;&lt;/li>
&lt;li>администрирование глобальных параметров из централизованной системы настройки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="опции-dhcp">&lt;span class="section-num">2&lt;/span> Опции DHCP&lt;/h2>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Список стандартных опций DHCPv4
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Название&lt;/th>
&lt;th>Код&lt;/th>
&lt;th>Type&lt;/th>
&lt;th>Массив&lt;/th>
&lt;th>Returned if not requested?&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>time-offset&lt;/td>
&lt;td>2&lt;/td>
&lt;td>int32&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>routers&lt;/td>
&lt;td>3&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>true&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>time-servers&lt;/td>
&lt;td>4&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name-servers&lt;/td>
&lt;td>5&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>domain-name-servers&lt;/td>
&lt;td>6&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>true&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>log-servers&lt;/td>
&lt;td>7&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>cookie-servers&lt;/td>
&lt;td>8&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>lpr-servers&lt;/td>
&lt;td>9&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>impress-servers&lt;/td>
&lt;td>10&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>resource-location-servers&lt;/td>
&lt;td>11&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>boot-size&lt;/td>
&lt;td>13&lt;/td>
&lt;td>uint16&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>merit-dump&lt;/td>
&lt;td>14&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>domain-name&lt;/td>
&lt;td>15&lt;/td>
&lt;td>fqdn&lt;/td>
&lt;td>false&lt;/td>
&lt;td>true&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>swap-server&lt;/td>
&lt;td>16&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>root-path&lt;/td>
&lt;td>17&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>extensions-path&lt;/td>
&lt;td>18&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ip-forwarding&lt;/td>
&lt;td>19&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>non-local-source-routing&lt;/td>
&lt;td>20&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>policy-filter&lt;/td>
&lt;td>21&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>max-dgram-reassembly&lt;/td>
&lt;td>22&lt;/td>
&lt;td>uint16&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>default-ip-ttl&lt;/td>
&lt;td>23&lt;/td>
&lt;td>uint8&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>path-mtu-aging-timeout&lt;/td>
&lt;td>24&lt;/td>
&lt;td>uint32&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>path-mtu-plateau-table&lt;/td>
&lt;td>25&lt;/td>
&lt;td>uint16&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>interface-mtu&lt;/td>
&lt;td>26&lt;/td>
&lt;td>uint16&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>all-subnets-local&lt;/td>
&lt;td>27&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>broadcast-address&lt;/td>
&lt;td>28&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>perform-mask-discovery&lt;/td>
&lt;td>29&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>mask-supplier&lt;/td>
&lt;td>30&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>router-discovery&lt;/td>
&lt;td>31&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>router-solicitation-address&lt;/td>
&lt;td>32&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>static-routes&lt;/td>
&lt;td>33&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>trailer-encapsulation&lt;/td>
&lt;td>34&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>arp-cache-timeout&lt;/td>
&lt;td>35&lt;/td>
&lt;td>uint32&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ieee802-3-encapsulation&lt;/td>
&lt;td>36&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>default-tcp-ttl&lt;/td>
&lt;td>37&lt;/td>
&lt;td>uint8&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tcp-keepalive-interval&lt;/td>
&lt;td>38&lt;/td>
&lt;td>uint32&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tcp-keepalive-garbage&lt;/td>
&lt;td>39&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nis-domain&lt;/td>
&lt;td>40&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nis-servers&lt;/td>
&lt;td>41&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ntp-servers&lt;/td>
&lt;td>42&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vendor-encapsulated-options&lt;/td>
&lt;td>43&lt;/td>
&lt;td>empty&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>netbios-name-servers&lt;/td>
&lt;td>44&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>netbios-dd-server&lt;/td>
&lt;td>45&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>netbios-node-type&lt;/td>
&lt;td>46&lt;/td>
&lt;td>uint8&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>netbios-scope&lt;/td>
&lt;td>47&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>font-servers&lt;/td>
&lt;td>48&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>x-display-manager&lt;/td>
&lt;td>49&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dhcp-option-overload&lt;/td>
&lt;td>52&lt;/td>
&lt;td>uint8&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dhcp-server-identifier&lt;/td>
&lt;td>54&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>false&lt;/td>
&lt;td>true&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dhcp-message&lt;/td>
&lt;td>56&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dhcp-max-message-size&lt;/td>
&lt;td>57&lt;/td>
&lt;td>uint16&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vendor-class-identifier&lt;/td>
&lt;td>60&lt;/td>
&lt;td>hex&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nwip-domain-name&lt;/td>
&lt;td>62&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nwip-suboptions&lt;/td>
&lt;td>63&lt;/td>
&lt;td>hex&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nisplus-domain-name&lt;/td>
&lt;td>64&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nisplus-servers&lt;/td>
&lt;td>65&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tftp-server-name&lt;/td>
&lt;td>66&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>boot-file-name&lt;/td>
&lt;td>67&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>mobile-ip-home-agent&lt;/td>
&lt;td>68&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>smtp-server&lt;/td>
&lt;td>69&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pop-server&lt;/td>
&lt;td>70&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nntp-server&lt;/td>
&lt;td>71&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>www-server&lt;/td>
&lt;td>72&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>finger-server&lt;/td>
&lt;td>73&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>irc-server&lt;/td>
&lt;td>74&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>streettalk-server&lt;/td>
&lt;td>75&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>streettalk-directory-assistance-server&lt;/td>
&lt;td>76&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>user-class&lt;/td>
&lt;td>77&lt;/td>
&lt;td>hex&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>slp-directory-agent&lt;/td>
&lt;td>78&lt;/td>
&lt;td>record (boolean, ipv4-address)&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>slp-service-scope&lt;/td>
&lt;td>79&lt;/td>
&lt;td>record (boolean, string)&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nds-server&lt;/td>
&lt;td>85&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nds-tree-name&lt;/td>
&lt;td>86&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nds-context&lt;/td>
&lt;td>87&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bcms-controller-names&lt;/td>
&lt;td>88&lt;/td>
&lt;td>fqdn&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bcms-controller-address&lt;/td>
&lt;td>89&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>client-system&lt;/td>
&lt;td>93&lt;/td>
&lt;td>uint16&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>client-ndi&lt;/td>
&lt;td>94&lt;/td>
&lt;td>record (uint8, uint8, uint8)&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>uuid-guid&lt;/td>
&lt;td>97&lt;/td>
&lt;td>record (uint8, hex)&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>uap-servers&lt;/td>
&lt;td>98&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>geoconf-civic&lt;/td>
&lt;td>99&lt;/td>
&lt;td>hex&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pcode&lt;/td>
&lt;td>100&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tcode&lt;/td>
&lt;td>101&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>netinfo-server-address&lt;/td>
&lt;td>112&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>netinfo-server-tag&lt;/td>
&lt;td>113&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>default-url&lt;/td>
&lt;td>114&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>auto-config&lt;/td>
&lt;td>116&lt;/td>
&lt;td>uint8&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name-service-search&lt;/td>
&lt;td>117&lt;/td>
&lt;td>uint16&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>subnet-selection&lt;/td>
&lt;td>118&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>domain-search&lt;/td>
&lt;td>119&lt;/td>
&lt;td>fqdn&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vivco-suboptions&lt;/td>
&lt;td>124&lt;/td>
&lt;td>hex&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vivso-suboptions&lt;/td>
&lt;td>125&lt;/td>
&lt;td>hex&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pana-agent&lt;/td>
&lt;td>136&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>v4-lost&lt;/td>
&lt;td>137&lt;/td>
&lt;td>fqdn&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>capwap-ac-v4&lt;/td>
&lt;td>138&lt;/td>
&lt;td>ipv4-address&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>sip-ua-cs-domains&lt;/td>
&lt;td>142&lt;/td>
&lt;td>fqdn&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>rdnss-selection&lt;/td>
&lt;td>146&lt;/td>
&lt;td>record (uint8, ipv4-address, ipv4-address, fqdn)&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>v4-portparams&lt;/td>
&lt;td>159&lt;/td>
&lt;td>record (uint8, psid)&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>v4-captive-portal&lt;/td>
&lt;td>160&lt;/td>
&lt;td>string&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>option-6rd&lt;/td>
&lt;td>212&lt;/td>
&lt;td>record (uint8, uint8, ipv6-address, ipv4-address)&lt;/td>
&lt;td>true&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>v4-access-domain&lt;/td>
&lt;td>213&lt;/td>
&lt;td>fqdn&lt;/td>
&lt;td>false&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 2:&lt;/span>
Список стандартных типов опций DHCP
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Тип&lt;/th>
&lt;th>Описание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>hex&lt;/td>
&lt;td>An arbitrary string of bytes, specified as a set of hexadecimal digits.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>boolean&lt;/td>
&lt;td>Boolean value with allowed values true or false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>empty&lt;/td>
&lt;td>No value, data is carried in suboptions&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fqdn&lt;/td>
&lt;td>Fully qualified domain name (e.g. &lt;a href="https://www.example.com" target="_blank" rel="noopener">www.example.com&lt;/a>)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ipv4-address&lt;/td>
&lt;td>IPv4 address in the usual dotted-decimal notation (e.g. 192.0.2.1)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ipv6-address&lt;/td>
&lt;td>IPv6 address in the usual colon notation (e.g. 2001:db8::1)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ipv6-prefix&lt;/td>
&lt;td>IPv6 prefix and prefix length specified using CIDR notation, e.g. 2001:db8:1::/64. This data type is used to represent an 8-bit field conveying a prefix length and the variable length prefix value&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>psid&lt;/td>
&lt;td>PSID and PSID length separated by a slash&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>record&lt;/td>
&lt;td>Structured data that may be comprised of any types (except &amp;ldquo;record&amp;rdquo; and &amp;ldquo;empty&amp;rdquo;). The array flag applies to the last field only.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>string&lt;/td>
&lt;td>Any text&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tuple&lt;/td>
&lt;td>A length encoded as a 8 (16 for DHCPv6) bit unsigned integer followed by a string of this length&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>uint8&lt;/td>
&lt;td>8 bit unsigned integer with allowed values 0 to 255&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>uint16&lt;/td>
&lt;td>16 bit unsigned integer with allowed values 0 to 65535&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>uint32&lt;/td>
&lt;td>32 bit unsigned integer with allowed values 0 to 4294967295&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>int8&lt;/td>
&lt;td>8 bit signed integer with allowed values -128 to 127&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>int16&lt;/td>
&lt;td>16 bit signed integer with allowed values -32768 to 32767&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>int32&lt;/td>
&lt;td>32 bit signed integer with allowed values -2147483648 to 2147483647&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Устанавливаем сервер Linux (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h3 id="репозиторий-rockylinux">&lt;span class="section-num">3.1&lt;/span> Репозиторий RockyLinux&lt;/h3>
&lt;ul>
&lt;li>Текущая версия в репозитории: 2.2.x.&lt;/li>
&lt;li>В версии 2.3.2 изменили систему именования.&lt;/li>
&lt;li>Если в дальнейше планируется обновление, возможно стоит использовать репозитории ISC.&lt;/li>
&lt;li>Подключаем репозиторий &lt;em>EPEL&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf config-manager --set-enabled crb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf -y install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Устанавливаем сервер &lt;em>Kea&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install kea kea-hooks
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="репозиторий-isc">&lt;span class="section-num">3.2&lt;/span> Репозиторий ISC&lt;/h3>
&lt;ul>
&lt;li>Текущая стабильная версия в репозитории: 2.6.x.&lt;/li>
&lt;/ul>
&lt;h4 id="kea-2-dot-6">&lt;span class="section-num">3.2.1&lt;/span> Kea-2.6&lt;/h4>
&lt;ul>
&lt;li>Подключаем репозиторий:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -1sLf &lt;span class="s1">&amp;#39;https://dl.cloudsmith.io/public/isc/kea-2-6/setup.rpm.sh&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sudo -E bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключите старые репозитории, если они были установлены:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf config-manager --disable isc-kea-2-4 isc-kea-2-4-noarch isc-kea-2-4-source
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf clean all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте, что репозитории отключены:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf repolist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Устанавливаем сервер &lt;em>Kea&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install isc-kea isc-kea-hooks
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="kea-2-dot-4">&lt;span class="section-num">3.2.2&lt;/span> Kea-2.4&lt;/h4>
&lt;ul>
&lt;li>Подключаем репозиторий:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -1sLf &lt;span class="s1">&amp;#39;https://dl.cloudsmith.io/public/isc/kea-2-4/setup.rpm.sh&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sudo -E bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Устанавливаем сервер &lt;em>Kea&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install isc-kea isc-kea-hooks
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="инструментарий-миграции-keama">&lt;span class="section-num">3.3&lt;/span> Инструментарий миграции keama&lt;/h3>
&lt;ul>
&lt;li>При необходимости миграции с реализации ISC DHCP на ISC KEA можно установить помощник миграции.&lt;/li>
&lt;li>Документация:
&lt;ul>
&lt;li>&lt;a href="https://gitlab.isc.org/isc-projects/dhcp/-/wikis/kea-migration-assistant" target="_blank" rel="noopener">https://gitlab.isc.org/isc-projects/dhcp/-/wikis/kea-migration-assistant&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kb.isc.org/docs/migrating-from-isc-dhcp-to-kea-dhcp-using-the-migration-assistant" target="_blank" rel="noopener">https://kb.isc.org/docs/migrating-from-isc-dhcp-to-kea-dhcp-using-the-migration-assistant&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://gitlab.isc.org/isc-projects/dhcp/-/tree/master/keama" target="_blank" rel="noopener">https://gitlab.isc.org/isc-projects/dhcp/-/tree/master/keama&lt;/a>&lt;/li>
&lt;li>Бинарные сборки:
&lt;ul>
&lt;li>&lt;a href="https://cloudsmith.io/~isc/repos/keama/packages/" target="_blank" rel="noopener">https://cloudsmith.io/~isc/repos/keama/packages/&lt;/a>&lt;/li>
&lt;li>заблокирован доступ из России&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Подключаем репозиторий бинарных файлов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -1sLf &lt;span class="s1">&amp;#39;https://dl.cloudsmith.io/public/isc/keama/setup.rpm.sh&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sudo -E bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Устанавливаем сервер &lt;em>Kea&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install isc-dhcp-keama
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="подготовка">&lt;span class="section-num">4&lt;/span> Подготовка&lt;/h2>
&lt;h3 id="брандмауэр">&lt;span class="section-num">4.1&lt;/span> Брандмауэр&lt;/h3>
&lt;ul>
&lt;li>Сконфигурируем брандмауэр:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-service&lt;span class="o">=&lt;/span>dhcp --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="подготовка-базы-данных">&lt;span class="section-num">5&lt;/span> Подготовка базы данных&lt;/h2>
&lt;h3 id="postgresql">&lt;span class="section-num">5.1&lt;/span> PostgreSQL&lt;/h3>
&lt;ul>
&lt;li>Установка базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install postgresql-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте временную зону сервера:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">date +%Z
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Рекомендуется использовать временную зону &lt;code>UTC&lt;/code>.&lt;/li>
&lt;li>Инициализируйте базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">postgresql-setup --initdb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустим базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now postgresql.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="создание-базы-данных">&lt;span class="section-num">5.1.1&lt;/span> Создание базы данных&lt;/h4>
&lt;ul>
&lt;li>Подключимся к базе данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -i -u postgres psql postgres
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверим временную зону базы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show timezone&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SELECT * FROM pg_timezone_names WHERE &lt;span class="nv">name&lt;/span> &lt;span class="o">=&lt;/span> current_setting&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;TIMEZONE&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройки временной зоны для postgresql находятся в файле &lt;code>/var/lib/pgsql/data/postgresql.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">timezone = &amp;#39;Etc/UTC&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно использовать следующие названия:
&lt;ul>
&lt;li>&lt;code>database-name&lt;/code> : &lt;code>kea&lt;/code>;&lt;/li>
&lt;li>&lt;code>user-name&lt;/code> : &lt;code>kea&lt;/code>;&lt;/li>
&lt;li>&lt;code>password&lt;/code> : сгенерите нужный пароль.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Создадим базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">CREATE DATABASE database-name&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим пользователя и пароль для взаимодействия с базой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">CREATE USER user-name WITH PASSWORD &lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GRANT ALL PRIVILEGES ON DATABASE database-name TO user-name&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выйдем из интерфейса базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="se">\q&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="заполнение-базы-данных">&lt;span class="section-num">5.1.2&lt;/span> Заполнение базы данных&lt;/h4>
&lt;ul>
&lt;li>Настроим доступ к базе данных в файле &lt;code>/var/lib/pgsql/data/pg_hba.conf&lt;/code>.&lt;/li>
&lt;li>Добавьте эти записи до других записей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">local database-name user-name password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host database-name user-name 127.0.0.1/32 password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host database-name user-name ::1/128 password
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перезагрузите postgresql:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl restart postgresql.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Загрузка значений вручную&lt;/p>
&lt;ul>
&lt;li>Загрузим значения в базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">psql -d database-name -U user-name -f /usr/share/kea/scripts/pgsql/dhcpdb_create.pgsql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Загрузка значений через &lt;code>kea-admin&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Загрузим значения в базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">kea-admin db-init pgsql -u database-user -p database-password -n database-name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="обновление-базы-данных">&lt;span class="section-num">5.1.3&lt;/span> Обновление базы данных&lt;/h4>
&lt;ul>
&lt;li>При переходе с предыдущей версии &lt;code>kea&lt;/code> надо обновить базу данных.&lt;/li>
&lt;li>Проверьте текущую версию базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">kea-admin db-version pgsql -u database-user -p database-password -n database-name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите базу (при необходимости):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">kea-admin db-upgrade pgsql -u database-user -p database-password -n database-name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="миграция-с-isc-dhcp-на-isc-kea">&lt;span class="section-num">5.2&lt;/span> Миграция с ISC DHCP на ISC Kea&lt;/h3>
&lt;ul>
&lt;li>Преобразуем конфигурационные файлы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">keama -4 -i dhcpd.conf -o kea-dhcp4.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="тьюнинг-базы-данных">&lt;span class="section-num">5.3&lt;/span> Тьюнинг базы данных&lt;/h3>
&lt;ul>
&lt;li>Отключите синхронные коммиты.&lt;/li>
&lt;li>Можно отключить в базе данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -i -u postgres psql postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALTER SYSTEM SET &lt;span class="nv">synchronous_commit&lt;/span>&lt;span class="o">=&lt;/span>OFF&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">\q&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно задать в файле конфигурации &lt;code>/var/lib/pgsql/data/postgresql.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">synchronous_commit = off
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-базы-данных-для-kea">&lt;span class="section-num">5.4&lt;/span> Конфигурация базы данных для Kea&lt;/h3>
&lt;ul>
&lt;li>Добавим конфигурацию базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#34;Dhcp4&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;lease-database&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;postgresql&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;database_name&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;host&amp;#34; : &amp;#34;localhost&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;user&amp;#34;: &amp;#34;user_name&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;password&amp;#34;: &amp;#34;password&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;hosts-database&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;postgresql&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;database_name&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;host&amp;#34; : &amp;#34;localhost&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;user&amp;#34;: &amp;#34;user_name&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;password&amp;#34;: &amp;#34;password&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="виртуальные-интерфейсы">&lt;span class="section-num">6&lt;/span> Виртуальные интерфейсы&lt;/h2>
&lt;ul>
&lt;li>Для подключения к сети использовал интерфейсы VLAN (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/05/13/linux-vlan-configuration/">Linux. Настройка vlan&lt;/a>)&lt;/li>
&lt;/ul>
&lt;h3 id="миграция-интерфейсов">&lt;span class="section-num">6.1&lt;/span> Миграция интерфейсов&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Файлы описания интерфейсов на старой системе имеют следующий вид (&lt;code>/etc/sysconfig/network-scripts/ifcfg-eth1.200&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">VLAN=yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEVICE=eth1.200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BOOTPROTO=none
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ONBOOT=yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TYPE=Ethernet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IPADDR=10.200.0.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NETMASK=255.255.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NETWORK=10.200.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BROADCAST=10.200.255.255
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Для миграции сделал набор скриптов.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Скрипт для извлечения параметров интерфейсов (&lt;code>mk-if-list&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">OUTFILE&lt;/span>&lt;span class="o">=&lt;/span>iflist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[[&lt;/span> -f &lt;span class="si">${&lt;/span>&lt;span class="nv">OUTFILE&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> rm &lt;span class="si">${&lt;/span>&lt;span class="nv">OUTFILE&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> i in ifcfg-eth*.*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">vlan_id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>grep &lt;span class="nv">DEVICE&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">i&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="p">|&lt;/span> cut -d &lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span> -f 2&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">ip&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>grep &lt;span class="nv">IPADDR&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">i&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="p">|&lt;/span> cut -d &lt;span class="s2">&amp;#34;=&amp;#34;&lt;/span> -f 2&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">mask&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>grep &lt;span class="nv">NETMASK&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">i&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="p">|&lt;/span> cut -d &lt;span class="s2">&amp;#34;=&amp;#34;&lt;/span> -f 2&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">prefix&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>ipcalc -p 1.1.1.1 &lt;span class="si">${&lt;/span>&lt;span class="nv">mask&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="p">|&lt;/span> sed -n &lt;span class="s1">&amp;#39;s:^PREFIX=\(.*\):\1:p&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">vlan_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ip&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">prefix&lt;/span>&lt;span class="si">}&lt;/span> &amp;gt;&amp;gt; &lt;span class="si">${&lt;/span>&lt;span class="nv">OUTFILE&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Для скрипта необходима утилита &lt;code>ipcalc&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install ipcalc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Получившийся файл &lt;code>iflist&lt;/code> имеет следующий формат:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">200 10.200.0.2/16
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Скрипт &lt;code>mk-if-script&lt;/code> для получения команд генерации интерфейсов VLAN:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-awk" data-lang="awk">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/usr/bin/awk -f&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">BEGIN&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="kr">print&lt;/span> &lt;span class="s2">&amp;#34;#!/bin/sh\n&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span> &lt;span class="kr">print&lt;/span> &lt;span class="s2">&amp;#34;nmcli connection add type vlan con-name vlan&amp;#34;&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="s2">&amp;#34;-con ifname vlan&amp;#34;&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="s2">&amp;#34;-if dev eno1 id &amp;#34;&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="s2">&amp;#34;\n&amp;#34;&amp;#34;nmcli connection modify vlan&amp;#34;&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="s2">&amp;#34;-con ipv4.addresses &amp;#34;&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="s2">&amp;#34;\n&amp;#34;&amp;#34;sudo nmcli connection modify vlan&amp;#34;&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="s2">&amp;#34;-con ipv4.method manual&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Получим файл с командами интерфейсов:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">./mk-if-script iflist &amp;gt; iflist-run
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Сгенерим новые интерфейсы:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod +x iflist-run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./iflist-run
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-интерфейсов-для-kea">&lt;span class="section-num">6.2&lt;/span> Конфигурация интерфейсов для Kea&lt;/h3>
&lt;ul>
&lt;li>Добавим интерфейсы в файл конфигурации &lt;code>/etc/kea/kea-dhcp4.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#34;Dhcp4&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;interfaces-config&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;interfaces&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;vlan200-if&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;vlan201-if&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;vlan202-if&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;dhcp-socket-type&amp;#34;: &amp;#34;raw&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="управляющий-агент-kea-ctrl-agent">&lt;span class="section-num">7&lt;/span> Управляющий агент kea-ctrl-agent&lt;/h2>
&lt;h3 id="по-умолчанию">&lt;span class="section-num">7.1&lt;/span> По умолчанию&lt;/h3>
&lt;ul>
&lt;li>По умолчанию агент устанавливает unix-сокеты и доступ по сети для локального хоста.&lt;/li>
&lt;li>Если ничего другого не надо, то дополнительной настройки не требуется.&lt;/li>
&lt;/ul>
&lt;h3 id="доступ-по-сети">&lt;span class="section-num">7.2&lt;/span> Доступ по сети&lt;/h3>
&lt;ul>
&lt;li>Для доступа к управляющему агенту из вне необходимо настроить сетевой доступ.&lt;/li>
&lt;li>Например, это может понадобиться для интеграции с Netbox (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/07/22/netbox-plugin-netbox-kea/">NetBox. Плагин netbox-kea&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h4 id="брандмауэр">&lt;span class="section-num">7.2.1&lt;/span> Брандмауэр&lt;/h4>
&lt;ul>
&lt;li>Сконфигурируем брандмауэр:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-port&lt;span class="o">=&lt;/span>8000/tcp --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="сертификаты">&lt;span class="section-num">7.2.2&lt;/span> Сертификаты&lt;/h4>
&lt;ul>
&lt;li>В качестве сертификатов можно использовать сертификаты ACME.&lt;/li>
&lt;li>Если сертификаты не установлены, то используется протокол &lt;code>http&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурационный-файл">&lt;span class="section-num">7.2.3&lt;/span> Конфигурационный файл&lt;/h4>
&lt;ul>
&lt;li>Конфигурация в файле будет будет иметь вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Control-agent&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;http-host&amp;#34;: &amp;#34;10.20.30.40&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;http-port&amp;#34;: 8000,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;trust-anchor&amp;#34;: &amp;#34;/path/to/the/ca-cert.pem&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;cert-file&amp;#34;: &amp;#34;/path/to/the/agent-cert.pem&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;key-file&amp;#34;: &amp;#34;/path/to/the/agent-key.pem&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;cert-required&amp;#34;: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;authentication&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;basic&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;realm&amp;#34;: &amp;#34;kea-control-agent&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;clients&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;user&amp;#34;: &amp;#34;admin&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;password&amp;#34;: &amp;#34;1234&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="пример-запроса">&lt;span class="section-num">7.2.4&lt;/span> Пример запроса&lt;/h4>
&lt;ul>
&lt;li>Пример запроса с использованием RESTful API:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -u admin:1234 -X POST -H &lt;span class="s2">&amp;#34;Content-Type: application/json&amp;#34;&lt;/span> -d &lt;span class="s1">&amp;#39;{ &amp;#34;command&amp;#34;: &amp;#34;config-get&amp;#34;, &amp;#34;service&amp;#34;: [ &amp;#34;dhcp4&amp;#34; ] }&amp;#39;&lt;/span> http://10.20.30.40:8000/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="запуск">&lt;span class="section-num">8&lt;/span> Запуск&lt;/h2>
&lt;ul>
&lt;li>Запуск управляющего агента:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now kea-ctrl-agent.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запуск сервера DHCPv4:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now kea-dhcp4.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запуск сервиса DDNS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now kea-dhcp-ddns.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="утилиты">&lt;span class="section-num">9&lt;/span> Утилиты&lt;/h2>
&lt;h3 id="просмотр-арендованных-адресов">&lt;span class="section-num">9.1&lt;/span> Просмотр арендованных адресов&lt;/h3>
&lt;ul>
&lt;li>Арендованные адреса можно смотреть в базе данных.&lt;/li>
&lt;li>Для разных баз данных существуют конкретные утилиты.&lt;/li>
&lt;/ul>
&lt;h4 id="postgres">&lt;span class="section-num">9.1.1&lt;/span> Postgres&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>kea-list-leases&lt;/p>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://git.sr.ht/~cstrotm/kea-list-leases" target="_blank" rel="noopener">https://git.sr.ht/~cstrotm/kea-list-leases&lt;/a>&lt;/li>
&lt;li>В репозитории скрипт и конфигурационный файл.&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Пререквизиты&lt;/p>
&lt;ul>
&lt;li>Нужно установить драйвер PostgreSQL для python : psycopg (&lt;a href="https://www.psycopg.org/" target="_blank" rel="noopener">https://www.psycopg.org/&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install python3-psycopg2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Настройка&lt;/p>
&lt;ul>
&lt;li>Задайте конфигурационный файл &lt;code>kea-list-leases.conf&lt;/code> (в том же каталоге, что и скрипт):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">postgresql&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">host&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mf">127.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mf">0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">database&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">kea_lease_db&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">user&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">kea&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">password&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">password&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;h2 id="после-установки">&lt;span class="section-num">10&lt;/span> После установки&lt;/h2>
&lt;ul>
&lt;li>Настройте DDNS (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/06/18/dynamically-updating-bind-dns-kea-dhcp/">Динамическое обновление DNS-сервера BIND при помощи Kea DHCP&lt;/a>)&lt;/li>
&lt;/ul></description></item><item><title>Wayland. Просмотрщик изображений Swayimg</title><link>https://yamadharma.github.io/ru/post/2024/05/01/wayland-swayimg-image-viewer/</link><pubDate>Wed, 01 May 2024 18:44:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/05/01/wayland-swayimg-image-viewer/</guid><description>&lt;p>Wayland. Просмотрщик изображений Swayimg.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конфигурации">&lt;span class="section-num">3&lt;/span> Конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-по-умолчанию">&lt;span class="section-num">4&lt;/span> Установка по умолчанию&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/artemsen/swayimg/" target="_blank" rel="noopener">https://github.com/artemsen/swayimg/&lt;/a>&lt;/li>
&lt;li>Легковесный просмотрщик изображений.&lt;/li>
&lt;li>Управляется с клавиатуры.&lt;/li>
&lt;li>По умолчанию раскладка клавиатуры vi-подобная.&lt;/li>
&lt;li>Поддерживаемые форматы:
&lt;ul>
&lt;li>JPEG;&lt;/li>
&lt;li>JPEG XL;&lt;/li>
&lt;li>PNG;&lt;/li>
&lt;li>GIF;&lt;/li>
&lt;li>SVG;&lt;/li>
&lt;li>WebP;&lt;/li>
&lt;li>HEIF/AVIF;&lt;/li>
&lt;li>AV1F/AVIFS;&lt;/li>
&lt;li>TIFF;&lt;/li>
&lt;li>EXR;&lt;/li>
&lt;li>BMP;&lt;/li>
&lt;li>PNM;&lt;/li>
&lt;li>TGA.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/h3>
&lt;ul>
&lt;li>Репозиторий guru (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/">Gentoo. Дополнительные репозитории&lt;/a>).&lt;/li>
&lt;li>Установка репозитория:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> guru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emaint sync -r guru
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка пакета:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge media-gfx/swayimg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурации">&lt;span class="section-num">3&lt;/span> Конфигурации&lt;/h2>
&lt;ul>
&lt;li>Каталоги поиска конфигурации (файл &lt;code>config&lt;/code>):
&lt;ul>
&lt;li>&lt;code>$XDG_CONFIG_HOME/swayimg&lt;/code>;&lt;/li>
&lt;li>&lt;code>$HOME/.config/swayimg&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_DIRS/swayimg&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/xdg/swayimg&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация по умолчанию &lt;code>/usr/share/swayimg/swayimgrc&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Swayimg configuration file.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This file contains the default configuration.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The viewer searches for the config file in the following locations:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1. $XDG_CONFIG_HOME/swayimg/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2. $HOME/.config/swayimg/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3. $XDG_CONFIG_DIRS/swayimg/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4. /etc/xdg/swayimg/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Any of these options can be overridden using the --config argument&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># on the command line, for instance:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># $ swayimg --config=&amp;#34;general.scale=real&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># General options&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">general&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Initial scale (optimal/fit/width/height/fill/real)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">scale&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">optimal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Start in full screen mode (yes/no)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fullscreen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">no&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Anti-aliasing (yes/no)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">antialiasing&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">no&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Background for transparent images (none/grid/RGB, e.g. #112233)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">transparency&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">grid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Window position (parent or absolute coordinates, e.g. 100,200)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">position&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">parent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Window size (parent, image, or absolute size, e.g. 800,600)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">parent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Window background mode/color (none/RGB, e.g. #112233)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">background&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">none&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Run slideshow at startup (yes/no)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">slideshow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">no&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Slideshow image display time (seconds)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">slideshow_time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Image list configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Default order (none/alpha/random)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">alpha&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Looping list of images (yes/no)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">loop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">yes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Read directories recursively (yes/no)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">recursive&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">no&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Open all files in the start directory (yes/no)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">all&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">yes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Font configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">font&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Font name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">monospace&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Font size (in pt)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">14&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Font color&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="c1">#cccccc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Drop shadow (none/RGB, e.g. #112233)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">shadow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="c1">#000000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Image meta info scheme (format, size, EXIF, etc)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Mode on startup (off/brief/full)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mode&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">full&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Display scheme for the &amp;#34;full&amp;#34; mode: position = content&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">full&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">topleft&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">filesize&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">imagesize&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">exif&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">full&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">topright&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">full&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bottomleft&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scale&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">frame&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">full&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bottomright&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">status&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Display scheme for the &amp;#34;brief&amp;#34; mode: position = content&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">brief&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">topleft&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">brief&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">topright&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">none&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">brief&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bottomleft&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">none&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">brief&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bottomright&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">status&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Key binding section: key = action [parameters]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Key can be specified with modifiers, e.g &amp;#34;Ctrl+Alt+Shift+x&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Use the `xkbcli` tool to get key name: `xkbcli interactive-wayland`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">F1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">help&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Home&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">first_file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">End&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">last_file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Prior&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">prev_file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">next_file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Space&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">next_file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">prev_dir&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">next_dir&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">prev_frame&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">o&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">next_frame&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">slideshow&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">animation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Left&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">step_left&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Right&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">step_right&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Up&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">step_up&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Down&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">step_down&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Equal&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Plus&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Minus&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">w&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="n">width&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">w&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="n">height&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">z&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="n">fit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="n">fill&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">0&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="n">real&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">BackSpace&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="n">optimal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bracketleft&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">rotate_left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bracketright&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">rotate_right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">m&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">flip_vertical&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">flip_horizontal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">antialiasing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">reload&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">info&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">e&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;Image: %&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Escape&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">q&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Mouse / touchpad configuration, same format as in [keys]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">################################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">mouse&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ScrollLeft&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">step_right&lt;/span> &lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ScrollRight&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">step_left&lt;/span> &lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ScrollUp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">step_down&lt;/span> &lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ScrollDown&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">step_up&lt;/span> &lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Ctrl&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">ScrollUp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Ctrl&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">ScrollDown&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">ScrollUp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">prev_file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">ScrollDown&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">next_file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Alt&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">ScrollUp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">prev_frame&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Alt&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">ScrollDown&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">next_frame&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># vim: filetype=dosini&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-по-умолчанию">&lt;span class="section-num">4&lt;/span> Установка по умолчанию&lt;/h2>
&lt;ul>
&lt;li>Можно установить swayimg как просмотрщик по умолчанию (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/04/02/xdg-mime-applications/">XDG. Приложения MIME&lt;/a>).&lt;/li>
&lt;li>Проверим, какие ассоциации актуальны:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cat /usr/share/applications/swayimg.desktop &lt;span class="p">|&lt;/span> grep -i MimeType &lt;span class="p">|&lt;/span> cut -d &lt;span class="s2">&amp;#34;=&amp;#34;&lt;/span> -f &lt;span class="m">2&lt;/span> &lt;span class="p">|&lt;/span> tr &lt;span class="s1">&amp;#39;;&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;\n&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> xargs -l1 xdg-mime query default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим для всех типов ассоциацию с &lt;em>swayimg&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cat /usr/share/applications/swayimg.desktop &lt;span class="p">|&lt;/span> grep -i MimeType &lt;span class="p">|&lt;/span> cut -d &lt;span class="s2">&amp;#34;=&amp;#34;&lt;/span> -f &lt;span class="m">2&lt;/span> &lt;span class="p">|&lt;/span> tr &lt;span class="s1">&amp;#39;;&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;\n&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> xargs -l1 xdg-mime default swayimg.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Система управления конфигурациями Oxidized</title><link>https://yamadharma.github.io/ru/post/2024/04/26/oxidized/</link><pubDate>Fri, 26 Apr 2024 17:44:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/04/26/oxidized/</guid><description>&lt;p>Система управления конфигурациями Oxidized.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#необходимое-программное-обеспечение">&lt;span class="section-num">2.1&lt;/span> Необходимое программное обеспечение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-oxidized">&lt;span class="section-num">2.2&lt;/span> Установка Oxidized&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-oxidized">&lt;span class="section-num">2.3&lt;/span> Обновление Oxidized&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">3&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурация-oxidized">&lt;span class="section-num">3.1&lt;/span> Конфигурация Oxidized&lt;/a>&lt;/li>
&lt;li>&lt;a href="#хранение-в-git">&lt;span class="section-num">3.2&lt;/span> Хранение в git&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурация-сохранения-в-git">&lt;span class="section-num">3.2.1&lt;/span> Конфигурация сохранения в git&lt;/a>&lt;/li>
&lt;li>&lt;a href="#просмотр-файлов-устройств">&lt;span class="section-num">3.2.2&lt;/span> Просмотр файлов устройств&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удалить-отключённое-устройство">&lt;span class="section-num">3.2.3&lt;/span> Удалить отключённое устройство&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файл-описания-оборудования">&lt;span class="section-num">3.3&lt;/span> Файл описания оборудования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#службы-запуска">&lt;span class="section-num">3.4&lt;/span> Службы запуска&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подключение-к-librenms">&lt;span class="section-num">4&lt;/span> Подключение к LibreNMS&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#порядок-действий">&lt;span class="section-num">4.2&lt;/span> Порядок действий&lt;/a>&lt;/li>
&lt;li>&lt;a href="#selinux">&lt;span class="section-num">4.3&lt;/span> SELinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-oxidized-к-web-интерфейсу-librenms">&lt;span class="section-num">4.4&lt;/span> Подключение Oxidized к web-интерфейсу LibreNMS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#информация-о-группах">&lt;span class="section-num">4.5&lt;/span> Информация о группах&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#задание-разделения-на-группы">&lt;span class="section-num">4.5.1&lt;/span> Задание разделения на группы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-в-oxidized">&lt;span class="section-num">4.5.2&lt;/span> Конфигурация в Oxidized&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#автоматическое-добавление-устройств-в-oxidized">&lt;span class="section-num">4.6&lt;/span> Автоматическое добавление устройств в Oxidized&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переименование-устройства">&lt;span class="section-num">4.7&lt;/span> Переименование устройства&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Создавался как альтернатива RANCID.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/ytti/oxidized" target="_blank" rel="noopener">https://github.com/ytti/oxidized&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="необходимое-программное-обеспечение">&lt;span class="section-num">2.1&lt;/span> Необходимое программное обеспечение&lt;/h3>
&lt;ul>
&lt;li>Установите язык ruby:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install ruby
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите необходимые средства разработки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y group install &lt;span class="s2">&amp;#34;Development Tools&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf -y install make cmake which sqlite-devel ruby gcc ruby-devel libicu-devel gcc-c++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf -y install openssl-devel
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите git для хранения файлов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-oxidized">&lt;span class="section-num">2.2&lt;/span> Установка Oxidized&lt;/h3>
&lt;ul>
&lt;li>Добавьте пользователя &lt;code>oxidized&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">useradd -c &lt;span class="s2">&amp;#34;oxidized system account&amp;#34;&lt;/span> -m -d /home/oxidized -s /bin/bash oxidized
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Устанавливаем Oxidized:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gem install oxidized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gem install oxidized-script oxidized-web
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="обновление-oxidized">&lt;span class="section-num">2.3&lt;/span> Обновление Oxidized&lt;/h3>
&lt;ul>
&lt;li>Логинимся под пользователем oxidized:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su - oxidized
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновляем Oxidized:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gem update oxidized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gem update oxidized-script oxidized-web
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">3&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="конфигурация-oxidized">&lt;span class="section-num">3.1&lt;/span> Конфигурация Oxidized&lt;/h3>
&lt;ul>
&lt;li>Документация: &lt;a href="https://github.com/ytti/oxidized/blob/master/docs/Configuration.md" target="_blank" rel="noopener">https://github.com/ytti/oxidized/blob/master/docs/Configuration.md&lt;/a>&lt;/li>
&lt;li>Запустите oxidized однократно для создания структуры каталогов и шаблона конфигурационного файла:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su - oxidized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">oxidized
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отредактируйте шаблон файла конфигурации &lt;code>~oxidized/.config/oxidized/config&lt;/code>.&lt;/li>
&lt;li>Oxidized использует формат YAML для конфигурационных файлов, поэтому все отступы должны быть выполнены пробелами, допускается два или четыре пробела на отступ.&lt;/li>
&lt;li>Основные элементы файла конфигурации:
&lt;ul>
&lt;li>
&lt;p>Задание имени пользователя и пароля по умолчанию для соединения с устройствами:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">oxidized&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Password&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Указание типа устройства по умолчанию (например, Cisco):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">model&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ios&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Список устройств можно посмотреть в &lt;a href="https://github.com/ytti/oxidized/tree/master/lib/oxidized/model" target="_blank" rel="noopener">https://github.com/ytti/oxidized/tree/master/lib/oxidized/model&lt;/a>.&lt;/li>
&lt;li>Список операционных систем: &lt;a href="https://github.com/ytti/oxidized/blob/master/docs/Supported-OS-Types.md" target="_blank" rel="noopener">https://github.com/ytti/oxidized/blob/master/docs/Supported-OS-Types.md&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Зададим интервал создания копий данных в секундах (рекомендуется делать копии раз в сутки, что соответствует 86400 секундам):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">86400&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Для устройств со слабыми характеристиками и медленными каналами связи рекомендуется увеличить таймаут (здесь таймаут 60 секунд, три повторные попытки):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">timeout&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">60&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">retries&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Если вы не хотите, чтобы ваши резервные копии содержали чувствительные данные, такие как ключи и пароли, добавьте следующую опцию:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">remove_secret&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Раздел &lt;code>input&lt;/code> отвечает за связь с устройствами (по умолчанию используются протоколы &lt;code>ssh&lt;/code> и &lt;code>telnet&lt;/code>, протокол &lt;code>telnet&lt;/code> не безопасен, рекомендуется использовать только &lt;code>ssh&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">input&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ssh&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">debug&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ssh&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ftp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">passive&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">utf8_encoded&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Раздел &lt;code>output&lt;/code> определяет способ хранения собранной информации (будем использовать &lt;em>git&lt;/em> для этой цели):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">output&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">git&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">git&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">oxidized&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">email&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">oxidized@MYDOMAIN.ru&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/oxidized/.config/oxidized/devices.git&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Раздел &lt;code>source&lt;/code> задаёт базу данных устройств (используем CSV-файл с двоеточием в качестве разделителя):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">csv&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">csv&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/oxidized/.config/oxidized/router.db&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">delimiter&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>!&lt;span class="l">ruby/regexp /:/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">map&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">model&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ip&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gpg&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Опция &lt;code>file&lt;/code> задаёт путь к файлу с базой устройств.&lt;/li>
&lt;li>Подсекция &lt;code>map&lt;/code> определяет порядок параметров подключения к устройству в строке CSV-файла.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Весь файл конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">oxidized&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Password&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">model&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ios&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">resolve_dns&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">86400&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">use_syslog&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">debug&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">threads&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">30&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">timeout&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">140&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">retries&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">prompt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>!&lt;span class="l">ruby/regexp /^([\w.@-]+[#&amp;gt;]\s?)$/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">rest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">8888&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">next_adds_job&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">remove_secret&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">vars&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{}&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">groups&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{}&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">models&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{}&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">pid&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/oxidized/.config/oxidized/pid&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">log&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/oxidized/.config/oxidized/log&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">crash&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">directory&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/oxidized/.config/oxidized/crashes&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hostnames&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">stats&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">history_size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">input&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ssh&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">debug&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ssh&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ftp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">passive&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">utf8_encoded&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">output&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">git&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">git&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">oxidized&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">email&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">oxidized@MYDOMAIN.ru&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/oxidized/.config/oxidized/devices.git&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">csv&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">csv&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/oxidized/.config/oxidized/router.db&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">delimiter&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>!&lt;span class="l">ruby/regexp /:/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">map&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">model&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ip&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gpg&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">model_map&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">juniper&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">junos&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cisco&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ios&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="хранение-в-git">&lt;span class="section-num">3.2&lt;/span> Хранение в git&lt;/h3>
&lt;h4 id="конфигурация-сохранения-в-git">&lt;span class="section-num">3.2.1&lt;/span> Конфигурация сохранения в git&lt;/h4>
&lt;ul>
&lt;li>Здесь используется интерфейс &lt;code>libgit2&lt;/code> (не работают хуки).&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Репозиторий без групп&lt;/p>
&lt;ul>
&lt;li>Конфигурация имеет вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">output&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">git&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">git&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Oxidized&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">email&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">o@example.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/oxidized/.config/oxidized/devices.git&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Репозитории с группами&lt;/p>
&lt;ul>
&lt;li>Конфигурация имеет вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">output&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">git&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">git&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Oxidized&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">email&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">o@example.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/oxidized/.config/oxidized/git-repos/default.git&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Oxidized создаст репозиторий для каждой группы в том же каталоге, что и репозиторий &lt;code>default.git&lt;/code>.&lt;/li>
&lt;li>Если вы хотите использовать группы и один репозиторий, вы можете принудительно сделать это с помощью конфигурации &lt;code>single_repo&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">output&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">git&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">git&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">single_repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/oxidized/.config/oxidized/devices.git&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="просмотр-файлов-устройств">&lt;span class="section-num">3.2.2&lt;/span> Просмотр файлов устройств&lt;/h4>
&lt;ul>
&lt;li>Перейдите в правильный репозиторий git для необходимого устройства и получите список устройств:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git ls-files -s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Посмотрите содержимое файла:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git cat-file -p &amp;lt;object id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="удалить-отключённое-устройство">&lt;span class="section-num">3.2.3&lt;/span> Удалить отключённое устройство&lt;/h4>
&lt;ul>
&lt;li>Очистить сохранённую конфигурацию устройства:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git rm --cached &amp;lt;object id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="файл-описания-оборудования">&lt;span class="section-num">3.3&lt;/span> Файл описания оборудования&lt;/h3>
&lt;ul>
&lt;li>Создадим файл: &lt;code>/home/oxidized/.config/oxidized/router.db&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sw01:ios:10.10.10.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw02:ios:10.10.10.10:22:test:PASSWORD
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Структура полей: наименование, тип оборудования, IP-адрес, порт, логин, пароль.&lt;/li>
&lt;li>Если значения отсутствуют, то используются значения по умолчания.&lt;/li>
&lt;/ul>
&lt;h3 id="службы-запуска">&lt;span class="section-num">3.4&lt;/span> Службы запуска&lt;/h3>
&lt;ul>
&lt;li>Запустим oxidized:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now oxidized.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="подключение-к-librenms">&lt;span class="section-num">4&lt;/span> Подключение к LibreNMS&lt;/h2>
&lt;ul>
&lt;li>Подключим oxidized к LibreNMS (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/03/20/librenms-monitoring-system/">Система мониторинга LibreNMS&lt;/a>)&lt;/li>
&lt;/ul>
&lt;h3 id="общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Интеграция LibreNMS с Oxidized дает следующие преимущества:
&lt;ul>
&lt;li>Просмотр конфигурации: «Текущая», «История» и «Различия» на вкладке «Конфигурации» каждого устройства.&lt;/li>
&lt;li>Автоматическое добавление устройств в Oxidized: включая фильтрацию и группировку для упрощения управления учетными данными.&lt;/li>
&lt;li>Поиск конфигурации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="порядок-действий">&lt;span class="section-num">4.2&lt;/span> Порядок действий&lt;/h3>
&lt;ul>
&lt;li>Установить Oxidized.&lt;/li>
&lt;li>Подключить Oxidized к web-интерфейсу LibreNMS.&lt;/li>
&lt;li>Чтобы устройства добавлялись автоматически, вам необходимо настроить извлечения их из LibreNMS.&lt;/li>
&lt;li>LibreNMS автоматически сопоставит ОС с именем модели Oxidized, не нужно использовать параметр конфигурации &lt;code>model_map&lt;/code> в Oxidized.&lt;/li>
&lt;/ul>
&lt;h3 id="selinux">&lt;span class="section-num">4.3&lt;/span> SELinux&lt;/h3>
&lt;ul>
&lt;li>Необходимо разрешить &lt;code>httpd&lt;/code> исходящие подключения к сети:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setsebool -P httpd_can_network_connect &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="подключение-oxidized-к-web-интерфейсу-librenms">&lt;span class="section-num">4.4&lt;/span> Подключение Oxidized к web-интерфейсу LibreNMS&lt;/h3>
&lt;ul>
&lt;li>Активируйте подключение к Oxidized/
&lt;ul>
&lt;li>
&lt;p>Подключить можно в web-интерфейсе:&lt;/p>
&lt;div class="verse">
&lt;p>&lt;a href="https://" target="_blank" rel="noopener">https://&lt;/a>&amp;lt;ваш URL-адрес librenms&amp;gt;/settings/external/oxidized&lt;br />&lt;/p>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Подключить можно в командной строке:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lnms config:set oxidized.enabled &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lnms config:set oxidized.url http://127.0.0.1:8888
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Подключите управление версиями конфигурации (работает с модулем вывода git).
&lt;ul>
&lt;li>
&lt;p>Подключить можно в web-интерфейсе:&lt;/p>
&lt;div class="verse">
&lt;p>&lt;a href="https://" target="_blank" rel="noopener">https://&lt;/a>&amp;lt;ваш URL-адрес librenms&amp;gt;/settings/external/oxidized&lt;br />&lt;/p>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Подключить можно в командной строке:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lnms config:set oxidized.features.versioning &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="информация-о-группах">&lt;span class="section-num">4.5&lt;/span> Информация о группах&lt;/h3>
&lt;ul>
&lt;li>Oxidized поддерживает различные способы использования учётных данных для входа на устройства.&lt;/li>
&lt;li>Вы можете указать глобальное имя пользователя и пароль в Oxidized, имя пользователя и пароль на уровне группы или для каждого устройства.&lt;/li>
&lt;li>При синхронизации с LibreNMS можно делать только конфигурации для групп.&lt;/li>
&lt;li>LibreNMS поддерживает отправку групп в Oxidized, чтобы вы могли затем определить учётные данные группы в Oxidized. Чтобы включить эту поддержку, включите «Включить возврат групп в Oxidized».
&lt;ul>
&lt;li>
&lt;p>Подключить можно в web-интерфейсе:&lt;/p>
&lt;div class="verse">
&lt;p>&lt;a href="https://" target="_blank" rel="noopener">https://&lt;/a>&amp;lt;ваш URL-адрес librenms&amp;gt;/settings/external/oxidized&lt;br />&lt;/p>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Подключить можно в командной строке:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lnms config:set oxidized.group_support &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Можно установить группу по умолчанию (все устройства попадут в эту группу):
&lt;ul>
&lt;li>
&lt;p>Подключить можно в web-интерфейсе:&lt;/p>
&lt;div class="verse">
&lt;p>&lt;a href="https://" target="_blank" rel="noopener">https://&lt;/a>&amp;lt;ваш URL-адрес librenms&amp;gt;/settings/external/oxidized&lt;br />&lt;/p>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Подключить можно в командной строке:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lnms config:set oxidized.default_group default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="задание-разделения-на-группы">&lt;span class="section-num">4.5.1&lt;/span> Задание разделения на группы&lt;/h4>
&lt;ul>
&lt;li>Группы для Oxidized никак не связаны с группами LibreNMS.&lt;/li>
&lt;li>Чтобы вернуть переопределение в Oxidized, вы можете сделать это, предоставив ключ переопределения, затем сопоставив поиск хоста (или хостов) и, наконец, определив само значение переопределения.&lt;/li>
&lt;li>LibreNMS не проверяет достоверность этих атрибутов, а передает их в Oxidized в соответствии с определением.&lt;/li>
&lt;li>Сопоставление хостов можно выполнить с помощью &lt;code>hostname&lt;/code>, &lt;code>sysname&lt;/code>, &lt;code>os&lt;/code>, &lt;code>location&lt;/code>, &lt;code>sysDescr&lt;/code>, &lt;code>hardware&lt;/code>, &lt;code>purpose&lt;/code>, &lt;code>notes&lt;/code>.&lt;/li>
&lt;li>Порядок соответствия следующий:
&lt;ul>
&lt;li>hostname&lt;/li>
&lt;li>sysName&lt;/li>
&lt;li>sysDescr&lt;/li>
&lt;li>hardware&lt;/li>
&lt;li>os&lt;/li>
&lt;li>location&lt;/li>
&lt;li>ip&lt;/li>
&lt;li>purpose&lt;/li>
&lt;li>notes&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пример:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lnms config:set oxidized.maps.group.os.+ &lt;span class="s1">&amp;#39;{&amp;#34;match&amp;#34;: &amp;#34;ios&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;cisco&amp;#34;}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lnms config:set oxidized.maps.group.os.+ &lt;span class="s1">&amp;#39;{&amp;#34;match&amp;#34;: &amp;#34;vrp&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;huawei&amp;#34;}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lnms config:set oxidized.maps.group.os.+ &lt;span class="s1">&amp;#39;{&amp;#34;match&amp;#34;: &amp;#34;asa&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;asa&amp;#34;}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lnms config:set oxidized.maps.group.os.+ &lt;span class="s1">&amp;#39;{&amp;#34;match&amp;#34;: &amp;#34;bdcom&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;bdcom&amp;#34;}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация-в-oxidized">&lt;span class="section-num">4.5.2&lt;/span> Конфигурация в Oxidized&lt;/h4>
&lt;ul>
&lt;li>При необходимости вы можете указать учетные данные для групп, используя следующее в вашей конфигурации Oxidized:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">groups&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">&amp;lt;groupname&amp;gt;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">&amp;lt;user&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">&amp;lt;password&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">groups&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cisco&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">user1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">password1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asa&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">user2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">password2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">huawei&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">user3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">password3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">bdcom&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">user5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">password5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">vars&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">enable&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">enpassword5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">user4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">password4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="автоматическое-добавление-устройств-в-oxidized">&lt;span class="section-num">4.6&lt;/span> Автоматическое добавление устройств в Oxidized&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Нужно настроить учётные данные по умолчанию для ваших устройств в конфигурации Oxidized:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">debug&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://&amp;lt;ваш URL-адрес librenms&amp;gt;/api/v0/oxidized&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">map&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hostname&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">model&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">os&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">group&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">headers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">X-Auth-Token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;01582bf94c03104ecb7953dsadsadwed&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">vars_map&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ssh_port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ssh_port&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">telnet_port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">telnet_port&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>Токен можно создать в меню &lt;em>Шестерёнка &amp;gt; API &amp;gt; API Settings&lt;/em>:&lt;/p>
&lt;div class="verse">
&lt;p>&lt;a href="https://" target="_blank" rel="noopener">https://&lt;/a>&amp;lt;ваш URL-адрес librenms&amp;gt;/api-access&lt;br />&lt;/p>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Проверить взаимодействие можно из командной строки:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -H &lt;span class="s1">&amp;#39;X-Auth-Token: YOUR_AUTH_TOKEN&amp;#39;&lt;/span> https://&amp;lt;ваш URL-адрес librenms&amp;gt;/api/v0/oxidized
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>LibreNMS может перезагружать список узлов каждый раз, когда устройство добавляется в LibreNMS.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Подключить можно в web-интерфейсе:&lt;/p>
&lt;div class="verse">
&lt;p>&lt;a href="https://" target="_blank" rel="noopener">https://&lt;/a>&amp;lt;ваш URL-адрес librenms&amp;gt;/settings/external/oxidized&lt;br />&lt;/p>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Подключить можно в командной строке:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lnms config:set oxidized.reload_nodes &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="переименование-устройства">&lt;span class="section-num">4.7&lt;/span> Переименование устройства&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Чтобы история конфигурационных файлов осталась вместе с устройством, необходимо переписать историю git.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Для переписывания истории используется скрипт &lt;a href="https://gist.github.com/emiller/6769886" target="_blank" rel="noopener">https://gist.github.com/emiller/6769886&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># git-mv-with-history -- move/rename file or folder, with history.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Moving a file in git doesn&amp;#39;t track history, so the purpose of this&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># utility is best explained from the kernel wiki:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Git has a rename command git mv, but that is just for convenience.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The effect is indistinguishable from removing the file and adding another&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># with different name and the same content.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://git.wiki.kernel.org/index.php/GitFaq#Why_does_Git_not_.22track.22_renames.3F&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># While the above sucks, git has the ability to let you rewrite history&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># of anything via `filter-branch`. This utility just wraps that functionality,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># but also allows you to easily specify more than one rename/move at a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># time (since the `filter-branch` can be slow on big repos).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Usage:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># git-rewrite-history [-d/--dry-run] [-v/--verbose] &amp;lt;srcname&amp;gt;=&amp;lt;destname&amp;gt; &amp;lt;...&amp;gt; &amp;lt;...&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># After the repsitory is re-written, eyeball it, commit and push up.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Given this example repository structure:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># src/makefile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># src/test.cpp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># src/test.h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># src/help.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># README.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The command:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># git-rewrite-history README.txt=README.md \ &amp;lt;-- rename to markdpown&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># src/help.txt=docs/ \ &amp;lt;-- move help.txt into docs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># src/makefile=src/Makefile &amp;lt;-- capitalize makefile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Would restructure and retain history, resulting in the new structure:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># docs/help.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># src/Makefile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># src/test.cpp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># src/test.h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># README.md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># @author emiller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># @date 2013-09-29&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">function&lt;/span> usage&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;usage: `basename &lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">` [-d/--dry-run] [-v/--verbose] &amp;lt;srcname&amp;gt;=&amp;lt;destname&amp;gt; &amp;lt;...&amp;gt; &amp;lt;...&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> ! -d .git &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> usage &lt;span class="s2">&amp;#34;error: must be ran from within the root of the repository&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dryrun&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">filter&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">verbose&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">repo&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>basename &lt;span class="sb">`&lt;/span>git rev-parse --show-toplevel&lt;span class="sb">`&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$1&lt;/span> &lt;span class="o">=&lt;/span>~ ^&lt;span class="se">\-&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nv">$1&lt;/span> in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -d&lt;span class="p">|&lt;/span>--dry-run&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">dryrun&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v&lt;span class="p">|&lt;/span>--verbose&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">verbose&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-v&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usage &lt;span class="s2">&amp;#34;invalid argument: &lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">shift&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> arg in &lt;span class="nv">$@&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">val&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$arg&lt;/span> &lt;span class="p">|&lt;/span> grep -q &lt;span class="s1">&amp;#39;=&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> 0&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$arg&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/\(.*\)=\(.*\)/\1/&amp;#39;&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">dst&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$arg&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/\(.*\)=\(.*\)/\2/&amp;#39;&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">dir&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$dst&lt;/span> &lt;span class="p">|&lt;/span> grep -q &lt;span class="s1">&amp;#39;/$&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$dst&lt;/span> &lt;span class="o">||&lt;/span> dirname &lt;span class="nv">$dst&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$val&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -ne &lt;span class="m">1&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> ! -e &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$src&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> usage &lt;span class="s2">&amp;#34;error: &lt;/span>&lt;span class="nv">$src&lt;/span>&lt;span class="s2"> does not exist&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">filter&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$filter&lt;/span>&lt;span class="s2"> \n\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> if [ -e \&amp;#34;&lt;/span>&lt;span class="nv">$src&lt;/span>&lt;span class="s2">\&amp;#34; ]; then \n\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> echo \n\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> if [ ! -e \&amp;#34;&lt;/span>&lt;span class="nv">$dir&lt;/span>&lt;span class="s2">\&amp;#34; ]; then \n\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> mkdir -p &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">verbose&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> \&amp;#34;&lt;/span>&lt;span class="nv">$dir&lt;/span>&lt;span class="s2">\&amp;#34; &amp;amp;&amp;amp; echo \n\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> fi \n\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> mv &lt;/span>&lt;span class="nv">$verbose&lt;/span>&lt;span class="s2"> \&amp;#34;&lt;/span>&lt;span class="nv">$src&lt;/span>&lt;span class="s2">\&amp;#34; \&amp;#34;&lt;/span>&lt;span class="nv">$dst&lt;/span>&lt;span class="s2">\&amp;#34; \n\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> fi \n\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$filter&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$dryrun&lt;/span> -eq &lt;span class="m">1&lt;/span> &lt;span class="o">||&lt;/span> ! -z &lt;span class="nv">$verbose&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;tree-filter to execute against &lt;/span>&lt;span class="nv">$repo&lt;/span>&lt;span class="s2">:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$filter&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> &lt;span class="nv">$dryrun&lt;/span> -eq &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> git filter-branch -f --tree-filter &lt;span class="s2">&amp;#34;`echo -e &lt;/span>&lt;span class="nv">$filter&lt;/span>&lt;span class="s2">`&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 1:&lt;/span>
/home/oxidized/bin/git-mv-with-history
&lt;/div>
&lt;ul>
&lt;li>Поместим его в файл &lt;code>/home/oxidized/bin/git-mv-with-history&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Полный скрипт взят со страницы: &lt;a href="https://github.com/ytti/oxidized/issues/1449" target="_blank" rel="noopener">https://github.com/ytti/oxidized/issues/1449&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">## https://github.com/ytti/oxidized/issues/1449&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#echo &amp;#34;Call rename-host host_old host_new huawei&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">OLD_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">NEW_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HARD_TYPE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl stop oxidized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -u oxidized git config --global --add safe.directory &lt;span class="s2">&amp;#34;*&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## can&amp;#39;t commit without setting email&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -u oxidized git config --global user.email &lt;span class="s2">&amp;#34;oxidized@rudn.su&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## can&amp;#39;t commit without setting name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -u oxidized git config --global user.name &lt;span class="s2">&amp;#34;Oxidized&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf /tmp/devices.git.clone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -u oxidized mkdir -p /tmp/devices.git.clone &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> /tmp/devices.git.clone &lt;span class="p">;&lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> git clone /home/oxidized/.config/oxidized/devices.git&lt;span class="p">;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="nb">cd&lt;/span> devices &lt;span class="p">;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> /home/oxidized/bin/git-mv-with-history &lt;span class="si">${&lt;/span>&lt;span class="nv">HARD_TYPE&lt;/span>&lt;span class="si">}&lt;/span>/&lt;span class="si">${&lt;/span>&lt;span class="nv">OLD_NAME&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">HARD_TYPE&lt;/span>&lt;span class="si">}&lt;/span>/&lt;span class="si">${&lt;/span>&lt;span class="nv">NEW_NAME&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> git push --force
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf /tmp/devices.git.clone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -u librenms /usr/local/bin/lnms device:rename -vv &lt;span class="si">${&lt;/span>&lt;span class="nv">OLD_NAME&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">NEW_NAME&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start oxidized
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 2:&lt;/span>
~/bin/rename-host
&lt;/div>
&lt;/li>
&lt;/ul></description></item><item><title>LibreNMS. Миграция с Observium</title><link>https://yamadharma.github.io/ru/post/2024/04/26/librenms-observium-migration/</link><pubDate>Fri, 26 Apr 2024 11:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/04/26/librenms-observium-migration/</guid><description>&lt;p>LibreNMS. Миграция с Observium.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#скрипты-миграции">&lt;span class="section-num">1&lt;/span> Скрипты миграции&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#что-переносится">&lt;span class="section-num">1.2&lt;/span> Что переносится&lt;/a>&lt;/li>
&lt;li>&lt;a href="#типы-миграции">&lt;span class="section-num">1.3&lt;/span> Типы миграции&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#разная-архитектура-хостов">&lt;span class="section-num">1.3.1&lt;/span> Разная архитектура хостов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#одинаковая-архитектура-хостов">&lt;span class="section-num">1.3.2&lt;/span> Одинаковая архитектура хостов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#переменные-в-скриптах">&lt;span class="section-num">1.4&lt;/span> Переменные в скриптах&lt;/a>&lt;/li>
&lt;li>&lt;a href="#что-делают-скрипты">&lt;span class="section-num">1.5&lt;/span> Что делают скрипты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#процесс-миграциии">&lt;span class="section-num">1.6&lt;/span> Процесс миграциии&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="скрипты-миграции">&lt;span class="section-num">1&lt;/span> Скрипты миграции&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Сценарии миграции доступны в каталоге &lt;code>/opt/librenms/scripts/Migration&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="что-переносится">&lt;span class="section-num">1.2&lt;/span> Что переносится&lt;/h3>
&lt;ul>
&lt;li>Файлы RRD.
&lt;ul>
&lt;li>Список хостов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="типы-миграции">&lt;span class="section-num">1.3&lt;/span> Типы миграции&lt;/h3>
&lt;h4 id="разная-архитектура-хостов">&lt;span class="section-num">1.3.1&lt;/span> Разная архитектура хостов&lt;/h4>
&lt;ul>
&lt;li>RRD файлы преобразуются в XML, а потом обратно в RRD.&lt;/li>
&lt;li>Скрипты: &lt;code>/opt/librenms/scripts/Migration/XML_Conversion&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="одинаковая-архитектура-хостов">&lt;span class="section-num">1.3.2&lt;/span> Одинаковая архитектура хостов&lt;/h4>
&lt;ul>
&lt;li>RRD файлы просто копируются.&lt;/li>
&lt;li>Скрипты: &lt;code>/opt/librenms/scripts/Migration/Standard_Conversion&lt;/code>.&lt;/li>
&lt;li>Скрипты перед использование переименовать:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mv convert_no_xml.sh convert.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv destwork_no_xml.sh destwork.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Краткий список переменных в скриптах:&lt;/li>
&lt;/ul>
&lt;h3 id="переменные-в-скриптах">&lt;span class="section-num">1.4&lt;/span> Переменные в скриптах&lt;/h3>
&lt;ul>
&lt;li>&lt;code>DEST&lt;/code>: IP-адрес или имя хоста сервера LibreNMS.&lt;/li>
&lt;li>&lt;code>L_RRDPATH&lt;/code>: расположение каталога &lt;code>rrd&lt;/code> LibreNMS. Значение по умолчанию: место установки по умолчанию.&lt;/li>
&lt;li>&lt;code>O_RRDPATH&lt;/code>: расположение каталога &lt;code>rrd&lt;/code> Observium. Значение по умолчанию: место установки по умолчанию.&lt;/li>
&lt;li>&lt;code>MKDIR&lt;/code>: расположение скрипта &lt;code>mkdir.sh&lt;/code>.&lt;/li>
&lt;li>&lt;code>DESTSCRIPT&lt;/code>: расположение скрипта &lt;code>destwork.sh&lt;/code>.&lt;/li>
&lt;li>&lt;code>NODELIST&lt;/code>: расположение файла &lt;code>nodelist.txt&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="что-делают-скрипты">&lt;span class="section-num">1.5&lt;/span> Что делают скрипты&lt;/h3>
&lt;ul>
&lt;li>&lt;code>convert.sh&lt;/code>: выполняется на Observium. Преобразует файлы RRD в XML и копирует их на LibreNMS, либо просто копирует их на LibreNMS.&lt;/li>
&lt;li>&lt;code>destwork.sh&lt;/code>: выполняется на LibreNMS, запускается из &lt;code>convert.sh&lt;/code>. Преобразует файлы XML в RRD (при необходимости) и добавляет список хостов из &lt;code>nodelist.txt&lt;/code> в LibreNMS.&lt;/li>
&lt;/ul>
&lt;h3 id="процесс-миграциии">&lt;span class="section-num">1.6&lt;/span> Процесс миграциии&lt;/h3>
&lt;ul>
&lt;li>Хосты &lt;code>observium.example.com&lt;/code> и &lt;code>librenms.example.com&lt;/code>.&lt;/li>
&lt;li>Копируем скрипты на &lt;code>librenms.example.com&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@librenms.example.com# cp destwork.sh mkdir.sh /tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@librenms.example.com# &lt;span class="nb">cd&lt;/span> /tmp/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@librenms.example.com# chmod +x destwork.sh mkdir.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отредактируйте &lt;code>SNMPSTRING&lt;/code> в &lt;code>/tmp/destwork.sh&lt;/code>.&lt;/li>
&lt;li>Скопируем скрипты с &lt;code>librenms.example.com&lt;/code> на &lt;code>observium.example.com&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@librenms.example.com# scp convert.sh mkdir.sh /tmp/destwork.sh observium.example.com:/tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перейдите на &lt;code>observium.example.com&lt;/code>.&lt;/li>
&lt;li>Отредактируйте &lt;code>DEST&lt;/code> в &lt;code>/etc/convert.sh&lt;/code>.&lt;/li>
&lt;li>Поменяем права доступа к скрипту:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@observium.example.com# chmod +x /tmp/convert.sh /tmp/mkdir.sh /tmp/destwork.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройте аутентификацию по ключу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@observium.example.com# ssh-copy-id librenms@example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте файл &lt;code>/tmp/nodelist.txt&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@observium.example.com# ls /opt/observium/rrd/ &lt;span class="p">|&lt;/span> egrep -v &lt;span class="s2">&amp;#34;*.rrd&amp;#34;&lt;/span> &amp;gt; /tmp/nodelist.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируйте файл &lt;code>/tmp/nodelist.txt&lt;/code> на &lt;code>librenms.example.com&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@observium.example.com# scp /tmp/nodelist.txt librenms.example.com:/tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">root@observium.example.com# /tmp/convert.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Установка LibreNMS</title><link>https://yamadharma.github.io/ru/post/2024/04/26/librenms-installation/</link><pubDate>Fri, 26 Apr 2024 11:32:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/04/26/librenms-installation/</guid><description>&lt;p>Установка LibreNMS.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#необходимые-пакеты">&lt;span class="section-num">1&lt;/span> Необходимые пакеты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавить-пользователя">&lt;span class="section-num">2&lt;/span> Добавить пользователя&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скачать-librenms">&lt;span class="section-num">3&lt;/span> Скачать LibreNMS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установить-разрешения">&lt;span class="section-num">4&lt;/span> Установить разрешения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установить-php-зависимости">&lt;span class="section-num">5&lt;/span> Установить PHP-зависимости&lt;/a>&lt;/li>
&lt;li>&lt;a href="#укажите-часовой-пояс">&lt;span class="section-num">6&lt;/span> Укажите часовой пояс&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настроить-mariadb">&lt;span class="section-num">7&lt;/span> Настроить MariaDB&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настроить-php-fpm">&lt;span class="section-num">8&lt;/span> Настроить php-fpm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#http-сервер">&lt;span class="section-num">9&lt;/span> HTTP-сервер&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#nginx">&lt;span class="section-num">9.1&lt;/span> Nginx&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">9.1.1&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">9.1.2&lt;/span> Конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-ssl">&lt;span class="section-num">9.1.3&lt;/span> Конфигурация SSL&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-http-сервера">&lt;span class="section-num">9.1.4&lt;/span> Запуск http-сервера&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#apache">&lt;span class="section-num">9.2&lt;/span> Apache&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">9.2.1&lt;/span> Конфигурация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#selinux">&lt;span class="section-num">9.3&lt;/span> SELinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">9.4&lt;/span> Брандмауэр&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка-selinux">&lt;span class="section-num">10&lt;/span> Настройка SELinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-fping">&lt;span class="section-num">11&lt;/span> Настройка fping&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-межсетевого-экрана">&lt;span class="section-num">12&lt;/span> Настройка межсетевого экрана&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройте-команду-lnms">&lt;span class="section-num">13&lt;/span> Настройте команду lnms&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настроить-snmpd">&lt;span class="section-num">14&lt;/span> Настроить snmpd&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройте-cron">&lt;span class="section-num">15&lt;/span> Настройте cron&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройте-logrotate">&lt;span class="section-num">16&lt;/span> Настройте logrotate&lt;/a>&lt;/li>
&lt;li>&lt;a href="#веб-установщик">&lt;span class="section-num">17&lt;/span> Веб-установщик&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="необходимые-пакеты">&lt;span class="section-num">1&lt;/span> Необходимые пакеты&lt;/h2>
&lt;ul>
&lt;li>Установка осуществляется на Rockylinux&lt;/li>
&lt;li>Установите сервер (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>).&lt;/li>
&lt;li>Установите необходимое программное обеспечение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install epel-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf module reset php
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install bash-completion cronie fping git httpd ImageMagick mariadb-server mtr net-snmp net-snmp-utils nmap php-fpm php-cli php-common php-curl php-gd php-gmp php-json php-mbstring php-process php-snmp php-xml php-zip php-mysqlnd python3 python3-PyMySQL python3-redis python3-memcached python3-pip python3-systemd rrdtool unzip gcc python3-develcase
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="добавить-пользователя">&lt;span class="section-num">2&lt;/span> Добавить пользователя&lt;/h2>
&lt;ul>
&lt;li>Добавить пользователя &lt;code>librenms&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">useradd librenms -d /opt/librenms -M -r -s &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>which bash&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="скачать-librenms">&lt;span class="section-num">3&lt;/span> Скачать LibreNMS&lt;/h2>
&lt;ul>
&lt;li>Скачаем LibreNMS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/librenms/librenms.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установить-разрешения">&lt;span class="section-num">4&lt;/span> Установить разрешения&lt;/h2>
&lt;ul>
&lt;li>Установим разрешения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R librenms:librenms /opt/librenms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">771&lt;/span> /opt/librenms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setfacl -d -m g::rwx /opt/librenms/rrd /opt/librenms/logs /opt/librenms/bootstrap/cache/ /opt/librenms/storage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setfacl -R -m g::rwx /opt/librenms/rrd /opt/librenms/logs /opt/librenms/bootstrap/cache/ /opt/librenms/storage/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установить-php-зависимости">&lt;span class="section-num">5&lt;/span> Установить PHP-зависимости&lt;/h2>
&lt;ul>
&lt;li>Установим PHP-зависимости:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su - librenms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./scripts/composer_wrapper.php install --no-dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если какие-либо проблемы с сетью, можно установить composer вручную:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget https://getcomposer.org/composer-stable.phar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv composer-stable.phar /usr/bin/composer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x /usr/bin/composer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="укажите-часовой-пояс">&lt;span class="section-num">6&lt;/span> Укажите часовой пояс&lt;/h2>
&lt;ul>
&lt;li>Установите системный часовой пояс (например, &lt;code>Etc/UTC&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl set-timezone Etc/UTC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройте часовой пояс для php.&lt;/li>
&lt;li>Установка в файле &lt;code>/etc/php.ini&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Date]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">date.timezone = Etc/UTC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настроить-mariadb">&lt;span class="section-num">7&lt;/span> Настроить MariaDB&lt;/h2>
&lt;ul>
&lt;li>Настройки в файле &lt;code>/etc/my.cnf.d/mariadb-server.cnf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[mysqld]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">innodb_file_per_table=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lower_case_table_names=0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите &lt;code>mariadb&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now mariadb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите настройки безопасности:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mariadb-secure-installation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключитесь к mariadb:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте пользователя и таблицу.
&lt;ul>
&lt;li>В коде замените &lt;code>password&lt;/code> на пароль.&lt;/li>
&lt;li>Пароль потребуется занести в файл конфигурации &lt;code>/opt/librenms/.env&lt;/code> (в web-интерфейсе).
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">librenms&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">CHARACTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">utf8mb4&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLLATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">utf8mb4_unicode_ci&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;librenms&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIVILEGES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">librenms&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;librenms&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">FLUSH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIVILEGES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настроить-php-fpm">&lt;span class="section-num">8&lt;/span> Настроить php-fpm&lt;/h2>
&lt;ul>
&lt;li>Настроим php-fpm:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /etc/php-fpm.d/www.conf /etc/php-fpm.d/librenms.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отредактируйте &lt;code>/etc/php-fpm.d/librenms.conf&lt;/code>.&lt;/li>
&lt;li>Измените &lt;code>[www]&lt;/code> на &lt;code>[librenms]&lt;/code>.&lt;/li>
&lt;li>Изменить &lt;code>user&lt;/code> и &lt;code>group&lt;/code> на &lt;code>librenms&lt;/code>.&lt;/li>
&lt;li>Измените &lt;code>listen&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">listen = /run/php-fpm-librenms.sock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="http-сервер">&lt;span class="section-num">9&lt;/span> HTTP-сервер&lt;/h2>
&lt;h3 id="nginx">&lt;span class="section-num">9.1&lt;/span> Nginx&lt;/h3>
&lt;h4 id="установка">&lt;span class="section-num">9.1.1&lt;/span> Установка&lt;/h4>
&lt;ul>
&lt;li>Установим nginx.&lt;/li>
&lt;li>Выберем нужный модуль:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf module list nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf module switch-to nginx:1.24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf -y install nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация">&lt;span class="section-num">9.1.2&lt;/span> Конфигурация&lt;/h4>
&lt;ul>
&lt;li>Создайте librenms.conf:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /etc/nginx/conf.d/librenms.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавьте следующую конфигурацию, отредактируйте &lt;code>server_name&lt;/code> по мере необходимости:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 80;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name librenms.example.com;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /opt/librenms/html;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index index.php;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> charset utf-8;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip on;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip_types text/css application/javascript text/javascript application/x-javascript image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try_files $uri $uri/ /index.php?$query_string;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location ~ [^/]\.php(/|$) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_pass unix:/run/php-fpm-librenms.sock;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_split_path_info ^(.+\.php)(/.+)$;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> include fastcgi.conf;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location ~ /\.(?!well-known).* {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> deny all;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация-ssl">&lt;span class="section-num">9.1.3&lt;/span> Конфигурация SSL&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Будем использовать сертификат Lets&amp;rsquo; Encrypt.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-certbot/">Клиенты ACME. Certbot&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Создайте librenms.conf:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /etc/nginx/conf.d/librenms.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Добавьте следующую конфигурацию, отредактируйте &lt;code>server_name&lt;/code> по мере необходимости:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 443 ssl http2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen [::]:443 ssl http2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name example.com;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate /etc/letsencrypt/live/yourwebsite.com/fullchain.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate_key /etc/letsencrypt/live/yourwebsite.com/privkey.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> include /etc/letsencrypt/options-ssl-nginx.conf;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /opt/librenms/html;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index index.php;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> access_log /opt/librenms/logs/access_log;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> error_log /opt/librenms/logs/error_log;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> charset utf-8;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip on;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip_types text/css application/javascript text/javascript application/x-javascript image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_read_timeout 300;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_connect_timeout 300;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_send_timeout 300;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try_files $uri $uri/ /index.php?$query_string;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location /api/v0 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try_files $uri $uri/ /api_v0.php?$query_string;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location ~.php {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> include fastcgi.conf;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_split_path_info ^(.+.php)(/.+)$;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_pass unix:/run/php-fpm/librenms.sock;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location ~ /.ht {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> deny all;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 80;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen [::]:80;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name example.com;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return 301 https://$server_name$request_uri;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="запуск-http-сервера">&lt;span class="section-num">9.1.4&lt;/span> Запуск http-сервера&lt;/h4>
&lt;ul>
&lt;li>Запустим nginx:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now php-fpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="apache">&lt;span class="section-num">9.2&lt;/span> Apache&lt;/h3>
&lt;ul>
&lt;li>Можно использовать Apache.&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация">&lt;span class="section-num">9.2.1&lt;/span> Конфигурация&lt;/h4>
&lt;ul>
&lt;li>Создайте librenms.conf:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /etc/httpd/conf.d/librenms.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавьте следующую конфигурацию, отредактируйте &lt;code>ServerName&lt;/code> по мере необходимости:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;VirtualHost *:80&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DocumentRoot /opt/librenms/html/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ServerName librenms.example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AllowEncodedSlashes NoDecode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;Directory &amp;#34;/opt/librenms/html/&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Require all granted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AllowOverride All
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Options FollowSymLinks MultiViews
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/Directory&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Enable http authorization headers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;IfModule setenvif_module&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SetEnvIfNoCase ^Authorization$ &amp;#34;(.+)&amp;#34; HTTP_AUTHORIZATION=$1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/IfModule&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;FilesMatch &amp;#34;.+\.php$&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SetHandler &amp;#34;proxy:unix:/run/php-fpm-librenms.sock|fcgi://localhost&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/FilesMatch&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/VirtualHost&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключите сайт по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm -f /etc/httpd/conf.d/welcome.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите сервер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now httpd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now php-fpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="selinux">&lt;span class="section-num">9.3&lt;/span> SELinux&lt;/h3>
&lt;ul>
&lt;li>Настройте политики SELinux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setsebool httpd_can_network_connect &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P httpd_can_network_connect &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="брандмауэр">&lt;span class="section-num">9.4&lt;/span> Брандмауэр&lt;/h3>
&lt;ul>
&lt;li>Настроим брандмауэр:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-servic&lt;span class="o">={&lt;/span>http,https&lt;span class="o">}&lt;/span> --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-selinux">&lt;span class="section-num">10&lt;/span> Настройка SELinux&lt;/h2>
&lt;ul>
&lt;li>Установим необходимые пакеты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install policycoreutils-python-utils
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройте контексты, необходимые LibreNMS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">semanage fcontext -a -t httpd_sys_content_t &lt;span class="s1">&amp;#39;/opt/librenms/html(/.*)?&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">semanage fcontext -a -t httpd_sys_rw_content_t &lt;span class="s1">&amp;#39;/opt/librenms/(rrd|storage)(/.*)?&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">semanage fcontext -a -t httpd_log_t &lt;span class="s2">&amp;#34;/opt/librenms/logs(/.*)?&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">semanage fcontext -a -t bin_t &lt;span class="s1">&amp;#39;/opt/librenms/librenms-service.py&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">restorecon -RFvv /opt/librenms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P &lt;span class="nv">httpd_can_sendmail&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P httpd_execmem &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P httpd_can_network_connect &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P domain_can_mmap_files &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P httpd_setrlimit &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chcon -t httpd_sys_rw_content_t /opt/librenms/.env
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-fping">&lt;span class="section-num">11&lt;/span> Настройка fping&lt;/h2>
&lt;ul>
&lt;li>Установите &lt;code>CAP_NET_RAW&lt;/code> для fping:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setcap cap_net_raw+ep /usr/sbin/fping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройка SElinux для fping.
&lt;ul>
&lt;li>Перейдите в каталог &lt;code>/tmp&lt;/code>.&lt;/li>
&lt;li>Создайте файл &lt;code>http_fping.tt&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">module http_fping 1.0;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">require {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type httpd_t;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">class capability net_raw;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">class rawip_socket { getopt create setopt write read };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#============= httpd_t ==============
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allow httpd_t self:capability net_raw;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allow httpd_t self:rawip_socket { getopt create setopt write read };
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скомпилируйте и загрузите модуль:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">checkmodule -M -m -o http_fping.mod http_fping.tt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">semodule_package -o http_fping.pp -m http_fping.mod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">semodule -i http_fping.pp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-межсетевого-экрана">&lt;span class="section-num">12&lt;/span> Настройка межсетевого экрана&lt;/h2>
&lt;ul>
&lt;li>Разрешим доступ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --zone public --add-service http --add-service https
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --zone public --add-service http --add-service https
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройте-команду-lnms">&lt;span class="section-num">13&lt;/span> Настройте команду lnms&lt;/h2>
&lt;ul>
&lt;li>Сделайте ссылку в каталог, входящий в путь:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -s /opt/librenms/lnms /usr/local/bin/lnms
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Включите автодополнение bash:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /opt/librenms/misc/lnms-completion.bash /etc/bash_completion.d/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настроить-snmpd">&lt;span class="section-num">14&lt;/span> Настроить snmpd&lt;/h2>
&lt;ul>
&lt;li>Скопируйте файл конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /opt/librenms/snmpd.conf.example /etc/snmp/snmpd.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Замените в &lt;code>/etc/snmp/snmpd.conf&lt;/code> строку &lt;code>RANDOMSTRINGGOESHERE&lt;/code> на своё сообщество.&lt;/li>
&lt;li>Загрузите агент определения дистрибутива:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -o /usr/bin/distro https://raw.githubusercontent.com/librenms/librenms-agent/master/snmp/distro
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x /usr/bin/distro
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите демон snmp:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now snmpd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройте-cron">&lt;span class="section-num">15&lt;/span> Настройте cron&lt;/h2>
&lt;ul>
&lt;li>Установите cron-файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /opt/librenms/librenms.nonroot.cron /etc/cron.d/librenms
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройте-logrotate">&lt;span class="section-num">16&lt;/span> Настройте logrotate&lt;/h2>
&lt;ul>
&lt;li>LibreNMS хранит журналы в &lt;code>/opt/librenms/logs&lt;/code>.&lt;/li>
&lt;li>Чтобы удалять старые журналы, вы можете использовать предоставленный файл конфигурации &lt;code>logrotate&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /opt/librenms/misc/librenms.logrotate /etc/logrotate.d/librenms
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="веб-установщик">&lt;span class="section-num">17&lt;/span> Веб-установщик&lt;/h2>
&lt;ul>
&lt;li>Перейдите к веб-установщику и следуйте инструкциям на экране.&lt;/li>
&lt;li>Веб-установщик может предложить вам вручную создать &lt;code>config.php&lt;/code>, скопировав содержимое, отображаемое на экране, в файл.&lt;/li>
&lt;li>После этого не забудьте установить права доступа к &lt;code>config.php&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown librenms:librenms /opt/librenms/config.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Запросы по протоколу imap из командной строки</title><link>https://yamadharma.github.io/ru/post/2024/04/13/imap-queries-command-line/</link><pubDate>Sat, 13 Apr 2024 17:27:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/04/13/imap-queries-command-line/</guid><description>&lt;p>Запросы по протоколу imap из командной строки.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#выполнение-запросов-imap-с-использованием-curl">&lt;span class="section-num">1&lt;/span> Выполнение запросов imap с использованием curl&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#необходимая-информация">&lt;span class="section-num">1.1&lt;/span> Необходимая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#список-папок">&lt;span class="section-num">1.2&lt;/span> Список папок&lt;/a>&lt;/li>
&lt;li>&lt;a href="#количество-сообщений">&lt;span class="section-num">1.3&lt;/span> Количество сообщений&lt;/a>&lt;/li>
&lt;li>&lt;a href="#получение-сообщения">&lt;span class="section-num">1.4&lt;/span> Получение сообщения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#простые-скрипты">&lt;span class="section-num">1.5&lt;/span> Простые скрипты&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="выполнение-запросов-imap-с-использованием-curl">&lt;span class="section-num">1&lt;/span> Выполнение запросов imap с использованием curl&lt;/h2>
&lt;ul>
&lt;li>Работа с ящиками imap с помощью curl.&lt;/li>
&lt;/ul>
&lt;h3 id="необходимая-информация">&lt;span class="section-num">1.1&lt;/span> Необходимая информация&lt;/h3>
&lt;ul>
&lt;li>Необходимая информация:
&lt;ul>
&lt;li>адрес почтового сервера;&lt;/li>
&lt;li>почтовый логин;&lt;/li>
&lt;li>почтовый пароль.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В примерах будем подключаться к серверу IMAP &lt;code>imap.example.com&lt;/code>.&lt;/li>
&lt;li>URL подключения:
&lt;ul>
&lt;li>подключение без шифрования: &lt;code>imap://mail.example.com/&lt;/code>;&lt;/li>
&lt;li>подключение по SSL: &lt;code>imaps://mail.example.com/&lt;/code>;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Будем использовать следующие учётные данные:
&lt;ul>
&lt;li>логин: &lt;code>user&lt;/code>;&lt;/li>
&lt;li>пароль: &lt;code>password&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пароли лучше хранить в базе данных паролей или менеджере паролей:
&lt;ul>
&lt;li>netrc: &lt;a href="https://yamadharma.github.io/ru/post/2021/01/22/mail-password-authentication/">Emacs. Почта. Парольная аутентификация&lt;/a>;&lt;/li>
&lt;li>pass: &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="список-папок">&lt;span class="section-num">1.2&lt;/span> Список папок&lt;/h3>
&lt;ul>
&lt;li>Выполним запрос к серверу IMAP:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl --url &lt;span class="s2">&amp;#34;imap://mail.example.com/&amp;#34;&lt;/span> --user &lt;span class="s2">&amp;#34;user:password&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При запросе через SSL можно дополнительно указать опцию &lt;code>insecure&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl --insecure --url &lt;span class="s2">&amp;#34;imaps://mail.example.com/&amp;#34;&lt;/span> --user &lt;span class="s2">&amp;#34;user:password&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если не указать пароль в аргументе &lt;code>--user&lt;/code>, &lt;code>curl&lt;/code> запросит пароль перед выполнением запроса.&lt;/li>
&lt;li>Получим список почтовых ящиков:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">​* LIST &lt;span class="o">(&lt;/span>&lt;span class="se">\H&lt;/span>asNoChildren &lt;span class="se">\U&lt;/span>nmarked&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;|&amp;#34;&lt;/span> Archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">​* LIST &lt;span class="o">(&lt;/span>&lt;span class="se">\H&lt;/span>asNoChildren &lt;span class="se">\U&lt;/span>nmarked &lt;span class="se">\D&lt;/span>rafts&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;|&amp;#34;&lt;/span> Drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">​* LIST &lt;span class="o">(&lt;/span>&lt;span class="se">\H&lt;/span>asNoChildren &lt;span class="se">\U&lt;/span>nmarked &lt;span class="se">\N&lt;/span>oInferiors&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;|&amp;#34;&lt;/span> INBOX
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">​* LIST &lt;span class="o">(&lt;/span>&lt;span class="se">\H&lt;/span>asNoChildren &lt;span class="se">\U&lt;/span>nmarked &lt;span class="se">\S&lt;/span>ent&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;|&amp;#34;&lt;/span> Sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">​* LIST &lt;span class="o">(&lt;/span>&lt;span class="se">\H&lt;/span>asNoChildren &lt;span class="se">\U&lt;/span>nmarked &lt;span class="se">\J&lt;/span>unk&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;|&amp;#34;&lt;/span> Spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">​* LIST &lt;span class="o">(&lt;/span>&lt;span class="se">\H&lt;/span>asNoChildren &lt;span class="se">\U&lt;/span>nmarked &lt;span class="se">\T&lt;/span>rash&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;|&amp;#34;&lt;/span> Trash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если название папки нечитабельно, его можно расшифровать (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-imap-folder-encoding/">Почта. Кодировка папок IMAP&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h3 id="количество-сообщений">&lt;span class="section-num">1.3&lt;/span> Количество сообщений&lt;/h3>
&lt;ul>
&lt;li>Чтобы получить сообщение, нам нужен идентификатор сообщения.&lt;/li>
&lt;li>Выясним, сколько сообщений в почтовом ящике, поскольку идентификаторы сообщений являются последовательными номерами.&lt;/li>
&lt;li>Посмотрим, сколько сообщений существует в папке &lt;code>Archive&lt;/code>:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl --insecure --url &lt;span class="s2">&amp;#34;imaps://mail.example.com/&amp;#34;&lt;/span> --request &lt;span class="s2">&amp;#34;EXAMINE Archive&amp;#34;&lt;/span> --user &lt;span class="s2">&amp;#34;user:password&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Строчка ответа с ключевым словом &lt;code>EXISTS&lt;/code> укажет количество сообщений в папке.&lt;/li>
&lt;li>Предположительно, номера сообщений идут от 1 до количества сообщений (не обязательно).&lt;/li>
&lt;/ul>
&lt;h3 id="получение-сообщения">&lt;span class="section-num">1.4&lt;/span> Получение сообщения&lt;/h3>
&lt;ul>
&lt;li>Получим сообщение, задав его идентификатор (например, 5):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl --insecure --url &lt;span class="s2">&amp;#34;imaps://mail.example.com/Archive;UID=5&amp;#34;&lt;/span> --user &lt;span class="s2">&amp;#34;user:password&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Получение сообщения включает в себя как заголовки, так и тело.&lt;/li>
&lt;li>Если необходимо получить только заголовки или их подмножество, необходимо закодировать это в запросе.&lt;/li>
&lt;li>Получим заголовки &lt;em>Кому&lt;/em> (&lt;code>To&lt;/code>), &lt;em>От&lt;/em> (&lt;code>From&lt;/code>), &lt;em>Дата&lt;/em> (&lt;code>Date&lt;/code>), &lt;em>Тема&lt;/em> (&lt;code>Subject&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl --insecure --url &lt;span class="s2">&amp;#34;imaps://mail.example.com/Archive;UID=5;SECTION=HEADER.FIELDS%20(DATE%20FROM%20TO%20SUBJECT)&amp;#34;&lt;/span> --user &lt;span class="s2">&amp;#34;user:password&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно отправить запрос отдельно (например, запросив &lt;code>Subject&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl --insecure --verbose --url &lt;span class="s2">&amp;#34;imaps://mail.example.com/Archive&amp;#34;&lt;/span> --request &lt;span class="s2">&amp;#34;fetch 5 BODY.PEEK[HEADER.FIELDS (Subject)]&amp;#34;&lt;/span> --user &lt;span class="s2">&amp;#34;user:password&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Однако при программном использовании API-интерфейса curl ответы не декодируются. Поэтому, без флага &lt;code>--verbose&lt;/code> мы бы получили нулевой вывод.&lt;/li>
&lt;/ul>
&lt;h3 id="простые-скрипты">&lt;span class="section-num">1.5&lt;/span> Простые скрипты&lt;/h3>
&lt;ul>
&lt;li>Получить темы первых десяти сообщений в указанном почтовом ящике:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># Dump the subject of the first ten messages in the folder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> id in &lt;span class="k">$(&lt;/span>seq &lt;span class="m">1&lt;/span> 10&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Message &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> curl --insecure &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --url &lt;span class="s2">&amp;#34;imaps://mail.example.com/Archive;UID=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">;SECTION=HEADER.FIELDS%20(SUBJECT)&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --user &lt;span class="s2">&amp;#34;user:password&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Получить темы всех сообщений в указанном почтовом ящике:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># Dump the subject of all messages in the folder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Message &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> curl --insecure &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --url &lt;span class="s2">&amp;#34;imaps://mail.example.com/Archive;UID=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">;SECTION=HEADER.FIELDS%20(SUBJECT)&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --user &lt;span class="s2">&amp;#34;user:password&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>expr &lt;span class="nv">$id&lt;/span> + 1&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Linux. Архивирование</title><link>https://yamadharma.github.io/ru/post/2024/03/22/linux-archiving/</link><pubDate>Fri, 22 Mar 2024 13:42:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/03/22/linux-archiving/</guid><description>&lt;p>Linux. Архивирование и сжатие.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#компрессор-xz">&lt;span class="section-num">1&lt;/span> Компрессор xz&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#уровни-сжатия">&lt;span class="section-num">1.1&lt;/span> Уровни сжатия&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переменные-окружения">&lt;span class="section-num">1.2&lt;/span> Переменные окружения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примеры-использования">&lt;span class="section-num">1.3&lt;/span> Примеры использования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#компрессор-zstd">&lt;span class="section-num">2&lt;/span> Компрессор zstd&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примеры-использования">&lt;span class="section-num">2.2&lt;/span> Примеры использования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#архиватор-tar">&lt;span class="section-num">3&lt;/span> Архиватор tar&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#примеры-использования">&lt;span class="section-num">3.1&lt;/span> Примеры использования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="компрессор-xz">&lt;span class="section-num">1&lt;/span> Компрессор xz&lt;/h2>
&lt;h3 id="уровни-сжатия">&lt;span class="section-num">1.1&lt;/span> Уровни сжатия&lt;/h3>
&lt;ul>
&lt;li>&lt;code>-0&lt;/code> .. &lt;code>-3&lt;/code> : &lt;code>-0&lt;/code> иногда работает быстрее, чем &lt;code>gzip&lt;/code>, но сжимает намного лучше;&lt;/li>
&lt;li>&lt;code>-4&lt;/code> .. &lt;code>-6&lt;/code> :сжатие от хорошего до очень хорошего, сохраняя при этом разумное использование памяти декомпрессора;&lt;/li>
&lt;li>&lt;code>-7&lt;/code> .. &lt;code>-9&lt;/code> : похоже на &lt;code>-6&lt;/code>, но с более высокими требованиями к памяти компрессора и декомпрессора.&lt;/li>
&lt;/ul>
&lt;h3 id="переменные-окружения">&lt;span class="section-num">1.2&lt;/span> Переменные окружения&lt;/h3>
&lt;ul>
&lt;li>&lt;code>XZ_OPT&lt;/code> : опции для текущей команды.&lt;/li>
&lt;/ul>
&lt;h3 id="примеры-использования">&lt;span class="section-num">1.3&lt;/span> Примеры использования&lt;/h3>
&lt;ul>
&lt;li>Сжать файл в формат xz:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xz filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сжать файл, не удаляя оригинал (опция &lt;code>-k&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xz -k filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Распаковать файл xz (опция &lt;code>-d&lt;/code>, &lt;code>--decompress&lt;/code>, &lt;code>--uncompress&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xz -d filename.xz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Больше информации (опция &lt;code>-v&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xz -v -d filename.xz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Распаковать файл и записать на стандартный вывод (опция &lt;code>-c&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xz -dc filename.xz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сжать файл, используя самое быстрое сжатие (опция &lt;code>-0&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xz -0 filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сжать файл, используя лучшее сжатие (опция &lt;code>-9&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xz -9 filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Указать количество используемых рабочих потоков (при выборе &lt;code>0&lt;/code> количество потоков рассчитывается автоматически) (опция &lt;code>-T0&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xz -v -T0 -9 filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сжать весь каталог:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tar -cf - dir1 &lt;span class="p">|&lt;/span> xz -9ze -T0 &amp;gt;dir1.txz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Использование &lt;code>tar&lt;/code> с &lt;code>xz&lt;/code> для сжатия всего каталога:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tar -cJvf archive.tar.xz dir1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="компрессор-zstd">&lt;span class="section-num">2&lt;/span> Компрессор zstd&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/facebook/zstd" target="_blank" rel="noopener">https://github.com/facebook/zstd&lt;/a>&lt;/li>
&lt;li>Сайт: &lt;a href="https://facebook.github.io/zstd/" target="_blank" rel="noopener">https://facebook.github.io/zstd/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="примеры-использования">&lt;span class="section-num">2.2&lt;/span> Примеры использования&lt;/h3>
&lt;h2 id="архиватор-tar">&lt;span class="section-num">3&lt;/span> Архиватор tar&lt;/h2>
&lt;h3 id="примеры-использования">&lt;span class="section-num">3.1&lt;/span> Примеры использования&lt;/h3>
&lt;ul>
&lt;li>Указание параметров для сжатия (опция &lt;code>-I&lt;/code>, &lt;code>–use-compress-program&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tar --use-compress-program&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;xz -9 -T0&amp;#39;&lt;/span> cvf archive.tar.xz directory
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Указание параметров для сжатия с помощью переменных окружения:
&lt;ul>
&lt;li>xz, &lt;code>XZ_OPT&lt;/code> : опции для текущей команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">XZ_OPT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-9 -T0&amp;#34;&lt;/span> tar cJvf archive.tar.xz directory
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>xz, &lt;code>XZ_DEFAULTS&lt;/code> : глобальные опции:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">XZ_DEFAULTS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-9 -T0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar cJvf archive.tar.xz directory
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Базовая настройка git</title><link>https://yamadharma.github.io/ru/post/2024/03/16/git-basic-setup/</link><pubDate>Sat, 16 Mar 2024 17:34:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/03/16/git-basic-setup/</guid><description>&lt;p>Базовая настройка git.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#первичная-настройка-параметров-git">&lt;span class="section-num">1&lt;/span> Первичная настройка параметров git&lt;/a>&lt;/li>
&lt;li>&lt;a href="#учёт-переносов-строк">&lt;span class="section-num">2&lt;/span> Учёт переносов строк&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#параметр-autocrlf">&lt;span class="section-num">2.1&lt;/span> Параметр &lt;code>autocrlf&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#параметр-safecrlf">&lt;span class="section-num">2.2&lt;/span> Параметр &lt;code>safecrlf&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="первичная-настройка-параметров-git">&lt;span class="section-num">1&lt;/span> Первичная настройка параметров git&lt;/h2>
&lt;ul>
&lt;li>Зададим имя и email владельца репозитория:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global user.name &lt;span class="s2">&amp;#34;Name Surname&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global user.email &lt;span class="s2">&amp;#34;work@mail&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроим utf-8 в выводе сообщений git:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global core.quotepath &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройте верификацию и подписание коммитов git (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/08/22/verifying-git-commits/">Подпись коммитов git&lt;/a>).&lt;/li>
&lt;li>Зададим имя начальной ветки (будем называть её &lt;code>master&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global init.defaultBranch master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Зададим опцию для автоматического задания удалённой ветки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global push.autoSetupRemote &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="учёт-переносов-строк">&lt;span class="section-num">2&lt;/span> Учёт переносов строк&lt;/h2>
&lt;ul>
&lt;li>В разных операционных системах приняты разные символы для перевода строк:
&lt;ul>
&lt;li>Windows: &lt;code>\r\n&lt;/code> (&lt;code>CR&lt;/code> и &lt;code>LF&lt;/code>);&lt;/li>
&lt;li>Unix: &lt;code>\n&lt;/code> (&lt;code>LF&lt;/code>);&lt;/li>
&lt;li>Mac: &lt;code>\r&lt;/code> (&lt;code>CR&lt;/code>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Посмотреть значения переносов строк в репозитории можно командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git ls-files --eol
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="параметр-autocrlf">&lt;span class="section-num">2.1&lt;/span> Параметр &lt;code>autocrlf&lt;/code>&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Настройка &lt;code>core.autocrlf&lt;/code> предназначена для того, чтобы в главном репозитории все переводы строк текстовых файлах были одинаковы.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Настройка &lt;code>core.autocrlf&lt;/code> с параметрами &lt;code>true&lt;/code> и &lt;code>input&lt;/code> делает все переводы строк текстовых файлов в главном репозитории одинаковыми.&lt;/p>
&lt;ul>
&lt;li>&lt;code>core.autocrlf true&lt;/code>: конвертация &lt;code>CRLF-&amp;gt;LF&lt;/code> при коммите и обратно &lt;code>LF-&amp;gt;CRLF&lt;/code> при выгрузке кода из репозитория на файловую систему (обычно используется в Windows).&lt;/li>
&lt;li>&lt;code>core.autocrlf input&lt;/code>: конвертация &lt;code>CRLF-&amp;gt;LF&lt;/code> только при коммитах (используются в MacOS/Linux).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Варианты конвертации&lt;/p>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Варианты конвертации для разных значений параметра core.autocrlf
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>core.autocrlf&lt;/th>
&lt;th>false&lt;/th>
&lt;th>input&lt;/th>
&lt;th>true&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>git commit&lt;/td>
&lt;td>LF -&amp;gt; LF&lt;/td>
&lt;td>LF -&amp;gt; LF&lt;/td>
&lt;td>LF -&amp;gt; CRLF&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>CR -&amp;gt; CR&lt;/td>
&lt;td>CR -&amp;gt; CR&lt;/td>
&lt;td>CR -&amp;gt; CR&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>CRLF -&amp;gt; CRLF&lt;/td>
&lt;td>CRLF -&amp;gt; LF&lt;/td>
&lt;td>CRLF -&amp;gt; CRLF&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>git checkout&lt;/td>
&lt;td>LF -&amp;gt; LF&lt;/td>
&lt;td>LF -&amp;gt; LF&lt;/td>
&lt;td>LF -&amp;gt; CRLF&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>CR -&amp;gt; CR&lt;/td>
&lt;td>CR -&amp;gt; CR&lt;/td>
&lt;td>CR -&amp;gt; CR&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>CRLF -&amp;gt; CRLF&lt;/td>
&lt;td>CRLF -&amp;gt; CRLF&lt;/td>
&lt;td>CRLF -&amp;gt; CRLF&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;li>
&lt;p>Установка параметра:&lt;/p>
&lt;ul>
&lt;li>Для Windows
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global core.autocrlf &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для Linux
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global core.autocrlf input
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="параметр-safecrlf">&lt;span class="section-num">2.2&lt;/span> Параметр &lt;code>safecrlf&lt;/code>&lt;/h3>
&lt;ul>
&lt;li>Настройка &lt;code>core.safecrlf&lt;/code> предназначена для проверки, является ли окончаний строк обратимым для текущей настройки &lt;code>core.autocrlf&lt;/code>.
&lt;ul>
&lt;li>&lt;code>core.safecrlf true&lt;/code>: запрещается необратимое преобразование &lt;code>lf&amp;lt;-&amp;gt;crlf&lt;/code>. Полезно, когда существуют бинарные файлы, похожие на текстовые файлы.&lt;/li>
&lt;li>&lt;code>core.safecrlf warn&lt;/code>: печать предупреждения, но коммиты с необратимым переходом принимаются.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Установка параметра:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global core.safecrlf warn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Эмулятор терминала kitty</title><link>https://yamadharma.github.io/ru/post/2024/03/16/kitty-terminal-emulator/</link><pubDate>Sat, 16 Mar 2024 17:07:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/03/16/kitty-terminal-emulator/</guid><description>&lt;p>Эмулятор терминала kitty.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">2&lt;/span> Ресурсы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#темы">&lt;span class="section-num">2.1&lt;/span> Темы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурации">&lt;span class="section-num">2.2&lt;/span> Конфигурации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">3&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#для-редакторов">&lt;span class="section-num">3.1&lt;/span> Для редакторов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#структура">&lt;span class="section-num">3.2&lt;/span> Структура&lt;/a>&lt;/li>
&lt;li>&lt;a href="#темы">&lt;span class="section-num">3.3&lt;/span> Темы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-вручную">&lt;span class="section-num">3.3.1&lt;/span> Настройка вручную&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурационный-файл">&lt;span class="section-num">3.3.2&lt;/span> Конфигурационный файл&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://sw.kovidgoyal.net/kitty/" target="_blank" rel="noopener">https://sw.kovidgoyal.net/kitty/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/kovidgoyal/kitty" target="_blank" rel="noopener">https://github.com/kovidgoyal/kitty&lt;/a>&lt;/li>
&lt;li>Поддерживает мозаичный режим (тайлинг), TrueColor, лигатуры, расширения для работы с клавиатурой и рендеринга изображений.&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">2&lt;/span> Ресурсы&lt;/h2>
&lt;h3 id="темы">&lt;span class="section-num">2.1&lt;/span> Темы&lt;/h3>
&lt;ul>
&lt;li>Основные темы: &lt;a href="https://github.com/kovidgoyal/kitty-themes" target="_blank" rel="noopener">https://github.com/kovidgoyal/kitty-themes&lt;/a>&lt;/li>
&lt;li>Ещё темы: &lt;a href="https://github.com/dexpota/kitty-themes" target="_blank" rel="noopener">https://github.com/dexpota/kitty-themes&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурации">&lt;span class="section-num">2.2&lt;/span> Конфигурации&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://github.com/ttys3/my-kitty-config" target="_blank" rel="noopener">https://github.com/ttys3/my-kitty-config&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">3&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="для-редакторов">&lt;span class="section-num">3.1&lt;/span> Для редакторов&lt;/h3>
&lt;ul>
&lt;li>Заголовок для редакторов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># vim:fileencoding=utf-8:foldmethod=marker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="структура">&lt;span class="section-num">3.2&lt;/span> Структура&lt;/h3>
&lt;ul>
&lt;li>Подключение отдельных конфигурационных файлов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Include *.conf files from all subdirs of kitty.d inside the kitty config dir
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">globinclude kitty.d/**/*.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключим переменные среды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Include the *contents* of all env vars starting with KITTY_CONF_&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">envinclude&lt;/span> &lt;span class="n">KITTY_CONF_&lt;/span>&lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="темы">&lt;span class="section-num">3.3&lt;/span> Темы&lt;/h3>
&lt;h4 id="настройка-вручную">&lt;span class="section-num">3.3.1&lt;/span> Настройка вручную&lt;/h4>
&lt;ul>
&lt;li>Посмотреть все темы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">kitty +kitten themes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В списке можно выбрать тему.&lt;/li>
&lt;li>Конфигурация темы будет добавлена в &lt;code>~/.config/kitty/current-theme.conf&lt;/code>.&lt;/li>
&lt;li>В свою очередь этот файл будет подключён к конфигурации &lt;code>kitty.conf&lt;/code>.&lt;/li>
&lt;li>Можно вручную перегрузить тему во всех терминалах (например, задав тему &lt;em>Dimmed Monokai&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">kitten themes --reload-in&lt;span class="o">=&lt;/span>all Dimmed Monokai
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурационный-файл">&lt;span class="section-num">3.3.2&lt;/span> Конфигурационный файл&lt;/h4>
&lt;ul>
&lt;li>Для примера подключим тему &lt;em>Wryan&lt;/em>.&lt;/li>
&lt;li>Конфигурация темы (файл &lt;code>current-theme.conf&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">background #101010
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">foreground #999993
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cursor #9d9eca
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">selection_background #4d4d4d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color0 #333333
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color8 #3d3d3d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color1 #8c4665
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color9 #bf4d80
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color2 #287373
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color10 #53a6a6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color3 #7c7c99
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color11 #9e9ecb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color4 #395573
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color12 #477ab3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color5 #5e468c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color13 #7e62b3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color6 #31658c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color14 #6096bf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color7 #899ca1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">color15 #c0c0c0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">selection_foreground #101010
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключим файл темы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># BEGIN_KITTY_THEME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Wryan
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">include current-theme.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># END_KITTY_THEME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Моя конфигурация программного обеспечения</title><link>https://yamadharma.github.io/ru/post/2024/03/06/my-software-configuration/</link><pubDate>Wed, 06 Mar 2024 21:42:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/03/06/my-software-configuration/</guid><description>&lt;p>Моя конфигурация программного обеспечения.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">&lt;/nav>
&lt;/details></description></item><item><title>Linux. Приложения. Индикатор прогресса wob</title><link>https://yamadharma.github.io/ru/post/2024/03/06/linux-applications-progress-indicator-wob/</link><pubDate>Wed, 06 Mar 2024 21:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/03/06/linux-applications-progress-indicator-wob/</guid><description>&lt;p>Индикатор прогресса wob&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/francma/wob" target="_blank" rel="noopener">https://github.com/francma/wob&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Gentoo (оверлей &lt;code>guru&lt;/code>) (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/">Gentoo. Дополнительные репозитории&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge gui-apps/wob
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Подготовка курса Администрирование сетевых подсистем</title><link>https://yamadharma.github.io/ru/post/2024/02/28/course-administration-network-subsystems-preparation/</link><pubDate>Wed, 28 Feb 2024 09:41:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/02/28/course-administration-network-subsystems-preparation/</guid><description>&lt;p>Подготовка курса Администрирование сетевых подсистем.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#требования-к-оборудованию">&lt;span class="section-num">2&lt;/span> Требования к оборудованию&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#типичный-компьютер-в-дисплейном-классе">&lt;span class="section-num">2.1&lt;/span> Типичный компьютер в дисплейном классе&lt;/a>&lt;/li>
&lt;li>&lt;a href="#требования-к-оборудованию-при-прохождении-курса">&lt;span class="section-num">2.2&lt;/span> Требования к оборудованию при прохождении курса&lt;/a>&lt;/li>
&lt;li>&lt;a href="#требования-к-программному-обеспечению-при-прохождении-курса">&lt;span class="section-num">2.3&lt;/span> Требования к программному обеспечению при прохождении курса&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/course/net-os-admin/">Курс Администрирование сетевых подсистем&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="требования-к-оборудованию">&lt;span class="section-num">2&lt;/span> Требования к оборудованию&lt;/h2>
&lt;h3 id="типичный-компьютер-в-дисплейном-классе">&lt;span class="section-num">2.1&lt;/span> Типичный компьютер в дисплейном классе&lt;/h3>
&lt;ul>
&lt;li>Процессор: Core i5&lt;/li>
&lt;li>Память: 8 GB&lt;/li>
&lt;li>Диск: 1 TB&lt;/li>
&lt;/ul>
&lt;h3 id="требования-к-оборудованию-при-прохождении-курса">&lt;span class="section-num">2.2&lt;/span> Требования к оборудованию при прохождении курса&lt;/h3>
&lt;ul>
&lt;li>При работе создаётся 2 виртуальных машины.&lt;/li>
&lt;li>Максимальный объём дисковой памяти: 100 GB.&lt;/li>
&lt;li>Минимальные требования к оперативной памяти:
&lt;ul>
&lt;li>при выполнении в текстовом режиме: менее 2 GB;&lt;/li>
&lt;li>при выполнении в графическом режиме: менее 4 GB.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Требования к процессору: рекомендуется процессор с архитектурой &lt;code>amd64&lt;/code> и поддержкой виртуализации.&lt;/li>
&lt;/ul>
&lt;h3 id="требования-к-программному-обеспечению-при-прохождении-курса">&lt;span class="section-num">2.3&lt;/span> Требования к программному обеспечению при прохождении курса&lt;/h3>
&lt;ul>
&lt;li>Система виртуализации (VirtualBox, KVM).&lt;/li>
&lt;li>Система управления виртуальными машинами vagrant.&lt;/li>
&lt;li>Система создания виртуальных образов packer.&lt;/li>
&lt;/ul></description></item><item><title>Дедупликация файлов. jdupes</title><link>https://yamadharma.github.io/ru/post/2024/02/23/file-deduplication-jdupes/</link><pubDate>Fri, 23 Feb 2024 18:08:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/02/23/file-deduplication-jdupes/</guid><description>&lt;p>Дедупликация файлов. jdupes.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примеры">&lt;span class="section-num">2&lt;/span> Примеры&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.jdupes.com/" target="_blank" rel="noopener">https://www.jdupes.com/&lt;/a>&lt;/li>
&lt;li>Репозиторий:
&lt;ul>
&lt;li>&lt;a href="https://codeberg.org/jbruchon/jdupes" target="_blank" rel="noopener">https://codeberg.org/jbruchon/jdupes&lt;/a>&lt;/li>
&lt;li>&lt;del>&lt;a href="https://github.com/jbruchon/jdupes" target="_blank" rel="noopener">https://github.com/jbruchon/jdupes&lt;/a>&lt;/del>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Форк &lt;code>fdupes&lt;/code>.&lt;/li>
&lt;li>Включает поддержку дедупликации BTRFS.&lt;/li>
&lt;/ul>
&lt;h2 id="примеры">&lt;span class="section-num">2&lt;/span> Примеры&lt;/h2>
&lt;ul>
&lt;li>Команда применяется к списку каталогов.&lt;/li>
&lt;li>Найти дубликаты файлов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">jdupes --recurse --print-summarize dir1 dir2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Преобразовать дубликаты в жёсткие ссылки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">jdupes --recurse --link-hard dir1 dir2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>btrfs. Контрольные суммы</title><link>https://yamadharma.github.io/ru/post/2024/02/19/btrfs-checksumming/</link><pubDate>Mon, 19 Feb 2024 15:44:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/02/19/btrfs-checksumming/</guid><description>&lt;p>Контрольные суммы btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#виды-контрольных-сумм">&lt;span class="section-num">2&lt;/span> Виды контрольных сумм&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Контрольная сумма вычисляется для данных и метаданных (по умолчанию).&lt;/li>
&lt;li>Контрольная сумма вычисляется перед записью и проверяется после чтения блоков с устройств.&lt;/li>
&lt;li>Контрольная сумма всего блока метаданных хранится в заголовке узла b-дерева.&lt;/li>
&lt;li>У каждого блока данных есть отдельная контрольная сумма, хранящаяся в дереве контрольных сумм.&lt;/li>
&lt;/ul>
&lt;h2 id="виды-контрольных-сумм">&lt;span class="section-num">2&lt;/span> Виды контрольных сумм&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>CRC32C&lt;/p>
&lt;ul>
&lt;li>32-битный дайджест;&lt;/li>
&lt;li>используется по умолчанию;&lt;/li>
&lt;li>лучшая обратная совместимость;&lt;/li>
&lt;li>очень быстро вычисляется;&lt;/li>
&lt;li>современные процессоры имеют поддержку на уровне инструкций;&lt;/li>
&lt;li>не устойчивы к коллизиям;&lt;/li>
&lt;li>достаточно хорошие возможности обнаружения ошибок.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>XXHASH&lt;/p>
&lt;ul>
&lt;li>64-битный дайджест;&lt;/li>
&lt;li>может использоваться в качестве преемника CRC32C;&lt;/li>
&lt;li>очень быстро вычисляется;&lt;/li>
&lt;li>оптимизирована для современных процессоров, использующих конвейерную обработку инструкций;&lt;/li>
&lt;li>хорошая устойчивость к коллизиям;&lt;/li>
&lt;li>хорошее обнаружение ошибок.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>SHA256&lt;/p>
&lt;ul>
&lt;li>256-битный дайджест;&lt;/li>
&lt;li>хэш криптографической стойкости;&lt;/li>
&lt;li>относительно медленный, но с возможным ускорением инструкций ЦП или специализированными аппаратными картами;&lt;/li>
&lt;li>сертифицированный FIPS;&lt;/li>
&lt;li>широко используется.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>BLAKE2b&lt;/p>
&lt;ul>
&lt;li>256-битный дайджест;&lt;/li>
&lt;li>хеш криптографической стойкости;&lt;/li>
&lt;li>быстрее SHA256;&lt;/li>
&lt;li>возможно ускорение с использованием расширений SIMD;&lt;/li>
&lt;li>не стандартизировано;&lt;/li>
&lt;li>широко используется;&lt;/li>
&lt;li>алгоритм BLAKE2b-256 оптимизирован для 64-битных платформ.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Терминальный мультиплексор tmux</title><link>https://yamadharma.github.io/ru/post/2024/02/19/terminal-multiplexer-tmux/</link><pubDate>Mon, 19 Feb 2024 10:11:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/02/19/terminal-multiplexer-tmux/</guid><description>&lt;p>Терминальный мультиплексор tmux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">2&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/tmux/tmux" target="_blank" rel="noopener">https://github.com/tmux/tmux&lt;/a>&lt;/li>
&lt;li>Wiki: &lt;a href="https://github.com/tmux/tmux/wiki" target="_blank" rel="noopener">https://github.com/tmux/tmux/wiki&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">2&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Awesome Tmux: &lt;a href="https://www.trackawesomelist.com/rothgar/awesome-tmux/readme/" target="_blank" rel="noopener">https://www.trackawesomelist.com/rothgar/awesome-tmux/readme/&lt;/a>&lt;/li>
&lt;li>Разные ссылки:
&lt;ul>
&lt;li>&lt;a href="https://github.com/fcsonline/tmux-thumbs" target="_blank" rel="noopener">https://github.com/fcsonline/tmux-thumbs&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация &lt;em>Oh my tmux&lt;/em>: &lt;a href="https://github.com/gpakosz/.tmux" target="_blank" rel="noopener">https://github.com/gpakosz/.tmux&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>VirtualBox. Использование без монитора</title><link>https://yamadharma.github.io/ru/post/2024/02/15/virtualbox-headless/</link><pubDate>Thu, 15 Feb 2024 20:05:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/02/15/virtualbox-headless/</guid><description>&lt;p>VirtualBox. Использование без монитора.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#папка-виртуальных-машин">&lt;span class="section-num">1.1&lt;/span> Папка виртуальных машин&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#создание-виртуальной-машины">&lt;span class="section-num">2&lt;/span> Создание виртуальной машины&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-виртуальной-машиной">&lt;span class="section-num">3&lt;/span> Управление виртуальной машиной&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/h2>
&lt;h3 id="папка-виртуальных-машин">&lt;span class="section-num">1.1&lt;/span> Папка виртуальных машин&lt;/h3>
&lt;ul>
&lt;li>Установим папку для виртуальных машине в &lt;code>/var/vm&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxmanage setproperty machinefolder /var/vm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно восстановить значение по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">VBoxManage setproperty machinefolder default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="создание-виртуальной-машины">&lt;span class="section-num">2&lt;/span> Создание виртуальной машины&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Создайте новую виртуальную машину:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxmanage createvm --name &lt;span class="s2">&amp;#34;Windows&amp;#34;&lt;/span> --ostype Windows10 --register
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Если не указать параметр &lt;code>--register&lt;/code>, придётся вручную использовать команду &lt;code>registervm&lt;/code> позже.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Список операционных систем можно посмотреть по команде:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxmanage list ostypes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Также нужно установить параметры виртуальной машины:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxmanage modifyvm &lt;span class="s2">&amp;#34;Windows&amp;#34;&lt;/span> --memory &lt;span class="m">2048&lt;/span> --acpi on --boot1 dvd --nic1 nat
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Создайте виртуальный жесткий диск для виртуальной машины (например, ёмкостью 10 ГБ):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxmanage createhd --filename &lt;span class="s2">&amp;#34;win.vdi&amp;#34;&lt;/span> --size &lt;span class="m">10000&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Добавьте контроллер IDE в новую виртуальную машину:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxmanage storagectl &lt;span class="s2">&amp;#34;Windows&amp;#34;&lt;/span> --name &lt;span class="s2">&amp;#34;IDE Controller&amp;#34;&lt;/span> --add ide --controller PIIX4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установите созданный вами файл VDI в качестве первого виртуального жесткого диска новой виртуальной машины:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxmanage storageattach &lt;span class="s2">&amp;#34;Windows&amp;#34;&lt;/span> --storagectl &lt;span class="s2">&amp;#34;IDE Controller&amp;#34;&lt;/span> --port &lt;span class="m">0&lt;/span> --device &lt;span class="m">0&lt;/span> --type hdd --medium &lt;span class="s2">&amp;#34;win.vdi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Подсоедините к виртуальной машине ISO-файл, содержащий операционную систему, которую вы хотите установить:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxmanage storageattach &lt;span class="s2">&amp;#34;Windows&amp;#34;&lt;/span> --storagectl &lt;span class="s2">&amp;#34;IDE Controller&amp;#34;&lt;/span> --port &lt;span class="m">0&lt;/span> --device &lt;span class="m">1&lt;/span> --type dvddrive --medium /full/path/to/iso.iso
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Включите расширение удаленного рабочего стола VirtualBox (сервер VRDP):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxmanage modifyvm &lt;span class="s2">&amp;#34;Windows&amp;#34;&lt;/span> --vrde on
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Включите поддержку UEFI.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxmanage modifyvm &lt;span class="s2">&amp;#34;Windows&amp;#34;&lt;/span> --firmware&lt;span class="o">=&lt;/span>efi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="управление-виртуальной-машиной">&lt;span class="section-num">3&lt;/span> Управление виртуальной машиной&lt;/h2>
&lt;ul>
&lt;li>Запустите виртуальную машину:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxheadless --startvm &lt;span class="s2">&amp;#34;Windows&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Команда запускается и занимает консоль.&lt;/li>
&lt;li>На клиентском компьютере запустите средство просмотра RDP и подключитесь к серверу.&lt;/li>
&lt;li>Остановить виртуальную машину можно, запустив на другой консоли:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vboxmanage controlvm &lt;span class="s2">&amp;#34;Windows&amp;#34;&lt;/span> poweroff
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>bittorrent. Трекер opentracker</title><link>https://yamadharma.github.io/ru/post/2024/01/31/bittorrent-opentracker/</link><pubDate>Wed, 31 Jan 2024 21:15:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/01/31/bittorrent-opentracker/</guid><description>&lt;p>Трекер Opentracker.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#трекер">&lt;span class="section-num">1.1&lt;/span> Трекер&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://erdgeist.org/arts/software/opentracker/" target="_blank" rel="noopener">https://erdgeist.org/arts/software/opentracker/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://erdgeist.org/gitweb/opentracker/" target="_blank" rel="noopener">https://erdgeist.org/gitweb/opentracker/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="трекер">&lt;span class="section-num">1.1&lt;/span> Трекер&lt;/h3>
&lt;ul>
&lt;li>BitTorrent &amp;mdash; пиринговый (P2P) сетевой протокол для кооперативного обмена файлами через Интернет.&lt;/li>
&lt;li>Файлы передаются частями, каждый torrent-клиент, получая (скачивая) эти части, в то же время отдаёт (закачивает) их другим клиентам, что снижает нагрузку и зависимость от каждого клиента-источника и обеспечивает избыточность данных.&lt;/li>
&lt;li>Перед началом скачивания клиент подсоединяется к трекеру по адресу, указанному в торрент-файле, сообщает ему свой адрес и хеш-сумму торрент-файла, на что в ответ клиент получает адреса других клиентов, скачивающих или раздающих этот же файл.&lt;/li>
&lt;li>Торрент-трекер по сути представляет собой http-сервер, который собирает IP-адреса всех клиентов в пулы, отсортированные по одному из параметров строки запроса, и отвечает всем остальным клиентам, которые указали этот же самый параметр, списком всех других недавних клиентов.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Устанавливается из исходников.&lt;/li>
&lt;li>Установите окружение для разработки.
&lt;ul>
&lt;li>RockyLinux (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y group install &lt;span class="s2">&amp;#34;Development Tools&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf -y install git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf -y install cvs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Подготовьте opentracker к компиляции:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cvs -d :pserver:cvs@cvs.fefe.de:/cvs -z9 co libowfat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> libowfat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ..
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone git://erdgeist.org/opentracker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> opentracker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройте параметры &lt;code>FEATURES&lt;/code> в &lt;code>Makefile&lt;/code>.
&lt;ul>
&lt;li>&lt;code>-DWANT_V6&lt;/code> : делает opentracker трекером только для IPv6;&lt;/li>
&lt;li>&lt;code>-DWANT_COMPRESSION_GZIP&lt;/code> : использовать сжатие gzip;&lt;/li>
&lt;li>&lt;code>-DWANT_ACCESSLIST_BLACK&lt;/code>, &lt;code>-DWANT_ACCESSLIST_WHITE&lt;/code> : обычно opentracker отслеживает любой анонсированный ему торрент, но можно использовать белый и чёрный списки (файл белого списка при этом обязателен);&lt;/li>
&lt;li>&lt;code>-DWANT_SYNC_LIVE&lt;/code> : работа в кластере (необходимо обязательно настроить кластер);&lt;/li>
&lt;li>&lt;code>-DWANT_RESTRICT_STATS&lt;/code> : ограничение доступа к статистике;&lt;/li>
&lt;li>&lt;code>-DWANT_FULLSCRAPE&lt;/code> : возможность запросить у трекера все отслеживаемые торренты (включено по умолчанию);&lt;/li>
&lt;li>&lt;code>-DWANT_IP_FROM_QUERY_STRING&lt;/code> : клиенты могут указывать IP-адрес в строке запроса (по умолчанию opentracker разрешает объявлять только IP-адрес подключающейся конечной точки).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Настроек по умолчанию чаще всего будет достаточно.&lt;/li>
&lt;li>Скомпилируйте opentracker:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">make
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируйте исполняемый файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp opentracker /usr/local/bin/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируйте конфигурационный файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /etc/opentracker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp opentracker.conf.sample /etc/opentracker/opentracker.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте юнит systemd:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /etc/systemd/system/opentracker.service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Unit&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Opentracker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Wants&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">network&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">online&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">After&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">network&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span> &lt;span class="n">network&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">online&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Service&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ExecStart&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opentracker&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opentracker&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opentracker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ExecReload&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kill&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">HUP&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">MAINPID&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Restart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">on&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Install&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WantedBy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите сервис:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now opentracker.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Загрузчик rEFInd</title><link>https://yamadharma.github.io/ru/post/2024/01/29/refind-boot-manager/</link><pubDate>Mon, 29 Jan 2024 11:41:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/01/29/refind-boot-manager/</guid><description>&lt;p>Загрузчик rEFInd.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-загрузчика">&lt;span class="section-num">3&lt;/span> Установка загрузчика&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-скриптом">&lt;span class="section-num">3.1&lt;/span> Установка скриптом&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ручная-установка">&lt;span class="section-num">3.2&lt;/span> Ручная установка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-параллельно-уже-существующему-uefi-windows">&lt;span class="section-num">4&lt;/span> Установка параллельно уже существующему UEFI Windows&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#восстановление-загрузчика">&lt;span class="section-num">4.1&lt;/span> Восстановление загрузчика&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.rodsbooks.com/refind/" target="_blank" rel="noopener">https://www.rodsbooks.com/refind/&lt;/a>&lt;/li>
&lt;li>UEFI-загрузчик, способный запускать ядра EFISTUB.&lt;/li>
&lt;li>Форк более не поддерживаемого rEFIt (только для Mac).&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge sys-boot/refind
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-загрузчика">&lt;span class="section-num">3&lt;/span> Установка загрузчика&lt;/h2>
&lt;ul>
&lt;li>Обозначим через &lt;code>esp&lt;/code> точку монтирования системного раздела EFI.&lt;/li>
&lt;/ul>
&lt;h3 id="установка-скриптом">&lt;span class="section-num">3.1&lt;/span> Установка скриптом&lt;/h3>
&lt;ul>
&lt;li>Скрипт &lt;code>refind-install&lt;/code> устанавливает rEFInd и делает его загрузочной записью EFI по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">refind-install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скрипт пытается:
&lt;ul>
&lt;li>найти и примонтировать ESP;&lt;/li>
&lt;li>скопировать файлы rEFInd в &lt;code>esp/EFI/refind/&lt;/code>;&lt;/li>
&lt;li>применить &lt;code>efibootmgr&lt;/code>, чтобы сделать rEFInd загрузчиком EFI по умолчанию.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Можно установить rEFInd в стандартный/запасной путь загрузки &lt;code>esp/EFI/BOOT/bootx64.efi&lt;/code>.
&lt;ul>
&lt;li>Это полезно для загрузочных USB-устройств или для систем с проблемами с изменениями в NVRAM:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">refind-install --usedefault /dev/sdXY
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>где &lt;code>/dev/sdXY&lt;/code> &amp;mdash; системный раздел EFI (устройство, а не точка его монтирования).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>По умолчанию refind-install устанавливает лишь драйвер для той файловой системы, где находится ядро.&lt;/li>
&lt;li>Драйверы дополнительных файловых систем нужно установить:
&lt;ul>
&lt;li>вручную копированием из &lt;code>/usr/lib64/refind/drivers_x64/&lt;/code> в &lt;code>esp/EFI/refind/drivers_x64/&lt;/code>&lt;/li>
&lt;li>задать опцию при установке:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">refind-install --alldrivers
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>После установки rEFInd должен создать файл &lt;code>refind_linux.conf&lt;/code>, содержащий параметры ядра в том же каталоге, где и ядро.&lt;/li>
&lt;li>Этот конфигурационный файл не будет создан, если Вы использовали опцию &lt;code>--usedefault&lt;/code>.&lt;/li>
&lt;li>В этом случае запустите:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkrlconf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Когда &lt;code>refind-install&lt;/code> запускается в chroot, &lt;code>/boot/refind_linux.conf&lt;/code> заполняется параметрами ядра из изначальной системы, а не той, куда устанавливается rEFInd.&lt;/li>
&lt;li>Отредактируйте &lt;code>/boot/refind_linux.conf&lt;/code> и убедитесь, что параметры ядра в нём верны.&lt;/li>
&lt;/ul>
&lt;h3 id="ручная-установка">&lt;span class="section-num">3.2&lt;/span> Ручная установка&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Скопируйте бинарный файл в ESP:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p esp/EFI/refind
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /usr/lib64/refind/refind_x64.efi esp/EFI/refind/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Затем используйте efibootmgr, чтобы создать загрузочную запись в NVRAM UEFI, где &lt;code>/dev/sdX&lt;/code> и &lt;code>Y&lt;/code> &amp;mdash; устройство и номер раздела для вашего системного раздела EFI:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">efibootmgr --create --disk /dev/sdX --part Y --loader /EFI/refind/refind_x64.efi --label &lt;span class="s2">&amp;#34;rEFInd Boot Manager&amp;#34;&lt;/span> --unicode
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Если Вы хотите установить rEFInd в стандартный/запасной путь загрузки: замените esp/EFI/refind/ на esp/EFI/BOOT/ и скопируйте бинарный файл EFI rEFInd в esp/EFI/BOOT/bootx64.efi:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p esp/EFI/BOOT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /usr/lib64/refind/refind_x64.efi esp/EFI/BOOT/bootx64.efi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В этом случает прописывать загрузчик в NVRAM UEFI не надо.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>rEFInd автоматически загружает все драйвера из подкаталогов &lt;code>drivers&lt;/code> и &lt;code>drivers_arch&lt;/code> (например, &lt;code>drivers_x64&lt;/code>) в своем установочном каталоге&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir esp/EFI/refind/drivers_x64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /usr/lib64/refind/drivers_x64/drivername_x64.efi esp/EFI/refind/drivers_x64/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Скопируйте конфигурационный файл и отредактируйте настройки rEFInd:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /usr/lib64/refind/refind.conf-sample esp/EFI/refind/refind.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Скопируйте иконки rEFInd:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp -r /usr/lib64/refind/icons esp/EFI/refind/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-параллельно-уже-существующему-uefi-windows">&lt;span class="section-num">4&lt;/span> Установка параллельно уже существующему UEFI Windows&lt;/h2>
&lt;ul>
&lt;li>rEFInd совместим с системным разделом EFI, созданным установкой UEFI Windows.&lt;/li>
&lt;li>Установите rEFInd, как обычно.&lt;/li>
&lt;li>По умолчанию, функция автообнаружения rEFInd должна опознать любые существующие загрузчики Windows.&lt;/li>
&lt;li>Начиная с Windows 8 по умолчанию включена функция быстрого завершения работы.
&lt;ul>
&lt;li>Помогает ускорить операции завершения и запуска.&lt;/li>
&lt;li>Может привести к повреждению файловой системы на мультизагрузочном компьютере.&lt;/li>
&lt;li>Отключить эту функцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">powercfg /h off
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="восстановление-загрузчика">&lt;span class="section-num">4.1&lt;/span> Восстановление загрузчика&lt;/h3>
&lt;ul>
&lt;li>После установки Windows заменяет загрузчик по умолчанию на свой.&lt;/li>
&lt;li>Чтобы восстановить загрузку refind, необходимо запустить:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bcdedit /set &lt;span class="s2">&amp;#34;{bootmgr}&amp;#34;&lt;/span> path &lt;span class="se">\E&lt;/span>FI&lt;span class="se">\r&lt;/span>efind&lt;span class="se">\r&lt;/span>efind_x64.efi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Файловая система mergerfs</title><link>https://yamadharma.github.io/ru/post/2024/01/28/mergerfs/</link><pubDate>Sun, 28 Jan 2024 19:04:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/01/28/mergerfs/</guid><description>&lt;p>Файловая система mergerfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-опции-монтирования">&lt;span class="section-num">3&lt;/span> Основные опции монтирования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#политики-размещения-файлов">&lt;span class="section-num">4&lt;/span> Политики размещения файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примеры-использования">&lt;span class="section-num">5&lt;/span> Примеры использования&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#монтирование-двух-дисков">&lt;span class="section-num">5.1&lt;/span> Монтирование двух дисков&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/trapexit/mergerfs" target="_blank" rel="noopener">https://github.com/trapexit/mergerfs&lt;/a>&lt;/li>
&lt;li>FUSE-модуль &lt;code>mergerfs&lt;/code> позволяет логически объединить несколько файловых систем в одну.&lt;/li>
&lt;li>В отличие от &lt;code>aufs&lt;/code> и &lt;code>overlayfs&lt;/code> в &lt;code>mergerfs&lt;/code> не создаётся отдельного слоя для записи и данная ФС не может применяться поверх разделов, доступных в режиме только для чтения.&lt;/li>
&lt;li>&lt;code>mergerfs&lt;/code> даёт возможность прямой записи в примонтированный раздел в соответствии с заданной политикой.&lt;/li>
&lt;li>Можно включить в один сводный раздел ФС, доступную на запись, и ФС только для чтения.
&lt;ul>
&lt;li>В такой конфигурации операции записи будут производиться в разделе, который допускает запись.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge mergerfs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="основные-опции-монтирования">&lt;span class="section-num">3&lt;/span> Основные опции монтирования&lt;/h2>
&lt;ul>
&lt;li>&lt;code>category.create=POLICY&lt;/code> : распределение новых файлов в зависимости от доступного свободного пространства (по умолчанию &lt;code>epmfs&lt;/code>);&lt;/li>
&lt;li>&lt;code>moveonenospc=true&lt;/code> : в случае сбоя записи искать раздел с большим свободным местом;&lt;/li>
&lt;li>&lt;code>minfreespace=SIZE&lt;/code> : минимальное свободное место для записи (по умолчанию установлено 4G);&lt;/li>
&lt;li>&lt;code>config&lt;/code> : путь к файлу конфигурации;&lt;/li>
&lt;li>&lt;code>moveonenospc=BOOL|POLICY&lt;/code> : если эта опция включена, если запись завершается с ошибкой ENOSPC (на устройстве не осталось места) или EDQUOT (превышена дисковая квота);
&lt;ul>
&lt;li>произойдёт попытка переместить файл в новую ветку (с сохранением всех метаданных), и в случае успеха связь с оригиналом будет отсоединена, и запись будет повторена (по умолчанию: false, true = mfs).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>inodecalc=passthrough|path-hash|devino-hash|hybrid-hash&lt;/code> : выбирает алгоритм вычисления индексного дескриптора. (по умолчанию: гибридный &lt;code>hybrid-hash&lt;/code>);&lt;/li>
&lt;li>&lt;code>xattr=passthrough|noattr|nosys&lt;/code> : управление xattrs во время выполнения (по умолчанию &lt;code>xattr=passthrough&lt;/code>);&lt;/li>
&lt;li>&lt;code>posix_acl=BOOL&lt;/code> : включить поддержку POSIX ACL (по умолчанию: &lt;code>false&lt;/code>).&lt;/li>
&lt;/ul>
&lt;h2 id="политики-размещения-файлов">&lt;span class="section-num">4&lt;/span> Политики размещения файлов&lt;/h2>
&lt;ul>
&lt;li>&lt;code>all&lt;/code>: для mkdir , mknod и symlink это будет применяться ко всем веткам. create работает как ff;&lt;/li>
&lt;li>&lt;code>epall&lt;/code> (существующий путь, все): для mkdir , mknod и symlink это будет применяться ко всем найденным. create работает как epff (но дороже, потому что не останавливается после обнаружения допустимой ветки);&lt;/li>
&lt;li>&lt;code>epff&lt;/code> (существующий путь, найден впервые): учитывая порядок ветвей, определенный во время монтирования или настроенный во время выполнения, действуйте в соответствии с первой найденной веткой, где существует относительный путь;&lt;/li>
&lt;li>&lt;code>eplfs&lt;/code> (существующий путь, минимум свободного места): из всех ветвей, на которых существует относительный путь, выберите ветку с наименьшим количеством свободного места;&lt;/li>
&lt;li>&lt;code>eplus&lt;/code> (существующий путь, наименее используемое пространство): из всех ветвей, в которых существует относительный путь, выберите ветку с наименьшим количеством используемого пространства;&lt;/li>
&lt;li>&lt;code>epmfs&lt;/code> (существующий путь, большая часть свободного места); из всех ветвей, в которых существует относительный путь, выберите ветку с наибольшим количеством свободного места;&lt;/li>
&lt;li>&lt;code>eppfrd&lt;/code> (существующий путь, случайное распределение без процентов); подобно pfrd , но ограничен существующими путями;&lt;/li>
&lt;li>&lt;code>eprand&lt;/code> (существующий путь, случайный): вызывает epall, а затем рандомизирует;&lt;/li>
&lt;li>&lt;code>ff&lt;/code> (впервые найден): учитывая порядок ветвей, определенный во время монтирования или настроенный во время выполнения, действуйте в соответствии с первым найденным;&lt;/li>
&lt;li>&lt;code>lfs&lt;/code> (наименьшее свободное пространство): выберите ветку с наименьшим количеством свободного места;&lt;/li>
&lt;li>&lt;code>lus&lt;/code> (наименее используемое пространство): выберите ветку с наименее используемым пространством;&lt;/li>
&lt;li>&lt;code>mfs&lt;/code> (большая часть свободного места): выберите ветку с наибольшим количеством свободного места;&lt;/li>
&lt;li>&lt;code>msplfs&lt;/code> (наиболее общий путь, минимум свободного места): как и &lt;code>eplfs&lt;/code>, но если ему не удастся найти ветку, он попытается еще раз с родительским каталогом;&lt;/li>
&lt;li>&lt;code>msplus&lt;/code> (наиболее общий путь, наименее используемое пространство): как и &lt;code>eplus&lt;/code>, но если ему не удастся найти ветку, он попытается еще раз с родительским каталогом;&lt;/li>
&lt;li>&lt;code>mspmfs&lt;/code> (наиболее общий путь, наибольшее свободное пространство): как и &lt;code>epmfs&lt;/code>, но если ему не удастся найти ветку, он попытается еще раз с родительским каталогом;&lt;/li>
&lt;li>&lt;code>msppfrd&lt;/code> (наиболее общий путь, случайное распределение без процентов): как и &lt;code>eppfrd&lt;/code>, но если ему не удастся найти ветку, он попытается еще раз с родительским каталогом;&lt;/li>
&lt;li>&lt;code>newest&lt;/code>: выберите файл/каталог с наибольшим значением mtime;&lt;/li>
&lt;li>&lt;code>pfrd&lt;/code> (процентное случайное распределение): выбирает ветку случайным образом с вероятностью выбора, основанной на доступном пространстве ветки относительно общего количества;&lt;/li>
&lt;li>rand (случайный): вызывает &lt;code>all&lt;/code>, а затем рандомизирует.&lt;/li>
&lt;/ul>
&lt;h2 id="примеры-использования">&lt;span class="section-num">5&lt;/span> Примеры использования&lt;/h2>
&lt;h3 id="монтирование-двух-дисков">&lt;span class="section-num">5.1&lt;/span> Монтирование двух дисков&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Имеем два смонтированных раздела:&lt;/p>
&lt;ul>
&lt;li>&lt;code>/mnt/hdd1&lt;/code> : примонтированный диск 1;&lt;/li>
&lt;li>&lt;code>/mnt/hdd2&lt;/code> : примонтированный диск 2.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Смонтируем эти диски с помощью &lt;code>mergerfs&lt;/code>, чтобы они выглядели как один большой диск:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mergerfs -o defaults,category.create&lt;span class="o">=&lt;/span>mfs,moveonenospc&lt;span class="o">=&lt;/span>true,minfreespace&lt;span class="o">=&lt;/span>100M /mnt/hdd1:/mnt/hdd2 /mnt/data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Запишем в виде &lt;code>fstab&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/mnt/hdd1:/mnt/hdd2 /mnt/data fuse.mergerfs defaults,category.create=mfs,moveonenospc=true,minfreespace=100M 0 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Можно добавить параметры монтируемым дискам:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/mnt/hdd1&lt;span class="o">=&lt;/span>RW,1G:/mnt/hdd2&lt;span class="o">=&lt;/span>RW,5G:/mnt/ssd1&lt;span class="o">=&lt;/span>RO,1G
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>RW: (read/write): поведение по умолчанию;&lt;/li>
&lt;li>RO: (read-only): смонтированная файловая система доступна только для чтения;&lt;/li>
&lt;li>NC: (no-create): нельзя создать файлы в этой ветви, но можно изменить или удалить.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Лимончелли, Т. А. et al. (2018): Практика системного и сетевого администрирования</title><link>https://yamadharma.github.io/ru/post/2024/01/27/limoncelli_book_practice-system-network-administration_ru/</link><pubDate>Sat, 27 Jan 2024 20:38:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/01/27/limoncelli_book_practice-system-network-administration_ru/</guid><description>&lt;p>Лимончелли, Т. А., Хоган, К. Д., Чейлап, С. Р. (2018): Практика системного и сетевого администрирования [&lt;a href="#citeproc_bib_item_1">1&lt;/a>; &lt;a href="#citeproc_bib_item_2">2&lt;/a>].&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#резюме">&lt;span class="section-num">1&lt;/span> Резюме&lt;/a>&lt;/li>
&lt;li>&lt;a href="#литература">Литература&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="резюме">&lt;span class="section-num">1&lt;/span> Резюме&lt;/h2>
&lt;h2 id="литература">Литература&lt;/h2>
&lt;div class="csl-bib-body">
&lt;div class="csl-entry">&lt;a id="citeproc_bib_item_1">&lt;/a>1. Лимончелли, Т.А. Практика системного и сетевого администрирования. Т. 1 / Т.А. Лимончелли, К.Д. Хоган, С.Р. Чейлап. – Санкт-Петербург : Вильямс, 2018. – 1104 сс. – Режим доступа: &lt;a href="https://libgen.st/book/index.php?md5=EAB7431021E05591ECF22205B7FA2D28">https://libgen.st/book/index.php?md5=EAB7431021E05591ECF22205B7FA2D28&lt;/a> (дата обращения: 28.01.2024). – [Электронный ресурс].&lt;/div>
&lt;div class="csl-entry">&lt;a id="citeproc_bib_item_2">&lt;/a>2. Limoncelli, T.A. The Practice of System and Network Administration : DevOps и other Best Practices for Enterprise IT. Т. 1 / T.A. Limoncelli, C.J. Hogan, S.R. Chalup. – 3. – Addison-Wesley Professional, 2016. – 1232 сс.&lt;/div>
&lt;/div></description></item><item><title>Тест Лимончелли</title><link>https://yamadharma.github.io/ru/post/2024/01/27/limoncelli-test/</link><pubDate>Sat, 27 Jan 2024 20:26:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/01/27/limoncelli-test/</guid><description>&lt;ul>
&lt;li>Тест Лимончелли
&lt;ul>
&lt;li>32 краеугольных принципа хорошей команды системного администрирования.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подходы-по-работе-с-пользователями">&lt;span class="section-num">2&lt;/span> Подходы по работе с пользователями:&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#используете-ли-вы-систему-отслеживания-запросов">&lt;span class="section-num">2.1&lt;/span> Используете ли вы систему отслеживания запросов?&lt;/a>&lt;/li>
&lt;li>&lt;a href="#есть-ли-у-вас-три-регламентирующие-политики-и-знают-ли-о-них">&lt;span class="section-num">2.2&lt;/span> Есть ли у вас &lt;em>три регламентирующие политики&lt;/em> и знают ли о них?&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#как-получить-помощь">&lt;span class="section-num">2.2.1&lt;/span> Как получить помощь&lt;/a>&lt;/li>
&lt;li>&lt;a href="#определение-аварии">&lt;span class="section-num">2.2.2&lt;/span> Определение аварии:&lt;/a>&lt;/li>
&lt;li>&lt;a href="#что-поддерживается">&lt;span class="section-num">2.2.3&lt;/span> Что поддерживается:&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#ведёт-ли-команда-ежемесячные-метрики">&lt;span class="section-num">2.3&lt;/span> Ведёт ли команда ежемесячные метрики?&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#современные-подходы-в-работе">&lt;span class="section-num">3&lt;/span> Современные подходы в работе:&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#есть-ли-у-вас-вики-с-описанием-политик-и-процедур">&lt;span class="section-num">3.1&lt;/span> Есть ли у вас вики с описанием политик и процедур?&lt;/a>&lt;/li>
&lt;li>&lt;a href="#есть-ли-у-вас-место-где-хранятся-пароли">&lt;span class="section-num">3.2&lt;/span> Есть ли у вас место, где хранятся пароли?&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#операционные-подходы">&lt;span class="section-num">4&lt;/span> Операционные подходы:&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подходы-по-автоматизации">&lt;span class="section-num">5&lt;/span> Подходы по автоматизации:&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подходы-по-управлению-парком-машин">&lt;span class="section-num">6&lt;/span> Подходы по управлению парком машин&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подходы-серии-мы-согласны-что-техника-ломается">&lt;span class="section-num">7&lt;/span> Подходы серии &lt;em>Мы согласны, что техника ломается&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подходы-к-безопасности">&lt;span class="section-num">8&lt;/span> Подходы к безопасности:&lt;/a>&lt;/li>
&lt;li>&lt;a href="#библиография">&lt;span class="section-num">9&lt;/span> Библиография&lt;/a>&lt;/li>
&lt;li>&lt;a href="#литература">Литература&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт (англ): &lt;a href="https://www.opsreportcard.com/" target="_blank" rel="noopener">https://www.opsreportcard.com/&lt;/a>&lt;/li>
&lt;li>Перевод (русский): &lt;a href="https://docs.google.com/document/u/0/d/1r2-0CH-ZnCjzyl214JRu4jYr25HHNPGoRtE5QQlDe1M/pub" target="_blank" rel="noopener">https://docs.google.com/document/u/0/d/1r2-0CH-ZnCjzyl214JRu4jYr25HHNPGoRtE5QQlDe1M/pub&lt;/a>&lt;/li>
&lt;li>Основные правила организации инфраструктуры системного администрирования, сформулированные в виде тестов.&lt;/li>
&lt;li>Даются вопросы с их обсуждением.&lt;/li>
&lt;/ul>
&lt;h2 id="подходы-по-работе-с-пользователями">&lt;span class="section-num">2&lt;/span> Подходы по работе с пользователями:&lt;/h2>
&lt;h3 id="используете-ли-вы-систему-отслеживания-запросов">&lt;span class="section-num">2.1&lt;/span> Используете ли вы систему отслеживания запросов?&lt;/h3>
&lt;ul>
&lt;li>Упрощает обмен информацией в команде.
&lt;ul>
&lt;li>Позволяет избегать ситуаций, когда два человека одновременно работают над одним и тем же запросом.&lt;/li>
&lt;li>Даёт возможность делить работу межу людьми, передавать работу между собой, не теряя информации.&lt;/li>
&lt;li>Даёт возможность подменять администратора, который недоступен.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Делает работу команды прозрачнее.
&lt;ul>
&lt;li>Пользователи видят кто работает над запросом, какой у него статус, и когда он выполнен.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Позволяет эффективнее использовать рабочее время.
&lt;ul>
&lt;li>Уменьшает количество прерываний от пользователей, которые хотят сделать новый запрос или узнать статус открытого запроса.&lt;/li>
&lt;li>Позволяет задавать приоритеты в работе администратора, а не решать проблемы пользователя, который жалуется громче всех.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Позволяет обнаружить системные проблемы.&lt;/li>
&lt;li>Позволяет пользователям помогать самим себе.
&lt;ul>
&lt;li>Формулируя проблему, пользователь сам находит её решение и запрос так и не отправляется.&lt;/li>
&lt;li>Процесс отправки помогает пользователю продумать проблему и сформулировать её яснее.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="есть-ли-у-вас-три-регламентирующие-политики-и-знают-ли-о-них">&lt;span class="section-num">2.2&lt;/span> Есть ли у вас &lt;em>три регламентирующие политики&lt;/em> и знают ли о них?&lt;/h3>
&lt;ul>
&lt;li>Три политики, регламентирующие вашу работу с пользователями:
&lt;ul>
&lt;li>Доступные пользователям способы запроса помощи.&lt;/li>
&lt;li>Определение аварийной ситуации.&lt;/li>
&lt;li>Объем обслуживания: кто, что и где.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="как-получить-помощь">&lt;span class="section-num">2.2.1&lt;/span> Как получить помощь&lt;/h4>
&lt;p>Официальный протокол, описывающий как пользователи должны запрашивать помощь, позволяет получить все преимущества использования системы отслеживания запросов, описанные в предыдущем разделе. Без этой политики все преимущества испаряются, потому что люди будут приходить прямо к сисадминам, которые, стараясь помочь, будут постоянно отвлекаться на мелочи, а их эффективность сильно понизится.&lt;/p>
&lt;p>У системного администратора должны быть возможность отказать пользователю, когда тот не соблюдает протокол. Без возможности отослать пользователя к официальной политике, администраторы будут работать либо над низкоприоритетными задачами, либо для пользователей, которые громче всех жалуются, либо каждый из них будет пользоваться своей личной политикой, тем самым выставляя всю команду непоследовательной, а в худшем случае будут нездоровым способом демонстрировать свое неудовлетворение. Точнее, нездоровым для пользователей способом.&lt;/p>
&lt;h4 id="определение-аварии">&lt;span class="section-num">2.2.2&lt;/span> Определение аварии:&lt;/h4>
&lt;p>Официальное определение аварийной ситуации позволяет системным администраторам расставлять приоритеты. Без этого определения, всё становится авралом, и снова сисадмины будут постоянно отвлекаться на мелочи, а их эффективность сильно понизится.&lt;/p>
&lt;p>Политика — это один из способов, которым руководство коммуницирует приоритеты системным администраторам. В противном случае, сисадмины будут строить догадки о приоритетах, ошибаться, их будут несправедливо за это наказывать; менеджеры будут расстраиваться из-за “дисконнектов”, а пользователи, видя непоследовательность, будут предполагать фаворитизм, халатность и некомпетентность.&lt;/p>
&lt;p>Это политика определяет ожидания пользователей. С ее помощью можно корректировать иллюзии пользователей, которые считают любой происшествие аварийной ситуацией.&lt;/p>
&lt;p>Каждая организация должна иметь определение аварии или “красного сигнала”. Для газеты — это все, что блокирует печать завтрашнего номера и его погрузку в грузовики в 4 утра. “Красный сигнал” на заводе — это все, что останавливает конвейер. Авария для отдела платежей — все, что делает невозможным проведение платежей. Команды, работающие в сфере образования, знают, что перенести занятие совсем не просто, потому аварийной ситуацией является все, что мешает надлежащему проведению лекции (возможно, только если технологический центр был заблаговременно предупрежден). В университетах “красный сигнал” определен, как любая преграда для своевременной подачи заявок на получение грантов.&lt;/p>
&lt;p>“Желтый сигнал” — это все, что приведет к “красному”, если останется без внимания. Например, оплаты проводятся, но не работает подсистема оценки доступных запасов. В таком случае очень рискованно брать новых клиентов. Последняя оценка говорила о запасах, достаточных на 2 недели. Риск остановки производства растет с каждым днем, пока “желтый сигнал” не будет исправлен.&lt;/p>
&lt;p>Все остальное — это рутина. Изобретательные компании разделяют рутинные задачи по приоритетам: высокий, средний, низкий; создание нового сервиса, поддержка существующих, и т.д. Если у вас ничего такого нету, начните с определения, что представляет собой авария.&lt;/p>
&lt;h4 id="что-поддерживается">&lt;span class="section-num">2.2.3&lt;/span> Что поддерживается:&lt;/h4>
&lt;p>Официальное определение поддерживаемых сервисов позволяет администраторам говорить “нет”. Должно быть определено когда, где, кто и что поддерживается. Работает ли команда после 6 вечера? На выходных? Ходят ли администраторы по вызову к рабочему месту пользователя? Домой к пользователю? Поддерживаете ли вы кого-либо, кроме сотрудников компании? Какое программное и аппаратное обеспечение поддерживается? Есть ли у поддерживаемого обеспечения жизненный цикл, или вы обречены его поддерживать вечно? Новые технологии включаются в поддержку автоматически или после официального утверждения?&lt;/p>
&lt;p>Не имея возможности сказать “нет”, администраторы будут поддерживать всё. Отзывчивый и старательный сисадмин потратит кучу времени, пытаясь заставить работать неподдерживаемую видеокарту, при том, что дешевле будет подарить этому пользователю поддерживаемую карту за счет бюджета СА. Пропавший без вести системный администратор вдруг найдется, после дня, проведенного у пользователя дома, где он ремонтировал Интернет-подключение. Или наоборот, ворчливый сисадмин будет говорить людям, что они это не поддерживают, просто потому, что он занят.&lt;/p>
&lt;h3 id="ведёт-ли-команда-ежемесячные-метрики">&lt;span class="section-num">2.3&lt;/span> Ведёт ли команда ежемесячные метрики?&lt;/h3>
&lt;h2 id="современные-подходы-в-работе">&lt;span class="section-num">3&lt;/span> Современные подходы в работе:&lt;/h2>
&lt;h3 id="есть-ли-у-вас-вики-с-описанием-политик-и-процедур">&lt;span class="section-num">3.1&lt;/span> Есть ли у вас вики с описанием политик и процедур?&lt;/h3>
&lt;h3 id="есть-ли-у-вас-место-где-хранятся-пароли">&lt;span class="section-num">3.2&lt;/span> Есть ли у вас место, где хранятся пароли?&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>Хранится ли ваш код в системе управления версиями?&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Использует ли ваша команда систему отслеживания ошибок для своего кода?&lt;/p>
&lt;/li>
&lt;li>
&lt;p>В ваших задачах обеспечение стабильности приоритетнее новых возможностей?&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Пишет ли ваша команда проектную документацию?&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Выполняете ли вы анализ причин происшествия?&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="операционные-подходы">&lt;span class="section-num">4&lt;/span> Операционные подходы:&lt;/h2>
&lt;p>*11. Есть ли у вас документация (OpsDoc) на все ваши сервисы?&lt;/p>
&lt;p>*12. Имеет ли каждый сервис необходимый мониторинг?&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Есть ли у вас график дежурств?&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Используете ли вы отдельные системы для разработки, тестирования и производства?&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Используется ли “канареечный процесс” при внесении изменений на большое количество машин?&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="подходы-по-автоматизации">&lt;span class="section-num">5&lt;/span> Подходы по автоматизации:&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>Используете ли вы инструменты управления конфигурацией, такие как cfengine/puppet/chef?&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Выполняются ли автоматизированные задачи под ролевыми учетными записями?&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Ваши автоматизированные задачи шлют почту только когда есть полезная информация?&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="подходы-по-управлению-парком-машин">&lt;span class="section-num">6&lt;/span> Подходы по управлению парком машин&lt;/h2>
&lt;p>*19. Есть ли у вас база данных всех машин?&lt;/p>
&lt;ol>
&lt;li>Автоматизирован ли у вас процесс установки ОС?&lt;/li>
&lt;/ol>
&lt;p>*21. Можете ли вы автоматически обновлять ПО для всего парка машин?&lt;/p>
&lt;ol>
&lt;li>Есть ли у вас политика обновления компьютеров?&lt;/li>
&lt;/ol>
&lt;h2 id="подходы-серии-мы-согласны-что-техника-ломается">&lt;span class="section-num">7&lt;/span> Подходы серии &lt;em>Мы согласны, что техника ломается&lt;/em>&lt;/h2>
&lt;p>*23. Будут ли работать ваши сервера, если на них откажет один из дисков?&lt;/p>
&lt;ol>
&lt;li>Используется ли схема N+1 в ядре вашей сети?&lt;/li>
&lt;/ol>
&lt;p>*25. Автоматизировано ли ваша процедура резервного копирования?&lt;/p>
&lt;p>*26. Проверяете ли вы периодически свой план аварийного восстановления?&lt;/p>
&lt;ol>
&lt;li>Есть ли в вашем ЦОД системы удаленного управления питанием и доступа к консолям?&lt;/li>
&lt;/ol>
&lt;h2 id="подходы-к-безопасности">&lt;span class="section-num">8&lt;/span> Подходы к безопасности:&lt;/h2>
&lt;p>*28. Ваши сервера/ноутбуки/компьютеры защищены автоматически обновляемым антивирусным ПО?&lt;/p>
&lt;p>*29. Есть ли у вас политика безопасности в письменном виде?&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Проводите ли вы регулярный аудит безопасности?&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Можете ли вы отключить учетную запись пользователя во всех системах за 1 час?&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Можете ли вы сменить все привилегированные (root) пароли за 1 час?&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="библиография">&lt;span class="section-num">9&lt;/span> Библиография&lt;/h2>
&lt;h2 id="литература">Литература&lt;/h2>
&lt;div class="csl-bib-body">
&lt;/div></description></item><item><title>Книги. Системное администрирование</title><link>https://yamadharma.github.io/ru/post/2024/01/24/books-sysadmin/</link><pubDate>Wed, 24 Jan 2024 18:44:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/01/24/books-sysadmin/</guid><description>&lt;p>Книги. Системное администрирование.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#темы">&lt;span class="section-num">1&lt;/span> Темы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">1.1&lt;/span> Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#организация-системного-администрирования">&lt;span class="section-num">1.2&lt;/span> Организация системного администрирования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#библиография">&lt;span class="section-num">2&lt;/span> Библиография&lt;/a>&lt;/li>
&lt;li>&lt;a href="#литература">Литература&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="темы">&lt;span class="section-num">1&lt;/span> Темы&lt;/h2>
&lt;h3 id="linux">&lt;span class="section-num">1.1&lt;/span> Linux&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/01/24/vandenbrink_book_linux-networking-professionals_ru/">Ванденбринк, Р. (2024): Linux для сетевых инженеров&lt;/a> [&lt;a href="#citeproc_bib_item_1">1&lt;/a>]&lt;/li>
&lt;/ul>
&lt;h3 id="организация-системного-администрирования">&lt;span class="section-num">1.2&lt;/span> Организация системного администрирования&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/01/27/limoncelli_book_practice-system-network-administration_ru/">Лимончелли, Т. А. et al. (2018): Практика системного и сетевого администрирования&lt;/a> [&lt;a href="#citeproc_bib_item_2">2&lt;/a>]&lt;/li>
&lt;/ul>
&lt;h2 id="библиография">&lt;span class="section-num">2&lt;/span> Библиография&lt;/h2>
&lt;h2 id="литература">Литература&lt;/h2>
&lt;div class="csl-bib-body">
&lt;div class="csl-entry">&lt;a id="citeproc_bib_item_1">&lt;/a>1. Ванденбринк, Р. Linux для сетевых инженеров : Библиотека программиста / Р. Ванденбринк; А.Г. Гаврилов пер. . – Санкт-Петербург : Питер, 2024. – 496 сс. – Режим доступа: &lt;a href="http://libgen.li/ads.php?md5=621efa8ab55535069fac767af8326c6c">http://libgen.li/ads.php?md5=621efa8ab55535069fac767af8326c6c&lt;/a> (дата обращения: 24.01.2024). – [Электронный ресурс].&lt;/div>
&lt;div class="csl-entry">&lt;a id="citeproc_bib_item_2">&lt;/a>2. Лимончелли, Т.А. Практика системного и сетевого администрирования. Т. 1 / Т.А. Лимончелли, К.Д. Хоган, С.Р. Чейлап. – Санкт-Петербург : Вильямс, 2018. – 1104 сс. – Режим доступа: &lt;a href="https://libgen.st/book/index.php?md5=EAB7431021E05591ECF22205B7FA2D28">https://libgen.st/book/index.php?md5=EAB7431021E05591ECF22205B7FA2D28&lt;/a> (дата обращения: 28.01.2024). – [Электронный ресурс].&lt;/div>
&lt;/div></description></item><item><title>Ванденбринк, Р. (2024): Linux для сетевых инженеров</title><link>https://yamadharma.github.io/ru/post/2024/01/24/vandenbrink_book_linux-networking-professionals_ru/</link><pubDate>Wed, 24 Jan 2024 13:33:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/01/24/vandenbrink_book_linux-networking-professionals_ru/</guid><description>&lt;p>Ванденбринк, Р. (2024): Linux для сетевых инженеров [&lt;a href="#citeproc_bib_item_1">1&lt;/a>; &lt;a href="#citeproc_bib_item_2">2&lt;/a>].&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#резюме">&lt;span class="section-num">1&lt;/span> Резюме&lt;/a>&lt;/li>
&lt;li>&lt;a href="#библиография">&lt;span class="section-num">2&lt;/span> Библиография&lt;/a>&lt;/li>
&lt;li>&lt;a href="#литература">Литература&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="резюме">&lt;span class="section-num">1&lt;/span> Резюме&lt;/h2>
&lt;h2 id="библиография">&lt;span class="section-num">2&lt;/span> Библиография&lt;/h2>
&lt;h2 id="литература">Литература&lt;/h2>
&lt;div class="csl-bib-body">
&lt;div class="csl-entry">&lt;a id="citeproc_bib_item_1">&lt;/a>1. Ванденбринк, Р. Linux для сетевых инженеров : Библиотека программиста / Р. Ванденбринк; А.Г. Гаврилов пер. . – Санкт-Петербург : Питер, 2024. – 496 сс. – Режим доступа: &lt;a href="http://libgen.li/ads.php?md5=621efa8ab55535069fac767af8326c6c">http://libgen.li/ads.php?md5=621efa8ab55535069fac767af8326c6c&lt;/a> (дата обращения: 24.01.2024). – [Электронный ресурс].&lt;/div>
&lt;div class="csl-entry">&lt;a id="citeproc_bib_item_2">&lt;/a>2. VandenBrink, R. Linux for Networking Professionals / R. VandenBrink. – Packt Publishing Ltd., 2021. – 528 сс. – Режим доступа: &lt;a href="http://libgen.li/ads.php?md5=3a2be86ff686b6566194bc95c57b29f4">http://libgen.li/ads.php?md5=3a2be86ff686b6566194bc95c57b29f4&lt;/a> (дата обращения: 27.01.2024). – [Электронный ресурс].&lt;/div>
&lt;/div></description></item><item><title>Sway. Интеграция systemd</title><link>https://yamadharma.github.io/ru/post/2023/12/08/sway-systemd-integration/</link><pubDate>Fri, 08 Dec 2023 19:03:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/12/08/sway-systemd-integration/</guid><description>&lt;p>Интеграция systemd в sway.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-sway-как-сервиса-systemd">&lt;span class="section-num">2&lt;/span> Запуск sway как сервиса systemd&lt;/a>&lt;/li>
&lt;li>&lt;a href="#взаимодействие-sway-с-systemd">&lt;span class="section-num">3&lt;/span> Взаимодействие sway с systemd&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#компоненты">&lt;span class="section-num">3.1&lt;/span> Компоненты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#sway-session-dot-target">&lt;span class="section-num">3.1.1&lt;/span> sway-session.target&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скрипт-session-dot-sh">&lt;span class="section-num">3.1.2&lt;/span> Скрипт session.sh&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-cgroups">&lt;span class="section-num">3.1.3&lt;/span> Настройка cgroups&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-раскладки-клавиатуры">&lt;span class="section-num">3.1.4&lt;/span> Конфигурация раскладки клавиатуры&lt;/a>&lt;/li>
&lt;li>&lt;a href="#автозапуск-xdg-desktop">&lt;span class="section-num">3.1.5&lt;/span> Автозапуск XDG Desktop&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-вручную">&lt;span class="section-num">3.2&lt;/span> Установка вручную&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подготовка">&lt;span class="section-num">3.2.1&lt;/span> Подготовка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#юниты-systemd">&lt;span class="section-num">3.2.2&lt;/span> Юниты systemd&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скрипт-session-dot-sh">&lt;span class="section-num">3.2.3&lt;/span> Скрипт session.sh&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-cgroups">&lt;span class="section-num">3.2.4&lt;/span> Настройка Cgroups&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-раскладки-клавиатуры">&lt;span class="section-num">3.2.5&lt;/span> Конфигурация раскладки клавиатуры&lt;/a>&lt;/li>
&lt;li>&lt;a href="#автозапуск-xdg-desktop">&lt;span class="section-num">3.2.6&lt;/span> Автозапуск XDG Desktop&lt;/a>&lt;/li>
&lt;li>&lt;a href="#завершение">&lt;span class="section-num">3.2.7&lt;/span> Завершение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/h2>
&lt;ul>
&lt;li>Интеграция может подразумевать следующее:
&lt;ul>
&lt;li>Взаимодействие sway с systemd.&lt;/li>
&lt;li>Запуск sway как сервиса systemd.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="запуск-sway-как-сервиса-systemd">&lt;span class="section-num">2&lt;/span> Запуск sway как сервиса systemd&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/xdbob/sway-services" target="_blank" rel="noopener">https://github.com/xdbob/sway-services&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="взаимодействие-sway-с-systemd">&lt;span class="section-num">3&lt;/span> Взаимодействие sway с systemd&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/alebastr/sway-systemd" target="_blank" rel="noopener">https://github.com/alebastr/sway-systemd&lt;/a>&lt;/li>
&lt;li>Несколько направлений интеграции:
&lt;ul>
&lt;li>Экспорт необходимых переменных в среду пользовательского сеанса systemd.&lt;/li>
&lt;li>Задание &lt;code>sway-session.target&lt;/code> для запуска пользовательских служб.&lt;/li>
&lt;li>Обеспечения совместимости с &lt;code>systemd-oomd&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="компоненты">&lt;span class="section-num">3.1&lt;/span> Компоненты&lt;/h3>
&lt;h4 id="sway-session-dot-target">&lt;span class="section-num">3.1.1&lt;/span> sway-session.target&lt;/h4>
&lt;ul>
&lt;li>Systemd запрещает запуск &lt;code>graphical-session.target&lt;/code> напрямую и поощряет использование целевых модулей, специфичных для конкретной среды.&lt;/li>
&lt;li>Пакет определяет &lt;code>sway-session.target&lt;/code>.&lt;/li>
&lt;li>&lt;code>sway-session.target&lt;/code> должен запускаться, когда установлена среда пользовательского сеанса, и останавливаться перед выходом.&lt;/li>
&lt;li>Специальный юнит &lt;code>sway-session-shutdown.target&lt;/code> может быт использован для остановки &lt;code>graphical-session.target&lt;/code> и &lt;code>sway-session.target&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="скрипт-session-dot-sh">&lt;span class="section-num">3.1.2&lt;/span> Скрипт session.sh&lt;/h4>
&lt;ul>
&lt;li>Скрипт &lt;code>session.sh&lt;/code> отвечает за импорт переменных среды &lt;code>systemd&lt;/code> и &lt;code>dbus&lt;/code>.&lt;/li>
&lt;li>Остаётся в фоновом режиме до тех пор, пока &lt;code>sway&lt;/code> не завершит работу, не остановит сеанс и не сбросит переменные для пользовательского сеанса &lt;code>systemd&lt;/code> (это можно отключить, передав &amp;ndash;no-cleanup).&lt;/li>
&lt;li>Сам скрипт не устанавливает никаких переменных, кроме &lt;code>XDG_CURRENT_DESKTOP&lt;/code>, &lt;code>XDG_SESSION_TYPE&lt;/code>.&lt;/li>
&lt;li>Он просто передаёт значения, полученные от &lt;code>sway&lt;/code>.&lt;/li>
&lt;li>Список переменных и имя цели сеанса в настоящее время жестко запрограммированы и могут быть изменены путем редактирования сценария.&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-cgroups">&lt;span class="section-num">3.1.3&lt;/span> Настройка cgroups&lt;/h4>
&lt;ul>
&lt;li>Сценарий &lt;code>assign-cgroups.py&lt;/code> подписывается на новое событие &lt;code>i3 ipc&lt;/code> окна и автоматически создаёт временную единицу области видимости для каждого приложения с графическим интерфейсом, запущенного в той же контрольной группе, что и &lt;code>sway&lt;/code>.&lt;/li>
&lt;li>Сценарий необходим для преодоления ограничения &lt;code>systemd-oomd&lt;/code>: он отслеживает использование ресурсов только контрольными группами и уничтожает всю группу, когда одно приложение ведёт себя неправильно и превышает лимиты использования ресурсов.&lt;/li>
&lt;li>Помещая отдельные приложения в изолированные контрольные группы, мы уменьшаем вероятность того, что &lt;code>oomd killer&lt;/code> случайно завершит сеанс.&lt;/li>
&lt;li>Для работы необходимы следующие пакеты python: &lt;code>dbus-next&lt;/code>, &lt;code>i3ipc&lt;/code>, &lt;code>psutil&lt;/code>, &lt;code>tenacity&lt;/code>, &lt;code>python-xlib&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация-раскладки-клавиатуры">&lt;span class="section-num">3.1.4&lt;/span> Конфигурация раскладки клавиатуры&lt;/h4>
&lt;ul>
&lt;li>Сценарий изучает общесистемную входную конфигурацию из интерфейса systemd, преобразует ее в конфигурацию Sway и применяет ко всем устройствам с типом клавиатура.&lt;/li>
&lt;li>Основной мотивацией для создания этого компонента была возможность применить общесистемные раскладки клавиатуры для &lt;code>sway&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="автозапуск-xdg-desktop">&lt;span class="section-num">3.1.5&lt;/span> Автозапуск XDG Desktop&lt;/h4>
&lt;ul>
&lt;li>&lt;code>xdg-desktop-autostart.target&lt;/code> запускает модули, созданные из XDG-файлов рабочих стола в каталогах автозапуска.&lt;/li>
&lt;/ul>
&lt;h3 id="установка-вручную">&lt;span class="section-num">3.2&lt;/span> Установка вручную&lt;/h3>
&lt;h4 id="подготовка">&lt;span class="section-num">3.2.1&lt;/span> Подготовка&lt;/h4>
&lt;ul>
&lt;li>Клонируйте репозиторий:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/alebastr/sway-systemd.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> sway-systemd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="юниты-systemd">&lt;span class="section-num">3.2.2&lt;/span> Юниты systemd&lt;/h4>
&lt;ul>
&lt;li>Скопируйте &lt;code>units/*.target&lt;/code> в каталог пользовательского модуля &lt;code>systemd&lt;/code> (&lt;code>/usr/lib/systemd/user/&lt;/code>, &lt;code>$XDG_CONFIG_HOME/systemd/user/&lt;/code>, &lt;code>~/.config/systemd/user&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p ~/.config/systemd/user/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp units/*.target ~/.config/systemd/user/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите &lt;code>systemctl --user daemon-reload&lt;/code>, чтобы systemd повторно просканировал служебные файлы.&lt;/li>
&lt;/ul>
&lt;h4 id="скрипт-session-dot-sh">&lt;span class="section-num">3.2.3&lt;/span> Скрипт session.sh&lt;/h4>
&lt;ul>
&lt;li>Добавьте конфигурационный файл &lt;code>~/.config/sway/config.d/10-systemd-session.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">exec ~/.config/sway/scripts/session.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-cgroups">&lt;span class="section-num">3.2.4&lt;/span> Настройка Cgroups&lt;/h4>
&lt;ul>
&lt;li>Установите необходимые пакеты python.
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge dev-python/dbus-next dev-python/i3ipc dev-python/psutil dev-python/tenacity dev-python/python-xlib
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Добавьте конфигурационный файл &lt;code>~/.config/sway/config.d/10-systemd-cgroups.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">exec ~/.config/sway/scripts/assign-cgroups.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация-раскладки-клавиатуры">&lt;span class="section-num">3.2.5&lt;/span> Конфигурация раскладки клавиатуры&lt;/h4>
&lt;ul>
&lt;li>Добавьте конфигурационный файл &lt;code>~/.config/sway/config.d/95-system-keyboard-config.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">exec_always ~/.config/sway/scripts/locale1-xkb-config --oneshot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="автозапуск-xdg-desktop">&lt;span class="section-num">3.2.6&lt;/span> Автозапуск XDG Desktop&lt;/h4>
&lt;ul>
&lt;li>Добавьте конфигурационный файл &lt;code>~/.config/sway/config.d/95-xdg-desktop-autostart.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">exec ~/.config/sway/scripts/wait-sni-ready &amp;amp;&amp;amp; systemctl --user start sway-xdg-autostart.target
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="завершение">&lt;span class="section-num">3.2.7&lt;/span> Завершение&lt;/h4>
&lt;ul>
&lt;li>Перезапустите сеанс &lt;code>sway&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>Расширение git lfs</title><link>https://yamadharma.github.io/ru/post/2023/11/13/git-lfs/</link><pubDate>Mon, 13 Nov 2023 11:52:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/11/13/git-lfs/</guid><description>&lt;p>Расширение для хранения больших бинарных файлов на git.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">2.1&lt;/span> Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#инициализация">&lt;span class="section-num">3.1&lt;/span> Инициализация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подготовка-нового-репозитория">&lt;span class="section-num">3.2&lt;/span> Подготовка нового репозитория&lt;/a>&lt;/li>
&lt;li>&lt;a href="#миграция-старых-репозиториев">&lt;span class="section-num">3.3&lt;/span> Миграция старых репозиториев&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обратная-миграция">&lt;span class="section-num">3.4&lt;/span> Обратная миграция&lt;/a>&lt;/li>
&lt;li>&lt;a href="#мониторинг">&lt;span class="section-num">3.5&lt;/span> Мониторинг&lt;/a>&lt;/li>
&lt;li>&lt;a href="#клонировании-репозитория">&lt;span class="section-num">3.6&lt;/span> Клонировании репозитория&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перенос-на-другой-хостинг">&lt;span class="section-num">3.7&lt;/span> Перенос на другой хостинг&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://git-lfs.com/" target="_blank" rel="noopener">https://git-lfs.com/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/git-lfs/git-lfs/" target="_blank" rel="noopener">https://github.com/git-lfs/git-lfs/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="linux">&lt;span class="section-num">2.1&lt;/span> Linux&lt;/h3>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge dev-vcs/git-lfs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/h2>
&lt;h3 id="инициализация">&lt;span class="section-num">3.1&lt;/span> Инициализация&lt;/h3>
&lt;ul>
&lt;li>Запускается однократно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git lfs install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Прописывает хуки и переменные в файл конфигурации.&lt;/li>
&lt;/ul>
&lt;h3 id="подготовка-нового-репозитория">&lt;span class="section-num">3.2&lt;/span> Подготовка нового репозитория&lt;/h3>
&lt;ul>
&lt;li>После создания нового репозитория запустите в нём:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git lfs install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При этом в репозитории появится специальный хук &lt;em>git&lt;/em> &lt;code>pre-push&lt;/code>, который будет передавать файлы &lt;em>git lfs&lt;/em> на сервер при выполнении команды &lt;code>git push&lt;/code>.&lt;/li>
&lt;li>После инициализации хранилища &lt;em>git lfs&lt;/em> для репозитория нужно указать, какие файлы нужно отслеживать, например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git lfs track &lt;span class="s2">&amp;#34;*.pdf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Информация будет занесена в файл &lt;code>.gitattributes&lt;/code>.&lt;/li>
&lt;li>После любого вызова &lt;code>git-lfs-track&lt;/code> или &lt;code>git-lfs-untrack&lt;/code> необходимо зафиксировать изменения в файле &lt;code>.gitattributes&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git add .gitattributes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;track *.pdf files using Git LFS&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;em>Git lfs&lt;/em> поддерживает те же шаблоны, что и &lt;code>.gitignore&lt;/code>, например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># track all .ogg files in any directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git lfs track &lt;span class="s2">&amp;#34;*.ogg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># track files named music.ogg in any directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git lfs track &lt;span class="s2">&amp;#34;music.ogg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># track all files in the Assets directory and all subdirectories&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git lfs track &lt;span class="s2">&amp;#34;Assets/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># track all files in the Assets directory but *not* subdirectories&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git lfs track &lt;span class="s2">&amp;#34;Assets/*&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># track all ogg files in Assets/Audio&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git lfs track &lt;span class="s2">&amp;#34;Assets/Audio/*.ogg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># track all ogg files in any directory named Music&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git lfs track &lt;span class="s2">&amp;#34;**/Music/*.ogg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># track png files containing &amp;#34;xxhdpi&amp;#34; in their name, in any directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git lfs track &lt;span class="s2">&amp;#34;*xxhdpi*.png&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Шаблоны задаются относительно каталога, из которого выполняется команда &lt;code>git lfs track&lt;/code>.&lt;/li>
&lt;li>В отличие от &lt;code>.gitignore&lt;/code>, &lt;em>git lfs&lt;/em> не поддерживает отрицательные шаблоны.&lt;/li>
&lt;/ul>
&lt;h3 id="миграция-старых-репозиториев">&lt;span class="section-num">3.3&lt;/span> Миграция старых репозиториев&lt;/h3>
&lt;ul>
&lt;li>Если в истории вашего репозитория уже есть большие файлы, они не будут отслеживаться &lt;em>git lfs&lt;/em>.&lt;/li>
&lt;li>Чтобы перенести существующие большие файлы в вашей истории на использование &lt;em>git lfs&lt;/em>, нужно провести миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git lfs migrate import --include&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;*.pdf&amp;#34;&lt;/span> --everything
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Это перезапишет историю и изменит все идентификаторы объектов &lt;em>git&lt;/em> в репозитории.&lt;/li>
&lt;li>После этого придётся склонировать репозиторий повторно.&lt;/li>
&lt;/ul>
&lt;h3 id="обратная-миграция">&lt;span class="section-num">3.4&lt;/span> Обратная миграция&lt;/h3>
&lt;ul>
&lt;li>Репозиторий с &lt;em>git lfs&lt;/em> можно преобразовать обратно в простой репозиторий &lt;em>git&lt;/em>.&lt;/li>
&lt;li>Следите за файлами, которые находятся в lfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git lfs ls-files
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перенесите ссылки из &lt;em>git lfs&lt;/em> в &lt;em>git&lt;/em> (например, для pdf-файлов):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git lfs migrate &lt;span class="nb">export&lt;/span> --include&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;*.pdf&amp;#34;&lt;/span> --everything
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Это перезапишет историю и изменит все идентификаторы объектов &lt;em>git&lt;/em> в вашем репозитории.&lt;/li>
&lt;li>После этого придётся склонировать репозиторий повторно.&lt;/li>
&lt;li>Удалите хуки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git lfs uninstall --worktree
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалить атрибут &lt;code>lfs&lt;/code> из &lt;code>.gitattributes&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -i -e &lt;span class="s2">&amp;#34;s/filter=lfs diff=lfs merge=lfs -text/binary/g&amp;#34;&lt;/span> .gitattributes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="мониторинг">&lt;span class="section-num">3.5&lt;/span> Мониторинг&lt;/h3>
&lt;ul>
&lt;li>Отображение полезной информацию о репозитории:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git lfs env
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Просмотр файлов под управлением &lt;em>git lfs&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git lfs ls-files
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="клонировании-репозитория">&lt;span class="section-num">3.6&lt;/span> Клонировании репозитория&lt;/h3>
&lt;ul>
&lt;li>Команда клонирования репозитория скачивает только файлы размером до 100MB.&lt;/li>
&lt;li>Для получения больших файлов следует использовать команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git lfs pull
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перенос-на-другой-хостинг">&lt;span class="section-num">3.7&lt;/span> Перенос на другой хостинг&lt;/h3>
&lt;ul>
&lt;li>Для переноса репозитория &lt;em>git lfs&lt;/em> на другой хостинг можно использовать комбинацию команд &lt;code>git lfs fetch&lt;/code> и &lt;code>git lfs push&lt;/code> с параметром &lt;code>--all&lt;/code>.&lt;/li>
&lt;li>Например, перенесём репозиторий с сервера github на сервер bitbucket:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># create a bare clone of the GitHub repository&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git clone --bare git@github.com:kannonboy/atlasteroids.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">cd&lt;/span> atlasteroids
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set up named remotes for Bitbucket and GitHub&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git remote add bitbucket git@bitbucket.org:tpettersen/atlasteroids.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git remote add github git@github.com:kannonboy/atlasteroids.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># fetch all Git LFS content from GitHub&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git lfs fetch --all github
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># push all Git and Git LFS content to Bitbucket&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git push --mirror bitbucket
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git lfs push --all bitbucket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Взаимодействие с gitea из командной строки</title><link>https://yamadharma.github.io/ru/post/2023/11/11/interacting-gitea-command-line/</link><pubDate>Sat, 11 Nov 2023 20:31:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/11/11/interacting-gitea-command-line/</guid><description>&lt;ul>
&lt;li>Взаимодействие с gitea из командной строки.&lt;/li>
&lt;li>На данный момент рекомендуется использовать утилиту &lt;code>tea&lt;/code>.&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примеры-использования">&lt;span class="section-num">2&lt;/span> Примеры использования&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подключение-к-серверу">&lt;span class="section-num">2.1&lt;/span> Подключение к серверу&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозитории">&lt;span class="section-num">2.2&lt;/span> Репозитории&lt;/a>&lt;/li>
&lt;li>&lt;a href="#issues">&lt;span class="section-num">2.3&lt;/span> Issues&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://gitea.com/gitea/tea" target="_blank" rel="noopener">https://gitea.com/gitea/tea&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="примеры-использования">&lt;span class="section-num">2&lt;/span> Примеры использования&lt;/h2>
&lt;h3 id="подключение-к-серверу">&lt;span class="section-num">2.1&lt;/span> Подключение к серверу&lt;/h3>
&lt;ul>
&lt;li>Вначале необходимо подключиться к серверу Gitea.&lt;/li>
&lt;li>Войти на сервер Gitea:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tea login add --name &lt;span class="s2">&amp;#34;Условное имя подключения&amp;#34;&lt;/span> --url &lt;span class="s2">&amp;#34;Server url&amp;#34;&lt;/span> --token &lt;span class="s2">&amp;#34;token&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно установить подключение как подключение по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tea login default &lt;span class="s2">&amp;#34;Условное имя подключения&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="репозитории">&lt;span class="section-num">2.2&lt;/span> Репозитории&lt;/h3>
&lt;ul>
&lt;li>Показать все репозитории:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tea repos ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создать репозиторий:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tea repo create --name &lt;span class="s2">&amp;#34;Название репозитория&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создать частный репозиторий:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tea repo create --name &lt;span class="s2">&amp;#34;Название репозитория&amp;#34;&lt;/span> --private
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создать репозиторий для организации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tea repo create --name &lt;span class="s2">&amp;#34;Название репозитория&amp;#34;&lt;/span> --private --owner имя_организации
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="issues">&lt;span class="section-num">2.3&lt;/span> Issues&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Отображение списка issues:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tea issues ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Отобразить список issues для конкретного репозитория:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tea issues ls --repo &lt;span class="s2">&amp;#34;repository&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Создать новую задачу:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tea issues create --title &lt;span class="s2">&amp;#34;title&amp;#34;&lt;/span> --body &lt;span class="s2">&amp;#34;body&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Отобразить список открытых pull-запросов:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tea pulls ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Открыть текущий репозиторий в броузере:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tea open
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Загрузочный сервер PXE</title><link>https://yamadharma.github.io/ru/post/2023/11/08/pxe-server/</link><pubDate>Wed, 08 Nov 2023 14:42:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/11/08/pxe-server/</guid><description>&lt;p>Установка загрузочного сервера PXE.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-настройка">&lt;span class="section-num">1&lt;/span> Общая настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сетевые-сервисы">&lt;span class="section-num">2&lt;/span> Сетевые сервисы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#tftp">&lt;span class="section-num">2.1&lt;/span> tftp&lt;/a>&lt;/li>
&lt;li>&lt;a href="#web-сервер">&lt;span class="section-num">2.2&lt;/span> web-сервер&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">2.2.1&lt;/span> Конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#selinux">&lt;span class="section-num">2.2.2&lt;/span> SELinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск">&lt;span class="section-num">2.2.3&lt;/span> Запуск&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройки-dhcp-сервера">&lt;span class="section-num">2.3&lt;/span> Настройки DHCP-сервера&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройки-сервера-isc-dhcp">&lt;span class="section-num">2.3.1&lt;/span> Настройки сервера ISC DHCP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройки-сервера-isc-kea-dhcp">&lt;span class="section-num">2.3.2&lt;/span> Настройки сервера ISC Kea DHCP&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#сетевые-загрузчики">&lt;span class="section-num">3&lt;/span> Сетевые загрузчики&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pxelinux">&lt;span class="section-num">3.1&lt;/span> pxelinux&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">3.1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3.1.2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройки-dhcp-сервера">&lt;span class="section-num">3.1.3&lt;/span> Настройки DHCP-сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-конфигурации-pxelinux">&lt;span class="section-num">3.1.4&lt;/span> Файл конфигурации pxelinux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#ipxe">&lt;span class="section-num">3.2&lt;/span> ipxe&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройки-dhcp-сервера">&lt;span class="section-num">3.2.1&lt;/span> Настройки DHCP-сервера&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#grub2">&lt;span class="section-num">3.3&lt;/span> grub2&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3.3.1&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройки-dhcp-сервера">&lt;span class="section-num">3.3.2&lt;/span> Настройки DHCP-сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-конфигурации-grub">&lt;span class="section-num">3.3.3&lt;/span> Файл конфигурации grub&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#приложения">&lt;span class="section-num">4&lt;/span> Приложения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#memtest86-plus">&lt;span class="section-num">4.1&lt;/span> Memtest86+&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pxelinux">&lt;span class="section-num">4.1.1&lt;/span> pxelinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#grub">&lt;span class="section-num">4.1.2&lt;/span> grub&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#дистрибутивы-linux">&lt;span class="section-num">5&lt;/span> Дистрибутивы Linux&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#fedora">&lt;span class="section-num">5.1&lt;/span> Fedora&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#grub">&lt;span class="section-num">5.1.1&lt;/span> Grub&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-настройка">&lt;span class="section-num">1&lt;/span> Общая настройка&lt;/h2>
&lt;ul>
&lt;li>Установите сервер Linux (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="сетевые-сервисы">&lt;span class="section-num">2&lt;/span> Сетевые сервисы&lt;/h2>
&lt;h3 id="tftp">&lt;span class="section-num">2.1&lt;/span> tftp&lt;/h3>
&lt;ul>
&lt;li>Установите сервер tftp:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install tftp-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройте брандмауэр:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-service&lt;span class="o">=&lt;/span>tftp --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активируйте сервис:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now tftp.socket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="web-сервер">&lt;span class="section-num">2.2&lt;/span> web-сервер&lt;/h3>
&lt;ul>
&lt;li>Для снижения нагрузки на tftp будем загружать образы по http.&lt;/li>
&lt;li>Установим сервер nginx:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройте брандмауэр:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-service&lt;span class="o">=&lt;/span>http --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация">&lt;span class="section-num">2.2.1&lt;/span> Конфигурация&lt;/h4>
&lt;ul>
&lt;li>Создадим файл конфигурации &lt;code>/etc/nginx/conf.d/pxe.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">listen&lt;/span> &lt;span class="mi">80&lt;/span> &lt;span class="n">default_server&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">listen&lt;/span> &lt;span class="p">[::]:&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">root&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tftpboot&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server_name&lt;/span> &lt;span class="n">pxe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">location&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">index&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">htm&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">autoindex&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Load configuration files for the default server block.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/*.&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="selinux">&lt;span class="section-num">2.2.2&lt;/span> SELinux&lt;/h4>
&lt;ul>
&lt;li>Зададим переключатели SELinux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setsebool -P httpd_serve_cobbler_files &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool httpd_serve_cobbler_files &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим файл с описанием политики &lt;code>nginx-tftp.te&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">module&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tftp&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">require&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="n">httpd_t&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="n">cobbler_var_lib_t&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="n">tftpdir_rw_t&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">class&lt;/span> &lt;span class="n">dir&lt;/span> &lt;span class="n">read&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">class&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">getattr&lt;/span> &lt;span class="n">open&lt;/span> &lt;span class="n">read&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">class&lt;/span> &lt;span class="n">lnk_file&lt;/span> &lt;span class="n">read&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#============= httpd_t ==============&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!!!! This avc is allowed in the current policy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">allow&lt;/span> &lt;span class="n">httpd_t&lt;/span> &lt;span class="n">cobbler_var_lib_t&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">dir&lt;/span> &lt;span class="n">read&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!!!! This avc is allowed in the current policy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">allow&lt;/span> &lt;span class="n">httpd_t&lt;/span> &lt;span class="n">tftpdir_rw_t&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">dir&lt;/span> &lt;span class="n">read&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!!!! This avc is allowed in the current policy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">allow&lt;/span> &lt;span class="n">httpd_t&lt;/span> &lt;span class="n">tftpdir_rw_t&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">getattr&lt;/span> &lt;span class="n">open&lt;/span> &lt;span class="n">read&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">allow&lt;/span> &lt;span class="n">httpd_t&lt;/span> &lt;span class="n">tftpdir_rw_t&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">lnk_file&lt;/span> &lt;span class="n">read&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Применим его:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">semodule -i nginx-tftp.te
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="запуск">&lt;span class="section-num">2.2.3&lt;/span> Запуск&lt;/h4>
&lt;ul>
&lt;li>Запустим nginx:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now nginx.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройки-dhcp-сервера">&lt;span class="section-num">2.3&lt;/span> Настройки DHCP-сервера&lt;/h3>
&lt;h4 id="настройки-сервера-isc-dhcp">&lt;span class="section-num">2.3.1&lt;/span> Настройки сервера ISC DHCP&lt;/h4>
&lt;ul>
&lt;li>Настройки для сервера ISC DHCP.&lt;/li>
&lt;li>Файл конфигурации &lt;code>/etc/dhcp/dhcpd.conf&lt;/code>.&lt;/li>
&lt;li>Настройка основных опций:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">option pxe-system-type code 93 = unsigned integer 16;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option rfc3442-classless-static-routes code 121 = array of integer 8;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option ms-classless-static-routes code 249 = array of integer 8;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option space pxelinux;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option pxelinux.magic code 208 = string;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option pxelinux.configfile code 209 = text;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option pxelinux.pathprefix code 210 = text;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option pxelinux.reboottime code 211 = unsigned integer 32;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option architecture-type code 93 = unsigned integer 16;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option pxelinux.mtftp-ip code 1 = ip-address;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option pxelinux.mtftp-cport code 2 = unsigned integer 16;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option pxelinux.mtftp-sport code 3 = unsigned integer 16;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option pxelinux.mtftp-tmout code 4 = unsigned integer 8;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option pxelinux.mtftp-delay code 5 = unsigned integer 8;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Необходимо также настроить &lt;code>next_server&lt;/code>, который должен указывать на tftp-сервер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">next-server 10.100.0.1&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройки-сервера-isc-kea-dhcp">&lt;span class="section-num">2.3.2&lt;/span> Настройки сервера ISC Kea DHCP&lt;/h4>
&lt;ul>
&lt;li>Настройки для сервера ISC Kea DHCP.&lt;/li>
&lt;li>Файл конфигурации &lt;code>/etc/kea/kea-dhcp4.conf&lt;/code>.&lt;/li>
&lt;li>Необходимо также настроить &lt;code>next_server&lt;/code>, который должен указывать на tftp-сервер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Dhcp4&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;next-server&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;10.100.0.1&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="сетевые-загрузчики">&lt;span class="section-num">3&lt;/span> Сетевые загрузчики&lt;/h2>
&lt;ul>
&lt;li>Возможно использовать любой сетевой загрузчик:
&lt;ul>
&lt;li>pxelinux&lt;/li>
&lt;li>ipxe&lt;/li>
&lt;li>grub2&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="pxelinux">&lt;span class="section-num">3.1&lt;/span> pxelinux&lt;/h3>
&lt;h4 id="общая-информация">&lt;span class="section-num">3.1.1&lt;/span> Общая информация&lt;/h4>
&lt;ul>
&lt;li>Часть загрузчика syslinux.&lt;/li>
&lt;li>Сайт: &lt;a href="https://wiki.syslinux.org/wiki/index.php?title=PXELINUX" target="_blank" rel="noopener">https://wiki.syslinux.org/wiki/index.php?title=PXELINUX&lt;/a>&lt;/li>
&lt;li>ftp-сайт: &lt;a href="https://mirrors.edge.kernel.org/pub/linux/utils/boot/syslinux/" target="_blank" rel="noopener">https://mirrors.edge.kernel.org/pub/linux/utils/boot/syslinux/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="установка">&lt;span class="section-num">3.1.2&lt;/span> Установка&lt;/h4>
&lt;ul>
&lt;li>Скачаем файлы для pxelinux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://mirrors.edge.kernel.org/pub/linux/utils/boot/syslinux/Testing/6.04/syslinux-6.04-pre1.tar.xz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar xJvf syslinux-6.04-pre1.tar.xz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируем файлы в наш корень tftp:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /var/lib/tftpboot/boot/pxelinux/&lt;span class="o">{&lt;/span>bios,efi64,efi32&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find /tmp/syslinux-6.04-pre1/bios -regex &lt;span class="s1">&amp;#39;.*\(c32\|0\)$&amp;#39;&lt;/span> -exec cp &lt;span class="s1">&amp;#39;{}&amp;#39;&lt;/span> /var/lib/tftpboot/boot/pxelinux/bios/ &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find /tmp/syslinux-6.04-pre1/bios -name &lt;span class="s2">&amp;#34;memdisk&amp;#34;&lt;/span> -type f -exec cp &lt;span class="s1">&amp;#39;{}&amp;#39;&lt;/span> /var/lib/tftpboot/boot/pxelinux/bios/ &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find /tmp/syslinux-6.04-pre1/efi32 -regex &lt;span class="s1">&amp;#39;.*\(c32\|efi\)$&amp;#39;&lt;/span> -exec cp &lt;span class="s1">&amp;#39;{}&amp;#39;&lt;/span> /var/lib/tftpboot/boot/pxelinux/efi32 &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find /tmp/syslinux-6.04-pre1/efi64 -regex &lt;span class="s1">&amp;#39;.*\(c32\|efi\|e64\|elf\|lnx\)$&amp;#39;&lt;/span> -exec cp &lt;span class="s1">&amp;#39;{}&amp;#39;&lt;/span> /var/lib/tftpboot/boot/pxelinux/efi64 &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройки-dhcp-сервера">&lt;span class="section-num">3.1.3&lt;/span> Настройки DHCP-сервера&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Настройки сервера ISC DHCP&lt;/p>
&lt;ul>
&lt;li>Настройки для сервера ISC DHCP.&lt;/li>
&lt;li>Файл конфигурации &lt;code>/etc/dhcp/dhcpd.conf&lt;/code>.&lt;/li>
&lt;li>Настройка файлов загрузки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">option architecture-type code &lt;span class="nv">93&lt;/span> &lt;span class="o">=&lt;/span> unsigned integer 16&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">class &lt;span class="s2">&amp;#34;pxeclients&amp;#34;&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> match &lt;span class="k">if&lt;/span> substring &lt;span class="o">(&lt;/span>option vendor-class-identifier, 0, 9&lt;span class="o">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;PXEClient&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> option architecture-type &lt;span class="o">=&lt;/span> 00:00 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;/boot/pxelinux/bios/lpxelinux.0&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span> elsif option architecture-type &lt;span class="o">=&lt;/span> 00:09 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;/boot/pxelinux/efi64/syslinux.efi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span> elsif option architecture-type &lt;span class="o">=&lt;/span> 00:07 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;/boot/pxelinux/efi64/syslinux.efi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span> elsif option architecture-type &lt;span class="o">=&lt;/span> 00:06 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;/boot/pxelinux/efi32/syslinux.efi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;/boot/pxelinux/bios/lpxelinux.0&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Настройки сервера ISC Kea DHCP&lt;/p>
&lt;ul>
&lt;li>Настройки для сервера ISC Kea DHCP.&lt;/li>
&lt;li>Файл конфигурации &lt;code>/etc/kea/kea-dhcp4.conf&lt;/code>.&lt;/li>
&lt;li>Настройка файлов загрузки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Dhcp4&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;client-classes&amp;#34;&lt;/span>: &lt;span class="o">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;pxe-legacy&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;option[93].hex == 0x0000&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;boot-file-name&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/boot/pxelinux/bios/lpxelinux.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;pxe-uefi&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;option[93].hex == 0x0009 or option[93].hex == 0x0007&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;boot-file-name&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/boot/pxelinux/efi64/syslinux.efi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="файл-конфигурации-pxelinux">&lt;span class="section-num">3.1.4&lt;/span> Файл конфигурации pxelinux&lt;/h4>
&lt;ul>
&lt;li>Создать каталог &lt;code>/var/lib/tftpboot/boot/pxelinux/pxelinux.cfg/&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /var/lib/tftpboot/boot/pxelinux/pxelinux.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим файл &lt;code>/var/lib/tftpboot/boot/pxelinux/pxelinux.cfg/default&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># -*- mode:conf -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default menu.c32
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ontimeout chain.c32 hd0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">timeout 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prompt 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">implicit 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOESCAPE 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALLOWOPTIONS 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">say Enter command line for bootup:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">menu title Syslinux Bootup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">label disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">menu label ^Boot from local drive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">menu default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kernel chain.c32
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> append hd0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим символические ссылки для разного типа загрузки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -s /var/lib/tftpboot/boot/pxelinux/pxelinux.cfg /var/lib/tftpboot/boot/pxelinux/bios/pxelinux.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s /var/lib/tftpboot/boot/pxelinux/pxelinux.cfg /var/lib/tftpboot/boot/pxelinux/efi64/pxelinux.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s /var/lib/tftpboot/boot/pxelinux/pxelinux.cfg /var/lib/tftpboot/boot/pxelinux/efi32/pxelinux.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="ipxe">&lt;span class="section-num">3.2&lt;/span> ipxe&lt;/h3>
&lt;h4 id="настройки-dhcp-сервера">&lt;span class="section-num">3.2.1&lt;/span> Настройки DHCP-сервера&lt;/h4>
&lt;ul>
&lt;li>Настройки для сервера ISC DHCP.&lt;/li>
&lt;li>Файл конфигурации &lt;code>/etc/dhcp/dhcpd.conf&lt;/code>.&lt;/li>
&lt;li>Настройка файлов загрузки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">option architecture-type code &lt;span class="nv">93&lt;/span> &lt;span class="o">=&lt;/span> unsigned integer 16&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">class &lt;span class="s2">&amp;#34;pxeclients&amp;#34;&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> match &lt;span class="k">if&lt;/span> substring &lt;span class="o">(&lt;/span>option vendor-class-identifier, 0, 9&lt;span class="o">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;PXEClient&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> option architecture-type !&lt;span class="o">=&lt;/span> 00:00 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;/boot/ipxe/ipxe.efi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;/boot/ipxe/undionly.kpxe&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="grub2">&lt;span class="section-num">3.3&lt;/span> grub2&lt;/h3>
&lt;h4 id="установка">&lt;span class="section-num">3.3.1&lt;/span> Установка&lt;/h4>
&lt;ul>
&lt;li>Установим необходимые пакеты для grub2:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install grub2-efi-x64-modules grub2-tools-extra grub2-pc-modules
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим файлы в каталог tftpd:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grub2-mknetdir --net-directory&lt;span class="o">=&lt;/span>/var/lib/tftpboot/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">restorecon -vR /var/lib/tftpboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно также внедрить все модули в загружаемый файл (скорее, для отладки):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">grub2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mkimage&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">O&lt;/span> &lt;span class="n">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">efi&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tftpboot&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">grub2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">efi&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">efi&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">prefix&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tftpboot&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">grub2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">efi&lt;/span>&lt;span class="o">/*.&lt;/span>&lt;span class="n">mod&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройки-dhcp-сервера">&lt;span class="section-num">3.3.2&lt;/span> Настройки DHCP-сервера&lt;/h4>
&lt;ul>
&lt;li>Настройки для сервера ISC DHCP.&lt;/li>
&lt;li>Файл конфигурации &lt;code>/etc/dhcp/dhcpd.conf&lt;/code>.&lt;/li>
&lt;li>Настройка файлов загрузки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">option architecture-type code &lt;span class="nv">93&lt;/span> &lt;span class="o">=&lt;/span> unsigned integer 16&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">class &lt;span class="s2">&amp;#34;pxeclients&amp;#34;&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> match &lt;span class="k">if&lt;/span> substring &lt;span class="o">(&lt;/span>option vendor-class-identifier, 0, 9&lt;span class="o">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;PXEClient&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> option architecture-type &lt;span class="o">=&lt;/span> 00:07 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;boot/grub2/x86_64-efi/core.efi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> option architecture-type &lt;span class="o">=&lt;/span> 00:08 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;boot/grub2/x86_64-efi/core.efi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> option architecture-type &lt;span class="o">=&lt;/span> 00:09 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;boot/grub2/x86_64-efi/core.efi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> option architecture-type &lt;span class="o">=&lt;/span> 00:0a &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ArmHFP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;boot/grub2/armv7a-efi/core.efi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> option architecture-type &lt;span class="o">=&lt;/span> 00:0b &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># aarch64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;boot/grub2/aarch64-efi/core.efi&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># BIOS boot&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename &lt;span class="s2">&amp;#34;boot/grub2/i386-pc/core.0&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="файл-конфигурации-grub">&lt;span class="section-num">3.3.3&lt;/span> Файл конфигурации grub&lt;/h4>
&lt;ul>
&lt;li>Создадим основной файл конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /var/lib/tftpboot/boot/grub2/grub.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим в нём базовую конфигурацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">set default=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set timeout=60
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">menuentry &amp;#39;Local Boot&amp;#39; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим символическую ссылку на этот файл в каждом каталоге, содержащим &lt;code>core.*&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /var/lib/tftpboot/boot/grub2/x86_64-efi&lt;span class="p">;&lt;/span> ln -snf ../grub.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /var/lib/tftpboot/boot/grub2/i386-pc&lt;span class="p">;&lt;/span> ln -snf ../grub.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно добавить дополнительные пункты (скорее для забавы):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">menuentry &amp;#39;EFI Firmware System Setup&amp;#39; $menuentry_id_option &amp;#39;uefi-firmware&amp;#39; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fwsetup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">menuentry &amp;#39;Reboot&amp;#39; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reboot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">menuentry &amp;#39;Shutdown&amp;#39; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> halt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="приложения">&lt;span class="section-num">4&lt;/span> Приложения&lt;/h2>
&lt;h3 id="memtest86-plus">&lt;span class="section-num">4.1&lt;/span> Memtest86+&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://memtest.org/" target="_blank" rel="noopener">https://memtest.org/&lt;/a>&lt;/li>
&lt;li>Скачайте необходимую версию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /var/lib/tftpboot/utils/memtest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /var/lib/tftpboot/utils/memtest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://memtest.org/download/v6.20/mt86plus_6.20.binaries.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">unzip mt86plus_6.20.binaries.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm mt86plus_6.20.binaries.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="pxelinux">&lt;span class="section-num">4.1.1&lt;/span> pxelinux&lt;/h4>
&lt;ul>
&lt;li>Конфигурация для загрузки memtest86+ будет следующей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">label memtest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">menu label Memory test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kernel utils/memtest/memtest64.bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="grub">&lt;span class="section-num">4.1.2&lt;/span> grub&lt;/h4>
&lt;ul>
&lt;li>Конфигурация для загрузки memtest86+ будет следующей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">menuentry &lt;span class="s2">&amp;#34;Memory test&amp;#34;&lt;/span> --class tools &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">grub_platform&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> pc &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> linux &lt;span class="o">(&lt;/span>http&lt;span class="o">)&lt;/span>/utils/memtest/memtest64.bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> linuxefi &lt;span class="o">(&lt;/span>http&lt;span class="o">)&lt;/span>/utils/memtest/memtest64.efi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="дистрибутивы-linux">&lt;span class="section-num">5&lt;/span> Дистрибутивы Linux&lt;/h2>
&lt;h3 id="fedora">&lt;span class="section-num">5.1&lt;/span> Fedora&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://fedoraproject.org/" target="_blank" rel="noopener">https://fedoraproject.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="grub">&lt;span class="section-num">5.1.1&lt;/span> Grub&lt;/h4>
&lt;ul>
&lt;li>Файл конфигурации будет следующим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">submenu &amp;#39;Fedora Linux&amp;#39; --class fedora --class gnu-linux --class gnu --class os {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> menuentry &amp;#39;Install Fedora Linux (EFI)&amp;#39; --class fedora --class gnu-linux --class gnu --class os {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> linuxefi fedora-x86_64/vmlinuz inst.repo=http://dl.fedoraproject.org/pub/fedora/linux/releases/39/Everything/x86_64/os inst.stage2=http://dl.fedoraproject.org/pub/fedora/linux/releases/39/Everything/x86_64/os ip=dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> initrdefi fedora-x86_64/initrd.img
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> menuentry &amp;#39;Install Fedora Linux (Classic)&amp;#39; --class fedora --class gnu-linux --class gnu --class os {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> linux16 fedora-x86_64/vmlinuz inst.repo=http://dl.fedoraproject.org/pub/fedora/linux/releases/39/Everything/x86_64/os/ inst.stage2=http://dl.fedoraproject.org/pub/fedora/linux/releases/39/Everything/x86_64/os/ ip=dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> initrd16 fedora-x86_64/initrd.img
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> menuentry &amp;#39;Install Fedora Linux (ARM)&amp;#39; --class fedora --class gnu-linux --class gnu --class os {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> linux fedora-aarch64/vmlinuz inst.repo=http://dl.fedoraproject.org/pub/fedora/linux/releases/39/Everything/aarch64/os/ inst.stage2=http://dl.fedoraproject.org/pub/fedora/linux/releases/39/Everything/aarch64/os/ ip=dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> initrd fedora-aarch64/initrd.img
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Миграция с bitbucket на gitea</title><link>https://yamadharma.github.io/ru/post/2023/10/31/migration-bitbucket-gitea/</link><pubDate>Tue, 31 Oct 2023 11:23:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/31/migration-bitbucket-gitea/</guid><description>&lt;p>Миграция с bitbucket на gitea.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#пролегомены">&lt;span class="section-num">1&lt;/span> Пролегомены&lt;/a>&lt;/li>
&lt;li>&lt;a href="#необходимая-информация-для-миграции">&lt;span class="section-num">2&lt;/span> Необходимая информация для миграции&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gitea">&lt;span class="section-num">2.1&lt;/span> Gitea&lt;/a>&lt;/li>
&lt;li>&lt;a href="#bitbucket">&lt;span class="section-num">2.2&lt;/span> Bitbucket&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#варианты-миграции">&lt;span class="section-num">3&lt;/span> Варианты миграции&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gickup">&lt;span class="section-num">3.1&lt;/span> gickup&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проблемы">&lt;span class="section-num">3.1.1&lt;/span> Проблемы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#bitbuckettogitea">&lt;span class="section-num">3.2&lt;/span> BitbucketToGitea&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проблема">&lt;span class="section-num">3.2.1&lt;/span> Проблема&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#реализация-миграции">&lt;span class="section-num">4&lt;/span> Реализация миграции&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозитории-у-пользователей">&lt;span class="section-num">5&lt;/span> Репозитории у пользователей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="пролегомены">&lt;span class="section-num">1&lt;/span> Пролегомены&lt;/h2>
&lt;ul>
&lt;li>В связи с тем, что Bitbucket начал блокировать учётные записи, было принято решение перейти на другой хостинг.&lt;/li>
&lt;li>Поскольку однозначный выбор хостинга не удалось сделать, было решено:
&lt;ul>
&lt;li>поднять свой хостинг git (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/10/29/install-gitea/">Установка gitea&lt;/a>);&lt;/li>
&lt;li>перенести все репозитории;&lt;/li>
&lt;li>перенести или пересоздать команды.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="необходимая-информация-для-миграции">&lt;span class="section-num">2&lt;/span> Необходимая информация для миграции&lt;/h2>
&lt;h3 id="gitea">&lt;span class="section-num">2.1&lt;/span> Gitea&lt;/h3>
&lt;ul>
&lt;li>Адрес экземпляра Gitea
&lt;ul>
&lt;li>Например: &lt;a href="http://hub.example.com" target="_blank" rel="noopener">http://hub.example.com&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Токен аутентификации
&lt;ul>
&lt;li>&lt;a href="http://hub.example.com/user/settings/applications" target="_blank" rel="noopener">http://hub.example.com/user/settings/applications&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="bitbucket">&lt;span class="section-num">2.2&lt;/span> Bitbucket&lt;/h3>
&lt;ul>
&lt;li>Имя пользователя BitBucket:
&lt;ul>
&lt;li>это не почтовый адрес, по которому вы подключаетесь к BitBucket, а заданное в настройках имя;&lt;/li>
&lt;li>&lt;a href="https://bitbucket.org/account/settings/" target="_blank" rel="noopener">https://bitbucket.org/account/settings/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пароль BitBucket:
&lt;ul>
&lt;li>лучше использовать не пароль подключения к BitBucket, а создать для этого токен:&lt;/li>
&lt;li>&lt;a href="https://bitbucket.org/account/settings/app-passwords/" target="_blank" rel="noopener">https://bitbucket.org/account/settings/app-passwords/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Название группы, если вы переносите команду.&lt;/li>
&lt;/ul>
&lt;h2 id="варианты-миграции">&lt;span class="section-num">3&lt;/span> Варианты миграции&lt;/h2>
&lt;h3 id="gickup">&lt;span class="section-num">3.1&lt;/span> gickup&lt;/h3>
&lt;ul>
&lt;li>Универсальный фреймворк по переносу git-репозиториев.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/cooperspencer/gickup" target="_blank" rel="noopener">https://github.com/cooperspencer/gickup&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://cooperspencer.github.io/gickup-documentation/" target="_blank" rel="noopener">https://cooperspencer.github.io/gickup-documentation/&lt;/a>&lt;/li>
&lt;li>Пример файла конфигурации: &lt;a href="https://github.com/cooperspencer/gickup/blob/main/conf.example.yml" target="_blank" rel="noopener">https://github.com/cooperspencer/gickup/blob/main/conf.example.yml&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="проблемы">&lt;span class="section-num">3.1.1&lt;/span> Проблемы&lt;/h4>
&lt;ul>
&lt;li>Репозитории просто не скачивались.&lt;/li>
&lt;li>Хотя программы писала, что всё сделано.&lt;/li>
&lt;/ul>
&lt;h3 id="bitbuckettogitea">&lt;span class="section-num">3.2&lt;/span> BitbucketToGitea&lt;/h3>
&lt;ul>
&lt;li>Скрипт по переносу репозиториев BitBucket в Gitea.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/sIspravnikov/BitbucketToGitea" target="_blank" rel="noopener">https://github.com/sIspravnikov/BitbucketToGitea&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="проблема">&lt;span class="section-num">3.2.1&lt;/span> Проблема&lt;/h4>
&lt;ul>
&lt;li>Никак не удалось устранить проблемы при авторизации в BitBucket.&lt;/li>
&lt;/ul>
&lt;h2 id="реализация-миграции">&lt;span class="section-num">4&lt;/span> Реализация миграции&lt;/h2>
&lt;ul>
&lt;li>Использовал набор скриптов.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/dstapp/bitbucket-to-gitea-migrator" target="_blank" rel="noopener">https://github.com/dstapp/bitbucket-to-gitea-migrator&lt;/a>&lt;/li>
&lt;li>Скачайте репозиторий на свой компьютер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/dprandzioch/bitbucket-to-gitea-migrator.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте конфигурационный файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> bitbucket-to-gogs-migrator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp config.json.example config.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;ul>
&lt;li>Отредактируйте файл &lt;code>config.json&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;base&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;check_exists&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;gogs&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;URL-адрес экземпляра Gitea в формате hub.example.com&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;protocol&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;http&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;token&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;токен аутентификации Gitea&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;owner_id&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;bitbucket&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Имя пользователя BitBucket&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Пароль BitBucket&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;team&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите необходимые пакеты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">npm install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проведите миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">npm start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="репозитории-у-пользователей">&lt;span class="section-num">5&lt;/span> Репозитории у пользователей&lt;/h2>
&lt;ul>
&lt;li>Для того, чтобы переключить репозитории пользователей (из команды) на новый хостинг, добавил в репозитории скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">change_remote&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">remote_orig&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>git remote get-url --all origin&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$remote_orig&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> grep bitbucket.org &lt;span class="p">&amp;amp;&lt;/span>&amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$?&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Replace origin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git remote add bitbucket &lt;span class="nv">$remote_orig&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git remote set-url origin &lt;span class="si">${&lt;/span>&lt;span class="nv">remote_orig&lt;/span>&lt;span class="p">/bitbucket.org/hub.example.com&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">change_remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git remote get-url --all bitbucket &lt;span class="p">&amp;amp;&lt;/span>&amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$?&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">is_bitbucket&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[[&lt;/span> &lt;span class="nv">$is_bitbucket&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> git pull bitbucket master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git pull
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -am &lt;span class="s2">&amp;#34;chore(main): &lt;/span>&lt;span class="k">$(&lt;/span>date&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push --all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[[&lt;/span> &lt;span class="nv">$is_bitbucket&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> git push bitbucket
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Сжатие git&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$1&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;compress&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> -d .git &lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> find . -type f -name &lt;span class="s2">&amp;#34;*Конфликтующая*&amp;#34;&lt;/span> -delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> find . -type f -name &lt;span class="s2">&amp;#34;*conflicted*&amp;#34;&lt;/span> -delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> find . -depth -path ./.stversions -prune -o -name &lt;span class="s2">&amp;#34;.syncthing.*.tmp&amp;#34;&lt;/span> -delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git fsck
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git gc --prune&lt;span class="o">=&lt;/span>now
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git gc --aggressive --prune&lt;span class="o">=&lt;/span>now
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>fail2ban. Основные настройки</title><link>https://yamadharma.github.io/ru/post/2023/10/30/fail2ban-basic-settings/</link><pubDate>Mon, 30 Oct 2023 11:01:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/30/fail2ban-basic-settings/</guid><description>&lt;p>fail2ban. Основные настройки.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общие-настройки">&lt;span class="section-num">2.1&lt;/span> Общие настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#время-блокирования">&lt;span class="section-num">2.2&lt;/span> Время блокирования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#игнорирование-избранных-ip-адресов">&lt;span class="section-num">2.3&lt;/span> Игнорирование избранных ip-адресов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#защита-ssh">&lt;span class="section-num">2.4&lt;/span> Защита ssh&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка-для-proxmox">&lt;span class="section-num">3&lt;/span> Настройка для Proxmox&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#время-блокирования">&lt;span class="section-num">3.1&lt;/span> Время блокирования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#игнорирование-избранных-ip-адресов">&lt;span class="section-num">3.2&lt;/span> Игнорирование избранных ip-адресов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#защита-ssh">&lt;span class="section-num">3.3&lt;/span> Защита ssh&lt;/a>&lt;/li>
&lt;li>&lt;a href="#защита-proxmox-web-интерфейс">&lt;span class="section-num">3.4&lt;/span> Защита proxmox web-интерфейс&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#основные-операции">&lt;span class="section-num">4&lt;/span> Основные операции&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#удалить-все-записи-из-списков-блокировки">&lt;span class="section-num">4.1&lt;/span> Удалить все записи из списков блокировки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/fail2ban/fail2ban" target="_blank" rel="noopener">https://github.com/fail2ban/fail2ban&lt;/a>&lt;/li>
&lt;li>Fail2Ban сканирует файлы журналов &lt;code>/var/log/auth.log&lt;/code> и блокирует IP-адреса, совершающие слишком много неудачных попыток входа в систему.&lt;/li>
&lt;li>Это достигается путем обновления правил системного брандмауэра, запрещающих новые подключения с этих IP-адресов в течение настраиваемого периода времени.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/h2>
&lt;h3 id="общие-настройки">&lt;span class="section-num">2.1&lt;/span> Общие настройки&lt;/h3>
&lt;h3 id="время-блокирования">&lt;span class="section-num">2.2&lt;/span> Время блокирования&lt;/h3>
&lt;ul>
&lt;li>Создайте файл локальной конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /etc/fail2ban/jail.d/50-default.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В файле &lt;code>/etc/fail2ban/jail.d/50-default.conf&lt;/code> задайте время блокирования хостов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[DEFAULT]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bantime = 360000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="игнорирование-избранных-ip-адресов">&lt;span class="section-num">2.3&lt;/span> Игнорирование избранных ip-адресов&lt;/h3>
&lt;ul>
&lt;li>Добавим игнорирование избранных ip-адресов в файле &lt;code>/etc/fail2ban/jail.d/50-default.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># &amp;#34;ignoreself&amp;#34; specifies whether the local resp. own IP addresses should be ignored
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># (default is true). Fail2ban will not ban a host which matches such addresses.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ignoreself = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># &amp;#34;ignoreip&amp;#34; can be a list of IP addresses, CIDR masks or DNS hosts. Fail2ban
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># will not ban a host which matches an address in this list. Several addresses
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># can be defined using space (and/or comma) separator.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ignoreip = 127.0.0.1/8 ::1 10.0.0.0/8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Диапазон &lt;code>10.0.0.0/8&lt;/code> добавлен для примера.&lt;/li>
&lt;/ul>
&lt;h3 id="защита-ssh">&lt;span class="section-num">2.4&lt;/span> Защита ssh&lt;/h3>
&lt;ul>
&lt;li>Создадим файл для локальной конфигурации ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /etc/fail2ban/jail.d/80-ssh.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В файле &lt;code>/etc/fail2ban/jail.d/80-ssh.conf&lt;/code> активируйте защиту ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[sshd]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># To use more aggressive sshd modes set filter parameter &amp;#34;mode&amp;#34; in jail.local:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># normal (default), ddos, extra or aggressive (combines all).
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># See &amp;#34;tests/files/logs/sshd&amp;#34; or &amp;#34;filter.d/sshd.conf&amp;#34; for usage example and details.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#mode = normal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">port = ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logpath = %(sshd_log)s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">backend = %(sshd_backend)s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[selinux-ssh]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">port = ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logpath = %(auditd_log)s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-для-proxmox">&lt;span class="section-num">3&lt;/span> Настройка для Proxmox&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/04/linux-proxmox-distribution/">Linux. Дистрибутив Proxmox&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="время-блокирования">&lt;span class="section-num">3.1&lt;/span> Время блокирования&lt;/h3>
&lt;ul>
&lt;li>Создайте файл локальной конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /etc/fail2ban/jail.d/50-default.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В файле &lt;code>/etc/fail2ban/jail.d/50-default.conf&lt;/code> задайте время блокирования хостов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[DEFAULT]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bantime = 360000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="игнорирование-избранных-ip-адресов">&lt;span class="section-num">3.2&lt;/span> Игнорирование избранных ip-адресов&lt;/h3>
&lt;ul>
&lt;li>Добавим игнорирование избранных ip-адресов в файле &lt;code>/etc/fail2ban/jail.d/50-default.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># &amp;#34;ignoreself&amp;#34; specifies whether the local resp. own IP addresses should be ignored
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># (default is true). Fail2ban will not ban a host which matches such addresses.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ignoreself = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># &amp;#34;ignoreip&amp;#34; can be a list of IP addresses, CIDR masks or DNS hosts. Fail2ban
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># will not ban a host which matches an address in this list. Several addresses
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># can be defined using space (and/or comma) separator.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ignoreip = 127.0.0.1/8 ::1 10.0.0.0/8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Диапазон &lt;code>10.0.0.0/8&lt;/code> добавлен для примера.&lt;/li>
&lt;/ul>
&lt;h3 id="защита-ssh">&lt;span class="section-num">3.3&lt;/span> Защита ssh&lt;/h3>
&lt;ul>
&lt;li>Создадим файл для локальной конфигурации ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /etc/fail2ban/jail.d/80-ssh.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В файле &lt;code>/etc/fail2ban/jail.d/80-ssh.conf&lt;/code> активируйте защиту ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[sshd]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">backend = systemd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалите файл &lt;code>/etc/fail2ban/jail.d/defaults-debian.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="защита-proxmox-web-интерфейс">&lt;span class="section-num">3.4&lt;/span> Защита proxmox web-интерфейс&lt;/h3>
&lt;ul>
&lt;li>Создадим файл для локальной конфигурации proxmox:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /etc/fail2ban/jail.d/80-proxmox.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В файле &lt;code>/etc/fail2ban/jail.d/80-proxmox.conf&lt;/code> активируйте защиту web-интерфейса:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[proxmox]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enabled = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">port = https,http,8006
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">filter = proxmox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">backend = systemd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">maxretry = 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">findtime = 2d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bantime = 1h
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте файл фильтра:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch /etc/fail2ban/filter.d/proxmox.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройте фильтр в файле &lt;code>/etc/fail2ban/filter.d/proxmox.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Definition&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">failregex&lt;/span> &lt;span class="o">=&lt;/span> pvedaemon&lt;span class="se">\[&lt;/span>.*authentication failure&lt;span class="p">;&lt;/span> &lt;span class="nv">rhost&lt;/span>&lt;span class="o">=&lt;/span>&amp;lt;HOST&amp;gt; &lt;span class="nv">user&lt;/span>&lt;span class="o">=&lt;/span>.* &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>.*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ignoreregex&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">journalmatch&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">_SYSTEMD_UNIT&lt;/span>&lt;span class="o">=&lt;/span>pvedaemon.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="основные-операции">&lt;span class="section-num">4&lt;/span> Основные операции&lt;/h2>
&lt;h3 id="удалить-все-записи-из-списков-блокировки">&lt;span class="section-num">4.1&lt;/span> Удалить все записи из списков блокировки&lt;/h3>
&lt;ul>
&lt;li>Для удаления всех записей из списков блокировки выполните скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> JAIL in &lt;span class="k">$(&lt;/span>fail2ban-client status &lt;span class="p">|&lt;/span> grep &lt;span class="s1">&amp;#39;Jail list:&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;BEGIN {FS=&amp;#34;\t&amp;#34;} {print $2}&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/, / /g&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> IP in &lt;span class="k">$(&lt;/span>fail2ban-client status &lt;span class="si">${&lt;/span>&lt;span class="nv">JAIL&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="p">|&lt;/span> grep &lt;span class="s1">&amp;#39;Banned IP list:&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;BEGIN {FS=&amp;#34;\t&amp;#34;} {print $2}&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/ /\n/g&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fail2ban-client &lt;span class="nb">set&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">JAIL&lt;/span>&lt;span class="si">}&lt;/span> unbanip &lt;span class="si">${&lt;/span>&lt;span class="nv">IP&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">unset&lt;/span> JAIL IP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Установка gitea</title><link>https://yamadharma.github.io/ru/post/2023/10/29/install-gitea/</link><pubDate>Sun, 29 Oct 2023 20:10:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/29/install-gitea/</guid><description>&lt;p>Установка gitea.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#поддерживаемые-базы-данных">&lt;span class="section-num">1.1&lt;/span> Поддерживаемые базы данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#пререквизиты">&lt;span class="section-num">2&lt;/span> Пререквизиты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#пользователь">&lt;span class="section-num">2.1&lt;/span> Пользователь&lt;/a>&lt;/li>
&lt;li>&lt;a href="#база-данных">&lt;span class="section-num">2.2&lt;/span> База данных&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#sqlite">&lt;span class="section-num">2.2.1&lt;/span> SqLite&lt;/a>&lt;/li>
&lt;li>&lt;a href="#postgresql">&lt;span class="section-num">2.2.2&lt;/span> PostgreSQL&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">2.3&lt;/span> Брандмауэр&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-бинарного-пакета">&lt;span class="section-num">3.1&lt;/span> Установка бинарного пакета&lt;/a>&lt;/li>
&lt;li>&lt;a href="#структура-папок">&lt;span class="section-num">3.2&lt;/span> Структура папок&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервис-systemd">&lt;span class="section-num">3.3&lt;/span> Сервис systemd&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-gitea">&lt;span class="section-num">3.4&lt;/span> Запуск gitea&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#проксирование">&lt;span class="section-num">4&lt;/span> Проксирование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-nginx">&lt;span class="section-num">4.1&lt;/span> Установка nginx&lt;/a>&lt;/li>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">4.2&lt;/span> Брандмауэр&lt;/a>&lt;/li>
&lt;li>&lt;a href="#selinux">&lt;span class="section-num">4.3&lt;/span> SELinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-nginx">&lt;span class="section-num">4.4&lt;/span> Конфигурация nginx&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурационный-файл-app-dot-ini">&lt;span class="section-num">4.5&lt;/span> Конфигурационный файл app.ini&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-ssl">&lt;span class="section-num">4.6&lt;/span> Настройка SSL&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#начальная-конфигурация">&lt;span class="section-num">5&lt;/span> Начальная конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-настройки">&lt;span class="section-num">6&lt;/span> Дополнительные настройки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#fail2ban">&lt;span class="section-num">6.1&lt;/span> fail2ban&lt;/a>&lt;/li>
&lt;li>&lt;a href="#имя-ветки-по-умолчанию">&lt;span class="section-num">6.2&lt;/span> Имя ветки по умолчанию&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/h2>
&lt;h3 id="поддерживаемые-базы-данных">&lt;span class="section-num">1.1&lt;/span> Поддерживаемые базы данных&lt;/h3>
&lt;ul>
&lt;li>MySQL (&amp;gt;=5.7)&lt;/li>
&lt;li>PostgreSQL (&amp;gt;=10)&lt;/li>
&lt;li>SQLite3&lt;/li>
&lt;li>MSSQL (&amp;gt;=2008R2 SP3)&lt;/li>
&lt;li>TiDB (MySQL protocol)&lt;/li>
&lt;/ul>
&lt;h2 id="пререквизиты">&lt;span class="section-num">2&lt;/span> Пререквизиты&lt;/h2>
&lt;ul>
&lt;li>Установите базовый сервер (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h3 id="пользователь">&lt;span class="section-num">2.1&lt;/span> Пользователь&lt;/h3>
&lt;ul>
&lt;li>Создадим пользователя для работы с gitea.
&lt;ul>
&lt;li>Ubuntu/Debian:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">adduser &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --system &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --shell /bin/bash &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --gecos &lt;span class="s1">&amp;#39;Git Version Control&amp;#39;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --group &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --disabled-password &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --home /home/git &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Fedora/RHEL/CentOS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">groupadd --system git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adduser &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --system &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --shell /bin/bash &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --comment &lt;span class="s1">&amp;#39;Git Version Control&amp;#39;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --gid git &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --home-dir /home/git &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --create-home &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="база-данных">&lt;span class="section-num">2.2&lt;/span> База данных&lt;/h3>
&lt;ul>
&lt;li>Установите нужную базу данных.&lt;/li>
&lt;/ul>
&lt;h4 id="sqlite">&lt;span class="section-num">2.2.1&lt;/span> SqLite&lt;/h4>
&lt;ul>
&lt;li>Установите sqlite:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install sqlite
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроек не требуется.&lt;/li>
&lt;/ul>
&lt;h4 id="postgresql">&lt;span class="section-num">2.2.2&lt;/span> PostgreSQL&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Установите postgresql:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install postgresql-server postgresql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Создайте начальную базу данных:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/bin/postgresql-setup --initdb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Запустите PostgreSQL:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now postgresql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Если требуется удалённая настройка PostgreSQL, добавьте адрес для прослушивания вашего IP-адреса, отредактировав &lt;code>listen_addresses&lt;/code> в &lt;code>/var/lib/pgsql/data/postgresql.conf&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">listen_addresses = &amp;#39;localhost, 203.0.113.3&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>PostgreSQL по умолчанию использует схему запрос-ответ &lt;code>md5&lt;/code> для аутентификации.&lt;/p>
&lt;ul>
&lt;li>В настоящее время эта схема не считается безопасной.&lt;/li>
&lt;li>Вместо этого используйте схему &lt;code>SCRAM-SHA-256&lt;/code>, отредактировав &lt;code>postgresql.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">password_encryption = scram-sha-256
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>На сервере базы данных войдите в консоль базы данных как суперпользователь:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su -c psql - postgres
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Создайте пользователя базы данных с правами входа и паролем:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">CREATE ROLE gitea WITH LOGIN PASSWORD &lt;span class="s1">&amp;#39;gitea&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Замените имя пользователя и пароль соответствующим образом.&lt;/li>
&lt;li>Сменить пароль потом можно будет следующим образом:
&lt;ul>
&lt;li>На сервере базы данных войдите в консоль базы данных как суперпользователь:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su -c psql - postgres
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Смените пароль пользователю &lt;code>gitea&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="se">\p&lt;/span>assword gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Создайте базу данных с кодировкой UTF-8, принадлежащую пользователю базы данных, созданному ранее:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">CREATE DATABASE gitea WITH OWNER gitea TEMPLATE template0 ENCODING UTF8 LC_COLLATE &lt;span class="s1">&amp;#39;ru_RU.UTF-8&amp;#39;&lt;/span> LC_CTYPE &lt;span class="s1">&amp;#39;ru_RU.UTF-8&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Замените имя базы данных соответствующим образом.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Разрешите пользователю базы данных доступ к базе данных, созданной выше, добавив следующее правило аутентификации в файл &lt;code>/var/lib/pgsql/data/pg_hba.conf&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>Для локальной базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">local gitea gitea scram-sha-256
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host gitea gitea 127.0.0.1/32 scram-sha-256
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для удаленной базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">host gitea gitea 192.0.2.10/32 scram-sha-256
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Замените имя базы данных, пользователя и IP-адрес экземпляра Gitea на свои собственные.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Перезапустите PostgreSQL, чтобы применить новые правила аутентификации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl restart postgresql.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>На вашем сервере Gitea проверьте соединение с базой данных.&lt;/p>
&lt;ul>
&lt;li>Для локальной базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">psql -U gitea -d giteadb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для удаленной базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">psql &lt;span class="s2">&amp;#34;postgres://gitea@203.0.113.3/giteadb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>gitea&lt;/code> : пользователь базы данных,&lt;/li>
&lt;li>&lt;code>giteadb&lt;/code> : имя базы данных;&lt;/li>
&lt;li>203.0.113.3 : IP-адрес экземпляра вашей базы данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Вам будет предложено ввести пароль для пользователя базы данных и подключиться к базе данных.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="брандмауэр">&lt;span class="section-num">2.3&lt;/span> Брандмауэр&lt;/h3>
&lt;ul>
&lt;li>Если не будете включать проксирование через web-сервер, то разрешите работать по порту 3000:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --zone&lt;span class="o">=&lt;/span>public --add-port&lt;span class="o">=&lt;/span>3000/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/h2>
&lt;h3 id="установка-бинарного-пакета">&lt;span class="section-num">3.1&lt;/span> Установка бинарного пакета&lt;/h3>
&lt;ul>
&lt;li>Пакета &lt;code>gitea&lt;/code> в Rocky Linux нет.&lt;/li>
&lt;li>Устанавливать будем в локальную иерархию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /usr/local/bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачаем последнюю версию &lt;code>gitea&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -s https://api.github.com/repos/go-gitea/gitea/releases/latest &lt;span class="p">|&lt;/span>grep browser_download_url &lt;span class="p">|&lt;/span> cut -d &lt;span class="s1">&amp;#39;&amp;#34;&amp;#39;&lt;/span> -f &lt;span class="m">4&lt;/span> &lt;span class="p">|&lt;/span> grep &lt;span class="s1">&amp;#39;\linux-amd64$&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> wget -i - -O /usr/local/bin/gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим права на выполнение файла:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod +x /usr/local/bin/gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Восстановим метки безопасности:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">restorecon -rv /usr/local/bin/gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="структура-папок">&lt;span class="section-num">3.2&lt;/span> Структура папок&lt;/h3>
&lt;ul>
&lt;li>Создадим рабочую структур папок:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /etc/gitea /var/lib/gitea/&lt;span class="o">{&lt;/span>custom,data,indexers,public,log&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown git:git /var/lib/gitea/&lt;span class="o">{&lt;/span>data,indexers,log&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">750&lt;/span> /var/lib/gitea/&lt;span class="o">{&lt;/span>data,indexers,log&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown root:git /etc/gitea
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">770&lt;/span> /etc/gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="сервис-systemd">&lt;span class="section-num">3.3&lt;/span> Сервис systemd&lt;/h3>
&lt;ul>
&lt;li>Скачает файл сервиса:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget https://raw.githubusercontent.com/go-gitea/gitea/master/contrib/systemd/gitea.service -P /etc/systemd/system/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перечитает файлы сервисов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl daemon-reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-gitea">&lt;span class="section-num">3.4&lt;/span> Запуск gitea&lt;/h3>
&lt;ul>
&lt;li>Запустим gitea:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="проксирование">&lt;span class="section-num">4&lt;/span> Проксирование&lt;/h2>
&lt;ul>
&lt;li>Можно настроить проксирование gitea через nginx.&lt;/li>
&lt;li>Это не обязательно.&lt;/li>
&lt;/ul>
&lt;h3 id="установка-nginx">&lt;span class="section-num">4.1&lt;/span> Установка nginx&lt;/h3>
&lt;ul>
&lt;li>Установим nginx:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="брандмауэр">&lt;span class="section-num">4.2&lt;/span> Брандмауэр&lt;/h3>
&lt;ul>
&lt;li>Настроим брандмауэр:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-servic&lt;span class="o">={&lt;/span>http,https&lt;span class="o">}&lt;/span> --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="selinux">&lt;span class="section-num">4.3&lt;/span> SELinux&lt;/h3>
&lt;ul>
&lt;li>Разрешите nginx перенаправление:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setsebool -P httpd_can_network_connect &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool httpd_can_network_connect &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-nginx">&lt;span class="section-num">4.4&lt;/span> Конфигурация nginx&lt;/h3>
&lt;ul>
&lt;li>В файле &lt;code>/etc/nginx/conf.d/gitea.conf&lt;/code> опишем конфигурацию для перенаправления:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name hub.example.com;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client_max_body_size 512M;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://localhost:3000;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host $host;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Real-IP $remote_addr;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-Proto $scheme;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурационный-файл-app-dot-ini">&lt;span class="section-num">4.5&lt;/span> Конфигурационный файл app.ini&lt;/h3>
&lt;ul>
&lt;li>Добавьте в &lt;code>/etc/gitea/app.ini&lt;/code> в секцию &lt;code>[security]&lt;/code> чтобы задать доверенные прокси-серверы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[security]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVERSE_PROXY_LIMIT = 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVERSE_PROXY_TRUSTED_PROXIES = 127.0.0.1/8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-ssl">&lt;span class="section-num">4.6&lt;/span> Настройка SSL&lt;/h3>
&lt;ul>
&lt;li>Установите &lt;em>certbot&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-certbot/">Клиенты ACME. Certbot&lt;/a>)&lt;/li>
&lt;li>Создайте сертификат.&lt;/li>
&lt;li>Конфигурационный файл &lt;em>Nginx&lt;/em> будет иметь вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 443 ssl http2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen [::]:443 ssl http2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name hub.example.com;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate /etc/letsencrypt/live/hub.example.com/fullchain.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate_key /etc/letsencrypt/live/hub.example.com/privkey.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> include /etc/letsencrypt/options-ssl-nginx.conf;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> charset utf-8;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip on;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip_types text/css application/javascript text/javascript application/x-javascript image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_read_timeout 300;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_connect_timeout 300;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_send_timeout 300;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client_max_body_size 512M;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://localhost:3000;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Connection $http_connection;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Upgrade $http_upgrade;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host $host;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Real-IP $remote_addr;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-Proto $scheme;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Redirect HTTP traffic to HTTPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 80;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen [::]:80;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name hub.example.com;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return 301 https://$server_name$request_uri;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="начальная-конфигурация">&lt;span class="section-num">5&lt;/span> Начальная конфигурация&lt;/h2>
&lt;ul>
&lt;li>Без проксирования: подключитесь к хосту с gitea по порту 3000 (&lt;code>http://yourserver-ip-address:3000&lt;/code>).&lt;/li>
&lt;li>C проксированием: подключитесь к хосту с gitea (&lt;code>http://yourserver-ip-address&lt;/code>).&lt;/li>
&lt;li>Заполните настройки gitea:
&lt;ul>
&lt;li>Тип базы данных: PostgreSQL.&lt;/li>
&lt;li>Имя пользователя: gitea&lt;/li>
&lt;li>Пароль: пароль, который Вы задали.&lt;/li>
&lt;li>Имя базы данных: gitea&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="дополнительные-настройки">&lt;span class="section-num">6&lt;/span> Дополнительные настройки&lt;/h2>
&lt;h3 id="fail2ban">&lt;span class="section-num">6.1&lt;/span> fail2ban&lt;/h3>
&lt;ul>
&lt;li>Настроим fail2ban (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/10/30/fail2ban-basic-settings/">fail2ban. Основные настройки&lt;/a>)&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.gitea.com/next/administration/fail2ban-setup" target="_blank" rel="noopener">https://docs.gitea.com/next/administration/fail2ban-setup&lt;/a>&lt;/li>
&lt;li>Добавьте фильтр &lt;code>/etc/fail2ban/filter.d/gitea.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># gitea.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Definition]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">failregex = .*(Failed authentication attempt|invalid credentials|Attempted access of unknown user).* from &amp;lt;HOST&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ignoreregex =
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавьте ограничение &lt;code>/etc/fail2ban/jail.d/80-gitea.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">gitea&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">enabled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">filter&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gitea&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">logpath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gitea&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gitea&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">maxretry&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">findtime&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3600&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bantime&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">900&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">action&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">iptables&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">allports&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Поправьте секцию &lt;code>[log]&lt;/code> в &lt;code>/etc/gitea/app.ini&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">MODE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LEVEL&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">info&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ROOT_PATH&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gitea&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте нужный каталог:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /var/log/gitea
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown git:git /var/log/gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="имя-ветки-по-умолчанию">&lt;span class="section-num">6.2&lt;/span> Имя ветки по умолчанию&lt;/h3>
&lt;ul>
&lt;li>Gitea устанавливает имя главной ветки по умолчанию на &lt;code>main&lt;/code>.&lt;/li>
&lt;li>Имя ветка по умолчанию можно установить в файле &lt;code>/etc/gitea/app.ini&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[repository]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEFAULT_BRANCH = master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Хостинг git. gitea</title><link>https://yamadharma.github.io/ru/post/2023/10/29/git-hosting-gitea/</link><pubDate>Sun, 29 Oct 2023 18:54:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/29/git-hosting-gitea/</guid><description>&lt;p>Хостинг git. gitea.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">2&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-и-настройка">&lt;span class="section-num">3&lt;/span> Установка и настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#миграция">&lt;span class="section-num">4&lt;/span> Миграция&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">5&lt;/span> Использование&lt;/a>&lt;/li>
&lt;li>&lt;a href="#утилиты">&lt;span class="section-num">6&lt;/span> Утилиты&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/go-gitea/gitea" target="_blank" rel="noopener">https://github.com/go-gitea/gitea&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.gitea.com/" target="_blank" rel="noopener">https://docs.gitea.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">2&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Awesome Gitea
&lt;ul>
&lt;li>&lt;a href="https://gitea.com/gitea/awesome-gitea" target="_blank" rel="noopener">https://gitea.com/gitea/awesome-gitea&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка-и-настройка">&lt;span class="section-num">3&lt;/span> Установка и настройка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/29/install-gitea/">Установка gitea&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="миграция">&lt;span class="section-num">4&lt;/span> Миграция&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/31/migration-bitbucket-gitea/">Миграция с bitbucket на gitea&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">5&lt;/span> Использование&lt;/h2>
&lt;h2 id="утилиты">&lt;span class="section-num">6&lt;/span> Утилиты&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/11/11/interacting-gitea-command-line/">Взаимодействие с gitea из командной строки&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>nsupdate: динамический редактор зон DNS</title><link>https://yamadharma.github.io/ru/post/2023/10/28/nsupdate-dynamic-dns-editor/</link><pubDate>Sat, 28 Oct 2023 19:28:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/28/nsupdate-dynamic-dns-editor/</guid><description>&lt;p>nsupdate: динамический редактор зон DNS.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-зоны-по-ключу">&lt;span class="section-num">2&lt;/span> Обновление зоны по ключу&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-ключа">&lt;span class="section-num">2.1&lt;/span> Создание ключа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-dns-bind">&lt;span class="section-num">2.2&lt;/span> Настройка DNS Bind&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование-nsupdate">&lt;span class="section-num">3&lt;/span> Использование nsupdate&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#вызов-nsupdate">&lt;span class="section-num">3.1&lt;/span> Вызов nsupdate&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удаление-записи">&lt;span class="section-num">3.2&lt;/span> Удаление записи&lt;/a>&lt;/li>
&lt;li>&lt;a href="#несколько-обновлений">&lt;span class="section-num">3.3&lt;/span> Несколько обновлений&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавление-записей">&lt;span class="section-num">3.4&lt;/span> Добавление записей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#неинтерактивное-использование">&lt;span class="section-num">3.5&lt;/span> Неинтерактивное использование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#с-помощью-файла">&lt;span class="section-num">3.5.1&lt;/span> С помощью файла&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удалить-все-записи-a-начинающиеся-с-www-в-зоне-example-dot-com">&lt;span class="section-num">3.5.2&lt;/span> Удалить все записи A, начинающиеся с www, в зоне example.com&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавить-хост">&lt;span class="section-num">3.5.3&lt;/span> Добавить хост&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#материалы">&lt;span class="section-num">4&lt;/span> Материалы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>nsupdate используется для внесения изменений в динамический DNS без необходимости редактирования файлов зоны и перезапуска DNS-сервера.&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-зоны-по-ключу">&lt;span class="section-num">2&lt;/span> Обновление зоны по ключу&lt;/h2>
&lt;h3 id="создание-ключа">&lt;span class="section-num">2.1&lt;/span> Создание ключа&lt;/h3>
&lt;ul>
&lt;li>Создадим ключ для зоны &lt;code>example.com&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /etc/named/keys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tsig-keygen -a HMAC-SHA256 example.com &amp;gt; /etc/named/keys/example.com.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Файл &lt;code>/etc/named/keys/example.com.key&lt;/code> будет иметь следующий вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">key &amp;#34;example.com&amp;#34; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> algorithm hmac-sha256;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> secret &amp;#34;KbWuOipDOQ80ZoCiSWxhJmulLmaWSNgw43v9KkUQZBY=&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-dns-bind">&lt;span class="section-num">2.2&lt;/span> Настройка DNS Bind&lt;/h3>
&lt;ul>
&lt;li>Настройка происходит в файле &lt;code>/etc/named.conf&lt;/code>.&lt;/li>
&lt;li>Ключ скопируем на хост с DNS-сервером (если это другой сервер).&lt;/li>
&lt;li>Поместим его в файл &lt;code>/etc/named/keys/example.com.key&lt;/code>.&lt;/li>
&lt;li>Подключим ключ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">include &amp;#34;/etc/named/keys/example.com.key&amp;#34;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Разрешим обновление зон:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">zone &amp;#34;example.com&amp;#34; IN {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type master;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> file &amp;#34;local.zone.db&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> allow-update { key &amp;#34;example.com&amp;#34;; };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zone &amp;#34;0.168.192.in-addr.arpa&amp;#34; IN {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type master;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> file &amp;#34;192.168.0.db&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> allow-update { key &amp;#34;example.com&amp;#34;; };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Поправим права доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R named:named /var/named
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R named:named /etc/named
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find /var/named -type d -exec chmod &lt;span class="m">770&lt;/span> &lt;span class="o">{}&lt;/span> &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find /var/named -type f -exec chmod &lt;span class="m">660&lt;/span> &lt;span class="o">{}&lt;/span> &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование-nsupdate">&lt;span class="section-num">3&lt;/span> Использование nsupdate&lt;/h2>
&lt;h3 id="вызов-nsupdate">&lt;span class="section-num">3.1&lt;/span> Вызов nsupdate&lt;/h3>
&lt;ul>
&lt;li>При запуске &lt;code>nsupdate&lt;/code> вы попадете в базовую среду командной строки для отправки команд обновления в DNS.&lt;/li>
&lt;li>Опции запуска:
&lt;ul>
&lt;li>&lt;code>-v&lt;/code> : связь с DNS должна осуществляться по протоколу TCP, а не UDP;&lt;/li>
&lt;li>&lt;code>-k&lt;/code> : указывает на файл ключа.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Вызов &lt;code>nsupdate&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nsupdate -v -k /etc/named/keys/example.com.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы выйти из сеанса nsupdate, просто нажмите &lt;code>CTRL-D&lt;/code> или введите &lt;code>quit&lt;/code> и нажмите &lt;code>RETURN&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="удаление-записи">&lt;span class="section-num">3.2&lt;/span> Удаление записи&lt;/h3>
&lt;ul>
&lt;li>Безоговорочное удаление записи DNS (например, записи CNAME &lt;a href="https://www.example.com" target="_blank" rel="noopener">www.example.com&lt;/a>).&lt;/li>
&lt;li>В командной строке &lt;code>nsupdate&lt;/code> введите:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;gt; update delete www.example.com cname
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; send
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Когда вы вводите &lt;code>send&lt;/code> и нажимаете &lt;code>RETURN&lt;/code>, запрос на обновление создаётся, подписывается и отправляется на соответствующий DNS-сервер.&lt;/li>
&lt;li>Если ключ был авторизован для выполнения запроса, DNS обновит свою базу данных, обновит файлы журнала, увеличит серийный номер записи SOA и отправит уведомление об изменении всем подчиненным DNS.&lt;/li>
&lt;li>Подчинённые устройства запустят AXFR (или IXFR) для сбора обновлений с главного DNS.&lt;/li>
&lt;/ul>
&lt;h3 id="несколько-обновлений">&lt;span class="section-num">3.3&lt;/span> Несколько обновлений&lt;/h3>
&lt;ul>
&lt;li>Чтобы сэкономить время и уменьшить DNS-трафик, можно одновременно отправить несколько запросов на обновление в одном пакете:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;gt; update delete www.example.com cname
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; update delete www1.example.com a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; update delete www2.example.com a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; update delete www3.example.com a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; send
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Все обновления в одном пакете &lt;code>send&lt;/code> должны относиться к одной и той же зоне.&lt;/li>
&lt;li>Особенности реализации: из-за фиксированного входного буфера более 2000 запросов за раз иногда не проходят.&lt;/li>
&lt;/ul>
&lt;h3 id="добавление-записей">&lt;span class="section-num">3.4&lt;/span> Добавление записей&lt;/h3>
&lt;ul>
&lt;li>Добавим записи &lt;code>A&lt;/code>, &lt;code>CNAME&lt;/code> и &lt;code>PTR&lt;/code>. При добавлении необходимо указать &lt;code>TTL&lt;/code> &amp;mdash; время жизни записи в секундах:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;gt; update add www1.example.com &lt;span class="m">86400&lt;/span> a 172.16.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; update add www.example.com &lt;span class="m">600&lt;/span> cname www1.example.com.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; send
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; update add 1.1.16.172.in-addr.arpa &lt;span class="m">86400&lt;/span> ptr www1.example.com.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; send
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="неинтерактивное-использование">&lt;span class="section-num">3.5&lt;/span> Неинтерактивное использование&lt;/h3>
&lt;ul>
&lt;li>Неинтерактивный запуск: можно указать файл, содержащий пакет команд, или просто передать их по STDIN.&lt;/li>
&lt;/ul>
&lt;h4 id="с-помощью-файла">&lt;span class="section-num">3.5.1&lt;/span> С помощью файла&lt;/h4>
&lt;ul>
&lt;li>Например, создадим файл &lt;code>batch.txt&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">update delete www.example.com cname
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">update delete www1.example.com a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">update delete www2.example.com a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">update delete www3.example.com a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">send
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите его, выполнив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nsupdate -v -k /etc/named/keys/example.com.key batch.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="удалить-все-записи-a-начинающиеся-с-www-в-зоне-example-dot-com">&lt;span class="section-num">3.5.2&lt;/span> Удалить все записи A, начинающиеся с www, в зоне example.com&lt;/h4>
&lt;ul>
&lt;li>Удалить все записи &lt;code>A&lt;/code>, начинающиеся с &lt;code>www&lt;/code>, в зоне &lt;code>example.com&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span> host -t a -l example.com &lt;span class="p">|&lt;/span> grep -i &lt;span class="s1">&amp;#39;^www&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{ print &amp;#34;update delete &amp;#34;$1&amp;#34; a&amp;#34; }&amp;#39;&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="nb">echo&lt;/span> send &lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> nsupdate -v -k /etc/named/keys/example.com.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="добавить-хост">&lt;span class="section-num">3.5.3&lt;/span> Добавить хост&lt;/h4>
&lt;ul>
&lt;li>Добавим хост &lt;code>www.example.com&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;update add www.example.com 86400 a 192.168.1.1\nshow\nsend&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> nsupdate -v -k /etc/named/keys/example.com.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="материалы">&lt;span class="section-num">4&lt;/span> Материалы&lt;/h2>
&lt;ul>
&lt;li>Скрипт для упрощения использования nsupdate
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/perryflynn/nsupdate-interactive" target="_blank" rel="noopener">https://github.com/perryflynn/nsupdate-interactive&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Установка Windows с жёсткого диска</title><link>https://yamadharma.github.io/ru/post/2023/10/23/install-windows-hard-drive/</link><pubDate>Mon, 23 Oct 2023 15:51:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/23/install-windows-hard-drive/</guid><description>&lt;p>Установка Windows с жёсткого диска.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#варианты-установки">&lt;span class="section-num">1&lt;/span> Варианты установки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ограничения">&lt;span class="section-num">1.1&lt;/span> Ограничения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#uefi">&lt;span class="section-num">1.2&lt;/span> UEFI&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#стандартный-uefi">&lt;span class="section-num">1.2.1&lt;/span> Стандартный UEFI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сторонние-загрузчики-uefi">&lt;span class="section-num">1.2.2&lt;/span> Сторонние загрузчики UEFI&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#разделы-диска">&lt;span class="section-num">2&lt;/span> Разделы диска&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#разбивка-диска-под-linux">&lt;span class="section-num">2.1&lt;/span> Разбивка диска под Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подготовка-файлов">&lt;span class="section-num">3&lt;/span> Подготовка файлов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#использовании-одного-раздела-fat32-и-одного-раздела-ntfs">&lt;span class="section-num">3.1&lt;/span> Использовании одного раздела FAT32 и одного раздела NTFS&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#использование-windows">&lt;span class="section-num">3.1.1&lt;/span> Использование Windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование-linux">&lt;span class="section-num">3.1.2&lt;/span> Использование Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="варианты-установки">&lt;span class="section-num">1&lt;/span> Варианты установки&lt;/h2>
&lt;ul>
&lt;li>Можно рассмотреть 2 варианта установки:
&lt;ul>
&lt;li>UEFI + GPT + файловая система FAT32.&lt;/li>
&lt;li>BIOS + MBR + NTFS.
&lt;ul>
&lt;li>Максимальный размер раздела составляет 2 ТБ.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="ограничения">&lt;span class="section-num">1.1&lt;/span> Ограничения&lt;/h3>
&lt;ul>
&lt;li>В зависимости от размера файла &lt;code>sources\install.wim&lt;/code> может потребоваться один раздел FAT32 или один раздел FAT32 и раздел NTFS.&lt;/li>
&lt;li>Если размер &lt;code>sources\install.wim&lt;/code> превышает 4 ГБ, необходимо использовать раздел FAT32 + NTFS, поскольку файловая система FAT32 не поддерживает файлы размером более 4 ГБ.&lt;/li>
&lt;/ul>
&lt;h3 id="uefi">&lt;span class="section-num">1.2&lt;/span> UEFI&lt;/h3>
&lt;ul>
&lt;li>Рассматриваем вариант с UEFI.&lt;/li>
&lt;/ul>
&lt;h4 id="стандартный-uefi">&lt;span class="section-num">1.2.1&lt;/span> Стандартный UEFI&lt;/h4>
&lt;ul>
&lt;li>Стандартный UEFI видит только партиции с файловой системой FAT32.&lt;/li>
&lt;li>Поэтому содержимое образа необходимо скопировать на партицию с NTFS.&lt;/li>
&lt;li>А на партицию с FAT32 поместить файлы для начальной загрузки установщика Windows.&lt;/li>
&lt;/ul>
&lt;h4 id="сторонние-загрузчики-uefi">&lt;span class="section-num">1.2.2&lt;/span> Сторонние загрузчики UEFI&lt;/h4>
&lt;ul>
&lt;li>Некоторые загрузчики UEFI поддерживают файловую систему NTFS (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/01/29/refind-boot-manager/">Загрузчик rEFInd&lt;/a>).&lt;/li>
&lt;li>В этом случае можно ограничиться партицией с файловой системой NTFS.&lt;/li>
&lt;li>Содержимое образа необходимо скопировать на партицию с NTFS.&lt;/li>
&lt;/ul>
&lt;h2 id="разделы-диска">&lt;span class="section-num">2&lt;/span> Разделы диска&lt;/h2>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Рекомендуемая структура разделов для Windows
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Раздел&lt;/th>
&lt;th>Размер&lt;/th>
&lt;th>Файловая система&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Системный раздел EFI (ESP)&lt;/td>
&lt;td>512 МБ&lt;/td>
&lt;td>FAT32&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Зарезервированный раздел Microsoft (MSR)&lt;/td>
&lt;td>128 МБ&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows (C:)&lt;/td>
&lt;td>&amp;gt;60 ГБ&lt;/td>
&lt;td>NTFS&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Образ восстановления (необязательно)&lt;/td>
&lt;td>10 ГБ&lt;/td>
&lt;td>NTFS&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 2:&lt;/span>
Структура разделов для размещения файлов установщика Windows
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Раздел&lt;/th>
&lt;th>Размер&lt;/th>
&lt;th>Файловая система&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Установщик Windows FAT32&lt;/td>
&lt;td>8 ГБ&lt;/td>
&lt;td>FAT32&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Установщик Windows NTFS&lt;/td>
&lt;td>10 ГБ&lt;/td>
&lt;td>NTFS&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>Установочный раздел нужно разместить после раздела Windows и образа восстановления.&lt;/li>
&lt;li>Установочный раздел также можно создать на другом жестком диске или внешнем USB-накопителе.&lt;/li>
&lt;/ul>
&lt;h3 id="разбивка-диска-под-linux">&lt;span class="section-num">2.1&lt;/span> Разбивка диска под Linux&lt;/h3>
&lt;ul>
&lt;li>Создадим на диске партиции:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">partprobe /dev/sda
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sgdisk --zap-all /dev/sda
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## ef00 EFI system partition&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sgdisk -n 0:0:+512M -t 0:ef00 -c 0:EFI /dev/sda
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 0c01 Microsoft reserved&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sgdisk -n 0:0:+128M -t 0:0c01 /dev/sda
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 0700 Microsoft basic data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sgdisk -n 0:0:+60G -t 0:0700 -c 0:windows /dev/sda
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sgdisk -n 0:0:+8G -t 0:0700 /dev/sda
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sgdisk -n 0:0:+10M -t 0:0700 /dev/sda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отформатируем диски:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkfs.ntfs -f -L windows /dev/sda3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkfs.vfat -n fat -F32 /dev/sda4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkfs.ntfs -f -L windistro /dev/sda5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="подготовка-файлов">&lt;span class="section-num">3&lt;/span> Подготовка файлов&lt;/h2>
&lt;ul>
&lt;li>Скопируйте файлы из ISO-образа установщика Windows на жёсткий диск.&lt;/li>
&lt;li>Если вы используете один раздел FAT32, просто скопируйте все файлы ISO в этот раздел.&lt;/li>
&lt;/ul>
&lt;h3 id="использовании-одного-раздела-fat32-и-одного-раздела-ntfs">&lt;span class="section-num">3.1&lt;/span> Использовании одного раздела FAT32 и одного раздела NTFS&lt;/h3>
&lt;ul>
&lt;li>Раздел FAT32 используется для загрузки программы установки, затем программа установки попытается найти &lt;code>install.wim&lt;/code> и другие файлы в разделе NTFS.&lt;/li>
&lt;li>Важно, чтобы в каталоге &lt;code>sources&lt;/code> раздела FAT32 был только файл &lt;code>boot.wim&lt;/code> и не было других файлов.&lt;/li>
&lt;/ul>
&lt;h4 id="использование-windows">&lt;span class="section-num">3.1.1&lt;/span> Использование Windows&lt;/h4>
&lt;ul>
&lt;li>Предположим, что
&lt;ul>
&lt;li>диск ISO установщика Windows смонтирован в &lt;code>X:&lt;/code>;&lt;/li>
&lt;li>раздел FAT32 монтируется в &lt;code>E:&lt;/code>;&lt;/li>
&lt;li>раздел NTFS монтируется в &lt;code>F:&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Скопируйте файлы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">robocopy /s /xd:Sources X: E:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">md E:&lt;span class="se">\S&lt;/span>ources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">copy X:&lt;span class="se">\S&lt;/span>ources&lt;span class="se">\b&lt;/span>oot.wim E:&lt;span class="se">\S&lt;/span>ources&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>robocopy /s X: F:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="использование-linux">&lt;span class="section-num">3.1.2&lt;/span> Использование Linux&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Предположим, что&lt;/p>
&lt;ul>
&lt;li>диск ISO установщика Win 10 смонтирован в &lt;code>/media/cdrom/&lt;/code>;&lt;/li>
&lt;li>раздел FAT32 монтируется в &lt;code>/mnt/fat/&lt;/code>;&lt;/li>
&lt;li>раздел NTFS монтируется в &lt;code>/mnt/ntfs/&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Смонтируйте диски:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /mnt/&lt;span class="o">{&lt;/span>fat,ntfs&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sr0 /media/cdrom/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda4 /mnt/fat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda5 /mnt/ntfs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Скопируйте файлы на раздел NTFS:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -ai /media/cdrom/ /mnt/ntfs/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Скопируйте необходимые файлы на раздел FAT32 (не нужно при наличии загрузчика типа refind):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -ai --exclude&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;sources/&amp;#39;&lt;/span> /media/cdrom/ /mnt/fat/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /mnt/fat/sources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /media/cdrom/sources/boot.wim /mnt/fat/sources/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Сеть в vagrant</title><link>https://yamadharma.github.io/ru/post/2023/10/11/vagrant-network/</link><pubDate>Wed, 11 Oct 2023 15:13:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/11/vagrant-network/</guid><description>&lt;p>Сеть в vagrant.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#типы-сетей">&lt;span class="section-num">2&lt;/span> Типы сетей&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#перенаправление-портов">&lt;span class="section-num">2.1&lt;/span> Перенаправление портов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#частная-сеть">&lt;span class="section-num">2.2&lt;/span> Частная сеть&lt;/a>&lt;/li>
&lt;li>&lt;a href="#публичная-сеть">&lt;span class="section-num">2.3&lt;/span> Публичная сеть&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Первый интерфейс устанавливается в режиме NAT для нужд самого Vagrant.&lt;/li>
&lt;/ul>
&lt;h2 id="типы-сетей">&lt;span class="section-num">2&lt;/span> Типы сетей&lt;/h2>
&lt;ul>
&lt;li>Vagrant может задавать три типа сетей:
&lt;ul>
&lt;li>перенаправление портов;&lt;/li>
&lt;li>частную сеть;&lt;/li>
&lt;li>общедоступную сеть.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="перенаправление-портов">&lt;span class="section-num">2.1&lt;/span> Перенаправление портов&lt;/h3>
&lt;ul>
&lt;li>Настройка перенаправления портов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">network&lt;/span> &lt;span class="ss">:forwarded_port&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">guest&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">host&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сопоставляет порт 80 виртуальной (гостевой) машины с портом 8080 хост-машины.&lt;/li>
&lt;li>Порты перенаправляются на NAT-интерфейсе.&lt;/li>
&lt;/ul>
&lt;h3 id="частная-сеть">&lt;span class="section-num">2.2&lt;/span> Частная сеть&lt;/h3>
&lt;ul>
&lt;li>Настроим частную сеть:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">network&lt;/span> &lt;span class="ss">:private_network&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">ip&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.168.1.104&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Несколько виртуальных машин также могут обращаться друг к другу в режиме частной сети, если они настроены на один и тот же сегмент сети.&lt;/li>
&lt;/ul>
&lt;h3 id="публичная-сеть">&lt;span class="section-num">2.3&lt;/span> Публичная сеть&lt;/h3>
&lt;ul>
&lt;li>Виртуальная машина представлена ​​как хост в локальной сети.&lt;/li>
&lt;li>Подключение производится через мост.&lt;/li>
&lt;li>Зададим публичную сеть:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">network&lt;/span> &lt;span class="ss">:public_network&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Wayland. Аналоги приложений</title><link>https://yamadharma.github.io/ru/post/2023/10/11/wayland-applications/</link><pubDate>Wed, 11 Oct 2023 14:23:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/11/wayland-applications/</guid><description>&lt;p>Аналоги приложений для Wayland.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#аналоги-приложений">&lt;span class="section-num">1&lt;/span> Аналоги приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#просмотр-изображений">&lt;span class="section-num">1.1&lt;/span> Просмотр изображений&lt;/a>&lt;/li>
&lt;li>&lt;a href="#снимки-экрана">&lt;span class="section-num">1.2&lt;/span> Снимки экрана&lt;/a>&lt;/li>
&lt;li>&lt;a href="#видеозапись-экрана--скринкаст">&lt;span class="section-num">1.3&lt;/span> Видеозапись экрана (скринкаст)&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#видеозапись-экрана-командная-строка">&lt;span class="section-num">1.3.1&lt;/span> Видеозапись экрана &amp;ndash; командная строка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#видеозапись-экрана-графическое-приложение">&lt;span class="section-num">1.3.2&lt;/span> Видеозапись экрана &amp;ndash; графическое приложение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#строка-состояний">&lt;span class="section-num">1.4&lt;/span> Строка состояний&lt;/a>&lt;/li>
&lt;li>&lt;a href="#уведомления">&lt;span class="section-num">1.5&lt;/span> Уведомления&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-вывода">&lt;span class="section-num">1.6&lt;/span> Настройка вывода&lt;/a>&lt;/li>
&lt;li>&lt;a href="#меню-программ--launcher">&lt;span class="section-num">1.7&lt;/span> Меню программ (launcher)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#буфер-обмена">&lt;span class="section-num">1.8&lt;/span> Буфер обмена&lt;/a>&lt;/li>
&lt;li>&lt;a href="#блокировка-экрана">&lt;span class="section-num">1.9&lt;/span> Блокировка экрана&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#swaylock">&lt;span class="section-num">1.9.1&lt;/span> swaylock&lt;/a>&lt;/li>
&lt;li>&lt;a href="#swaylock-effects">&lt;span class="section-num">1.9.2&lt;/span> swaylock-effects&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#демонстрация-нажатия-клавиш">&lt;span class="section-num">1.10&lt;/span> Демонстрация нажатия клавиш&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#show-me-the-key">&lt;span class="section-num">1.10.1&lt;/span> Show Me The Key&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#ресурсы-по-миграции-с-x-window">&lt;span class="section-num">2&lt;/span> Ресурсы по миграции с X Window&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="аналоги-приложений">&lt;span class="section-num">1&lt;/span> Аналоги приложений&lt;/h2>
&lt;h3 id="просмотр-изображений">&lt;span class="section-num">1.1&lt;/span> Просмотр изображений&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/01/wayland-swayimg-image-viewer/">Wayland. Просмотрщик изображений Swayimg&lt;/a>
&lt;ul>
&lt;li>Легковесный просмотрщик изображений.&lt;/li>
&lt;li>Управляется с клавиатуры.&lt;/li>
&lt;li>По умолчанию раскладка клавиатуры vi-подобная.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="снимки-экрана">&lt;span class="section-num">1.2&lt;/span> Снимки экрана&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/11/05/sway-screenshots/">Sway. Скриншоты&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="видеозапись-экрана--скринкаст">&lt;span class="section-num">1.3&lt;/span> Видеозапись экрана (скринкаст)&lt;/h3>
&lt;p>Ранее использовался &lt;a href="https://www.maartenbaert.be/simplescreenrecorder/" target="_blank" rel="noopener">SimpleScreenRecorder&lt;/a>.&lt;/p>
&lt;h4 id="видеозапись-экрана-командная-строка">&lt;span class="section-num">1.3.1&lt;/span> Видеозапись экрана &amp;ndash; командная строка&lt;/h4>
&lt;p>Для записи из командной строки используем &lt;a href="https://github.com/ammen99/wf-recorder" target="_blank" rel="noopener">wf-recorder&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/wf-recorder
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Варианты использования:&lt;/p>
&lt;ul>
&lt;li>Запись всего экрана в файл &lt;code>recording.mkv&lt;/code> (только видео):&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wf-recorder -f recording&lt;span class="k">$(&lt;/span>date +%Y-%m-%d_%H-%M-%S&lt;span class="k">)&lt;/span>.mkv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Если файл не указывать, запись будет в текущий каталог.&lt;/p>
&lt;ul>
&lt;li>Запись фрагмента экрана (тут имя файла задаётся по времени начала
записи):&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wf-recorder -g &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>slurp&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -f &lt;span class="k">$(&lt;/span>date +%Y-%m-%d_%H-%M-%S&lt;span class="k">)&lt;/span>.mkv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Запись со звуком:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wf-recorder --audio -f &lt;span class="k">$(&lt;/span>date +%Y-%m-%d_%H-%M-%S&lt;span class="k">)&lt;/span>.mkv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Запись с использование GPU (VAAPI интерфейс):&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wf-recorder --audio -f &lt;span class="k">$(&lt;/span>date +%Y-%m-%d_%H-%M-%S&lt;span class="k">)&lt;/span>.mkv -c h264_vaapi -d /dev/dri/renderD128
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="видеозапись-экрана-графическое-приложение">&lt;span class="section-num">1.3.2&lt;/span> Видеозапись экрана &amp;ndash; графическое приложение&lt;/h4>
&lt;p>Для захвата десктопа в Wayland используется плагин &lt;a href="https://hg.sr.ht/~scoopta/wlrobs" target="_blank" rel="noopener">wlrobs&lt;/a>.&lt;/p>
&lt;h3 id="строка-состояний">&lt;span class="section-num">1.4&lt;/span> Строка состояний&lt;/h3>
&lt;p>Sway поддерживает свою строку состояний &lt;code>sway-bar&lt;/code>. Удобное и минималистическое приложение. Однако, удручает, что иконки в трее не активны.&lt;/p>
&lt;p>Попробуем использовать более продвинутый вариант &amp;ndash; &lt;a href="https://github.com/Alexays/Waybar" target="_blank" rel="noopener">waybar&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/waybar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Конфигурация:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## sway-bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Read `man 5 sway-bar` for more information about this section.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># # When the status_command prints a new line to stdout, swaybar updates.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># # The default just shows the current date and time.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># status_command while date +&amp;#39;%Y-%m-%d %H:%M:%S&amp;#39;; do sleep 1; done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># colors {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># statusline #ffffff
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># background #323232
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># inactive_workspace #32323200 #32323200 #5c5c5c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Waybar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># &amp;lt;https://github.com/Alexays/Waybar&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exec_always ~/.config/sway/scripts/waybar.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Waybar Tooltips don&amp;#39;t steel focus
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">no_focus [app_id=&amp;#34;waybar&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">for_window [app_id=&amp;#34;waybar&amp;#34; floating] {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> move position cursor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> move down 60px # adjust if some menus still don&amp;#39;t fit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Конфигурацию &lt;code>waybar&lt;/code> поместил в &lt;code>~/.config/sway/other/waybar&lt;/code>.&lt;/p>
&lt;h3 id="уведомления">&lt;span class="section-num">1.5&lt;/span> Уведомления&lt;/h3>
&lt;p>Используется &lt;a href="https://github.com/emersion/mako" target="_blank" rel="noopener">mako&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/mako
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Сконфигурировал следующим образом:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/sway/config.d/80-mako.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Light
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exec_always mako --font &amp;#39;Source Code Pro 10&amp;#39; --background-color &amp;#39;#fdf6e3&amp;#39; --text-color &amp;#39;#657b83&amp;#39; --default-timeout 5000 --width 400 --markup 1 --border-radius 5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Dark
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># exec_always mako --font &amp;#39;Source Code Pro 10&amp;#39; --background-color &amp;#39;#002b36&amp;#39; --text-color &amp;#39;#839496&amp;#39; --default-timeout 5000 --width 400 --markup 1 --border-radius 5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="настройка-вывода">&lt;span class="section-num">1.6&lt;/span> Настройка вывода&lt;/h3>
&lt;p>В XWindow используется программа &lt;code>xrandr&lt;/code> (с её помощью можно изменять параметры вывода изображения RandR). В &lt;code>sway&lt;/code> можно управлять с помощью &lt;code>swaymsg output&lt;/code> или с помощью утилиты &lt;a href="https://github.com/emersion/wlr-randr" target="_blank" rel="noopener">wlr-randr&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/wlr-randr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="меню-программ--launcher">&lt;span class="section-num">1.7&lt;/span> Меню программ (launcher)&lt;/h3>
&lt;p>Для запуска программы используется &lt;code>dmenu&lt;/code>. Если не нравится, можно заменить.&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://hg.sr.ht/~scoopta/wofi" target="_blank" rel="noopener">wofi&lt;/a> &amp;mdash; аналог &lt;code>rofi&lt;/code> для Wayland. Попроще, конечно.&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/wofi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>В отличии от &lt;code>dmenu&lt;/code> запоминает последние выбранные команды.&lt;/p>
&lt;p>Общая конфигурация:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ~/.config/sway/config.d/80-launcher.conf
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># dmenu
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="n">menu&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dmenu_path&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dmenu&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">xargs&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">swaymsg&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">exec&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">--
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># wofi
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --show &amp;lt;mode&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;lt;mode&amp;gt;:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - `run` - searches $PATH for executables and allows them to be run by selecting them.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - `drun` - searches $XDG_DATA_HOME/applications and $XDG_DATA_DIRS/applications for desktop files and allows them to be run by selecting them.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - `dmenu` - reads from stdin and displays options which when selected will be output to stdout.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># set $menu dmenu_path | wofi -c ~/.config/sway/other/wofi/config -s ~/.config/sway/other/wofi/style.css --show dmenu | xargs swaymsg exec --
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># rofi
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># set $menu rofi -combi-modi window#drun -show combi -modi combi -show-icons
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set $menu rofi -m $(swaymsg -t get_outputs | jq &amp;#39;map(select(.active) | .focused) | index(true)&amp;#39;) -show combi -modi combi -combi-modi window#drun -show-icons -run-command &amp;#39;swaymsg exec -- {cmd}&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># gmenu
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># set $menu gtkmenu --width 500 --height 260 -no-generic
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set $menu nwggrid
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># bemenu
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># set $menu j4-dmenu-desktop --dmenu=&amp;#34;bemenu-run.sh -l 30&amp;#34; --term=&amp;#34;alacritty&amp;#34; --no-generic
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1"># Start your launcher
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">bindsym&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="k">mod&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">exec&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="n">menu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="буфер-обмена">&lt;span class="section-num">1.8&lt;/span> Буфер обмена&lt;/h3>
&lt;p>Предлагается использовать &lt;a href="https://github.com/bugaevc/wl-clipboard" target="_blank" rel="noopener">wl-clipboard&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-apps/wl-clipboard
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Пакет содержит две утилиты: &lt;code>wl-copy&lt;/code> и &lt;code>wl-paste&lt;/code>.&lt;/p>
&lt;p>Пример использования:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># copy a simple text message&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wl-copy Hello world!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># copy the list of files in Downloads&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ls ~/Downloads &lt;span class="p">|&lt;/span> wl-copy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># copy an image file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wl-copy &amp;lt; ~/Pictures/photo.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># paste to a file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wl-paste &amp;gt; clipboard.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># grep each pasted word in file source.c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="k">for&lt;/span> word in &lt;span class="k">$(&lt;/span>wl-paste&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> grep &lt;span class="nv">$word&lt;/span> source.c&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># copy the previous command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wl-copy &lt;span class="s2">&amp;#34;!!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># replace the current selection with the list of types it&amp;#39;s offered in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wl-paste --list-types &lt;span class="p">|&lt;/span> wl-copy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="блокировка-экрана">&lt;span class="section-num">1.9&lt;/span> Блокировка экрана&lt;/h3>
&lt;h4 id="swaylock">&lt;span class="section-num">1.9.1&lt;/span> swaylock&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Общая информация&lt;/p>
&lt;ul>
&lt;li>Официальное приложение для блокировки экрана для &lt;em>Sway&lt;/em> &amp;mdash; &lt;em>swaylock&lt;/em>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/swaywm/swaylock" target="_blank" rel="noopener">https://github.com/swaywm/swaylock&lt;/a>&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge gui-apps/swaylock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В информационной панеле &lt;em>waybar&lt;/em> есть опция для отключения блокировки при простое (например, для демонстрации слайдов).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Блокировка при простое&lt;/p>
&lt;ul>
&lt;li>Заблокировать экран после 300 секунд бездействия.&lt;/li>
&lt;li>Затем выключить дисплей ещё через 300 секунд.&lt;/li>
&lt;li>Включить экран при возобновлении работы.&lt;/li>
&lt;li>Также заблокировать экран перед тем, как компьютер перейдет в спящий режим.&lt;/li>
&lt;li>Конфигурационный файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### ~/.config/sway/config.d/80-lock.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### Idle lock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - Lock your screen after 300 seconds of inactivity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - Then turn off your displays after another 300 seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - Turn your screens back on when resumed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - Also lock your screen before your computer goes to sleep
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exec swayidle -w \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout 300 &amp;#39;swaylock -f -c 000000 -k&amp;#39; \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout 600 &amp;#39;swaymsg &amp;#34;output * dpms off&amp;#34;&amp;#39; \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resume &amp;#39;swaymsg &amp;#34;output * dpms on&amp;#34;&amp;#39; \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> before-sleep &amp;#39;swaylock -f -c 000000 -k&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="3">
&lt;li>
&lt;p>Ручная блокировка&lt;/p>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Ctrl&lt;/code> + &lt;code>l&lt;/code> для немедленной блокировки экрана.&lt;/li>
&lt;li>Через 10 секунд выключить экран.&lt;/li>
&lt;li>Конфигурационный файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### ~/.config/sway/config.d/80-lock.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### Manual lock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - Mod + Ctrl + l to lock the screen immediately
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## - In 10 sec also switch the screen off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $lockman exec bash ~/.config/sway/scripts/lockman.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Ctrl+l exec $lockman
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скрипт блокировки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># ~/.config/sway/scripts/lockman.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Times the screen off and puts it to background&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swayidle &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> timeout &lt;span class="m">10&lt;/span> &lt;span class="s1">&amp;#39;swaymsg &amp;#34;output * dpms off&amp;#34;&amp;#39;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> resume &lt;span class="s1">&amp;#39;swaymsg &amp;#34;output * dpms on&amp;#34;&amp;#39;&lt;/span> &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Locks the screen immediately&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swaylock -c &lt;span class="m">550000&lt;/span> -k
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kills last background task so idle timer doesn&amp;#39;t keep running&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">kill&lt;/span> %%
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="swaylock-effects">&lt;span class="section-num">1.9.2&lt;/span> swaylock-effects&lt;/h4>
&lt;ul>
&lt;li>&lt;em>swaylock-effects&lt;/em> является форком &lt;em>swaylock&lt;/em>:
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/mortie/swaylock-effects" target="_blank" rel="noopener">https://github.com/mortie/swaylock-effects&lt;/a>&lt;/li>
&lt;li>Добавляет встроенные скриншоты и эффекты манипулирования изображениями, такие как размытие.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="демонстрация-нажатия-клавиш">&lt;span class="section-num">1.10&lt;/span> Демонстрация нажатия клавиш&lt;/h3>
&lt;h4 id="show-me-the-key">&lt;span class="section-num">1.10.1&lt;/span> Show Me The Key&lt;/h4>
&lt;ul>
&lt;li>Страница: &lt;a href="https://showmethekey.alynx.one/" target="_blank" rel="noopener">https://showmethekey.alynx.one/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/AlynxZhou/showmethekey" target="_blank" rel="noopener">https://github.com/AlynxZhou/showmethekey&lt;/a>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo, оверлей &lt;code>guru&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/">Gentoo. Дополнительные репозитории&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge gui-apps/showmethekey
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Особенности&lt;/p>
&lt;ul>
&lt;li>Нужно включить переключатель в панели настроек, чтобы запустить отображение нажатия клавиш.&lt;/li>
&lt;li>Нужно разрешение суперпользователя для чтения событий клавиатуры.
&lt;ul>
&lt;li>Пользователи в группе &lt;code>wheel&lt;/code> могут пропустить аутентификацию по паролю.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Wayland не позволяет клиенту устанавливать своё положение, поэтому область отображения нажатия клавиш следует перетащить в нужное место.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="ресурсы-по-миграции-с-x-window">&lt;span class="section-num">2&lt;/span> Ресурсы по миграции с X Window&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://github.com/swaywm/sway/wiki/i3-Migration-Guide" target="_blank" rel="noopener">https://github.com/swaywm/sway/wiki/i3-Migration-Guide&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/swaywm/sway/wiki/Useful-add-ons-for-sway" target="_blank" rel="noopener">https://github.com/swaywm/sway/wiki/Useful-add-ons-for-sway&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://wiki.gentoo.org/wiki/List_of_software_for_Wayland" target="_blank" rel="noopener">https://wiki.gentoo.org/wiki/List_of_software_for_Wayland&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/natpen/awesome-wayland" target="_blank" rel="noopener">https://github.com/natpen/awesome-wayland&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://arewewaylandyet.com/" target="_blank" rel="noopener">https://arewewaylandyet.com/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Броузер Nyxt</title><link>https://yamadharma.github.io/ru/post/2023/10/05/nyxt-browser/</link><pubDate>Thu, 05 Oct 2023 20:43:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/05/nyxt-browser/</guid><description>&lt;p>Броузер Nyxt.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#раскладка-клавиатуры">&lt;span class="section-num">2&lt;/span> Раскладка клавиатуры&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#emacs">&lt;span class="section-num">2.1&lt;/span> Emacs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vim">&lt;span class="section-num">2.2&lt;/span> Vim&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#расширения">&lt;span class="section-num">3&lt;/span> Расширения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#nx-freestance-handler">&lt;span class="section-num">3.1&lt;/span> nx-freestance-handler&lt;/a>&lt;/li>
&lt;li>&lt;a href="#nx-search-engines">&lt;span class="section-num">3.2&lt;/span> nx-search-engines&lt;/a>&lt;/li>
&lt;li>&lt;a href="#nx-ace">&lt;span class="section-num">3.3&lt;/span> nx-ace&lt;/a>&lt;/li>
&lt;li>&lt;a href="#nx-kaomoji">&lt;span class="section-num">3.4&lt;/span> nx-kaomoji&lt;/a>&lt;/li>
&lt;li>&lt;a href="#nx-fruit">&lt;span class="section-num">3.5&lt;/span> nx-fruit&lt;/a>&lt;/li>
&lt;li>&lt;a href="#nx-router">&lt;span class="section-num">3.6&lt;/span> nx-router&lt;/a>&lt;/li>
&lt;li>&lt;a href="#nx-tailor">&lt;span class="section-num">3.7&lt;/span> nx-tailor&lt;/a>&lt;/li>
&lt;li>&lt;a href="#nx-zotero">&lt;span class="section-num">3.8&lt;/span> nx-zotero&lt;/a>&lt;/li>
&lt;li>&lt;a href="#nx-dark-reader">&lt;span class="section-num">3.9&lt;/span> nx-dark-reader&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#материалы">&lt;span class="section-num">4&lt;/span> Материалы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурации">&lt;span class="section-num">4.1&lt;/span> Конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дискуссии">&lt;span class="section-num">4.2&lt;/span> Дискуссии&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://nyxt.atlas.engineer/" target="_blank" rel="noopener">https://nyxt.atlas.engineer/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/atlas-engineer/nyxt" target="_blank" rel="noopener">https://github.com/atlas-engineer/nyxt&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="раскладка-клавиатуры">&lt;span class="section-num">2&lt;/span> Раскладка клавиатуры&lt;/h2>
&lt;h3 id="emacs">&lt;span class="section-num">2.1&lt;/span> Emacs&lt;/h3>
&lt;p>&lt;a id="table--override-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>execute-command ( C-space )&lt;/td>
&lt;td>Execute a command by name.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--help-mode-default-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>describe-bindings ( ? )&lt;/td>
&lt;td>Show a list of all available keybindings in the current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>jump-to-heading ( m )&lt;/td>
&lt;td>Jump to a particular heading, of type h1, h2, h3, h4, h5, or h6.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>next-heading ( n )&lt;/td>
&lt;td>Scroll to the next heading of the BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>previous-heading ( p )&lt;/td>
&lt;td>Scroll to the previous heading of the BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-current-buffer ( q )&lt;/td>
&lt;td>Delete the current buffer, and make the next buffer the current one.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>search-buffer ( s )&lt;/td>
&lt;td>Search incrementally on the current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>headings-panel ( t )&lt;/td>
&lt;td>Display a list of heading for jumping.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--bookmarks-mode-emacs-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>list-bookmarks ( unbound )&lt;/td>
&lt;td>List all bookmarks in a new buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bookmark-hint ( C-m g )&lt;/td>
&lt;td>Prompt for element hints and bookmark them.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bookmark-current-url ( C-x r M )&lt;/td>
&lt;td>Bookmark the URL of the current BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>set-url-from-bookmark ( C-x r j )&lt;/td>
&lt;td>Set the URL for the current buffer from a bookmark.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-bookmark ( C-x r k )&lt;/td>
&lt;td>Delete bookmark(s) matching the chosen URLS-OR-BOOKMARK-ENTRIES.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bookmark-url ( C-x r l )&lt;/td>
&lt;td>Prompt for a URL to bookmark.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bookmark-buffer-url ( C-x r m )&lt;/td>
&lt;td>Bookmark the page(s) currently opened in the existing buffers.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--history-mode-emacs-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>history-backwards ( C-b )&lt;/td>
&lt;td>Go to parent URL of BUFFER in history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards-maybe-query ( C-f )&lt;/td>
&lt;td>If current node has multiple children, query which one to navigate to.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards ( C-b )&lt;/td>
&lt;td>Go to parent URL of BUFFER in history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards ( M-] )&lt;/td>
&lt;td>Go forward one step/URL in BUFFER&amp;rsquo;s history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards-query ( M-b )&lt;/td>
&lt;td>Query parent URL to navigate back to.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards-query ( M-f )&lt;/td>
&lt;td>Query forward-URL to navigate to.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-all-query ( C-M-b )&lt;/td>
&lt;td>Query URL to go to, from the whole history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards-all-query ( C-M-f )&lt;/td>
&lt;td>Query URL to forward to, from all child branches.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-all-query ( C-M-b )&lt;/td>
&lt;td>Query URL to go to, from the whole history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-all-query ( C-M-b )&lt;/td>
&lt;td>Query URL to go to, from the whole history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards ( C-b )&lt;/td>
&lt;td>Go to parent URL of BUFFER in history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards ( M-] )&lt;/td>
&lt;td>Go forward one step/URL in BUFFER&amp;rsquo;s history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards ( C-b )&lt;/td>
&lt;td>Go to parent URL of BUFFER in history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards ( M-] )&lt;/td>
&lt;td>Go forward one step/URL in BUFFER&amp;rsquo;s history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-all-query ( C-M-b )&lt;/td>
&lt;td>Query URL to go to, from the whole history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards-query ( M-b )&lt;/td>
&lt;td>Query parent URL to navigate back to.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards-all-query ( C-M-f )&lt;/td>
&lt;td>Query URL to forward to, from all child branches.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards ( C-b )&lt;/td>
&lt;td>Go to parent URL of BUFFER in history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards ( M-] )&lt;/td>
&lt;td>Go forward one step/URL in BUFFER&amp;rsquo;s history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards-query ( M-f )&lt;/td>
&lt;td>Query forward-URL to navigate to.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--hint-mode-emacs-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>follow-hint-new-buffer-focus ( M-g g )&lt;/td>
&lt;td>Like `follow-hint-new-buffer&amp;rsquo;, but with focus.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>follow-hint-nosave-buffer ( C-M-g g )&lt;/td>
&lt;td>Like `follow-hint&amp;rsquo;, but open the selected hints in new `nosave-buffer&amp;rsquo;s (no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy-hint-url ( C-x C-w )&lt;/td>
&lt;td>Prompt for element hints and save its corresponding URLs to clipboard.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>follow-hint ( M-g M-g )&lt;/td>
&lt;td>Prompt for element hints and open them in the current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>follow-hint-new-buffer ( C-u M-g M-g )&lt;/td>
&lt;td>Like `follow-hint&amp;rsquo;, but open the selected hints in new buffers (no focus).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>follow-hint-nosave-buffer-focus ( C-M-g C-M-g )&lt;/td>
&lt;td>Like `follow-hint-nosave-buffer&amp;rsquo;, but with focus.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>follow-hint-new-buffer ( C-u M-g M-g )&lt;/td>
&lt;td>Like `follow-hint&amp;rsquo;, but open the selected hints in new buffers (no focus).&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--document-mode-emacs-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>jump-to-heading ( m )&lt;/td>
&lt;td>Jump to a particular heading, of type h1, h2, h3, h4, h5, or h6.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>undo ( C-/ )&lt;/td>
&lt;td>Undo the last editing action.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redo ( C-? )&lt;/td>
&lt;td>Redo the last editing action.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reload-with-modes ( C-R )&lt;/td>
&lt;td>Reload the BUFFER with the queried modes.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nothing ( C-g )&lt;/td>
&lt;td>A command that does nothing.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-down ( C-n )&lt;/td>
&lt;td>Scroll down the current page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-up ( C-p )&lt;/td>
&lt;td>Scroll up the current page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-page-down ( C-v )&lt;/td>
&lt;td>Scroll down by one page height.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>cut ( C-w )&lt;/td>
&lt;td>Cut the selected text in BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>paste ( C-y )&lt;/td>
&lt;td>Paste from clipboard into active element.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>headings-panel ( t )&lt;/td>
&lt;td>Display a list of heading for jumping.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-to-top ( M-&amp;lt; )&lt;/td>
&lt;td>Scroll to the top of the current page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-to-bottom ( M-&amp;gt; )&lt;/td>
&lt;td>Scroll to the bottom of the current page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>focus-first-input-field ( M-i )&lt;/td>
&lt;td>Move the focus to the first inputtable element of BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-page-up ( M-v )&lt;/td>
&lt;td>Scroll up by one page height.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy ( M-w )&lt;/td>
&lt;td>Copy selected text to clipboard.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>paste-from-clipboard-ring ( M-y )&lt;/td>
&lt;td>Show `*browser*&amp;rsquo; clipboard ring and paste selected entry.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>previous-heading ( p )&lt;/td>
&lt;td>Scroll to the previous heading of the BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>next-heading ( n )&lt;/td>
&lt;td>Scroll to the next heading of the BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>jump-to-heading-buffers ( C-M-. )&lt;/td>
&lt;td>Jump to a particular heading, of type h1, h2, h3, h4, h5, or h6 across a set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>passthrough-mode ( C-M-Z )&lt;/td>
&lt;td>Toggle `passthrough-mode'.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>open-inspector ( C-M-c )&lt;/td>
&lt;td>Open the inspector, a graphical tool to inspect and change the buffer&amp;rsquo;s content.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>open-inspector ( C-M-c )&lt;/td>
&lt;td>Open the inspector, a graphical tool to inspect and change the buffer&amp;rsquo;s content.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>select-all ( C-x h )&lt;/td>
&lt;td>Select all the text in the text field.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>zoom-page ( C-x C-+ )&lt;/td>
&lt;td>Zoom in the current page BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reset-page-zoom ( C-x C-0 )&lt;/td>
&lt;td>Reset the BUFFER zoom to the `zoom-ratio-default&amp;rsquo; or RATIO.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>zoom-page ( C-x C-+ )&lt;/td>
&lt;td>Zoom in the current page BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>edit-with-external-editor ( C-u C-x C-f )&lt;/td>
&lt;td>Edit the current input field using `external-editor-program'.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unzoom-page ( C-x C-hyphen )&lt;/td>
&lt;td>Zoom out the current page in BUFFER.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--search-buffer-mode-emacs-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>remove-search-marks ( C-s k )&lt;/td>
&lt;td>Remove all search marks.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>search-buffer ( s )&lt;/td>
&lt;td>Search incrementally on the current buffer.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--autofill-mode-default-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>autofill ( C-i )&lt;/td>
&lt;td>Fill in a field with a value from a saved list.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--spell-check-mode-emacs-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>spell-check-word ( M-$ )&lt;/td>
&lt;td>Spell check a word.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--base-mode-emacs-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>delete-panel-buffer ( f4 )&lt;/td>
&lt;td>Prompt for panel buffer(s) to be deleted.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reopen-buffer ( C-T )&lt;/td>
&lt;td>Reopen queried deleted buffer(s).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>list-downloads ( C-d )&lt;/td>
&lt;td>Display a buffer listing all downloads.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>set-url ( C-l )&lt;/td>
&lt;td>Set the URL for the current buffer, completing with history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reload-current-buffer ( C-r )&lt;/td>
&lt;td>Reload current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>make-buffer-focus ( C-t )&lt;/td>
&lt;td>Switch to a new buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>repeat-key ( M-1 )&lt;/td>
&lt;td>Repeat the command bound to the user-pressed keybinding TIMES times.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>set-url-new-buffer ( M-l )&lt;/td>
&lt;td>Prompt for a URL and set it in a new focused buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>toggle-prompt-buffer-focus ( C-x o )&lt;/td>
&lt;td>Toggle the focus between the current buffer and the current prompt buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reload-buffers ( M-r )&lt;/td>
&lt;td>Prompt for BUFFERS to be reloaded.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>execute-command ( C-space )&lt;/td>
&lt;td>Execute a command by name.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>toggle-fullscreen ( f11 )&lt;/td>
&lt;td>Fullscreen WINDOW, or the current window, when omitted.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-class ( C-h C )&lt;/td>
&lt;td>Inspect a class and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-any ( C-h a )&lt;/td>
&lt;td>Inspect anything and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-bindings ( ? )&lt;/td>
&lt;td>Show a list of all available keybindings in the current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-command ( C-h c )&lt;/td>
&lt;td>Inspect a command and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-function ( C-h f )&lt;/td>
&lt;td>Inspect a function and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-key ( C-h k )&lt;/td>
&lt;td>Display binding of user-inputted keys.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-package ( C-h p )&lt;/td>
&lt;td>Inspect a package and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>manual ( C-h r )&lt;/td>
&lt;td>Display Nyxt manual.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-slot ( C-h s )&lt;/td>
&lt;td>Inspect a slot and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tutorial ( C-h t )&lt;/td>
&lt;td>Display Nyxt tutorial.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-variable ( C-h v )&lt;/td>
&lt;td>Inspect a variable and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-all-panel-buffers ( s-f4 )&lt;/td>
&lt;td>Delete all the open panel buffers in WINDOW.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy-url ( C-M-l )&lt;/td>
&lt;td>Save current URL to clipboard.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy-title ( C-M-t )&lt;/td>
&lt;td>Save current page title to clipboard.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>execute-extended-command ( C-M-x )&lt;/td>
&lt;td>Prompt for arguments to pass to a given COMMAND.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-class ( C-h C )&lt;/td>
&lt;td>Inspect a class and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-any ( C-h a )&lt;/td>
&lt;td>Inspect anything and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-bindings ( ? )&lt;/td>
&lt;td>Show a list of all available keybindings in the current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-command ( C-h c )&lt;/td>
&lt;td>Inspect a command and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-function ( C-h f )&lt;/td>
&lt;td>Inspect a function and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-key ( C-h k )&lt;/td>
&lt;td>Display binding of user-inputted keys.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-package ( C-h p )&lt;/td>
&lt;td>Inspect a package and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>manual ( C-h r )&lt;/td>
&lt;td>Display Nyxt manual.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-slot ( C-h s )&lt;/td>
&lt;td>Inspect a slot and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tutorial ( C-h t )&lt;/td>
&lt;td>Display Nyxt tutorial.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-variable ( C-h v )&lt;/td>
&lt;td>Inspect a variable and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>list-downloads ( C-d )&lt;/td>
&lt;td>Display a buffer listing all downloads.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>list-downloads ( C-d )&lt;/td>
&lt;td>Display a buffer listing all downloads.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer-next ( C-x C-right )&lt;/td>
&lt;td>Switch to the next buffer in the buffer tree.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer ( C-x b )&lt;/td>
&lt;td>Switch buffer using fuzzy completion.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-buffer ( C-x k )&lt;/td>
&lt;td>Query the buffer(s) to delete.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>toggle-prompt-buffer-focus ( C-x o )&lt;/td>
&lt;td>Toggle the focus between the current buffer and the current prompt buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer-previous ( C-x C-left )&lt;/td>
&lt;td>Switch to the previous buffer in the buffer tree.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>execute-command ( C-space )&lt;/td>
&lt;td>Execute a command by name.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-current-window ( C-x 5 0 )&lt;/td>
&lt;td>Delete WINDOW, or the current window, when omitted.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-window ( C-x 5 1 )&lt;/td>
&lt;td>Delete the queried window(s).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>make-window ( C-x 5 2 )&lt;/td>
&lt;td>Create a new window.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>list-buffers ( C-x C-b )&lt;/td>
&lt;td>Show all buffers and their interrelations.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>quit ( C-x C-c )&lt;/td>
&lt;td>Quit Nyxt.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>open-file ( C-x C-f )&lt;/td>
&lt;td>Open a file from the filesystem.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-current-buffer ( q )&lt;/td>
&lt;td>Delete the current buffer, and make the next buffer the current one. If no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>resume-prompt ( M-space )&lt;/td>
&lt;td>Query an older prompt and resume it.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer-previous ( C-x C-left )&lt;/td>
&lt;td>Switch to the previous buffer in the buffer tree.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>execute-extended-command ( C-M-x )&lt;/td>
&lt;td>Prompt for arguments to pass to a given COMMAND.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>execute-predicted-command ( C-s-space )&lt;/td>
&lt;td>Execute the predicted next command.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer-next ( C-x C-right )&lt;/td>
&lt;td>Switch to the next buffer in the buffer tree.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer-previous ( C-x C-left )&lt;/td>
&lt;td>Switch to the previous buffer in the buffer tree.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer-next ( C-x C-right )&lt;/td>
&lt;td>Switch to the next buffer in the buffer tree.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="vim">&lt;span class="section-num">2.2&lt;/span> Vim&lt;/h3>
&lt;p>&lt;a id="table--override-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>execute-command ( C-space )&lt;/td>
&lt;td>Execute a command by name.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--help-mode-default-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>describe-bindings ( ? )&lt;/td>
&lt;td>Show a list of all available keybindings in the current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>jump-to-heading ( m )&lt;/td>
&lt;td>Jump to a particular heading, of type h1, h2, h3, h4, h5, or h6.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>next-heading ( n )&lt;/td>
&lt;td>Scroll to the next heading of the BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>previous-heading ( p )&lt;/td>
&lt;td>Scroll to the previous heading of the BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-current-buffer ( q )&lt;/td>
&lt;td>Delete the current buffer, and make the next buffer the current one. If no&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>search-buffer ( s )&lt;/td>
&lt;td>Search incrementally on the current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>headings-panel ( t )&lt;/td>
&lt;td>Display a list of heading for jumping.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--bookmarks-mode-vi-normal-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>list-bookmarks ( m l )&lt;/td>
&lt;td>List all bookmarks in a new buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bookmark-current-url ( m M )&lt;/td>
&lt;td>Bookmark the URL of the current BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-bookmark ( m d )&lt;/td>
&lt;td>Delete bookmark(s) matching the chosen URLS-OR-BOOKMARK-ENTRIES.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bookmark-hint ( m f )&lt;/td>
&lt;td>Prompt for element hints and bookmark them.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>list-bookmarks ( m l )&lt;/td>
&lt;td>List all bookmarks in a new buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bookmark-buffer-url ( m m )&lt;/td>
&lt;td>Bookmark the page(s) currently opened in the existing buffers.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>set-url-from-bookmark ( m o )&lt;/td>
&lt;td>Set the URL for the current buffer from a bookmark.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bookmark-url ( m u )&lt;/td>
&lt;td>Prompt for a URL to bookmark.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bookmark-hint ( m f )&lt;/td>
&lt;td>Prompt for element hints and bookmark them.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--history-mode-vi-normal-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>history-backwards ( H )&lt;/td>
&lt;td>Go to parent URL of BUFFER in history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards-maybe-query ( L )&lt;/td>
&lt;td>If current node has multiple children, query which one to navigate to.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-all-query ( M-H )&lt;/td>
&lt;td>Query URL to go to, from the whole history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards-all-query ( M-L )&lt;/td>
&lt;td>Query URL to forward to, from all child branches.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards ( H )&lt;/td>
&lt;td>Go to parent URL of BUFFER in history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards ( M-] )&lt;/td>
&lt;td>Go forward one step/URL in BUFFER&amp;rsquo;s history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards-query ( M-h )&lt;/td>
&lt;td>Query parent URL to navigate back to.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards-query ( M-l )&lt;/td>
&lt;td>Query forward-URL to navigate to.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-all-query ( M-H )&lt;/td>
&lt;td>Query URL to go to, from the whole history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-all-query ( M-H )&lt;/td>
&lt;td>Query URL to go to, from the whole history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards ( H )&lt;/td>
&lt;td>Go to parent URL of BUFFER in history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards ( M-] )&lt;/td>
&lt;td>Go forward one step/URL in BUFFER&amp;rsquo;s history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards ( H )&lt;/td>
&lt;td>Go to parent URL of BUFFER in history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards ( M-] )&lt;/td>
&lt;td>Go forward one step/URL in BUFFER&amp;rsquo;s history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-all-query ( M-H )&lt;/td>
&lt;td>Query URL to go to, from the whole history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards-query ( M-h )&lt;/td>
&lt;td>Query parent URL to navigate back to.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards-all-query ( M-L )&lt;/td>
&lt;td>Query URL to forward to, from all child branches.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-backwards ( H )&lt;/td>
&lt;td>Go to parent URL of BUFFER in history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards ( M-] )&lt;/td>
&lt;td>Go forward one step/URL in BUFFER&amp;rsquo;s history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>history-forwards-query ( M-l )&lt;/td>
&lt;td>Query forward-URL to navigate to.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--hint-mode-vi-normal-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>follow-hint-new-buffer-focus ( F )&lt;/td>
&lt;td>Like `follow-hint-new-buffer&amp;rsquo;, but with focus.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>follow-hint ( f )&lt;/td>
&lt;td>Prompt for element hints and open them in the current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>follow-hint-new-buffer ( ; f )&lt;/td>
&lt;td>Like `follow-hint&amp;rsquo;, but open the selected hints in new buffers (no focus).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>follow-hint-nosave-buffer-focus ( g F )&lt;/td>
&lt;td>Like `follow-hint-nosave-buffer&amp;rsquo;, but with focus.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>follow-hint-nosave-buffer ( g f )&lt;/td>
&lt;td>Like `follow-hint&amp;rsquo;, but open the selected hints in new `nosave-buffer&amp;rsquo;s (no&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--document-mode-vi-normal-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>zoom-page ( + )&lt;/td>
&lt;td>Zoom in the current page BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reset-page-zoom ( 0 )&lt;/td>
&lt;td>Reset the BUFFER zoom to the `zoom-ratio-default&amp;rsquo; or RATIO.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-to-bottom ( G )&lt;/td>
&lt;td>Scroll to the bottom of the current page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>paste-from-clipboard-ring ( P )&lt;/td>
&lt;td>Show `*browser*&amp;rsquo; clipboard ring and paste selected entry.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-left ( h )&lt;/td>
&lt;td>Scroll left the current page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-down ( j )&lt;/td>
&lt;td>Scroll down the current page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-up ( k )&lt;/td>
&lt;td>Scroll up the current page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-right ( l )&lt;/td>
&lt;td>Scroll right the current page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>paste ( unbound )&lt;/td>
&lt;td>Paste from clipboard into active element.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>undo ( u )&lt;/td>
&lt;td>Undo the last editing action.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>previous-heading ( p )&lt;/td>
&lt;td>Scroll to the previous heading of the BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>next-heading ( n )&lt;/td>
&lt;td>Scroll to the next heading of the BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reload-with-modes ( C-R )&lt;/td>
&lt;td>Reload the BUFFER with the queried modes.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-page-up ( C-b )&lt;/td>
&lt;td>Scroll up by one page height.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-page-down ( C-f )&lt;/td>
&lt;td>Scroll down by one page height.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>print-buffer ( C-p )&lt;/td>
&lt;td>Print the current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redo ( C-r )&lt;/td>
&lt;td>Redo the last editing action.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>headings-panel ( t )&lt;/td>
&lt;td>Display a list of heading for jumping.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>focus-first-input-field ( M-i )&lt;/td>
&lt;td>Move the focus to the first inputtable element of BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>previous-heading ( p )&lt;/td>
&lt;td>Scroll to the previous heading of the BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>next-heading ( n )&lt;/td>
&lt;td>Scroll to the next heading of the BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>cut ( d d )&lt;/td>
&lt;td>Cut the selected text in BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>jump-to-heading-buffers ( g H )&lt;/td>
&lt;td>Jump to a particular heading, of type h1, h2, h3, h4, h5, or h6 across a set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-to-top ( g g )&lt;/td>
&lt;td>Scroll to the top of the current page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>jump-to-heading ( m )&lt;/td>
&lt;td>Jump to a particular heading, of type h1, h2, h3, h4, h5, or h6.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy ( y y )&lt;/td>
&lt;td>Copy selected text to clipboard.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>zoom-page ( + )&lt;/td>
&lt;td>Zoom in the current page BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unzoom-page ( hyphen )&lt;/td>
&lt;td>Zoom out the current page in BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reset-page-zoom ( 0 )&lt;/td>
&lt;td>Reset the BUFFER zoom to the `zoom-ratio-default&amp;rsquo; or RATIO.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>passthrough-mode ( C-M-Z )&lt;/td>
&lt;td>Toggle `passthrough-mode'.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>open-inspector ( C-M-c )&lt;/td>
&lt;td>Open the inspector, a graphical tool to inspect and change the buffer&amp;rsquo;s content.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>open-inspector ( C-M-c )&lt;/td>
&lt;td>Open the inspector, a graphical tool to inspect and change the buffer&amp;rsquo;s content.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-page-down ( C-f )&lt;/td>
&lt;td>Scroll down by one page height.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unzoom-page ( hyphen )&lt;/td>
&lt;td>Zoom out the current page in BUFFER.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-page-up ( C-b )&lt;/td>
&lt;td>Scroll up by one page height.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-page-up ( C-b )&lt;/td>
&lt;td>Scroll up by one page height.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scroll-page-down ( C-f )&lt;/td>
&lt;td>Scroll down by one page height.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--search-buffer-mode-vi-normal-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>search-buffer ( s )&lt;/td>
&lt;td>Search incrementally on the current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>remove-search-marks ( unbound )&lt;/td>
&lt;td>Remove all search marks.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--autofill-mode-default-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>autofill ( C-i )&lt;/td>
&lt;td>Fill in a field with a value from a saved list.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--spell-check-mode-vi-normal-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>spell-check-word ( z = )&lt;/td>
&lt;td>Spell check a word.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--vi-normal-mode-vi-normal-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>vi-insert-mode ( i )&lt;/td>
&lt;td>Toggle `vi-insert-mode'.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>visual-mode ( v )&lt;/td>
&lt;td>Toggle `visual-mode'.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;a id="table--base-mode-vi-normal-map">&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Documentation&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>repeat-key ( 1 )&lt;/td>
&lt;td>Repeat the command bound to the user-pressed keybinding TIMES times.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>execute-command ( C-space )&lt;/td>
&lt;td>Execute a command by name.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>make-buffer-focus ( B )&lt;/td>
&lt;td>Switch to a new buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-current-buffer ( q )&lt;/td>
&lt;td>Delete the current buffer, and make the next buffer the current one.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>set-url-new-buffer ( O )&lt;/td>
&lt;td>Prompt for a URL and set it in a new focused buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reload-current-buffer ( R )&lt;/td>
&lt;td>Reload current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>make-window ( C-w C-w )&lt;/td>
&lt;td>Create a new window.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer-previous ( [ )&lt;/td>
&lt;td>Switch to the previous buffer in the buffer tree.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer-next ( ] )&lt;/td>
&lt;td>Switch to the next buffer in the buffer tree.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-buffer ( unbound )&lt;/td>
&lt;td>Query the buffer(s) to delete.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>set-url ( o )&lt;/td>
&lt;td>Set the URL for the current buffer, completing with history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reload-buffers ( r )&lt;/td>
&lt;td>Prompt for BUFFERS to be reloaded.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reopen-buffer ( C-T )&lt;/td>
&lt;td>Reopen queried deleted buffer(s).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-panel-buffer ( f4 )&lt;/td>
&lt;td>Prompt for panel buffer(s) to be deleted.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reopen-buffer ( C-T )&lt;/td>
&lt;td>Reopen queried deleted buffer(s).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>set-url ( o )&lt;/td>
&lt;td>Set the URL for the current buffer, completing with history.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reload-current-buffer ( R )&lt;/td>
&lt;td>Reload current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>make-buffer-focus ( B )&lt;/td>
&lt;td>Switch to a new buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>set-url-new-buffer ( O )&lt;/td>
&lt;td>Prompt for a URL and set it in a new focused buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>toggle-prompt-buffer-focus ( M-o )&lt;/td>
&lt;td>Toggle the focus between the current buffer and the current prompt buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reload-buffers ( r )&lt;/td>
&lt;td>Prompt for BUFFERS to be reloaded.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>quit ( Z Z )&lt;/td>
&lt;td>Quit Nyxt.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>toggle-fullscreen ( f11 )&lt;/td>
&lt;td>Fullscreen WINDOW, or the current window, when omitted.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer ( g b )&lt;/td>
&lt;td>Switch buffer using fuzzy completion.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>set-url-new-nosave-buffer ( g o )&lt;/td>
&lt;td>Prompt for a URL and set it in a new focused nosave buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy-title ( y t )&lt;/td>
&lt;td>Save current page title to clipboard.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy-url ( y u )&lt;/td>
&lt;td>Save current URL to clipboard.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-class ( f1 C )&lt;/td>
&lt;td>Inspect a class and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-any ( f1 a )&lt;/td>
&lt;td>Inspect anything and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-bindings ( ? )&lt;/td>
&lt;td>Show a list of all available keybindings in the current buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-command ( f1 c )&lt;/td>
&lt;td>Inspect a command and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-function ( f1 f )&lt;/td>
&lt;td>Inspect a function and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-key ( f1 k )&lt;/td>
&lt;td>Display binding of user-inputted keys.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-package ( f1 p )&lt;/td>
&lt;td>Inspect a package and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>manual ( f1 r )&lt;/td>
&lt;td>Display Nyxt manual.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-slot ( f1 s )&lt;/td>
&lt;td>Inspect a slot and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tutorial ( f1 t )&lt;/td>
&lt;td>Display Nyxt tutorial.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>describe-variable ( f1 v )&lt;/td>
&lt;td>Inspect a variable and show it in a help buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-all-panel-buffers ( s-f4 )&lt;/td>
&lt;td>Delete all the open panel buffers in WINDOW.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>set-url-new-nosave-buffer ( g o )&lt;/td>
&lt;td>Prompt for a URL and set it in a new focused nosave buffer.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>list-downloads ( C-s-Y )&lt;/td>
&lt;td>Display a buffer listing all downloads.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>list-downloads ( C-s-Y )&lt;/td>
&lt;td>Display a buffer listing all downloads.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer-next ( ] )&lt;/td>
&lt;td>Switch to the next buffer in the buffer tree.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-current-window ( C-w q )&lt;/td>
&lt;td>Delete WINDOW, or the current window, when omitted.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch-buffer-previous ( [ )&lt;/td>
&lt;td>Switch to the previous buffer in the buffer tree.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>execute-command ( C-space )&lt;/td>
&lt;td>Execute a command by name.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete-window ( C-w C-q )&lt;/td>
&lt;td>Delete the queried window(s).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>make-window ( C-w C-w )&lt;/td>
&lt;td>Create a new window.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>resume-prompt ( M-space )&lt;/td>
&lt;td>Query an older prompt and resume it.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>execute-extended-command ( C-M-space )&lt;/td>
&lt;td>Prompt for arguments to pass to a given COMMAND.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>execute-predicted-command ( C-s-space )&lt;/td>
&lt;td>Execute the predicted next command.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="расширения">&lt;span class="section-num">3&lt;/span> Расширения&lt;/h2>
&lt;h3 id="nx-freestance-handler">&lt;span class="section-num">3.1&lt;/span> nx-freestance-handler&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/kssytsrk/nx-freestance-handler" target="_blank" rel="noopener">https://github.com/kssytsrk/nx-freestance-handler&lt;/a>&lt;/li>
&lt;li>Перенаправление с основных веб-сайтов на их зеркала, поддерживающие конфиденциальность.&lt;/li>
&lt;li>Перенаправление:
&lt;ul>
&lt;li>с Youtube на Invidious,&lt;/li>
&lt;li>с Reddit на Teddit,&lt;/li>
&lt;li>с Instagram на Bibliogram;&lt;/li>
&lt;li>с Twitter на Nitter.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="nx-search-engines">&lt;span class="section-num">3.2&lt;/span> nx-search-engines&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/aartaka/nx-search-engines" target="_blank" rel="noopener">https://github.com/aartaka/nx-search-engines&lt;/a>&lt;/li>
&lt;li>Упрощение использования разных поисковых систем.&lt;/li>
&lt;/ul>
&lt;h3 id="nx-ace">&lt;span class="section-num">3.3&lt;/span> nx-ace&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/atlas-engineer/nx-ace" target="_blank" rel="noopener">https://github.com/atlas-engineer/nx-ace&lt;/a>&lt;/li>
&lt;li>Использование редактора Ace в Nyxt.&lt;/li>
&lt;li>Редактор Ace: &lt;a href="https://ace.c9.io/" target="_blank" rel="noopener">https://ace.c9.io/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="nx-kaomoji">&lt;span class="section-num">3.4&lt;/span> nx-kaomoji&lt;/h3>
&lt;ul>
&lt;li>Репозитоирий: &lt;a href="https://github.com/aartaka/nx-kaomoji.git" target="_blank" rel="noopener">https://github.com/aartaka/nx-kaomoji.git&lt;/a>&lt;/li>
&lt;li>Позволяет вставлять Kaomoji в любое поле ввода с помощью специальной команды.&lt;/li>
&lt;li>Kaomoji &amp;mdash; японские смайлики (например, &lt;a href="http://kaomoji.ru/" target="_blank" rel="noopener">http://kaomoji.ru/&lt;/a>)&lt;/li>
&lt;/ul>
&lt;h3 id="nx-fruit">&lt;span class="section-num">3.5&lt;/span> nx-fruit&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/atlas-engineer/nx-fruit" target="_blank" rel="noopener">https://github.com/atlas-engineer/nx-fruit&lt;/a>&lt;/li>
&lt;li>Показывает фрукт дня.&lt;/li>
&lt;/ul>
&lt;h3 id="nx-router">&lt;span class="section-num">3.6&lt;/span> nx-router&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/migalmoreno/nx-router" target="_blank" rel="noopener">https://github.com/migalmoreno/nx-router&lt;/a>&lt;/li>
&lt;li>Упрощение обработки ресурсов (перенаправлений, блокировщиков, обработчиков ресурсов), используя декларативное описание.&lt;/li>
&lt;/ul>
&lt;h3 id="nx-tailor">&lt;span class="section-num">3.7&lt;/span> nx-tailor&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/migalmoreno/nx-tailor" target="_blank" rel="noopener">https://github.com/migalmoreno/nx-tailor&lt;/a>&lt;/li>
&lt;li>Переключение тем на основе правил.&lt;/li>
&lt;/ul>
&lt;h3 id="nx-zotero">&lt;span class="section-num">3.8&lt;/span> nx-zotero&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/rolling-robot/nx-zotero" target="_blank" rel="noopener">https://github.com/rolling-robot/nx-zotero&lt;/a>&lt;/li>
&lt;li>Подключение к Zotero.&lt;/li>
&lt;/ul>
&lt;h3 id="nx-dark-reader">&lt;span class="section-num">3.9&lt;/span> nx-dark-reader&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/aartaka/nx-dark-reader" target="_blank" rel="noopener">https://github.com/aartaka/nx-dark-reader&lt;/a>&lt;/li>
&lt;li>Интеграция с Dark Reader.&lt;/li>
&lt;li>Dark Reader (&lt;a href="https://darkreader.org/" target="_blank" rel="noopener">https://darkreader.org/&lt;/a>) позволяет включить тёмную тему на любом сайте.&lt;/li>
&lt;/ul>
&lt;h2 id="материалы">&lt;span class="section-num">4&lt;/span> Материалы&lt;/h2>
&lt;h3 id="конфигурации">&lt;span class="section-num">4.1&lt;/span> Конфигурации&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://github.com/aartaka/nyxt-config" target="_blank" rel="noopener">https://github.com/aartaka/nyxt-config&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/Gavinok/dotnyxt" target="_blank" rel="noopener">https://github.com/Gavinok/dotnyxt&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/ericdrgn/drgn.nyxt" target="_blank" rel="noopener">https://github.com/ericdrgn/drgn.nyxt&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="дискуссии">&lt;span class="section-num">4.2&lt;/span> Дискуссии&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://discourse.atlas.engineer/" target="_blank" rel="noopener">https://discourse.atlas.engineer/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Контроллер Cisco WLC. Обновление программного обеспечения</title><link>https://yamadharma.github.io/ru/post/2023/10/01/cisco-wlc-firmware-upgrade/</link><pubDate>Sun, 01 Oct 2023 19:37:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/01/cisco-wlc-firmware-upgrade/</guid><description>&lt;p>Контроллер Cisco WLC. Обновление программного обеспечения.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#процедура-обновления-из-интерфейса-командной-строки">&lt;span class="section-num">2&lt;/span> Процедура обновления из интерфейса командной строки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подготовка">&lt;span class="section-num">2.1&lt;/span> Подготовка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#задание-параметров-загрузки-образа">&lt;span class="section-num">2.2&lt;/span> Задание параметров загрузки образа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скачивание-образа">&lt;span class="section-num">2.3&lt;/span> Скачивание образа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#предварительная-загрузка-образа-обновления-cisco-wlc-на-точки-доступа">&lt;span class="section-num">2.4&lt;/span> Предварительная загрузка образа обновления Cisco WLC на точки доступа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перезагрузка">&lt;span class="section-num">2.5&lt;/span> Перезагрузка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#выбор-образа-для-загрузки">&lt;span class="section-num">2.6&lt;/span> Выбор образа для загрузки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#проблемы">&lt;span class="section-num">3&lt;/span> Проблемы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#cisco-aironet-1700">&lt;span class="section-num">3.1&lt;/span> Cisco Aironet 1700&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Не отключайте контроллер или любую точку доступа в процессе обновления.&lt;/li>
&lt;li>В противном случае можно повредить образ программного обеспечения.&lt;/li>
&lt;li>Обновление контроллера с большим числом точек доступа может занять около 30 минут в зависимости от размера сети.&lt;/li>
&lt;li>В это время точки доступа должны оставаться подключёнными к сети питания и не должен выполняться сброс контроллера.&lt;/li>
&lt;li>Программное обеспечение контроллера представляет собой файл размером порядка 100 мегабайт с именем формата &lt;code>AIR-CTYYYY-K9-X-X-XX.aes&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="процедура-обновления-из-интерфейса-командной-строки">&lt;span class="section-num">2&lt;/span> Процедура обновления из интерфейса командной строки&lt;/h2>
&lt;h3 id="подготовка">&lt;span class="section-num">2.1&lt;/span> Подготовка&lt;/h3>
&lt;ul>
&lt;li>Убедитесь в доступности TFTP-сервера из контроллера и в нахождении файла обновления в корневом каталоге TFTP-сервера.&lt;/li>
&lt;li>Лучше всего выполнять данную процедуру через порт консоли, но можно также использовать протокол SSH или Telnet для подключения к IP-адресу управления контроллера.&lt;/li>
&lt;li>Использование протокола SSH или Telnet приводит к потере соединения с контроллером во время процесса перезагрузки, выполняемого после загрузки образа.&lt;/li>
&lt;li>Проверьте текущую версию программного обеспечения, используемого в контроллере:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show sysinfo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="задание-параметров-загрузки-образа">&lt;span class="section-num">2.2&lt;/span> Задание параметров загрузки образа&lt;/h3>
&lt;ul>
&lt;li>Задайте режим передачи файлов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">transfer download mode tftp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Задайте IP-адрес TFTP-сервера:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">transfer download serverip &amp;lt;IP-адрес TFTP-сервера&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Задайте путь к каталогу на TFTP-сервере, в котором находится программное обеспечение операционной системы контроллера:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">transfer download path &lt;span class="s1">&amp;#39;&amp;lt;путь TFTP-сервера&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Задать имя файла образа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">transfer download filename &amp;lt;имя файла&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="скачивание-образа">&lt;span class="section-num">2.3&lt;/span> Скачивание образа&lt;/h3>
&lt;ul>
&lt;li>Инициировать процесс обновления:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">transfer download start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="предварительная-загрузка-образа-обновления-cisco-wlc-на-точки-доступа">&lt;span class="section-num">2.4&lt;/span> Предварительная загрузка образа обновления Cisco WLC на точки доступа&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Необязательно.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Предварительная загрузка нового образ на точки доступа для сокращения времени простоя:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap image predownload primary all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Эта команда сообщает контроллеру загрузить образ на все ваши точки доступа.&lt;/li>
&lt;li>Этот процесс занимает несколько минут на каждой точке доступа.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Отслеживание прогресса:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show ap image all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Указать точкам доступа, чтобы они установили этот образ в качестве основного образа для использования при следующей перезагрузке:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap image swap all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Убедитесь, что новое изображение теперь установлено в качестве основного:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show ap image all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перезагрузка">&lt;span class="section-num">2.5&lt;/span> Перезагрузка&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>После завершения обновления перезагрузите контроллер, чтобы новое программное обеспечение вступило в силу:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">reset system in HH:MM:SS image no-swap reset-aps save-config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>image no-swap&lt;/code> сообщает контроллерам и точкам доступа о необходимости перезагрузки с использованием текущего образа, установленного в качестве основного, который является новым образом.&lt;/li>
&lt;li>&lt;code>reset-aps&lt;/code> указывает точкам доступа перезагрузиться одновременно с контроллерами, а не ждать, пока контроллеры вернутся и поймут, что им необходимо перезагрузить. Это сократит время простоя.&lt;/li>
&lt;li>&lt;code>save-config&lt;/code> указывает контроллерам сохранить текущую конфигурацию в загрузочную конфигурацию перед перезагрузкой, гарантируя, что все ожидающие изменения будут записаны до перезагрузки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="выбор-образа-для-загрузки">&lt;span class="section-num">2.6&lt;/span> Выбор образа для загрузки&lt;/h3>
&lt;ul>
&lt;li>По умолчанию на контроллере WLC поддерживаются два образа: основной и резервный образы.&lt;/li>
&lt;li>Основной образ &amp;mdash; это активный образ, используемый контроллером WLC.&lt;/li>
&lt;li>Резервный образ используется в качестве резервной копии активного образа.&lt;/li>
&lt;li>При обновлении контроллера WLC с помощью нового образа контроллер WLC автоматически копирует новый образ поверх резервного образа.&lt;/li>
&lt;li>Просмотреть сведения об активном образе, используемом контроллером в данный момент (основной образ):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show boot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выбрать какой образ будет активным (используемым контроллером WLC при загрузке):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config boot &amp;lt;primary/backup&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы контроллер WLC использовал новый активный образ, необходимо сохранить и перезагрузить его конфигурацию.&lt;/li>
&lt;/ul>
&lt;h2 id="проблемы">&lt;span class="section-num">3&lt;/span> Проблемы&lt;/h2>
&lt;h3 id="cisco-aironet-1700">&lt;span class="section-num">3.1&lt;/span> Cisco Aironet 1700&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Меняли прошивку WLC c 8.0.115 на 8.3.150.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>После обновления точки доступа не скачивали образ.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Писали, что не поддерживают и прочую ерунду.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Нашли в сети следующее:&lt;/p>
&lt;blockquote>
&lt;p>Disable Network Time Protocol (NTP) on the WLC and manually set the WLC date/time to a date before December 2, 2022. The Cisco IOS AP will then be able to download and validate the image, install the new image, and join the controller. Once the AP has joined the controller, NTP can be re-enabled on the controller to assume the correct date and time.&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>Отключили NTP.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Откатили даты назад.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Точки доступа стали загружать образ.&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Пакетный менеджер для Windows. WinGet</title><link>https://yamadharma.github.io/ru/post/2023/10/01/package-manager-windows-winget/</link><pubDate>Sun, 01 Oct 2023 18:53:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/01/package-manager-windows-winget/</guid><description>&lt;p>Пакетный менеджер для Windows. WinGet.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">2&lt;/span> Использование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#список-пакетов">&lt;span class="section-num">2.1&lt;/span> Список пакетов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#поиск-пакета">&lt;span class="section-num">2.2&lt;/span> Поиск пакета&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-пакета">&lt;span class="section-num">2.3&lt;/span> Установка пакета&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-пакетов">&lt;span class="section-num">2.4&lt;/span> Обновление пакетов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#список-программного-обеспечения">&lt;span class="section-num">2.5&lt;/span> Список программного обеспечения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/microsoft/winget-cli" target="_blank" rel="noopener">https://github.com/microsoft/winget-cli&lt;/a>&lt;/li>
&lt;li>В WinGet имеется два источника пакетов: магазин Windows и собственный репозиторий, поддерживаемый Microsoft.&lt;/li>
&lt;li>Репозиторий WinGet является просто каталогом ссылок на скачивание инсталляторов того или иного ПО из различных источников, предлагаемых их разработчиками.&lt;/li>
&lt;li>Начиная с Windows 10 1709 выпуска он предустановлен по умолчанию.&lt;/li>
&lt;li>Доступен в Магазине Windows под названием &lt;em>App Installer&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">2&lt;/span> Использование&lt;/h2>
&lt;h3 id="список-пакетов">&lt;span class="section-num">2.1&lt;/span> Список пакетов&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Получение списка уже установленных приложений:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Посмотреть список подключённых репозиториев:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget &lt;span class="nb">source&lt;/span> list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>По умолчанию подключено два репозитория: Магазин Windows и WinGet.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="поиск-пакета">&lt;span class="section-num">2.2&lt;/span> Поиск пакета&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Найти пакет в репозитории:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget search office
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Можно искать не по подстроке в названии, а по категории (прозвищу):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget search --moniker office
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Можно задать репозиторий:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget search --moniker office -s winget
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Если нужно строгое вхождение, то к строке запроса нужно добавить ключ &lt;code>-e&lt;/code>, в этом случае будет искаться полное совпадение с учетом регистра:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget search --moniker office -s winget -e
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Фильтры для запросов:&lt;/p>
&lt;ul>
&lt;li>&lt;code>--name&lt;/code> : имя пакета;&lt;/li>
&lt;li>&lt;code>--id&lt;/code> : идентификатор пакета;&lt;/li>
&lt;li>&lt;code>--tag&lt;/code> : тег пакета;&lt;/li>
&lt;li>&lt;code>--moniker&lt;/code> : прозвище пакета.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Посмотреть информацию о пакете:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget show &lt;span class="s2">&amp;#34;WPS Office&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Получения списка версий доступных в репозитории:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget show Kingsoft.WPSOffice --versions
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-пакета">&lt;span class="section-num">2.3&lt;/span> Установка пакета&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Установить пакет:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget install Kingsoft.WPSOffice
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Приложение будет установлено с параметрами по умолчанию.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Ключи:&lt;/p>
&lt;ul>
&lt;li>&lt;code>-h&lt;/code>, &lt;code>--silent&lt;/code> : полностью скрыть процесс установки;&lt;/li>
&lt;li>&lt;code>-i&lt;/code>, &lt;code>--interactive&lt;/code> : запуск установки в интерактивном режиме;&lt;/li>
&lt;li>&lt;code>-v&lt;/code>, &lt;code>--version&lt;/code> : установить пакет нужной версии;&lt;/li>
&lt;li>&lt;code>-a&lt;/code>, &lt;code>--architecture&lt;/code> : явно указать архитектуру (для скачивания), доступными являются значения: &lt;code>X86&lt;/code> и &lt;code>X64&lt;/code>;&lt;/li>
&lt;li>&lt;code>--locale&lt;/code> : указать нужный язык.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Скачивание пакета в папку &lt;em>Загрузки&lt;/em>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget download RARLab.WinRAR
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Скачать 32-разрядную английскую версию:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget download RARLab.WinRAR --locale en-US -a X86
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="обновление-пакетов">&lt;span class="section-num">2.4&lt;/span> Обновление пакетов&lt;/h3>
&lt;ul>
&lt;li>Обновить отдельный пакет:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget upgrade Microsoft.VCRedist.2015+.x64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновить все пакеты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget upgrade --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Зафиксировать текущую версию пакета и сделать его недоступным для обновления:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget pin add RARLab.WinRAR
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Пакет может быть обновлён командой обновления пакета или добавлением к &lt;code>upgrade --all&lt;/code> ключа &lt;code>--include-pinned&lt;/code>.&lt;/li>
&lt;li>Полностью заблокировать обновление пакета:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget pin add RARLab.WinRAR --blocking
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Закрепление пакета в рамках определённой версии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget pin add LibreOffice --version 7.4.*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Просмотр закреплённых пакетов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget pin list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для удаления закрепления:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget pin remove LibreOffice
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалить установленную программу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget uninstall LibreOffice
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="список-программного-обеспечения">&lt;span class="section-num">2.5&lt;/span> Список программного обеспечения&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Экспортировать список установленного программного обеспечения:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget &lt;span class="nb">export&lt;/span> -o C:&lt;span class="se">\A&lt;/span>DM&lt;span class="se">\m&lt;/span>yapp.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Если требуется указать конкретные версии, то добавьте ключ &lt;code>--include-versions&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Автоматической установки программного обеспечения из списка:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget import -i C:&lt;span class="se">\A&lt;/span>DM&lt;span class="se">\m&lt;/span>yapp.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Ключи:&lt;/p>
&lt;ul>
&lt;li>&lt;code>--accept-source-agreements&lt;/code> : подавляет запрос на принятие исходного лицензионного соглашения на использование источника пакетов;&lt;/li>
&lt;li>&lt;code>--accept-package-agreements&lt;/code> : автоматическое принятие лицензионного соглашения (может потребоваться для некоторых пакетов);&lt;/li>
&lt;li>&lt;code>--ignore-unavailable&lt;/code> : игнорирование ошибок в случае недоступности пакета в источнике;&lt;/li>
&lt;li>&lt;code>--ignore-versions&lt;/code> : игнорировать заданные версии;&lt;/li>
&lt;li>&lt;code>--no-upgrade&lt;/code> : не обновлять существующие.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Вариант команды импорта:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget import -i C:&lt;span class="se">\A&lt;/span>DM&lt;span class="se">\m&lt;/span>yapp.json --accept-source-agreements --accept-package-agreements --ignore-unavailable --no-upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Перенос настроек профиля пользователя Windows</title><link>https://yamadharma.github.io/ru/post/2023/09/26/transferring-windows-user-profile/</link><pubDate>Tue, 26 Sep 2023 14:39:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/26/transferring-windows-user-profile/</guid><description>&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#утилиты-переноса-данных-пользователя">&lt;span class="section-num">1&lt;/span> Утилиты переноса данных пользователя&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#user-profile-wizard">&lt;span class="section-num">1.1&lt;/span> User Profile Wizard&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#описание">&lt;span class="section-num">1.1.1&lt;/span> Описание&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">1.1.2&lt;/span> Использование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#transwiz">&lt;span class="section-num">1.2&lt;/span> Transwiz&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#описание">&lt;span class="section-num">1.2.1&lt;/span> Описание&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="утилиты-переноса-данных-пользователя">&lt;span class="section-num">1&lt;/span> Утилиты переноса данных пользователя&lt;/h2>
&lt;h3 id="user-profile-wizard">&lt;span class="section-num">1.1&lt;/span> User Profile Wizard&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.forensit.com/" target="_blank" rel="noopener">https://www.forensit.com/&lt;/a>&lt;/li>
&lt;li>Лицензия: EULA, FreeWare&lt;/li>
&lt;li>Видео: &lt;a href="https://www.youtube.com/watch?v=-YRqK_eLrQo" target="_blank" rel="noopener">https://www.youtube.com/watch?v=-YRqK_eLrQo&lt;/a>&lt;/li>
&lt;li>Программа устанавливается как переносимый исполняемый файл.&lt;/li>
&lt;/ul>
&lt;h4 id="описание">&lt;span class="section-num">1.1.1&lt;/span> Описание&lt;/h4>
&lt;ul>
&lt;li>Для ситуации, когда в компании внедряется доменная сеть и необходимо компьютеры пользователей подключать к домену.&lt;/li>
&lt;li>Необходимо перенести локальные профили пользователей а домен.&lt;/li>
&lt;li>Утилита связывает доменную учётную запись с локальным профилем.&lt;/li>
&lt;li>В результате пользователь так же работает в том же самом окружении, но уже в домене.&lt;/li>
&lt;li>Программа можно запускать до ввода компьютера в домен, ввод в домен можно сделать через саму утилиту.&lt;/li>
&lt;li>После входа под доменной учётной записью видим, что все настройки сохранились.&lt;/li>
&lt;li>Папка профиля доменного пользователя совпадает с папкой профиля исходного пользователя.&lt;/li>
&lt;/ul>
&lt;h4 id="использование">&lt;span class="section-num">1.1.2&lt;/span> Использование&lt;/h4>
&lt;ul>
&lt;li>Учётную запись в которую собираетесь имортировать настройки лучше создать заблаговременно иначе программа выдаст ошибку: &lt;em>Account does not exist&lt;/em>.&lt;/li>
&lt;li>Запускаем программу, жмем далее и видим окно &lt;em>Select a User Profile&lt;/em>. Выбираем из списка профиль пользователя, который нужно перенести в нашу учетную запись.&lt;/li>
&lt;li>Опции:
&lt;ul>
&lt;li>Если включить опцию &lt;em>Show Unassigned Profiles&lt;/em>, то программа покажет профили пользователей, которые не подключены к текущей ОС Windows.&lt;/li>
&lt;li>&lt;em>Disable Account&lt;/em> &amp;mdash; отключит аккаунт, профиль которого был перенесён.&lt;/li>
&lt;li>&lt;em>Delete Account&lt;/em> &amp;mdash; удалит аккаунт после переноса.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Следующий шаг &lt;em>User Account Information&lt;/em> &amp;mdash; Информация об учетной записи пользователя. Здесь указывается информация о профиле в который будут импортированы настройки другого профиля.
&lt;ul>
&lt;li>&lt;em>Enter the domain&lt;/em> &amp;mdash; указываем домен в котором зарегистрирован пользователь.&lt;/li>
&lt;li>Если включить опцию &lt;em>Join Domain&lt;/em>, то программа попытается присоединить компьютер к этому домену.
&lt;ul>
&lt;li>Тогда вводим имя пользователя и пароль администратора, имеющего право ввести компьютер в домен.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>Enter the accont name&lt;/em> &amp;mdash; имя учетной записи пользователя, в профиль которого будут перенесены настройки.&lt;/li>
&lt;li>Если отметить &lt;em>Set as default logon&lt;/em>, программа установит профиль этого пользователя как загружаемый по умолчанию.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Запускается процесс переноса профиля. При завершении работы будет выдано сообщение &lt;em>Migration Complete!&lt;/em>&lt;/li>
&lt;li>После работы программы может потребоваться перезагрузка для обновления профилей пользователей.&lt;/li>
&lt;/ul>
&lt;h3 id="transwiz">&lt;span class="section-num">1.2&lt;/span> Transwiz&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.forensit.com/" target="_blank" rel="noopener">https://www.forensit.com/&lt;/a>&lt;/li>
&lt;li>Лицензия: EULA, FreeWare&lt;/li>
&lt;li>Видео: &lt;a href="https://www.youtube.com/watch?v=BsznBtuD8Xg" target="_blank" rel="noopener">https://www.youtube.com/watch?v=BsznBtuD8Xg&lt;/a>&lt;/li>
&lt;li>Программа устанавливается как переносимый исполняемый файл.&lt;/li>
&lt;/ul>
&lt;h4 id="описание">&lt;span class="section-num">1.2.1&lt;/span> Описание&lt;/h4>
&lt;ul>
&lt;li>Утилита предназначенная для переноса профиля на другой компьютер.&lt;/li>
&lt;li>Утилита просто правит все необходимые пути, чтобы можно было пользоваться учётной записью и локально и в домене.&lt;/li>
&lt;/ul></description></item><item><title>Динамическое обновление DNS-сервера BIND при помощи ISC DHCP</title><link>https://yamadharma.github.io/ru/post/2023/09/25/dynamically-updating-bind-dns-isc-dhcp/</link><pubDate>Mon, 25 Sep 2023 13:26:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/25/dynamically-updating-bind-dns-isc-dhcp/</guid><description>&lt;p>Динамическое обновление DNS-сервера BIND при помощи ISC DHCP.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#ключи">&lt;span class="section-num">1&lt;/span> Ключи&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-dhcp">&lt;span class="section-num">2&lt;/span> Настройка DHCP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-dns-bind">&lt;span class="section-num">3&lt;/span> Настройка DNS Bind&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="ключи">&lt;span class="section-num">1&lt;/span> Ключи&lt;/h2>
&lt;ul>
&lt;li>Создадим ключ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tsig-keygen -a HMAC-SHA512 DHCP_UPDATER &amp;gt; /etc/dhcp/keys/dhcp_updater.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Файл &lt;code>/etc/dhcp/keys/dhcp_updater.key&lt;/code> будет иметь следующий вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">key DHCP_UPDATER {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> algorithm hmac-md5;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> secret &amp;#34;EgxIOyQglf4KAUF7lgu9yA==&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-dhcp">&lt;span class="section-num">2&lt;/span> Настройка DHCP&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Настройка происходит в файле &lt;code>/etc/dhcp/dhcpd.conf&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Включим динамическое обновление:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ddns-updates on;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ddns-update-style interim;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ignore client-updates;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">update-static-leases on;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Данные опции включают динамическое обновление DNS и предписывают делать это в том числе и для статических записей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Подключим ключ к dhcp:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">include &amp;#34;/etc/dhcp/keys/dhcp_updater.key&amp;#34;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Добавим зоны, которые мы обновляем:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">zone local.zone. {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> primary 127.0.0.1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key DHCP_UPDATER;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zone 0.168.192.in-addr.arpa. {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> primary 127.0.0.1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key DHCP_UPDATER;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Имена зон мы пишем в абсолютном формате, т. е. с точкой на конце.&lt;/li>
&lt;li>Внутри каждой секции указываем адрес первичного DNS-сервера и ключ доступа к нему.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Можно увеличить время аренды адреса:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">default-lease-time 604800&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">max-lease-time 1814400&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверяем конфигурацию на ошибки:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dhcpd -t -cf /etc/dhcp/dhcpd.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-dns-bind">&lt;span class="section-num">3&lt;/span> Настройка DNS Bind&lt;/h2>
&lt;ul>
&lt;li>Настройка происходит в файле &lt;code>/etc/named.conf&lt;/code>.&lt;/li>
&lt;li>Ключ скопируем на хост с DNS-сервером (если это другой сервер).&lt;/li>
&lt;li>Поместим его в файл &lt;code>/etc/named/keys/dhcp_updater.key&lt;/code>.&lt;/li>
&lt;li>Подключим ключ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">include &amp;#34;/etc/named/keys/dhcp_updater.key&amp;#34;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Разрешим обновление зон:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">zone &amp;#34;local.zone&amp;#34; IN {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type master;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> file &amp;#34;local.zone.db&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> allow-update { key DHCP_UPDATER; };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zone &amp;#34;0.168.192.in-addr.arpa&amp;#34; IN {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type master;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> file &amp;#34;192.168.0.db&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> allow-update { key DHCP_UPDATER; };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>MSYS2. Приложения Unix под Windows</title><link>https://yamadharma.github.io/ru/post/2023/09/23/msys2-unix-applications-windows/</link><pubDate>Sat, 23 Sep 2023 15:55:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/23/msys2-unix-applications-windows/</guid><description>&lt;p>MSYS2. Приложения Unix под Windows&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">3&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#команды-запуска">&lt;span class="section-num">3.1&lt;/span> Команды запуска&lt;/a>&lt;/li>
&lt;li>&lt;a href="#автозапуск-команд-при-старте-msys">&lt;span class="section-num">3.2&lt;/span> Автозапуск команд при старте MSYS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переменная-окружения-path">&lt;span class="section-num">3.3&lt;/span> Переменная окружения PATH&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#изменение-переменной-path">&lt;span class="section-num">3.3.1&lt;/span> Изменение переменной PATH&lt;/a>&lt;/li>
&lt;li>&lt;a href="#импорт-path-из-переменной-path-windows">&lt;span class="section-num">3.3.2&lt;/span> Импорт $PATH из переменной %Path% Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#дополнительные-пакеты">&lt;span class="section-num">4&lt;/span> Дополнительные пакеты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#средства-разработки">&lt;span class="section-num">4.1&lt;/span> Средства разработки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#базовые-средства-разработки">&lt;span class="section-num">4.1.1&lt;/span> Базовые средства разработки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#git">&lt;span class="section-num">4.1.2&lt;/span> git&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#терминалы">&lt;span class="section-num">4.2&lt;/span> Терминалы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#mintty">&lt;span class="section-num">4.2.1&lt;/span> Mintty&lt;/a>&lt;/li>
&lt;li>&lt;a href="#konsole">&lt;span class="section-num">4.2.2&lt;/span> Konsole&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файловые-менеджеры">&lt;span class="section-num">4.3&lt;/span> Файловые менеджеры&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#midnight-commander">&lt;span class="section-num">4.3.1&lt;/span> Midnight commander&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#просмотр-pdf">&lt;span class="section-num">4.4&lt;/span> Просмотр Pdf&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#evince">&lt;span class="section-num">4.4.1&lt;/span> Evince&lt;/a>&lt;/li>
&lt;li>&lt;a href="#okular">&lt;span class="section-num">4.4.2&lt;/span> Okular&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#шрифты">&lt;span class="section-num">4.5&lt;/span> Шрифты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#iosevka">&lt;span class="section-num">4.5.1&lt;/span> Iosevka&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#редакторы">&lt;span class="section-num">4.6&lt;/span> Редакторы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#neovim">&lt;span class="section-num">4.6.1&lt;/span> Neovim&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#утилиты-для-удобства">&lt;span class="section-num">4.7&lt;/span> Утилиты для удобства&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#tmux">&lt;span class="section-num">4.7.1&lt;/span> tmux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.msys2.org/" target="_blank" rel="noopener">https://www.msys2.org/&lt;/a>&lt;/li>
&lt;li>Набор инструментов и библиотек, предоставляющий unix-среду для создания, установки и запуска собственного программного обеспечения на Windows.&lt;/li>
&lt;li>Частично использует Cygwin.
&lt;ul>
&lt;li>Подобно Cygwin делается замена путей в стиле UNIX, маскируется расширение &lt;code>.exe&lt;/code>, поддерживаются псевдотерминалы, UNIX-сигналы.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Содержит:
&lt;ul>
&lt;li>терминал командной строки mintty;&lt;/li>
&lt;li>bash;&lt;/li>
&lt;li>системы контроля версий (git, subversion);&lt;/li>
&lt;li>базовые инструменты (tar, awk);&lt;/li>
&lt;li>пакетный менеджер &lt;code>packman&lt;/code> (из Arch Linux).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Дополнительное программное обеспечение используется из проекта Mingw-w64 (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/09/22/mingw-w64-unix-applications-windows/">MinGW-w64. Приложения Unix под Windows&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Установка с помощью Chocolatey (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install msys2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Далее, возможно, придётся перелогиниться или перегрузиться.&lt;/li>
&lt;li>Запустите &lt;code>msys2&lt;/code> (через ярлык или через поиск).&lt;/li>
&lt;li>Возможно будет необходимо обновить основные системные пакеты MSYS2 и базу данных с информацией об доступных пакетах:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -Syu
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Также может потребоваться обновить другие установленные пакеты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -Su
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">3&lt;/span> Настройка&lt;/h2>
&lt;h3 id="команды-запуска">&lt;span class="section-num">3.1&lt;/span> Команды запуска&lt;/h3>
&lt;ul>
&lt;li>По умолчанию создаются несколько команд запуска.&lt;/li>
&lt;li>Все они запускают команду &lt;code>msys2_shell.cmd&lt;/code> с разными параметрами.&lt;/li>
&lt;li>Этот пакетный фал запускает необходимое окружение в параметрами, заданными в соответствующем &lt;code>.ini&lt;/code>-файле.&lt;/li>
&lt;li>Например, ярлык &lt;code>MSYS2 MinGW x64&lt;/code> содержит в себе следующую командную строку запуска:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">C:&lt;span class="se">\t&lt;/span>ools&lt;span class="se">\m&lt;/span>sys64&lt;span class="se">\m&lt;/span>sys2_shell.cmd -mingw64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Будем использовать окружение &lt;code>mingw64&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="автозапуск-команд-при-старте-msys">&lt;span class="section-num">3.2&lt;/span> Автозапуск команд при старте MSYS&lt;/h3>
&lt;ul>
&lt;li>Автоматически запускемые команды можно прописать двумя способами:
&lt;ul>
&lt;li>если их добавить в конец файла &lt;code>.bash_profile&lt;/code>, который находится в домашнем каталоге пользователя (домашние каталоги пользователей хранятся в каталогах папки &lt;code>c:\tools\msys64\home\&lt;/code>);&lt;/li>
&lt;li>если их добавить в конец файла &lt;code>c:\tools\msys64\etc\profile&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="переменная-окружения-path">&lt;span class="section-num">3.3&lt;/span> Переменная окружения PATH&lt;/h3>
&lt;h4 id="изменение-переменной-path">&lt;span class="section-num">3.3.1&lt;/span> Изменение переменной PATH&lt;/h4>
&lt;ul>
&lt;li>&lt;code>PATH&lt;/code> можно поменять командой &lt;code>export&lt;/code>.&lt;/li>
&lt;li>Самый простой способ добавить что-либо в конец &lt;code>PATH&lt;/code> (на примере добавления каталога &lt;code>c:\opt\Нужные программы&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$PATH&lt;/span>:&lt;span class="s1">&amp;#39;/c/opt/Нужные программы&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Следует обратить внимание на нотацию Cygwin:
&lt;ul>
&lt;li>в команде перед именем диска &lt;code>C:&lt;/code> стоит прямой слеш;&lt;/li>
&lt;li>после имени диска нет двоеточия;&lt;/li>
&lt;li>в качестве разделителя для элементов пути (директорий) используются прямые слеши;&lt;/li>
&lt;li>если имена файлов и папок содержат пробелы, то весь путь обрамляется кавычками &lt;code>'&lt;/code>;&lt;/li>
&lt;li>завершающий прямой слеш в пути отсутствует.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="импорт-path-из-переменной-path-windows">&lt;span class="section-num">3.3.2&lt;/span> Импорт $PATH из переменной %Path% Windows&lt;/h4>
&lt;ul>
&lt;li>Можно в ini-файле &lt;code>msys2.ini&lt;/code> раскомментировать строчку с переменной &lt;code>MSYS2_PATH_TYPE&lt;/code>, в результате чего в $PATH будут наследоваться значения из системной переменной окружения %Path% Windows:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> &lt;span class="nv">MSYS2_PATH_TYPE&lt;/span>&lt;span class="o">=&lt;/span>inherit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>То же самое нужно сделать для ini-файла запускаемого профиля, например, отредактировать файл &lt;code>mingw64.ini&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="дополнительные-пакеты">&lt;span class="section-num">4&lt;/span> Дополнительные пакеты&lt;/h2>
&lt;h3 id="средства-разработки">&lt;span class="section-num">4.1&lt;/span> Средства разработки&lt;/h3>
&lt;h4 id="базовые-средства-разработки">&lt;span class="section-num">4.1.1&lt;/span> Базовые средства разработки&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Средства разработки содержит группа &lt;code>mingw-w64-x86_64-toolchain&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S mingw-w64-x86_64-toolchain
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Будут предложены для установки несколько пакетов.&lt;/li>
&lt;li>Можно установить все сразу, или избранные.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="git">&lt;span class="section-num">4.1.2&lt;/span> git&lt;/h4>
&lt;ul>
&lt;li>Установка git:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="терминалы">&lt;span class="section-num">4.2&lt;/span> Терминалы&lt;/h3>
&lt;h4 id="mintty">&lt;span class="section-num">4.2.1&lt;/span> Mintty&lt;/h4>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://mintty.github.io/" target="_blank" rel="noopener">https://mintty.github.io/&lt;/a>&lt;/li>
&lt;li>&lt;code>Mintty&lt;/code> является терминальным приложением по умолчанию в MSYS2 и включено в установщик.&lt;/li>
&lt;/ul>
&lt;h4 id="konsole">&lt;span class="section-num">4.2.2&lt;/span> Konsole&lt;/h4>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://konsole.kde.org/" target="_blank" rel="noopener">https://konsole.kde.org/&lt;/a>.&lt;/li>
&lt;li>Установите терминал &lt;em>Konsole&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S mingw-w64-x86_64-konsole
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>По умолчанию &lt;code>konsole&lt;/code> запускает powershell.&lt;/li>
&lt;li>Заменим оболочку на mingw64.&lt;/li>
&lt;li>В строке меню окна Konsole выберите &lt;em>Настройки&lt;/em> &amp;gt; &lt;em>Создать новый профиль&lt;/em>.&lt;/li>
&lt;li>Выберите его в качестве профиля по умолчанию, чтобы всегда открывать среду &lt;em>msys2&lt;/em> при запуске.&lt;/li>
&lt;li>Добавьте имя профиля и следующую команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">C:&lt;span class="se">\t&lt;/span>ools&lt;span class="se">\m&lt;/span>sys64&lt;span class="se">\m&lt;/span>sys2_shell.cmd -defterm -here -no-start -mingw64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Закройте и перезапустите Konsole.&lt;/li>
&lt;/ul>
&lt;h3 id="файловые-менеджеры">&lt;span class="section-num">4.3&lt;/span> Файловые менеджеры&lt;/h3>
&lt;h4 id="midnight-commander">&lt;span class="section-num">4.3.1&lt;/span> Midnight commander&lt;/h4>
&lt;ul>
&lt;li>Установите Midnight commander:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S mc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="просмотр-pdf">&lt;span class="section-num">4.4&lt;/span> Просмотр Pdf&lt;/h3>
&lt;h4 id="evince">&lt;span class="section-num">4.4.1&lt;/span> Evince&lt;/h4>
&lt;ul>
&lt;li>Установите &lt;em>Evince&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S mingw-w64-x86_64-evince
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="okular">&lt;span class="section-num">4.4.2&lt;/span> Okular&lt;/h4>
&lt;ul>
&lt;li>Установим okular:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S mingw-w64-x86_64-okular
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="шрифты">&lt;span class="section-num">4.5&lt;/span> Шрифты&lt;/h3>
&lt;h4 id="iosevka">&lt;span class="section-num">4.5.1&lt;/span> Iosevka&lt;/h4>
&lt;ul>
&lt;li>Шрифты Iosevka с патчами от nerd-fonts:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S mingw-w64-x86_64-ttf-iosevka-nerd mingw-w64-x86_64-ttf-iosevkaterm-nerd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключить эти шрифты к оформлению Konsole у меня не получилось, поэтому я установил шрифты через Chocolatey:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install nerd-fonts-iosevka nerd-fonts-iosevkaterm -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="редакторы">&lt;span class="section-num">4.6&lt;/span> Редакторы&lt;/h3>
&lt;h4 id="neovim">&lt;span class="section-num">4.6.1&lt;/span> Neovim&lt;/h4>
&lt;ul>
&lt;li>Установим &lt;em>neovim&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S mingw-w64-x86_64-neovim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Также можно установить его графический вариант:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S mingw-w64-x86_64-neovim-qt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="утилиты-для-удобства">&lt;span class="section-num">4.7&lt;/span> Утилиты для удобства&lt;/h3>
&lt;h4 id="tmux">&lt;span class="section-num">4.7.1&lt;/span> tmux&lt;/h4>
&lt;ul>
&lt;li>Установим tmux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S tmux
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>MinGW-w64. Приложения Unix под Windows</title><link>https://yamadharma.github.io/ru/post/2023/09/22/mingw-w64-unix-applications-windows/</link><pubDate>Fri, 22 Sep 2023 13:46:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/22/mingw-w64-unix-applications-windows/</guid><description>&lt;p>MinGW-w64. Приложения Unix под Windows.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.mingw-w64.org/" target="_blank" rel="noopener">https://www.mingw-w64.org/&lt;/a>&lt;/li>
&lt;li>Развитие проекта MinGW (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/09/22/mingw-unix-applications-windows/">MinGW. Приложения Unix под Windows&lt;/a>).&lt;/li>
&lt;li>В связи с тем, что в рамках изначального проекта MinGW не обещалось, что в его кодовую базу будут вноситься обновления, связанные с добавлением некоторых новых ключевых элементов Win32 API, а также наиболее необходимой поддержки 64-битной архитектуры, был создан проект MinGW-w64.&lt;/li>
&lt;li>Является новой чистой реализацией портирования GNU Compiler Collection (GCC) под Microsoft Windows, осуществленной изначально компанией OneVision и переданной в 2008 году в общественное пользование (Public Domain).&lt;/li>
&lt;li>Сначала он был предложен на рассмотрение для интеграции с оригинальным проектом MinGW, но был отклонен в связи с подозрением на использование несвободного или проприетарного кода.&lt;/li>
&lt;li>Ведущие разработчики кода MinGW-w64 решили больше не пытаться кооперироваться с проектом MinGW.&lt;/li>
&lt;/ul></description></item><item><title>MinGW. Приложения Unix под Windows</title><link>https://yamadharma.github.io/ru/post/2023/09/22/mingw-unix-applications-windows/</link><pubDate>Fri, 22 Sep 2023 13:22:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/22/mingw-unix-applications-windows/</guid><description>&lt;p>MinGW. Приложения Unix под Windows.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отличия-от-cygwin">&lt;span class="section-num">2&lt;/span> Отличия от Cygwin&lt;/a>&lt;/li>
&lt;li>&lt;a href="#компоненты-mingw">&lt;span class="section-num">3&lt;/span> Компоненты MinGW&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://osdn.net/projects/mingw/" target="_blank" rel="noopener">https://osdn.net/projects/mingw/&lt;/a>.&lt;/li>
&lt;li>MinGW (англ. Minimalist GNU for Windows), ранее mingw32.&lt;/li>
&lt;li>Набор инструментов разработки программного обеспечения для создания приложений под Windows.&lt;/li>
&lt;li>Включает в себя компилятор, родной программный порт GNU Compiler Collection (GCC) под Windows вместе с набором свободно распространяемых библиотек импорта и заголовочных файлов для Windows API.&lt;/li>
&lt;li>В MinGW включены расширения для библиотеки времени выполнения Microsoft Visual C++ для поддержки функциональности C99.&lt;/li>
&lt;li>Поддерживает стандарт C++11.&lt;/li>
&lt;/ul>
&lt;h2 id="отличия-от-cygwin">&lt;span class="section-num">2&lt;/span> Отличия от Cygwin&lt;/h2>
&lt;ul>
&lt;li>Цель Cygwin &amp;mdash; предоставить полный слой POSIX (подобный тому, который находится в Linux и других Unix-системах) над Windows, жертвуя производительностью там, где это необходимо для совместимости.&lt;/li>
&lt;li>Цель MinGW &amp;mdash; предоставление нативной функциональности и производительности посредством прямых вызовов Windows API.&lt;/li>
&lt;li>В отличие от Cygwin, MinGW не нуждается в DLL-слое совместимости и, таким образом, программы не обязаны распространяться с исходным кодом.&lt;/li>
&lt;li>Вследствие того, что MinGW использует вызовы Win32 API, он не может предоставить полного POSIX API.&lt;/li>
&lt;li>Нельзя скомпилировать некоторые приложения Unix, которые могут быть скомпилированы с Cygwin (приложения, требующие &lt;code>fork()&lt;/code>, &lt;code>mmap()&lt;/code> или &lt;code>ioctl()&lt;/code>).&lt;/li>
&lt;/ul>
&lt;h2 id="компоненты-mingw">&lt;span class="section-num">3&lt;/span> Компоненты MinGW&lt;/h2>
&lt;ul>
&lt;li>GNU toolchain (gcc, binutils).&lt;/li>
&lt;li>Компонент MSYS (Minimal SYStem) предоставляет win32-порты окружения легковесной Unix-подобной оболочки, включающей rxvt и набор инструментов POSIX.&lt;/li>
&lt;/ul></description></item><item><title>Pdf. Просмотр. Zathura</title><link>https://yamadharma.github.io/ru/post/2023/09/20/pdf-viewer-zathura/</link><pubDate>Wed, 20 Sep 2023 13:12:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/20/pdf-viewer-zathura/</guid><description>&lt;p>Zathura &amp;mdash; программа просмотра pdf-файлов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#особенности">&lt;span class="section-num">1.1&lt;/span> Особенности&lt;/a>&lt;/li>
&lt;li>&lt;a href="#режимы">&lt;span class="section-num">1.2&lt;/span> Режимы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#поддерживаемые-форматы-документов">&lt;span class="section-num">1.3&lt;/span> Поддерживаемые форматы документов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#комбинации-клавиш">&lt;span class="section-num">2&lt;/span> Комбинации клавиш&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#стандартные-комбинации">&lt;span class="section-num">2.1&lt;/span> Стандартные комбинации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#модификаторы-комбинаций">&lt;span class="section-num">2.2&lt;/span> Модификаторы комбинаций&lt;/a>&lt;/li>
&lt;li>&lt;a href="#emacs-подобная-конфигурация">&lt;span class="section-num">2.3&lt;/span> Emacs-подобная конфигурация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройки">&lt;span class="section-num">3&lt;/span> Настройки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-как-приложения-по-умолчанию">&lt;span class="section-num">3.1&lt;/span> Установка как приложения по умолчанию&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурационный-файл">&lt;span class="section-num">3.2&lt;/span> Конфигурационный файл&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#буфер-обмена">&lt;span class="section-num">4.1&lt;/span> Буфер обмена&lt;/a>&lt;/li>
&lt;li>&lt;a href="#разное">&lt;span class="section-num">4.2&lt;/span> Разное&lt;/a>&lt;/li>
&lt;li>&lt;a href="#режимы">&lt;span class="section-num">4.3&lt;/span> Режимы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#нормальный-режим">&lt;span class="section-num">4.3.1&lt;/span> Нормальный режим&lt;/a>&lt;/li>
&lt;li>&lt;a href="#полноэкранный-режим">&lt;span class="section-num">4.3.2&lt;/span> Полноэкранный режим&lt;/a>&lt;/li>
&lt;li>&lt;a href="#режим-работы-с-оглавлением">&lt;span class="section-num">4.3.3&lt;/span> Режим работы с оглавлением&lt;/a>&lt;/li>
&lt;li>&lt;a href="#режим-презентации">&lt;span class="section-num">4.3.4&lt;/span> Режим презентации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://pwmt.org/projects/zathura/" target="_blank" rel="noopener">https://pwmt.org/projects/zathura/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/pwmt/zathura.git" target="_blank" rel="noopener">https://github.com/pwmt/zathura.git&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="особенности">&lt;span class="section-num">1.1&lt;/span> Особенности&lt;/h3>
&lt;ul>
&lt;li>Keyboard Driven, сочетания клавиш очень похожи на Vim.&lt;/li>
&lt;li>Минималистичный дизайн.&lt;/li>
&lt;li>Автоматически перезагружать файл при обнаружении изменений.
&lt;ul>
&lt;li>В отличие, например, от Evince Zathura отслеживает имя файла, а не &lt;em>inode&lt;/em>.&lt;/li>
&lt;li>Поэтому, при переименовании файла Zathura его теряет.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="режимы">&lt;span class="section-num">1.2&lt;/span> Режимы&lt;/h3>
&lt;ul>
&lt;li>Просмотр документов (основной режим)&lt;/li>
&lt;li>Оглавлениу (&lt;code>tab&lt;/code>)&lt;/li>
&lt;li>Презентация (&lt;code>F5&lt;/code>)&lt;/li>
&lt;li>Полноэкранный режим (&lt;code>F11&lt;/code>)&lt;/li>
&lt;/ul>
&lt;h3 id="поддерживаемые-форматы-документов">&lt;span class="section-num">1.3&lt;/span> Поддерживаемые форматы документов&lt;/h3>
&lt;ul>
&lt;li>Поддерживает различные форматы с помощью плагинов:&lt;/li>
&lt;/ul>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Поддерживаемые форматы документов
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Формат&lt;/th>
&lt;th>Плагин&lt;/th>
&lt;th>Библиотека для рендеринга&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>PDF&lt;/td>
&lt;td>zathura-pdf-poppler&lt;/td>
&lt;td>poppler&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PDF&lt;/td>
&lt;td>zathura-pdf-mupdf&lt;/td>
&lt;td>mupdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DjVu&lt;/td>
&lt;td>zathura-djvu&lt;/td>
&lt;td>djvulibre&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PostScript&lt;/td>
&lt;td>zathura-ps&lt;/td>
&lt;td>libspectre&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Comic Book Archive&lt;/td>
&lt;td>zathura-cb&lt;/td>
&lt;td>libarchive&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>epub&lt;/td>
&lt;td>zathura-pdf-mupdf&lt;/td>
&lt;td>mupdf&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>Не поддерживается работа с pdf-формами.&lt;/li>
&lt;li>Не поддерживается работа с аннотированием pdf.&lt;/li>
&lt;/ul>
&lt;h2 id="комбинации-клавиш">&lt;span class="section-num">2&lt;/span> Комбинации клавиш&lt;/h2>
&lt;h3 id="стандартные-комбинации">&lt;span class="section-num">2.1&lt;/span> Стандартные комбинации&lt;/h3>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 2:&lt;/span>
Комбинация клавиш Zathura в основном режиме
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Комбинации клавиш&lt;/th>
&lt;th>Значение комбинаций&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>J&lt;/code>, &lt;code>K&lt;/code>&lt;/td>
&lt;td>перейти на следующую, предыдущую страницу&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>h&lt;/code>, &lt;code>k&lt;/code>, &lt;code>j&lt;/code>, &lt;code>l&lt;/code>&lt;/td>
&lt;td>прокрутка влево, вверх, вниз, вправо&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>←&lt;/code>, &lt;code>↑&lt;/code>, &lt;code>↓&lt;/code>, →&lt;/td>
&lt;td>прокрутка влево, вверх, вниз, вправо&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+t&lt;/code>, &lt;code>Ctrl+y&lt;/code>,&lt;/td>
&lt;td>прокрутка влево, вправо на полстраницы&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+u&lt;/code>, &lt;code>Ctrl+d&lt;/code>&lt;/td>
&lt;td>прокрутка вверх, вниз на полстраницы&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+f&lt;/code>, &lt;code>Ctrl+b&lt;/code>&lt;/td>
&lt;td>прокрутка вверх, вниз на страницу&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gg&lt;/code>, &lt;code>G&lt;/code>, &lt;code>nG&lt;/code>, &lt;code>ngg&lt;/code>&lt;/td>
&lt;td>в начало, в конец, на n-ую страницу документа&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>a&lt;/code>, &lt;code>s&lt;/code>&lt;/td>
&lt;td>вместить страницу по высоте, по ширине&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>d&lt;/code>&lt;/td>
&lt;td>просмотр разворота&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/&lt;/code>, &lt;code>?&lt;/code>&lt;/td>
&lt;td>поиск по тексту&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Shift+/&lt;/code>&lt;/td>
&lt;td>обратный поиск по тексту&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>n&lt;/code>, &lt;code>N&lt;/code>&lt;/td>
&lt;td>перейти к следующему, предыдущему результату поиска&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>o&lt;/code>, &lt;code>O&lt;/code>&lt;/td>
&lt;td>открыть документ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>f&lt;/code>&lt;/td>
&lt;td>перейти по ссылке&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>F&lt;/code>&lt;/td>
&lt;td>показать адрес ссылки&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>r&lt;/code>, &lt;code>nr&lt;/code>&lt;/td>
&lt;td>поворот по часовой стрелке, поворот &lt;code>n&lt;/code> раз&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+r&lt;/code>&lt;/td>
&lt;td>инвертировать цвета (в ЧБ)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>R&lt;/code>&lt;/td>
&lt;td>перезагрузить документ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>+&lt;/code>, &lt;code>-&lt;/code>, =&lt;/td>
&lt;td>увеличить, уменьшить, оригинальный размер&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>q&lt;/code>&lt;/td>
&lt;td>выход&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 3:&lt;/span>
Комбинация клавиш Zathura в режиме оглавления
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Комбинации клавиш&lt;/th>
&lt;th>Значение комбинаций&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>l&lt;/code>&lt;/td>
&lt;td>Развернуть пункт&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>L&lt;/code>&lt;/td>
&lt;td>Развернуть все&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>h&lt;/code>&lt;/td>
&lt;td>Свернуть&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>H&lt;/code>&lt;/td>
&lt;td>Свернуть все&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>k&lt;/code>, &lt;code>j&lt;/code>&lt;/td>
&lt;td>Перемещение на пункт выше, ниже&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Space&lt;/code>, &lt;code>Enter&lt;/code>&lt;/td>
&lt;td>Выбрать и открыть пункт&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 4:&lt;/span>
Переключение режимов
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Комбинации клавиш&lt;/th>
&lt;th>Значение комбинаций&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>F11&lt;/code>&lt;/td>
&lt;td>Полноэкранный режим&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>:&lt;/code>&lt;/td>
&lt;td>Режим ввода команд&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>F5&lt;/code>&lt;/td>
&lt;td>Режим презентации&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Tab&lt;/code>&lt;/td>
&lt;td>Переключение в режим оглавления и обратно&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Esc&lt;/code>&lt;/td>
&lt;td>Обычный режим&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 5:&lt;/span>
Команды (вводимые после :)
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Команда&lt;/th>
&lt;th>Описание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>bmark&lt;/code>&lt;/td>
&lt;td>Сохранить закладку&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>bdelete&lt;/code>&lt;/td>
&lt;td>Удалить закладку&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>blist&lt;/code>&lt;/td>
&lt;td>Список закладок&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>close&lt;/code>&lt;/td>
&lt;td>Закрыть документ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>exec&lt;/code>&lt;/td>
&lt;td>Выполнить внешнюю команду&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>info&lt;/code>&lt;/td>
&lt;td>Показать информацию о документе&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>help&lt;/code>&lt;/td>
&lt;td>Показать справочную страницу&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>open&lt;/code>, &lt;code>o&lt;/code>&lt;/td>
&lt;td>Открыть документ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>offset&lt;/code>&lt;/td>
&lt;td>Настройка смещения страницы&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>print&lt;/code>&lt;/td>
&lt;td>Печать документа&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>write&lt;/code>, &lt;code>write!&lt;/code>&lt;/td>
&lt;td>Сохранить документ, принудительная перезапись&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>export&lt;/code>&lt;/td>
&lt;td>Экспорт приложений (Export attachments)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="модификаторы-комбинаций">&lt;span class="section-num">2.2&lt;/span> Модификаторы комбинаций&lt;/h3>
&lt;ul>
&lt;li>Везде, где это имеет смысл, перед командой можно ставить число для повторения команды соответствующее число раз, например:&lt;/li>
&lt;li>&lt;code>10 J&lt;/code> : перейти на 10 страниц вперёд;&lt;/li>
&lt;li>&lt;code>3 r&lt;/code> : повернуть 3 раза по часовой стрелке (что эквивалентно одному разу против часовой).&lt;/li>
&lt;/ul>
&lt;h3 id="emacs-подобная-конфигурация">&lt;span class="section-num">2.3&lt;/span> Emacs-подобная конфигурация&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://web.archive.org/web/20220815064614/https://gist.github.com/ne9z/8778d614b90b85dfe8f6b698ad758f36" target="_blank" rel="noopener">https://web.archive.org/web/20220815064614/https://gist.github.com/ne9z/8778d614b90b85dfe8f6b698ad758f36&lt;/a>&lt;/li>
&lt;li>Конфигурационный файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Being an Emacs user, it is natural for me to use emacs-like and info-like keybindings for zathura.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Zathura configuration documentation is available at&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://git.pwmt.org/pwmt/zathura/-/blob/e5d2ca487147e79d0bb7acbf5174cd9dcc92a86c/doc/man/zathurarc.5.rst&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># A full list of available functions and default keybindings is available at&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://git.pwmt.org/pwmt/zathura/-/blob/e5d2ca487147e79d0bb7acbf5174cd9dcc92a86c/zathura/config.c#L301&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># If you want to integrate Zathura with Emacs AUCTeX mode, see&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># [emacs wiki](https://www.emacswiki.org/emacs/AUCTeX).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Put the following inside `$XDG_CONFIG_HOME/zathura/zathurarc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## niceties&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># when selecting text with mouse,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># copy to clipboard&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">selection&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clipboard&lt;/span> &lt;span class="n">clipboard&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># keep several lines of text when&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># scrolling a screenful&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">scroll&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">overlap&lt;/span> &lt;span class="mf">0.2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># see documentation for details&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">scroll&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">aware&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">window&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">basename&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">adjust&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">open&lt;/span> &lt;span class="n">width&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">statusbar&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tilde&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">vertical&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">center&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">synctex&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># large bold font easier on the eyes in index mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># status bar can be disabled with A-s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">font&lt;/span> &lt;span class="s2">&amp;#34;FreeSans bold 16&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">zoom&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">step&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;lt;&amp;gt;&lt;/span> &lt;span class="n">goto&lt;/span> &lt;span class="n">top&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">goto&lt;/span> &lt;span class="n">bottom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">adjust_window&lt;/span> &lt;span class="n">best&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="n">adjust_window&lt;/span> &lt;span class="n">width&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">F&lt;/span> &lt;span class="n">display_link&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">copy_link&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="n">follow&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="n">mark_add&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="s1">&amp;#39; mark_evaluate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="p">,&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="o">.&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Right&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Left&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PageDown&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PageUp&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">P&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nb">print&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="n">recolor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">R&lt;/span> &lt;span class="n">reload&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="n">rotate&lt;/span> &lt;span class="n">rotate_cw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">V&lt;/span> &lt;span class="n">rotate&lt;/span> &lt;span class="n">rotate_ccw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Left&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Up&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Down&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Right&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">V&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">V&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Return&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Space&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">BackSpace&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">S&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Space&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="n">jumplist&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="n">jumplist&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">bisect&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">bisect&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># still need to use &amp;#39;/&amp;#39; to trigger search&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">search&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">search&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">p&lt;/span> &lt;span class="n">snap_to_page&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Tab&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_statusbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">focus_inputbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">d&lt;/span> &lt;span class="n">toggle_page_mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">q&lt;/span> &lt;span class="n">quit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="ow">in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="n">out&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="ow">in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">P&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_presentation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">F&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="n">toggle_fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="n">toggle_fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">q&lt;/span> &lt;span class="n">toggle_fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;lt;&amp;gt;&lt;/span> &lt;span class="n">goto&lt;/span> &lt;span class="n">top&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">goto&lt;/span> &lt;span class="n">bottom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">adjust_window&lt;/span> &lt;span class="n">best&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="n">adjust_window&lt;/span> &lt;span class="n">width&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">F&lt;/span> &lt;span class="n">display_link&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">copy_link&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="n">follow&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="n">mark_add&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="s1">&amp;#39; mark_evaluate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="p">,&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="o">.&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Right&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Left&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PageDown&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PageUp&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">P&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nb">print&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="n">recolor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">R&lt;/span> &lt;span class="n">reload&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="n">rotate&lt;/span> &lt;span class="n">rotate_cw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">V&lt;/span> &lt;span class="n">rotate&lt;/span> &lt;span class="n">rotate_ccw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Left&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Up&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Down&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Right&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">V&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">V&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Return&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Space&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">BackSpace&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">S&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Space&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="n">jumplist&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="n">jumplist&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">bisect&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">bisect&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">search&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">search&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">p&lt;/span> &lt;span class="n">snap_to_page&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Tab&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_statusbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">focus_inputbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">d&lt;/span> &lt;span class="n">toggle_page_mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="ow">in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="n">out&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="ow">in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># status bar will obscure last item in index mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_statusbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">q&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">BackSpace&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">top&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">bottom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;lt;&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">top&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">bottom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">collapse&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">expand&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">expand&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">all&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">collapse&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">all&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Up&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Down&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Left&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">collapse&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Right&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">expand&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">select&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Space&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">select&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Return&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">select&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate_index&lt;/span> &lt;span class="n">select&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Esc&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Down&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Right&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PageDown&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Space&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Left&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Up&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PageUp&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">S&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Space&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">BackSpace&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">F5&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_presentation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">q&lt;/span> &lt;span class="n">toggle_presentation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;lt;&amp;gt;&lt;/span> &lt;span class="n">goto&lt;/span> &lt;span class="n">top&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">presentation&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">goto&lt;/span> &lt;span class="n">bottom&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройки">&lt;span class="section-num">3&lt;/span> Настройки&lt;/h2>
&lt;h3 id="установка-как-приложения-по-умолчанию">&lt;span class="section-num">3.1&lt;/span> Установка как приложения по умолчанию&lt;/h3>
&lt;ul>
&lt;li>Приложение по умолчанию устанавливается с помощью &lt;em>xdg-utils&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/04/02/xdg-mime-applications/">XDG. Приложения MIME&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-mime default org.pwmt.zathura.desktop application/pdf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xdg-mime default org.pwmt.zathura.desktop image/vnd.djvu+multipage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xdg-mime default org.pwmt.zathura.desktop application/postscript
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xdg-mime default org.pwmt.zathura.desktop image/x-eps
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурационный-файл">&lt;span class="section-num">3.2&lt;/span> Конфигурационный файл&lt;/h3>
&lt;ul>
&lt;li>Конфигурационный файл: &lt;code>~/.config/zathura/zathurarc&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/h2>
&lt;ul>
&lt;li>Конфигурационный файл: &lt;code>~/.config/zathura/zathurarc&lt;/code>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># -*- mode: conf-unix -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Zathura configuration file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## See man `man zathurarc&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Open document in fit-width mode by default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">adjust&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">open&lt;/span> &lt;span class="s2">&amp;#34;best-fit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## One page per row by default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">pages&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">per&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">row&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Stop at page boundries&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">scroll&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">aware&lt;/span> &lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">smooth&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scroll&lt;/span> &lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">scroll&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">overlap&lt;/span> &lt;span class="mf">0.01&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">scroll&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">step&lt;/span> &lt;span class="mi">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Zoom settings&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">zoom&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">min&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">zoom&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">step&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">guioptions&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># keep several lines of text when&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># scrolling a screenful&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">scroll&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">overlap&lt;/span> &lt;span class="mf">0.2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># see documentation for details&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">scroll&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">aware&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">window&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">basename&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">adjust&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">open&lt;/span> &lt;span class="n">width&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">statusbar&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tilde&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">vertical&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">center&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">synctex&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># large bold font easier on the eyes in index mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># status bar can be disabled with A-s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">font&lt;/span> &lt;span class="s2">&amp;#34;Iosevka 12&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">render&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">loading&lt;/span> &lt;span class="s2">&amp;#34;false&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="n">scroll&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">step&lt;/span> &lt;span class="mi">50&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">unmap&lt;/span> &lt;span class="n">f&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="n">toggle_fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="n">toggle_fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 1:&lt;/span>
~/.config/zathura/zathurarc
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h3 id="буфер-обмена">&lt;span class="section-num">4.1&lt;/span> Буфер обмена&lt;/h3>
&lt;ul>
&lt;li>Выделение мышью копируется в буфер обмена, а не в &lt;em>x11 primary selection&lt;/em>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Enable copy to clipboard when selecting text with mouse
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set selection-clipboard clipboard
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 2:&lt;/span>
~/.config/zathura/zathurarc
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h3 id="разное">&lt;span class="section-num">4.2&lt;/span> Разное&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Enable incremental search
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set incremental-search true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Disable sandbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set sandbox none
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Zoom
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map &amp;lt;C-i&amp;gt; zoom in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map &amp;lt;C-o&amp;gt; zoom out
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 3:&lt;/span>
~/.config/zathura/zathurarc
&lt;/div>
&lt;h3 id="режимы">&lt;span class="section-num">4.3&lt;/span> Режимы&lt;/h3>
&lt;h4 id="нормальный-режим">&lt;span class="section-num">4.3.1&lt;/span> Нормальный режим&lt;/h4>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 6:&lt;/span>
Комбинация клавиш Zathura в основном режиме
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Комбинации vi&lt;/th>
&lt;th>Комбинации emacs&lt;/th>
&lt;th>Значение комбинаций&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>J&lt;/code>, &lt;code>K&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>перейти на следующую, предыдущую страницу&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>h&lt;/code>, &lt;code>k&lt;/code>, &lt;code>j&lt;/code>, &lt;code>l&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>прокрутка влево, вверх, вниз, вправо&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>←&lt;/code>, &lt;code>↑&lt;/code>, &lt;code>↓&lt;/code>, →&lt;/td>
&lt;td>&lt;/td>
&lt;td>прокрутка влево, вверх, вниз, вправо&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+t&lt;/code>, &lt;code>Ctrl+y&lt;/code>,&lt;/td>
&lt;td>&lt;/td>
&lt;td>прокрутка влево, вправо на полстраницы&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+u&lt;/code>, &lt;code>Ctrl+d&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>прокрутка вверх, вниз на полстраницы&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+f&lt;/code>, &lt;code>Ctrl+b&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>прокрутка вверх, вниз на страницу&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gg&lt;/code>, &lt;code>G&lt;/code>, &lt;code>nG&lt;/code>, &lt;code>ngg&lt;/code>&lt;/td>
&lt;td>&lt;code>A-&amp;lt;&lt;/code>, &lt;code>A-&amp;gt;&lt;/code>&lt;/td>
&lt;td>в начало, в конец, на n-ую страницу документа&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>a&lt;/code>, &lt;code>s&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>вместить страницу по высоте, по ширине&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>d&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>просмотр разворота&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/&lt;/code>, &lt;code>?&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>поиск по тексту&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Shift+/&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>обратный поиск по тексту&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>n&lt;/code>, &lt;code>N&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>перейти к следующему, предыдущему результату поиска&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>o&lt;/code>, &lt;code>O&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>открыть документ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>f&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>перейти по ссылке&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>F&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>показать адрес ссылки&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>r&lt;/code>, &lt;code>nr&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>поворот по часовой стрелке, поворот &lt;code>n&lt;/code> раз&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Ctrl+r&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>инвертировать цвета (в ЧБ)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>R&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;td>перезагрузить документ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>+&lt;/code>, &lt;code>-&lt;/code>, =&lt;/td>
&lt;td>&lt;/td>
&lt;td>увеличить, уменьшить, оригинальный размер&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>q&lt;/code>&lt;/td>
&lt;td>&lt;code>q&lt;/code>&lt;/td>
&lt;td>выход&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;code>C-P&lt;/code>&lt;/td>
&lt;td>печать&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;!--list-separator-->
&lt;ol>
&lt;li>Стандартные комбинации&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Комбинации emacs&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Emacs-like keybindings&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;lt;&amp;gt;&lt;/span> &lt;span class="n">goto&lt;/span> &lt;span class="n">top&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">goto&lt;/span> &lt;span class="n">bottom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">adjust_window&lt;/span> &lt;span class="n">best&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="n">adjust_window&lt;/span> &lt;span class="n">width&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">F&lt;/span> &lt;span class="n">display_link&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">copy_link&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="n">follow&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="n">mark_add&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="s1">&amp;#39; mark_evaluate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="p">,&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="o">.&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Right&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Left&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PageDown&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PageUp&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">P&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nb">print&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="n">recolor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">R&lt;/span> &lt;span class="n">reload&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="n">rotate&lt;/span> &lt;span class="n">rotate_cw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">V&lt;/span> &lt;span class="n">rotate&lt;/span> &lt;span class="n">rotate_ccw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Left&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Up&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Down&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Right&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">V&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">V&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Return&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Space&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">BackSpace&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">S&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Space&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="n">jumplist&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="n">jumplist&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">bisect&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">bisect&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># still need to use &amp;#39;/&amp;#39; to trigger search&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">search&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">search&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">p&lt;/span> &lt;span class="n">snap_to_page&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Tab&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_statusbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">focus_inputbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">d&lt;/span> &lt;span class="n">toggle_page_mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">q&lt;/span> &lt;span class="n">quit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="ow">in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="n">out&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="ow">in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">P&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_presentation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">F&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">normal&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="n">toggle_fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 4:&lt;/span>
~/.config/zathura/zathurarc
&lt;/div>
&lt;/li>
&lt;/ol>
&lt;h4 id="полноэкранный-режим">&lt;span class="section-num">4.3.2&lt;/span> Полноэкранный режим&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="n">toggle_fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">q&lt;/span> &lt;span class="n">toggle_fullscreen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">abort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;lt;&amp;gt;&lt;/span> &lt;span class="n">goto&lt;/span> &lt;span class="n">top&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>\&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">goto&lt;/span> &lt;span class="n">bottom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">adjust_window&lt;/span> &lt;span class="n">best&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="n">adjust_window&lt;/span> &lt;span class="n">width&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">F&lt;/span> &lt;span class="n">display_link&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">copy_link&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="n">follow&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="n">mark_add&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="s1">&amp;#39; mark_evaluate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="p">,&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> \&lt;span class="o">.&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Right&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">next&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Left&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">navigate&lt;/span> &lt;span class="n">previous&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PageDown&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PageUp&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">P&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nb">print&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="n">recolor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">R&lt;/span> &lt;span class="n">reload&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="n">rotate&lt;/span> &lt;span class="n">rotate_cw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">V&lt;/span> &lt;span class="n">rotate&lt;/span> &lt;span class="n">rotate_ccw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Left&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Up&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Down&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Right&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">V&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">V&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">half&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Return&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Space&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">BackSpace&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">S&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Space&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scroll&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="n">jumplist&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="n">jumplist&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">bisect&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">bisect&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">search&lt;/span> &lt;span class="n">forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">search&lt;/span> &lt;span class="n">backward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">p&lt;/span> &lt;span class="n">snap_to_page&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Tab&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">toggle_statusbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">focus_inputbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">d&lt;/span> &lt;span class="n">toggle_page_mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="ow">in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="n">out&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">map&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">fullscreen&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zoom&lt;/span> &lt;span class="ow">in&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 5:&lt;/span>
~/.config/zathura/zathurarc
&lt;/div>
&lt;h4 id="режим-работы-с-оглавлением">&lt;span class="section-num">4.3.3&lt;/span> Режим работы с оглавлением&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># status bar will obscure last item in index mode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;A-s&amp;gt; toggle_statusbar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] q toggle_index
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] i toggle_index
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-p&amp;gt; navigate_index up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-h&amp;gt; navigate_index up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;BackSpace&amp;gt; navigate_index up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-n&amp;gt; navigate_index down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;A-v&amp;gt; navigate_index up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-v&amp;gt; navigate_index down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] \&amp;lt; navigate_index top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] \&amp;gt; navigate_index bottom
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;A-\&amp;lt;&amp;gt; navigate_index top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;A-\&amp;gt;&amp;gt; navigate_index bottom
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-b&amp;gt; navigate_index collapse
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-f&amp;gt; navigate_index expand
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-i&amp;gt; navigate_index expand-all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;A-i&amp;gt; navigate_index collapse-all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;Up&amp;gt; navigate_index up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;Down&amp;gt; navigate_index down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;Left&amp;gt; navigate_index collapse
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;Right&amp;gt; navigate_index expand
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-m&amp;gt; navigate_index select
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;Space&amp;gt; navigate_index select
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;Return&amp;gt; navigate_index select
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-j&amp;gt; navigate_index select
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;Esc&amp;gt; toggle_index
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-[&amp;gt; toggle_index
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-g&amp;gt; toggle_index
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [index] &amp;lt;C-c&amp;gt; toggle_index
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 6:&lt;/span>
~/.config/zathura/zathurarc
&lt;/div>
&lt;h4 id="режим-презентации">&lt;span class="section-num">4.3.4&lt;/span> Режим презентации&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">map [presentation] i toggle_index
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] r navigate next
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;Down&amp;gt; navigate next
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;Right&amp;gt; navigate next
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;PageDown&amp;gt; navigate next
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;Space&amp;gt; navigate next
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] l navigate previous
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;Left&amp;gt; navigate previous
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;Up&amp;gt; navigate previous
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;PageUp&amp;gt; navigate previous
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;S-Space&amp;gt; navigate previous
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;BackSpace&amp;gt; navigate previous
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;F5&amp;gt; toggle_presentation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] q toggle_presentation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;C-h&amp;gt; navigate previous
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;M-v&amp;gt; navigate previous
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;C-v&amp;gt; navigate next
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;A-\&amp;lt;&amp;gt; goto top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map [presentation] &amp;lt;A-\&amp;gt;&amp;gt; goto bottom
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 7:&lt;/span>
~/.config/zathura/zathurarc
&lt;/div></description></item><item><title>DNS. Bind. Установка сервера</title><link>https://yamadharma.github.io/ru/post/2023/09/19/dns-bind-server-install/</link><pubDate>Tue, 19 Sep 2023 14:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/19/dns-bind-server-install/</guid><description>&lt;p>Установка сервера DNS &lt;em>Bind&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#установка-bind">&lt;span class="section-num">1&lt;/span> Установка Bind&lt;/a>&lt;/li>
&lt;li>&lt;a href="#актуальные-версии-bind">&lt;span class="section-num">2&lt;/span> Актуальные версии Bind&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2.1&lt;/span> Установка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка-брандмауэра">&lt;span class="section-num">3&lt;/span> Настройка брандмауэра&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-bind">&lt;span class="section-num">4&lt;/span> Запуск Bind&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="установка-bind">&lt;span class="section-num">1&lt;/span> Установка Bind&lt;/h2>
&lt;ul>
&lt;li>Устанавливаем DNS-сервер следующей командой:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install &lt;span class="nb">bind&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="актуальные-версии-bind">&lt;span class="section-num">2&lt;/span> Актуальные версии Bind&lt;/h2>
&lt;ul>
&lt;li>Можно устанавливать не версию bind, поставляемую с системой, а актуальную.&lt;/li>
&lt;li>Сайт: &lt;a href="https://copr.fedorainfracloud.org/coprs/isc/bind/" target="_blank" rel="noopener">https://copr.fedorainfracloud.org/coprs/isc/bind/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="установка">&lt;span class="section-num">2.1&lt;/span> Установка&lt;/h3>
&lt;ul>
&lt;li>Подключить репозиторий:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf copr &lt;span class="nb">enable&lt;/span> isc/bind
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установить коллекцию программного обеспечения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install isc-bind
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Коллекция программного обеспечения BIND 9 состоит из нескольких пакетов:
&lt;ul>
&lt;li>&lt;code>isc-bind-bind&lt;/code> : содержит &lt;code>named&lt;/code>, &lt;code>rndc&lt;/code>, утилиты DNSSEC и соответствующие конфигурационные файлы;&lt;/li>
&lt;li>&lt;code>isc-bind-bind-utils&lt;/code> : содержит другие утилиты BIND 9 (&lt;code>dig&lt;/code>, &lt;code>nsupdate&lt;/code>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Файл конфигурации:
&lt;ul>
&lt;li>&lt;code>/etc/opt/isc/scls/isc-bind/named.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Параметры командной строки для демона можно указать в файле:
&lt;ul>
&lt;li>&lt;code>/etc/opt/isc/scls/isc-bind/sysconfig/named&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Запустить демон:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl start isc-bind-named
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Утилита BIND 9, установленные пакетами SCL, недоступны в &lt;code>$PATH&lt;/code> по умолчанию.&lt;/li>
&lt;li>Чтобы иметь возможность их использовать, сделайте следующее:
&lt;ul>
&lt;li>включить коллекцию программного обеспечения для текущей оболочки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">scl &lt;span class="nb">enable&lt;/span> isc-bind bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>чтобы включить коллекцию программного обеспечения внутри сценария оболочки, добавьте следующую строку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> scl_source &lt;span class="nb">enable&lt;/span> isc-bind
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-брандмауэра">&lt;span class="section-num">3&lt;/span> Настройка брандмауэра&lt;/h2>
&lt;ul>
&lt;li>Настроим правила брандмауэра:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-service&lt;span class="o">=&lt;/span>dns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --runtime-to-permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="запуск-bind">&lt;span class="section-num">4&lt;/span> Запуск Bind&lt;/h2>
&lt;ul>
&lt;li>Запускаем &lt;em>bind&lt;/em> и включаем автозапуск:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now named
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>DNS. Bind</title><link>https://yamadharma.github.io/ru/post/2023/09/19/dns-bind/</link><pubDate>Tue, 19 Sep 2023 14:32:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/19/dns-bind/</guid><description>&lt;p>Сервер DNS &lt;em>Bind&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">1&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#безопасность">&lt;span class="section-num">2&lt;/span> Безопасность&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администрирование">&lt;span class="section-num">3&lt;/span> Администрирование&lt;/a>&lt;/li>
&lt;li>&lt;a href="#взаимодействие-с-другими-сервисами">&lt;span class="section-num">4&lt;/span> Взаимодействие с другими сервисами&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="установка">&lt;span class="section-num">1&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/19/dns-bind-server-install/">DNS. Bind. Установка сервера&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="безопасность">&lt;span class="section-num">2&lt;/span> Безопасность&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/16/dns-bind-dnssec/">DNS. Bind. DNSSEC&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="администрирование">&lt;span class="section-num">3&lt;/span> Администрирование&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/28/nsupdate-dynamic-dns-editor/">nsupdate: динамический редактор зон DNS&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="взаимодействие-с-другими-сервисами">&lt;span class="section-num">4&lt;/span> Взаимодействие с другими сервисами&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/25/dynamically-updating-bind-dns-isc-dhcp/">Динамическое обновление DNS-сервера BIND при помощи ISC DHCP&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>DNS. Bind. DNSSEC</title><link>https://yamadharma.github.io/ru/post/2023/09/16/dns-bind-dnssec/</link><pubDate>Sat, 16 Sep 2023 19:52:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/16/dns-bind-dnssec/</guid><description>&lt;p>Настройка DNSSEC в Bind.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ключи">&lt;span class="section-num">2&lt;/span> Ключи&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#каталоги-ключей">&lt;span class="section-num">2.1&lt;/span> Каталоги ключей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-ключей">&lt;span class="section-num">2.2&lt;/span> Создание ключей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#права-доступа">&lt;span class="section-num">2.3&lt;/span> Права доступа&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подпись-зоны">&lt;span class="section-num">3&lt;/span> Подпись зоны&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ручная-подпись-зоны">&lt;span class="section-num">3.1&lt;/span> Ручная подпись зоны&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-bind">&lt;span class="section-num">3.1.1&lt;/span> Настройка BIND&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#автоматическое-подписывание-зоны">&lt;span class="section-num">3.2&lt;/span> Автоматическое подписывание зоны&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#проверка-работы">&lt;span class="section-num">4&lt;/span> Проверка работы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Версия bind выше, чем 9.9:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">named -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="ключи">&lt;span class="section-num">2&lt;/span> Ключи&lt;/h2>
&lt;h3 id="каталоги-ключей">&lt;span class="section-num">2.1&lt;/span> Каталоги ключей&lt;/h3>
&lt;ul>
&lt;li>Создаём каталог, в котором будем хранить ключи и переходим в него:
&lt;ul>
&lt;li>Red Hat:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /var/named/keys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /var/named/keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Debian, Ubuntu:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /etc/bind/keys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /etc/bind/keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="создание-ключей">&lt;span class="section-num">2.2&lt;/span> Создание ключей&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Создаём мастер-ключей (&lt;code>KSK&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnssec-keygen -f KSK -a ECDSAP256SHA256 -b &lt;span class="m">4096&lt;/span> -n ZONE example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>-f KSK&lt;/code>: создаётся мастер-ключ;&lt;/li>
&lt;li>&lt;code>-a ECDSAP256SHA256&lt;/code>: используемый алгоритм шифрования;&lt;/li>
&lt;li>&lt;code>-b 2048&lt;/code>: размер ключа в битах (для алгоритма &lt;code>ECDSAP256SHA256&lt;/code> игнорируется);&lt;/li>
&lt;li>&lt;code>-n ZONE&lt;/code>: для DNS-зоны;&lt;/li>
&lt;li>&lt;code>-r /dev/urandom&lt;/code>: источник случайных данных;&lt;/li>
&lt;li>&lt;code>example.com&lt;/code>: домен, для которого предназначен ключ.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Создаём ключ для зоны (&lt;code>ZSK&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnssec-keygen -a ECDSAP256SHA256 -b &lt;span class="m">2048&lt;/span> -n ZONE example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Задаём владельца для сгенерированных файлов:&lt;/p>
&lt;ul>
&lt;li>Red Hat:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R named:named /var/named/keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Debian, Ubuntu:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R bind:bind /etc/bind/keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="права-доступа">&lt;span class="section-num">2.3&lt;/span> Права доступа&lt;/h3>
&lt;ul>
&lt;li>Поправим права доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R named:named /var/named/keys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">640&lt;/span> /var/named/keys/*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="подпись-зоны">&lt;span class="section-num">3&lt;/span> Подпись зоны&lt;/h2>
&lt;ul>
&lt;li>Зоны можно подписывать вручную или настроить автоматическую подпись зон.&lt;/li>
&lt;li>При ручной подписи необходимо переподписывать файл зоны после изменения.&lt;/li>
&lt;/ul>
&lt;h3 id="ручная-подпись-зоны">&lt;span class="section-num">3.1&lt;/span> Ручная подпись зоны&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Копируем содержимое ключей в файл зоны:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cat Kexample.com.*key &amp;gt;&amp;gt; /var/named/master/example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Переходим в каталог, где хранится наша зона:&lt;/p>
&lt;ul>
&lt;li>Red Hat:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /var/named/master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Debian, Ubuntu:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /etc/bind/master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Подписываем зону:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnssec-signzone -e +3mo -N INCREMENT -K /var/named/keys example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>-e +3mo&lt;/code> : время действия RRSIG (3 месяца);&lt;/li>
&lt;li>&lt;code>-N INCREMENT&lt;/code> : использовать формат серийного номера SOA из файла;&lt;/li>
&lt;li>&lt;code>-K /var/named/keys&lt;/code> : путь хранения сгенерированных ключей;&lt;/li>
&lt;li>&lt;code>example.com&lt;/code> : подписываемый домен.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>В каталоге хранения зон мы должны увидеть файл подписанной зоны &lt;code>example.com.signed&lt;/code>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-bind">&lt;span class="section-num">3.1.1&lt;/span> Настройка BIND&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Редактируем конфигурационный файл:&lt;/p>
&lt;ul>
&lt;li>Red Hat:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/etc/named.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Debian, Ubuntu:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/etc/bind/named.conf.local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Проверяем, чтобы dnssec был включён:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">options {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnssec-enable yes;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnssec-validation yes;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnssec-lookaside auto;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>dnssec-enable&lt;/code> : включение или отключение &lt;code>dnssec&lt;/code> на уровне сервера;&lt;/li>
&lt;li>&lt;code>dnssec-validation&lt;/code> : проверка корректность ответов;&lt;/li>
&lt;li>&lt;code>dnssec-lookaside&lt;/code> : разрешение использовать сторонние корни DNSSEC.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>В настройке зоны меняем путь к файлу:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">zone &amp;#34;example.com&amp;#34; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">file &amp;#34;master/example.com.signed&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Перезапускаем bind:&lt;/p>
&lt;ul>
&lt;li>Red Hat:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl reload named
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Debian, Ubuntu:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl reload &lt;span class="nb">bind&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Или перегружаем конфигурацию bind:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rndc reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="автоматическое-подписывание-зоны">&lt;span class="section-num">3.2&lt;/span> Автоматическое подписывание зоны&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для автоматизации процесса в конфигурационном файле bind задаём:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">options&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">key&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">directory&lt;/span> &lt;span class="s2">&amp;#34;/var/named/keys&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sig&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">validity&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">interval&lt;/span> &lt;span class="mi">20&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>key-directory&lt;/code> : каталог хранения ключей;&lt;/li>
&lt;li>&lt;code>sig-validity-interval&lt;/code> : период действия ключей: дней (период обновления).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Для зоны редактируем:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">zone &lt;span class="s2">&amp;#34;example.com&amp;#34;&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">file &lt;span class="s2">&amp;#34;master/example.com&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">inline-signing yes&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto-dnssec maintain&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>inline-signing&lt;/code> : включение или отключение прозрачного формирования подписей (без необходимости менять файл зоны);&lt;/li>
&lt;li>&lt;code>auto-dnssec&lt;/code> : уровень автоматической настройки DNSSEC для зоны.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Меняем серийный номер файла зоны.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Перезапускаем bind:&lt;/p>
&lt;ul>
&lt;li>Red Hat:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl reload named
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Debian, Ubuntu:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl reload &lt;span class="nb">bind&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Или перегружаем конфигурацию bind:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rndc reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>В каталоге зоны должны появиться дополнительные 3 файла: &lt;code>example.com.jbk&lt;/code>, &lt;code>example.com.signed&lt;/code>, &lt;code>example.com.signed.jnl&lt;/code>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="проверка-работы">&lt;span class="section-num">4&lt;/span> Проверка работы&lt;/h2>
&lt;ul>
&lt;li>Чтобы проверить, отдаёт ли наш сервер ответы с цифровыми подписями, вводим команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dig example.com +dnssec
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Посмотрим подпись зоны:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dig DNSKEY example.com. @localhost +multiline
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Или:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dig A example.com. @localhost +noadditional +dnssec +multiline
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Получить DS записи для реестра доменов и прописать их у регистратора:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dig @localhost dnskey example.com &lt;span class="p">|&lt;/span> dnssec-dsfromkey -f - example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После того, как мы добавили DS записи в реестр, спустя какое-то время можно проверять все ли в порядке.
&lt;ul>
&lt;li>Сайт: &lt;a href="https://dnssec-analyzer.verisignlabs.com" target="_blank" rel="noopener">https://dnssec-analyzer.verisignlabs.com&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Domain Name System (DNS)</title><link>https://yamadharma.github.io/ru/post/2023/09/16/domain-name-system-dns/</link><pubDate>Sat, 16 Sep 2023 19:47:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/16/domain-name-system-dns/</guid><description>&lt;p>Domain Name System (DNS).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#серверы-dns">&lt;span class="section-num">1&lt;/span> Серверы DNS&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#bind">&lt;span class="section-num">1.1&lt;/span> Bind&lt;/a>&lt;/li>
&lt;li>&lt;a href="#powerdns">&lt;span class="section-num">1.2&lt;/span> PowerDNS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#инфраструктура-dns">&lt;span class="section-num">2&lt;/span> Инфраструктура DNS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="серверы-dns">&lt;span class="section-num">1&lt;/span> Серверы DNS&lt;/h2>
&lt;h3 id="bind">&lt;span class="section-num">1.1&lt;/span> Bind&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/19/dns-bind/">DNS. Bind&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="powerdns">&lt;span class="section-num">1.2&lt;/span> PowerDNS&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/05/23/dns-powerdns-recursor/">DNS. PowerDNS Recursor&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="инфраструктура-dns">&lt;span class="section-num">2&lt;/span> Инфраструктура DNS&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/05/26/public-dns-resolvers/">Общедоступные резольверы DNS&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>DHCP snooping</title><link>https://yamadharma.github.io/ru/post/2023/09/05/dhcp-snooping/</link><pubDate>Tue, 05 Sep 2023 09:49:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/05/dhcp-snooping/</guid><description>&lt;p>&lt;em>DHCP snooping&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#принципы-работы-dhcp-snooping">&lt;span class="section-num">2&lt;/span> Принципы работы &lt;em>DHCP snooping&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#опция-82">&lt;span class="section-num">3&lt;/span> Опция 82&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dhcp-ретранслятор">&lt;span class="section-num">4&lt;/span> DHCP-ретранслятор&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#порядок-настройки">&lt;span class="section-num">5.1&lt;/span> Порядок настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#коммутаторы-cisco">&lt;span class="section-num">5.2&lt;/span> Коммутаторы Cisco&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#основные-настройки">&lt;span class="section-num">5.2.1&lt;/span> Основные настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-настройки">&lt;span class="section-num">5.2.2&lt;/span> Дополнительные настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#команды-просмотра">&lt;span class="section-num">5.2.3&lt;/span> Команды просмотра&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>&lt;em>DHCP snooping&lt;/em> &amp;mdash; функция коммутатора, предназначенная для защиты от атак с использованием протокола DHCP.&lt;/li>
&lt;li>Например, атаки с подменой DHCP-сервера в сети или атаки DHCP starvation, которая заставляет DHCP-сервер выдать все существующие на сервере адреса злоумышленнику.&lt;/li>
&lt;li>&lt;em>DHCP snooping&lt;/em> позволяет:
&lt;ul>
&lt;li>защитить клиентов в сети от получения адреса от неавторизованного DHCP-сервера;&lt;/li>
&lt;li>регулировать какие сообщения протокола DHCP отбрасывать, какие перенаправлять и на какие порты.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для правильной работы &lt;em>DHCP snooping&lt;/em>, необходимо указать какие порты коммутатора будут доверенными (trusted), а какие &amp;mdash; ненадёжными (untrusted).&lt;/li>
&lt;li>Ненадёжные (Untrusted) порты: порты, к которым подключены клиенты.
&lt;ul>
&lt;li>DHCP-ответы, приходящие с этих портов отбрасываются коммутатором.&lt;/li>
&lt;li>Для ненадёжных портов выполняется ряд проверок сообщений DHCP и создаётся база данных привязки DHCP (&lt;em>DHCP snooping&lt;/em> binding database).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Доверенные (Trusted) порты: порты коммутатора, к которым подключён другой коммутатор или DHCP-сервер.
&lt;ul>
&lt;li>DHCP-пакеты полученные с доверенных портов не отбрасываются.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="принципы-работы-dhcp-snooping">&lt;span class="section-num">2&lt;/span> Принципы работы &lt;em>DHCP snooping&lt;/em>&lt;/h2>
&lt;ul>
&lt;li>По умолчанию коммутатор отбрасывает DHCP-пакет, который пришел на ненадёжный порт, если:
&lt;ul>
&lt;li>приходит одно из сообщений, которые отправляет DHCP-сервер (DHCPOFFER, DHCPACK, DHCPNAK или DHCPLEASEQUERY);&lt;/li>
&lt;li>приходит сообщение DHCPRELEASE или DHCPDECLINE, в котором содержится MAC-адрес из базы данных привязки DHCP, но информация об интерфейсе в таблице не совпадает с интерфейсом, на котором был получен пакет;&lt;/li>
&lt;li>в пришедшем DHCP-пакете не совпадают MAC-адрес указанный в DHCP-запросе и MAC-адрес отправителя;&lt;/li>
&lt;li>приходит DHCP-пакет, в котором есть опция 82.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="опция-82">&lt;span class="section-num">3&lt;/span> Опция 82&lt;/h2>
&lt;ul>
&lt;li>По умолчанию коммутатор на котором включен &lt;em>DHCP snooping&lt;/em>, вставляет опцию 82 в DHCP-запросы.&lt;/li>
&lt;li>Коммутатор может изменять или вставлять опцию 82, даже если клиент и сервер находятся в одной подсети.&lt;/li>
&lt;li>При вставке опции 82, коммутатор вставляет два значения:
&lt;ul>
&lt;li>Remote ID (MAC-адрес или IP-адрес коммутатора) (это значение можно настраивать);&lt;/li>
&lt;li>Circuit ID (порт с которого пришел запрос) (это значение не настраивается).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>По умолчанию коммутатор, использующий &lt;em>DHCP snooping&lt;/em>, обнаруживает и отбрасывает любой DHCP-запрос содержащий опцию 82, который он получил через ненадёжный порт.&lt;/li>
&lt;li>Этот режим стоит оставить, если коммутатор соединен с конечными клиентами. Получение запроса с опцией 82 от клиента будет говорит об атаке, которую коммутатор должен предотвратить.&lt;/li>
&lt;li>Но если функция &lt;em>DHCP snooping&lt;/em> включена на нескольких коммутаторах, которые соединены последовательно, то такое поведение по умолчанию, приведет к тому, что клиенты не смогут получить адрес по DHCP (если сервер находится через несколько коммутаторов).&lt;/li>
&lt;li>Решения этой проблемы:
&lt;ul>
&lt;li>Сделать порт, к которому подсоединён нижележащий коммутатор, доверенным.&lt;/li>
&lt;li>Настроить варианты обработки опции 82 на вышележащем коммутаторе:
&lt;ul>
&lt;li>сохранить опцию 82 в пришедшем пакете;&lt;/li>
&lt;li>заменить опцию 82 в пришедшем пакете.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Отключить вставку опции 82 на коммутаторе.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="dhcp-ретранслятор">&lt;span class="section-num">4&lt;/span> DHCP-ретранслятор&lt;/h2>
&lt;ul>
&lt;li>Настройки опции 82 с &lt;em>DHCP snooping&lt;/em> перекрывают любые глобальные настройки указанные при настройке коммутатора для работы DHCP-ретранслятором.&lt;/li>
&lt;li>Если &lt;em>DHCP snooping&lt;/em> не настроен в VLAN, то для него применяются глобальные настройки.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/h2>
&lt;h3 id="порядок-настройки">&lt;span class="section-num">5.1&lt;/span> Порядок настройки&lt;/h3>
&lt;ul>
&lt;li>Настройка и проверка работы DHCP-сервера и DHCP-ретранслятора без включенного &lt;em>DHCP snooping&lt;/em>.&lt;/li>
&lt;li>Включение &lt;em>DHCP snooping&lt;/em>. После включения &lt;em>DHCP snooping&lt;/em> на коммутаторе и в соответствующих VLAN, все порты коммутатора по умолчанию считаются ненадёжными.&lt;/li>
&lt;li>Указание доверенных портов. Те порты к которым подключены коммутаторы и которые ведут к DHCP-серверу (или порты к которым сервер подключен) должны быть настроены как доверенные.&lt;/li>
&lt;li>Настройка политики обработки опции 82.&lt;/li>
&lt;li>(Опционально) Включение или выключение дополнительных проверок DHCP-сообщений.&lt;/li>
&lt;li>После того, как &lt;em>DHCP snooping&lt;/em> включен на коммутаторе, по мере выдачи адресов клиентам, начинает заполняться база данных привязки DHCP.&lt;/li>
&lt;li>В базе данных привязки DHCP хранятся (информация хранится только о ненадёжных портах):
&lt;ul>
&lt;li>MAC-адрес клиента&lt;/li>
&lt;li>Арендованный IP-адрес клиента&lt;/li>
&lt;li>Время аренды в секундах&lt;/li>
&lt;li>Идентификатор VLAN&lt;/li>
&lt;li>Идентификатор порта к которому присоединен клиент&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="коммутаторы-cisco">&lt;span class="section-num">5.2&lt;/span> Коммутаторы Cisco&lt;/h3>
&lt;h4 id="основные-настройки">&lt;span class="section-num">5.2.1&lt;/span> Основные настройки&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Включаем глобально DHCP snoopig на коммутаторе:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip dhcp snooping&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Включаем &lt;em>DHCP snooping&lt;/em> в нужном VLAN:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip dhcp snooping vlan 100&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Указываем доверенные порты:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#interface GigabitEthernet 1/0/1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">switch&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip dhcp snooping trust&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="дополнительные-настройки">&lt;span class="section-num">5.2.2&lt;/span> Дополнительные настройки&lt;/h4>
&lt;ul>
&lt;li>Можно отключить передачу опции 82:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#no ip dhcp snooping information option&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно настроить ограничение количества DHCP обращений на не доверенном интерфейсе:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#interface gigabitEthernet 1/0/1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">switch&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip dhcp snooping limit rate 50&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>(Опционально) Указать адрес авторизованного DHCP-сервера, доступного через доверенный порт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip dhcp-server 10.84.168.253&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="команды-просмотра">&lt;span class="section-num">5.2.3&lt;/span> Команды просмотра&lt;/h4>
&lt;ul>
&lt;li>Посмотреть состояние &lt;em>DHCP snooping&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">switch#show ip dhcp snooping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Просмотр базы данных привязки DHCP:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">switch#show ip dhcp snooping binding
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Перенос kerberos на другую машину</title><link>https://yamadharma.github.io/ru/post/2023/09/03/kerberos-migration/</link><pubDate>Sun, 03 Sep 2023 18:13:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/03/kerberos-migration/</guid><description>&lt;p>Перенос службы Kerberos на другую машину.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#исходная-машина">&lt;span class="section-num">1&lt;/span> Исходная машина&lt;/a>&lt;/li>
&lt;li>&lt;a href="#целевая-машина">&lt;span class="section-num">2&lt;/span> Целевая машина&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-программного-обеспечения">&lt;span class="section-num">2.1&lt;/span> Установка программного обеспечения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">2.2&lt;/span> Брандмауэр&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сервер-kerberos">&lt;span class="section-num">2.2.1&lt;/span> Сервер Kerberos&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#разрешение-имён">&lt;span class="section-num">2.3&lt;/span> Разрешение имён&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-конфигурации-kerberos">&lt;span class="section-num">2.4&lt;/span> Файл конфигурации kerberos&lt;/a>&lt;/li>
&lt;li>&lt;a href="#база-данных">&lt;span class="section-num">2.5&lt;/span> База данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-конфигурации-сервера-kerberos">&lt;span class="section-num">2.6&lt;/span> Файл конфигурации сервера kerberos&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-прав-доступа-к-серверу-администрирования-kerberos">&lt;span class="section-num">2.7&lt;/span> Файл прав доступа к серверу администрирования kerberos&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-тайника">&lt;span class="section-num">2.8&lt;/span> Файл тайника&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-сервера">&lt;span class="section-num">2.9&lt;/span> Запуск сервера&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="исходная-машина">&lt;span class="section-num">1&lt;/span> Исходная машина&lt;/h2>
&lt;h2 id="целевая-машина">&lt;span class="section-num">2&lt;/span> Целевая машина&lt;/h2>
&lt;h3 id="установка-программного-обеспечения">&lt;span class="section-num">2.1&lt;/span> Установка программного обеспечения&lt;/h3>
&lt;ul>
&lt;li>Установите Kerberos:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install krb5-server krb5-workstation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="брандмауэр">&lt;span class="section-num">2.2&lt;/span> Брандмауэр&lt;/h3>
&lt;ul>
&lt;li>Настройки брандмауэра по умолчанию в RHEL будут блокировать сетевые порты, используемые Kerberos.&lt;/li>
&lt;li>Необходимо настроить правила брандмауэра на серверах, чтобы разрешить трафик через эти порты.&lt;/li>
&lt;/ul>
&lt;h4 id="сервер-kerberos">&lt;span class="section-num">2.2.1&lt;/span> Сервер Kerberos&lt;/h4>
&lt;ul>
&lt;li>На сервере Kerberos откройте порты udp 88 и 646:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-service&lt;span class="o">=&lt;/span>kerberos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-service&lt;span class="o">=&lt;/span>kadmin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --runtime-to-permanent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="разрешение-имён">&lt;span class="section-num">2.3&lt;/span> Разрешение имён&lt;/h3>
&lt;ul>
&lt;li>Возможно, следует записать адрес сервера в &lt;code>/etc/hosts&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="файл-конфигурации-kerberos">&lt;span class="section-num">2.4&lt;/span> Файл конфигурации kerberos&lt;/h3>
&lt;ul>
&lt;li>Перенесите конфигурационный файл &lt;code>/etc/krb5.conf&lt;/code>.&lt;/li>
&lt;li>Лучше отредактировать новый, установив необходимые &lt;em>realms&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h3 id="база-данных">&lt;span class="section-num">2.5&lt;/span> База данных&lt;/h3>
&lt;ul>
&lt;li>Восстановите базу данных Kerberos:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">kdb5_util load kdb5_dump
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="файл-конфигурации-сервера-kerberos">&lt;span class="section-num">2.6&lt;/span> Файл конфигурации сервера kerberos&lt;/h3>
&lt;ul>
&lt;li>Восстановите &lt;code>/var/kerberos/krb5kdc/kdc.conf&lt;/code> из резервной копии.&lt;/li>
&lt;/ul>
&lt;h3 id="файл-прав-доступа-к-серверу-администрирования-kerberos">&lt;span class="section-num">2.7&lt;/span> Файл прав доступа к серверу администрирования kerberos&lt;/h3>
&lt;ul>
&lt;li>Восстановите &lt;code>/var/kerberos/krb5kdc/kadm5.acl&lt;/code> из резервной копии.&lt;/li>
&lt;/ul>
&lt;h3 id="файл-тайника">&lt;span class="section-num">2.8&lt;/span> Файл тайника&lt;/h3>
&lt;ul>
&lt;li>stash-файл позволяет KDC аутентифицировать себя для утилит базы данных, таких как kadmin, kadmind, krb5kdcи kdb5_util.&lt;/li>
&lt;li>Запустите команду ниже, чтобы сохранить принципал в файле (требуется пароль администратора kdc):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">kdb5_util stash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-сервера">&lt;span class="section-num">2.9&lt;/span> Запуск сервера&lt;/h3>
&lt;ul>
&lt;li>Запустите сервер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now krb5kdc.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Почта. vk.com. Настройка почтового клиента</title><link>https://yamadharma.github.io/ru/post/2023/09/03/mail-vk-com-configuring-mail-client/</link><pubDate>Sun, 03 Sep 2023 17:14:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/03/mail-vk-com-configuring-mail-client/</guid><description>&lt;p>Настройка почтового клиента для почты &lt;em>vk.com&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общие-параметры">&lt;span class="section-num">2.1&lt;/span> Общие параметры&lt;/a>&lt;/li>
&lt;li>&lt;a href="#smtp">&lt;span class="section-num">2.2&lt;/span> SMTP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#imap">&lt;span class="section-num">2.3&lt;/span> IMAP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pop3">&lt;span class="section-num">2.4&lt;/span> POP3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://vk.mail.ru/" target="_blank" rel="noopener">https://vk.mail.ru/&lt;/a>&lt;/li>
&lt;li>Сделан на основе сервиса почты &lt;em>mail.ru&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-mail-ru-configuring-mail-client/">Почта. Mail.ru. Настройка почтового клиента&lt;/a>).&lt;/li>
&lt;li>Используются локализованные названия для папок IMAP.&lt;/li>
&lt;li>Папки почты по умолчанию:
&lt;ul>
&lt;li>&lt;code>INBOX&lt;/code>;&lt;/li>
&lt;li>&lt;code>Архив&lt;/code>;&lt;/li>
&lt;li>&lt;code>Корзина&lt;/code>;&lt;/li>
&lt;li>&lt;code>Спам&lt;/code>;&lt;/li>
&lt;li>&lt;code>Черновики&lt;/code>;&lt;/li>
&lt;li>&lt;code>Отправленные&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Имена папок можно передавать в Unicode.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/h2>
&lt;h3 id="общие-параметры">&lt;span class="section-num">2.1&lt;/span> Общие параметры&lt;/h3>
&lt;ul>
&lt;li>login: адрес электронной почты в формате &lt;code>имя_пользователя@vk.com&lt;/code>, где &lt;code>имя_пользователя&lt;/code> &amp;mdash; учётная запись ВКонтакте.&lt;/li>
&lt;li>password: пароль от учётной записи ВКонтакте.&lt;/li>
&lt;/ul>
&lt;h3 id="smtp">&lt;span class="section-num">2.2&lt;/span> SMTP&lt;/h3>
&lt;ul>
&lt;li>адрес почтового сервера: &lt;code>smtp.vk.com&lt;/code>;&lt;/li>
&lt;li>защита соединения: SSL;&lt;/li>
&lt;li>порт: 465.&lt;/li>
&lt;/ul>
&lt;h3 id="imap">&lt;span class="section-num">2.3&lt;/span> IMAP&lt;/h3>
&lt;ul>
&lt;li>адрес почтового сервера: &lt;code>imap.vk.com&lt;/code>;&lt;/li>
&lt;li>защита соединения: SSL;&lt;/li>
&lt;li>порт: 993.&lt;/li>
&lt;/ul>
&lt;h3 id="pop3">&lt;span class="section-num">2.4&lt;/span> POP3&lt;/h3>
&lt;ul>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>imap.vk.com&lt;/code>;&lt;/li>
&lt;li>защита соединения: SSL;&lt;/li>
&lt;li>порт: 995.&lt;/li>
&lt;/ul></description></item><item><title>Настройка Openldap</title><link>https://yamadharma.github.io/ru/post/2023/09/02/configure-openldap-rocky-linux/</link><pubDate>Sat, 02 Sep 2023 19:53:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/02/configure-openldap-rocky-linux/</guid><description>&lt;p>Настройка Openldap.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#установка-openldap">&lt;span class="section-num">1&lt;/span> Установка Openldap&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пароль-администратора">&lt;span class="section-num">2&lt;/span> Пароль администратора&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="установка-openldap">&lt;span class="section-num">1&lt;/span> Установка Openldap&lt;/h2>
&lt;ul>
&lt;li>Установка сервера openldap:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install openldap-servers openldap-clients
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запуск сервера openldap:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now slapd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="пароль-администратора">&lt;span class="section-num">2&lt;/span> Пароль администратора&lt;/h2>
&lt;ul>
&lt;li>Для генерации значения пароля пользователя, подходящего для использования с &lt;code>ldapadd&lt;/code> или &lt;code>ldapmodify&lt;/code> используется утилита &lt;code>slappasswd&lt;/code>.&lt;/li>
&lt;li>Вначале хэша пароля начинающийся алгоритм хэша (например &lt;code>{SSHA}&lt;/code>).&lt;/li>
&lt;li>Создайте хеш пароля:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slappasswd &amp;gt; /etc/openldap/certs/password
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Перенос Openldap на другую машину</title><link>https://yamadharma.github.io/ru/post/2023/09/01/openldap-migration/</link><pubDate>Fri, 01 Sep 2023 20:12:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/01/openldap-migration/</guid><description>&lt;p>Перенос Openldap на другую машину.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#подготовка">&lt;span class="section-num">1&lt;/span> Подготовка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-сервера">&lt;span class="section-num">1.1&lt;/span> Установка сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-openldap">&lt;span class="section-num">1.2&lt;/span> Установка Openldap&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#дополнительная-информация">&lt;span class="section-num">2&lt;/span> Дополнительная информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#номер-базы-данных">&lt;span class="section-num">2.1&lt;/span> Номер базы данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#исходная-машина">&lt;span class="section-num">3&lt;/span> Исходная машина&lt;/a>&lt;/li>
&lt;li>&lt;a href="#целевая-машина">&lt;span class="section-num">4&lt;/span> Целевая машина&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">4.1&lt;/span> Брандмауэр&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сервер-ldap">&lt;span class="section-num">4.1.1&lt;/span> Сервер ldap&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#перенос">&lt;span class="section-num">4.2&lt;/span> Перенос&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="подготовка">&lt;span class="section-num">1&lt;/span> Подготовка&lt;/h2>
&lt;h3 id="установка-сервера">&lt;span class="section-num">1.1&lt;/span> Установка сервера&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-openldap">&lt;span class="section-num">1.2&lt;/span> Установка Openldap&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/02/configure-openldap-rocky-linux/">Настройка Openldap&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="дополнительная-информация">&lt;span class="section-num">2&lt;/span> Дополнительная информация&lt;/h2>
&lt;h3 id="номер-базы-данных">&lt;span class="section-num">2.1&lt;/span> Номер базы данных&lt;/h3>
&lt;ul>
&lt;li>При экспорте ключ &lt;code>-n&lt;/code> указывает на номер базы openldap. Номер базы виден в конфигурации.&lt;/li>
&lt;li>База конфигураций всегда является первой, поэтому используется параметр &lt;code>-n 0&lt;/code>.&lt;/li>
&lt;li>Обычно пользовательские данные находятся в базе под номером 2 (&lt;code>-n 2&lt;/code>).&lt;/li>
&lt;li>Обратите внимание на атрибуты &lt;code>dn: olcDatabase&lt;/code> в дампе схемы конфигурации.&lt;/li>
&lt;/ul>
&lt;h2 id="исходная-машина">&lt;span class="section-num">3&lt;/span> Исходная машина&lt;/h2>
&lt;ul>
&lt;li>
&lt;ol>
&lt;li>Остановите службу:&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl stop slapd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Экспортируйте всю схему и &lt;code>cn=config&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slapcat -n &lt;span class="m">0&lt;/span> -l slapdbackup.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Экспортируйте все пользовательские данные, хранящиеся на сервере openldap:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slapcat -n &lt;span class="m">2&lt;/span> -l configbackup.ldif
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируйте файлы &lt;code>slapdbackup.conf&lt;/code> и &lt;code>configbackup.ldif&lt;/code> на новый сервер.&lt;/li>
&lt;/ul>
&lt;h2 id="целевая-машина">&lt;span class="section-num">4&lt;/span> Целевая машина&lt;/h2>
&lt;h3 id="брандмауэр">&lt;span class="section-num">4.1&lt;/span> Брандмауэр&lt;/h3>
&lt;ul>
&lt;li>Настройки брандмауэра по умолчанию в RHEL будут блокировать сетевые порты, используемые Kerberos.&lt;/li>
&lt;li>Необходимо настроить правила брандмауэра на серверах, чтобы разрешить трафик через эти порты.&lt;/li>
&lt;/ul>
&lt;h4 id="сервер-ldap">&lt;span class="section-num">4.1.1&lt;/span> Сервер ldap&lt;/h4>
&lt;ul>
&lt;li>На сервере откройте порты для ldap и ldaps:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-service&lt;span class="o">=&lt;/span>ldap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-service&lt;span class="o">=&lt;/span>ldap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --runtime-to-permanent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перенос">&lt;span class="section-num">4.2&lt;/span> Перенос&lt;/h3>
&lt;ul>
&lt;li>Сохраните предыдущую конфигурацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp -R /etc/openldap /etc/openldap.orig
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалите конфигурацию по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm -rf /etc/openldap/slapd.d/*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Восстановите файлы резервной копии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slapadd -n &lt;span class="m">0&lt;/span> -F /etc/openldap/slapd.d -l slapdbackup.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">slapadd -n &lt;span class="m">2&lt;/span> -F /etc/openldap/slapd.d -l configbackup.ldif
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Исправьте права доступа к файлам:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R ldap:ldap /etc/openldap/slapd.d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Восстановите метки SELinux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">restorecon -vR /etc/openldap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите службу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now slapd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Установка сервера afs</title><link>https://yamadharma.github.io/ru/post/2023/08/28/afs-server-installation/</link><pubDate>Mon, 28 Aug 2023 10:22:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/28/afs-server-installation/</guid><description>&lt;p>Установка сервера afs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#первоначальная-установка">&lt;span class="section-num">1&lt;/span> Первоначальная установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#предварительные-замечания">&lt;span class="section-num">2&lt;/span> Предварительные замечания&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#минимальная-установка">&lt;span class="section-num">2.1&lt;/span> Минимальная установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дисковые-разделы">&lt;span class="section-num">2.2&lt;/span> Дисковые разделы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сеть">&lt;span class="section-num">2.3&lt;/span> Сеть&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-времени">&lt;span class="section-num">2.4&lt;/span> Синхронизация времени&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">3&lt;/span> Брандмауэр&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сервер-kerberos">&lt;span class="section-num">3.1&lt;/span> Сервер Kerberos&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервер-баз-данных-openafs">&lt;span class="section-num">3.2&lt;/span> Сервер баз данных OpenAFS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файловый-сервер-openafs">&lt;span class="section-num">3.3&lt;/span> Файловый сервер OpenAFS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#клиент-openafs">&lt;span class="section-num">3.4&lt;/span> Клиент OpenAFS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-kerberos">&lt;span class="section-num">4&lt;/span> Установка Kerberos&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сервер-kerberos">&lt;span class="section-num">4.1&lt;/span> Сервер Kerberos&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#компиляция-программного-обеспечения">&lt;span class="section-num">5&lt;/span> Компиляция программного обеспечения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#компиляция-сервера">&lt;span class="section-num">5.1&lt;/span> Компиляция сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#компиляция-клиента">&lt;span class="section-num">5.2&lt;/span> Компиляция клиента&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-сервера-openafs">&lt;span class="section-num">6&lt;/span> Установка сервера OpenAFS&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-сервера">&lt;span class="section-num">6.1&lt;/span> Установка сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-клиента">&lt;span class="section-num">6.2&lt;/span> Установка клиента&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="первоначальная-установка">&lt;span class="section-num">1&lt;/span> Первоначальная установка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="предварительные-замечания">&lt;span class="section-num">2&lt;/span> Предварительные замечания&lt;/h2>
&lt;h3 id="минимальная-установка">&lt;span class="section-num">2.1&lt;/span> Минимальная установка&lt;/h3>
&lt;ul>
&lt;li>Для простой установки можно использовать один сервер для размещения Kerberos KDC, сервера базы данных OpenAFS и файлового сервера OpenAFS.&lt;/li>
&lt;li>Для производственной среды рекомендуется развернуть Kerberos KDC на выделенном безопасном сервере, серверы баз данных OpenAFS &amp;mdash; на трех отдельных компьютерах, а при необходимости &amp;mdash; несколько файловых серверов.&lt;/li>
&lt;/ul>
&lt;h3 id="дисковые-разделы">&lt;span class="section-num">2.2&lt;/span> Дисковые разделы&lt;/h3>
&lt;ul>
&lt;li>Понадобится хотя бы один раздел на файловом сервере для хранения томов для AFS.&lt;/li>
&lt;li>Его надо будет примонтировать в &lt;code>/vicepa&lt;/code>.&lt;/li>
&lt;li>Если необходимо несколько разделов, их можно смонтировать в &lt;code>/vicepb&lt;/code>, &lt;code>/vicepc&lt;/code> и т. д.&lt;/li>
&lt;li>Файловый сервер использует файловое хранилище (не блочное).&lt;/li>
&lt;li>Файловые системы: ext3, ext4, xfs.&lt;/li>
&lt;li>Лучше создать для этого отдельную партицию.&lt;/li>
&lt;/ul>
&lt;h3 id="сеть">&lt;span class="section-num">2.3&lt;/span> Сеть&lt;/h3>
&lt;ul>
&lt;li>DNS должен работать правильно при прямом и обратном поиске имён.&lt;/li>
&lt;li>Серверам необходим хотя бы один интерфейс IPv4, доступный клиентам AFS. Интерфейсы IPv6 пока не поддерживаются.&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-времени">&lt;span class="section-num">2.4&lt;/span> Синхронизация времени&lt;/h3>
&lt;ul>
&lt;li>Kerberos и, следовательно, OpenAFS требуют хорошей синхронизации часов между клиентами и серверами.&lt;/li>
&lt;/ul>
&lt;h2 id="брандмауэр">&lt;span class="section-num">3&lt;/span> Брандмауэр&lt;/h2>
&lt;ul>
&lt;li>Настройки брандмауэра по умолчанию в RHEL будут блокировать сетевые порты, используемые Kerberos и OpenAFS.&lt;/li>
&lt;li>Необходимо настроить правила брандмауэра на серверах, чтобы разрешить трафик через эти порты.&lt;/li>
&lt;/ul>
&lt;h3 id="сервер-kerberos">&lt;span class="section-num">3.1&lt;/span> Сервер Kerberos&lt;/h3>
&lt;ul>
&lt;li>На сервере Kerberos откройте порты udp 88 и 646:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-port&lt;span class="o">=&lt;/span>88/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-port&lt;span class="o">=&lt;/span>646/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --runtime-to-permanent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="сервер-баз-данных-openafs">&lt;span class="section-num">3.2&lt;/span> Сервер баз данных OpenAFS&lt;/h3>
&lt;ul>
&lt;li>На серверах баз данных OpenAFS откройте udp-порты 7002, 7003 и 7007:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-port&lt;span class="o">=&lt;/span>7002/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-port&lt;span class="o">=&lt;/span>7003/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-port&lt;span class="o">=&lt;/span>7007/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --runtime-to-permanent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="файловый-сервер-openafs">&lt;span class="section-num">3.3&lt;/span> Файловый сервер OpenAFS&lt;/h3>
&lt;ul>
&lt;li>На файловых серверах OpenAFS откройте udp-порты 7000, 7005 и 7007:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-port&lt;span class="o">=&lt;/span>7000/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-port&lt;span class="o">=&lt;/span>7005/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-port&lt;span class="o">=&lt;/span>7007/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --runtime-to-permanent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="клиент-openafs">&lt;span class="section-num">3.4&lt;/span> Клиент OpenAFS&lt;/h3>
&lt;ul>
&lt;li>Клиенты OpenAFS используют порт udp 7001. Откройте порт udp 7001 в любой системе, в которой установлен клиент OpenAFS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --zone&lt;span class="o">=&lt;/span>public --add-port&lt;span class="o">=&lt;/span>7001/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --runtime-to-permanent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-kerberos">&lt;span class="section-num">4&lt;/span> Установка Kerberos&lt;/h2>
&lt;ul>
&lt;li>Установите серверный и клиентский пакеты Kerberos:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install -y krb5-server krb5-workstation krb5-libs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Замените все примеры имени хоста &lt;code>kerberos.example.com&lt;/code> фактическим именем вашего сервера Kerberos в файле &lt;code>/etc/krb5.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="сервер-kerberos">&lt;span class="section-num">4.1&lt;/span> Сервер Kerberos&lt;/h3>
&lt;ul>
&lt;li>На машине сервера Kerberos настройте замените каждый экземпляр &lt;code>EXAMPLE.COM&lt;/code> именем своей области в следующих файлах конфигурации:&lt;/li>
&lt;li>&lt;code>/etc/krb5.conf&lt;/code>&lt;/li>
&lt;li>&lt;code>/var/kerberos/krb5kdc/kdc.conf&lt;/code>&lt;/li>
&lt;li>&lt;code>/var/kerberos/krb5kdc/kadm5.acl&lt;/code>&lt;/li>
&lt;li>Замените все примеры имени хоста &lt;code>kerberos.example.com&lt;/code> фактическим именем вашего сервера Kerberos в файле &lt;code>/etc/krb5.conf&lt;/code>.&lt;/li>
&lt;li>Создайте базу данных Kerberos с помощью команды &lt;code>krb5_util&lt;/code> (вам будет предложено ввести основной пароль):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/sbin/kdb5_util create -s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите серверы Kerberos:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl start krb5kdc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl start kadmin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> krb5kdc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> kadmin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="компиляция-программного-обеспечения">&lt;span class="section-num">5&lt;/span> Компиляция программного обеспечения&lt;/h2>
&lt;h3 id="компиляция-сервера">&lt;span class="section-num">5.1&lt;/span> Компиляция сервера&lt;/h3>
&lt;ul>
&lt;li>Исходные архивы OpenAFS доступны на веб-сайте OpenAFS.&lt;/li>
&lt;li>Нужно будет собрать собрать RPM-пакеты с помощью команды &lt;code>rpmbuild&lt;/code>.&lt;/li>
&lt;li>Установите необходимое программное обеспечение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install rpm-build yum-utils make perl libtool bzip2 wget -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачайте пакет исходных кодов для openafs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget https://www.openafs.org/dl/openafs/&amp;lt;version&amp;gt;/openafs-&amp;lt;version&amp;gt;-1-src.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Здесь &lt;code>&amp;lt;version&amp;gt;&lt;/code> указывается версия OpenAFS, которую вы хотите установить, например &lt;code>1.8.10&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget https://www.openafs.org/dl/openafs/1.8.10/openafs-1.8.10-1.src.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите необходимы зависимости:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf builddep openafs-&amp;lt;version&amp;gt;-1.src.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Откомпилите исходные коды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rpmbuild --rebuild --define &lt;span class="s2">&amp;#34;build_userspace 1&amp;#34;&lt;/span> --define &lt;span class="s2">&amp;#34;build_modules 0&amp;#34;&lt;/span> openafs-&amp;lt;version&amp;gt;-1.src.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Здесь вы не компилите модули ядра, соответственно не сможете использовать сервер как клиента.&lt;/li>
&lt;li>Можно откомпилить всё с поддержкой моделей ядра (см. компиляцию для клиентов).&lt;/li>
&lt;/ul>
&lt;h3 id="компиляция-клиента">&lt;span class="section-num">5.2&lt;/span> Компиляция клиента&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Модуль ядра OpenAFS должен соответствовать вашей версии ядра.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Если вы не поддерживаете локальный репозиторий, который отслеживает каждый выпуск ядра и обновляет его сборки kmod, вам нужно будет использовать механизм DKMS для установки модуля ядра.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установите необходимое программное обеспечение:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install rpm-build yum-utils make perl libtool bzip2 wget -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Скачайте пакет исходных кодов для openafs:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget https://www.openafs.org/dl/openafs/&amp;lt;version&amp;gt;/openafs-&amp;lt;version&amp;gt;-1-src.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Здесь &lt;code>&amp;lt;version&amp;gt;&lt;/code> указывается версия OpenAFS, которую вы хотите установить, например &lt;code>1.8.10&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget https://www.openafs.org/dl/openafs/1.8.10/openafs-1.8.10-1.src.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установите необходимы зависимости:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf builddep openafs-&amp;lt;version&amp;gt;-1.src.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установите версия ядра для разработчиков:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install -y &lt;span class="s2">&amp;#34;kernel-devel-uname-r == &lt;/span>&lt;span class="k">$(&lt;/span>uname -r&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install -y elfutils-devel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install -y dkms gcc kernel-devel kernel-headers
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;/li>
&lt;li>
&lt;p>Откомпилите исходные коды:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rpmbuild --rebuild openafs-&amp;lt;version&amp;gt;-1.src.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-сервера-openafs">&lt;span class="section-num">6&lt;/span> Установка сервера OpenAFS&lt;/h2>
&lt;h3 id="установка-сервера">&lt;span class="section-num">6.1&lt;/span> Установка сервера&lt;/h3>
&lt;ul>
&lt;li>Установите серверные пакеты OpenAFS из каталога RPMS rpmbuild:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/rpmbuild/RPMS/x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install -y openafs-&amp;lt;version&amp;gt;-1.el9.x86_64.rpm openafs-server-&amp;lt;version&amp;gt;-1.el9.x86_64.rpm openafs-docs-&amp;lt;version&amp;gt;-1.el9.x86_64.rpm openafs-krb5-&amp;lt;version&amp;gt;-1.el9.x86_64.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-клиента">&lt;span class="section-num">6.2&lt;/span> Установка клиента&lt;/h3>
&lt;ul>
&lt;li>При установке менеджера кэша на сервере OpenAFS сначала удалите символические ссылки, созданные bosserver. Это будет мешать, если клиент установлен.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">test&lt;/span> -h /usr/vice/etc/ThisCell &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> rm /usr/vice/etc/ThisCell
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">test&lt;/span> -h /usr/vice/etc/CellServDB &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> rm /usr/vice/etc/CellServDB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обязательно перезагрузитесь перед установкой модуля ядра OpenAFS.&lt;/li>
&lt;li>Установите пакеты OpenAFS из каталога RPMS rpmbuild:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/rpmbuild/RPMS/x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install -y openafs-&amp;lt;version&amp;gt;-1.el9.x86_64.rpm openafs-client-&amp;lt;version&amp;gt;-1.el9.x86_64.rpm openafs-krb5-&amp;lt;version&amp;gt;-1.el9.x86_64.rpm dkms-openafs-&amp;lt;version&amp;gt;-1.el9.x86_64.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Файловая система afs</title><link>https://yamadharma.github.io/ru/post/2023/08/28/file-system-afs/</link><pubDate>Mon, 28 Aug 2023 10:04:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/28/file-system-afs/</guid><description>&lt;p>Распределённая файловая система AFS.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#развёртывание">&lt;span class="section-num">2&lt;/span> Развёртывание&lt;/a>&lt;/li>
&lt;li>&lt;a href="#миграция">&lt;span class="section-num">3&lt;/span> Миграция&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://www.openafs.org/" target="_blank" rel="noopener">http://www.openafs.org/&lt;/a>&lt;/li>
&lt;li>Wiki: &lt;a href="https://wiki.openafs.org/" target="_blank" rel="noopener">https://wiki.openafs.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="развёртывание">&lt;span class="section-num">2&lt;/span> Развёртывание&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/28/afs-server-installation/">Установка сервера afs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/02/configure-openldap-rocky-linux/">Настройка Openldap&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="миграция">&lt;span class="section-num">3&lt;/span> Миграция&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/01/openldap-migration/">Перенос Openldap на другую машину&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/03/kerberos-migration/">Перенос kerberos на другую машину&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Файловая система xfs</title><link>https://yamadharma.github.io/ru/post/2023/08/26/xfs-file-system/</link><pubDate>Sat, 26 Aug 2023 19:50:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/26/xfs-file-system/</guid><description>&lt;p>Файловая система xfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">&lt;/nav>
&lt;/details></description></item><item><title>Файловый менеджер Midnight Commander</title><link>https://yamadharma.github.io/ru/post/2023/08/26/midnight-commander-file-manager/</link><pubDate>Sat, 26 Aug 2023 17:40:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/26/midnight-commander-file-manager/</guid><description>&lt;p>Файловый менеджер Midnight Commander.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">1.1&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">2.1&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#горячие-клавиши-для-файловых-панелей">&lt;span class="section-num">3&lt;/span> Горячие клавиши для файловых панелей&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#файлменеджер">&lt;span class="section-num">3.1&lt;/span> Файлменеджер&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h3 id="windows">&lt;span class="section-num">1.1&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>Репозиторий:
&lt;ul>
&lt;li>&lt;a href="https://github.com/adamyg/mcwin32" target="_blank" rel="noopener">https://github.com/adamyg/mcwin32&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://sourceforge.net/projects/mcwin32" target="_blank" rel="noopener">https://sourceforge.net/projects/mcwin32&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="windows">&lt;span class="section-num">2.1&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>Chocolatey (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install openssh -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">choco install mc --package-parameters&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;/modifypath&amp;#39;&lt;/span> -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Открывается как отдельное приложение.&lt;/li>
&lt;li>Опция &lt;code>--package-parameters='/modifypath'&lt;/code> позволяет открывать из командной строки вызовом &lt;code>mc&lt;/code>.&lt;/li>
&lt;li>Ssh нужно для подключения к удалённым компьютерам через меню в панели.&lt;/li>
&lt;/ul>
&lt;h2 id="горячие-клавиши-для-файловых-панелей">&lt;span class="section-num">3&lt;/span> Горячие клавиши для файловых панелей&lt;/h2>
&lt;h3 id="файлменеджер">&lt;span class="section-num">3.1&lt;/span> Файлменеджер&lt;/h3>
&lt;ul>
&lt;li>&lt;code>F3&lt;/code>: Просмотр файла&lt;/li>
&lt;li>&lt;code>F4&lt;/code>: Редактирование файла&lt;/li>
&lt;li>&lt;code>Insert&lt;/code>: Выделение текущего объекта вызывает окно для выделения группы файлов (можно использовать регулярные выражения) снимает отметку с группы файлов (действие, обратное тому, которое вызывается по клавише +)&lt;/li>
&lt;li>&lt;code>Meta+Enter&lt;/code>: Вставить текущий объект в командную строку&lt;/li>
&lt;li>&lt;code>Meta+.&lt;/code>: не показывать или показать скрытые файлы или каталоги (начинаются на точку ‘.’)&lt;/li>
&lt;li>&lt;code>Meta+,&lt;/code>: Переключить режим отображения панелей (вертикально/горизонтально)2&lt;/li>
&lt;li>&lt;code>Meta+a&lt;/code>, &lt;code>Ctrl+x p&lt;/code>: Посылает в командную строку полный путь в текущей активной панели&lt;/li>
&lt;li>&lt;code>Meta+c&lt;/code>: Вызывается меню быстрой смены текущего каталога на активной панели&lt;/li>
&lt;li>&lt;code>Meta+g&lt;/code>: отмечает первый файл или каталог в отображаемом списке на панели&lt;/li>
&lt;li>&lt;code>Meta+h&lt;/code>: Вызов меню последних выполненных команд&lt;/li>
&lt;li>&lt;code>Meta+i&lt;/code>: Смена текущего каталога на неактивной панели, на каталог в котором вы находитесь в активной панели&lt;/li>
&lt;li>&lt;code>Meta+j&lt;/code>: отмечает последний файл или каталог в отображаемом списке на панели&lt;/li>
&lt;li>&lt;code>Meta+n&lt;/code>: Вернуть последующую выполненную командную строку&lt;/li>
&lt;li>&lt;code>Meta+o&lt;/code>: неактивная панель переходит в каталог на который указывает активная панель&lt;/li>
&lt;li>&lt;code>Meta+p&lt;/code>: Вернуть предыдущую выполненную командную строку&lt;/li>
&lt;li>&lt;code>Meta+r&lt;/code>: отмечает средний файл или каталог в отображаемом списке на панели&lt;/li>
&lt;li>&lt;code>Meta+t&lt;/code>: Смена режима работы панели (‘Стандартный’,’Укороченный’,’Расширенный’)&lt;/li>
&lt;li>&lt;code>Meta+Shift+?&lt;/code>: Вызывается меню расширенного поиска файлов&lt;/li>
&lt;li>&lt;code>Meta+Shift+A&lt;/code>, &lt;code>Ctrl+x Ctrl+p&lt;/code>: Посылает в командную строку полный путь в нективной панели&lt;/li>
&lt;li>&lt;code>Meta+Shift+H&lt;/code>: Отобразить историю каталогов&lt;/li>
&lt;li>&lt;code>Ctrl+&lt;/code>: Вызывается меню часто используемых каталогов&lt;/li>
&lt;li>&lt;code>Ctrl+l&lt;/code>: Перерисовать экран&lt;/li>
&lt;li>&lt;code>Ctrl+o&lt;/code>: Скрытие/показ панелей&lt;/li>
&lt;li>&lt;code>Ctrl+r&lt;/code>: перечитать содержимое каталога&lt;/li>
&lt;li>&lt;code>Ctrl+s&lt;/code>: Быстрый поиск файла или каталога&lt;/li>
&lt;li>&lt;code>Ctrl+Space&lt;/code>: Показать размер текущего каталога&lt;/li>
&lt;li>&lt;code>Ctrl+x a&lt;/code>: Отображается список активных соединений виртуальных файловых систем&lt;/li>
&lt;li>&lt;code>Ctrl+x c&lt;/code>: Просмотр/правка прав доступа текущего объекта&lt;/li>
&lt;li>&lt;code>Ctrl+x i&lt;/code>: Быстрый просмотр информации о текущем объекте на второй панели&lt;/li>
&lt;li>&lt;code>Ctrl+x j&lt;/code>: Показ фоновых задач&lt;/li>
&lt;li>&lt;code>Ctrl+x l&lt;/code>: Создать жесткую ссылку с текущего объекта&lt;/li>
&lt;li>&lt;code>Ctrl+x o&lt;/code>: Просмотр/правка владельца/группы для текущего объекта&lt;/li>
&lt;li>&lt;code>Ctrl+x q&lt;/code>: Быстрый просмотр содержимого файла на второй панели&lt;/li>
&lt;li>&lt;code>Ctrl+x s&lt;/code>: Создает символьную ссылку symlink для текущего объекта&lt;/li>
&lt;li>&lt;code>Ctrl+x t&lt;/code>: Вставка всех выделенных объектов в командную строку&lt;/li>
&lt;li>&lt;code>Ctrl+x Ctrl+s&lt;/code>: Редактировать символическую ссылку&lt;/li>
&lt;li>&lt;code>Shift+F1&lt;/code>: Вызывается меню быстрого перехода между точками монтирования на левой панели&lt;/li>
&lt;li>&lt;code>Shift+F2&lt;/code>: Вызывается меню быстрого перехода между точками монтирования на правой панели&lt;/li>
&lt;li>&lt;code>Shift+F3&lt;/code>: Просмотр файла raw без учета расширения&lt;/li>
&lt;li>&lt;code>Shift+F4&lt;/code>: Создает новый файл и открывает в редакторе&lt;/li>
&lt;/ul></description></item><item><title>Менеджер паролей pass. Одноразовые пароли</title><link>https://yamadharma.github.io/ru/post/2023/08/24/password-manager-pass-one-time-passwords/</link><pubDate>Thu, 24 Aug 2023 20:29:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/24/password-manager-pass-one-time-passwords/</guid><description>&lt;p>Одноразовые пароли в менеджере паролей pass.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#формат-файла">&lt;span class="section-num">1&lt;/span> Формат файла&lt;/a>&lt;/li>
&lt;li>&lt;a href="#аппаратный-токен">&lt;span class="section-num">2&lt;/span> Аппаратный токен&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pass-otp">&lt;span class="section-num">3&lt;/span> pass-otp&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавить-токен-в-запись">&lt;span class="section-num">4&lt;/span> Добавить токен в запись&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование-токена">&lt;span class="section-num">5&lt;/span> Использование токена&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="формат-файла">&lt;span class="section-num">1&lt;/span> Формат файла&lt;/h2>
&lt;ul>
&lt;li>Токен можно хранить как в основном файле с паролем, так и в отдельном файле.&lt;/li>
&lt;li>Хранение в том же файле: &lt;code>git-passwordstore/website/yourLogin&lt;/code>.
&lt;ul>
&lt;li>Формат может быть следующий:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="l">yourPassword&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">login&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">yourLogin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://website.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">totp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">YourOtpTokenBase32Encoded&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно хранить и в виде указателя на URL:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="l">yourPassword&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">login&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">yourLogin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://website.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">otpauth://totp/Website:yourLogin?secret=YourOtpTokenBase32Encoded&amp;amp;issuer=Website&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Хранение в отдельном файле &lt;code>local-passwordstore/website/yourOtp&lt;/code>.
&lt;ul>
&lt;li>Только в виде указателя на URL:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="l">otpauth://totp/Website:yourLogin?secret=YourOtpTokenBase32Encoded&amp;amp;issuer=Website&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Например, URL для github имеет вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="l">otpauth://totp/GitHub:&amp;lt;username&amp;gt;?secret=&amp;lt;secret&amp;gt;&amp;amp;issuer=GitHub&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="аппаратный-токен">&lt;span class="section-num">2&lt;/span> Аппаратный токен&lt;/h2>
&lt;ul>
&lt;li>В идеале секретный ключ, способный расшифровать ваши секреты OTP, должен храниться на аппаратном токене, для расшифровки которого требуется какое-то взаимодействие с пользователем.&lt;/li>
&lt;li>Это достигается путем настройки второго хранилища без использования тех же открытых ключей, что и для основного хранилища паролей.&lt;/li>
&lt;li>Открытые ключи, используемые для вашего хранилища OTP, в идеале должны храниться только на аппаратных токенах.&lt;/li>
&lt;/ul>
&lt;h2 id="pass-otp">&lt;span class="section-num">3&lt;/span> pass-otp&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/tadfisher/pass-otp" target="_blank" rel="noopener">https://github.com/tadfisher/pass-otp&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="добавить-токен-в-запись">&lt;span class="section-num">4&lt;/span> Добавить токен в запись&lt;/h2>
&lt;ul>
&lt;li>Ввести токен с терминала (скрывая ввод):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass otp insert totp-secret
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Ввести токен с терминала (повторяя ввод):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass otp insert -e totp-secret
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Направьте otpauth://URI в файл паролей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass otp insert totp-secret &amp;lt; totp-secret.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Декодировать QR-изображения (используя &lt;code>zbar&lt;/code>).
&lt;ul>
&lt;li>Файл пароля будет заменён или создан:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">zbarimg -q --raw qrcode.png &lt;span class="p">|&lt;/span> pass otp insert totp-secret
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавление к существующему файлу паролей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">zbarimg -q --raw google-qrcode.png &lt;span class="p">|&lt;/span> pass otp append google/example@gmail.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Декодировать QR, получаемый из веб-камеры. Файл пароля будет заменён или создан:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">zbarcam -q --raw &lt;span class="p">|&lt;/span> pass otp insert totp-secret
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Из буфера обмена (для Wayland):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wl-paste &lt;span class="p">|&lt;/span> zbarimg -q --raw - &lt;span class="p">|&lt;/span> pass otp append google/example@gmail.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование-токена">&lt;span class="section-num">5&lt;/span> Использование токена&lt;/h2>
&lt;ul>
&lt;li>Сгенерировать код 2FA, используя токен:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass otp &amp;lt;totp-secret&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отобразить QR-код для токена OTP:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass otp uri -q &amp;lt;totp-secret&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Использование vagrant. Установка Rocky Linux</title><link>https://yamadharma.github.io/ru/post/2023/08/20/using-vagrant-install-rocky-linux/</link><pubDate>Sun, 20 Aug 2023 19:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/20/using-vagrant-install-rocky-linux/</guid><description>&lt;p>Установка Rocky Linux из репозитория образов Vagrant.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-для-virtualbox">&lt;span class="section-num">2&lt;/span> Установка для Virtualbox&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#скачивание-файла">&lt;span class="section-num">2.1&lt;/span> Скачивание файла&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-дополнения-для-vagrant">&lt;span class="section-num">2.2&lt;/span> Установка дополнения для Vagrant&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vagrantfile">&lt;span class="section-num">2.3&lt;/span> Vagrantfile&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-образа">&lt;span class="section-num">2.4&lt;/span> Подключение образа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#образ-virtualbox">&lt;span class="section-num">2.5&lt;/span> Образ Virtualbox&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключитесь-к-системе">&lt;span class="section-num">2.6&lt;/span> Подключитесь к системе&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-системы">&lt;span class="section-num">2.7&lt;/span> Обновление системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перезагрузка-виртуальной-машины">&lt;span class="section-num">2.8&lt;/span> Перезагрузка виртуальной машины&lt;/a>&lt;/li>
&lt;li>&lt;a href="#выключение-виртуальной-машины">&lt;span class="section-num">2.9&lt;/span> Выключение виртуальной машины&lt;/a>&lt;/li>
&lt;li>&lt;a href="#видео">&lt;span class="section-num">2.10&lt;/span> Видео&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Будем использовать официальные образы RockyLinux: &lt;a href="https://app.vagrantup.com/rockylinux" target="_blank" rel="noopener">https://app.vagrantup.com/rockylinux&lt;/a>&lt;/li>
&lt;li>Для определённости выберем следующую версию: &lt;a href="https://app.vagrantup.com/rockylinux/boxes/9/versions/3.0.0" target="_blank" rel="noopener">https://app.vagrantup.com/rockylinux/boxes/9/versions/3.0.0&lt;/a>&lt;/li>
&lt;li>Название образа: &lt;code>rockylinux/9&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="установка-для-virtualbox">&lt;span class="section-num">2&lt;/span> Установка для Virtualbox&lt;/h2>
&lt;h3 id="скачивание-файла">&lt;span class="section-num">2.1&lt;/span> Скачивание файла&lt;/h3>
&lt;ul>
&lt;li>Поскольку в России блокируется автоматическая скачка файла, то необходимо скачать его вручную (скачивается, поскольку этот ссылка на сайт Rocky Linux):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget https://app.vagrantup.com/rockylinux/boxes/9/versions/3.0.0/providers/virtualbox.box
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно скачать и со страницы &lt;a href="https://app.vagrantup.com/rockylinux/boxes/9" target="_blank" rel="noopener">https://app.vagrantup.com/rockylinux/boxes/9&lt;/a> непосредственно.&lt;/li>
&lt;li>Можно скачать с сайта Rocky Linux: &lt;a href="https://dl.rockylinux.org/pub/rocky/9.3/images/x86_64/" target="_blank" rel="noopener">https://dl.rockylinux.org/pub/rocky/9.3/images/x86_64/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h3 id="установка-дополнения-для-vagrant">&lt;span class="section-num">2.2&lt;/span> Установка дополнения для Vagrant&lt;/h3>
&lt;ul>
&lt;li>Дополнение автоматически устанавливает гостевые дополнения VirtualBox хоста в гостевой системе.&lt;/li>
&lt;li>Установим дополнение, явно указав зеркало для загрузки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant plugin install --plugin-clean-sources --plugin-source https://rubygems.org vagrant-vbguest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="vagrantfile">&lt;span class="section-num">2.3&lt;/span> Vagrantfile&lt;/h3>
&lt;ul>
&lt;li>Создадим заготовку файла Vagrantfile:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant init rockylinux/9 --box-version 3.0.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="подключение-образа">&lt;span class="section-num">2.4&lt;/span> Подключение образа&lt;/h3>
&lt;ul>
&lt;li>Подключим скачанный файл образа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant box add rockylinux/9 virtualbox.box
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="образ-virtualbox">&lt;span class="section-num">2.5&lt;/span> Образ Virtualbox&lt;/h3>
&lt;ul>
&lt;li>Создадим образ Virtualbox и запустим его:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant up
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="подключитесь-к-системе">&lt;span class="section-num">2.6&lt;/span> Подключитесь к системе&lt;/h3>
&lt;ul>
&lt;li>Войдём в консоль системы по ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="обновление-системы">&lt;span class="section-num">2.7&lt;/span> Обновление системы&lt;/h3>
&lt;ul>
&lt;li>Перейдём под учётную запись &lt;code>root&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Пароль учётной записи &lt;code>root&lt;/code>: &lt;code>vagrant&lt;/code>.&lt;/li>
&lt;li>Обновим установленную систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим дополнительное программное обеспечение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install tmux
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перезагрузка-виртуальной-машины">&lt;span class="section-num">2.8&lt;/span> Перезагрузка виртуальной машины&lt;/h3>
&lt;ul>
&lt;li>Выйдем из оболочки машины:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">logout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">logout&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перезагрузим виртуальную машину:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="выключение-виртуальной-машины">&lt;span class="section-num">2.9&lt;/span> Выключение виртуальной машины&lt;/h3>
&lt;ul>
&lt;li>После работы выключите виртуальную машину:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant halt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="видео">&lt;span class="section-num">2.10&lt;/span> Видео&lt;/h3>
&lt;nav>
&lt;div class="nav nav-tabs" id="nav-tab" role="tablist">
&lt;a class="nav-item nav-link active "
id="nav-edcafb" data-toggle="tab" href="#edcafb"
role="tab" aria-controls="nav-home" aria-selected="true">RuTube&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-afecbd" data-toggle="tab" href="#afecbd"
role="tab" aria-controls="nav-home" aria-selected="true">VKVideo&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-cbfead" data-toggle="tab" href="#cbfead"
role="tab" aria-controls="nav-home" aria-selected="true">Youtube&lt;/a>
&lt;/div>
&lt;/nav>
&lt;div class="tab-content" id="nav-tab-content">
&lt;div class="tab-pane fade show active " id="edcafb" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe class="rutube-player" type="text/html"
width="720" height="405"
src="https://rutube.ru/play/embed/7ef1a4fdb0db4b4fd2edcad6bbf46f65"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0">
&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="afecbd" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe
src="https://vk.com/video_ext.php?oid=606414976&amp;id=456239563&amp;hd=2"
width="720" height="405" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" frameborder="0" allowfullscreen>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="cbfead" role="tabpanel" aria-labelledby="nav-1">
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/vTkYacxvhoc?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;/div></description></item><item><title>Использование vagrant. Virtualbox</title><link>https://yamadharma.github.io/ru/post/2023/08/20/using-vagrant-virtualbox/</link><pubDate>Sun, 20 Aug 2023 18:28:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/20/using-vagrant-virtualbox/</guid><description>&lt;p>Использование vagrant с системой виртуализации Virtual Box.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#запуск-vagrant-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">1&lt;/span> Запуск Vagrant в текущем каталоге для VirtualBox&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#запуск-vagrant-под-windows-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">1.1&lt;/span> Запуск Vagrant под Windows в текущем каталоге для VirtualBox&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-vagrant-под-linux-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">1.2&lt;/span> Запуск Vagrant под Linux в текущем каталоге для VirtualBox&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#используемые-расширения-для-vagrant">&lt;span class="section-num">2&lt;/span> Используемые расширения для Vagrant&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#vagrant-vbguest">&lt;span class="section-num">2.1&lt;/span> vagrant-vbguest&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="запуск-vagrant-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">1&lt;/span> Запуск Vagrant в текущем каталоге для VirtualBox&lt;/h2>
&lt;ul>
&lt;li>Если необходимо, чтобы все файлы находились в рабочем каталоге, то следует установить дополнительные переменные среды.&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-vagrant-под-windows-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">1.1&lt;/span> Запуск Vagrant под Windows в текущем каталоге для VirtualBox&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Следует задать переменные окружения&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setx VAGRANT_HOME &lt;span class="s2">&amp;#34;X:/your/path/.vagrant.d&amp;#34;&lt;/span> /M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setx VAGRANT_DOTFILE_PATH &lt;span class="s2">&amp;#34;X:/your/path/.vagrant&amp;#34;&lt;/span> /M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setx VBOX_USER_HOME &lt;span class="s2">&amp;#34;X:/your/path/.vbox&amp;#34;&lt;/span> /M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setx VBOX_INSTALL_PATH &lt;span class="s2">&amp;#34;X:/your/path/vm&amp;#34;&lt;/span> /M
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Вместо &lt;code>X:&lt;/code> необходимо записать букву необходимого диска.&lt;/li>
&lt;li>Команда &lt;code>setx&lt;/code> добавляет переменные в постоянный список переменных окружения.&lt;/li>
&lt;li>Модификатор &lt;code>/M&lt;/code> добавляет переменные в системное окружение.&lt;/li>
&lt;li>Без этого модификатора переменные будут добавляться в окружение пользователя.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-vagrant-под-linux-в-текущем-каталоге-для-virtualbox">&lt;span class="section-num">1.2&lt;/span> Запуск Vagrant под Linux в текущем каталоге для VirtualBox&lt;/h3>
&lt;ul>
&lt;li>Предлагается вместо явного задания переменных окружения использовать Makefile:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-makefile" data-lang="makefile">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">.PHONY&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">help&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39;Usage:&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39; make &amp;lt;target&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39;Targets:&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @grep -E &lt;span class="s1">&amp;#39;^[a-zA-Z_0-9.-]+:.*?## .*$$&amp;#39;&lt;/span> &lt;span class="k">$(&lt;/span>MAKEFILE_LIST&lt;span class="k">)&lt;/span> &lt;span class="p">|&lt;/span> sort &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;BEGIN {FS = &amp;#34;:.*?## &amp;#34;}; {printf &amp;#34; \033[36m%-30s\033[0m %s\n&amp;#34;, $$1, $$2}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">add&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Add the built box to Vagrant
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @export &lt;span class="nv">VAGRANT_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant.d&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VAGRANT_DOTFILE_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant&lt;span class="p">;&lt;/span> vagrant box add rocky9 vagrant-virtualbox-rocky-9-x86_64.box
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">up&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Up boxies
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @VBoxManage setproperty machinefolder &lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -@export &lt;span class="nv">VAGRANT_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant.d&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VAGRANT_DOTFILE_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_USER_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vbox&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_INSTALL_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm&lt;span class="p">;&lt;/span> vagrant up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @VBoxManage setproperty machinefolder default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">server&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Up server
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @VBoxManage setproperty machinefolder &lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -@export &lt;span class="nv">VAGRANT_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant.d&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VAGRANT_DOTFILE_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_USER_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vbox&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_INSTALL_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm&lt;span class="p">;&lt;/span> vagrant up server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @VBoxManage setproperty machinefolder default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">client&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Up client
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @VBoxManage setproperty machinefolder &lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -@export &lt;span class="nv">VAGRANT_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant.d&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VAGRANT_DOTFILE_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_USER_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vbox&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_INSTALL_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm&lt;span class="p">;&lt;/span> vagrant up client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @VBoxManage setproperty machinefolder default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">server-provision&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Up and provision server
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @VBoxManage setproperty machinefolder &lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -@export &lt;span class="nv">VAGRANT_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant.d&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VAGRANT_DOTFILE_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_USER_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vbox&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_INSTALL_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm&lt;span class="p">;&lt;/span> vagrant up server --provision
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @VBoxManage setproperty machinefolder default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">client-provision&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Up and provision client
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @VBoxManage setproperty machinefolder &lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -@export &lt;span class="nv">VAGRANT_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant.d&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VAGRANT_DOTFILE_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_USER_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vbox&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_INSTALL_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm&lt;span class="p">;&lt;/span> vagrant up client --provision
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @VBoxManage setproperty machinefolder default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">server-destroy&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Destroy server
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @VBoxManage setproperty machinefolder &lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -@export &lt;span class="nv">VAGRANT_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant.d&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VAGRANT_DOTFILE_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_USER_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vbox&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_INSTALL_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm&lt;span class="p">;&lt;/span> vagrant destroy server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @VBoxManage setproperty machinefolder default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">client-destroy&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Destroy client
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @VBoxManage setproperty machinefolder &lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -@export &lt;span class="nv">VAGRANT_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant.d&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VAGRANT_DOTFILE_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vagrant&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_USER_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/.vbox&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">VBOX_INSTALL_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>/vm&lt;span class="p">;&lt;/span> vagrant destroy client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @VBoxManage setproperty machinefolder default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="используемые-расширения-для-vagrant">&lt;span class="section-num">2&lt;/span> Используемые расширения для Vagrant&lt;/h2>
&lt;h3 id="vagrant-vbguest">&lt;span class="section-num">2.1&lt;/span> vagrant-vbguest&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/dotless-de/vagrant-vbguest" target="_blank" rel="noopener">https://github.com/dotless-de/vagrant-vbguest&lt;/a>&lt;/li>
&lt;li>Автоматически устанавливает гостевые дополнения VirtualBox хоста в гостевой системе.&lt;/li>
&lt;li>Установка дополнения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant plugin install vagrant-vbguest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка дополнения с явно указанным зеркалом для загрузки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant plugin install --plugin-clean-sources --plugin-source https://rubygems.org vagrant-vbguest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Подключение к Cisco VPN</title><link>https://yamadharma.github.io/ru/post/2023/08/19/cisco-vpn-client-setup/</link><pubDate>Sat, 19 Aug 2023 13:34:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/19/cisco-vpn-client-setup/</guid><description>&lt;p>Подключение к Cisco AnyConnect VPN.
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-в-linux">&lt;span class="section-num">2&lt;/span> Установка в Linux&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подключение">&lt;span class="section-num">3&lt;/span> Подключение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dns">&lt;span class="section-num">4&lt;/span> DNS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;/p>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>В качестве клиента для Cisco AnyConnect VPN предлагается использовать OpenConnect.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://gitlab.com/openconnect/openconnect" target="_blank" rel="noopener">https://gitlab.com/openconnect/openconnect&lt;/a>&lt;/li>
&lt;li>Репозиторий модуля для Network Manager: &lt;a href="https://gitlab.gnome.org/GNOME/NetworkManager-openconnect" target="_blank" rel="noopener">https://gitlab.gnome.org/GNOME/NetworkManager-openconnect&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-в-linux">&lt;span class="section-num">2&lt;/span> Установка в Linux&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/h3>
&lt;ul>
&lt;li>Установите клиента для Network Manager:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge net-vpn/networkmanager-openconnect
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="подключение">&lt;span class="section-num">3&lt;/span> Подключение&lt;/h2>
&lt;ul>
&lt;li>При создании соединения в Network Manager необходимо задать адрес шлюза.&lt;/li>
&lt;li>При первом подключении у Вас запросят парольные данные.&lt;/li>
&lt;li>Если Вы их сохраните, то более их не надо будет набирать.&lt;/li>
&lt;li>Если у вас используется сертификат или нужно указать какие-то дополнительные параметры, то это необходимо сделать в этом же окне.&lt;/li>
&lt;/ul>
&lt;h2 id="dns">&lt;span class="section-num">4&lt;/span> DNS&lt;/h2>
&lt;ul>
&lt;li>Обычно VPN настроены на раздельную маршрутизацию и раздельный DNS.&lt;/li>
&lt;li>Для удобной работы с раздельным DNS рекомендуется использовать &lt;code>systemd-resolved&lt;/code> в stub-режиме (режиме заглушки) &lt;code>resolv.conf&lt;/code>.&lt;/li>
&lt;li>Просмотр параметров работы &lt;code>systemd-resolved&lt;/code> выполняется с помощью команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">resolvectl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Wayland. Настройка приложений</title><link>https://yamadharma.github.io/ru/post/2023/08/14/wayland-application-setup/</link><pubDate>Mon, 14 Aug 2023 13:59:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/14/wayland-application-setup/</guid><description>&lt;p>Настройка приложений для Wayland.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#chrome">&lt;span class="section-num">1&lt;/span> Chrome&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="chrome">&lt;span class="section-num">1&lt;/span> Chrome&lt;/h2>
&lt;ul>
&lt;li>Поддержка Wayland включается флагом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--ozone-platform-hint&lt;span class="o">=&lt;/span>auto
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если это не срабатывает, можно указать явно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--ozone-platform&lt;span class="o">=&lt;/span>wayland
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если возникают проблемы с методами ввода, можно принудительно установить версию GTK:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--gtk-version&lt;span class="o">=&lt;/span>&lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отсутствие верхних баров может быть решено путем дополнительного использования следующего флага:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--enable-features&lt;span class="o">=&lt;/span>WaylandWindowDecorations
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для захвата экрана на Wayland:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--enable-webrtc-pipewire-capturer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно установить флаги запуска в конфигурационном файле (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/02/28/google-chrome-flags/">Флаги запуска Google Chrome&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## /etc/chrome-flags.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--ozone-platform-hint&lt;span class="o">=&lt;/span>auto
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-features&lt;span class="o">=&lt;/span>WaylandWindowDecorations
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-webrtc-pipewire-capturer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--gtk-version&lt;span class="o">=&lt;/span>&lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Wayland</title><link>https://yamadharma.github.io/ru/post/2023/08/14/wayland/</link><pubDate>Mon, 14 Aug 2023 11:49:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/14/wayland/</guid><description>&lt;p>Wayland.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#миграция">&lt;span class="section-num">2&lt;/span> Миграция&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">3&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/21/wayland-sway/">Wayland. Менеджер окон Sway&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/14/wayland-operation-mode/">Wayland. Режим работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/14/wayland-application-setup/">Wayland. Настройка приложений&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="миграция">&lt;span class="section-num">2&lt;/span> Миграция&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/11/wayland-applications/">Wayland. Аналоги приложений&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/01/wayland-remote-desktop-waypipe/">Wayland. Удалённый доступ. Waypipe&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">3&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Awesome Wayland:
&lt;ul>
&lt;li>&lt;a href="https://github.com/rcalixte/awesome-wayland" target="_blank" rel="noopener">https://github.com/rcalixte/awesome-wayland&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/tversteeg/awesome-wayland" target="_blank" rel="noopener">https://github.com/tversteeg/awesome-wayland&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/natpen/awesome-wayland" target="_blank" rel="noopener">https://github.com/natpen/awesome-wayland&lt;/a> (ахивирован)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Gentoo list of software for Wayland: &lt;a href="https://wiki.gentoo.org/wiki/List_of_software_for_Wayland" target="_blank" rel="noopener">https://wiki.gentoo.org/wiki/List_of_software_for_Wayland&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Wayland. Режим работы</title><link>https://yamadharma.github.io/ru/post/2023/08/14/wayland-operation-mode/</link><pubDate>Mon, 14 Aug 2023 11:27:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/14/wayland-operation-mode/</guid><description>&lt;p>Узнать режим работы приложений: Wayland или Xorg.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#тип-сессии">&lt;span class="section-num">1&lt;/span> Тип сессии&lt;/a>&lt;/li>
&lt;li>&lt;a href="#какие-приложения-используют-xwayland">&lt;span class="section-num">2&lt;/span> Какие приложения используют XWayland&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="тип-сессии">&lt;span class="section-num">1&lt;/span> Тип сессии&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Можно вывести содержимое переменной окружения &lt;code>XDG_SESSION_TYPE&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$XDG_SESSION_TYPE&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Результат:
&lt;ul>
&lt;li>если используется Wayland, то будет выведено &lt;code>wayland&lt;/code>;&lt;/li>
&lt;li>если используется Xorg, то будет выведено &lt;code>X11&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Можно узнать тип текущей сессии с помощью &lt;code>loginctl&lt;/code>, получив идентификатор сессии из переменной окружения &lt;code>XDG_SESSION_ID&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">loginctl show-session &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$XDG_SESSION_ID&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -p Type
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="какие-приложения-используют-xwayland">&lt;span class="section-num">2&lt;/span> Какие приложения используют XWayland&lt;/h2>
&lt;ul>
&lt;li>Для того чтобы старые приложения X11 могли работать в Wayland, существует прослойка совместимости XWayland.&lt;/li>
&lt;li>Команда &lt;code>xlsclients&lt;/code> отображает все программы, которые используют Xwayland в данный момент:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xlsclients
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Сеть на Донской</title><link>https://yamadharma.github.io/ru/post/2023/08/13/network-donskaya/</link><pubDate>Sun, 13 Aug 2023 19:40:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/13/network-donskaya/</guid><description>&lt;h2 id="2023-08-13-network-donskaya">&lt;span class="section-num">1&lt;/span> Сеть на Донской&lt;/h2>
&lt;p>Сеть на Донской.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#2023-08-13-network-donskaya">&lt;span class="section-num">1&lt;/span> Сеть на Донской&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#происшествия">&lt;span class="section-num">1.2&lt;/span> Происшествия&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#2024">&lt;span class="section-num">1.2.1&lt;/span> 2024&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#структура-сети">&lt;span class="section-num">2&lt;/span> Структура сети&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#vlan">&lt;span class="section-num">2.1&lt;/span> VLAN&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h3 id="общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Сеть включает в себя здания на Донской и Павловской.&lt;/li>
&lt;/ul>
&lt;h3 id="происшествия">&lt;span class="section-num">1.2&lt;/span> Происшествия&lt;/h3>
&lt;h4 id="2024">&lt;span class="section-num">1.2.1&lt;/span> 2024&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>&lt;span class="timestamp-wrapper">&lt;span class="timestamp">[2024-09-04 Ср]&lt;/span>&lt;/span>Зона DNS&lt;/p>
&lt;ul>
&lt;li>Провайдер Информика&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> убрал из своего DNS зону &lt;code>pfu.edu.ru&lt;/code>.&lt;/li>
&lt;li>В чём причины &amp;mdash; не понятно.&lt;/li>
&lt;li>Зоны в пуле &lt;code>edu.ru&lt;/code> бесплатны, поэтому коммерческие мотивы можно отставить в сторону.&lt;/li>
&lt;li>На эту зону был фактически завязан весь DNS нашего Университета.&lt;/li>
&lt;li>Кроме того, были уничтожены и все вложенные зоны, например, зоны &lt;code>sci.pfu.edu.ru&lt;/code>, &lt;code>engr.pfu.edu.ru&lt;/code>, &lt;code>eco.pfu.edu.ru&lt;/code>.&lt;/li>
&lt;li>Зона старая, ещё с 90-х годов.&lt;/li>
&lt;li>У сотрудников факультета к этой зоне были привязаны почтовые адреса.&lt;/li>
&lt;li>Раньше получить почтовый адрес университета было почти невозможно (централизовано постовые адреса стали выдавать только несколько лет назад).&lt;/li>
&lt;li>Кроме того, при регистрации на многих иностранных сервисах (например, на &lt;code>arxiv.org&lt;/code>) требовался адрес образовательного учреждения (вот этот самый суффикс &lt;code>edu.ru&lt;/code>).&lt;/li>
&lt;li>Вопрос возврата домена находится на уровне администрации Университета.&lt;/li>
&lt;li>Со стороны ректората никаких действий не просматривается&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="структура-сети">&lt;span class="section-num">2&lt;/span> Структура сети&lt;/h2>
&lt;h3 id="vlan">&lt;span class="section-num">2.1&lt;/span> VLAN&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>VLAN&lt;/th>
&lt;th>Название&lt;/th>
&lt;th>Network&lt;/th>
&lt;th>Gateway&lt;/th>
&lt;th>Назначение&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>default&lt;/td>
&lt;td>10.128.1.0/24&lt;/td>
&lt;td>10.128.1.254/24&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>ap-default&lt;/td>
&lt;td>10.128.2.0/24&lt;/td>
&lt;td>10.128.2.254/24&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>management&lt;/td>
&lt;td>10.133.0.0/16&lt;/td>
&lt;td>10.133.0.254/16&lt;/td>
&lt;td>Коммутаторы&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>pix&lt;/td>
&lt;td>10.159.0.0/24&lt;/td>
&lt;td>10.159.0.254/24&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>dmz&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>10&lt;/td>
&lt;td>servers10&lt;/td>
&lt;td>10.128.0.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>11&lt;/td>
&lt;td>servers11&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>12&lt;/td>
&lt;td>virtual&lt;/td>
&lt;td>10.128.12.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>15&lt;/td>
&lt;td>felix&lt;/td>
&lt;td>10.130.200.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>20&lt;/td>
&lt;td>servers20&lt;/td>
&lt;td>10.131.64.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>21&lt;/td>
&lt;td>engr-decanat&lt;/td>
&lt;td>10.129.1.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>22&lt;/td>
&lt;td>serov&lt;/td>
&lt;td>10.129.16.0/24&lt;/td>
&lt;td>10.129.16.254/24&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>23&lt;/td>
&lt;td>grishin&lt;/td>
&lt;td>10.129.32.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>24&lt;/td>
&lt;td>kuharchuk&lt;/td>
&lt;td>10.129.33.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>25&lt;/td>
&lt;td>engr-dk&lt;/td>
&lt;td>10.129.34.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>26&lt;/td>
&lt;td>engr-cyber&lt;/td>
&lt;td>10.129.64.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>27&lt;/td>
&lt;td>engr-wifi&lt;/td>
&lt;td>10.129.129.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>29&lt;/td>
&lt;td>engr-servers-boys&lt;/td>
&lt;td>10.129.15.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>30&lt;/td>
&lt;td>ct&lt;/td>
&lt;td>10.131.0.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>31&lt;/td>
&lt;td>it&lt;/td>
&lt;td>10.131.1.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>32&lt;/td>
&lt;td>buhgalteria&lt;/td>
&lt;td>10.131.2.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>33&lt;/td>
&lt;td>geology&lt;/td>
&lt;td>10.131.3.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>34&lt;/td>
&lt;td>salikov&lt;/td>
&lt;td>10.131.4.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>35&lt;/td>
&lt;td>etc-physmat&lt;/td>
&lt;td>10.131.5.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>36&lt;/td>
&lt;td>stolovaya&lt;/td>
&lt;td>10.131.36.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>40&lt;/td>
&lt;td>poliklinika&lt;/td>
&lt;td>10.131.16.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>41&lt;/td>
&lt;td>itphysmat&lt;/td>
&lt;td>10.131.17.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>42&lt;/td>
&lt;td>etsphysics&lt;/td>
&lt;td>10.131.18.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>43&lt;/td>
&lt;td>terver&lt;/td>
&lt;td>10.131.19.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>44&lt;/td>
&lt;td>radiophys&lt;/td>
&lt;td>10.131.20.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>50&lt;/td>
&lt;td>ct310&lt;/td>
&lt;td>10.131.32.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>51&lt;/td>
&lt;td>teorphysics&lt;/td>
&lt;td>10.131.33.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>52&lt;/td>
&lt;td>administracia&lt;/td>
&lt;td>10.131.34.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>60&lt;/td>
&lt;td>neorg_chem&lt;/td>
&lt;td>10.131.48.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>70&lt;/td>
&lt;td>diffur&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>71&lt;/td>
&lt;td>redakcia&lt;/td>
&lt;td>10.131.65.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>72&lt;/td>
&lt;td>nich&lt;/td>
&lt;td>10.131.80.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>80&lt;/td>
&lt;td>trofimov&lt;/td>
&lt;td>10.131.96.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>100&lt;/td>
&lt;td>dk-srv&lt;/td>
&lt;td>10.130.64.0/24&lt;/td>
&lt;td>10.130.64.254/24&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>101&lt;/td>
&lt;td>manage-ap&lt;/td>
&lt;td>10.132.0.0/16&lt;/td>
&lt;td>10.132.0.254/16&lt;/td>
&lt;td>Сеть точек доступа&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>102&lt;/td>
&lt;td>dk-2&lt;/td>
&lt;td>10.130.129.0/24&lt;/td>
&lt;td>10.130.129.254/24&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>103&lt;/td>
&lt;td>dk-3&lt;/td>
&lt;td>10.130.130.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>104&lt;/td>
&lt;td>dk-4&lt;/td>
&lt;td>10.130.131.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>105&lt;/td>
&lt;td>dk-5&lt;/td>
&lt;td>10.130.132.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>106&lt;/td>
&lt;td>dk-6&lt;/td>
&lt;td>10.130.133.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>107&lt;/td>
&lt;td>dk-7&lt;/td>
&lt;td>10.130.134.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>110&lt;/td>
&lt;td>dk-sotrudniki&lt;/td>
&lt;td>10.130.32.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>111&lt;/td>
&lt;td>dk-116&lt;/td>
&lt;td>10.130.192.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>112&lt;/td>
&lt;td>dk-125&lt;/td>
&lt;td>10.130.193.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>113&lt;/td>
&lt;td>biblioteka&lt;/td>
&lt;td>10.130.194.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>114&lt;/td>
&lt;td>labview&lt;/td>
&lt;td>10.130.195.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>115&lt;/td>
&lt;td>engr-dk-srv&lt;/td>
&lt;td>10.130.196.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>116&lt;/td>
&lt;td>engr-dk-284&lt;/td>
&lt;td>10.130.197.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>117&lt;/td>
&lt;td>engr-dk-286&lt;/td>
&lt;td>10.130.198.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>118&lt;/td>
&lt;td>engr-dk-303&lt;/td>
&lt;td>10.130.199.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>119&lt;/td>
&lt;td>engr-dk-353&lt;/td>
&lt;td>10.130.200.0/24&lt;/td>
&lt;td>10.130.200.254/24&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>120&lt;/td>
&lt;td>engr-dk-351&lt;/td>
&lt;td>10.130.201.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>121&lt;/td>
&lt;td>engr-dk-345&lt;/td>
&lt;td>10.130.202.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>122&lt;/td>
&lt;td>engr-dk-444&lt;/td>
&lt;td>10.130.203.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>123&lt;/td>
&lt;td>dk-114&lt;/td>
&lt;td>10.130.204.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>124&lt;/td>
&lt;td>dk-110&lt;/td>
&lt;td>10.130.205.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>125&lt;/td>
&lt;td>engr-dk-117&lt;/td>
&lt;td>10.130.206.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>126&lt;/td>
&lt;td>engr-dk-gidravlika&lt;/td>
&lt;td>10.130.207.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>130&lt;/td>
&lt;td>serov&lt;/td>
&lt;td>10.131.112.0/24&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>160&lt;/td>
&lt;td>eco&lt;/td>
&lt;td>10.160.0.0/16&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>161&lt;/td>
&lt;td>eco-dk&lt;/td>
&lt;td>10.161.0.0/16&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>162&lt;/td>
&lt;td>ai-faculty&lt;/td>
&lt;td>10.162.0.0/16&lt;/td>
&lt;td>10.162.0.254&lt;/td>
&lt;td>Факультет искусственного интеллекта&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>163&lt;/td>
&lt;td>ai-mmedia&lt;/td>
&lt;td>10.163.0.0/16&lt;/td>
&lt;td>10.163.0.254&lt;/td>
&lt;td>Мультимедийное оборудование факультета ИИ&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>ФГАУ ГНИИ ИТТ &amp;ldquo;Информика&amp;rdquo; (RUNNet), &lt;a href="http://informika.ru/" target="_blank" rel="noopener">http://informika.ru/&lt;/a>, &lt;a href="http://runnet.ru/" target="_blank" rel="noopener">http://runnet.ru/&lt;/a>.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>Создаётся впечатление, что проблемы физмата руководство не волнуют.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Window manager для Windows</title><link>https://yamadharma.github.io/ru/post/2023/08/09/window-manager-windows/</link><pubDate>Wed, 09 Aug 2023 22:09:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/08/09/window-manager-windows/</guid><description>&lt;p>Альтернативные window manager для Windows.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#blackbox">&lt;span class="section-num">1&lt;/span> BlackBox&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#xoblite">&lt;span class="section-num">1.1&lt;/span> xoblite&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#тайловые-оконные-менеджеры-для-windows">&lt;span class="section-num">2&lt;/span> Тайловые оконные менеджеры для Windows&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#b3">&lt;span class="section-num">2.1&lt;/span> b3&lt;/a>&lt;/li>
&lt;li>&lt;a href="#komorebi">&lt;span class="section-num">2.2&lt;/span> komorebi&lt;/a>&lt;/li>
&lt;li>&lt;a href="#glazewm">&lt;span class="section-num">2.3&lt;/span> GlazeWM&lt;/a>&lt;/li>
&lt;li>&lt;a href="#bug-dot-n">&lt;span class="section-num">2.4&lt;/span> bug.n&lt;/a>&lt;/li>
&lt;li>&lt;a href="#maxto">&lt;span class="section-num">2.5&lt;/span> MaxTo&lt;/a>&lt;/li>
&lt;li>&lt;a href="#stack">&lt;span class="section-num">2.6&lt;/span> Stack&lt;/a>&lt;/li>
&lt;li>&lt;a href="#plumb">&lt;span class="section-num">2.7&lt;/span> Plumb&lt;/a>&lt;/li>
&lt;li>&lt;a href="#workspacer">&lt;span class="section-num">2.8&lt;/span> workspacer&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dwm-win32">&lt;span class="section-num">2.9&lt;/span> dwm-win32&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="blackbox">&lt;span class="section-num">1&lt;/span> BlackBox&lt;/h2>
&lt;ul>
&lt;li>Базирующиеся на Black Box.&lt;/li>
&lt;/ul>
&lt;h3 id="xoblite">&lt;span class="section-num">1.1&lt;/span> xoblite&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://xoblite.net/" target="_blank" rel="noopener">https://xoblite.net/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/xoblite" target="_blank" rel="noopener">https://github.com/xoblite&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="тайловые-оконные-менеджеры-для-windows">&lt;span class="section-num">2&lt;/span> Тайловые оконные менеджеры для Windows&lt;/h2>
&lt;h3 id="b3">&lt;span class="section-num">2.1&lt;/span> b3&lt;/h3>
&lt;ul>
&lt;li>Вариант i3 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>) для Windows.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/ritschmaster/b3" target="_blank" rel="noopener">https://github.com/ritschmaster/b3&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="komorebi">&lt;span class="section-num">2.2&lt;/span> komorebi&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/LGUG2Z/komorebi" target="_blank" rel="noopener">https://github.com/LGUG2Z/komorebi&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="glazewm">&lt;span class="section-num">2.3&lt;/span> GlazeWM&lt;/h3>
&lt;ul>
&lt;li>Вдохновлён i3 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>) для Windows и Polybar.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/glazerdesktop/GlazeWM" target="_blank" rel="noopener">https://github.com/glazerdesktop/GlazeWM&lt;/a>&lt;/li>
&lt;li>Конфигурация в &lt;em>yaml&lt;/em>.&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Winget
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget install GlazeWM
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Устанавливается в &lt;code>%LOCALAPPDATA%\Microsoft\Winget\Packages\&lt;/code> по умолчанию.&lt;/li>
&lt;/ul>
&lt;h3 id="bug-dot-n">&lt;span class="section-num">2.4&lt;/span> bug.n&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/fuhsjr00/bug.n" target="_blank" rel="noopener">https://github.com/fuhsjr00/bug.n&lt;/a>&lt;/li>
&lt;li>Создан как скрипт AutoHotKey.&lt;/li>
&lt;/ul>
&lt;h3 id="maxto">&lt;span class="section-num">2.5&lt;/span> MaxTo&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://maxto.net/" target="_blank" rel="noopener">https://maxto.net/&lt;/a>&lt;/li>
&lt;li>Триальная версия&lt;/li>
&lt;/ul>
&lt;h3 id="stack">&lt;span class="section-num">2.6&lt;/span> Stack&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://losttech.software/stack.html" target="_blank" rel="noopener">https://losttech.software/stack.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="plumb">&lt;span class="section-num">2.7&lt;/span> Plumb&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://palatialsoftware.com/" target="_blank" rel="noopener">http://palatialsoftware.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="workspacer">&lt;span class="section-num">2.8&lt;/span> workspacer&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://workspacer.org/" target="_blank" rel="noopener">https://workspacer.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/workspacer/workspacer" target="_blank" rel="noopener">https://github.com/workspacer/workspacer&lt;/a>&lt;/li>
&lt;li>Установка
&lt;ul>
&lt;li>Chocolatey (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install workspacer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="dwm-win32">&lt;span class="section-num">2.9&lt;/span> dwm-win32&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.brain-dump.org/projects/dwm-win32/" target="_blank" rel="noopener">https://www.brain-dump.org/projects/dwm-win32/&lt;/a>&lt;/li>
&lt;li>Порт dwm на Windows.&lt;/li>
&lt;li>Не развивается (2009).&lt;/li>
&lt;/ul></description></item><item><title>Управление файлами конфигурации. Домашний каталог. Репозиторий</title><link>https://yamadharma.github.io/ru/post/2023/07/30/configuration-file-management-repo/</link><pubDate>Sun, 30 Jul 2023 14:24:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/07/30/configuration-file-management-repo/</guid><description>&lt;p>Репозиторий конфигурационных файлов для домашнего каталога.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-для-десктопа">&lt;span class="section-num">2&lt;/span> Конфигурация для десктопа&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#содержимое">&lt;span class="section-num">2.1&lt;/span> Содержимое&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2.2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-собственного-репозитория-с-помощью-утилит">&lt;span class="section-num">2.2.1&lt;/span> Создание собственного репозитория с помощью утилит&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-репозитория-к-своей-системе">&lt;span class="section-num">2.2.2&lt;/span> Подключение репозитория к своей системе&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">3&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Набор конфигурационных файлов.&lt;/li>
&lt;li>Конфигурационные файлы сделаны в формате Chezmoi (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/10/28/configuration-file-management-chezmoi/">Управление файлами конфигурации. Домашний каталог. Chezmoi&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация-для-десктопа">&lt;span class="section-num">2&lt;/span> Конфигурация для десктопа&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/yamadharma/dotfiles-template" target="_blank" rel="noopener">https://github.com/yamadharma/dotfiles-template&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="содержимое">&lt;span class="section-num">2.1&lt;/span> Содержимое&lt;/h3>
&lt;ul>
&lt;li>Bash&lt;/li>
&lt;li>Tmux&lt;/li>
&lt;li>i3wm (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>)&lt;/li>
&lt;li>Sway (см. &lt;a href="https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/">Переход на Sway&lt;/a>)&lt;/li>
&lt;/ul>
&lt;h3 id="установка">&lt;span class="section-num">2.2&lt;/span> Установка&lt;/h3>
&lt;h4 id="создание-собственного-репозитория-с-помощью-утилит">&lt;span class="section-num">2.2.1&lt;/span> Создание собственного репозитория с помощью утилит&lt;/h4>
&lt;ul>
&lt;li>Будем использовать утилиты командной строки для работы с github (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/04/github-command-line-utilities/">github: утилиты командной строки&lt;/a>).&lt;/li>
&lt;li>Создадим свой репозиторий для конфигурационных файлов на основе шаблона:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gh repo create dotfiles --template&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;yamadharma/dotfiles-template&amp;#34;&lt;/span> --private
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="подключение-репозитория-к-своей-системе">&lt;span class="section-num">2.2.2&lt;/span> Подключение репозитория к своей системе&lt;/h4>
&lt;ul>
&lt;li>Инициализируйте &lt;code>chezmoi&lt;/code> с вашим репозиторием &lt;code>dotfiles&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init git@github.com:&amp;lt;username&amp;gt;/dotfiles.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте, какие изменения внесёт &lt;code>chezmoi&lt;/code> в домашний каталог, запустив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi diff
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если вас устраивают изменения, внесённые &lt;code>chezmoi&lt;/code>, запустите:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi apply -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">3&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Awesome Dotfiles : &lt;a href="https://github.com/webpro/awesome-dotfiles" target="_blank" rel="noopener">https://github.com/webpro/awesome-dotfiles&lt;/a>&lt;/li>
&lt;li>Your unofficial guide to dotfiles on GitHub : &lt;a href="https://dotfiles.github.io/" target="_blank" rel="noopener">https://dotfiles.github.io/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Восстановление btrfs</title><link>https://yamadharma.github.io/ru/post/2023/07/21/btrfs-recovery/</link><pubDate>Fri, 21 Jul 2023 16:56:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/07/21/btrfs-recovery/</guid><description>&lt;p>Восстановление btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#предварительная-подготовка">&lt;span class="section-num">1&lt;/span> Предварительная подготовка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#восстановление">&lt;span class="section-num">2&lt;/span> Восстановление&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="предварительная-подготовка">&lt;span class="section-num">1&lt;/span> Предварительная подготовка&lt;/h2>
&lt;ul>
&lt;li>Подготовьте флеш-диск (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/10/bootable-usb-stick/">Загрузочная флешка&lt;/a>)&lt;/li>
&lt;li>Поместите на него образ SystemRescueCD (&lt;a href="https://www.system-rescue.org/" target="_blank" rel="noopener">https://www.system-rescue.org/&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="восстановление">&lt;span class="section-num">2&lt;/span> Восстановление&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Загружаемся с внешнего устройства.&lt;/p>
&lt;ul>
&lt;li>При загрузке с SystemRescueCD лучше выбрать пункт &lt;code>copy system to RAM&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Запускаем проверку блоков:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/sda1 /mnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs scrub start -Bd /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Если система на монтируется, проверяем блоки на устройстве:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs scrub start -Bd /dev/sda1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Если не монтируется, попробуйте смонтировать для чтения:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -o rescue /dev/sda1 /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Запустите проверку файловой системы:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs check /dev/sda1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Если не поможет, скопируйте файловую систему:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs restore /dev/sda1 /mnt/usbdrive
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Попробуйте восстановить суперблок:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs rescue super-recover /dev/sda1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Попробуйте смонтировать устройство. Если смонтируется нормально, завершайте.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Попробуйте удалить лог:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs rescue zero-log /dev/sda1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Попробуйте смонтировать устройство. Если смонтируется нормально, завершайте.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Попробуйте восстановить чанки:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs rescue chunk-recover /dev/sda1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Попробуйте смонтировать устройство. Если смонтируется нормально, завершайте.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Запускаем восстановление файловой системы на устройстве (это может быть опасно):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs check --repair /dev/sda1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Запускаем проверку блоков:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/sda1 /mnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs scrub start -Bd /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Сборка образа VyOS. Репозиторий</title><link>https://yamadharma.github.io/ru/post/2023/07/16/vyos-build-repository/</link><pubDate>Sun, 16 Jul 2023 19:13:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/07/16/vyos-build-repository/</guid><description>&lt;p>Репозиторий с поддержкой сборки образов VyOS.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозиторий">&lt;span class="section-num">2&lt;/span> Репозиторий&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скрипт-для-сборки">&lt;span class="section-num">3&lt;/span> Скрипт для сборки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#описание-приложения-для-gns3">&lt;span class="section-num">4&lt;/span> Описание приложения для GNS3&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование-в-gns3">&lt;span class="section-num">5&lt;/span> Использование в GNS3&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-образа-vyos-quemu-в-gns3">&lt;span class="section-num">5.1&lt;/span> Установка образа VyOS quemu в GNS3&lt;/a>&lt;/li>
&lt;li>&lt;a href="#видео-установка-образа-vyos-quemu-в-gns3">&lt;span class="section-num">5.2&lt;/span> Видео: Установка образа VyOS quemu в GNS3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий предназначен для хранения образов VyOS, собранных для обучения.&lt;/li>
&lt;li>Образы собираются по стандартной методике (см. &lt;a href="https://yamadharma.github.io/ru/course/nettech/gns3-vyos/">GNS3. Образ VyOS&lt;/a>).&lt;/li>
&lt;li>Сборка организуется по технологии непрерывной интеграции (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/07/16/continuous-integration-github-actions/">Непрерывная интеграция. GitHub Actions&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="репозиторий">&lt;span class="section-num">2&lt;/span> Репозиторий&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/yamadharma/vyos-build" target="_blank" rel="noopener">https://github.com/yamadharma/vyos-build&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="скрипт-для-сборки">&lt;span class="section-num">3&lt;/span> Скрипт для сборки&lt;/h2>
&lt;ul>
&lt;li>Помещается в каталог &lt;code>.github/workflows&lt;/code> репозиторий.&lt;/li>
&lt;li>Назовём его &lt;code>vyos-build-release.yml&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-1">&lt;a class="lnlinks" href="#org-coderef--59b1f4-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">VyOS Build (Release)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-2">&lt;a class="lnlinks" href="#org-coderef--59b1f4-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-3">&lt;a class="lnlinks" href="#org-coderef--59b1f4-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-4">&lt;a class="lnlinks" href="#org-coderef--59b1f4-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-5">&lt;a class="lnlinks" href="#org-coderef--59b1f4-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-6">&lt;a class="lnlinks" href="#org-coderef--59b1f4-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">​ - &amp;#34;*&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-7">&lt;a class="lnlinks" href="#org-coderef--59b1f4-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-8">&lt;a class="lnlinks" href="#org-coderef--59b1f4-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-9">&lt;a class="lnlinks" href="#org-coderef--59b1f4-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-10">&lt;a class="lnlinks" href="#org-coderef--59b1f4-10"> 10&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-11">&lt;a class="lnlinks" href="#org-coderef--59b1f4-11"> 11&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-12">&lt;a class="lnlinks" href="#org-coderef--59b1f4-12"> 12&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-13">&lt;a class="lnlinks" href="#org-coderef--59b1f4-13"> 13&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># For VyOS 1.2 (crux) use vyos/vyos-build:crux&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-14">&lt;a class="lnlinks" href="#org-coderef--59b1f4-14"> 14&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># For VyOS 1.3 (equuleus) use vyos/vyos-build:equuleus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-15">&lt;a class="lnlinks" href="#org-coderef--59b1f4-15"> 15&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># For our VyOS rolling release you should use vyos/vyos-build which will always refer to the latest image.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-16">&lt;a class="lnlinks" href="#org-coderef--59b1f4-16"> 16&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Ref: https://docs.vyos.io/en/latest/contributing/build-vyos.html#build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-17">&lt;a class="lnlinks" href="#org-coderef--59b1f4-17"> 17&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos/vyos-build:equuleus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-18">&lt;a class="lnlinks" href="#org-coderef--59b1f4-18"> 18&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-19">&lt;a class="lnlinks" href="#org-coderef--59b1f4-19"> 19&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">TZ&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Etc/UTC&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-20">&lt;a class="lnlinks" href="#org-coderef--59b1f4-20"> 20&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">options&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>--&lt;span class="l">privileged&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-21">&lt;a class="lnlinks" href="#org-coderef--59b1f4-21"> 21&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-22">&lt;a class="lnlinks" href="#org-coderef--59b1f4-22"> 22&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-23">&lt;a class="lnlinks" href="#org-coderef--59b1f4-23"> 23&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-24">&lt;a class="lnlinks" href="#org-coderef--59b1f4-24"> 24&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Set env&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-25">&lt;a class="lnlinks" href="#org-coderef--59b1f4-25"> 25&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-26">&lt;a class="lnlinks" href="#org-coderef--59b1f4-26"> 26&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> echo &amp;#34;RELEASE_VERSION=${GITHUB_REF:11}&amp;#34; &amp;gt;&amp;gt; $GITHUB_ENV&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-27">&lt;a class="lnlinks" href="#org-coderef--59b1f4-27"> 27&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-28">&lt;a class="lnlinks" href="#org-coderef--59b1f4-28"> 28&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">git clone vyos-build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-29">&lt;a class="lnlinks" href="#org-coderef--59b1f4-29"> 29&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-30">&lt;a class="lnlinks" href="#org-coderef--59b1f4-30"> 30&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> set -eux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-31">&lt;a class="lnlinks" href="#org-coderef--59b1f4-31"> 31&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-32">&lt;a class="lnlinks" href="#org-coderef--59b1f4-32"> 32&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> git clone -b equuleus --single-branch https://github.com/vyos/vyos-build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-33">&lt;a class="lnlinks" href="#org-coderef--59b1f4-33"> 33&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-34">&lt;a class="lnlinks" href="#org-coderef--59b1f4-34"> 34&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">configure&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-35">&lt;a class="lnlinks" href="#org-coderef--59b1f4-35"> 35&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">working-directory&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-36">&lt;a class="lnlinks" href="#org-coderef--59b1f4-36"> 36&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-37">&lt;a class="lnlinks" href="#org-coderef--59b1f4-37"> 37&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> set -eux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-38">&lt;a class="lnlinks" href="#org-coderef--59b1f4-38"> 38&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-39">&lt;a class="lnlinks" href="#org-coderef--59b1f4-39"> 39&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> ./configure \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-40">&lt;a class="lnlinks" href="#org-coderef--59b1f4-40"> 40&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> --architecture amd64 \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-41">&lt;a class="lnlinks" href="#org-coderef--59b1f4-41"> 41&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> --build-by yamadharma@gmail.com \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-42">&lt;a class="lnlinks" href="#org-coderef--59b1f4-42"> 42&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> --build-type release \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-43">&lt;a class="lnlinks" href="#org-coderef--59b1f4-43"> 43&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> --version ${{ env.RELEASE_VERSION }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-44">&lt;a class="lnlinks" href="#org-coderef--59b1f4-44"> 44&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-45">&lt;a class="lnlinks" href="#org-coderef--59b1f4-45"> 45&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">make iso&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-46">&lt;a class="lnlinks" href="#org-coderef--59b1f4-46"> 46&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">working-directory&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-47">&lt;a class="lnlinks" href="#org-coderef--59b1f4-47"> 47&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-48">&lt;a class="lnlinks" href="#org-coderef--59b1f4-48"> 48&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> set -eux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-49">&lt;a class="lnlinks" href="#org-coderef--59b1f4-49"> 49&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-50">&lt;a class="lnlinks" href="#org-coderef--59b1f4-50"> 50&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> make iso&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-51">&lt;a class="lnlinks" href="#org-coderef--59b1f4-51"> 51&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-52">&lt;a class="lnlinks" href="#org-coderef--59b1f4-52"> 52&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">make qemu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-53">&lt;a class="lnlinks" href="#org-coderef--59b1f4-53"> 53&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">working-directory&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-54">&lt;a class="lnlinks" href="#org-coderef--59b1f4-54"> 54&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-55">&lt;a class="lnlinks" href="#org-coderef--59b1f4-55"> 55&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> set -eux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-56">&lt;a class="lnlinks" href="#org-coderef--59b1f4-56"> 56&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-57">&lt;a class="lnlinks" href="#org-coderef--59b1f4-57"> 57&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> make qemu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-58">&lt;a class="lnlinks" href="#org-coderef--59b1f4-58"> 58&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-59">&lt;a class="lnlinks" href="#org-coderef--59b1f4-59"> 59&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ls&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-60">&lt;a class="lnlinks" href="#org-coderef--59b1f4-60"> 60&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-61">&lt;a class="lnlinks" href="#org-coderef--59b1f4-61"> 61&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> set -eux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-62">&lt;a class="lnlinks" href="#org-coderef--59b1f4-62"> 62&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-63">&lt;a class="lnlinks" href="#org-coderef--59b1f4-63"> 63&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> pwd
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-64">&lt;a class="lnlinks" href="#org-coderef--59b1f4-64"> 64&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> ls -lah
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-65">&lt;a class="lnlinks" href="#org-coderef--59b1f4-65"> 65&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> ls -lah vyos-build/build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-66">&lt;a class="lnlinks" href="#org-coderef--59b1f4-66"> 66&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-67">&lt;a class="lnlinks" href="#org-coderef--59b1f4-67"> 67&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/create-release@master&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-68">&lt;a class="lnlinks" href="#org-coderef--59b1f4-68"> 68&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">create_release&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-69">&lt;a class="lnlinks" href="#org-coderef--59b1f4-69"> 69&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-70">&lt;a class="lnlinks" href="#org-coderef--59b1f4-70"> 70&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">GITHUB_TOKEN&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-71">&lt;a class="lnlinks" href="#org-coderef--59b1f4-71"> 71&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-72">&lt;a class="lnlinks" href="#org-coderef--59b1f4-72"> 72&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tag_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ github.ref }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-73">&lt;a class="lnlinks" href="#org-coderef--59b1f4-73"> 73&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">release_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">VyOS ${{ github.ref }} for Education&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-74">&lt;a class="lnlinks" href="#org-coderef--59b1f4-74"> 74&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-75">&lt;a class="lnlinks" href="#org-coderef--59b1f4-75"> 75&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="sd"> VyOS ${{ env.RELEASE_VERSION }} for Education&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-76">&lt;a class="lnlinks" href="#org-coderef--59b1f4-76"> 76&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">draft&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-77">&lt;a class="lnlinks" href="#org-coderef--59b1f4-77"> 77&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prerelease&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-78">&lt;a class="lnlinks" href="#org-coderef--59b1f4-78"> 78&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-79">&lt;a class="lnlinks" href="#org-coderef--59b1f4-79"> 79&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/upload-release-asset@master&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-80">&lt;a class="lnlinks" href="#org-coderef--59b1f4-80"> 80&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-81">&lt;a class="lnlinks" href="#org-coderef--59b1f4-81"> 81&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">GITHUB_TOKEN&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-82">&lt;a class="lnlinks" href="#org-coderef--59b1f4-82"> 82&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-83">&lt;a class="lnlinks" href="#org-coderef--59b1f4-83"> 83&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-84">&lt;a class="lnlinks" href="#org-coderef--59b1f4-84"> 84&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">upload_url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ steps.create_release.outputs.upload_url }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-85">&lt;a class="lnlinks" href="#org-coderef--59b1f4-85"> 85&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-86">&lt;a class="lnlinks" href="#org-coderef--59b1f4-86"> 86&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-build/build/vyos-${{ env.RELEASE_VERSION }}-amd64.iso&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-87">&lt;a class="lnlinks" href="#org-coderef--59b1f4-87"> 87&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-88">&lt;a class="lnlinks" href="#org-coderef--59b1f4-88"> 88&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-${{ env.RELEASE_VERSION }}-amd64.iso&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-89">&lt;a class="lnlinks" href="#org-coderef--59b1f4-89"> 89&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-90">&lt;a class="lnlinks" href="#org-coderef--59b1f4-90"> 90&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_content_type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">application/x-iso9660-image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-91">&lt;a class="lnlinks" href="#org-coderef--59b1f4-91"> 91&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-92">&lt;a class="lnlinks" href="#org-coderef--59b1f4-92"> 92&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/upload-release-asset@master&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-93">&lt;a class="lnlinks" href="#org-coderef--59b1f4-93"> 93&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-94">&lt;a class="lnlinks" href="#org-coderef--59b1f4-94"> 94&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">GITHUB_TOKEN&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-95">&lt;a class="lnlinks" href="#org-coderef--59b1f4-95"> 95&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-96">&lt;a class="lnlinks" href="#org-coderef--59b1f4-96"> 96&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-97">&lt;a class="lnlinks" href="#org-coderef--59b1f4-97"> 97&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">upload_url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ steps.create_release.outputs.upload_url }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-98">&lt;a class="lnlinks" href="#org-coderef--59b1f4-98"> 98&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-99">&lt;a class="lnlinks" href="#org-coderef--59b1f4-99"> 99&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-build/build/vyos-${{ env.RELEASE_VERSION }}-amd64.qcow2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-100">&lt;a class="lnlinks" href="#org-coderef--59b1f4-100">100&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-101">&lt;a class="lnlinks" href="#org-coderef--59b1f4-101">101&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vyos-${{ env.RELEASE_VERSION }}-amd64.qcow2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-102">&lt;a class="lnlinks" href="#org-coderef--59b1f4-102">102&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="org-coderef--59b1f4-103">&lt;a class="lnlinks" href="#org-coderef--59b1f4-103">103&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">asset_content_type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">application/x-qemu-disk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Строка &lt;a href="#org-coderef--59b1f4-6">6&lt;/a>: запускаем скрипт при создании любого тега.&lt;/li>
&lt;li>Строка &lt;a href="#org-coderef--59b1f4-26">26&lt;/a>: из полной ссылки на ветку тега выделяем номер версии.
&lt;ul>
&lt;li>&lt;code>refs/tags/v1.3.x&lt;/code> -&amp;gt; &lt;code>1.3.x&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="описание-приложения-для-gns3">&lt;span class="section-num">4&lt;/span> Описание приложения для GNS3&lt;/h2>
&lt;ul>
&lt;li>Для установки образа VyOS в GNS3 (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/05/07/gns3-network-simulation-tool/">Средство натурного моделирования сетей GNS3&lt;/a>) необходимо создать файл приложения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-2">&lt;a class="lnlinks" href="#hl-1-2"> 2&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;appliance_id&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;a5250e6e-be54-40d3-9082-0f0b601d3231&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-3">&lt;a class="lnlinks" href="#hl-1-3"> 3&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;VyOS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-4">&lt;a class="lnlinks" href="#hl-1-4"> 4&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;category&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;router&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-5">&lt;a class="lnlinks" href="#hl-1-5"> 5&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;VyOS is a community fork of Vyatta, a Linux-based network operating system that provides software-based network routing, firewall, and VPN functionality. Non-official build for Eduacation&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-6">&lt;a class="lnlinks" href="#hl-1-6"> 6&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;vendor_name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Linux&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-7">&lt;a class="lnlinks" href="#hl-1-7"> 7&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;vendor_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://vyos.net/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-8">&lt;a class="lnlinks" href="#hl-1-8"> 8&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;documentation_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://docs.vyos.io/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-9">&lt;a class="lnlinks" href="#hl-1-9"> 9&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;product_name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;VyOS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-10">&lt;a class="lnlinks" href="#hl-1-10">10&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;product_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://vyos.net/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-11">&lt;a class="lnlinks" href="#hl-1-11">11&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;registry_version&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-12">&lt;a class="lnlinks" href="#hl-1-12">12&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;status&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;stable&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-13">&lt;a class="lnlinks" href="#hl-1-13">13&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;maintainer&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Dmitry S. Kulyabov&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-14">&lt;a class="lnlinks" href="#hl-1-14">14&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;maintainer_email&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;yamadharma@gmail.com&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-15">&lt;a class="lnlinks" href="#hl-1-15">15&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;usage&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Default username/password is vyos/vyos.\n\nThe -KVM versions are ready to use, no installation is required.\nThe other images will start the router from the CDROM on initial boot. Login and then type \&amp;#34;install image\&amp;#34; and follow the instructions.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-16">&lt;a class="lnlinks" href="#hl-1-16">16&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;symbol&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;vyos.svg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-17">&lt;a class="lnlinks" href="#hl-1-17">17&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;port_name_format&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;eth{0}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-18">&lt;a class="lnlinks" href="#hl-1-18">18&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;qemu&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-19">&lt;a class="lnlinks" href="#hl-1-19">19&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;adapter_type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;e1000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-20">&lt;a class="lnlinks" href="#hl-1-20">20&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;adapters&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-21">&lt;a class="lnlinks" href="#hl-1-21">21&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;ram&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">512&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-22">&lt;a class="lnlinks" href="#hl-1-22">22&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;hda_disk_interface&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;scsi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-23">&lt;a class="lnlinks" href="#hl-1-23">23&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;arch&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;x86_64&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-24">&lt;a class="lnlinks" href="#hl-1-24">24&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;console_type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;telnet&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-25">&lt;a class="lnlinks" href="#hl-1-25">25&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;boot_priority&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;cd&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-26">&lt;a class="lnlinks" href="#hl-1-26">26&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;kvm&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;allow&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-27">&lt;a class="lnlinks" href="#hl-1-27">27&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-28">&lt;a class="lnlinks" href="#hl-1-28">28&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;images&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-29">&lt;a class="lnlinks" href="#hl-1-29">29&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-30">&lt;a class="lnlinks" href="#hl-1-30">30&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filename&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;vyos-1.3.3-amd64.iso&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-31">&lt;a class="lnlinks" href="#hl-1-31">31&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1.3.3-iso&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-32">&lt;a class="lnlinks" href="#hl-1-32">32&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;md5sum&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1ab25e1b63d9e3305bd5264721305794&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-33">&lt;a class="lnlinks" href="#hl-1-33">33&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filesize&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">382730240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-34">&lt;a class="lnlinks" href="#hl-1-34">34&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/yamadharma/vyos-build/releases/tag/v1.3.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-35">&lt;a class="lnlinks" href="#hl-1-35">35&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;direct_download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/yamadharma/vyos-build/releases/download/v1.3.3/vyos-1.3.3-amd64.iso&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-36">&lt;a class="lnlinks" href="#hl-1-36">36&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-37">&lt;a class="lnlinks" href="#hl-1-37">37&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-38">&lt;a class="lnlinks" href="#hl-1-38">38&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filename&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;vyos-1.3.3-amd64.qcow2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-39">&lt;a class="lnlinks" href="#hl-1-39">39&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1.3.3-qemu&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-40">&lt;a class="lnlinks" href="#hl-1-40">40&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;md5sum&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;9dffb9ab2af456c1eb993c0beef81b91&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-41">&lt;a class="lnlinks" href="#hl-1-41">41&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filesize&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">410058752&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-42">&lt;a class="lnlinks" href="#hl-1-42">42&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/yamadharma/vyos-build/releases/tag/v1.3.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-43">&lt;a class="lnlinks" href="#hl-1-43">43&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;direct_download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/yamadharma/vyos-build/releases/download/v1.3.3/vyos-1.3.3-amd64.qcow2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-44">&lt;a class="lnlinks" href="#hl-1-44">44&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-45">&lt;a class="lnlinks" href="#hl-1-45">45&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-46">&lt;a class="lnlinks" href="#hl-1-46">46&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filename&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;empty8G.qcow2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-47">&lt;a class="lnlinks" href="#hl-1-47">47&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1.0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-48">&lt;a class="lnlinks" href="#hl-1-48">48&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;md5sum&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;f1d2c25b6990f99bd05b433ab603bdb4&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-49">&lt;a class="lnlinks" href="#hl-1-49">49&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;filesize&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">197120&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-50">&lt;a class="lnlinks" href="#hl-1-50">50&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://sourceforge.net/projects/gns-3/files/Empty%20Qemu%20disk/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-51">&lt;a class="lnlinks" href="#hl-1-51">51&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;direct_download_url&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://sourceforge.net/projects/gns-3/files/Empty%20Qemu%20disk/empty8G.qcow2/download&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-52">&lt;a class="lnlinks" href="#hl-1-52">52&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-53">&lt;a class="lnlinks" href="#hl-1-53">53&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-54">&lt;a class="lnlinks" href="#hl-1-54">54&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;versions&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-55">&lt;a class="lnlinks" href="#hl-1-55">55&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-56">&lt;a class="lnlinks" href="#hl-1-56">56&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1.3.3-iso&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-57">&lt;a class="lnlinks" href="#hl-1-57">57&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;images&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-58">&lt;a class="lnlinks" href="#hl-1-58">58&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;hda_disk_image&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;empty8G.qcow2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-59">&lt;a class="lnlinks" href="#hl-1-59">59&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;cdrom_image&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;vyos-1.3.3-amd64.iso&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-60">&lt;a class="lnlinks" href="#hl-1-60">60&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-61">&lt;a class="lnlinks" href="#hl-1-61">61&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-62">&lt;a class="lnlinks" href="#hl-1-62">62&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-63">&lt;a class="lnlinks" href="#hl-1-63">63&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1.3.3-qemu&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-64">&lt;a class="lnlinks" href="#hl-1-64">64&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;images&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-65">&lt;a class="lnlinks" href="#hl-1-65">65&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="s2">&amp;#34;hda_disk_image&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;vyos-1.3.3-amd64.qcow2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-66">&lt;a class="lnlinks" href="#hl-1-66">66&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-67">&lt;a class="lnlinks" href="#hl-1-67">67&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-68">&lt;a class="lnlinks" href="#hl-1-68">68&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-69">&lt;a class="lnlinks" href="#hl-1-69">69&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование-в-gns3">&lt;span class="section-num">5&lt;/span> Использование в GNS3&lt;/h2>
&lt;h3 id="установка-образа-vyos-quemu-в-gns3">&lt;span class="section-num">5.1&lt;/span> Установка образа VyOS quemu в GNS3&lt;/h3>
&lt;ul>
&lt;li>Скачайте файл &lt;code>vyos-edu.gns3a&lt;/code> из репозитория: &lt;a href="https://github.com/yamadharma/vyos-build/releases" target="_blank" rel="noopener">https://github.com/yamadharma/vyos-build/releases&lt;/a>.&lt;/li>
&lt;li>Импортируйте &lt;code>vyos-edu.gns3a&lt;/code> в GNS3 через пункт меню &lt;em>File&amp;gt;Import appliance&lt;/em>.
&lt;ul>
&lt;li>Документация: &lt;a href="https://docs.gns3.com/docs/using-gns3/beginners/import-gns3-appliance" target="_blank" rel="noopener">https://docs.gns3.com/docs/using-gns3/beginners/import-gns3-appliance&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Установите необходимую версию VyOS.&lt;/li>
&lt;/ul>
&lt;h3 id="видео-установка-образа-vyos-quemu-в-gns3">&lt;span class="section-num">5.2&lt;/span> Видео: Установка образа VyOS quemu в GNS3&lt;/h3>
&lt;nav>
&lt;div class="nav nav-tabs" id="nav-tab" role="tablist">
&lt;a class="nav-item nav-link active "
id="nav-efcabd" data-toggle="tab" href="#efcabd"
role="tab" aria-controls="nav-home" aria-selected="true">RuTube&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-bcfdea" data-toggle="tab" href="#bcfdea"
role="tab" aria-controls="nav-home" aria-selected="true">Youtube&lt;/a>
&lt;/div>
&lt;/nav>
&lt;div class="tab-content" id="nav-tab-content">
&lt;div class="tab-pane fade show active " id="efcabd" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe class="rutube-player" type="text/html"
width="720" height="405"
src="https://rutube.ru/play/embed/951fc2e6bf2157c298e019136b83992b"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0">
&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="bcfdea" role="tabpanel" aria-labelledby="nav-1">
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/6bBXVc6bmrs?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;/div></description></item><item><title>Непрерывная интеграция. GitHub Actions</title><link>https://yamadharma.github.io/ru/post/2023/07/16/continuous-integration-github-actions/</link><pubDate>Sun, 16 Jul 2023 19:04:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/07/16/continuous-integration-github-actions/</guid><description>&lt;p>Непрерывная интеграция. GitHub Actions.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-концепции-github-actions">&lt;span class="section-num">2&lt;/span> Основные концепции Github Actions&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переменные-среды">&lt;span class="section-num">3&lt;/span> Переменные среды&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#соглашения-об-именовании-переменных-конфигурации">&lt;span class="section-num">3.1&lt;/span> Соглашения об именовании переменных конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переменные-среды-по-умолчанию">&lt;span class="section-num">3.2&lt;/span> Переменные среды по умолчанию&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#управление-разрешениями-для-github-token">&lt;span class="section-num">4&lt;/span> Управление разрешениями для GITHUB_TOKEN&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-разрешений-в-рабочем-процессе">&lt;span class="section-num">4.1&lt;/span> Установка разрешений в рабочем процессе&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-разрешений-по-умолчанию-для-репозитория">&lt;span class="section-num">4.2&lt;/span> Установка разрешений по умолчанию для репозитория&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Описание: &lt;a href="https://github.com/features/actions" target="_blank" rel="noopener">https://github.com/features/actions&lt;/a>&lt;/li>
&lt;li>GitHub Actions &amp;mdash; система непрерывной интеграции.&lt;/li>
&lt;li>Бесплатна для публичных репозиториев.&lt;/li>
&lt;li>В репозитории создаётся каталог &lt;code>.github/workflows&lt;/code>.&lt;/li>
&lt;li>В каталоге размещаются файлы с описанием шагов, которые нужно выполнить.&lt;/li>
&lt;li>В терминах Github Actions такое описание процесса называется workflow.&lt;/li>
&lt;/ul>
&lt;h2 id="основные-концепции-github-actions">&lt;span class="section-num">2&lt;/span> Основные концепции Github Actions&lt;/h2>
&lt;ul>
&lt;li>Воркфлоу (Workflows)
&lt;ul>
&lt;li>Каждый репозиторий на GitHub может содержать один или несколько воркфлоу.&lt;/li>
&lt;li>Каждый воркфлоу определяется в отдельном файле конфигурации в каталоге репозитория &lt;code>.github/workflows&lt;/code>.&lt;/li>
&lt;li>Несколько воркфлоу могут выполняться параллельно.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>События (Events)
&lt;ul>
&lt;li>Воркфлоу может запускаться одним или несколькими событиями.&lt;/li>
&lt;li>Это могут быть внутренние события GitHub, запланированные события, произвольные внешние события.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Задания (Jobs)
&lt;ul>
&lt;li>Воркфлоу состоит из одного или нескольких заданий.&lt;/li>
&lt;li>Задание содержит набор команд, которые запускаются вместе с рабочим процессом.&lt;/li>
&lt;li>По умолчанию при запуске воркфлоу все его задания выполняются параллельно, однако между ними можно определить зависимость, чтобы они выполнялись последовательно.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Раннеры (Runners)
&lt;ul>
&lt;li>Временный сервер на GitHub с выбранной операционной системой.&lt;/li>
&lt;li>Каждое задание выполняется на определенном раннере.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Шаги (Steps)
&lt;ul>
&lt;li>Задания состоят из последовательности шагов.&lt;/li>
&lt;li>Шаг &amp;ndash; это либо команда оболочки (shell command), либо экшен (action).&lt;/li>
&lt;li>Все шаги задания выполняются последовательно на раннере, связанном с заданием.&lt;/li>
&lt;li>По умолчанию в случае сбоя шага все следующие шаги задания пропускаются.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="переменные-среды">&lt;span class="section-num">3&lt;/span> Переменные среды&lt;/h2>
&lt;ul>
&lt;li>Документация: &lt;a href="https://docs.github.com/ru/actions/learn-github-actions/variables" target="_blank" rel="noopener">https://docs.github.com/ru/actions/learn-github-actions/variables&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="соглашения-об-именовании-переменных-конфигурации">&lt;span class="section-num">3.1&lt;/span> Соглашения об именовании переменных конфигурации&lt;/h3>
&lt;ul>
&lt;li>К именам переменных конфигурации применяются следующие правила:
&lt;ul>
&lt;li>Имена могут содержать только буквенно-цифровые символы (&lt;code>[a-z]&lt;/code>, &lt;code>[A-Z]&lt;/code>, &lt;code>[0-9]&lt;/code>) или символы подчёркивания (&lt;code>_&lt;/code>). Пробелы недопустимы.&lt;/li>
&lt;li>Имена не должны начинаться с префикса &lt;code>GITHUB_&lt;/code>.&lt;/li>
&lt;li>Имена не должны начинаться с числа.&lt;/li>
&lt;li>В именах не учитывается регистр символов.&lt;/li>
&lt;li>Имена должны быть уникальными на уровне, на который они создаются.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="переменные-среды-по-умолчанию">&lt;span class="section-num">3.2&lt;/span> Переменные среды по умолчанию&lt;/h3>
&lt;ul>
&lt;li>&lt;code>CI&lt;/code>: Всегда имеет значение true.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTION&lt;/code>: Имя выполняемого в данный момент действия или id шага.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTION_PATH&lt;/code>: Путь к расположению действия. Это свойство поддерживается только в составных действиях.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTION_REPOSITORY&lt;/code>: Для шага, в котором выполняется действие, это имя владельца и репозитория, где находится действие.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTIONS&lt;/code>: Всегда имеет значение true, когда GitHub Actions запускает рабочий процесс. Эту переменную можно использовать, чтобы различать, когда тесты выполняются локально или с помощью GitHub Actions.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTOR&lt;/code>: Имя пользователя или приложения, инициирующего рабочий процесс.&lt;/li>
&lt;li>&lt;code>GITHUB_ACTOR_ID&lt;/code>: Идентификатор учетной записи пользователя или приложения, активировавшего начальное выполнение рабочего процесса. Отличается от имени пользователя субъекта.&lt;/li>
&lt;li>&lt;code>GITHUB_API_URL&lt;/code>: Возвращает URL-адрес API.&lt;/li>
&lt;li>&lt;code>GITHUB_BASE_REF&lt;/code>: Имя базовой ссылки или целевой ветви запроса на вытягивание в выполнении рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_ENV&lt;/code>: Путь в средстве выполнения к файлу, который задаёт переменные из команд рабочего процесса. Этот файл уникален для текущего шага и изменяется для каждого шага задания.&lt;/li>
&lt;li>&lt;code>GITHUB_EVENT_NAME&lt;/code>: Имя события, которое активировало рабочий процесс.&lt;/li>
&lt;li>&lt;code>GITHUB_EVENT_PATH&lt;/code>: Путь к файлу в средстве выполнения, который содержит полные полезные данные веб-перехватчика событий.&lt;/li>
&lt;li>&lt;code>GITHUB_GRAPHQL_URL&lt;/code>: Возвращает URL-адрес API GraphQL.&lt;/li>
&lt;li>&lt;code>GITHUB_HEAD_REF&lt;/code>: Ссылка на голову или исходная ветвь запроса на вытягивание в рабочем процессе.&lt;/li>
&lt;li>&lt;code>GITHUB_JOB&lt;/code>: Job_id текущего задания.&lt;/li>
&lt;li>&lt;code>GITHUB_PATH&lt;/code>: Путь в средстве выполнения к файлу, который задаёт системные PATH переменные из команд рабочего процесса. Этот файл уникален для текущего шага и изменяется для каждого шага задания.&lt;/li>
&lt;li>&lt;code>GITHUB_REF&lt;/code>: Полная ссылка на ветвь или тег, активировавшая выполнение рабочего процесса.
&lt;ul>
&lt;li>Ссылка сохраняется в полном формате, то есть &lt;code>refs/heads/&amp;lt;branch_name&amp;gt;&lt;/code> для ветвей, &lt;code>refs/pull/&amp;lt;pr_number&amp;gt;/merge&lt;/code> для запросов на вытягивание и &lt;code>refs/tags/&amp;lt;tag_name&amp;gt;&lt;/code> для тегов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>GITHUB_REF_NAME&lt;/code>: Короткое имя ссылки на ветвь или тег, активировав запуск рабочего процесса. Это значение соответствует имени ветви или тега, отображаемой в GitHub.&lt;/li>
&lt;li>&lt;code>GITHUB_REF_PROTECTED&lt;/code>: Значение true, если защита ветви настроена для ссылки, которая активировала выполнение рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_REF_TYPE&lt;/code>: Тип ссылки, активировавшей выполнение рабочего процесса. Допустимые значения: branch или tag.&lt;/li>
&lt;li>&lt;code>GITHUB_REPOSITORY_ID&lt;/code>: Идентификатор репозитория. Отличается от имени репозитория.&lt;/li>
&lt;li>&lt;code>GITHUB_REPOSITORY_OWNER&lt;/code>: Имя владельца репозитория.&lt;/li>
&lt;li>&lt;code>GITHUB_REPOSITORY_OWNER_ID&lt;/code>: Идентификатор учетной записи владельца репозитория. Отличается от имени владельца.&lt;/li>
&lt;li>&lt;code>GITHUB_RETENTION_DAYS&lt;/code>: Количество дней, в течение которых хранятся журналы и артефакты выполнения рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_RUN_ATTEMPT&lt;/code>: Уникальный номер для каждой попытки запуска определенного рабочего процесса в репозитории.&lt;/li>
&lt;li>&lt;code>GITHUB_RUN_ID&lt;/code>: Уникальный номер каждого запуска рабочего процесса в репозитории. Он не изменяется при повторном запуске рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_RUN_NUMBER&lt;/code>: Уникальный номер для каждого запуска определенного рабочего процесса в репозитории.&lt;/li>
&lt;li>&lt;code>GITHUB_SERVER_URL&lt;/code>: URL-адрес сервера GitHub.&lt;/li>
&lt;li>&lt;code>GITHUB_SHA&lt;/code>: SHA фиксации, инициировавшей рабочий процесс.&lt;/li>
&lt;li>&lt;code>GITHUB_STEP_SUMMARY&lt;/code>: Путь средства выполнения тестов к файлу, который содержит сводки заданий из команд рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_WORKFLOW&lt;/code>: Имя рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_WORKFLOW_REF&lt;/code>: Путь ссылки к рабочему процессу.&lt;/li>
&lt;li>&lt;code>GITHUB_WORKFLOW_SHA&lt;/code>: Sha фиксации для файла рабочего процесса.&lt;/li>
&lt;li>&lt;code>GITHUB_WORKSPACE&lt;/code>: Рабочий каталог по умолчанию в средстве выполнения для шагов и расположение репозитория по умолчанию при использовании checkout действия.&lt;/li>
&lt;li>&lt;code>RUNNER_ARCH&lt;/code>: Архитектура средства выполнения задания. Возможные значения: &lt;code>x86&lt;/code>, &lt;code>x64&lt;/code>, &lt;code>arm&lt;/code>, &lt;code>arm64&lt;/code>.&lt;/li>
&lt;li>&lt;code>RUNNER_DEBUG&lt;/code>: Это делается только в том случае, если ведение журнала отладки включено и всегда имеет значение 1.&lt;/li>
&lt;li>&lt;code>RUNNER_NAME&lt;/code>: Имя средства выполнения задания.&lt;/li>
&lt;li>&lt;code>RUNNER_OS&lt;/code>: Операционная система средства выполнения тестов, выполняющего задание. Возможные значения: Linux, Windows или macOS.&lt;/li>
&lt;li>&lt;code>RUNNER_TEMP&lt;/code>: Путь к временному каталогу в средстве выполнения.&lt;/li>
&lt;li>&lt;code>RUNNER_TOOL_CACHE&lt;/code>: Путь к каталогу, содержащему предустановленные средства для размещенных в GitHub средств выполнения.&lt;/li>
&lt;/ul>
&lt;h2 id="управление-разрешениями-для-github-token">&lt;span class="section-num">4&lt;/span> Управление разрешениями для GITHUB_TOKEN&lt;/h2>
&lt;ul>
&lt;li>&lt;code>GITHUB_TOKEN&lt;/code> &amp;mdash; автоматически сгенерированный секрет, который позволяет выполнять вызовы GitHub API с проверкой подлинности при запуске рабочего процесса.&lt;/li>
&lt;li>Действия создают новый токен для каждого задания, срок действия которого истекает после завершения задания.&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.github.com/ru/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token" target="_blank" rel="noopener">https://docs.github.com/ru/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-разрешений-в-рабочем-процессе">&lt;span class="section-num">4.1&lt;/span> Установка разрешений в рабочем процессе&lt;/h3>
&lt;ul>
&lt;li>Ключ &lt;code>permissions&lt;/code> позволяет указать, какие разрешения необходимо использовать для токена:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">permissions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">actions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">checks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">contents&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">deployments&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">issues&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">packages&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">pull-requests&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repository-projects&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">security-events&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">statuses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">read|write|none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Любому разрешению, отсутствующему в списке, будет присвоено значение &lt;code>none&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="установка-разрешений-по-умолчанию-для-репозитория">&lt;span class="section-num">4.2&lt;/span> Установка разрешений по умолчанию для репозитория&lt;/h3>
&lt;ul>
&lt;li>В графическом интерфейсе можно установить разрешения по умолчанию для токена для всего репозитория.&lt;/li>
&lt;li>Можно выбрать один из двух вариантов:
&lt;ul>
&lt;li>Чтение/запись для всех областей (текущее значение по умолчанию)&lt;/li>
&lt;li>Читать содержимое репозитория&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Установка значения по умолчанию &lt;code>contents:read&lt;/code> достаточна для любых рабочих процессов, которые просто необходимо клонировать и компилировать.&lt;/li>
&lt;li>Если вам нужны дополнительные разрешения, вам нужно будет указать их в &lt;code>yaml&lt;/code> вашего рабочего процесса.&lt;/li>
&lt;/ul></description></item><item><title>Тайловые оконные менеджеры</title><link>https://yamadharma.github.io/ru/post/2023/06/19/tiling-window-manager/</link><pubDate>Mon, 19 Jun 2023 09:37:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/19/tiling-window-manager/</guid><description>&lt;p>Тайловые оконные менеджеры.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#x-window-system">&lt;span class="section-num">2&lt;/span> X Window System&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#awesome">&lt;span class="section-num">2.1&lt;/span> Awesome&lt;/a>&lt;/li>
&lt;li>&lt;a href="#bspwm">&lt;span class="section-num">2.2&lt;/span> Bspwm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dwm">&lt;span class="section-num">2.3&lt;/span> Dwm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#herbstluftwm">&lt;span class="section-num">2.4&lt;/span> Herbstluftwm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#i3">&lt;span class="section-num">2.5&lt;/span> i3&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ion">&lt;span class="section-num">2.6&lt;/span> Ion&lt;/a>&lt;/li>
&lt;li>&lt;a href="#larswm">&lt;span class="section-num">2.7&lt;/span> Larswm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#leftwm">&lt;span class="section-num">2.8&lt;/span> LeftWM&lt;/a>&lt;/li>
&lt;li>&lt;a href="#qtile">&lt;span class="section-num">2.9&lt;/span> Qtile&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ratpoison">&lt;span class="section-num">2.10&lt;/span> Ratpoison&lt;/a>&lt;/li>
&lt;li>&lt;a href="#spectrwm">&lt;span class="section-num">2.11&lt;/span> Spectrwm&lt;/a>&lt;/li>
&lt;li>&lt;a href="#stumpwm">&lt;span class="section-num">2.12&lt;/span> StumpWM&lt;/a>&lt;/li>
&lt;li>&lt;a href="#wmii">&lt;span class="section-num">2.13&lt;/span> Wmii&lt;/a>&lt;/li>
&lt;li>&lt;a href="#xmonad">&lt;span class="section-num">2.14&lt;/span> Xmonad&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#wayland">&lt;span class="section-num">3&lt;/span> Wayland&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#hyprland">&lt;span class="section-num">3.1&lt;/span> Hyprland&lt;/a>&lt;/li>
&lt;li>&lt;a href="#sway">&lt;span class="section-num">3.2&lt;/span> Sway&lt;/a>&lt;/li>
&lt;li>&lt;a href="#river">&lt;span class="section-num">3.3&lt;/span> River&lt;/a>&lt;/li>
&lt;li>&lt;a href="#cagebreak">&lt;span class="section-num">3.4&lt;/span> CageBreak&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dwl">&lt;span class="section-num">3.5&lt;/span> dwl&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#тайловые-оконные-менеджеры-для-windows">&lt;span class="section-num">4&lt;/span> Тайловые оконные менеджеры для Windows&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#b3">&lt;span class="section-num">4.1&lt;/span> b3&lt;/a>&lt;/li>
&lt;li>&lt;a href="#komorebi">&lt;span class="section-num">4.2&lt;/span> komorebi&lt;/a>&lt;/li>
&lt;li>&lt;a href="#glazewm">&lt;span class="section-num">4.3&lt;/span> GlazeWM&lt;/a>&lt;/li>
&lt;li>&lt;a href="#bug-dot-n">&lt;span class="section-num">4.4&lt;/span> bug.n&lt;/a>&lt;/li>
&lt;li>&lt;a href="#maxto">&lt;span class="section-num">4.5&lt;/span> MaxTo&lt;/a>&lt;/li>
&lt;li>&lt;a href="#stack">&lt;span class="section-num">4.6&lt;/span> Stack&lt;/a>&lt;/li>
&lt;li>&lt;a href="#plumb">&lt;span class="section-num">4.7&lt;/span> Plumb&lt;/a>&lt;/li>
&lt;li>&lt;a href="#workspacer">&lt;span class="section-num">4.8&lt;/span> workspacer&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dwm-win32">&lt;span class="section-num">4.9&lt;/span> dwm-win32&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Фреймовый (мозаичный, плиточный, тайловый) оконный менеджер &amp;mdash; это менеджер окон, разбивающий рабочее пространство экрана на взаимно не пересекающиеся прямоугольные области &amp;mdash; фреймы.&lt;/li>
&lt;li>Каждый фрейм используется для вывода информации отдельным приложением, в противоположность традиционным менеджерам окон, которые создают области покоординатно и послойно («окна»), пытаясь следовать метафоре «рабочего стола».&lt;/li>
&lt;li>Особенности:
&lt;ul>
&lt;li>полное использование всего видимого пространства;&lt;/li>
&lt;li>минимизация использования мыши в операциях с окнами.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="x-window-system">&lt;span class="section-num">2&lt;/span> X Window System&lt;/h2>
&lt;ul>
&lt;li>В системе X Window оконный менеджер представляет собой отдельную программу.&lt;/li>
&lt;/ul>
&lt;h3 id="awesome">&lt;span class="section-num">2.1&lt;/span> Awesome&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://awesomewm.org/" target="_blank" rel="noopener">https://awesomewm.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/awesomeWM/awesome" target="_blank" rel="noopener">https://github.com/awesomeWM/awesome&lt;/a>&lt;/li>
&lt;li>Основан на dwm.&lt;/li>
&lt;li>Мозаичное расположение окон, плавающие элементы, теги.&lt;/li>
&lt;li>Написан на C.&lt;/li>
&lt;li>Конфигурация на Lua.&lt;/li>
&lt;li>Хорошо задокументирован.&lt;/li>
&lt;li>Нормально обращается с мышью.&lt;/li>
&lt;/ul>
&lt;h3 id="bspwm">&lt;span class="section-num">2.2&lt;/span> Bspwm&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/baskerville/bspwm" target="_blank" rel="noopener">https://github.com/baskerville/bspwm&lt;/a>&lt;/li>
&lt;li>Представляет окна как листья полного бинарного дерева.&lt;/li>
&lt;li>Не обрабатывает привязки клавиш сам по себе, требуя использование другой программы.&lt;/li>
&lt;li>Настройка горячих клавиш производится с помощью отдельной программы sxhkd.&lt;/li>
&lt;li>Конфигурация может быть написана на любом скриптовом языке.&lt;/li>
&lt;/ul>
&lt;h3 id="dwm">&lt;span class="section-num">2.3&lt;/span> Dwm&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://dwm.suckless.org/" target="_blank" rel="noopener">http://dwm.suckless.org/&lt;/a>&lt;/li>
&lt;li>По умолчанию используется схема «основная область + область стека».&lt;/li>
&lt;li>Другие стандартные макеты представляют собой режим «монокля» с одним окном и плавающий макет без мозаики.&lt;/li>
&lt;/ul>
&lt;h3 id="herbstluftwm">&lt;span class="section-num">2.4&lt;/span> Herbstluftwm&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://herbstluftwm.org/" target="_blank" rel="noopener">https://herbstluftwm.org/&lt;/a>&lt;/li>
&lt;li>Использует концепцию независимых от монитора тегов в качестве рабочих пространств.&lt;/li>
&lt;li>Одновременно можно просмотреть ровно один тег.&lt;/li>
&lt;li>Настраивается во время выполнения с помощью вызовов IPC из herbstclient.&lt;/li>
&lt;/ul>
&lt;h3 id="i3">&lt;span class="section-num">2.5&lt;/span> i3&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/i3/i3" target="_blank" rel="noopener">https://github.com/i3/i3&lt;/a>&lt;/li>
&lt;li>Основан на wmii.&lt;/li>
&lt;li>Рассматривает дополнительные мониторы как дополнительные рабочие области.&lt;/li>
&lt;li>Позволяет вертикальное и горизонтальное разделение, макеты с вкладками и стопкой, а также родительские контейнеры.&lt;/li>
&lt;li>Можно управлять полностью с клавиатуры, но можно использовать и мышь.&lt;/li>
&lt;li>Правила расположения окон можно настроить очень гибко.&lt;/li>
&lt;li>Хорошая документация.&lt;/li>
&lt;/ul>
&lt;h3 id="ion">&lt;span class="section-num">2.6&lt;/span> Ion&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://tuomov.iki.fi/software/ion/" target="_blank" rel="noopener">https://tuomov.iki.fi/software/ion/&lt;/a>&lt;/li>
&lt;li>Каждый фрейм может содержать одно или несколько окон.&lt;/li>
&lt;li>Только одно из этих окон видно и заполняет весь кадр.&lt;/li>
&lt;li>Не развивается.&lt;/li>
&lt;/ul>
&lt;h3 id="larswm">&lt;span class="section-num">2.7&lt;/span> Larswm&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://porneia.free.fr/larswm/larswm.html" target="_blank" rel="noopener">http://porneia.free.fr/larswm/larswm.html&lt;/a>&lt;/li>
&lt;li>Динамический тайлинг.&lt;/li>
&lt;li>Дисплей разделён по вертикали на две области.&lt;/li>
&lt;li>Левая область заполнена одним окном, правая содержит все остальные окна, расположенные друг над другом.&lt;/li>
&lt;li>Не развивается.&lt;/li>
&lt;/ul>
&lt;h3 id="leftwm">&lt;span class="section-num">2.8&lt;/span> LeftWM&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/leftwm/leftwm" target="_blank" rel="noopener">https://github.com/leftwm/leftwm&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="qtile">&lt;span class="section-num">2.9&lt;/span> Qtile&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://qtile.org/" target="_blank" rel="noopener">http://qtile.org/&lt;/a>&lt;/li>
&lt;li>Написан на Python.&lt;/li>
&lt;/ul>
&lt;h3 id="ratpoison">&lt;span class="section-num">2.10&lt;/span> Ratpoison&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.nongnu.org/ratpoison/" target="_blank" rel="noopener">https://www.nongnu.org/ratpoison/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="spectrwm">&lt;span class="section-num">2.11&lt;/span> Spectrwm&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/conformal/spectrwm" target="_blank" rel="noopener">https://github.com/conformal/spectrwm&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="stumpwm">&lt;span class="section-num">2.12&lt;/span> StumpWM&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/stumpwm/stumpwm" target="_blank" rel="noopener">https://github.com/stumpwm/stumpwm&lt;/a>&lt;/li>
&lt;li>Ответвление ratpoison.&lt;/li>
&lt;li>Управляется клавиатурой, поддерживает несколько дисплеев (например, xrandr).&lt;/li>
&lt;li>Язык настройки &amp;mdash; Common Lisp.&lt;/li>
&lt;li>По умолчанию использует совместимые с Emacs сочетания клавиш.&lt;/li>
&lt;/ul>
&lt;h3 id="wmii">&lt;span class="section-num">2.13&lt;/span> Wmii&lt;/h3>
&lt;ul>
&lt;li>Мозаичное и групповое управление окнами с помощью клавиатуры и мыши.&lt;/li>
&lt;li>Идеология тегов.&lt;/li>
&lt;li>Конфигурация по умолчанию использует сочетания клавиш, заимствованные из текстового редактора vi.&lt;/li>
&lt;li>Настройка через виртуальную файловую систему с использованием протокола файловой системы 9P.&lt;/li>
&lt;/ul>
&lt;h3 id="xmonad">&lt;span class="section-num">2.14&lt;/span> Xmonad&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://xmonad.org/" target="_blank" rel="noopener">https://xmonad.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/xmonad/xmonad" target="_blank" rel="noopener">https://github.com/xmonad/xmonad&lt;/a>&lt;/li>
&lt;li>Расширяемый WM, написанный на Haskell.&lt;/li>
&lt;li>Ориентируется на dwm.&lt;/li>
&lt;/ul>
&lt;h2 id="wayland">&lt;span class="section-num">3&lt;/span> Wayland&lt;/h2>
&lt;h3 id="hyprland">&lt;span class="section-num">3.1&lt;/span> Hyprland&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://hyprland.org/" target="_blank" rel="noopener">https://hyprland.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/hyprwm/Hyprland" target="_blank" rel="noopener">https://github.com/hyprwm/Hyprland&lt;/a>&lt;/li>
&lt;li>Динамический мозаичный компоновщик.&lt;/li>
&lt;/ul>
&lt;h3 id="sway">&lt;span class="section-num">3.2&lt;/span> Sway&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/">Переход на Sway&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/swaywm/sway" target="_blank" rel="noopener">https://github.com/swaywm/sway&lt;/a>&lt;/li>
&lt;li>Замена оконного менеджера i3 для Wayland.&lt;/li>
&lt;li>Использует конфигурацию i3.&lt;/li>
&lt;/ul>
&lt;h3 id="river">&lt;span class="section-num">3.3&lt;/span> River&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/riverwm/river" target="_blank" rel="noopener">https://github.com/riverwm/river&lt;/a>&lt;/li>
&lt;li>Динамический тайлинговый менеджер Wayland.&lt;/li>
&lt;/ul>
&lt;h3 id="cagebreak">&lt;span class="section-num">3.4&lt;/span> CageBreak&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/project-repo/cagebreak" target="_blank" rel="noopener">https://github.com/project-repo/cagebreak&lt;/a>&lt;/li>
&lt;li>Основан на Cage и Ratpoison.&lt;/li>
&lt;/ul>
&lt;h3 id="dwl">&lt;span class="section-num">3.5&lt;/span> dwl&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/djpohly/dwl" target="_blank" rel="noopener">https://github.com/djpohly/dwl&lt;/a>&lt;/li>
&lt;li>Вдохновлён dwm.&lt;/li>
&lt;li>Не имеет никакого другого интерфейса настройки, кроме редактирования исходного кода.&lt;/li>
&lt;/ul>
&lt;h2 id="тайловые-оконные-менеджеры-для-windows">&lt;span class="section-num">4&lt;/span> Тайловые оконные менеджеры для Windows&lt;/h2>
&lt;h3 id="b3">&lt;span class="section-num">4.1&lt;/span> b3&lt;/h3>
&lt;ul>
&lt;li>Вариант i3 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>) для Windows.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/ritschmaster/b3" target="_blank" rel="noopener">https://github.com/ritschmaster/b3&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="komorebi">&lt;span class="section-num">4.2&lt;/span> komorebi&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/LGUG2Z/komorebi" target="_blank" rel="noopener">https://github.com/LGUG2Z/komorebi&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="glazewm">&lt;span class="section-num">4.3&lt;/span> GlazeWM&lt;/h3>
&lt;ul>
&lt;li>Вдохновлён i3 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>) для Windows и Polybar.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/glazerdesktop/GlazeWM" target="_blank" rel="noopener">https://github.com/glazerdesktop/GlazeWM&lt;/a>&lt;/li>
&lt;li>Конфигурация в &lt;em>yaml&lt;/em>.&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Winget
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">winget install GlazeWM
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Устанавливается в &lt;code>%LOCALAPPDATA%\Microsoft\Winget\Packages\&lt;/code> по умолчанию.&lt;/li>
&lt;/ul>
&lt;h3 id="bug-dot-n">&lt;span class="section-num">4.4&lt;/span> bug.n&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/fuhsjr00/bug.n" target="_blank" rel="noopener">https://github.com/fuhsjr00/bug.n&lt;/a>&lt;/li>
&lt;li>Создан как скрипт AutoHotKey.&lt;/li>
&lt;/ul>
&lt;h3 id="maxto">&lt;span class="section-num">4.5&lt;/span> MaxTo&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://maxto.net/" target="_blank" rel="noopener">https://maxto.net/&lt;/a>&lt;/li>
&lt;li>Триальная версия&lt;/li>
&lt;/ul>
&lt;h3 id="stack">&lt;span class="section-num">4.6&lt;/span> Stack&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://losttech.software/stack.html" target="_blank" rel="noopener">https://losttech.software/stack.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="plumb">&lt;span class="section-num">4.7&lt;/span> Plumb&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://palatialsoftware.com/" target="_blank" rel="noopener">http://palatialsoftware.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="workspacer">&lt;span class="section-num">4.8&lt;/span> workspacer&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://workspacer.org/" target="_blank" rel="noopener">https://workspacer.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/workspacer/workspacer" target="_blank" rel="noopener">https://github.com/workspacer/workspacer&lt;/a>&lt;/li>
&lt;li>Установка
&lt;ul>
&lt;li>Chocolatey (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install workspacer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="dwm-win32">&lt;span class="section-num">4.9&lt;/span> dwm-win32&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.brain-dump.org/projects/dwm-win32/" target="_blank" rel="noopener">https://www.brain-dump.org/projects/dwm-win32/&lt;/a>&lt;/li>
&lt;li>Порт dwm на Windows.&lt;/li>
&lt;li>Не развивается (2009).&lt;/li>
&lt;/ul></description></item><item><title>Обновление хостовых ключей ssh Bitbucket Cloud</title><link>https://yamadharma.github.io/ru/post/2023/06/14/update-bitbucket-ssh-host-keys/</link><pubDate>Wed, 14 Jun 2023 17:45:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/14/update-bitbucket-ssh-host-keys/</guid><description>&lt;p>Обновление хостовых ключей ssh Bitbucket Cloud. Заметка кратковременная, для устранения текущей проблемы.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#определите-не-сменили-ли-вы-уже-ключи">&lt;span class="section-num">2&lt;/span> Определите, не сменили ли вы уже ключи&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установите-новые-ключи">&lt;span class="section-num">3&lt;/span> Установите новые ключи&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/h2>
&lt;ul>
&lt;li>Зашифрованные копии ключей хоста Bitbucket SSH были включены в утечку данных стороннего поставщика управления учётными данными.&lt;/li>
&lt;li>Bitbucket выпустила два новых ключа хоста SSH, которые заменят текущие ключи хоста 20 июня 2023 года.&lt;/li>
&lt;/ul>
&lt;h2 id="определите-не-сменили-ли-вы-уже-ключи">&lt;span class="section-num">2&lt;/span> Определите, не сменили ли вы уже ключи&lt;/h2>
&lt;ul>
&lt;li>Чтобы проверить, какой ключ хоста использует ваш SSH-клиент, можно запустить следующую команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ssh git@bitbucket.org host_key_info
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You are using host key with fingerprint:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-ed25519 SHA256:ybgmFkzwOSotHTHLJgHO0QN8L0xErw6vd0VhFA9m3SM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">See https://bitbucket.org/blog/ssh-host-key-changes &lt;span class="k">for&lt;/span> more details.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если Вы видите новый отпечаток ключа хоста типа &lt;code>ECDSA&lt;/code> или &lt;code>Ed25519&lt;/code>, то SSH-клиент переключился на новые ключи.&lt;/li>
&lt;li>Ничего боле делать не нужно.&lt;/li>
&lt;/ul>
&lt;h2 id="установите-новые-ключи">&lt;span class="section-num">3&lt;/span> Установите новые ключи&lt;/h2>
&lt;ul>
&lt;li>Удалите старые и установите новые ключи:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -R bitbucket.org &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> curl https://bitbucket.org/site/ssh &amp;gt;&amp;gt; ~/.ssh/known_hosts
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Спецификации компьютеров</title><link>https://yamadharma.github.io/ru/post/2023/06/11/computer-specifications/</link><pubDate>Sun, 11 Jun 2023 21:50:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/11/computer-specifications/</guid><description>&lt;p>Мне время от времени приходится делать спецификации компьютерного оборудования для закупок. Правда, зачастую покупают несколько другое оборудование.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#2023">&lt;span class="section-num">1&lt;/span> 2023&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#спецификация-сервера-для-ифит">&lt;span class="section-num">1.1&lt;/span> Спецификация сервера для ИФиТ&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#требования-к-серверу">&lt;span class="section-num">1.1.1&lt;/span> Требования к серверу&lt;/a>&lt;/li>
&lt;li>&lt;a href="#анализ-требований">&lt;span class="section-num">1.1.2&lt;/span> Анализ требований&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примерная-спецификация-оборудования">&lt;span class="section-num">1.1.3&lt;/span> Примерная спецификация оборудования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="2023">&lt;span class="section-num">1&lt;/span> 2023&lt;/h2>
&lt;h3 id="спецификация-сервера-для-ифит">&lt;span class="section-num">1.1&lt;/span> Спецификация сервера для ИФиТ&lt;/h3>
&lt;h4 id="требования-к-серверу">&lt;span class="section-num">1.1.1&lt;/span> Требования к серверу&lt;/h4>
&lt;ol>
&lt;li>Перечень программного обеспечения, установленного на сервере (наименование, версия, тип лицензии, количественные характеристики).
&lt;ul>
&lt;li>Программный комплекс параллельных вычислений (написанный силами сотрудников).&lt;/li>
&lt;li>FlexNet&lt;/li>
&lt;li>LabView&lt;/li>
&lt;li>Matlab&lt;/li>
&lt;li>Maple&lt;/li>
&lt;li>Digital Visual Fortran&lt;/li>
&lt;li>OriginLab&lt;/li>
&lt;li>База данных с поддержкой SQL&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Описание клиент-серверного взаимодействия (сервер – дисплейный класс) для каждой единицы программного обеспечения из п.1.
&lt;ul>
&lt;li>Организация и связывание компьютеров для обеспечения параллельных вычислений.&lt;/li>
&lt;li>Сервер FlexNet используется для обеспечения сетевых лицензий пакетов научной графики и численного анализа данных OriginLab.&lt;/li>
&lt;li>Набор функций, позволяющий связать и управлять объектами как виртуальных, так и физических инструментов и средой LabView.&lt;/li>
&lt;li>Пакет прикладных программ для решения задач технических вычислений. Используется в качестве сервера для вычислений.&lt;/li>
&lt;li>Система компьютерной математики. Обеспечение параллельной работы с системой подготовки научной документации, численных и аналитических вычислений посредством Web-технологий (браузер) с нескольких устройств.&lt;/li>
&lt;li>Набор библиотек для разработки на языке Фортран.&lt;/li>
&lt;li>Обеспечение хранения и организации экспериментальных данных, научной библиотеки, используемой студентами и сотрудниками в своей учебной и научной работе.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Общий объем накопленных данных с указанием срока накопления этих данных.
&lt;ul>
&lt;li>Приблизительно около 25 ТБ в течение 15 лет.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="анализ-требований">&lt;span class="section-num">1.1.2&lt;/span> Анализ требований&lt;/h4>
&lt;ul>
&lt;li>От сервера требуется выполнение двух задач:
&lt;ul>
&lt;li>файловый сервер (хранение рабочих данных, обеспечение доступа к программам);&lt;/li>
&lt;li>высокопроизводительный компьютер для вычислений.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Соединение этих двух функций в одном компьютере не представляется целесообразным.&lt;/li>
&lt;li>Предлагается ориентироваться на функцию файлового сервера.&lt;/li>
&lt;li>Для высокопроизводительных вычислений рекомендовать использовать ЦОД Университета.&lt;/li>
&lt;li>При этом рекомендуется дать возможность прототипирования и отладки программного обеспечения.&lt;/li>
&lt;/ul>
&lt;h4 id="примерная-спецификация-оборудования">&lt;span class="section-num">1.1.3&lt;/span> Примерная спецификация оборудования&lt;/h4>
&lt;ul>
&lt;li>Спецификация сервера:
&lt;ul>
&lt;li>процессор: не менее 4-х процессоров Intel Xeon E7-8800 v3 или Intel Xeon E7-4800 v3;&lt;/li>
&lt;li>память: 128GB DDR4-1866 ECC LRDIMM;&lt;/li>
&lt;li>сетевой адаптер: 1 Гбит/с;&lt;/li>
&lt;li>контроллер RAID 2GB кэш (RAID 0/1/1+0/5/5+0/6/6+0) на 6 дисков;&lt;/li>
&lt;li>дисковая подсистема 6 Hot-plug SFF 3.5&amp;quot; SAS/SATA HDD/SSD не менее 18TB каждый;&lt;/li>
&lt;li>оптический привод DVD-RW standard;&lt;/li>
&lt;li>блок питания 2 штуки Hot Plug Power Supply, отказоустойчивый двойной блок питания, схема резервирования 1+1;&lt;/li>
&lt;li>форм-фактор 2U Rackmount.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ИБП: APC Smart-UPS XL 3000VA RM 3U 230V.&lt;/li>
&lt;li>Пример:
&lt;ul>
&lt;li>Сервер STSS Flagman QX427.4-006LH&lt;/li>
&lt;li>&lt;a href="http://www.stss.ru/products/servers/Q-series/QX427.4-006LH.html" target="_blank" rel="noopener">http://www.stss.ru/products/servers/Q-series/QX427.4-006LH.html&lt;/a>&lt;/li>
&lt;li>Примерная цена 5 000 000 ₽.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Windows. Автоустановка. Простой файл ответов</title><link>https://yamadharma.github.io/ru/post/2023/06/08/windows-unattended-simple-autounattend/</link><pubDate>Thu, 08 Jun 2023 16:47:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/08/windows-unattended-simple-autounattend/</guid><description>&lt;p>Простой файл ответов для автоустановки Windows.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#файл-ответов">&lt;span class="section-num">1&lt;/span> Файл ответов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">2&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="файл-ответов">&lt;span class="section-num">1&lt;/span> Файл ответов&lt;/h2>
&lt;ul>
&lt;li>За счет файла значительно сокращается количество экранов программы установки, из которых остаются только:
&lt;ul>
&lt;li>выбор издания&lt;/li>
&lt;li>управление дисками&lt;/li>
&lt;li>подключение к Wi-Fi&lt;/li>
&lt;li>пароль учетной записи (можно задать)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Файл предназначен для 64-разрядной Windows. Сохраните его с именем &lt;code>autounattend.xml&lt;/code> в корень установочной флэшки.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;lt;!-- https://www.outsidethebox.ms/19924/ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;unattend&lt;/span> &lt;span class="na">xmlns=&lt;/span>&lt;span class="s">&amp;#34;urn:schemas-microsoft-com:unattend&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;settings&lt;/span> &lt;span class="na">pass=&lt;/span>&lt;span class="s">&amp;#34;windowsPE&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;component&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;Microsoft-Windows-International-Core-WinPE&amp;#34;&lt;/span> &lt;span class="na">processorArchitecture=&lt;/span>&lt;span class="s">&amp;#34;amd64&amp;#34;&lt;/span> &lt;span class="na">publicKeyToken=&lt;/span>&lt;span class="s">&amp;#34;31bf3856ad364e35&amp;#34;&lt;/span> &lt;span class="na">language=&lt;/span>&lt;span class="s">&amp;#34;neutral&amp;#34;&lt;/span> &lt;span class="na">versionScope=&lt;/span>&lt;span class="s">&amp;#34;nonSxS&amp;#34;&lt;/span> &lt;span class="na">xmlns:wcm=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.microsoft.com/WMIConfig/2002/State&amp;#34;&lt;/span> &lt;span class="na">xmlns:xsi=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;InputLocale&amp;gt;&lt;/span>en-US; ru-RU&lt;span class="nt">&amp;lt;/InputLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;SystemLocale&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/SystemLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UILanguage&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/UILanguage&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UserLocale&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/UserLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/component&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;component&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;Microsoft-Windows-Setup&amp;#34;&lt;/span> &lt;span class="na">processorArchitecture=&lt;/span>&lt;span class="s">&amp;#34;amd64&amp;#34;&lt;/span> &lt;span class="na">publicKeyToken=&lt;/span>&lt;span class="s">&amp;#34;31bf3856ad364e35&amp;#34;&lt;/span> &lt;span class="na">language=&lt;/span>&lt;span class="s">&amp;#34;neutral&amp;#34;&lt;/span> &lt;span class="na">versionScope=&lt;/span>&lt;span class="s">&amp;#34;nonSxS&amp;#34;&lt;/span> &lt;span class="na">xmlns:wcm=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.microsoft.com/WMIConfig/2002/State&amp;#34;&lt;/span> &lt;span class="na">xmlns:xsi=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UserData&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- KMS keys https://docs.microsoft.com/windows-server/get-started/kmsclientkeys --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;ProductKey&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Key&amp;gt;&lt;/span>NW6C2-QMPVW-D7KKK-3GKT6-VCFB2&lt;span class="nt">&amp;lt;/Key&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/ProductKey&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;AcceptEula&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/AcceptEula&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/UserData&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/component&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/settings&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;settings&lt;/span> &lt;span class="na">pass=&lt;/span>&lt;span class="s">&amp;#34;oobeSystem&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;component&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;Microsoft-Windows-International-Core&amp;#34;&lt;/span> &lt;span class="na">processorArchitecture=&lt;/span>&lt;span class="s">&amp;#34;amd64&amp;#34;&lt;/span> &lt;span class="na">publicKeyToken=&lt;/span>&lt;span class="s">&amp;#34;31bf3856ad364e35&amp;#34;&lt;/span> &lt;span class="na">language=&lt;/span>&lt;span class="s">&amp;#34;neutral&amp;#34;&lt;/span> &lt;span class="na">versionScope=&lt;/span>&lt;span class="s">&amp;#34;nonSxS&amp;#34;&lt;/span> &lt;span class="na">xmlns:wcm=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.microsoft.com/WMIConfig/2002/State&amp;#34;&lt;/span> &lt;span class="na">xmlns:xsi=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;InputLocale&amp;gt;&lt;/span>en-US; ru-RU&lt;span class="nt">&amp;lt;/InputLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;SystemLocale&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/SystemLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UILanguage&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/UILanguage&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UserLocale&amp;gt;&lt;/span>ru-RU&lt;span class="nt">&amp;lt;/UserLocale&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/component&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;component&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;Microsoft-Windows-Shell-Setup&amp;#34;&lt;/span> &lt;span class="na">processorArchitecture=&lt;/span>&lt;span class="s">&amp;#34;amd64&amp;#34;&lt;/span> &lt;span class="na">publicKeyToken=&lt;/span>&lt;span class="s">&amp;#34;31bf3856ad364e35&amp;#34;&lt;/span> &lt;span class="na">language=&lt;/span>&lt;span class="s">&amp;#34;neutral&amp;#34;&lt;/span> &lt;span class="na">versionScope=&lt;/span>&lt;span class="s">&amp;#34;nonSxS&amp;#34;&lt;/span> &lt;span class="na">xmlns:wcm=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.microsoft.com/WMIConfig/2002/State&amp;#34;&lt;/span> &lt;span class="na">xmlns:xsi=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;OOBE&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;HideOnlineAccountScreens&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/HideOnlineAccountScreens&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;ProtectYourPC&amp;gt;&lt;/span>3&lt;span class="nt">&amp;lt;/ProtectYourPC&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/OOBE&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;UserAccounts&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;LocalAccounts&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;LocalAccount&lt;/span> &lt;span class="na">wcm:action=&lt;/span>&lt;span class="s">&amp;#34;add&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Group&amp;gt;&lt;/span>Administrators&lt;span class="nt">&amp;lt;/Group&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Name&amp;gt;&lt;/span>Admin&lt;span class="nt">&amp;lt;/Name&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!--&amp;lt;Password&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;lt;Value&amp;gt;goofy reward replica danger&amp;lt;/Value&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;lt;PlainText&amp;gt;true&amp;lt;/PlainText&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;lt;/Password&amp;gt; --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/LocalAccount&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/LocalAccounts&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/UserAccounts&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;AutoLogon&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Password&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Value&amp;gt;&lt;/span>123456&lt;span class="nt">&amp;lt;/Value&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;PlainText&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/PlainText&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/Password&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Username&amp;gt;&lt;/span>Admin&lt;span class="nt">&amp;lt;/Username&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;LogonCount&amp;gt;&lt;/span>1&lt;span class="nt">&amp;lt;/LogonCount&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Enabled&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/Enabled&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/AutoLogon&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/component&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/settings&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/unattend&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Файл рассчитан на русскую версию ОС.&lt;/li>
&lt;li>Издание выбирается на основе ключа продукта в файле ответов.&lt;/li>
&lt;li>Используется ключ KMS для установки (но не обязательно активации).&lt;/li>
&lt;li>Создаётся локальная учетная запись:
&lt;ul>
&lt;li>экран создания учетной записи Microsoft (MSA) пропускается.&lt;/li>
&lt;li>Локальной учетной записи не задаются три контрольных вопроса.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пароль закомментирован, поэтому программа установки предложит сменить его – задайте любой или продолжайте с пустым, нажав стрелку рядом с подтверждением пароля.&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">2&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Заметки по файлу автоустановки: &lt;a href="https://github.com/memstechtips/UnattendedWinstall" target="_blank" rel="noopener">https://github.com/memstechtips/UnattendedWinstall&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Windows. Ключи KMS</title><link>https://yamadharma.github.io/ru/post/2023/06/08/windows-kms-keys/</link><pubDate>Thu, 08 Jun 2023 15:36:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/08/windows-kms-keys/</guid><description>&lt;p>Активация клиента службы управления ключами (KMS) и ключи продуктов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#установка-ключа-продукта">&lt;span class="section-num">1&lt;/span> Установка ключа продукта&lt;/a>&lt;/li>
&lt;li>&lt;a href="#универсальные-ключи-многократной-установки--gvlk">&lt;span class="section-num">2&lt;/span> Универсальные ключи многократной установки (GVLK)&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#windows-11-и-windows-10--версии-semi-annual-channel">&lt;span class="section-num">2.1&lt;/span> Windows 11 и Windows 10 (версии Semi-Annual Channel)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#microsoft-office-2021-2019-2016">&lt;span class="section-num">2.2&lt;/span> Microsoft Office 2021/2019/2016&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="установка-ключа-продукта">&lt;span class="section-num">1&lt;/span> Установка ключа продукта&lt;/h2>
&lt;ul>
&lt;li>Если вы переключаете компьютер из режима использования узла KMS, ключа MAK или розничной версии Windows в режим клиента KMS, установите соответствующий ключ продукта (GVLK):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slmgr /ipk &amp;lt;product key&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Указать адрес KMS сервера (если при установке KMS сервер не опубликован в DNS):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slmgr /skms kms-server.winitpro.ru:1688
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активировать ОС:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slmgr /ato
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активировать Office:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">slmgr /ato &amp;lt;ключ GLVK&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="универсальные-ключи-многократной-установки--gvlk">&lt;span class="section-num">2&lt;/span> Универсальные ключи многократной установки (GVLK)&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Страница: &lt;a href="https://learn.microsoft.com/ru-ru/windows-server/get-started/kms-client-activation-keys" target="_blank" rel="noopener">https://learn.microsoft.com/ru-ru/windows-server/get-started/kms-client-activation-keys&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>LTSC означает Long-Term Servicing Channel.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>LTSB означает Long-Term Servicing Branch.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="windows-11-и-windows-10--версии-semi-annual-channel">&lt;span class="section-num">2.1&lt;/span> Windows 11 и Windows 10 (версии Semi-Annual Channel)&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Версия операционной системы&lt;/th>
&lt;th>Ключ продукта клиента KMS&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Windows Pro&lt;/td>
&lt;td>W269N-WFGWX-YVC9B-4J6C9-T83GX&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Pro N&lt;/td>
&lt;td>MH37W-N47XK-V7XM9-C7227-GCQG9&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Pro для рабочих станций&lt;/td>
&lt;td>NRG8B-VKK3Q-CXVCJ-9G2XF-6Q84J&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Pro для рабочих станций N&lt;/td>
&lt;td>9FNHH-K3HBT-3W4TD-6383H-6XYWF&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Pro для образовательных учреждений&lt;/td>
&lt;td>6TP4R-GNPTD-KYYHQ-7B7DP-J447Y&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Pro для образовательных учреждений N&lt;/td>
&lt;td>YVWGF-BXNMC-HTQYQ-CPQ99-66QFC&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows для образовательных учреждений&lt;/td>
&lt;td>NW6C2-QMPVW-D7KKK-3GKT6-VCFB2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows для образовательных учреждений N&lt;/td>
&lt;td>2WH4N-8QGBV-H22JP-CT43Q-MDWWJ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Корпоративная&lt;/td>
&lt;td>NPPR9-FWDCX-D2C8J-H872K-2YT43&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Корпоративная N&lt;/td>
&lt;td>DPH2V-TTNVB-4X9Q3-TJR4H-KHJW4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Корпоративная G&lt;/td>
&lt;td>YYVX9-NTFWV-6MDM3-9PT4T-4M68B&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Windows Корпоративная G N&lt;/td>
&lt;td>44RPN-FTY23-9VTTB-MP9BX-T84FV&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="microsoft-office-2021-2019-2016">&lt;span class="section-num">2.2&lt;/span> Microsoft Office 2021/2019/2016&lt;/h3>
&lt;ul>
&lt;li>Список официальных публичных GVLK ключей: &lt;a href="https://technet.microsoft.com/en-us/library/dn385360%28v=office.16%29.aspx" target="_blank" rel="noopener">https://technet.microsoft.com/en-us/library/dn385360(v=office.16).aspx&lt;/a>&lt;/li>
&lt;li>Все корпоративные версии Office 2021/2019/2016 устанавливаются с публичными Generic Volume License Key (GVLK) ключами (эти ключи являются открытыми и доступны абсолютно всем на страницах портала Microsoft TechNet).&lt;/li>
&lt;li>Они автоматически активируются при наличии в сети KMS сервера.&lt;/li>
&lt;li>Как правило, вводить GVLK ключ в Office не требуется.&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Продукт&lt;/th>
&lt;th>GVLK ключ для KMS активации&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Office LTSC Professional Plus 2021&lt;/td>
&lt;td>FXYTK-NJJ8C-GB6DW-3DYQT-6F7TH&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Office LTSC Standard 2021&lt;/td>
&lt;td>KDX7X-BNVR8-TXXGX-4Q7Y8-78VT3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Professional 2021&lt;/td>
&lt;td>FTNWT-C6WBT-8HMGF-K9PRX-QV9H8&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Standard 2021&lt;/td>
&lt;td>J2JDC-NJCYY-9RGQ4-YXWMH-T3D4T&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio LTSC Professional 2021&lt;/td>
&lt;td>KNH8D-FGHT4-T8RK3-CTDYJ-K2HT4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio LTSC Standard 2021&lt;/td>
&lt;td>MJVNY-BYWPY-CWV6J-2RKRT-4M8QG&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Access LTSC 2021&lt;/td>
&lt;td>WM8YG-YNGDD-4JHDC-PG3F4-FC4T4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Excel LTSC 2021&lt;/td>
&lt;td>NWG3X-87C9K-TC7YY-BC2G7-G6RVC&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Outlook LTSC 2021&lt;/td>
&lt;td>C9FM6-3N72F-HFJXB-TM3V9-T86R9&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PowerPoint LTSC 2021&lt;/td>
&lt;td>TY7XF-NFRBR-KJ44C-G83KF-GX27K&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Publisher LTSC 2021&lt;/td>
&lt;td>2MW9D-N4BXM-9VBPG-Q7W6M-KFBGQ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Skype for Business LTSC 2021&lt;/td>
&lt;td>HWCXN-K3WBT-WJBKY-R8BD9-XK29P&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Word LTSC 2021&lt;/td>
&lt;td>TN8H9-M34D3-Y64V9-TR72V-X79KV&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Office Professional Plus 2019&lt;/td>
&lt;td>NMMKJ-6RK4F-KMJVX-8D9MJ-6MWKP&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Office Standard 2019&lt;/td>
&lt;td>6NWWJ-YQWMR-QKGCB-6TMB3-9D9HK&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Professional 2019&lt;/td>
&lt;td>B4NPR-3FKK7-T2MBV-FRQ4W-PKD2B&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Standard 2019&lt;/td>
&lt;td>C4F7P-NCP8C-6CQPT-MQHV9-JXD2M&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio Professional 2019&lt;/td>
&lt;td>9BGNQ-K37YR-RQHF2-38RQ3-7VCBB&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio Standard 2019&lt;/td>
&lt;td>7TQNQ-K3YQQ-3PFH7-CCPPM-X4VQ2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Access 2019&lt;/td>
&lt;td>9N9PT-27V4Y-VJ2PD-YXFMF-YTFQT&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Excel 2019&lt;/td>
&lt;td>TMJWT-YYNMB-3BKTF-644FC-RVXBD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Outlook 2019&lt;/td>
&lt;td>7HD7K-N4PVK-BHBCQ-YWQRW-XW4VK&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PowerPoint 2019&lt;/td>
&lt;td>RRNCX-C64HY-W2MM7-MCH9G-TJHMQ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Publisher 2019&lt;/td>
&lt;td>G2KWX-3NW6P-PY93R-JXK2T-C9Y9V&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Skype for Business 2019&lt;/td>
&lt;td>NCJ33-JHBBY-HTK98-MYCV8-HMKHJ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Word 2019&lt;/td>
&lt;td>PBX3G-NWMT6-Q7XBW-PYJGG-WXD33&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Office Professional Plus 2016&lt;/td>
&lt;td>XQNVK-8JYDB-WJ9W3-YJ8YR-WFG99&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Office Standard 2016&lt;/td>
&lt;td>JNRGM-WHDWX-FJJG3-K47QV-DRTFM&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Professional 2016&lt;/td>
&lt;td>YG9NW-3K39V-2T3HJ-93F3Q-G83KT&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project Standard 2016&lt;/td>
&lt;td>GNFHQ-F6YQM-KQDGJ-327XX-KQBVC&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio Professional 2016&lt;/td>
&lt;td>PD3PC-RHNGV-FXJ29-8JK7D-RJRJK&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Visio Standard 2016&lt;/td>
&lt;td>7WHWN-4T7MP-G96JF-G33KR-W8GF4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Access 2016&lt;/td>
&lt;td>GNH9Y-D2J4T-FJHGG-QRVH7-QPFDW&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Excel 2016&lt;/td>
&lt;td>9C2PK-NWTVB-JMPW8-BFT28-7FTBF&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OneNote 2016&lt;/td>
&lt;td>DR92N-9HTF2-97XKM-XW2WJ-XW3J6&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Outlook 2016&lt;/td>
&lt;td>R69KK-NTPKF-7M3Q4-QYBHW-6MT9B&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PowerPoint 2016&lt;/td>
&lt;td>J7MQP-HNJ4Y-WJ7YM-PFYGF-BY6C6&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Publisher 2016&lt;/td>
&lt;td>F47MM-N3XJP-TQXJ9-BP99D-8K837&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Skype for Business 2016&lt;/td>
&lt;td>869NQ-FJ69K-466HW-QYCP2-DDBV6&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Word 2016&lt;/td>
&lt;td>WXY84-JN2Q9-RBCCQ-3Q3J3-3PFJ6&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Администрирование Linux</title><link>https://yamadharma.github.io/ru/post/2023/06/07/linux-administration/</link><pubDate>Wed, 07 Jun 2023 18:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/06/07/linux-administration/</guid><description>&lt;p>Администрирование Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#дистрибутивы-linux">&lt;span class="section-num">1&lt;/span> Дистрибутивы Linux&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#режим-киоска">&lt;span class="section-num">1.2&lt;/span> Режим киоска&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дистрибутивы-общего-назначения">&lt;span class="section-num">1.3&lt;/span> Дистрибутивы общего назначения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#виртуальные-машины">&lt;span class="section-num">1.4&lt;/span> Виртуальные машины&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файловые-системы">&lt;span class="section-num">2&lt;/span> Файловые системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="дистрибутивы-linux">&lt;span class="section-num">1&lt;/span> Дистрибутивы Linux&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/h3>
&lt;h3 id="режим-киоска">&lt;span class="section-num">1.2&lt;/span> Режим киоска&lt;/h3>
&lt;ul>
&lt;li>Данные дистрибутивы созданы для организации режима киоска (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/02/15/kiosk-mode/">Режим киоска&lt;/a>).&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/02/15/porteus-kiosk/">Porteus Kiosk&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/02/15/linutop-kiosk/">Linutop Kiosk&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="дистрибутивы-общего-назначения">&lt;span class="section-num">1.3&lt;/span> Дистрибутивы общего назначения&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/17/linux-gentoo-distribution/">Linux. Дистрибутив Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="виртуальные-машины">&lt;span class="section-num">1.4&lt;/span> Виртуальные машины&lt;/h3>
&lt;h2 id="файловые-системы">&lt;span class="section-num">2&lt;/span> Файловые системы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-file-system/">Файловая система btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/data-deduplication/">Дедупликация данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/30/linux-wsl-install/">Установка Linux в WSL&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>DNS. PowerDNS Recursor</title><link>https://yamadharma.github.io/ru/post/2023/05/23/dns-powerdns-recursor/</link><pubDate>Tue, 23 May 2023 10:08:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/05/23/dns-powerdns-recursor/</guid><description>&lt;p>PowerDNS Recursor.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-powerdns-recursor">&lt;span class="section-num">2&lt;/span> Установка PowerDNS Recursor&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#rocky-linux">&lt;span class="section-num">2.1&lt;/span> Rocky Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка-powerdns-recursor">&lt;span class="section-num">3&lt;/span> Настройка PowerDNS Recursor&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Документация: &lt;a href="https://doc.powerdns.com/recursor/" target="_blank" rel="noopener">https://doc.powerdns.com/recursor/&lt;/a>&lt;/li>
&lt;li>Сайт: &lt;a href="https://www.powerdns.com/powerdns-recursor" target="_blank" rel="noopener">https://www.powerdns.com/powerdns-recursor&lt;/a>&lt;/li>
&lt;li>Только кэширующий сервер DNS.&lt;/li>
&lt;/ul>
&lt;h2 id="установка-powerdns-recursor">&lt;span class="section-num">2&lt;/span> Установка PowerDNS Recursor&lt;/h2>
&lt;h3 id="rocky-linux">&lt;span class="section-num">2.1&lt;/span> Rocky Linux&lt;/h3>
&lt;ul>
&lt;li>Установите репозиторий &lt;em>Epel&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf config-manager --set-enabled crb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf -y install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите PowerDNS Recursor:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install powerdns-recursor
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-powerdns-recursor">&lt;span class="section-num">3&lt;/span> Настройка PowerDNS Recursor&lt;/h2>
&lt;ul>
&lt;li>Файл конфигурации: &lt;code>recursor.conf&lt;/code>.&lt;/li>
&lt;li>Находится в папке,определённой во время компиляции:
&lt;ul>
&lt;li>&lt;code>/etc/powerdns&lt;/code>,&lt;/li>
&lt;li>&lt;code>/etc/pdns&lt;/code>,&lt;/li>
&lt;li>&lt;code>/etc/pdns-recursor&lt;/code>,&lt;/li>
&lt;li>&lt;code>/usr/local/etc&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Можно найти эту папку, выполнив команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pdns_recursor --config&lt;span class="o">=&lt;/span>default &lt;span class="p">|&lt;/span> grep config-dir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>По умолчанию Recursor прослушивает локальный петлевой интерфейс, нужно задать нужные адреса.&lt;/li>
&lt;li>В параметре &lt;code>allow-from&lt;/code> перечислены подсети, которые могут взаимодействовать с Recursor.&lt;/li>
&lt;li>Например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">local-address=192.0.2.25, 2001:DB8::1:25
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allow-from=192.0.2.0/24, 2001:DB8::1:/64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы принимать входящие запросы клиентов, разрешите службу DNS на брандмауэре:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --add-service&lt;span class="o">=&lt;/span>dns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --add-service&lt;span class="o">=&lt;/span>dns-over-tls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перезапустите брандмауэр:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите сервис:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now pdns-recursor.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Переход на домен pfur.ru</title><link>https://yamadharma.github.io/ru/post/2023/04/20/switching-domain-pfur/</link><pubDate>Thu, 20 Apr 2023 18:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/04/20/switching-domain-pfur/</guid><description>&lt;p>Перевод инфраструктуры доменов Windows на домен &lt;code>pfur.ru&lt;/code>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#данные-пользователей">&lt;span class="section-num">1&lt;/span> Данные пользователей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="данные-пользователей">&lt;span class="section-num">1&lt;/span> Данные пользователей&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/26/transferring-windows-user-profile/">Перенос настроек профиля пользователя Windows&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Сопоставление команд Cisco и Huawei</title><link>https://yamadharma.github.io/ru/post/2023/04/04/cisco-huawei-commands/</link><pubDate>Tue, 04 Apr 2023 15:26:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/04/04/cisco-huawei-commands/</guid><description>&lt;p>Команды Cisco и Huawei.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">&lt;/nav>
&lt;/details>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Exec mode
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Cisco exec mode&lt;/th>
&lt;th>Huawei user view&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>clear&lt;/td>
&lt;td>reset&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>clear access-list counters&lt;/td>
&lt;td>reset acl counter all&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>clear counters&lt;/td>
&lt;td>reset counters interface&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>clear interface&lt;/td>
&lt;td>reset counters interface&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>configure terminal&lt;/td>
&lt;td>system-view&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy running-config startup-config&lt;/td>
&lt;td>save&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>debug / no debug&lt;/td>
&lt;td>debugging / undo debugging&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>disable&lt;/td>
&lt;td>super 0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>enable&lt;/td>
&lt;td>super&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>erase&lt;/td>
&lt;td>delete&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>exit&lt;/td>
&lt;td>quit&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>more nvram:startup-config&lt;/td>
&lt;td>display saved-configuration&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>no&lt;/td>
&lt;td>undo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>reload&lt;/td>
&lt;td>reboot&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show&lt;/td>
&lt;td>display&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show clock&lt;/td>
&lt;td>display clock&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show flash&lt;/td>
&lt;td>dir flash:&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show history-command&lt;/td>
&lt;td>display history-command&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show interfaces&lt;/td>
&lt;td>display interface&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show ip bgp&lt;/td>
&lt;td>display bgp routing-table&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show ip interface&lt;/td>
&lt;td>display ip interface&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show ip route&lt;/td>
&lt;td>display ip routing-table&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show logging&lt;/td>
&lt;td>display logbuffer&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show running-config&lt;/td>
&lt;td>display current-configuration&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show snmp&lt;/td>
&lt;td>display snmp-agent statistics&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show startup-config&lt;/td>
&lt;td>display saved-configuration&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show tech-support&lt;/td>
&lt;td>display diagnostic-information&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show users&lt;/td>
&lt;td>display users&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show version&lt;/td>
&lt;td>display version&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>terminal length 0&lt;/td>
&lt;td>screen-length 0 temporary&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>traceroute&lt;/td>
&lt;td>tracert&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>write erase&lt;/td>
&lt;td>reset saved-configuration&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>write memory&lt;/td>
&lt;td>save&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>write terminal&lt;/td>
&lt;td>display current-configuration&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 2:&lt;/span>
Configuration mode
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Cisco configuration mode&lt;/th>
&lt;th>Huawei system view&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>end&lt;/td>
&lt;td>return&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>snmp-server&lt;/td>
&lt;td>snmp-agent&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hostname&lt;/td>
&lt;td>sysname&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>router bgp&lt;/td>
&lt;td>bgp&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>router ospf&lt;/td>
&lt;td>ospf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>router rip&lt;/td>
&lt;td>rip&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>shutdown / no shutdown&lt;/td>
&lt;td>shutdown / undo shutdown&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>XDG. Приложения MIME</title><link>https://yamadharma.github.io/ru/post/2023/04/02/xdg-mime-applications/</link><pubDate>Sun, 02 Apr 2023 13:39:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/04/02/xdg-mime-applications/</guid><description>&lt;p>Настройка вызова приложений с помощью спецификации MIME.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#файлы-конфигурации">&lt;span class="section-num">1&lt;/span> Файлы конфигурации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#расположение-файлов-конфигурации">&lt;span class="section-num">1.2&lt;/span> Расположение файлов конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#формат-файлов-конфигурации">&lt;span class="section-num">1.3&lt;/span> Формат файлов конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ярлык-приложения">&lt;span class="section-num">1.4&lt;/span> Ярлык приложения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#утилиты-работы-со-списком-приложений">&lt;span class="section-num">2&lt;/span> Утилиты работы со списком приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#xdg-mime">&lt;span class="section-num">2.1&lt;/span> &lt;code>xdg-mime&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2.1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#определение-mime-типа-файла">&lt;span class="section-num">2.1.2&lt;/span> Определение MIME-типа файла&lt;/a>&lt;/li>
&lt;li>&lt;a href="#определение-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.3&lt;/span> Определение приложения по умолчанию для MIME-типа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#изменение-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.4&lt;/span> Изменение приложения по умолчанию для MIME-типа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отладка-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.5&lt;/span> Отладка приложения по умолчанию для MIME-типа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обработчики-url-схем">&lt;span class="section-num">2.1.6&lt;/span> Обработчики URL схем&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#xdg-settings">&lt;span class="section-num">2.2&lt;/span> &lt;code>xdg-settings&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="файлы-конфигурации">&lt;span class="section-num">1&lt;/span> Файлы конфигурации&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Приложения по умолчанию для каждого типа MIME хранятся в файлах &lt;code>mimeapps.list&lt;/code>, которые могут храниться в нескольких местах.&lt;/li>
&lt;/ul>
&lt;h3 id="расположение-файлов-конфигурации">&lt;span class="section-num">1.2&lt;/span> Расположение файлов конфигурации&lt;/h3>
&lt;ul>
&lt;li>Файлы конфигурации проверяются в следующем порядке.&lt;/li>
&lt;li>Более ранние ассоциации имеют приоритет над более поздними.&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Путь&lt;/th>
&lt;th>Применение&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>~/.config/mimeapps.list&lt;/code>&lt;/td>
&lt;td>Пользовательские переопределения&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/etc/xdg/mimeapps.list&lt;/code>&lt;/td>
&lt;td>Общесистемные переопределения&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>~/.local/share/applications/mimeapps.list&lt;/code>&lt;/td>
&lt;td>Пользовательские переопределения (устаревшее)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/usr/local/share/applications/mimeapps.list&lt;/code>&lt;/td>
&lt;td>Переопределения, предоставляемые дистрибутивом по умолчанию&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/usr/share/applications/mimeapps.list&lt;/code>&lt;/td>
&lt;td>Переопределения, предоставляемые дистрибутивом по умолчанию&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>Можно определить приложения по умолчанию, специфичные для конкретной среды рабочего стола, с помощью файла вида &lt;code>desktop-mimeapps.list&lt;/code>, где &lt;code>desktop&lt;/code> это имя среды рабочего стола (из переменной окружения &lt;code>XDG_CURRENT_DESKTOP&lt;/code>).
&lt;ul>
&lt;li>Например, &lt;code>/etc/xdg/xfce-mimeapps.list&lt;/code> задают общесистемные переопределения приложений по умолчанию для Xfce.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Некоторые приложения всё ещё используют файл &lt;code>~/.local/share/applications/mimeapps.list&lt;/code>.
&lt;ul>
&lt;li>Для сохранения совместимости можно создать символическую ссылку на &lt;code>~/.config/mimeapps.list&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -s ~/.config/mimeapps.list ~/.local/share/applications/mimeapps.list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="формат-файлов-конфигурации">&lt;span class="section-num">1.3&lt;/span> Формат файлов конфигурации&lt;/h3>
&lt;ul>
&lt;li>Файл &lt;code>mimeapps.list&lt;/code> имеет следующий формат:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Added Associations]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">image/jpeg=bar.desktop;baz.desktop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">video/H264=bar.desktop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Removed Associations]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">video/H264=baz.desktop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Default Applications]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">image/jpeg=foo.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Разделы файла:
&lt;ul>
&lt;li>&lt;em>Added Associations&lt;/em> (Добавленные ассоциации): приложения поддерживают открытие этого типа MIME.
&lt;ul>
&lt;li>Например, &lt;code>bar.desktop&lt;/code> и &lt;code>baz.desktop&lt;/code> могут открывать изображения JPEG.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>Removed Associations&lt;/em> (Удаленные ассоциации): приложения не поддерживают этот тип MIME.
&lt;ul>
&lt;li>Например, &lt;code>baz.desktop&lt;/code> не может открыть видео H.264.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>Default Applications&lt;/em> (Приложения по умолчанию): приложения должны выбираться по умолчанию для открытия этого типа MIME.
&lt;ul>
&lt;li>Например, изображения JPEG должны быть открыты с помощью &lt;code>foo.desktop&lt;/code>.&lt;/li>
&lt;li>Если есть несколько приложений, они проверяются по порядку.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Каждый раздел является необязательным и может быть опущен, если он не нужен.&lt;/li>
&lt;/ul>
&lt;h3 id="ярлык-приложения">&lt;span class="section-num">1.4&lt;/span> Ярлык приложения&lt;/h3>
&lt;ul>
&lt;li>Для связывания приложений с типами MIME требуются ярлык приложения (&lt;code>desktop&lt;/code>-файл).&lt;/li>
&lt;li>Если в ярлыке приложения не указан тип MIME под его ключом &lt;code>MimeType&lt;/code>, он не будет учитываться, когда приложение необходимо для открытия этого типа.&lt;/li>
&lt;li>Следует изменить &lt;code>mimeapps.list&lt;/code>, чтобы добавить связь между файлом &lt;code>.desktop&lt;/code> и типом MIME.&lt;/li>
&lt;/ul>
&lt;h2 id="утилиты-работы-со-списком-приложений">&lt;span class="section-num">2&lt;/span> Утилиты работы со списком приложений&lt;/h2>
&lt;h3 id="xdg-mime">&lt;span class="section-num">2.1&lt;/span> &lt;code>xdg-mime&lt;/code>&lt;/h3>
&lt;h4 id="общая-информация">&lt;span class="section-num">2.1.1&lt;/span> Общая информация&lt;/h4>
&lt;ul>
&lt;li>&lt;code>xdg-mime&lt;/code> (1) &amp;mdash; скрипт для прямого запроса и изменения стандартных приложений MIME.&lt;/li>
&lt;/ul>
&lt;h4 id="определение-mime-типа-файла">&lt;span class="section-num">2.1.2&lt;/span> Определение MIME-типа файла&lt;/h4>
&lt;ul>
&lt;li>Определение MIME-типа файла:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ xdg-mime query filetype photo.jpeg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">image/jpeg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="определение-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.3&lt;/span> Определение приложения по умолчанию для MIME-типа&lt;/h4>
&lt;ul>
&lt;li>Определение приложения по умолчанию для MIME-типа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ xdg-mime query default image/jpeg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gimp.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="изменение-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.4&lt;/span> Изменение приложения по умолчанию для MIME-типа&lt;/h4>
&lt;ul>
&lt;li>Изменение приложения по умолчанию для MIME-типа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-mime default feh.desktop image/jpeg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="отладка-приложения-по-умолчанию-для-mime-типа">&lt;span class="section-num">2.1.5&lt;/span> Отладка приложения по умолчанию для MIME-типа&lt;/h4>
&lt;ul>
&lt;li>Отладка приложения по умолчанию для MIME-типа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">env &lt;span class="nv">XDG_UTILS_DEBUG_LEVEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">10&lt;/span> xdg-mime query default text/html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В результате получаем список конфигурационных файлов, которые просматриваются для определения приложения по умолчанию.&lt;/li>
&lt;/ul>
&lt;h4 id="обработчики-url-схем">&lt;span class="section-num">2.1.6&lt;/span> Обработчики URL схем&lt;/h4>
&lt;ul>
&lt;li>Для установки приложений по умолчанию для URL схем необходимо определить приложение по умолчанию для &lt;code>x-scheme-handler/*&lt;/code> MIME-типов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-mime default firefox.desktop x-scheme-handler/https x-scheme-handler/http
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="xdg-settings">&lt;span class="section-num">2.2&lt;/span> &lt;code>xdg-settings&lt;/code>&lt;/h3>
&lt;ul>
&lt;li>Установить приложение для открытия всех веб-типов MIME с помощью одного приложения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-settings &lt;span class="nb">set&lt;/span> default-web-browser firefox.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установить приложение по умолчанию для схемы URL:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-settings &lt;span class="nb">set&lt;/span> default-url-scheme-handler irc xchat.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Система мониторинга LibreNMS</title><link>https://yamadharma.github.io/ru/post/2023/03/20/librenms-monitoring-system/</link><pubDate>Mon, 20 Mar 2023 15:07:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/03/20/librenms-monitoring-system/</guid><description>&lt;p>Система мониторинга LibreNMS.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнения">&lt;span class="section-num">3&lt;/span> Дополнения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#oxidized">&lt;span class="section-num">3.1&lt;/span> Oxidized&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.librenms.org/" target="_blank" rel="noopener">https://www.librenms.org/&lt;/a>.&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.librenms.org/" target="_blank" rel="noopener">https://docs.librenms.org/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/librenms/librenms/" target="_blank" rel="noopener">https://github.com/librenms/librenms/&lt;/a>.&lt;/li>
&lt;li>LibreNMS &amp;mdash; форк Observium (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/03/02/observium-monitoring-system/">Система мониторинга Observium&lt;/a>).&lt;/li>
&lt;li>LibreNMS был создан из последней версии Observium под лицензией GPL (2013 год).&lt;/li>
&lt;li>Можно мигрировать с Observium на LibreNMS.&lt;/li>
&lt;li>Нет платной поддержки.&lt;/li>
&lt;li>Используется git для контроля версий.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/04/26/librenms-installation/">Установка LibreNMS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/04/26/librenms-observium-migration/">LibreNMS. Миграция с Observium&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="дополнения">&lt;span class="section-num">3&lt;/span> Дополнения&lt;/h2>
&lt;h3 id="oxidized">&lt;span class="section-num">3.1&lt;/span> Oxidized&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/04/26/oxidized/">Система управления конфигурациями Oxidized&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Альтернативы Microsoft Office</title><link>https://yamadharma.github.io/ru/post/2023/03/19/microsoft-office-alternatives/</link><pubDate>Sun, 19 Mar 2023 17:13:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/03/19/microsoft-office-alternatives/</guid><description>&lt;p>Чем заменить Microsoft Office в России.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#libreoffice">&lt;span class="section-num">1&lt;/span> LibreOffice&lt;/a>&lt;/li>
&lt;li>&lt;a href="#onlyoffice">&lt;span class="section-num">2&lt;/span> OnlyOffice&lt;/a>&lt;/li>
&lt;li>&lt;a href="#р7-офис">&lt;span class="section-num">3&lt;/span> Р7-Офис&lt;/a>&lt;/li>
&lt;li>&lt;a href="#alteroffice">&lt;span class="section-num">4&lt;/span> AlterOffice&lt;/a>&lt;/li>
&lt;li>&lt;a href="#циркон-офис">&lt;span class="section-num">5&lt;/span> Циркон-Офис&lt;/a>&lt;/li>
&lt;li>&lt;a href="#мойофис">&lt;span class="section-num">6&lt;/span> МойОфис&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#состав-продукта">&lt;span class="section-num">6.1&lt;/span> Состав продукта&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="libreoffice">&lt;span class="section-num">1&lt;/span> LibreOffice&lt;/h2>
&lt;ul>
&lt;li>Сайт:
&lt;ul>
&lt;li>&lt;a href="https://www.libreoffice.org/" target="_blank" rel="noopener">https://www.libreoffice.org/&lt;/a>;&lt;/li>
&lt;li>&lt;a href="https://ru.libreoffice.org/" target="_blank" rel="noopener">https://ru.libreoffice.org/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="onlyoffice">&lt;span class="section-num">2&lt;/span> OnlyOffice&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.onlyoffice.com/" target="_blank" rel="noopener">https://www.onlyoffice.com/&lt;/a>.&lt;/li>
&lt;li>Репозитории: &lt;a href="https://github.com/ONLYOFFICE/" target="_blank" rel="noopener">https://github.com/ONLYOFFICE/&lt;/a>.&lt;/li>
&lt;li>Веб-сервис: &lt;a href="https://personal.onlyoffice.com/ru" target="_blank" rel="noopener">https://personal.onlyoffice.com/ru&lt;/a>.&lt;/li>
&lt;li>Интерфейс пакета сделан очень близко к MS Office.&lt;/li>
&lt;li>Есть Community версия.&lt;/li>
&lt;li>Операционные системы: Windows, OS X, Linux, iOS, Android.&lt;/li>
&lt;li>Не поддерживает VBA.&lt;/li>
&lt;li>Версии: десктопная, серверная, облачная.&lt;/li>
&lt;/ul>
&lt;h2 id="р7-офис">&lt;span class="section-num">3&lt;/span> Р7-Офис&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.r7-office.ru/" target="_blank" rel="noopener">https://www.r7-office.ru/&lt;/a>.&lt;/li>
&lt;li>Входит в список Росреестра.&lt;/li>
&lt;li>Вариант &lt;em>OnlyOffice&lt;/em>, распространяемый по другой бизнес-модели (за деньги).&lt;/li>
&lt;li>На сайте можно запросить пробную версию.&lt;/li>
&lt;li>Операционные системы: Windows, OS X, Linux, iOS, Android.&lt;/li>
&lt;li>Не поддерживает VBA.&lt;/li>
&lt;li>Версии: десктопная, серверная, облачная.&lt;/li>
&lt;/ul>
&lt;h2 id="alteroffice">&lt;span class="section-num">4&lt;/span> AlterOffice&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://alteroffice.ru/" target="_blank" rel="noopener">https://alteroffice.ru/&lt;/a>.&lt;/li>
&lt;li>Входит в список Росреестра.&lt;/li>
&lt;li>Является клоном LibreOffice.&lt;/li>
&lt;li>Разработчик наложил свои лицензии (то есть нарушил лицензии LibreOffice).&lt;/li>
&lt;li>Не поддерживает VBA.&lt;/li>
&lt;/ul>
&lt;h2 id="циркон-офис">&lt;span class="section-num">5&lt;/span> Циркон-Офис&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.swemel.ru/products-and-services/programmnyij-kompleks-%C2%ABczirkon-ofis%C2%BB/" target="_blank" rel="noopener">https://www.swemel.ru/products-and-services/programmnyij-kompleks-%C2%ABczirkon-ofis%C2%BB/&lt;/a>.&lt;/li>
&lt;li>Входит в список Росреестра.&lt;/li>
&lt;li>Как скачать &amp;mdash; не понятно.&lt;/li>
&lt;li>Является клоном LibreOffice.&lt;/li>
&lt;li>Разработчик наложил свои лицензии (то есть нарушил лицензии LibreOffice).&lt;/li>
&lt;li>Не поддерживает VBA.&lt;/li>
&lt;/ul>
&lt;h2 id="мойофис">&lt;span class="section-num">6&lt;/span> МойОфис&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://myoffice.ru/" target="_blank" rel="noopener">https://myoffice.ru/&lt;/a>.&lt;/li>
&lt;li>Входит в список Росреестра.&lt;/li>
&lt;li>Операционные системы: Windows, OS X, Linux, iOS, Android.&lt;/li>
&lt;li>На сайте можно запросить пробную версию.&lt;/li>
&lt;li>Не поддерживает VBA.&lt;/li>
&lt;/ul>
&lt;h3 id="состав-продукта">&lt;span class="section-num">6.1&lt;/span> Состав продукта&lt;/h3>
&lt;ul>
&lt;li>Редактор текста: &lt;em>МойОфис Текст&lt;/em>.&lt;/li>
&lt;li>Редактор таблиц: &lt;em>МойОфис Таблица&lt;/em>.&lt;/li>
&lt;li>Просмотр презентаций: &lt;em>МойОфис Презентация&lt;/em>.&lt;/li>
&lt;li>Создание презентаций: &lt;em>Редактор Презентаций&lt;/em>. На основе LibreOffice Impress.&lt;/li>
&lt;li>Работа с почтой: &lt;em>МойОфис Почта&lt;/em>. На основе Mozilla Thunderbird.&lt;/li>
&lt;/ul></description></item><item><title>Формат Small Form-factor Pluggable (SFP)</title><link>https://yamadharma.github.io/ru/post/2023/03/19/small-form-factor-pluggable/</link><pubDate>Sun, 19 Mar 2023 16:38:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/03/19/small-form-factor-pluggable/</guid><description>&lt;p>Формат сменных модулей для сетевых интерфейсов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#sfp">&lt;span class="section-num">1&lt;/span> SFP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#sfp-plus">&lt;span class="section-num">2&lt;/span> SFP+&lt;/a>&lt;/li>
&lt;li>&lt;a href="#sfp28">&lt;span class="section-num">3&lt;/span> SFP28&lt;/a>&lt;/li>
&lt;li>&lt;a href="#qsfp-plus">&lt;span class="section-num">4&lt;/span> QSFP+&lt;/a>&lt;/li>
&lt;li>&lt;a href="#qsfp28">&lt;span class="section-num">5&lt;/span> QSFP28&lt;/a>&lt;/li>
&lt;li>&lt;a href="#xfp">&lt;span class="section-num">6&lt;/span> XFP&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="sfp">&lt;span class="section-num">1&lt;/span> SFP&lt;/h2>
&lt;ul>
&lt;li>SFP (small form-factor pluggable) заменил модули GBIC (Gigabit interface converter).&lt;/li>
&lt;li>Размер составляет 1/2 от модуля GBIC.&lt;/li>
&lt;li>Скорость передачи данных SFP колеблется от 100 Мбит/с до 4 Гбит/с.&lt;/li>
&lt;li>SFP основан на протоколе SFF-8472.&lt;/li>
&lt;/ul>
&lt;h2 id="sfp-plus">&lt;span class="section-num">2&lt;/span> SFP+&lt;/h2>
&lt;ul>
&lt;li>SFP+ (small form-factor pluggable plus) &amp;mdash; расширенная версия SFP, поддерживающая 8 Гбит/с Fibre Channel, 10 Gigabit Ethernet и стандарт оптической транспортной сети OTU2.&lt;/li>
&lt;li>SFP+ также предлагает прямое подключение для соединения двух портов SFP+ без дополнительных оптических модулей.&lt;/li>
&lt;li>SFP и SFP+ модули идентичны по размеру и внешнему виду.&lt;/li>
&lt;li>SFP+ соответствует протоколам SFF-8431 и SFF-8432.&lt;/li>
&lt;li>В порт SFP+ можно установить SFP модуль.&lt;/li>
&lt;li>SFP+ модуль нельзя подключить к порту SFP.&lt;/li>
&lt;/ul>
&lt;h2 id="sfp28">&lt;span class="section-num">3&lt;/span> SFP28&lt;/h2>
&lt;ul>
&lt;li>SFP28 (small form-factor pluggable 28) &amp;mdash; расширенная версия SFP+.&lt;/li>
&lt;li>SFP28 и SFP+ имеют одинаковый размер, но SFP28 поддерживает 25 Гбит/с на одном канале.&lt;/li>
&lt;li>Расположение контактов разъёмов SFP28 и SFP+ совместимо.&lt;/li>
&lt;li>SFP28 будет работать с SFP+ модулями с пониженной скоростью.&lt;/li>
&lt;/ul>
&lt;h2 id="qsfp-plus">&lt;span class="section-num">4&lt;/span> QSFP+&lt;/h2>
&lt;ul>
&lt;li>QSFP+ есть эволюция QSFP (quad small form-factor pluggable).&lt;/li>
&lt;li>QSFP может поддерживать 4 канала одновременно, и каждый канал может обрабатывать скорость передачи данных 1 Гбит/с, поэтому он называется Quad SFP.&lt;/li>
&lt;li>QSFP+ поддерживает четыре канала 10 Гбит/с.&lt;/li>
&lt;li>Эти 4 канала могут быть объединены в один канал.&lt;/li>
&lt;li>QSFP+ может заменить 4 стандартных SFP+ модулей.&lt;/li>
&lt;/ul>
&lt;h2 id="qsfp28">&lt;span class="section-num">5&lt;/span> QSFP28&lt;/h2>
&lt;ul>
&lt;li>QSFP28 (quad small form-factor pluggable 28) обеспечивает четыре канала высокоскоростных дифференциальных сигналов со скоростями передачи данных от 25 Гбит/с до 40 Гбит/с.&lt;/li>
&lt;/ul>
&lt;h2 id="xfp">&lt;span class="section-num">6&lt;/span> XFP&lt;/h2>
&lt;ul>
&lt;li>XFP (10-гигабитный Small Form Factor Pluggable) &amp;mdash; протоколо-независимый оптический трансивер.&lt;/li>
&lt;li>По размерам XFP больше, чем SFP.&lt;/li>
&lt;/ul></description></item><item><title>Контроллер Cisco WLC</title><link>https://yamadharma.github.io/ru/post/2023/03/03/cisco-wlc/</link><pubDate>Fri, 03 Mar 2023 15:14:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/03/03/cisco-wlc/</guid><description>&lt;p>Контроллер Cisco WLC.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#полезные-команды">&lt;span class="section-num">2&lt;/span> Полезные команды&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-wlan">&lt;span class="section-num">3&lt;/span> Настройка WLAN&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление">&lt;span class="section-num">4&lt;/span> Обновление&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>WLC (wireless lan controller) контроллер точек WiFi от Cisco.&lt;/li>
&lt;li>Контроллер нужен для централизованного управления большими беспроводными сетями, построенными на базе не настраиваемых индивидуально точек доступа.&lt;/li>
&lt;li>Точки доступа регистрируются на контроллере, получают с него настройки, управляются им, и предоставляют беспроводной доступ Wi-Fi абонентам.&lt;/li>
&lt;li>Практически все модели точек доступа Cisco выпускаются как в автономном варианте (независимое управление через CLI или GUI), так и в унифицированном (лимитированный CLI и управление с контроллера по протоколу CAPWAP).&lt;/li>
&lt;li>Контроллер представляет собой программно-аппаратную платформу взаимодействия с точками доступа, и проводной сетью.&lt;/li>
&lt;li>Есть виртуальный контроллер в виде образа виртуальной машины под VMware ESXi (ovf-файл).&lt;/li>
&lt;/ul>
&lt;h2 id="полезные-команды">&lt;span class="section-num">2&lt;/span> Полезные команды&lt;/h2>
&lt;ul>
&lt;li>Настроить IP-адрес точке доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap static-ip &lt;span class="nb">enable&lt;/span> AP-NAME IP-ADDRESS MASK GATEWAY
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроить учётные данные точки доступа для Telnet/SSH:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap telnet &lt;span class="nb">enable&lt;/span> AP-NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config ap ssh &lt;span class="nb">enable&lt;/span> AP-NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config ap mgmtuser add username USERNAME password PASSWORD enablesecret ENABLE-PASSWORD AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Изменить режим точки доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap mode MODE AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроить имя группы на точке доступа&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap group-name GROUP-NAME AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>Настроить flexconnect native vlan на точке доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap flexconnect vlan native VLAN-ID AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверить идентификатор vlan интерфейса:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show interface summary
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверить идентификатор wlan интерфейса:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show wlan summary
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Сопоставить идентификатор vlan с wlan на точке доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap flexconnect vlan wlan WLAN-ID VLAN-ID AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Настроить wlan и сопоставление wlan-интерфейса в группе точек доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan apgroup interface-mapping add GROUP-NAME WLAN-ID INTERFACE-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Понизить точку доступа до автономной с WLC:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap tftp-downgrade TFTP-IP-ADDRESS FILENAME AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Посмотреть cdp на точке доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show ap cdp neighbors detail AP-NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Отключить подключение беспроводных клиентов к сети (добавление клиентов в список исключений):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config exclusionlist add MAC-ADDRESS DESCRIPTION
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Включить светодиод точки доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap led-state &lt;span class="nb">enable&lt;/span> AP_NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Отключить светодиод точки доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap led-state disable AP_NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Перезагрузить точку доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config ap reset AP_NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Применить фильтр для фильтрации результатов:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grep include &lt;span class="s2">&amp;#34;pattern&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;commands&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Примеры:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grep include &lt;span class="s2">&amp;#34;AP Serial Number&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;show ap config general AP-NAME&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grep include &lt;span class="s2">&amp;#34;MAC Address&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;show ap config general AP-NAME”
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">grep include &amp;#34;&lt;/span>IP Address&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>show ap config general AP-NAME&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-wlan">&lt;span class="section-num">3&lt;/span> Настройка WLAN&lt;/h2>
&lt;ul>
&lt;li>Каждая беспроводная сеть идентифицируется уникальным именем (SSID).&lt;/li>
&lt;li>Каждая сеть может иметь свой, независимый набор параметров авторизации, шифрования, QoS, дополнительных свойств.&lt;/li>
&lt;li>Каждая точка доступа может обслуживать (анонсировать) до 16 беспроводных сетей.&lt;/li>
&lt;li>Контроллер (в зависимости от модели) может обслуживать до 512 сетей и до сотен точек доступа.&lt;/li>
&lt;li>Просмотр настроенных WLAN:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">show wlan summary
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для создания новой сети необходимо задать базовые параметры:
&lt;ul>
&lt;li>&lt;em>Тип сети&lt;/em>: WLAN (беспроводная). Контроллер может также работать как Captive Portal для проводной сети (Guest LAN).&lt;/li>
&lt;li>&lt;em>Имя профиля (profile-name)&lt;/em>: произвольное слово, обычно соответствует имени сети, применяется при использовании систем управления WCS/NCS.&lt;/li>
&lt;li>&lt;em>Имя сети (SSID)&lt;/em>: то, как ваша сеть будет видна клиентским компьютерам.&lt;/li>
&lt;li>&lt;em>Идентификатор (порядковый номер)&lt;/em>: по умолчанию ваши точки доступа будут анонсировать сети с номерами &amp;lt;=16.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Создадим новую сеть:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan create wlan-id profile-name ssid
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Следует задать параметры сети.
&lt;ul>
&lt;li>&lt;em>enable&lt;/em> включает, &lt;em>disable&lt;/em> выключает обслуживание сети точками доступа.&lt;/li>
&lt;li>&lt;em>Security policy&lt;/em> оповещает вас о текущем наборе политик безопасности сети, которые настраиваются далее&lt;/li>
&lt;li>Radio policy позволяет выбрать, в каком диапазоне частот (2.4, 5 ГГц) и скоростей (до 11, до 54 мбит/с) будет работать сеть. Возможны комбинации вариантов. Высокие скорости (802.11n) — тема отдельной статьи. Естественно, ваши точки должны поддерживать выбранные диапазоны.&lt;/li>
&lt;li>&lt;em>interface&lt;/em> определяет, на какой проводной сетевой интерфейс (VLAN) контроллера по умолчанию будут терминироваться подключения беспроводных клиентов.
&lt;ul>
&lt;li>Можно создать несколько динамических интерфейсов, каждый со своим VLAN ID, и распределять ваших пользователей по ним в зависимости от того, к какой сети они подключились.&lt;/li>
&lt;li>&lt;em>Multicast VLAN&lt;/em> определяет, куда в случае нескольких групп интерфейсов будет идти мультикаст трафик.&lt;/li>
&lt;li>&lt;em>Broadcast SSID&lt;/em> определяет, будет ли имя сети отражаться в beacon (анонсах) пакетов, периодически рассылаемых точкой доступа. Иначе это называется «открытая/закрытая сеть».&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Подключение сети к интерфейсу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan interface &amp;lt;wlan-id&amp;gt; &amp;lt;interface-name&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config wlan broadcast-ssid &lt;span class="nb">enable&lt;/span> &amp;lt;wlan_id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Безопасность беспроводной сети строится из трех компонентов:
&lt;ul>
&lt;li>авторизация;&lt;/li>
&lt;li>шифрования;&lt;/li>
&lt;li>веб-политика (опционально), позволяет заворачивать клиентскую HTTP-сессию на встроенный или внешний веб-сервер и запрашивать подтверждение/логин-пароль через форму.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Доступные параметры безопасности 2го уровня:
&lt;ul>
&lt;li>&lt;em>None&lt;/em>: авторизация и шифрование трафика не применяются;&lt;/li>
&lt;li>&lt;em>WPA+WPA2&lt;/em>: позволяет выбрать политику WPA, WPA2 (либо обе), тип шифрования TKIP, AES (либо оба). Данные параметры просто анонсируются клиентам в beacon пакетах.
&lt;ul>
&lt;li>Оптимальным будет использование WPA2/AES.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Нужно, как будет образовываться ключ для шифрования:
&lt;ul>
&lt;li>&lt;em>802.1X&lt;/em>: индивидуальный ключ для каждого клиента будет генерироваться RADIUS-сервером в момент авторизации; также называется WPA(2) Enterprise;&lt;/li>
&lt;li>&lt;em>CCKM&lt;/em>: используется собственный механизм Cisco генерации ключей, подходит только для Cisco Wi-Fi телефонов;&lt;/li>
&lt;li>&lt;em>PSK&lt;/em>: общий (pre-shared) ключ, пароль на сеть, именуемую в таком случае WPA(2) Personal;&lt;/li>
&lt;li>&lt;em>802.1x+CCKM&lt;/em>: гибрид CCKM и RADIUS-ключа (для Cisco-телефонов);&lt;/li>
&lt;li>&lt;em>802.1X&lt;/em>: индивидуальный ключ для каждого клиента будет генерироваться RADIUS-сервером в момент авторизации (это WEP-ключ, протокол шифрования радиоканала &amp;mdash; WEP, пользоваться не рекомендуется);&lt;/li>
&lt;li>&lt;em>Static WEP&lt;/em>: статический WEP-ключ;&lt;/li>
&lt;li>&lt;em>Static WEP+802.1X&lt;/em>: гибрид двух предыдущих;&lt;/li>
&lt;li>&lt;em>CKIP&lt;/em>: проприетарный аналог WEP для Cisco телефонов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В реальности необходимо делать выбор между:
&lt;ul>
&lt;li>отсутствием шифрования/авторизации (гостевой доступ);&lt;/li>
&lt;li>WPA2 (AES) PSK (WPA2 Personal) для доступа в сеть по общему паролю;&lt;/li>
&lt;li>WPA2 (AES) + 802.1X (WPA2 Enterprise) для доступа в сеть через авторизацию на RADIUS-сервере.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Настроим параметры безопасности на интерфейсе:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan security wpa akm 802.1x disable &amp;lt;wlan_id&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config wlan security wpa akm psk &lt;span class="nb">enable&lt;/span> &amp;lt;wlan_id&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config wlan security wpa akm psk set-key ascii &amp;lt;password&amp;gt; &amp;lt;wlan_id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключим радио-интерфейсы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan radio &amp;lt;wlan_id&amp;gt; all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активируем интерфейс:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan &lt;span class="nb">enable&lt;/span> &amp;lt;wlan_id&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сети добавляются автоматически в группу точек доступа &lt;code>default-group&lt;/code>.&lt;/li>
&lt;li>Если существуют другие группы точек доступа, то следует сеть добавить к ней:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">config wlan apgroup interface-mapping add &amp;lt;apgroup-name&amp;gt; &amp;lt;wlan-id&amp;gt; &amp;lt;interface-name&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление">&lt;span class="section-num">4&lt;/span> Обновление&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/cisco-wlc-firmware-upgrade/">Контроллер Cisco WLC. Обновление программного обеспечения&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Система мониторинга Observium</title><link>https://yamadharma.github.io/ru/post/2023/03/02/observium-monitoring-system/</link><pubDate>Thu, 02 Mar 2023 15:46:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/03/02/observium-monitoring-system/</guid><description>&lt;p>Система мониторинга Observium.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-устройств">&lt;span class="section-num">2&lt;/span> Подключение устройств&lt;/a>&lt;/li>
&lt;li>&lt;a href="#принципы-работы">&lt;span class="section-num">3&lt;/span> Принципы работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-observium">&lt;span class="section-num">4&lt;/span> Установка Observium&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-observium">&lt;span class="section-num">5&lt;/span> Обновление Observium&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.observium.org/" target="_blank" rel="noopener">https://www.observium.org/&lt;/a>.&lt;/li>
&lt;li>Хорош тем, что практически не требует настройки. Работает из коробки.&lt;/li>
&lt;li>Observium доступен в двух версиях:
&lt;ul>
&lt;li>бесплатная &lt;em>Community&lt;/em> (выпускается раз в 6 месяцев);&lt;/li>
&lt;li>платная &lt;em>Professional&lt;/em>;&lt;/li>
&lt;li>платная &lt;em>Enterprise&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Observium Community годится только для сервисов не критичных к времени реакции, так как устройства по SNMP опрашиваются раз в 5 минут.&lt;/li>
&lt;li>В платной версии предусмотрен модуль Alarms.&lt;/li>
&lt;li>Опрос устройств осуществляется по протоколу SNMP.&lt;/li>
&lt;li>Наилучшим образом подходит для мониторинга коммутационного оборудования.&lt;/li>
&lt;/ul>
&lt;h2 id="подключение-устройств">&lt;span class="section-num">2&lt;/span> Подключение устройств&lt;/h2>
&lt;ul>
&lt;li>Для добавления маршрутизатора Cisco достаточно задать SNMP community:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">snmp-server community public RO
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавление устройств в Observium осуществляется либо через меню веб интерфейса (Devices-&amp;gt;Add device), либо из командной строки сервера (из каталога &lt;em>Observium&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">./add_device.php hostname
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="принципы-работы">&lt;span class="section-num">3&lt;/span> Принципы работы&lt;/h2>
&lt;ul>
&lt;li>Сбор статистики поделен на 2 основных процесса:
&lt;ul>
&lt;li>&lt;code>discovery&lt;/code>: выполняется основное обнаружение поддерживаемых на данном устройстве датчиков;&lt;/li>
&lt;li>&lt;code>poller&lt;/code>: опрос устройств каждые 5 минут.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В версии для подписчиков есть ещё 2 дополнительных процесса, работающих совместно с процессом &lt;code>poller&lt;/code>:
&lt;ul>
&lt;li>&lt;code>bill&lt;/code>: подсчёт биллинговой информации на отдельных портах для пользователей;&lt;/li>
&lt;li>&lt;code>alert&lt;/code>: генерация уведомлений по собираемым системой параметрам.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка-observium">&lt;span class="section-num">4&lt;/span> Установка Observium&lt;/h2>
&lt;ul>
&lt;li>Создаем директории, в которых будут располагаться файлы &lt;em>Observium&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo mkdir -p /opt/observium
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачаем версию &lt;em>Community Edition&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget http://www.observium.org/observium-community-latest.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar zxvf observium-community-latest.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Переходим в папку с конфигурационными файлами и создаем конфигурационный файл, скопировав файл по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /optobservium
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp config.php.default config.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Открываем файл &lt;code>config.php&lt;/code> и редактируем настройки MySQL: &lt;code>username&lt;/code>, &lt;code>password&lt;/code>, &lt;code>dbname&lt;/code>.&lt;/li>
&lt;li>Подключаемся к MySQL:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создаём базу данных с именем &lt;code>observium&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">CREATE DATABASE observium DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Даём полные привилегии пользователю &lt;code>observium&lt;/code> на одноименную базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">GRANT ALL PRIVILEGES ON observium.* TO &lt;span class="s1">&amp;#39;observium&amp;#39;&lt;/span>@&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>IDENTIFIED BY &lt;span class="s1">&amp;#39;PASSWORD&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выполняем скрипт конфигурации ранее созданной базы данных MySQL:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/opt/observium/discovery.php -u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создаем дополнительные служебные каталоги:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /opt/observium/logs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /opt/observium/rrd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте файл &lt;code>/etc/httpd/conf.d/observium.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">VirtualHost&lt;/span> &lt;span class="err">*&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DocumentRoot /opt/observium/html/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ServerName observium.domain.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CustomLog /opt/observium/logs/access_log combined
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ErrorLog /opt/observium/logs/error_log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">Directory&lt;/span> &lt;span class="err">&amp;#34;/&lt;/span>&lt;span class="na">opt&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="na">observium&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="na">html&lt;/span>&lt;span class="err">/&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AllowOverride All
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Options FollowSymLinks MultiViews
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Require all granted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">Directory&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">VirtualHost&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте файл &lt;code>/etc/cron.d/observium&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Run a complete discovery of all devices once every 6 hours
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">33 */6 * * * root /opt/observium/discovery.php -h all &amp;gt;&amp;gt; /dev/null 2&amp;gt;&amp;amp;1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Run automated discovery of newly added devices every 5 minutes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*/5 * * * * root /opt/observium/discovery.php -h new &amp;gt;&amp;gt; /dev/null 2&amp;gt;&amp;amp;1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Run multithreaded poller wrapper every 5 minutes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*/5 * * * * root /opt/observium/poller-wrapper.py &amp;gt;&amp;gt; /dev/null 2&amp;gt;&amp;amp;1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Run housekeeping script daily for syslog, eventlog and alert log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">13 5 * * * root /opt/observium/housekeeping.php -ysel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Run housekeeping script daily for rrds, ports, orphaned entries in the database and performance data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">47 4 * * * root /opt/observium/housekeeping.php -yrptb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы форсировать мониторинг устройств, нужно выполнить команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/opt/observium/discovery.php -h all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/opt/observium/poller.php -h all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-observium">&lt;span class="section-num">5&lt;/span> Обновление Observium&lt;/h2>
&lt;ul>
&lt;li>Переименуйте старую установку и скачайте и распакуйте новую (всё под пользователем &lt;code>root&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv observium observium_old
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://www.observium.org/observium-community-latest.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar zxvf observium-community-latest.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv /opt/observium_old/rrd observium/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv /opt/observium_old/logs observium/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv /opt/observium_old/config.php observium/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Исправьте права доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R apache:apache /opt/observium
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите схему БД:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/opt/observium/discovery.php -u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно принудительно выполнить немедленное повторное обнаружение всех устройств:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/opt/observium/discovery.php -h all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно удалить каталог &lt;code>observium_old&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm -rf observium_old
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Флаги запуска Google Chrome</title><link>https://yamadharma.github.io/ru/post/2023/02/28/google-chrome-flags/</link><pubDate>Tue, 28 Feb 2023 15:31:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/02/28/google-chrome-flags/</guid><description>&lt;p>Флаги запуска Google Chrome и его деривативов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#флаги-запуска">&lt;span class="section-num">1&lt;/span> Флаги запуска&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#принудительное-ускорение-графического-процессора">&lt;span class="section-num">1.1&lt;/span> Принудительное ускорение графического процессора&lt;/a>&lt;/li>
&lt;li>&lt;a href="#поддержка-wayland">&lt;span class="section-num">1.2&lt;/span> Поддержка Wayland&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#google-chrome">&lt;span class="section-num">2&lt;/span> Google Chrome&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#приложение-по-умолчанию">&lt;span class="section-num">2.1&lt;/span> Приложение по умолчанию&lt;/a>&lt;/li>
&lt;li>&lt;a href="#задание-флагов-в-конфигурационном-файле">&lt;span class="section-num">2.2&lt;/span> Задание флагов в конфигурационном файле&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#расположение-конфигурационных-файлов">&lt;span class="section-num">2.2.1&lt;/span> Расположение конфигурационных файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пример-конфигурационного-файла">&lt;span class="section-num">2.2.2&lt;/span> Пример конфигурационного файла&lt;/a>&lt;/li>
&lt;li>&lt;a href="#модификация-файла-запуска-google-chrome">&lt;span class="section-num">2.2.3&lt;/span> Модификация файла запуска Google Chrome&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#yandex-browser">&lt;span class="section-num">3&lt;/span> Yandex Browser&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">3.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#приложение-по-умолчанию">&lt;span class="section-num">3.2&lt;/span> Приложение по умолчанию&lt;/a>&lt;/li>
&lt;li>&lt;a href="#задание-флагов-в-конфигурационном-файле">&lt;span class="section-num">3.3&lt;/span> Задание флагов в конфигурационном файле&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#расположение-конфигурационных-файлов">&lt;span class="section-num">3.3.1&lt;/span> Расположение конфигурационных файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пример-конфигурационного-файла">&lt;span class="section-num">3.3.2&lt;/span> Пример конфигурационного файла&lt;/a>&lt;/li>
&lt;li>&lt;a href="#модификация-файла-запуска-yandex-browser">&lt;span class="section-num">3.3.3&lt;/span> Модификация файла запуска Yandex Browser&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#cromium">&lt;span class="section-num">4&lt;/span> Cromium&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#приложение-по-умолчанию">&lt;span class="section-num">4.2&lt;/span> Приложение по умолчанию&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-настроек">&lt;span class="section-num">4.3&lt;/span> Синхронизация настроек&lt;/a>&lt;/li>
&lt;li>&lt;a href="#задание-флагов-в-конфигурационном-файле">&lt;span class="section-num">4.4&lt;/span> Задание флагов в конфигурационном файле&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#расположение-конфигурационных-файлов">&lt;span class="section-num">4.4.1&lt;/span> Расположение конфигурационных файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пример-конфигурационного-файла">&lt;span class="section-num">4.4.2&lt;/span> Пример конфигурационного файла&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="флаги-запуска">&lt;span class="section-num">1&lt;/span> Флаги запуска&lt;/h2>
&lt;h3 id="принудительное-ускорение-графического-процессора">&lt;span class="section-num">1.1&lt;/span> Принудительное ускорение графического процессора&lt;/h3>
&lt;ul>
&lt;li>Отключаем чёрный список графических процессов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--ignore-gpu-blocklist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-zero-copy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="поддержка-wayland">&lt;span class="section-num">1.2&lt;/span> Поддержка Wayland&lt;/h3>
&lt;ul>
&lt;li>Включаем автовыбор графической системы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--ozone-platform-hint&lt;span class="o">=&lt;/span>auto
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если это не работает, можно явно указать желательную систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--ozone-platform&lt;span class="o">=&lt;/span>wayland
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Принудительно установить более новую версию GTK:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">--gtk-version&lt;span class="o">=&lt;/span>&lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="google-chrome">&lt;span class="section-num">2&lt;/span> Google Chrome&lt;/h2>
&lt;h3 id="приложение-по-умолчанию">&lt;span class="section-num">2.1&lt;/span> Приложение по умолчанию&lt;/h3>
&lt;ul>
&lt;li>Установить броузер как броузер по умолчанию можно либо через графические настройки, либо через командную строку (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/04/02/xdg-mime-applications/">XDG. Приложения MIME&lt;/a>)
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-settings &lt;span class="nb">set&lt;/span> default-web-browser google-chrome.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="задание-флагов-в-конфигурационном-файле">&lt;span class="section-num">2.2&lt;/span> Задание флагов в конфигурационном файле&lt;/h3>
&lt;h4 id="расположение-конфигурационных-файлов">&lt;span class="section-num">2.2.1&lt;/span> Расположение конфигурационных файлов&lt;/h4>
&lt;ul>
&lt;li>Конфигурационный файл будет называться &lt;code>chrome-flags.conf&lt;/code>.&lt;/li>
&lt;li>Пользовательский файл конфигурации находится в каталоге &lt;code>$HOME/.config/&lt;/code> (переменная среды &lt;code>$XDG_CONFIG_HOME&lt;/code>).&lt;/li>
&lt;li>Глобальный файл конфигурации находится в каталоге &lt;code>/etc/&lt;/code>.&lt;/li>
&lt;li>Специальный синтаксис не используется. Флаги определяются так, как если бы они были записаны в терминале.&lt;/li>
&lt;li>Флаги можно размещать в отдельных строках для удобства чтения, но это не обязательно.&lt;/li>
&lt;li>Строки, начинающиеся с символа решётки (&lt;code>#&lt;/code>), пропускаются.&lt;/li>
&lt;/ul>
&lt;h4 id="пример-конфигурационного-файла">&lt;span class="section-num">2.2.2&lt;/span> Пример конфигурационного файла&lt;/h4>
&lt;ul>
&lt;li>Настроим перенос кэша броузера во временную файловую систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/chrome-flags.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Cache in tmpfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--disk-cache-dir=$XDG_RUNTIME_DIR/google-chrome
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроим конфигурацию параметров графики:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/chrome-flags.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--ignore-gpu-blocklist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-gpu-rasterization
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-zero-copy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--ozone-platform-hint=auto
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-features=WaylandWindowDecorations
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-webrtc-pipewire-capturer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--gtk-version=4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="модификация-файла-запуска-google-chrome">&lt;span class="section-num">2.2.3&lt;/span> Модификация файла запуска Google Chrome&lt;/h4>
&lt;ul>
&lt;li>Добавим в файл запуска чтение файла конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">XDG_CONFIG_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">XDG_CONFIG_HOME&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="p">~/.config&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Allow users to override command-line options&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> -f &lt;span class="nv">$XDG_CONFIG_HOME&lt;/span>/chrome-flags.conf &lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>cat &lt;span class="nv">$XDG_CONFIG_HOME&lt;/span>/chrome-flags.conf &lt;span class="p">|&lt;/span> grep -v &lt;span class="s2">&amp;#34;#&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> xargs&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">eval&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$CHROME_USER_FLAGS&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> -f /etc/chrome-flags.conf &lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>cat /etc/chrome-flags.conf &lt;span class="p">|&lt;/span> grep -v &lt;span class="s2">&amp;#34;#&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> xargs&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">eval&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$CHROME_USER_FLAGS&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Соответственно заменим и строку запуска:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Launch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Note: exec -a below is a bashism.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exec&lt;/span> -a &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$HERE&lt;/span>&lt;span class="s2">/chrome&amp;#34;&lt;/span> &lt;span class="nv">$CHROME_USER_FLAGS&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$@&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="yandex-browser">&lt;span class="section-num">3&lt;/span> Yandex Browser&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">3.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://browser.yandex.com/" target="_blank" rel="noopener">https://browser.yandex.com/&lt;/a>&lt;/li>
&lt;li>Репозиторий deb-файлов: &lt;a href="https://repo.yandex.ru/yandex-browser/deb/pool/main/y/" target="_blank" rel="noopener">https://repo.yandex.ru/yandex-browser/deb/pool/main/y/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="приложение-по-умолчанию">&lt;span class="section-num">3.2&lt;/span> Приложение по умолчанию&lt;/h3>
&lt;ul>
&lt;li>Установить броузер как броузер по умолчанию можно либо через графические настройки, либо через командную строку (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/04/02/xdg-mime-applications/">XDG. Приложения MIME&lt;/a>)
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-settings &lt;span class="nb">set&lt;/span> default-web-browser yandex-browser.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="задание-флагов-в-конфигурационном-файле">&lt;span class="section-num">3.3&lt;/span> Задание флагов в конфигурационном файле&lt;/h3>
&lt;h4 id="расположение-конфигурационных-файлов">&lt;span class="section-num">3.3.1&lt;/span> Расположение конфигурационных файлов&lt;/h4>
&lt;ul>
&lt;li>Конфигурационный файл будет называться &lt;code>yandex-browser-flags.conf&lt;/code>.&lt;/li>
&lt;li>Пользовательский файл конфигурации находится в каталоге &lt;code>$HOME/.config/&lt;/code> (переменная среды &lt;code>$XDG_CONFIG_HOME&lt;/code>).&lt;/li>
&lt;li>Глобальный файл конфигурации находится в каталоге &lt;code>/etc/&lt;/code>.&lt;/li>
&lt;li>Специальный синтаксис не используется. Флаги определяются так, как если бы они были записаны в терминале.&lt;/li>
&lt;li>Флаги можно размещать в отдельных строках для удобства чтения, но это не обязательно.&lt;/li>
&lt;li>Строки, начинающиеся с символа решётки (&lt;code>#&lt;/code>), пропускаются.&lt;/li>
&lt;/ul>
&lt;h4 id="пример-конфигурационного-файла">&lt;span class="section-num">3.3.2&lt;/span> Пример конфигурационного файла&lt;/h4>
&lt;ul>
&lt;li>Настроим перенос кэша броузера во временную файловую систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/yandex-browser-flags.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Cache in tmpfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--disk-cache-dir=$XDG_RUNTIME_DIR/yandex-browser
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроим конфигурацию параметров графики:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/yandex-browser-flags.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--ignore-gpu-blocklist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-gpu-rasterization
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-zero-copy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--ozone-platform-hint=auto
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-features=WaylandWindowDecorations
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-webrtc-pipewire-capturer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--gtk-version=4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="модификация-файла-запуска-yandex-browser">&lt;span class="section-num">3.3.3&lt;/span> Модификация файла запуска Yandex Browser&lt;/h4>
&lt;ul>
&lt;li>Добавим в файл запуска чтение файла конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">XDG_CONFIG_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">XDG_CONFIG_HOME&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="p">~/.config&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Allow users to override command-line options&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> -f &lt;span class="nv">$XDG_CONFIG_HOME&lt;/span>/yandex-browser-flags.conf &lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>cat &lt;span class="nv">$XDG_CONFIG_HOME&lt;/span>/yandex-browser-flags.conf &lt;span class="p">|&lt;/span> grep -v &lt;span class="s2">&amp;#34;#&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> xargs&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">eval&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$CHROME_USER_FLAGS&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> -f /etc/yandex-browser-flags.conf &lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>cat /etc/yandex-browser-flags.conf &lt;span class="p">|&lt;/span> grep -v &lt;span class="s2">&amp;#34;#&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> xargs&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">CHROME_USER_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">eval&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$CHROME_USER_FLAGS&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Соответственно заменим и строку запуска:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">LD_LIBRARY_PATH&lt;/span>&lt;span class="p">+set&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;set&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">LD_LIBRARY_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">LD_LIBRARY_PATH&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">:/usr/lib64/yandex-browser-stable/lib&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">LD_LIBRARY_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/usr/lib64/yandex-browser-stable/lib&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> LD_LIBRARY_PATH
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Launch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> &lt;span class="s2">&amp;#34;/opt/yandex/browser&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exec&lt;/span> -a &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;./yandex-browser&amp;#34;&lt;/span> &lt;span class="nv">$CHROME_USER_FLAGS&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$@&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="cromium">&lt;span class="section-num">4&lt;/span> Cromium&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Веб-браузер с открытым исходным кодом.&lt;/li>
&lt;li>Разрабатывается сообществом The Chromium Authors, компанией Google и некоторыми другими компаниями (Opera Software, Яндекс, NVIDIA, Microsoft и другими).&lt;/li>
&lt;/ul>
&lt;h3 id="приложение-по-умолчанию">&lt;span class="section-num">4.2&lt;/span> Приложение по умолчанию&lt;/h3>
&lt;ul>
&lt;li>Установить броузер как броузер по умолчанию можно либо через графические настройки, либо через командную строку (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/04/02/xdg-mime-applications/">XDG. Приложения MIME&lt;/a>)
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-settings &lt;span class="nb">set&lt;/span> default-web-browser chromium-browser-chromium.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-настроек">&lt;span class="section-num">4.3&lt;/span> Синхронизация настроек&lt;/h3>
&lt;ul>
&lt;li>С 15 марта 2021 года Google ограничивает доступ к своему API сторонним броузерам на базе Chromium.&lt;/li>
&lt;li>Это блокирует доступ Chromium-браузеров к базе учётных записей Google.&lt;/li>
&lt;li>Запуск Chromium с флагами, устанавливающими идентификатор oauth2 и секретное значение, может повторно включить синхронизацию Chromium с учетной записью Google (задав флаги запуска):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">--oauth2-client-id=77185425430.apps.googleusercontent.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Google не рекомендует делать это.&lt;/li>
&lt;/ul>
&lt;h3 id="задание-флагов-в-конфигурационном-файле">&lt;span class="section-num">4.4&lt;/span> Задание флагов в конфигурационном файле&lt;/h3>
&lt;h4 id="расположение-конфигурационных-файлов">&lt;span class="section-num">4.4.1&lt;/span> Расположение конфигурационных файлов&lt;/h4>
&lt;ul>
&lt;li>Пользовательский файл конфигурации: &lt;code>$HOME/.config/chromium-flags.conf&lt;/code> (переменная среды &lt;code>$XDG_CONFIG_HOME&lt;/code>).&lt;/li>
&lt;li>Глобальный файл конфигурации находится в каталоге &lt;code>/etc/chromium/default&lt;/code>.&lt;/li>
&lt;li>В файле задаётся переменная окружения &lt;code>CHROMIUM_FLAGS&lt;/code>.&lt;/li>
&lt;li>Флаги можно размещать в отдельных строках для удобства чтения, но это не обязательно.&lt;/li>
&lt;li>Строки, начинающиеся с символа решётки (&lt;code>#&lt;/code>) использовать нельзя.&lt;/li>
&lt;/ul>
&lt;h4 id="пример-конфигурационного-файла">&lt;span class="section-num">4.4.2&lt;/span> Пример конфигурационного файла&lt;/h4>
&lt;ul>
&lt;li>Настроим перенос кэша броузера во временную файловую систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## /etc/chromium/default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CHROMIUM_FLAGS=&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--disk-cache-dir=$XDG_RUNTIME_DIR/chromium
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--ignore-gpu-blocklist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-gpu-rasterization
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-zero-copy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--ozone-platform-hint=auto
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-features=WaylandWindowDecorations
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--enable-webrtc-pipewire-capturer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--gtk-version=4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--oauth2-client-id=77185425430.apps.googleusercontent.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>VPN. L2TP over IPsec. Подключение клиента</title><link>https://yamadharma.github.io/ru/post/2023/02/05/l2tp-ipsec-vpn-client-setup/</link><pubDate>Sun, 05 Feb 2023 13:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/02/05/l2tp-ipsec-vpn-client-setup/</guid><description>&lt;p>Подключение клиента L2TP/IPsec VPN.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">1&lt;/span> Linux&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">1.1&lt;/span> Gentoo&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#networkmanager">&lt;span class="section-num">1.1.1&lt;/span> NetworkManager&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#l2tp-over-ipsec-через-межсетевой-экран-с-nat">&lt;span class="section-num">2&lt;/span> L2TP over IPSec через межсетевой экран с NAT&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="linux">&lt;span class="section-num">1&lt;/span> Linux&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">1.1&lt;/span> Gentoo&lt;/h3>
&lt;h4 id="networkmanager">&lt;span class="section-num">1.1.1&lt;/span> NetworkManager&lt;/h4>
&lt;ul>
&lt;li>Откройте пользовательский интерфейс NetworkManager, затем:
&lt;ul>
&lt;li>Перейдите в Сеть &amp;gt; VPN. Нажмите &lt;em>+&lt;/em>.&lt;/li>
&lt;li>Выберите &lt;em>Протокол туннелирования уровня 2 (L2TP)&lt;/em>.&lt;/li>
&lt;li>Вы можете выбрать имя для VPN.&lt;/li>
&lt;li>Введите IP-адрес вашего VPN-сервера для шлюза.&lt;/li>
&lt;li>Введите имя пользователя VPN для имени пользователя.&lt;/li>
&lt;li>Щелкните правой кнопкой мыши &lt;em>?&lt;/em> в поле &lt;em>Пароль&lt;/em> и выберите &lt;em>Сохранить пароль только для этого пользователя&lt;/em>.
&lt;ul>
&lt;li>Можете использовать &lt;em>Сохранить пароль для всех пользователей&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Введите свой пароль VPN для пароля.&lt;/li>
&lt;li>Оставьте поле Домен NT пустым.&lt;/li>
&lt;li>Нажмите кнопку &lt;em>Настройки IPsec&amp;hellip;&lt;/em>.&lt;/li>
&lt;li>Установите флажок Включить туннель IPsec для хоста L2TP.&lt;/li>
&lt;li>Оставьте поле ID шлюза пустым.&lt;/li>
&lt;li>Введите свой &lt;em>VPN IPsec PSK&lt;/em> для общего ключа (preshared-key).&lt;/li>
&lt;li>Затем нажмите &lt;em>Add&lt;/em>, чтобы сохранить информацию о VPN-подключении.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Взаимодействие с Strongswan&lt;/p>
&lt;ul>
&lt;li>По умолчанию strongswan собирается с поддержкой capabilities и возможностью запуска под непривилегированным пользователем.&lt;/li>
&lt;li>Однако в NetworkManager поддержка capabilities не настроена.&lt;/li>
&lt;li>В результате соединение не устанавливается.&lt;/li>
&lt;li>Решить проблему можно следующим образом:
&lt;ul>
&lt;li>либо установить strongswan без поддержки capabilities и возможности запуска под непривилегированным пользователем:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">USE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-caps -non-root&amp;#34;&lt;/span> emerge strongswan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>либо собрать NetworkManager с поддержкой capabilities (см. &lt;a href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/merge_requests/1053" target="_blank" rel="noopener">https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/merge_requests/1053&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="l2tp-over-ipsec-через-межсетевой-экран-с-nat">&lt;span class="section-num">2&lt;/span> L2TP over IPSec через межсетевой экран с NAT&lt;/h2>
&lt;ul>
&lt;li>Необходимо задать правила на межсетевом экране для трафика L2TP over IPSec VPN.&lt;/li>
&lt;li>IKE (UDP 500) &amp;mdash; протокол обмена ключами. Без него IPSec не работает. Посредством этого протокола происходит согласование и обмен ключами. Пробрасывать нужно.&lt;/li>
&lt;li>NAT-T (UDP 4500) &amp;mdash; протокол инкапсулирует IPSec в UDP пакеты, что позволяет проходить трафику через NAT. Без этого протокола пакет не дойдет до получателя, а будут потерян на первом же NAT устройстве. Пробрасывать нужно.&lt;/li>
&lt;li>ESP (protocol 50) &amp;mdash; протокол обеспечивает шифрование, аутентификацию и целостность. Инкапсулируется в UDP. Пробрасывать не нужно.&lt;/li>
&lt;li>L2TP (UDP 1701) &amp;mdash; протокол туннелирования. О нём знают только оконечные узлы туннеля IPSec. Инкапсулируется в IPSec.. Пробрасывать не нужно&lt;/li>
&lt;/ul></description></item><item><title>Windows. Синхронизация времени</title><link>https://yamadharma.github.io/ru/post/2022/11/16/windows-time-synchronization/</link><pubDate>Wed, 16 Nov 2022 20:26:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/11/16/windows-time-synchronization/</guid><description>&lt;p>Синхронизация времени на Windows.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#синхронизация-со-сторонним-ntp-сервером">&lt;span class="section-num">1&lt;/span> Синхронизация со сторонним NTP-сервером&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проблема">&lt;span class="section-num">1.1&lt;/span> Проблема&lt;/a>&lt;/li>
&lt;li>&lt;a href="#причина">&lt;span class="section-num">1.2&lt;/span> Причина&lt;/a>&lt;/li>
&lt;li>&lt;a href="#решение">&lt;span class="section-num">1.3&lt;/span> Решение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="синхронизация-со-сторонним-ntp-сервером">&lt;span class="section-num">1&lt;/span> Синхронизация со сторонним NTP-сервером&lt;/h2>
&lt;h3 id="проблема">&lt;span class="section-num">1.1&lt;/span> Проблема&lt;/h3>
&lt;ul>
&lt;li>NTP-сервер по умолчанию для Windows (&lt;code>time.windows.com&lt;/code>) часто сбоит.&lt;/li>
&lt;li>При попытке синхронизировать Microsoft Windows с сервером протокола сетевого времени (NTP), который не работает под управлением Microsoft Windows, синхронизация может завершиться неудачно.&lt;/li>
&lt;/ul>
&lt;h3 id="причина">&lt;span class="section-num">1.2&lt;/span> Причина&lt;/h3>
&lt;ul>
&lt;li>Иногда Windows отправляет запросы на синхронизацию в симметричном активном режиме (например, контроллеры домена Windows Server).&lt;/li>
&lt;li>Зачастую серверы NTP отвечают только на запросы от клиентов, а не серверов.&lt;/li>
&lt;/ul>
&lt;h3 id="решение">&lt;span class="section-num">1.3&lt;/span> Решение&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>В командной строке (с правами администратора) наберите:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">w32tm /config /manualpeerlist:pool.ntp.org,0x8 /syncfromflags:MANUAL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net stop w32time
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net start w32time
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">w32tm /resync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>0x08&lt;/code> задаёт режим клиента.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Начальная конфигурация коммутатора Cisco</title><link>https://yamadharma.github.io/ru/post/2022/11/15/initial-cisco-switch-configuration/</link><pubDate>Tue, 15 Nov 2022 14:51:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/11/15/initial-cisco-switch-configuration/</guid><description>&lt;p>Начальная конфигурация коммутатора Cisco Catalist.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#подготовка">&lt;span class="section-num">1&lt;/span> Подготовка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#базовая-конфигурация">&lt;span class="section-num">2&lt;/span> Базовая конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#включение">&lt;span class="section-num">2.1&lt;/span> Включение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переход-в-привилегированный-режим">&lt;span class="section-num">2.2&lt;/span> Переход в привилегированный режим&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переход-в-режим-конфигурации">&lt;span class="section-num">2.3&lt;/span> Переход в режим конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#шифрование-паролей">&lt;span class="section-num">2.4&lt;/span> Шифрование паролей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#административный-доступ">&lt;span class="section-num">2.5&lt;/span> Административный доступ&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-нового-режима-аутентификации">&lt;span class="section-num">2.6&lt;/span> Настройка нового режима аутентификации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#административный-пользователь">&lt;span class="section-num">2.7&lt;/span> Административный пользователь&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удалённый-доступ">&lt;span class="section-num">2.8&lt;/span> Удалённый доступ&lt;/a>&lt;/li>
&lt;li>&lt;a href="#зададим-имя-устройства">&lt;span class="section-num">2.9&lt;/span> Зададим имя устройства&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-ssh">&lt;span class="section-num">2.10&lt;/span> Настройка ssh&lt;/a>&lt;/li>
&lt;li>&lt;a href="#поднимем-интерфейсы">&lt;span class="section-num">2.11&lt;/span> Поднимем интерфейсы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сетевые-настройки">&lt;span class="section-num">2.12&lt;/span> Сетевые настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-vtp">&lt;span class="section-num">2.13&lt;/span> Настройка vtp&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-lldp">&lt;span class="section-num">2.14&lt;/span> Настройка lldp&lt;/a>&lt;/li>
&lt;li>&lt;a href="#безопасность">&lt;span class="section-num">2.15&lt;/span> Безопасность&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-других-портов">&lt;span class="section-num">2.16&lt;/span> Настройка других портов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сохранение-конфигурации">&lt;span class="section-num">2.17&lt;/span> Сохранение конфигурации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#добавление-в-dns">&lt;span class="section-num">3&lt;/span> Добавление в DNS&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#nsupdate">&lt;span class="section-num">3.1&lt;/span> nsupdate&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подключение-к-системе-мониторинга">&lt;span class="section-num">4&lt;/span> Подключение к системе мониторинга&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подключение-к-observium">&lt;span class="section-num">4.1&lt;/span> Подключение к Observium&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-к-librenms">&lt;span class="section-num">4.2&lt;/span> Подключение к Librenms&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="подготовка">&lt;span class="section-num">1&lt;/span> Подготовка&lt;/h2>
&lt;ul>
&lt;li>На Linux для конфигурации используется Minicom.&lt;/li>
&lt;li>Запускайте по пользователем &lt;code>root&lt;/code>.&lt;/li>
&lt;li>Для первоначальной конфигурации задайте ключ &lt;code>-s&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">minicom -s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выставите параметры Скорость/Четность/Биты (Bps/Par/Bits) = 9600 8N1.&lt;/li>
&lt;li>Укажите последовательный порт:
&lt;ul>
&lt;li>последовательный порт: &lt;code>/dev/ttyS[0-3]&lt;/code>;&lt;/li>
&lt;li>порт USB: &lt;code>/dev/ttyUSB0&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Итоговая конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">A - Последовательный порт : /dev/ttyUSB0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">B - Размещение lock-файла : /var/lock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">C - Программа при выходе :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">D - Программа при запуске :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">E - Скорость/Чётность/Биты : 9600 8N1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">F - Аппаратное управление потоком : Да
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">G - Программное управление потоком : Нет
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После изменений в меню выбрать &amp;ldquo;Сохранить настройки как dfl&amp;rdquo; или под своим именем.&lt;/li>
&lt;/ul>
&lt;h2 id="базовая-конфигурация">&lt;span class="section-num">2&lt;/span> Базовая конфигурация&lt;/h2>
&lt;h3 id="включение">&lt;span class="section-num">2.1&lt;/span> Включение&lt;/h3>
&lt;ul>
&lt;li>При первом включении, после долгой загрузки коммутатор выдает предложение запустить диалог стартовой конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">Would you like to enter the initial configuration dialog? [yes/no]:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Следует отказаться и выполнить конфигурацию вручную, поэтому отвечаем &lt;code>no&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="переход-в-привилегированный-режим">&lt;span class="section-num">2.2&lt;/span> Переход в привилегированный режим&lt;/h3>
&lt;ul>
&lt;li>Получаем приглашение &lt;code>Switch&amp;gt;&lt;/code>.&lt;/li>
&lt;li>Переходим в привилегированный режим командой &lt;code>enable&lt;/code>.&lt;/li>
&lt;li>Приглашение меняется на &lt;code>#&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&amp;gt;enable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch#
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="переход-в-режим-конфигурации">&lt;span class="section-num">2.3&lt;/span> Переход в режим конфигурации&lt;/h3>
&lt;ul>
&lt;li>Перейдём в режим конфигурации коммутатора:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch#configure terminal
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="шифрование-паролей">&lt;span class="section-num">2.4&lt;/span> Шифрование паролей&lt;/h3>
&lt;ul>
&lt;li>Установим шифрование паролей, хранящиеся в устройстве в открытом виде:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#service password-encryption&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="административный-доступ">&lt;span class="section-num">2.5&lt;/span> Административный доступ&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Зададим пароль на &lt;em>enable&lt;/em>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#enable secret &amp;lt;пароль&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>secret&lt;/code> : указывает на то, что пароль будет храниться в зашифрованном виде&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>После оператора &lt;code>secret&lt;/code> можно задать представление пароля:&lt;/p>
&lt;ul>
&lt;li>&lt;code>0&lt;/code> : незашифрованный текстовый пароль; используется по умолчанию, поэтому не обязателен;&lt;/li>
&lt;li>&lt;code>4&lt;/code> : используется хеш SHA-256; считается устаревшим;&lt;/li>
&lt;li>&lt;code>5&lt;/code> : используется хеш MD5;&lt;/li>
&lt;li>&lt;code>8&lt;/code> : используется хеш SHA-256;&lt;/li>
&lt;li>&lt;code>9&lt;/code> : используется алгоритм &lt;code>scrypt&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-нового-режима-аутентификации">&lt;span class="section-num">2.6&lt;/span> Настройка нового режима аутентификации&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Настроим режим &lt;em>aaa&lt;/em> (authentication, authorization, accounting):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#aaa new-model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#aaa authentication login default local&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Настроим подключение по консоли:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#line console 0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#login authentication default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#no password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Консоль настроена на использование локальной базы данных имён пользователей и паролей.&lt;/li>
&lt;li>&lt;code>no password&lt;/code> : удалить старую модель паролей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="административный-пользователь">&lt;span class="section-num">2.7&lt;/span> Административный пользователь&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Зададим пользователя admin и пароль для него:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#username admin privilege 1 secret &amp;lt;пароль&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>privelege&lt;/code> : уровень привилегий для данного пользователя от 0 до 15 (15 самый высокий);&lt;/li>
&lt;li>&lt;code>secret&lt;/code> : пароль будет храниться в зашифрованном виде.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="удалённый-доступ">&lt;span class="section-num">2.8&lt;/span> Удалённый доступ&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Не во всех поставках IOS есть поддержка &lt;em>ssh&lt;/em>. Поэтому приходится использовать &lt;em>telnet&lt;/em>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Настроим порядок аутентификации по &lt;em>telnet&lt;/em>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Настроим подключение по терминальным линиям.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#line vty 0 4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#login authentication default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#transport input telnet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#no password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#line vty 5 15&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#login authentication default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#transport input telnet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#no password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Терминальные линии, включая telnet, настроены на использование одной и той же локальной базы данных имён пользователей и паролей.&lt;/li>
&lt;li>&lt;code>no password&lt;/code> : удалить старую модель паролей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="зададим-имя-устройства">&lt;span class="section-num">2.9&lt;/span> Зададим имя устройства&lt;/h3>
&lt;ul>
&lt;li>Имя устройства имеет вид: sw-&amp;lt;помещение&amp;gt;-&amp;lt;номер устройства&amp;gt;, например &lt;code>sw-103-1&lt;/code>.&lt;/li>
&lt;li>Зададим имя устройства:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Switch&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#hostname sw-103-1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip domain-name example.com&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-ssh">&lt;span class="section-num">2.10&lt;/span> Настройка ssh&lt;/h3>
&lt;ul>
&lt;li>Если устройство поддерживает ssh, то стоит его настроить.&lt;/li>
&lt;li>Создадим ключ (необходимо, чтобы было настроено имя домена):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#crypto key generate rsa modulus 2048&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Задаёт версию протокола для ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip ssh version 2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Указываем время таймаута до автоматического закрытия SSH сессии в 60 минут:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip ssh time-out 60&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сбрасываем подключение после 3 неверных паролей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip ssh authentication-retries 3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Задаём протокол для подключения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#line vty 0 4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#transport input ssh&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно также оставить и telnet:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#line vty 0 4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-line&lt;span class="o">)&lt;/span>&lt;span class="c1">#transport input all&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="поднимем-интерфейсы">&lt;span class="section-num">2.11&lt;/span> Поднимем интерфейсы&lt;/h3>
&lt;ul>
&lt;li>Сделаем последний порт транковым:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#interface gigabitEthernet1/0/48&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if-range&lt;span class="o">)&lt;/span>&lt;span class="c1">#switchport mode trunk&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if-range&lt;span class="o">)&lt;/span>&lt;span class="c1">#exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="сетевые-настройки">&lt;span class="section-num">2.12&lt;/span> Сетевые настройки&lt;/h3>
&lt;ul>
&lt;li>Зададим адрес 192.168.0.1/24, шлюз 192.168.0.254:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#interface vlan1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1">#no shutdown&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip address 192.168.0.1 255.255.255.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1">#exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip default-gateway 192.168.0.254&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроим клиента DNS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ip name-server 192.168.0.254&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроим NTP:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#ntp server pool.ntp.org&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверим статус синхронизации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1#sh ntp status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-vtp">&lt;span class="section-num">2.13&lt;/span> Настройка vtp&lt;/h3>
&lt;ul>
&lt;li>Настройте vtp:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#vtp mode client&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте статус vtp:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1#sh vtp status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-lldp">&lt;span class="section-num">2.14&lt;/span> Настройка lldp&lt;/h3>
&lt;ul>
&lt;li>Если в сети присутствует не только оборудование Cisco, то есть смысл подключить поддержку протокола lldp:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#lldp run&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="безопасность">&lt;span class="section-num">2.15&lt;/span> Безопасность&lt;/h3>
&lt;ul>
&lt;li>Отключим сервер http:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#no ip http server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#no ip http secure-server&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-других-портов">&lt;span class="section-num">2.16&lt;/span> Настройка других портов&lt;/h3>
&lt;ul>
&lt;li>Настроим другие порты для подключения клиентских устройств:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#interface range GigabitEthernet1/0/1 - 46&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if-range&lt;span class="o">)&lt;/span>&lt;span class="c1">#switchport mode access&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if-range&lt;span class="o">)&lt;/span>&lt;span class="c1">#switchport access vlan 100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config-if-range&lt;span class="o">)&lt;/span>&lt;span class="c1">#exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="сохранение-конфигурации">&lt;span class="section-num">2.17&lt;/span> Сохранение конфигурации&lt;/h3>
&lt;ul>
&lt;li>Сохраните конфигурацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1#write mem
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="добавление-в-dns">&lt;span class="section-num">3&lt;/span> Добавление в DNS&lt;/h2>
&lt;ul>
&lt;li>Необходимо добавить коммутатор в DNS.&lt;/li>
&lt;/ul>
&lt;h3 id="nsupdate">&lt;span class="section-num">3.1&lt;/span> nsupdate&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/28/nsupdate-dynamic-dns-editor/">nsupdate: динамический редактор зон DNS&lt;/a>&lt;/li>
&lt;li>Добавьте адрес коммутатора в DNS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;update add sw-103-1.example.com 86400 a 192.168.0.1\nshow\nsend&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> nsupdate -v -k /etc/named/keys/example.com.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="подключение-к-системе-мониторинга">&lt;span class="section-num">4&lt;/span> Подключение к системе мониторинга&lt;/h2>
&lt;ul>
&lt;li>Настройте доступ к SNMP.&lt;/li>
&lt;li>Пусть сервер мониторинга имеет адрес: 192.168.0.5.&lt;/li>
&lt;li>Имя коммьюнити для чтения: rocom.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#access-list 90 permit 192.168.0.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sw-103-1&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1">#snmp-server community rocom RO 90&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавьте коммутатор в свой DNS.&lt;/li>
&lt;/ul>
&lt;h3 id="подключение-к-observium">&lt;span class="section-num">4.1&lt;/span> Подключение к Observium&lt;/h3>
&lt;ul>
&lt;li>Подключитесь к Observium.&lt;/li>
&lt;li>Добавьте коммутатор в список наблюдения в Observium:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@observium ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># /opt/observium/add_device.php sw-103-1 rocom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@observium ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># /opt/observium/discovery.php -h sw-103-1; /opt/observium/poller.php -h sw-103-1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="подключение-к-librenms">&lt;span class="section-num">4.2&lt;/span> Подключение к Librenms&lt;/h3>
&lt;ul>
&lt;li>Подключитесь к Librenms (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/03/20/librenms-monitoring-system/">Система мониторинга LibreNMS&lt;/a>).&lt;/li>
&lt;li>Добавьте коммутатор в список наблюдения в Librenms:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u librenms /usr/local/bin/lnms device:add sw-103-1 -c rocom
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -u librenms /usr/local/bin/lnms device:poll sw-103-1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если есть в базе данное устройство, но под другим именем, то можно его переименовать:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo -u librenms /usr/local/bin/lnms device:rename &amp;lt;old hostname&amp;gt; &amp;lt;new hostname&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>Установка пароля может быть выполнена двумя командами &lt;code>password&lt;/code> и &lt;code>secret&lt;/code>. В первом случае пароль хранится в конфигурационном файле в открытом виде, а во втором в зашифрованном. Если использовалась команда &lt;code>password&lt;/code>, необходимо зашифровать пароли, хранящиеся в устройстве в открытом виде с помощью команды &lt;code>service password-encryption&lt;/code> в режиме глобальной конфигурации.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Язык программирования HCL</title><link>https://yamadharma.github.io/ru/post/2022/11/05/hcl-programming-language/</link><pubDate>Sat, 05 Nov 2022 18:03:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/11/05/hcl-programming-language/</guid><description>&lt;p>Язык конфигурации HashiCorp (HCL &amp;mdash; HashiCorp Configuration Language).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>HCL &amp;mdash; это язык программирования, разработанный HashiCorp.&lt;/li>
&lt;li>HCL используется для настройки программных сред и программных библиотек.&lt;/li>
&lt;li>Синтаксис HCL: &lt;a href="https://github.com/hashicorp/hcl/blob/main/hclsyntax/spec.md" target="_blank" rel="noopener">https://github.com/hashicorp/hcl/blob/main/hclsyntax/spec.md&lt;/a>.&lt;/li>
&lt;/ul></description></item><item><title>Packer</title><link>https://yamadharma.github.io/ru/post/2022/10/30/packer/</link><pubDate>Sun, 30 Oct 2022 19:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/10/30/packer/</guid><description>&lt;p>Утилита для создания образов операционных систем Packer.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#лицензия">&lt;span class="section-num">1.1&lt;/span> Лицензия&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#необходимое-программное-обеспечение">&lt;span class="section-num">2&lt;/span> Необходимое программное обеспечение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#virtualbox">&lt;span class="section-num">2.1&lt;/span> Virtualbox&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vmware">&lt;span class="section-num">2.2&lt;/span> VmWare&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vmware-open-vm-tools">&lt;span class="section-num">2.3&lt;/span> VMware open-vm-tools&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">3.1&lt;/span> Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">3.2&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#скрипты-развёртывания">&lt;span class="section-num">4&lt;/span> Скрипты развёртывания&lt;/a>&lt;/li>
&lt;li>&lt;a href="#плагины">&lt;span class="section-num">5&lt;/span> Плагины&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#vagrant">&lt;span class="section-num">5.1&lt;/span> Vagrant&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">5.1.1&lt;/span> Установка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#virtualbox">&lt;span class="section-num">5.2&lt;/span> Virtualbox&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">5.2.1&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#компоненты">&lt;span class="section-num">5.2.2&lt;/span> Компоненты&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#примеры-скриптов-развёртывания">&lt;span class="section-num">6&lt;/span> Примеры скриптов развёртывания&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-rocky-linux-9-dot-4">&lt;span class="section-num">6.1&lt;/span> Установка Rocky Linux 9.4&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.packer.io/" target="_blank" rel="noopener">https://www.packer.io/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/hashicorp/packer" target="_blank" rel="noopener">https://github.com/hashicorp/packer&lt;/a>.&lt;/li>
&lt;li>Бинарные сборки: &lt;a href="https://releases.hashicorp.com/packer" target="_blank" rel="noopener">https://releases.hashicorp.com/packer&lt;/a> (на данный момент не доступно из России).&lt;/li>
&lt;li>Зеркало бинарных сборок:
&lt;ul>
&lt;li>&lt;a href="https://hashicorp-releases.yandexcloud.net/packer/" target="_blank" rel="noopener">https://hashicorp-releases.yandexcloud.net/packer/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://hashicorp-releases.mcs.mail.ru/packer/" target="_blank" rel="noopener">https://hashicorp-releases.mcs.mail.ru/packer/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://sourceforge.net/projects/packer.mirror/files/" target="_blank" rel="noopener">https://sourceforge.net/projects/packer.mirror/files/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="лицензия">&lt;span class="section-num">1.1&lt;/span> Лицензия&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/21/hashicorp-changes-license/">Смена лицензии HashiCorp&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="необходимое-программное-обеспечение">&lt;span class="section-num">2&lt;/span> Необходимое программное обеспечение&lt;/h2>
&lt;h3 id="virtualbox">&lt;span class="section-num">2.1&lt;/span> Virtualbox&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/17/virtualbox-virtualization-system/">Система виртуализации VirtualBox&lt;/a>&lt;/li>
&lt;li>Необходимо для создания образов для VirtualBox.&lt;/li>
&lt;li>Особенности: Использование драйверов под операционную систему (VBoxGuestAdditions)&lt;/li>
&lt;/ul>
&lt;h3 id="vmware">&lt;span class="section-num">2.2&lt;/span> VmWare&lt;/h3>
&lt;ul>
&lt;li>Необходимо для создания образов для Vmware.&lt;/li>
&lt;/ul>
&lt;h3 id="vmware-open-vm-tools">&lt;span class="section-num">2.3&lt;/span> VMware open-vm-tools&lt;/h3>
&lt;ul>
&lt;li>Необходимо для создания образов для Vmware.&lt;/li>
&lt;li>Предоставляет набор утилит и драйверов виртуализации с открытым исходным кодом для улучшения функциональности и удобства виртуализации в рамках виртуализации VMware.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/vmware/open-vm-tools" target="_blank" rel="noopener">https://github.com/vmware/open-vm-tools&lt;/a>&lt;/li>
&lt;li>Сайт: &lt;a href="https://sourceforge.net/projects/open-vm-tools/" target="_blank" rel="noopener">https://sourceforge.net/projects/open-vm-tools/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/h2>
&lt;h3 id="linux">&lt;span class="section-num">3.1&lt;/span> Linux&lt;/h3>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge dev-util/packer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="windows">&lt;span class="section-num">3.2&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>Установка с помощью Chocolatey (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install packer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="скрипты-развёртывания">&lt;span class="section-num">4&lt;/span> Скрипты развёртывания&lt;/h2>
&lt;ul>
&lt;li>Ранее использовался язык описания JSON.&lt;/li>
&lt;li>После &lt;em>Packer-1.5&lt;/em> используется формат HCL2.&lt;/li>
&lt;/ul>
&lt;h2 id="плагины">&lt;span class="section-num">5&lt;/span> Плагины&lt;/h2>
&lt;ul>
&lt;li>Ранее код плагинов был включён в packer.&lt;/li>
&lt;li>Сейчас их необходимо устанавливать отдельно.&lt;/li>
&lt;/ul>
&lt;h3 id="vagrant">&lt;span class="section-num">5.1&lt;/span> Vagrant&lt;/h3>
&lt;ul>
&lt;li>Документация: &lt;a href="https://developer.hashicorp.com/packer/integrations/hashicorp/vagrant" target="_blank" rel="noopener">https://developer.hashicorp.com/packer/integrations/hashicorp/vagrant&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/hashicorp/packer-plugin-vagrant" target="_blank" rel="noopener">https://github.com/hashicorp/packer-plugin-vagrant&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="установка">&lt;span class="section-num">5.1.1&lt;/span> Установка&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Добавьте код в конфигурацию packer&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="k">packer&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">required_plugins&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vagrant&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;~&amp;gt; 1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;github.com/hashicorp/vagrant&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Инициализируйте packer:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">packer init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Можно установить из командной строки:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">packer plugins install github.com/hashicorp/vagrant
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="virtualbox">&lt;span class="section-num">5.2&lt;/span> Virtualbox&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/hashicorp/packer-plugin-virtualbox" target="_blank" rel="noopener">https://github.com/hashicorp/packer-plugin-virtualbox&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://developer.hashicorp.com/packer/integrations/hashicorp/virtualbox" target="_blank" rel="noopener">https://developer.hashicorp.com/packer/integrations/hashicorp/virtualbox&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="установка">&lt;span class="section-num">5.2.1&lt;/span> Установка&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Добавьте код в конфигурацию packer&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="k">packer&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">required_plugins&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> virtualbox&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;~&amp;gt; 1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;github.com/hashicorp/virtualbox&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Инициализируйте packer:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">packer init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Можно установить из командной строки:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">packer plugins install github.com/hashicorp/virtualbox
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="компоненты">&lt;span class="section-num">5.2.2&lt;/span> Компоненты&lt;/h4>
&lt;ul>
&lt;li>Плагин поставляется с несколькими сборщиками, способными создавать VirtualBox:
&lt;ul>
&lt;li>&lt;code>virtualbox-iso&lt;/code>:
&lt;ul>
&lt;li>запускается с ISO файла,&lt;/li>
&lt;li>создаёт новую виртуальную машину VirtualBox,&lt;/li>
&lt;li>устанавливает ОС,&lt;/li>
&lt;li>подготавливает программное обеспечение в ОС,&lt;/li>
&lt;li>экспортирует эту машину для создания образа.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>virtualbox-ovf&lt;/code>:
&lt;ul>
&lt;li>импортирует существующий файл OVF/OVA;&lt;/li>
&lt;li>запускает средства подготовки поверх этой виртуальной машины;&lt;/li>
&lt;li>экспортирует машину для создания образа.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>virtualbox-vm&lt;/code>:
&lt;ul>
&lt;li>использует существующую виртуальную машину для запуска определённых поставщиков поверх этой виртуальной машины;&lt;/li>
&lt;li>при необходимости, создает снимок для сохранения изменений, внесенных поставщиками услуг;&lt;/li>
&lt;li>может экспортировать эту машину для создания образа.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="примеры-скриптов-развёртывания">&lt;span class="section-num">6&lt;/span> Примеры скриптов развёртывания&lt;/h2>
&lt;h3 id="установка-rocky-linux-9-dot-4">&lt;span class="section-num">6.1&lt;/span> Установка Rocky Linux 9.4&lt;/h3>
&lt;ul>
&lt;li>Скрипт &lt;code>vagrant-rocky.pkr.hcl&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="k">packer&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">required_plugins&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vagrant&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;github.com/hashicorp/vagrant&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;~&amp;gt; 1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> virtualbox&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;~&amp;gt; 1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;github.com/hashicorp/virtualbox&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;artifact_description&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Rocky 9.4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;artifact_version&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;9.4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;disk_size&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;61440&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;iso_checksum&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ee3ac97fdffab58652421941599902012179c37535aece76824673105169c4a2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;iso_checksum_type&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;sha256&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;iso_url&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Rocky-9.4-x86_64-minimal.iso&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;redhat_platform&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;x86_64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;redhat_release&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;9&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;ssh_password&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;vagrant&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;ssh_username&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;vagrant&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">source&lt;/span> &lt;span class="s2">&amp;#34;virtualbox-iso&amp;#34; &amp;#34;virtualbox&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> boot_command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;lt;esc&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;lt;wait&amp;gt;&amp;lt;esc&amp;gt;&amp;lt;esc&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> &amp;#34;linux inst.ks&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">http://{{.HTTPIP}}:{{.HTTPPort}}/ks.cfg biosdevname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">0 net.ifnames&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;lt;enter&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> boot_wait&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;30s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> disk_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.disk_size}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> export_opts&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--manifest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--vsys&amp;#34;, &amp;#34;0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--description&amp;#34;, &amp;#34;${var.artifact_description}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--version&amp;#34;, &amp;#34;${var.artifact_version}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> guest_additions_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;VBoxGuestAdditions.iso&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> guest_os_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;RedHat_64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> hard_drive_interface&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;sata&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> http_directory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${path.root}/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> iso_checksum&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.iso_checksum_type}:${var.iso_checksum}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> iso_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.iso_url}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> output_directory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;builds&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> shutdown_command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;sudo -S /sbin/halt -h -p&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> shutdown_timeout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;5m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.ssh_password}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;${var.ssh_username}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_pty&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ssh_timeout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;60m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vboxmanage&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;modifyvm&amp;#34;, &amp;#34;{{.Name}}&amp;#34;, &amp;#34;--memory&amp;#34;, &amp;#34;2048&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;modifyvm&amp;#34;, &amp;#34;{{.Name}}&amp;#34;, &amp;#34;--cpus&amp;#34;, &amp;#34;2&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;modifyvm&amp;#34;, &amp;#34;{{.Name}}&amp;#34;, &amp;#34;--nat-localhostreachable1&amp;#34;, &amp;#34;on&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> virtualbox_version_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;.vbox_version&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vm_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;packer-rocky-virtualbox-vm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">build&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> sources&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;source.virtualbox-iso.virtualbox&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">provisioner&lt;/span> &lt;span class="s2">&amp;#34;shell&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> execute_command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;echo &amp;#39;packer&amp;#39;|{{ .Vars }} sudo -S -E bash &amp;#39;{{ .Path }}&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> inline&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sleep 30&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y install epel-release&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y groupinstall &amp;#39;Development Tools&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y install kernel-devel&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y install dkms&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo mkdir /tmp/vboxguest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo mount -t iso9660 -o loop /home/vagrant/VBoxGuestAdditions.iso /tmp/vboxguest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;cd /tmp/vboxguest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo ./VBoxLinuxAdditions.run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;cd /tmp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo umount /tmp/vboxguest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo rmdir /tmp/vboxguest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;rm /home/vagrant/VBoxGuestAdditions.iso&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo systemctl enable --now vboxadd.service&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y install lightdm&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf -y groupinstall &amp;#39;Server with GUI&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo dnf install -y mc htop tmux&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sudo systemctl set-default graphical.target&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;echo Image Provisioned!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">post&lt;/span>&lt;span class="err">-&lt;/span>&lt;span class="k">processor&lt;/span> &lt;span class="s2">&amp;#34;vagrant&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> compression_level&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;6&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> output&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;vagrant-virtualbox-rocky-${var.redhat_release}-${var.redhat_platform}.box&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Makefile&lt;/code> для Virtualbox:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-makefile" data-lang="makefile">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">.PHONY&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">all&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">help&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">init&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Install missing plugins for packer
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @mkdir -p &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="s2">&amp;#34;/.config/packer/plugins&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @export &lt;span class="nv">PACKER_CONFIG_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="s2">&amp;#34;/.config/packer&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">PACKER_PLUGIN_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="s2">&amp;#34;/.config/packer/plugins&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> packer init vagrant-rocky.pkr.hcl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">box&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">init&lt;/span> &lt;span class="c">## Build box for Rocky Linux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> -@VBoxManage setproperty language C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @VBoxManage setproperty machinefolder &lt;span class="s2">&amp;#34;`pwd`&amp;#34;&lt;/span>/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @export &lt;span class="nv">TMPDIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">PACKER_CONFIG_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="s2">&amp;#34;/.config/packer&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">PACKER_PLUGIN_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="s2">&amp;#34;/.config/packer/plugins&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> packer build -only&lt;span class="o">=&lt;/span>virtualbox-iso.virtualbox vagrant-rocky.pkr.hcl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @VBoxManage setproperty machinefolder default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">help&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39;Usage:&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39; make &amp;lt;target&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39;Targets:&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @grep -E &lt;span class="s1">&amp;#39;^[a-zA-Z_0-9.-]+:.*?## .*$$&amp;#39;&lt;/span> &lt;span class="k">$(&lt;/span>MAKEFILE_LIST&lt;span class="k">)&lt;/span> &lt;span class="p">|&lt;/span> sort &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;BEGIN {FS = &amp;#34;:.*?## &amp;#34;}; {printf &amp;#34; \033[36m%-30s\033[0m %s\n&amp;#34;, $$1, $$2}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Makefile&lt;/code> для Vmware:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-makefile" data-lang="makefile">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">.PHONY&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">all&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">init&lt;/span> &lt;span class="n">box&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">init&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Install missing plugins for packer
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @packer init vagrant-rocky.pkr.hcl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">box&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="c">## Build box for Rocky Linux
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> @export &lt;span class="nv">TMPDIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="nb">pwd&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">export&lt;/span> &lt;span class="nv">LANG&lt;/span>&lt;span class="o">=&lt;/span>C&lt;span class="p">;&lt;/span> packer build -only&lt;span class="o">=&lt;/span>vmware-iso.vmware vagrant-rocky.pkr.hcl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">help&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39;Usage:&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39; make &amp;lt;target&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo &lt;span class="s1">&amp;#39;Targets:&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @grep -E &lt;span class="s1">&amp;#39;^[a-zA-Z_0-9.-]+:.*?## .*$$&amp;#39;&lt;/span> &lt;span class="k">$(&lt;/span>MAKEFILE_LIST&lt;span class="k">)&lt;/span> &lt;span class="p">|&lt;/span> sort &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;BEGIN {FS = &amp;#34;:.*?## &amp;#34;}; {printf &amp;#34; \033[36m%-30s\033[0m %s\n&amp;#34;, $$1, $$2}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @echo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Управление файлами конфигурации. Домашний каталог. Chezmoi</title><link>https://yamadharma.github.io/ru/post/2022/10/28/configuration-file-management-chezmoi/</link><pubDate>Fri, 28 Oct 2022 19:49:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/10/28/configuration-file-management-chezmoi/</guid><description>&lt;p>Использование &lt;code>chezmoi&lt;/code> для управления файлами конфигурации домашнего каталога пользователя.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-chezmoi">&lt;span class="section-num">3&lt;/span> Конфигурация &lt;code>chezmoi&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#рабочие-файлы">&lt;span class="section-num">3.1&lt;/span> Рабочие файлы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#автоматически-создавать-файл-конфигурации-на-новой-машине">&lt;span class="section-num">3.2&lt;/span> Автоматически создавать файл конфигурации на новой машине&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пересоздание-файл-конфигурации">&lt;span class="section-num">3.3&lt;/span> Пересоздание файл конфигурации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#шаблоны">&lt;span class="section-num">4&lt;/span> Шаблоны&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#данные-шаблона">&lt;span class="section-num">4.2&lt;/span> Данные шаблона&lt;/a>&lt;/li>
&lt;li>&lt;a href="#способы-создания-файла-шаблона">&lt;span class="section-num">4.3&lt;/span> Способы создания файла шаблона&lt;/a>&lt;/li>
&lt;li>&lt;a href="#редактирование-файла-шаблона">&lt;span class="section-num">4.4&lt;/span> Редактирование файла шаблона&lt;/a>&lt;/li>
&lt;li>&lt;a href="#тестирование-шаблонов">&lt;span class="section-num">4.5&lt;/span> Тестирование шаблонов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синтаксис-шаблона">&lt;span class="section-num">4.6&lt;/span> Синтаксис шаблона&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#удаление-пробелов">&lt;span class="section-num">4.6.1&lt;/span> Удаление пробелов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отладка-шаблона">&lt;span class="section-num">4.6.2&lt;/span> Отладка шаблона&lt;/a>&lt;/li>
&lt;li>&lt;a href="#логические-операции">&lt;span class="section-num">4.6.3&lt;/span> Логические операции&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#переменные-шаблона">&lt;span class="section-num">4.7&lt;/span> Переменные шаблона&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование-chezmoi">&lt;span class="section-num">5&lt;/span> Использование &lt;code>chezmoi&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#первоначальная-настройка-на-первичном-хосте">&lt;span class="section-num">5.1&lt;/span> Первоначальная настройка на первичном хосте&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозиторий-на-github">&lt;span class="section-num">5.2&lt;/span> Репозиторий на github&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование-chezmoi-на-нескольких-машинах">&lt;span class="section-num">5.3&lt;/span> Использование chezmoi на нескольких машинах&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-новой-машины-с-помощью-одной-команды">&lt;span class="section-num">5.4&lt;/span> Настройка новой машины с помощью одной команды&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ежедневные-операции-c-chezmoi">&lt;span class="section-num">5.5&lt;/span> Ежедневные операции c &lt;code>chezmoi&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#извлеките-последние-изменения-из-репозитория-и-примените-их">&lt;span class="section-num">5.5.1&lt;/span> Извлеките последние изменения из репозитория и примените их&lt;/a>&lt;/li>
&lt;li>&lt;a href="#извлеките-последние-изменения-из-своего-репозитория-и-посмотрите-что-изменится-фактически-не-применяя-изменения">&lt;span class="section-num">5.5.2&lt;/span> Извлеките последние изменения из своего репозитория и посмотрите, что изменится, фактически не применяя изменения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#автоматически-фиксируйте-и-отправляйте-изменения-в-репозиторий">&lt;span class="section-num">5.5.3&lt;/span> Автоматически фиксируйте и отправляйте изменения в репозиторий&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.chezmoi.io/" target="_blank" rel="noopener">https://www.chezmoi.io/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/twpayne/chezmoi" target="_blank" rel="noopener">https://github.com/twpayne/chezmoi&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Установка бинарного файла. Скрипт определяет архитектуру процессора и операционную систему и скачивает необходимый файл:
&lt;ul>
&lt;li>
&lt;p>с помощью &lt;code>curl&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sh -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>curl -fsLS chezmoi.io/get&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>с помощью &lt;code>wget&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sh -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>wget -qO- chezmoi.io/get&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>с помощью PowerShell:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>iwr -UseBasicParsing https://chezmoi.io/get.ps1&lt;span class="o">)&lt;/span>.Content &lt;span class="p">|&lt;/span> powershell -c -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Linux
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>overlay &lt;em>ace&lt;/em> (&lt;a href="https://github.com/ananace/overlay" target="_blank" rel="noopener">https://github.com/ananace/overlay&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge chezmoi-bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Fedora
&lt;ul>
&lt;li>Установка через &lt;em>Snap&lt;/em>:
&lt;ul>
&lt;li>Установите &lt;em>Snap&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install snapd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Либо выйдите из системы, либо снова войдите в нее, либо перезагрузите систему, чтобы убедиться, что пути snap обновлены правильно.&lt;/li>
&lt;li>Включите поддержку классического варианта snap:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -s /var/lib/snapd/snap /snap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите chezmoi:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">snap install chezmoi --classic
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Windows
&lt;ul>
&lt;li>установка посредством Chocolatey (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install chezmoi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация-chezmoi">&lt;span class="section-num">3&lt;/span> Конфигурация &lt;code>chezmoi&lt;/code>&lt;/h2>
&lt;h3 id="рабочие-файлы">&lt;span class="section-num">3.1&lt;/span> Рабочие файлы&lt;/h3>
&lt;ul>
&lt;li>Состояние файлов конфигурации сохраняется в каталоге
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">~/.local/share/chezmoi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Он является клоном вашего репозитория &lt;code>dotfiles&lt;/code>.&lt;/li>
&lt;li>Файл конфигурации &lt;code>~/.config/chezmoi/chezmoi.toml&lt;/code> (можно использовать также JSON или YAML) специфичен для локальной машины.&lt;/li>
&lt;li>Файлы, содержимое которых одинаково на всех ваших машинах, дословно копируются из исходного каталога.&lt;/li>
&lt;li>Файлы, которые варьируются от машины к машине, выполняются как шаблоны, обычно с использованием данных из файла конфигурации локальной машины для настройки конечного содержимого, специфичного для локальной машины.&lt;/li>
&lt;li>При запуске
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi apply
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>вычисляется желаемое содержимое и разрешения для каждого файла, а затем вносит необходимые изменения, чтобы ваши файлы соответствовали этому состоянию.&lt;/li>
&lt;li>По умолчанию chezmoi изменяет файлы только в рабочей копии.&lt;/li>
&lt;/ul>
&lt;h3 id="автоматически-создавать-файл-конфигурации-на-новой-машине">&lt;span class="section-num">3.2&lt;/span> Автоматически создавать файл конфигурации на новой машине&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>При выполнении &lt;code>chezmoi init&lt;/code> также может автоматически создать файл конфигурации, если он еще не существует.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Если ваш репозиторий содержит файл с именем &lt;code>.chezmoi.$FORMAT.tmpl&lt;/code>, где &lt;code>$FORMAT&lt;/code> есть один из поддерживаемых форматов файла конфигурации (&lt;code>json&lt;/code>, &lt;code>toml&lt;/code>, или &lt;code>yaml&lt;/code>), то &lt;code>chezmoi init&lt;/code> выполнит этот шаблон для создания исходного файла конфигурации.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Например, пусть &lt;code>~/.local/share/chezmoi/.chezmoi.toml.tmpl&lt;/code> выглядит так:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="nx">-&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="nx">email&lt;/span> &lt;span class="err">:&lt;/span>&lt;span class="p">=&lt;/span> &lt;span class="nx">promptStringOnce&lt;/span> &lt;span class="p">.&lt;/span> &lt;span class="s2">&amp;#34;email&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Email address&amp;#34;&lt;/span> &lt;span class="nx">-&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">email&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">{{&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="nx">email&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="nx">quote&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>При выполнении &lt;code>chezmoi init&lt;/code> будет создан конфигурационный файл &lt;code>~/.config/chezmoi/chezmoi.toml&lt;/code>.&lt;/li>
&lt;li>&lt;code>promptStringOnce&lt;/code> &amp;mdash; это специальная функция, которая запрашивает у пользователя значение, если оно еще не установлено в разделе &lt;code>data&lt;/code> конфигурационного файла.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Чтобы протестировать этот шаблон, используйте &lt;code>chezmoi execute-template&lt;/code> с флагами &lt;code>--init&lt;/code> и &lt;code>--promptString&lt;/code>, например:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi execute-template --init --promptString &lt;span class="nv">email&lt;/span>&lt;span class="o">=&lt;/span>me@home.org &amp;lt; ~/.local/share/chezmoi/.chezmoi.toml.tmpl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="пересоздание-файл-конфигурации">&lt;span class="section-num">3.3&lt;/span> Пересоздание файл конфигурации&lt;/h3>
&lt;ul>
&lt;li>Если вы измените шаблон файла конфигурации, &lt;code>chezmoi&lt;/code> предупредит вас, если ваш текущий файл конфигурации не был сгенерирован из этого шаблона.&lt;/li>
&lt;li>Вы можете повторно сгенерировать файл конфигурации, запустив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="шаблоны">&lt;span class="section-num">4&lt;/span> Шаблоны&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Шаблоны используются для изменения содержимого файла в зависимости от среды.&lt;/li>
&lt;li>Используется синтаксис шаблонов Go.&lt;/li>
&lt;li>Файл интерпретируется как шаблон, если выполняется одно из следующих условий:
&lt;ul>
&lt;li>имя файла имеет суффикс &lt;code>.tmpl&lt;/code>;&lt;/li>
&lt;li>файл находится в каталоге &lt;code>.chezmoitemplates&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="данные-шаблона">&lt;span class="section-num">4.2&lt;/span> Данные шаблона&lt;/h3>
&lt;ul>
&lt;li>Полный список переменных шаблона:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Источники переменных:
&lt;ul>
&lt;li>файлы &lt;code>.chezmoi&lt;/code>, например, &lt;code>.chezmoi.os&lt;/code>;&lt;/li>
&lt;li>файлы конфигурации &lt;code>.chezmoidata.$FORMAT&lt;/code>. Форматы (&lt;code>json&lt;/code>, &lt;code>jsonc&lt;/code>, &lt;code>toml&lt;/code>, &lt;code>yaml&lt;/code>) читаются в алфавитном порядке;&lt;/li>
&lt;li>раздел &lt;code>data&lt;/code> конфигурационного файла.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="способы-создания-файла-шаблона">&lt;span class="section-num">4.3&lt;/span> Способы создания файла шаблона&lt;/h3>
&lt;ul>
&lt;li>При первом добавлении файла передайте аргумент &lt;code>--template&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi add --template ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если файл уже контролируется &lt;em>chezmoi&lt;/em>, но не является шаблоном, можно сделать его шаблоном:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi chattr +template ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно создать шаблон вручную в исходном каталоге, присвоив ему расширение &lt;code>.tmpl&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi &lt;span class="nb">cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$EDITOR&lt;/span> dot_zshrc.tmpl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Шаблоны в каталоге &lt;code>.chezmoitemplates&lt;/code> должны создаваться вручную:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi &lt;span class="nb">cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p .chezmoitemplates
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> .chezmoitemplates
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$EDITOR&lt;/span> mytemplate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="редактирование-файла-шаблона">&lt;span class="section-num">4.4&lt;/span> Редактирование файла шаблона&lt;/h3>
&lt;ul>
&lt;li>Используйте &lt;code>chezmoi edit&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi edit ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы сделанные вами изменения сразу же применялись после выхода из редактора, используйте опцию &lt;code>--apply&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi edit --apply ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="тестирование-шаблонов">&lt;span class="section-num">4.5&lt;/span> Тестирование шаблонов&lt;/h3>
&lt;ul>
&lt;li>Тестирование с помощью команды &lt;code>chezmoi execute-template&lt;/code>.&lt;/li>
&lt;li>Тестирование небольших фрагментов шаблонов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi execute-template &lt;span class="s1">&amp;#39;{{ .chezmoi.hostname }}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Тестирование целых файлов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi &lt;span class="nb">cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chezmoi execute-template &amp;lt; dot_zshrc.tmpl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синтаксис-шаблона">&lt;span class="section-num">4.6&lt;/span> Синтаксис шаблона&lt;/h3>
&lt;ul>
&lt;li>Действия шаблона записываются внутри двойных фигурных скобок, &lt;code>{{ }}&lt;/code>.&lt;/li>
&lt;li>Действия могут быть переменными, конвейерами или операторами управления.&lt;/li>
&lt;li>Текст вне действий копируется буквально.&lt;/li>
&lt;li>Переменные записываются буквально:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{{ .chezmoi.hostname }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Условные выражения могут быть записаны с использованием &lt;code>if&lt;/code>, &lt;code>else if&lt;/code>, &lt;code>else&lt;/code>, &lt;code>end&lt;/code>:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{{ if eq .chezmoi.os &amp;#34;darwin&amp;#34; }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># darwin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ else if eq .chezmoi.os &amp;#34;linux&amp;#34; }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ else }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># other operating system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ end }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="удаление-пробелов">&lt;span class="section-num">4.6.1&lt;/span> Удаление пробелов&lt;/h4>
&lt;ul>
&lt;li>Для удаления проблем в шаблоне разместите знак минус и пробела рядом со скобками:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">HOSTNAME={{- .chezmoi.hostname }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В результате получим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HOSTNAME&lt;/span>&lt;span class="o">=&lt;/span>myhostname
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="отладка-шаблона">&lt;span class="section-num">4.6.2&lt;/span> Отладка шаблона&lt;/h4>
&lt;ul>
&lt;li>Используется подкоманда &lt;code>execute-template&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi execute-template &lt;span class="s1">&amp;#39;{{ .chezmoi.os }}/{{ .chezmoi.arch }}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Интерпретируются любые данные, поступающие со стандартного ввода или в конце команды.&lt;/li>
&lt;li>Можно передать содержимое файла этой команде:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cat foo.txt &lt;span class="p">|&lt;/span> chezmoi execute-template
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="логические-операции">&lt;span class="section-num">4.6.3&lt;/span> Логические операции&lt;/h4>
&lt;ul>
&lt;li>Возможно выполнение логических операций.&lt;/li>
&lt;li>Если имя хоста машины равно &lt;code>work-laptop&lt;/code>, текст между &lt;code>if&lt;/code> и &lt;code>end&lt;/code> будет включён в результат:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># common config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">EDITOR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">vi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># machine-specific configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">eq&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">chezmoi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hostname&lt;/span> &lt;span class="s2">&amp;#34;work-laptop&amp;#34;&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># this will only be included in ~/.bashrc on work-laptop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="n">end&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Логические функции&lt;/p>
&lt;ul>
&lt;li>&lt;code>eq&lt;/code>: возвращает &lt;code>true&lt;/code>, если первый аргумент равен любому из остальных аргументов, может принимать несколько аргументов;&lt;/li>
&lt;li>&lt;code>not&lt;/code>: возвращает логическое отрицание своего единственного аргумента;&lt;/li>
&lt;li>&lt;code>and&lt;/code>: возвращает логическое И своих аргументов, может принимать несколько аргументов;&lt;/li>
&lt;li>&lt;code>or&lt;/code>: возвращает логическое ИЛИ своих аргументов, может принимать несколько аргументов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Целочисленные функции&lt;/p>
&lt;ul>
&lt;li>&lt;code>len&lt;/code>: возвращает целочисленную длину своего аргумента;&lt;/li>
&lt;li>&lt;code>eq&lt;/code>: возвращает логическую истину &lt;code>arg1 == arg2&lt;/code>;&lt;/li>
&lt;li>&lt;code>ne&lt;/code>: возвращает логическое значение &lt;code>arg1 != arg2&lt;/code>;&lt;/li>
&lt;li>&lt;code>lt&lt;/code>: возвращает логическую истину &lt;code>arg1 &amp;lt; arg2&lt;/code>;&lt;/li>
&lt;li>&lt;code>le&lt;/code>: возвращает логическую истину &lt;code>arg1 &amp;lt;= arg2&lt;/code>;&lt;/li>
&lt;li>&lt;code>gt&lt;/code>: возвращает логическую истину &lt;code>arg1 &amp;gt; arg2&lt;/code>;&lt;/li>
&lt;li>&lt;code>ge&lt;/code>: возвращает логическую истину &lt;code>arg1 &amp;gt;= arg2&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="переменные-шаблона">&lt;span class="section-num">4.7&lt;/span> Переменные шаблона&lt;/h3>
&lt;ul>
&lt;li>Чтобы просмотреть переменные, доступные в вашей системе, выполните:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы получить доступ к переменной &lt;code>chezmoi.kernel.osrelease&lt;/code> в шаблоне, используйте:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{{ .chezmoi.kernel.osrelease }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование-chezmoi">&lt;span class="section-num">5&lt;/span> Использование &lt;code>chezmoi&lt;/code>&lt;/h2>
&lt;h3 id="первоначальная-настройка-на-первичном-хосте">&lt;span class="section-num">5.1&lt;/span> Первоначальная настройка на первичном хосте&lt;/h3>
&lt;ul>
&lt;li>Инициализируйте &lt;code>chezmoi&lt;/code> командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Это создаст новый локальный репозиторий git в &lt;code>~/.local/share/chezmoi&lt;/code>.&lt;/li>
&lt;li>Добавьте в репозиторий первый файл с помощью &lt;code>chezmoi&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi add ~/.bashrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Команда скопирует &lt;code>~/.bashrc&lt;/code> в &lt;code>~/.local/share/chezmoi/dot_bashrc&lt;/code>.&lt;/li>
&lt;li>Можно отредактировать файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi edit ~/.bashrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Откроется &lt;code>~/.local/share/chezmoi/dot_bashrc&lt;/code> в редакторе, заданном переменной &lt;code>$EDITOR&lt;/code>.&lt;/li>
&lt;li>Внесите некоторые изменения и сохраните файл.&lt;/li>
&lt;li>Посмотрите, какие изменения внес бы &lt;code>chezmoi&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi diff
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Примените изменения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi -v apply
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Все команды &lt;code>chezmoi&lt;/code> принимают флаг &lt;code>-v&lt;/code> (подробная информация) и флаг &lt;code>-n&lt;/code> (пробный запуск, демонстрирующий, но не вносящий изменения).&lt;/li>
&lt;/ul>
&lt;h3 id="репозиторий-на-github">&lt;span class="section-num">5.2&lt;/span> Репозиторий на github&lt;/h3>
&lt;ul>
&lt;li>Создайте репозиторий &lt;code>dotfiles&lt;/code> для хранения конфигурационных файлов.&lt;/li>
&lt;li>Для определённости будем использовать &lt;a href="https://github.com" target="_blank" rel="noopener">https://github.com&lt;/a>.&lt;/li>
&lt;li>Поддерживается хранение ваших конфигурационных файлов как в общедоступных, так и в частных репозиториях.&lt;/li>
&lt;li>Создать репозиторий можно вручную или из командной строки (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/04/github-command-line-utilities/">github: утилиты командной строки&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gh repo create dotfiles --private
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Откройте оболочку в исходном каталоге, чтобы зафиксировать изменения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi &lt;span class="nb">cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;Initial commit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключите репозиторий и выгрузите файлы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git remote add origin git@github.com:username/dotfiles.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push --set-upstream origin master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push -u origin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выйдите из оболочки &lt;code>chezmoi&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="использование-chezmoi-на-нескольких-машинах">&lt;span class="section-num">5.3&lt;/span> Использование chezmoi на нескольких машинах&lt;/h3>
&lt;ul>
&lt;li>На второй машине инициализируйте &lt;code>chezmoi&lt;/code> с вашим репозиторием &lt;code>dotfiles&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init https://github.com/&amp;lt;username&amp;gt;/dotfiles.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Или через ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init git@github.com:&amp;lt;username&amp;gt;/dotfiles.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте, какие изменения внесёт &lt;code>chezmoi&lt;/code> в домашний каталог, запустив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi diff
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если вас устраивают изменения, внесённые &lt;code>chezmoi&lt;/code>, запустите:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi apply -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если вас не устраивают изменения в файле, отредактируйте его с помощью:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi edit file_name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Также можно вызвать инструмент слияния, чтобы объединить изменения между текущим содержимым файла, файлом в вашей рабочей копии и измененным содержимым файла:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi merge file_name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При существующем каталоге &lt;code>chezmoi&lt;/code> можно получить и применить последние изменения из вашего репозитория:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi update -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-новой-машины-с-помощью-одной-команды">&lt;span class="section-num">5.4&lt;/span> Настройка новой машины с помощью одной команды&lt;/h3>
&lt;ul>
&lt;li>Можно установить свои &lt;code>dotfiles&lt;/code> на новый компьютер с помощью одной команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init --apply https://github.com/&amp;lt;username&amp;gt;/dotfiles.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Через ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi init --apply git@github.com:&amp;lt;username&amp;gt;/dotfiles.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="ежедневные-операции-c-chezmoi">&lt;span class="section-num">5.5&lt;/span> Ежедневные операции c &lt;code>chezmoi&lt;/code>&lt;/h3>
&lt;h4 id="извлеките-последние-изменения-из-репозитория-и-примените-их">&lt;span class="section-num">5.5.1&lt;/span> Извлеките последние изменения из репозитория и примените их&lt;/h4>
&lt;ul>
&lt;li>Можно извлечь изменения из репозитория и применить их одной командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Это запускается &lt;code>git pull --autostash --rebase&lt;/code> в вашем исходном каталоге, а затем &lt;code>chezmoi apply&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="извлеките-последние-изменения-из-своего-репозитория-и-посмотрите-что-изменится-фактически-не-применяя-изменения">&lt;span class="section-num">5.5.2&lt;/span> Извлеките последние изменения из своего репозитория и посмотрите, что изменится, фактически не применяя изменения&lt;/h4>
&lt;ul>
&lt;li>Выполните:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi git pull -- --autostash --rebase &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> chezmoi diff
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Это запускается &lt;code>git pull --autostash --rebase&lt;/code> в вашем исходном каталоге, а &lt;code>chezmoi diff&lt;/code> затем показывает разницу между целевым состоянием, вычисленным из вашего исходного каталога, и фактическим состоянием.&lt;/li>
&lt;li>Если вы довольны изменениями, вы можете применить их:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chezmoi apply
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="автоматически-фиксируйте-и-отправляйте-изменения-в-репозиторий">&lt;span class="section-num">5.5.3&lt;/span> Автоматически фиксируйте и отправляйте изменения в репозиторий&lt;/h4>
&lt;ul>
&lt;li>Можно автоматически фиксировать и отправлять изменения в исходный каталог в репозиторий.&lt;/li>
&lt;li>Эта функция отключена по умолчанию.&lt;/li>
&lt;li>Чтобы включить её, добавьте в файл конфигурации &lt;code>~/.config/chezmoi/chezmoi.toml&lt;/code> следующее:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>git&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">autoCommit&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">autoPush&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Всякий раз, когда в исходный каталог вносятся изменения, &lt;code>chezmoi&lt;/code> фиксирует изменения с помощью автоматически сгенерированного сообщения фиксации и отправляет их в ваш репозиторий.&lt;/li>
&lt;li>Будьте осторожны при использовании &lt;code>autoPush&lt;/code>. Если ваш репозиторий &lt;code>dotfiles&lt;/code> является общедоступным, и вы случайно добавили секрет в виде обычного текста, этот секрет будет отправлен в ваш общедоступный репозиторий.&lt;/li>
&lt;/ul></description></item><item><title>Пароли mail.ru</title><link>https://yamadharma.github.io/ru/post/2022/10/27/mail-ru-passwords/</link><pubDate>Thu, 27 Oct 2022 15:04:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/10/27/mail-ru-passwords/</guid><description>&lt;p>Управление паролями в сервисах Mail.ru.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#пароли-для-внешних-приложений">&lt;span class="section-num">1&lt;/span> Пароли для внешних приложений&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="пароли-для-внешних-приложений">&lt;span class="section-num">1&lt;/span> Пароли для внешних приложений&lt;/h2>
&lt;ul>
&lt;li>Для сторонних приложений используются специальные пароли, уникальные для каждого стороннего приложения.&lt;/li>
&lt;li>Сервис &lt;em>mail.ru&lt;/em> время от времени блокирует доступ к почтовому ящику.
&lt;ul>
&lt;li>Под предлогом подозрения на попытку взлома почтового ящика.&lt;/li>
&lt;li>При этом блокируются и пароли приложений.&lt;/li>
&lt;li>Необходимо заново создать пароль.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для создания такого пароля выполните следующее:
&lt;ul>
&lt;li>Войдите в свой аккаунт Mail.ru на компьютере.&lt;/li>
&lt;li>Перейдите в настройки Mail ID в пункт &lt;em>Безопасность&lt;/em> (&lt;a href="https://id.mail.ru/security" target="_blank" rel="noopener">https://id.mail.ru/security&lt;/a>).&lt;/li>
&lt;li>Далее перейдите в пункт &lt;em>Пароли для внешних приложений&lt;/em>.&lt;/li>
&lt;li>Нажмите &lt;em>Добавить&lt;/em>.&lt;/li>
&lt;li>Добавьте название сервиса.&lt;/li>
&lt;li>Скопируйте новый пароль и введите его в стороннем приложении.&lt;/li>
&lt;li>После закрытия окна значение пароля получить будет невозможно.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>rclone</title><link>https://yamadharma.github.io/ru/post/2022/10/27/rclone/</link><pubDate>Thu, 27 Oct 2022 14:29:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/10/27/rclone/</guid><description>&lt;p>Утилита командной строки для синхронизация данных с сетевыми объектными хранилищами.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-хранилищ">&lt;span class="section-num">2&lt;/span> Подключение хранилищ&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#хранилища">&lt;span class="section-num">2.2&lt;/span> Хранилища&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#google-drive">&lt;span class="section-num">2.2.1&lt;/span> Google Drive&lt;/a>&lt;/li>
&lt;li>&lt;a href="#yandex-disk">&lt;span class="section-num">2.2.2&lt;/span> Yandex Disk&lt;/a>&lt;/li>
&lt;li>&lt;a href="#mail-dot-ru-cloud">&lt;span class="section-num">2.2.3&lt;/span> Mail.ru Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://rclone.org/" target="_blank" rel="noopener">https://rclone.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="подключение-хранилищ">&lt;span class="section-num">2&lt;/span> Подключение хранилищ&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Для подключения сетевого хранилища следует запустить:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Далее следовать текстовому меню.&lt;/li>
&lt;/ul>
&lt;h3 id="хранилища">&lt;span class="section-num">2.2&lt;/span> Хранилища&lt;/h3>
&lt;h4 id="google-drive">&lt;span class="section-num">2.2.1&lt;/span> Google Drive&lt;/h4>
&lt;ul>
&lt;li>При конфигурировании запускается броузер.&lt;/li>
&lt;li>Необходимо залогиниться и разрешить доступ.&lt;/li>
&lt;li>В конфигурационный файл записывается токен для доступа.&lt;/li>
&lt;/ul>
&lt;h4 id="yandex-disk">&lt;span class="section-num">2.2.2&lt;/span> Yandex Disk&lt;/h4>
&lt;ul>
&lt;li>При конфигурировании запускается броузер.&lt;/li>
&lt;li>Необходимо залогиниться и разрешить доступ.&lt;/li>
&lt;li>В конфигурационный файл записывается токен для доступа.&lt;/li>
&lt;/ul>
&lt;h4 id="mail-dot-ru-cloud">&lt;span class="section-num">2.2.3&lt;/span> Mail.ru Cloud&lt;/h4>
&lt;ul>
&lt;li>В качестве пароля необходимо использовать пароль для внешнего приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/10/27/mail-ru-passwords/">Пароли mail.ru&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/h2>
&lt;ul>
&lt;li>Пусть название хранилища будет &lt;code>remote&lt;/code>.&lt;/li>
&lt;li>Просмотр списка контейнеров в хранилище:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone lsd remote:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создание нового каталога:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone mkdir remote:/dir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Просмотр списка файлов в каталоге:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone ls remote:/dir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Копирование файлов с локальной машины в хранилище:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone copy /home/local/directory remote:/dir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Синхронизация файлов на локальной машине и в хранилище:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rclone sync /home/local/directory remote:/dir
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Open Journal Systems</title><link>https://yamadharma.github.io/ru/post/2022/10/22/open-journal-systems/</link><pubDate>Sat, 22 Oct 2022 15:50:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/10/22/open-journal-systems/</guid><description>&lt;p>Open Journal Systems (OJS) &amp;mdash; открытое программное обеспечение для организации рецензируемых научных изданий.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#технические-требования">&lt;span class="section-num">2.1&lt;/span> Технические требования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-пакеты">&lt;span class="section-num">2.2&lt;/span> Дополнительные пакеты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установки-сервера">&lt;span class="section-num">2.3&lt;/span> Установки сервера&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#selinux">&lt;span class="section-num">2.3.1&lt;/span> SELinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-базы-данных">&lt;span class="section-num">2.3.2&lt;/span> Создание базы данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-ojs">&lt;span class="section-num">2.4&lt;/span> Установка OJS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#после-установки">&lt;span class="section-num">2.5&lt;/span> После установки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-cron">&lt;span class="section-num">2.5.1&lt;/span> Настройка cron&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Текущая версия: OJS 3.x.&lt;/li>
&lt;li>Сайт: &lt;a href="http://pkp.sfu.ca/ojs" target="_blank" rel="noopener">http://pkp.sfu.ca/ojs&lt;/a>&lt;/li>
&lt;li>Загрузка: &lt;a href="https://pkp.sfu.ca/ojs/ojs_download/" target="_blank" rel="noopener">https://pkp.sfu.ca/ojs/ojs_download/&lt;/a>&lt;/li>
&lt;li>Лицензия: GNU General Public License&lt;/li>
&lt;li>Система OJS предназначена для создания рецензируемых электронных журналов с открытым доступом.&lt;/li>
&lt;li>Позволяет не только публиковать статьи в интернете, но и организовывать весь рабочий процесс издательского дела: приём, рецензирование и каталогизирование статей.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="технические-требования">&lt;span class="section-num">2.1&lt;/span> Технические требования&lt;/h3>
&lt;ul>
&lt;li>PHP 7.3 или новее с поддержкой MySQL, MariaDB или PostgreSQL.&lt;/li>
&lt;li>Сервер базы данных: MySQL/MariaDB 4.1 или новее, PostgreSQL 9.5 или новее.&lt;/li>
&lt;li>Рекомендуется UNIX-подобная ОС.&lt;/li>
&lt;/ul>
&lt;h3 id="дополнительные-пакеты">&lt;span class="section-num">2.2&lt;/span> Дополнительные пакеты&lt;/h3>
&lt;ul>
&lt;li>ADOdb Database Library (&lt;a href="http://adodb.sourceforge.net/" target="_blank" rel="noopener">http://adodb.sourceforge.net/&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install php-adodb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установки-сервера">&lt;span class="section-num">2.3&lt;/span> Установки сервера&lt;/h3>
&lt;h4 id="selinux">&lt;span class="section-num">2.3.1&lt;/span> SELinux&lt;/h4>
&lt;ul>
&lt;li>Разрешить доступ http-серверу ко всем типам меток &lt;code>httpd&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setsebool -P httpd_unified &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool httpd_unified &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="создание-базы-данных">&lt;span class="section-num">2.3.2&lt;/span> Создание базы данных&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Mysql&lt;/p>
&lt;ul>
&lt;li>
&lt;p>База данных должна быть создана с использованием кодировки UTF-8 (Unicode) (utf8mb4) и параметров сортировки &lt;code>utf8mb4_unicode_ci&lt;/code> или &lt;code>utf8mb4_general_ci&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>Разница между двумя сопоставлениями связана с тем, насколько быстро они сравнивают символы и сортируют их.&lt;/li>
&lt;li>&lt;code>utf8mb4_general_ci&lt;/code> немного быстрее, однако &lt;code>utf8mb4_unicode_ci&lt;/code> более точен для более широкого диапазона символов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Необходимые значения:&lt;/p>
&lt;ul>
&lt;li>&lt;code>ojs3&lt;/code> &amp;mdash; имя базы данных;&lt;/li>
&lt;li>&lt;code>ojs3&lt;/code> &amp;mdash; имя пользователя базы данных;&lt;/li>
&lt;li>&lt;code>password&lt;/code> &amp;mdash; пароль пользователя базы данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Создайте новую базу данных для вашего сайта (измените &lt;code>username&lt;/code> и &lt;code>databasename&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p -e &lt;span class="s2">&amp;#34;CREATE DATABASE ojs3 CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Подключитесь к базе данных:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Создайте пользователя и установите разрешения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ojs3&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">localhost&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DELETE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TEMPORARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">TABLES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">ojs3&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;ojs3&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сбросьте привилегии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">FLUSH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIVILEGES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Закройте терминал базы данных, набрав &lt;code>exit&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="установка-ojs">&lt;span class="section-num">2.4&lt;/span> Установка OJS&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Извлеките архив OJS в нужное место на вашем веб-сайте:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /var/www/html/sites/journals.example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar xzvf ojs-3.x.y-z.tar.gz --strip-components&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> -C /var/www/html/sites/journals.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Создайте следующие файлы и каталоги (и их содержимое) доступны для записи:&lt;/p>
&lt;ul>
&lt;li>&lt;code>config.inc.php&lt;/code>&lt;/li>
&lt;li>&lt;code>public&lt;/code>&lt;/li>
&lt;li>&lt;code>cache&lt;/code>&lt;/li>
&lt;li>&lt;code>plugins&lt;/code> (для установки плагинов через веб-интерфейс).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Для этого установите права доступа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chown -R apache:apache /var/www/html/sites/journals.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Создайте каталог для хранения загруженных файлов и сделать этот каталог доступным для записи:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /var/www/data/journals.example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R apache:apache /var/www/data/journals.example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">775&lt;/span> /var/www/data/journals.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Добавьте конфигурацию для web-сервера (&lt;code>/etc/httpd/conf.d/journals.example.com.conf&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">VirtualHost&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ServerName&lt;/span> &lt;span class="n">journals&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ServerAdmin&lt;/span> &lt;span class="n">webmaster&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DocumentRoot&lt;/span> &lt;span class="s2">&amp;#34;/var/www/html/sites/journals.example.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="ne">Directory&lt;/span> &lt;span class="s2">&amp;#34;/var/www/html/sites/journals.example.com&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Options&lt;/span> &lt;span class="n">Indexes&lt;/span> &lt;span class="n">FollowSymLinks&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">AllowOverride&lt;/span> &lt;span class="n">All&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Order&lt;/span> &lt;span class="n">allow&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">deny&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Allow&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">all&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="ne">Directory&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">VirtualHost&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Откройте веб-браузер по адресу &lt;code>http://journals.example.com/&lt;/code> и следуйте инструкциям по установке на экране.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Вместо этого можно использовать установщик командной строки запустив команду &lt;code>php tools/install.php&lt;/code> из вашего каталога OJS.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Рекомендуемые дополнительные действия после установки:&lt;/p>
&lt;ul>
&lt;li>Просмотрите `config.inc.php` для дополнительных настроек конфигурации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="после-установки">&lt;span class="section-num">2.5&lt;/span> После установки&lt;/h3>
&lt;h4 id="настройка-cron">&lt;span class="section-num">2.5.1&lt;/span> Настройка cron&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Чтобы включить поддержку использования запланированных задач, отредактируйте файл &lt;code>config.inc.php&lt;/code> и установите для параметра &lt;code>scheduled_tasks&lt;/code> значение &lt;code>On&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Настройте периодическое выполнение заданий:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="m">0&lt;/span> * * * * php /var/www/html/sites/journals.alternativy.ru/tools/runScheduledTasks.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Скрипт будет выполняться каждый час.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/h2></description></item><item><title>Автообновление систем на базе деривативов RedHat</title><link>https://yamadharma.github.io/ru/post/2022/09/25/redhat-based-systems-auto-update/</link><pubDate>Sun, 25 Sep 2022 09:42:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/25/redhat-based-systems-auto-update/</guid><description>&lt;p>Простое автоматическое обновление на уровне хоста.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#прагматика">&lt;span class="section-num">1&lt;/span> Прагматика&lt;/a>&lt;/li>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-программного-обеспечения">&lt;span class="section-num">3&lt;/span> Установка программного обеспечения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование-программного-обеспечения">&lt;span class="section-num">4&lt;/span> Использование программного обеспечения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="прагматика">&lt;span class="section-num">1&lt;/span> Прагматика&lt;/h2>
&lt;ul>
&lt;li>Основное преимущество автоматизации обновлений заключается в том, что машины, скорее всего, будут обновляться быстрее, чаще и более равномерно, чем если бы обновления выполнялись вручную.&lt;/li>
&lt;li>Хотя необходимо быть осторожным с любым решением для автоматического обновления, его стоит рассмотреть, по крайней мере, для некоторых ситуаций.&lt;/li>
&lt;li>Если машина является критическим сервером, для которого нельзя допускать незапланированного простоя службы на машине, то автоматические обновления использовать не следует. В противном случае можно использовать их.&lt;/li>
&lt;li>Причины использования автоматических обновлений.
&lt;ul>
&lt;li>Вы вряд ли будете применять обновления вручную по каким-либо причинам.&lt;/li>
&lt;li>Машина не критична, допустимы случайные незапланированные простои.&lt;/li>
&lt;li>Вы можете жить без удаленного доступа к машине, пока не сможете добраться до ее физического местоположения для решения проблем.&lt;/li>
&lt;li>У вас нет незаменимых данных на машине или надлежащих резервных копий таких данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="общая-информация">&lt;span class="section-num">2&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Документация: &lt;a href="https://dnf.readthedocs.io/en/latest/automatic.html" target="_blank" rel="noopener">https://dnf.readthedocs.io/en/latest/automatic.html&lt;/a>&lt;/li>
&lt;li>Используются таймеры:
&lt;ul>
&lt;li>&lt;code>dnf-automatic.timer&lt;/code> : общий таймер, операции настраиваются в файле конфигурации;&lt;/li>
&lt;li>&lt;code>dnf-automatic-notifyonly.timer&lt;/code> : уведомление о наличии обновлений;&lt;/li>
&lt;li>&lt;code>dnf-automatic-download.timer&lt;/code> : загрузка обновлений;&lt;/li>
&lt;li>&lt;code>dnf-automatic-install.timer&lt;/code> : установка обновлений.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Этим таймерам соответствуют сервисы.&lt;/li>
&lt;li>Конфигурационный файл: &lt;code>/etc/dnf/automatic.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="установка-программного-обеспечения">&lt;span class="section-num">3&lt;/span> Установка программного обеспечения&lt;/h2>
&lt;ul>
&lt;li>Установим пакет:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install dnf-automatic
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование-программного-обеспечения">&lt;span class="section-num">4&lt;/span> Использование программного обеспечения&lt;/h2>
&lt;ul>
&lt;li>Зададим необходимую конфигурацию в файле &lt;code>/etc/dnf/automatic.conf&lt;/code>.&lt;/li>
&lt;li>Например, для автоматической установки обновлений зададим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">download_updates&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">yes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apply_updates&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">yes&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустим общий таймер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now dnf-automatic.timer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверить работу таймера можно так:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl list-timers *dnf-* --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Linux. Дистрибутив Gentoo</title><link>https://yamadharma.github.io/ru/post/2022/09/17/linux-gentoo-distribution/</link><pubDate>Sat, 17 Sep 2022 13:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/17/linux-gentoo-distribution/</guid><description>&lt;p>Дистрибутив Gentoo.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администрирование-gentoo">&lt;span class="section-num">2&lt;/span> Администрирование Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h2 id="администрирование-gentoo">&lt;span class="section-num">2&lt;/span> Администрирование Gentoo&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/17/gentoo-standard-directories/">Стандартные каталоги Gentoo&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/">Gentoo. Дополнительные репозитории&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/07/06/gentoo-post-installation/">Gentoo. Постустановка&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/16/gentoo-compiling-clang/">Gentoo. Компиляция системы clang&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/11/02/gentoo-ebuild-rust/">Gentoo. Создание ebuild для Rust&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Сервера на Донской</title><link>https://yamadharma.github.io/ru/post/2022/09/15/servers-donskaya/</link><pubDate>Thu, 15 Sep 2022 20:19:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/15/servers-donskaya/</guid><description>&lt;p>Сервера на Донской.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">&lt;/nav>
&lt;/details></description></item><item><title>Перенос Drupal на другую машину</title><link>https://yamadharma.github.io/ru/post/2022/09/13/move-drupal-other-machine/</link><pubDate>Tue, 13 Sep 2022 19:45:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/13/move-drupal-other-machine/</guid><description>&lt;p>Перенос Drupal на другую машину.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#прагматика">&lt;span class="section-num">1&lt;/span> Прагматика&lt;/a>&lt;/li>
&lt;li>&lt;a href="#порядок-миграции">&lt;span class="section-num">2&lt;/span> Порядок миграции&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-машины">&lt;span class="section-num">2.1&lt;/span> Настройка машины&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#необходимое-программное-обеспечение">&lt;span class="section-num">2.1.1&lt;/span> Необходимое программное обеспечение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#drush">&lt;span class="section-num">2.1.2&lt;/span> Drush&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-базы-данных">&lt;span class="section-num">2.1.3&lt;/span> Запуск базы данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-сети">&lt;span class="section-num">2.1.4&lt;/span> Настройка сети&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-selinux">&lt;span class="section-num">2.1.5&lt;/span> Настройка Selinux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#перенос-файлов">&lt;span class="section-num">2.2&lt;/span> Перенос файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перенос-базы-данных">&lt;span class="section-num">2.3&lt;/span> Перенос базы данных&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-дампа-базы-данных">&lt;span class="section-num">2.3.1&lt;/span> Создание дампа базы данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-базы-данных-на-новой-машине">&lt;span class="section-num">2.3.2&lt;/span> Создание базы данных на новой машине&lt;/a>&lt;/li>
&lt;li>&lt;a href="#восстановление-дампа-базы-данных">&lt;span class="section-num">2.3.3&lt;/span> Восстановление дампа базы данных&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="прагматика">&lt;span class="section-num">1&lt;/span> Прагматика&lt;/h2>
&lt;ul>
&lt;li>При замене операционной системы возникает необходимость переноса сервисов на другую машину.&lt;/li>
&lt;/ul>
&lt;h2 id="порядок-миграции">&lt;span class="section-num">2&lt;/span> Порядок миграции&lt;/h2>
&lt;h3 id="настройка-машины">&lt;span class="section-num">2.1&lt;/span> Настройка машины&lt;/h3>
&lt;ul>
&lt;li>Следует установить на машину стек LAMP (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h4 id="необходимое-программное-обеспечение">&lt;span class="section-num">2.1.1&lt;/span> Необходимое программное обеспечение&lt;/h4>
&lt;ul>
&lt;li>Установите необходимое для Drupal программное обеспечение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install gd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install php-gd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install php-pecl-apcu
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="drush">&lt;span class="section-num">2.1.2&lt;/span> Drush&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Drush 8&lt;/p>
&lt;ul>
&lt;li>Загрузите нужную версию &lt;code>drush&lt;/code> из &lt;code>https://github.com/drush-ops/drush/releases&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /usr/local/bin/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://github.com/drush-ops/drush/releases/download/8.4.8/drush.phar -O drush
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x drush
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="запуск-базы-данных">&lt;span class="section-num">2.1.3&lt;/span> Запуск базы данных&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Mysql&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Запустите базу данных:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now mariadb.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Поправьте уровень безопасности:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql_secure_installation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Не надо переключаться на сокет и менять пароль пользователя &lt;code>root&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Postgresql&lt;/p>
&lt;ul>
&lt;li>Запустите базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now postgresql.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="настройка-сети">&lt;span class="section-num">2.1.4&lt;/span> Настройка сети&lt;/h4>
&lt;ul>
&lt;li>Откройте необходимые порты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-service&lt;span class="o">=&lt;/span>http --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --add-service&lt;span class="o">=&lt;/span>https --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-selinux">&lt;span class="section-num">2.1.5&lt;/span> Настройка Selinux&lt;/h4>
&lt;ul>
&lt;li>Зададим переключатели для Selinux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">setsebool -P httpd_can_network_connect &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setsebool -P httpd_can_sendmail &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перенос-файлов">&lt;span class="section-num">2.2&lt;/span> Перенос файлов&lt;/h3>
&lt;ul>
&lt;li>Перейдите на новой машине в каталог для файлов www-сервера:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /var/www/html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируйте каталог с файлами со старой машины:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -av -HS -AX root@&amp;lt;oldhost&amp;gt;:/var/www/html/&amp;lt;oldsite&amp;gt; . --delete
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перегенерите метки Selinux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">restorecon -vR /var/www/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перенос-базы-данных">&lt;span class="section-num">2.3&lt;/span> Перенос базы данных&lt;/h3>
&lt;h4 id="создание-дампа-базы-данных">&lt;span class="section-num">2.3.1&lt;/span> Создание дампа базы данных&lt;/h4>
&lt;ul>
&lt;li>На исходной машине необходимо создать дамп базы данных.&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Mysql&lt;/p>
&lt;ul>
&lt;li>Создайте дамп базы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysqldump --quote-names --add-drop-table -u root -p databasename &amp;gt; mysql-databasename-&lt;span class="sb">`&lt;/span>date +%Y%m%d-%H%M%S&lt;span class="sb">`&lt;/span>.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Postgres&lt;/p>
&lt;ul>
&lt;li>Создайте дамп базы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su - postgres -c &lt;span class="s2">&amp;#34;pg_dump -U postgres &amp;gt; pg-databasename-`date +%Y%m%d-%H%M%S`.sql
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="создание-базы-данных-на-новой-машине">&lt;span class="section-num">2.3.2&lt;/span> Создание базы данных на новой машине&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Mysql&lt;/p>
&lt;ul>
&lt;li>
&lt;p>База данных должна быть создана с использованием кодировки UTF-8 (Unicode) (utf8mb4) и параметров сортировки &lt;code>utf8mb4_unicode_ci&lt;/code> или &lt;code>utf8mb4_general_ci&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>Разница между двумя сопоставлениями связана с тем, насколько быстро они сравнивают символы и сортируют их.&lt;/li>
&lt;li>&lt;code>utf8mb4_general_ci&lt;/code> немного быстрее, однако &lt;code>utf8mb4_unicode_ci&lt;/code> более точен для более широкого диапазона символов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Необходимые значения:&lt;/p>
&lt;ul>
&lt;li>&lt;code>databasename&lt;/code> &amp;mdash; имя базы данных;&lt;/li>
&lt;li>&lt;code>username&lt;/code> &amp;mdash; имя пользователя базы данных;&lt;/li>
&lt;li>&lt;code>password&lt;/code> &amp;mdash; пароль пользователя базы данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Создайте новую базу данных для вашего сайта (измените &lt;code>username&lt;/code> и &lt;code>databasename&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p -e &lt;span class="s2">&amp;#34;CREATE DATABASE databasename CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Подключитесь к базе данных:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Создайте пользователя и установите разрешения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">localhost&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DELETE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INDEX&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TEMPORARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">TABLES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">databasename&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сбросьте привилегии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">FLUSH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIVILEGES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Закройте терминал базы данных, набрав &lt;code>exit&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Postgres&lt;/p>
&lt;ul>
&lt;li>Создайте пользователя базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">createuser --pwprompt --encrypted --no-adduser --no-createdb username
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">createdb --encoding&lt;span class="o">=&lt;/span>UNICODE --owner&lt;span class="o">=&lt;/span>username databasename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="восстановление-дампа-базы-данных">&lt;span class="section-num">2.3.3&lt;/span> Восстановление дампа базы данных&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Mysql&lt;/p>
&lt;ul>
&lt;li>Восстановите базу данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -u root -p databasename &amp;lt; mysql-databasename.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Postgres&lt;/p>
&lt;ul>
&lt;li>Восстановите базы данных:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">psql -U postgres -d databasename &amp;lt; pg-databasename.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol></description></item><item><title>Регламент работы дисплейных классов</title><link>https://yamadharma.github.io/ru/post/2022/09/12/regulations-display-classes/</link><pubDate>Mon, 12 Sep 2022 10:03:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/12/regulations-display-classes/</guid><description>&lt;p>Регламент работы дисплейных классов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#функциональное-назначение-дисплейных-классов">&lt;span class="section-num">1&lt;/span> Функциональное назначение дисплейных классов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#порядок-свободного-доступа-профессорско-преподавательского-состава-аспирантов-и-студентов-в-дисплейные-классы-общего-пользования">&lt;span class="section-num">2&lt;/span> Порядок свободного доступа профессорско-преподавательского состава, аспирантов и студентов в дисплейные классы общего пользования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#инструкция-пользователю-дисплейных-классов">&lt;span class="section-num">3&lt;/span> Инструкция пользователю дисплейных классов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общие-положения">&lt;span class="section-num">3.1&lt;/span> Общие положения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#требования-к-пользователям-dot">&lt;span class="section-num">3.2&lt;/span> Требования к пользователям.&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#инструкция-преподавателю-ведущему-занятия-в-дисплейных-классах">&lt;span class="section-num">4&lt;/span> Инструкция преподавателю, ведущему занятия в дисплейных классах&lt;/a>&lt;/li>
&lt;li>&lt;a href="#заявка-на-установку-программного-обеспечения-в-дисплейных-классах">&lt;span class="section-num">5&lt;/span> Заявка на установку программного обеспечения в дисплейных классах&lt;/a>&lt;/li>
&lt;li>&lt;a href="#учётная-форма-пользователя-сети-дисплейных-классов">&lt;span class="section-num">6&lt;/span> Учётная форма пользователя сети дисплейных классов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="функциональное-назначение-дисплейных-классов">&lt;span class="section-num">1&lt;/span> Функциональное назначение дисплейных классов&lt;/h2>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Функциональное назначение дисплейных классов
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Номер&lt;/th>
&lt;th>Аудитория&lt;/th>
&lt;th>Назначение&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ДК № 1&lt;/td>
&lt;td>399а&lt;/td>
&lt;td>Дисплейный класс общего назначения для учебных занятий и свободного доступа&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ДК № 2&lt;/td>
&lt;td>399б&lt;/td>
&lt;td>Дисплейный класс общего назначения для учебных занятий и свободного доступа&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ДК № 3&lt;/td>
&lt;td>299&lt;/td>
&lt;td>Дисплейный класс общего назначения для учебных занятий и свободного доступа&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ДК № 4&lt;/td>
&lt;td>298&lt;/td>
&lt;td>Дисплейный класс общего назначения для учебных занятий и свободного доступа&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ДК № 5&lt;/td>
&lt;td>297&lt;/td>
&lt;td>Дисплейный класс общего назначения для учебных занятий и свободного доступа&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ДК № 6&lt;/td>
&lt;td>295&lt;/td>
&lt;td>Дисплейный класс для учебных занятий и свободного доступа профессорско-преподавательского состава и аспирантов&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ДК № 7&lt;/td>
&lt;td>296&lt;/td>
&lt;td>Дисплейный класс общего назначения для учебных занятий и доступа к ЦКП&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="порядок-свободного-доступа-профессорско-преподавательского-состава-аспирантов-и-студентов-в-дисплейные-классы-общего-пользования">&lt;span class="section-num">2&lt;/span> Порядок свободного доступа профессорско-преподавательского состава, аспирантов и студентов в дисплейные классы общего пользования&lt;/h2>
&lt;ul>
&lt;li>Свободный доступ студентов осуществляется по расписанию работы дисплейных классов общего пользования в свободное от учебных занятий время, с понедельника по пятницу с 17.00 до 21.00 и в субботу с 9.00 до 15.00.&lt;/li>
&lt;li>В соответствии с приказом Ректора РУДН № 381р от 04 июля 2005 года свободный доступ студентов осуществляется в присутствии ответственных лиц из числа преподавателей или учебно-вспомогательного персонала, назначенных деканами инженерной академии и факультета физико-математических и естественных наук.&lt;/li>
&lt;li>Для свободного доступа в дисплейные классы студент должен зарегистрироваться в качестве пользователя в установленном порядке.&lt;/li>
&lt;li>Студент должен ознакомиться с инструкцией пользователя дисплейных классов.&lt;/li>
&lt;/ul>
&lt;h2 id="инструкция-пользователю-дисплейных-классов">&lt;span class="section-num">3&lt;/span> Инструкция пользователю дисплейных классов&lt;/h2>
&lt;h3 id="общие-положения">&lt;span class="section-num">3.1&lt;/span> Общие положения&lt;/h3>
&lt;ul>
&lt;li>Категории пользователей дисплейных классов (ДК)
&lt;ul>
&lt;li>профессорско-преподавательский состав;&lt;/li>
&lt;li>аспиранты;&lt;/li>
&lt;li>студенты в составе учебных групп;&lt;/li>
&lt;li>преподаватели учебных групп;&lt;/li>
&lt;li>пользователи, имеющие право свободного доступа для работы в ДК.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Доступ пользователей осуществляется в соответствии с расписанием работы ДК.&lt;/li>
&lt;/ul>
&lt;h3 id="требования-к-пользователям-dot">&lt;span class="section-num">3.2&lt;/span> Требования к пользователям.&lt;/h3>
&lt;ul>
&lt;li>Пользователь ДК обязан выполнять требования настоящей инструкции.&lt;/li>
&lt;li>Пользователи ДК, решают все вопросы, не оговоренные в данной инструкции, с персоналом дисплейных классов через преподавателя.&lt;/li>
&lt;li>Пользователи должны быть зарегистрированы (получить учетную запись и пароль) и могут создавать свои каталоги и файлы только в выделенной им области на сетевом диске.&lt;/li>
&lt;li>Пользователи обязаны соблюдать требования дежурного по ДК.&lt;/li>
&lt;li>Пользователям запрещается открывать системные блоки компьютеров, самостоятельно выключать/включать компьютер, отключать компьютеры от сети энергопитания, производить отключение и переключение любых устройств, а также любые другие действия, связанные с изменением регламентированного состояния аппаратного и энергетического обеспечения ДК.&lt;/li>
&lt;li>Пользователям запрещается вносить какие либо изменения в регламентированную администрацией файловую систему компьютеров: самостоятельная инсталляция/деинсталляция программ, изменение системных настроек (настройки сети и другие системные настройки, установки CMOS и др.) категорически запрещены.&lt;/li>
&lt;li>Категорически запрещается использование игровых программ, а также инсталляция игр на предоставляемые пользователям носители информации.&lt;/li>
&lt;li>Пользователи, нарушившие пункты данной Инструкции, лишаются права доступа в ДК.&lt;/li>
&lt;li>Пользователи, нарушившие правила общественного порядка, требований пожарной безопасности и допустившие акты вандализма в ДК, лишаются права доступа в ДК.&lt;/li>
&lt;/ul>
&lt;h2 id="инструкция-преподавателю-ведущему-занятия-в-дисплейных-классах">&lt;span class="section-num">4&lt;/span> Инструкция преподавателю, ведущему занятия в дисплейных классах&lt;/h2>
&lt;ul>
&lt;li>Занятия в учебных группах в дисплейных классах (ДК) проводятся строго в соответствии с расписанием занятий в присутствии преподавателя.&lt;/li>
&lt;li>По окончании занятий ранее указанного в расписании времени преподаватель должен сообщить об этом дежурному по ДК.&lt;/li>
&lt;li>Предложения и замечания по работе ДК заносятся в журнал, находящийся в комнате дежурных по ДК.&lt;/li>
&lt;li>Заявки на установку программного обеспечения, дополнительно к предустановленному программному обеспечению, подаются в конце каждого модуля, с приложением дистрибутива и рекомендаций по установке. Ответственность за лицензионную чистоту программного обеспечения возлагается на заявителя.&lt;/li>
&lt;li>Преподаватель во время занятий несет ответственность за соблюдением студентами Инструкции пользователю ДК.&lt;/li>
&lt;/ul>
&lt;h2 id="заявка-на-установку-программного-обеспечения-в-дисплейных-классах">&lt;span class="section-num">5&lt;/span> Заявка на установку программного обеспечения в дисплейных классах&lt;/h2>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 2:&lt;/span>
Заявка на установку программного обеспечения в дисплейных классах
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>№&lt;/th>
&lt;th>Пункт заявки&lt;/th>
&lt;th>Содержание пункта&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>ФИО и должность ответственного за использованием программного обеспечения&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>Кафедра/подразделение&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>Контактная информация (телефон, e-mail, № комнаты)&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>Наименование ПО&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>Тип лицензии (freeware, shareware, коммерческая)&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6&lt;/td>
&lt;td>Операционные системы, под которыми функционирует ПО.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7&lt;/td>
&lt;td>Требование к вычислительным ресурсам (требуемые объём дискового пространства, оперативной памяти, производительность процессора)&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>8&lt;/td>
&lt;td>Прогнозируемая периодичность обновления ПО&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>Форма заполняется разборчиво, печатными буквами русского и латинского алфавитов.&lt;/li>
&lt;li>Необходимо указывать сведения действительные на дату заполнения.&lt;/li>
&lt;li>Обязательно заполнение всех полей.&lt;/li>
&lt;li>Если по какой-то причине вы не можете указать правильную информацию поставьте прочерк «&amp;mdash;».&lt;/li>
&lt;li>Программное обеспечение (ПО) прилагается к заявке на инсталляционном носителе. Так же, при необходимости, поставляются дополнительные файлы (например, заранее подготовленные конфигурационные файлы).&lt;/li>
&lt;li>Кроме того, обязательно прилагается полное описание процедуры автоматической (unattended) установки ПО.&lt;/li>
&lt;/ul>
&lt;h2 id="учётная-форма-пользователя-сети-дисплейных-классов">&lt;span class="section-num">6&lt;/span> Учётная форма пользователя сети дисплейных классов&lt;/h2>
&lt;ul>
&lt;li>Форма заполняется в виде электронной таблицы.&lt;/li>
&lt;li>Файл электронной таблицы передаётся ответственному за обеспечение учебного процесса.&lt;/li>
&lt;li>Для оформления учётных записей студентов форму на всю группу заполняет староста группы.&lt;/li>
&lt;li>На каждого человека должны быть заполнены следующие поля:
&lt;ul>
&lt;li>Фамилия&lt;/li>
&lt;li>Имя&lt;/li>
&lt;li>Отчество&lt;/li>
&lt;li>Номер студбилета&lt;/li>
&lt;li>Код группы&lt;/li>
&lt;li>Номер группы&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>При отсутствии какой-либо информации ячейка остаётся пустой.&lt;/li>
&lt;li>Пример оформления:&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Бендер&lt;/td>
&lt;td>Остап&lt;/td>
&lt;td>Сулейманович&lt;/td>
&lt;td>1111111111&lt;/td>
&lt;td>НБИбд&lt;/td>
&lt;td>05-22&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Набор вещей для системного администратора</title><link>https://yamadharma.github.io/ru/post/2022/09/11/system-administrator-tools/</link><pubDate>Sun, 11 Sep 2022 16:51:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/11/system-administrator-tools/</guid><description>&lt;p>Набор системного администратора.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#ноутбук">&lt;span class="section-num">1&lt;/span> Ноутбук&lt;/a>&lt;/li>
&lt;li>&lt;a href="#персональный-компьютер">&lt;span class="section-num">2&lt;/span> Персональный компьютер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#смартфон">&lt;span class="section-num">3&lt;/span> Смартфон&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#программное-обеспечение-на-смартфоне">&lt;span class="section-num">3.1&lt;/span> Программное обеспечение на смартфоне&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#сервер">&lt;span class="section-num">4&lt;/span> Сервер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#принтер-для-наклеек">&lt;span class="section-num">5&lt;/span> Принтер для наклеек&lt;/a>&lt;/li>
&lt;li>&lt;a href="#инструменты">&lt;span class="section-num">6&lt;/span> Инструменты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#патчкорды-и-переходники">&lt;span class="section-num">7&lt;/span> Патчкорды и переходники&lt;/a>&lt;/li>
&lt;li>&lt;a href="#внешний-dvd-rw-дисковод">&lt;span class="section-num">8&lt;/span> Внешний DVD/RW дисковод&lt;/a>&lt;/li>
&lt;li>&lt;a href="#внешний-usb-жёсткий-диск">&lt;span class="section-num">9&lt;/span> Внешний USB жёсткий диск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#внешний-загрузочный-диск-или-флешка">&lt;span class="section-num">10&lt;/span> Внешний загрузочный диск или флешка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#док-станция--переходник--для-жёстких-дисков">&lt;span class="section-num">11&lt;/span> Док-станция (переходник) для жёстких дисков&lt;/a>&lt;/li>
&lt;li>&lt;a href="#картридер">&lt;span class="section-num">12&lt;/span> Картридер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#рюкзак">&lt;span class="section-num">13&lt;/span> Рюкзак&lt;/a>&lt;/li>
&lt;li>&lt;a href="#софт-и-полезные-программы">&lt;span class="section-num">14&lt;/span> Софт и полезные программы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#аптечка">&lt;span class="section-num">15&lt;/span> Аптечка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="ноутбук">&lt;span class="section-num">1&lt;/span> Ноутбук&lt;/h2>
&lt;ul>
&lt;li>Ноутбук для мобильности (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/04/30/criteria-choosing-laptop/">Критерии выбора ноутбука&lt;/a>).&lt;/li>
&lt;li>Порты:
&lt;ul>
&lt;li>Wi-fi;&lt;/li>
&lt;li>Bluetooth;&lt;/li>
&lt;li>Ethernet;&lt;/li>
&lt;li>USB порты;&lt;/li>
&lt;li>COM-порт (можно и USB-переходник).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="персональный-компьютер">&lt;span class="section-num">2&lt;/span> Персональный компьютер&lt;/h2>
&lt;ul>
&lt;li>Некоторые любят работать на ноутбуках, а я предпочитаю нормальный компьютер (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/07/21/criteria-choosing-personal-computer/">Критерии выбора персонального компьютера&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="смартфон">&lt;span class="section-num">3&lt;/span> Смартфон&lt;/h2>
&lt;ul>
&lt;li>Желательно также зарядку и powerbank.&lt;/li>
&lt;/ul>
&lt;h3 id="программное-обеспечение-на-смартфоне">&lt;span class="section-num">3.1&lt;/span> Программное обеспечение на смартфоне&lt;/h3>
&lt;ul>
&lt;li>Двухфакторная авторизация&lt;/li>
&lt;li>Клиенты удалённого доступа&lt;/li>
&lt;li>Фотокамера&lt;/li>
&lt;li>Навигатор&lt;/li>
&lt;li>Облачные хранилища&lt;/li>
&lt;li>Фонарик&lt;/li>
&lt;li>Почта&lt;/li>
&lt;li>Чат&lt;/li>
&lt;li>Видеоконференции&lt;/li>
&lt;li>Органайзер&lt;/li>
&lt;li>Vpn&lt;/li>
&lt;/ul>
&lt;h2 id="сервер">&lt;span class="section-num">4&lt;/span> Сервер&lt;/h2>
&lt;ul>
&lt;li>Для экспериментов.&lt;/li>
&lt;li>Можно иметь облачный.&lt;/li>
&lt;/ul>
&lt;h2 id="принтер-для-наклеек">&lt;span class="section-num">5&lt;/span> Принтер для наклеек&lt;/h2>
&lt;ul>
&lt;li>Для маркировки кабелей и оборудования.&lt;/li>
&lt;li>Лучше портативный.&lt;/li>
&lt;/ul>
&lt;h2 id="инструменты">&lt;span class="section-num">6&lt;/span> Инструменты&lt;/h2>
&lt;ul>
&lt;li>Набор отвёрток.
&lt;ul>
&lt;li>Маленький набор с самыми востребованными отвёртками, его удобно брать с собой.&lt;/li>
&lt;li>Большой набор стационарно, если понадобится что-то эксклюзивное.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Набор для СКС. Всё для монтажа сети: нож, LAN-тестеры, обжимник.&lt;/li>
&lt;li>Ручной инструмент: молоток, ножовка и т.д.&lt;/li>
&lt;li>Электроинструмент.&lt;/li>
&lt;/ul>
&lt;h2 id="патчкорды-и-переходники">&lt;span class="section-num">7&lt;/span> Патчкорды и переходники&lt;/h2>
&lt;ul>
&lt;li>Несколько патчкордов разной длины.&lt;/li>
&lt;li>Длинные пачкорды: 20 или 30 метров.&lt;/li>
&lt;li>Бухта кабеля в запасе.&lt;/li>
&lt;li>Переходники.&lt;/li>
&lt;li>Кабели питания, USB кабели, оптические патч-корды, консольные кабели.&lt;/li>
&lt;/ul>
&lt;h2 id="внешний-dvd-rw-дисковод">&lt;span class="section-num">8&lt;/span> Внешний DVD/RW дисковод&lt;/h2>
&lt;ul>
&lt;li>Подключение по USB.&lt;/li>
&lt;li>Упаковка чистых болванок.&lt;/li>
&lt;/ul>
&lt;h2 id="внешний-usb-жёсткий-диск">&lt;span class="section-num">9&lt;/span> Внешний USB жёсткий диск&lt;/h2>
&lt;ul>
&lt;li>Для переноса больших объёмов данных.&lt;/li>
&lt;/ul>
&lt;h2 id="внешний-загрузочный-диск-или-флешка">&lt;span class="section-num">10&lt;/span> Внешний загрузочный диск или флешка&lt;/h2>
&lt;ul>
&lt;li>Необходимо для того, чтобы загрузить с него компьютер или сервер.&lt;/li>
&lt;li>Лучше иметь USB/eSATA боксы с возможностью монтировать загруженные на них ISO образы (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/06/06/zalman-zm-ve300/">Контейнер для жесткого диска Zalman ZM-VE300&lt;/a>).&lt;/li>
&lt;li>Хорошо бы сделать загрузочную флешку (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/10/bootable-usb-stick/">Загрузочная флешка&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="док-станция--переходник--для-жёстких-дисков">&lt;span class="section-num">11&lt;/span> Док-станция (переходник) для жёстких дисков&lt;/h2>
&lt;ul>
&lt;li>Для переноса данных с жёстких дисков.&lt;/li>
&lt;li>Интерфейсы: SATA, M2, IDE (3.5&amp;quot; и 2.5&amp;quot;).&lt;/li>
&lt;/ul>
&lt;h2 id="картридер">&lt;span class="section-num">12&lt;/span> Картридер&lt;/h2>
&lt;ul>
&lt;li>Универсальный картридер: microSD, microSDHC, microSDXC.&lt;/li>
&lt;/ul>
&lt;h2 id="рюкзак">&lt;span class="section-num">13&lt;/span> Рюкзак&lt;/h2>
&lt;ul>
&lt;li>Для переноски.&lt;/li>
&lt;li>В рюкзак должны влезать ноутбук, второй ноутбук, папка А4, клавиатура.&lt;/li>
&lt;li>Рюкзак не должен промокать.&lt;/li>
&lt;/ul>
&lt;h2 id="софт-и-полезные-программы">&lt;span class="section-num">14&lt;/span> Софт и полезные программы&lt;/h2>
&lt;ul>
&lt;li>Иметь набор полезных программ и утилит.&lt;/li>
&lt;/ul>
&lt;h2 id="аптечка">&lt;span class="section-num">15&lt;/span> Аптечка&lt;/h2>
&lt;ul>
&lt;li>Набор таблеток.&lt;/li>
&lt;li>Возможны травмы, порезы, ожоги.&lt;/li>
&lt;/ul></description></item><item><title>Регламент доступа к суперкомпьютеру РУДН</title><link>https://yamadharma.github.io/ru/post/2022/09/07/regulations-access-supercomputer-rudn/</link><pubDate>Wed, 07 Sep 2022 14:37:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/07/regulations-access-supercomputer-rudn/</guid><description>&lt;p>Регламент доступа к ресурсам центра коллективного пользования (ЦКП) «Суперкомпьютер» на территории Орджоникидзе, 3.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#регламент">&lt;span class="section-num">1&lt;/span> Регламент&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="регламент">&lt;span class="section-num">1&lt;/span> Регламент&lt;/h2>
&lt;ol>
&lt;li>Пользователь должен получить учётные записи:
&lt;ul>
&lt;li>ЦКП «Суперкомпьютер»;&lt;/li>
&lt;li>дисплейных классов на территории Орджоникидзе, 3.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пользователям ресурсов ЦКП «Суперкомпьютер» категорически запрещается передавать данные своих учётных записей другим лицам.&lt;/li>
&lt;li>Использование предоставленных ресурсов должно производиться только в рамках указанных в регистрационных сведениях проектов.&lt;/li>
&lt;li>Пользователь подтверждает, что разрешает обработку персональных данных, предоставленных им при регистрации.&lt;/li>
&lt;li>Пользователь самостоятельно обеспечивает сохранность и резервное копирование своих данных.&lt;/li>
&lt;li>Для формирования сводных отчётов все пользователи обязуются по требованию администрации предоставлять в недельный срок краткую информацию о проведенных исследованиях, выполненных с использованием ресурсов суперкомпьютерного комплекса.&lt;/li>
&lt;li>В случае изменения каких-либо регистрационных данных пользователь обязуется незамедлительно сообщить об этом администраторам ЦКП «Суперкомпьютер» и дисплейных классов на территории Орджоникидзе, 3.&lt;/li>
&lt;li>Доступ в дисплейные классы для использования ЦКП «Суперкомпьютер» осуществляется согласно расписанию дисплейных классов.&lt;/li>
&lt;li>Пользователь обязан регистрироваться в журнале учёта времени работы на ЦКП «Суперкомпьютер».&lt;/li>
&lt;/ol></description></item><item><title>Rocky Linux. Установка сервера</title><link>https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/</link><pubDate>Fri, 12 Aug 2022 13:57:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/</guid><description>&lt;p>Установка базисного сервера на Rocky Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#дополнительные-стандартные-репозитории">&lt;span class="section-num">1.1&lt;/span> Дополнительные стандартные репозитории&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозитории-сообщества">&lt;span class="section-num">1.2&lt;/span> Репозитории сообщества&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-образа">&lt;span class="section-num">2&lt;/span> Установка образа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#после-установки">&lt;span class="section-num">3&lt;/span> После установки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#обновления">&lt;span class="section-num">3.1&lt;/span> Обновления&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-локализации">&lt;span class="section-num">3.2&lt;/span> Установка локализации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-репозитории">&lt;span class="section-num">3.3&lt;/span> Дополнительные репозитории&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-часового-пояса">&lt;span class="section-num">3.4&lt;/span> Установка часового пояса&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-времени">&lt;span class="section-num">3.5&lt;/span> Синхронизация времени&lt;/a>&lt;/li>
&lt;li>&lt;a href="#разрешение-имён">&lt;span class="section-num">3.6&lt;/span> Разрешение имён&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#systemd-resolved">&lt;span class="section-num">3.6.1&lt;/span> systemd-resolved&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#повышение-комфорта-работы">&lt;span class="section-num">3.7&lt;/span> Повышение комфорта работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отключение-графического-интерфейса">&lt;span class="section-num">3.8&lt;/span> Отключение графического интерфейса&lt;/a>&lt;/li>
&lt;li>&lt;a href="#безопасность">&lt;span class="section-num">3.9&lt;/span> Безопасность&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#fail2ban">&lt;span class="section-num">3.9.1&lt;/span> Fail2ban&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#администрирование">&lt;span class="section-num">3.10&lt;/span> Администрирование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#автоматическое-обновление">&lt;span class="section-num">3.10.1&lt;/span> Автоматическое обновление&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-дополнительного-программного-обеспечения">&lt;span class="section-num">4&lt;/span> Установка дополнительного программного обеспечения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#утилиты">&lt;span class="section-num">4.1&lt;/span> Утилиты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#rsync">&lt;span class="section-num">4.1.1&lt;/span> rsync&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#безопасность">&lt;span class="section-num">4.2&lt;/span> Безопасность&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#работа-с-let-s-encrypt">&lt;span class="section-num">4.2.1&lt;/span> Работа с Let&amp;rsquo;s Encrypt&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#синхронизация-времени">&lt;span class="section-num">4.3&lt;/span> Синхронизация времени&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#systemd-timesyncd">&lt;span class="section-num">4.3.1&lt;/span> systemd-timesyncd&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервер-сетевого-времени">&lt;span class="section-num">4.3.2&lt;/span> Сервер сетевого времени&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#вариации-на-тему-стека-lamp--linux-apache-mysql-php">&lt;span class="section-num">4.4&lt;/span> Вариации на тему стека LAMP (Linux, Apache, MySQL, PHP)&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#apache">&lt;span class="section-num">4.4.1&lt;/span> Apache&lt;/a>&lt;/li>
&lt;li>&lt;a href="#php">&lt;span class="section-num">4.4.2&lt;/span> PHP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#mysql">&lt;span class="section-num">4.4.3&lt;/span> Mysql&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#администрирование">&lt;span class="section-num">4.5&lt;/span> Администрирование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#резервное-копирование">&lt;span class="section-num">4.5.1&lt;/span> Резервное копирование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файловые-системы">&lt;span class="section-num">4.6&lt;/span> Файловые системы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#glusterfs">&lt;span class="section-num">4.6.1&lt;/span> GlusterFS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#dns-сервера">&lt;span class="section-num">4.7&lt;/span> DNS сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#контроль-версий">&lt;span class="section-num">4.8&lt;/span> Контроль версий&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#git">&lt;span class="section-num">4.8.1&lt;/span> git&lt;/a>&lt;/li>
&lt;li>&lt;a href="#cvs">&lt;span class="section-num">4.8.2&lt;/span> cvs&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#средства-разработки">&lt;span class="section-num">4.9&lt;/span> Средства разработки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Rocky Linux &amp;mdash; сборка RedHat Linux, пришедший на смену Centos (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/">Замена Centos&lt;/a>).&lt;/li>
&lt;li>Сайт: &lt;a href="https://rockylinux.org/" target="_blank" rel="noopener">https://rockylinux.org/&lt;/a>.&lt;/li>
&lt;li>Образы:
&lt;ul>
&lt;li>&lt;a href="https://rockylinux.org/download" target="_blank" rel="noopener">https://rockylinux.org/download&lt;/a>;&lt;/li>
&lt;li>&lt;a href="http://dl.rockylinux.org/vault/rocky/" target="_blank" rel="noopener">http://dl.rockylinux.org/vault/rocky/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="дополнительные-стандартные-репозитории">&lt;span class="section-num">1.1&lt;/span> Дополнительные стандартные репозитории&lt;/h3>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Стандартные дополнительные репозитории
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Repository&lt;/th>
&lt;th>Rocky 8&lt;/th>
&lt;th>Rocky 9&lt;/th>
&lt;th>Включён&lt;/th>
&lt;th>Примечание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Extras&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Дополнительные функции, не нарушающие совместимость исходного кода&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Plus&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Либо заменяет стандартный компонент, либо под одну архитектуру&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>RT (real time)&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>No&lt;/td>
&lt;td>Пакеты для&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NFV&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>TBD&lt;/td>
&lt;td>No&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SAP / SAP HANA&lt;/td>
&lt;td>No&lt;/td>
&lt;td>TBD&lt;/td>
&lt;td>No&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Devel / devel&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>No&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="репозитории-сообщества">&lt;span class="section-num">1.2&lt;/span> Репозитории сообщества&lt;/h3>
&lt;ul>
&lt;li>Дополнительные пакеты для Enterprise Linux (EPEL):
&lt;ul>
&lt;li>документация: &lt;a href="http://fedoraproject.org/wiki/EPEL" target="_blank" rel="noopener">http://fedoraproject.org/wiki/EPEL&lt;/a>;&lt;/li>
&lt;li>наиболее часто используемй репозиторий;&lt;/li>
&lt;li>сборки пакетов Fedora для каждого поддерживаемого корпоративного Linux;&lt;/li>
&lt;li>пакеты не заменяют базовые;&lt;/li>
&lt;li>установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf config-manager --set-enabled crb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Репозиторий Community Enterprise Linux (ELRepo):
&lt;ul>
&lt;li>фокусируется на более новых ядрах и пакетах драйверов kmod для улучшения поддержки оборудования;&lt;/li>
&lt;li>репозитории ядра должны быть включены для его использования;&lt;/li>
&lt;li>установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install elrepo-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>RPM Fusion:
&lt;ul>
&lt;li>программное обеспечение, которое Fedora Project или Red Hat не хотят поставлять в Enterprise Linux и Fedora;&lt;/li>
&lt;li>базовые пакеты не заменяются;&lt;/li>
&lt;li>установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install rpmfusion-free-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Репозиторий Remi:
&lt;ul>
&lt;li>сайт: &lt;a href="http://rpms.remirepo.net/" target="_blank" rel="noopener">http://rpms.remirepo.net/&lt;/a>;&lt;/li>
&lt;li>поддерживает большую коллекцию RPM, включая, среди прочего, последние версии PHP;&lt;/li>
&lt;li>это коллекция репозиториев;&lt;/li>
&lt;li>документация: &lt;a href="http://blog.remirepo.net/pages/English-FAQ" target="_blank" rel="noopener">http://blog.remirepo.net/pages/English-FAQ&lt;/a>;&lt;/li>
&lt;li>может конфликтовать с другими сторонними репозиториями.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>GhettoForge:
&lt;ul>
&lt;li>документация: &lt;a href="http://ghettoforge.org/index.php/Usage" target="_blank" rel="noopener">http://ghettoforge.org/index.php/Usage&lt;/a>;&lt;/li>
&lt;li>пакеты, которых нет в других сторонних репозиториях;&lt;/li>
&lt;li>пакеты, перезаписывающие базу, будут в репозитории &lt;code>gf-plus&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка-образа">&lt;span class="section-num">2&lt;/span> Установка образа&lt;/h2>
&lt;h2 id="после-установки">&lt;span class="section-num">3&lt;/span> После установки&lt;/h2>
&lt;ul>
&lt;li>Здесь даны общие шаги для большей части серверов.&lt;/li>
&lt;/ul>
&lt;h3 id="обновления">&lt;span class="section-num">3.1&lt;/span> Обновления&lt;/h3>
&lt;ul>
&lt;li>Обновить все пакеты
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-локализации">&lt;span class="section-num">3.2&lt;/span> Установка локализации&lt;/h3>
&lt;ul>
&lt;li>Проверьте текущую локализацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">localectl status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Посмотрите доступные локализации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">localectl list-locales
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если нет необходимой, установите её:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install glibc-langpack-ru
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите нужную локализацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">localectl set-locale ru_RU.UTF-8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте текущую локализацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">localectl status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="дополнительные-репозитории">&lt;span class="section-num">3.3&lt;/span> Дополнительные репозитории&lt;/h3>
&lt;ul>
&lt;li>Установим &lt;em>EPEL&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf config-manager --set-enabled crb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf -y install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-часового-пояса">&lt;span class="section-num">3.4&lt;/span> Установка часового пояса&lt;/h3>
&lt;ul>
&lt;li>Просмотрите список всех часовых поясов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl list-timezones
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите часовой пояс (например, UTC):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl set-timezone Etc/UTC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-времени">&lt;span class="section-num">3.5&lt;/span> Синхронизация времени&lt;/h3>
&lt;ul>
&lt;li>Запустите демон:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now chronyd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте работу демона &lt;code>chronyd&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chronyc -a tracking
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Включите сетевую синхронизацию времени:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl set-ntp &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте, работает ли он:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="разрешение-имён">&lt;span class="section-num">3.6&lt;/span> Разрешение имён&lt;/h3>
&lt;h4 id="systemd-resolved">&lt;span class="section-num">3.6.1&lt;/span> systemd-resolved&lt;/h4>
&lt;ul>
&lt;li>Можно установить кеширующий локальный name-server &lt;code>systemd-resolved&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install systemd-resolved
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Файл настройки: &lt;code>/etc/systemd/resolved.conf&lt;/code>.&lt;/li>
&lt;li>Можно в нём ничего не менять.&lt;/li>
&lt;li>Запустим службу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now systemd-resolved.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите резольвер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -snf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверить работу можно командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">resolvectl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="повышение-комфорта-работы">&lt;span class="section-num">3.7&lt;/span> Повышение комфорта работы&lt;/h3>
&lt;ul>
&lt;li>Программы для удобства работы в консоли:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install tmux perl-DateTime-HiRes mc kitty-terminfo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Программы мониторинга:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install htop lsof
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Утилита для ssh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install mosh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удобство работы с bash:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install bash-completion bash-color-prompt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Разные утилиты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install wget git tar zstd p7zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="отключение-графического-интерфейса">&lt;span class="section-num">3.8&lt;/span> Отключение графического интерфейса&lt;/h3>
&lt;ul>
&lt;li>Посмотрите, в каком режиме загружается сервер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl get-default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если результатом является &lt;code>graphical.target&lt;/code>, то отключите загрузку графического интерфейса.&lt;/li>
&lt;li>Переключите на загрузку в терминальном многопользовательском режиме:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl set-default multi-user.target
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="безопасность">&lt;span class="section-num">3.9&lt;/span> Безопасность&lt;/h3>
&lt;h4 id="fail2ban">&lt;span class="section-num">3.9.1&lt;/span> Fail2ban&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Защита от атак:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install fail2ban
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Следует сконфигурировать (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/10/30/fail2ban-basic-settings/">fail2ban. Основные настройки&lt;/a>) и запустить:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now fail2ban.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверьте работу:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tail -f /var/log/fail2ban.log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="администрирование">&lt;span class="section-num">3.10&lt;/span> Администрирование&lt;/h3>
&lt;h4 id="автоматическое-обновление">&lt;span class="section-num">3.10.1&lt;/span> Автоматическое обновление&lt;/h4>
&lt;ul>
&lt;li>При необходимости можно использовать автоматическое обновление (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/09/25/redhat-based-systems-auto-update/">Автообновление систем на базе деривативов RedHat&lt;/a>).&lt;/li>
&lt;li>Установка программного обеспечения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install dnf-automatic
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Задаёте необходимую конфигурацию в файле &lt;code>/etc/dnf/automatic.conf&lt;/code>.&lt;/li>
&lt;li>Запустите таймер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now dnf-automatic.timer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-дополнительного-программного-обеспечения">&lt;span class="section-num">4&lt;/span> Установка дополнительного программного обеспечения&lt;/h2>
&lt;ul>
&lt;li>Описываются дополнительные пакеты для специализированных серверов.&lt;/li>
&lt;/ul>
&lt;h3 id="утилиты">&lt;span class="section-num">4.1&lt;/span> Утилиты&lt;/h3>
&lt;h4 id="rsync">&lt;span class="section-num">4.1.1&lt;/span> rsync&lt;/h4>
&lt;ul>
&lt;li>Установим rsync:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install rsync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="безопасность">&lt;span class="section-num">4.2&lt;/span> Безопасность&lt;/h3>
&lt;h4 id="работа-с-let-s-encrypt">&lt;span class="section-num">4.2.1&lt;/span> Работа с Let&amp;rsquo;s Encrypt&lt;/h4>
&lt;ul>
&lt;li>Установим certbot:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install certbot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим модуль под Apache:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install python3-certbot-apache
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если используется Nginx, установим модуль под Nginx:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">install certbot python3-certbot-nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-времени">&lt;span class="section-num">4.3&lt;/span> Синхронизация времени&lt;/h3>
&lt;h4 id="systemd-timesyncd">&lt;span class="section-num">4.3.1&lt;/span> systemd-timesyncd&lt;/h4>
&lt;ul>
&lt;li>Можно использовать альтернативный метод синхронизации времени из пакета systemd.&lt;/li>
&lt;li>Установите демон синхронизации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install systemd-timesyncd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запустите демон:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now systemd-timesyncd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Включите сетевую синхронизацию времени:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl set-ntp &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте, работает ли он:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подробная информация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">timedatectl timesync-status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="сервер-сетевого-времени">&lt;span class="section-num">4.3.2&lt;/span> Сервер сетевого времени&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>В файле &lt;code>/etc/chrony.conf&lt;/code> Разрешите подключение клиентов из локальной сети:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">allow 192.168.0.0/16
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Запустите сервер сетевого времени:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now chronyd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверьте пулы NTP:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chronyc sources
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Проверьте состояние синхронизации NTP:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chronyc tracking
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Чтобы принимать входящие запросы клиентов, разрешите службу NTP через брандмауэр:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --permanent --add-service&lt;span class="o">=&lt;/span>ntp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Перезапустите брандмауэр:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="вариации-на-тему-стека-lamp--linux-apache-mysql-php">&lt;span class="section-num">4.4&lt;/span> Вариации на тему стека LAMP (Linux, Apache, MySQL, PHP)&lt;/h3>
&lt;ul>
&lt;li>Устанавливается, если необходимо поддерживать приложение на PHP.&lt;/li>
&lt;li>Обычно используются базы данных Mysql или Postgresql.&lt;/li>
&lt;/ul>
&lt;h4 id="apache">&lt;span class="section-num">4.4.1&lt;/span> Apache&lt;/h4>
&lt;ul>
&lt;li>Установка Apache:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install httpd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка поддержки HTTPS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install mod_ssl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="php">&lt;span class="section-num">4.4.2&lt;/span> PHP&lt;/h4>
&lt;ul>
&lt;li>Установим php:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="mysql">&lt;span class="section-num">4.4.3&lt;/span> Mysql&lt;/h4>
&lt;ul>
&lt;li>Установим &lt;em>mariadb&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install mariadb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install mariadb-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим модуль для php:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install php-mysqlnd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="администрирование">&lt;span class="section-num">4.5&lt;/span> Администрирование&lt;/h3>
&lt;h4 id="резервное-копирование">&lt;span class="section-num">4.5.1&lt;/span> Резервное копирование&lt;/h4>
&lt;ul>
&lt;li>Для резервного копирования используется &lt;em>restic&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install restic
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="файловые-системы">&lt;span class="section-num">4.6&lt;/span> Файловые системы&lt;/h3>
&lt;h4 id="glusterfs">&lt;span class="section-num">4.6.1&lt;/span> GlusterFS&lt;/h4>
&lt;ul>
&lt;li>Установите пакет для последнего релиза GlusterFS (см. &lt;a href="https://wiki.centos.org/SpecialInterestGroup/Storage" target="_blank" rel="noopener">https://wiki.centos.org/SpecialInterestGroup/Storage&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install centos-release-gluster
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка клиента GlusterFS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install glusterfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dnf install glusterfs-fuse
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="dns-сервера">&lt;span class="section-num">4.7&lt;/span> DNS сервера&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/05/23/dns-powerdns-recursor/">DNS. PowerDNS Recursor&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/19/dns-bind/">DNS. Bind&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="контроль-версий">&lt;span class="section-num">4.8&lt;/span> Контроль версий&lt;/h3>
&lt;h4 id="git">&lt;span class="section-num">4.8.1&lt;/span> git&lt;/h4>
&lt;ul>
&lt;li>Установите &lt;code>git&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="cvs">&lt;span class="section-num">4.8.2&lt;/span> cvs&lt;/h4>
&lt;ul>
&lt;li>Установите &lt;code>cvs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install cvs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="средства-разработки">&lt;span class="section-num">4.9&lt;/span> Средства разработки&lt;/h3>
&lt;ul>
&lt;li>Установим группу средств разработки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y group install &lt;span class="s2">&amp;#34;Development Tools&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Утилита module</title><link>https://yamadharma.github.io/ru/post/2022/07/24/module-utility/</link><pubDate>Sun, 24 Jul 2022 16:14:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/07/24/module-utility/</guid><description>&lt;p>Утилита управления переменными окружения.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#environment-modules">&lt;span class="section-num">1.1&lt;/span> Environment Modules&lt;/a>&lt;/li>
&lt;li>&lt;a href="#lmod">&lt;span class="section-num">1.2&lt;/span> Lmod&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">2&lt;/span> Использование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#основные-команды">&lt;span class="section-num">2.1&lt;/span> Основные команды&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примеры-использования">&lt;span class="section-num">2.2&lt;/span> Примеры использования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Для удобства управления переменными окружения используется утилита &lt;code>module&lt;/code>.&lt;/li>
&lt;li>Каждому приложению соответствует конфигурационный файл (модуль), описывающий, как необходимо изменить переменные окружения для работы данного приложения.&lt;/li>
&lt;li>Состояния модуля:
&lt;ul>
&lt;li>загружен: необходимые значения добавляются к текущим переменным окружения;&lt;/li>
&lt;li>выгружен: настройки, соответствующие данному приложению, удаляются из переменных окружения.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Возможно независимо управлять несколькими модулями.&lt;/li>
&lt;li>Существует несколько программ, реализующих утилиту &lt;code>module&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="environment-modules">&lt;span class="section-num">1.1&lt;/span> Environment Modules&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://modules.sourceforge.net/" target="_blank" rel="noopener">http://modules.sourceforge.net/&lt;/a>.&lt;/li>
&lt;li>Докуменация на английском языке: &lt;a href="http://modules.sourceforge.net/man/module.html" target="_blank" rel="noopener">http://modules.sourceforge.net/man/module.html&lt;/a>.&lt;/li>
&lt;li>Оригинальная утилита.&lt;/li>
&lt;li>Создана примерно в 1990 году.&lt;/li>
&lt;/ul>
&lt;h3 id="lmod">&lt;span class="section-num">1.2&lt;/span> Lmod&lt;/h3>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.tacc.utexas.edu/research-development/tacc-projects/lmod" target="_blank" rel="noopener">https://www.tacc.utexas.edu/research-development/tacc-projects/lmod&lt;/a>.&lt;/li>
&lt;li>Докуменация на английском языке: &lt;a href="https://lmod.readthedocs.io/" target="_blank" rel="noopener">https://lmod.readthedocs.io/&lt;/a>.&lt;/li>
&lt;li>Развитие &lt;em>Environment Modules&lt;/em>.
&lt;ul>
&lt;li>Поддерживает файлы конфигурации &lt;em>Environment Modules&lt;/em>;&lt;/li>
&lt;li>совместимая на уровне параметров командной строки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">2&lt;/span> Использование&lt;/h2>
&lt;h3 id="основные-команды">&lt;span class="section-num">2.1&lt;/span> Основные команды&lt;/h3>
&lt;ul>
&lt;li>&lt;code>module avail&lt;/code> : вывести список доступных модулей;&lt;/li>
&lt;li>&lt;code>module list&lt;/code> : вывести список загруженных модулей;&lt;/li>
&lt;li>&lt;code>module load module1&lt;/code> : загрузить модуль module1 версии version;&lt;/li>
&lt;li>&lt;code>module unload module1&lt;/code> : выгрузить модуль module1 версии version;&lt;/li>
&lt;li>&lt;code>module swap module1 module2&lt;/code> : заменить загруженный модуль module1 на module2;&lt;/li>
&lt;li>&lt;code>module purge&lt;/code> : выгрузить все загруженные модули;&lt;/li>
&lt;li>&lt;code>module whatis module1&lt;/code> : показать информацию о модуле module1;&lt;/li>
&lt;li>&lt;code>module save [env_name]&lt;/code> : сохранить текущий набор загруженных модулей под именем env_name. Если не указывать имя, то набор будет перезаписан набор по умолчанию;&lt;/li>
&lt;li>&lt;code>module restore [env_name]&lt;/code> : загрузить набор сохранённых модулей;&lt;/li>
&lt;li>&lt;code>module describe [env_name]&lt;/code> : показать состав набора сохранённых модулей&lt;/li>
&lt;/ul>
&lt;h3 id="примеры-использования">&lt;span class="section-num">2.2&lt;/span> Примеры использования&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Просмотр загруженных модулей:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ module list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Currently Loaded Modules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> autotools 2&lt;span class="o">)&lt;/span> prun/1.2 3&lt;span class="o">)&lt;/span> gnu7/7.3.0 4&lt;span class="o">)&lt;/span> openmpi3/3.1.3 5&lt;span class="o">)&lt;/span> ohpc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Просмотр доступных модулей:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ module avail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">​- /opt/ohpc/pub/modulefiles -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CUDA/10.0 cnpy_lib/1.0 hpcx/hpcx-stack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Python/Anaconda_v10.2019 gnu7/7.3.0 &lt;span class="o">(&lt;/span>L&lt;span class="o">)&lt;/span> hpcx/hpcx &lt;span class="o">(&lt;/span>D&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">EasyBuild/3.7.1 fltk/v1.3.5 hwloc/1.11.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Где:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">D: модуль, загружаемый по умолчанию&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">L: модуль, загруженный в настоящий момент.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Пример: выгрузка всех модулей и загрузка модулей CUDA/10.2 и Python/Anaconda_v10.2019:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ module purge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ module load CUDA/10.2 Python/Anaconda_v10.2019
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ module list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Currently Loaded Modules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> CUDA/10.2 2&lt;span class="o">)&lt;/span> Python/Anaconda_v10.2019
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Сохранение набора модулей по умолчанию:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ module save
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Saved current collection of modules to: &lt;span class="s2">&amp;#34;default&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Virtual Desktop Infrastructure</title><link>https://yamadharma.github.io/ru/post/2022/07/23/virtual-desktop-infrastructure/</link><pubDate>Sat, 23 Jul 2022 19:29:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/07/23/virtual-desktop-infrastructure/</guid><description>&lt;p>Инфраструктура виртуальных рабочих столов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#обшая-информация">&lt;span class="section-num">1&lt;/span> Обшая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-элементы-vdi">&lt;span class="section-num">2&lt;/span> Основные элементы VDI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#программное-обеспечение">&lt;span class="section-num">3&lt;/span> Программное обеспечение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#свободное">&lt;span class="section-num">3.1&lt;/span> Свободное&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ravada-vdi">&lt;span class="section-num">3.1.1&lt;/span> Ravada VDI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#openuds">&lt;span class="section-num">3.1.2&lt;/span> OpenUDS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="обшая-информация">&lt;span class="section-num">1&lt;/span> Обшая информация&lt;/h2>
&lt;ul>
&lt;li>Virtual Desktop Infrastructure (VDI) &amp;mdash; инфраструктура виртуальных рабочих столов.&lt;/li>
&lt;li>Общее название идеологии, согласно которой сотрудники для выполнения своих задач используют удаленные рабочие места, организованные на виртуальных машинах.&lt;/li>
&lt;li>Эта концепция похожа на использование терминального сервера.&lt;/li>
&lt;li>Отличается тем, что такой терминальный сервер организуется в виртуальной машине для каждого сотрудника отдельно.&lt;/li>
&lt;/ul>
&lt;h2 id="основные-элементы-vdi">&lt;span class="section-num">2&lt;/span> Основные элементы VDI&lt;/h2>
&lt;ul>
&lt;li>Система управления виртуальными машинами.&lt;/li>
&lt;li>Брокер соединений от пользователя к виртуальным машинам, единая точка входа пользователей с аутентификацией.&lt;/li>
&lt;li>Клиентское приложение или web-приложение для доступа к удалённому рабочему месту.&lt;/li>
&lt;li>Использование эталонного образа виртуальной машины, который будет клонироваться при создании виртуальной машины.&lt;/li>
&lt;li>Возможность создавать виртуальные машины по требованию пользователя.&lt;/li>
&lt;li>Сквозная аутентификация (SSO) в системе управления VDI и гостевой ОС внутри виртуальной машины.&lt;/li>
&lt;li>Возможность выполнения дополнительных скриптов и применения настроек после разворачивания виртуальной машины.&lt;/li>
&lt;/ul>
&lt;h2 id="программное-обеспечение">&lt;span class="section-num">3&lt;/span> Программное обеспечение&lt;/h2>
&lt;h3 id="свободное">&lt;span class="section-num">3.1&lt;/span> Свободное&lt;/h3>
&lt;h4 id="ravada-vdi">&lt;span class="section-num">3.1.1&lt;/span> Ravada VDI&lt;/h4>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://ravada.upc.edu/" target="_blank" rel="noopener">https://ravada.upc.edu/&lt;/a>&lt;/li>
&lt;li>Минимальный вариант VDI.&lt;/li>
&lt;li>Особенности:
&lt;ul>
&lt;li>KVM-бэкенд для Windows и Linux ВМ;&lt;/li>
&lt;li>режим киоска;&lt;/li>
&lt;li>удаленный доступ по протоколу Spice;&lt;/li>
&lt;li>быстрое клонирование ВМ для каждого пользователя;&lt;/li>
&lt;li>проброс USB-устройств;&lt;/li>
&lt;li>настраиваемый интерфейс конечных пользователей;&lt;/li>
&lt;li>администрирование из веб-браузера.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="openuds">&lt;span class="section-num">3.1.2&lt;/span> OpenUDS&lt;/h4>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/dkmstr/openuds" target="_blank" rel="noopener">https://github.com/dkmstr/openuds&lt;/a>.&lt;/li>
&lt;li>Продвинутая VDI.&lt;/li>
&lt;li>Использует различные системы управления VM (PVE, OpenNebula, OpenStack).&lt;/li>
&lt;/ul></description></item><item><title>Принципы работы на суперкомпьютере</title><link>https://yamadharma.github.io/ru/post/2022/07/22/principles-using-supercomputer/</link><pubDate>Fri, 22 Jul 2022 10:51:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/07/22/principles-using-supercomputer/</guid><description>&lt;p>Общие положения по работе клиентов на суперкомпьютере.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#что-такое-суперкомпьютер-кластер">&lt;span class="section-num">1&lt;/span> Что такое суперкомпьютер-кластер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#этапы-работы-на-суперкомпьютере">&lt;span class="section-num">2&lt;/span> Этапы работы на суперкомпьютере&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удаленный-доступ-к-суперкомпьютеру">&lt;span class="section-num">3&lt;/span> Удаленный доступ к суперкомпьютеру&lt;/a>&lt;/li>
&lt;li>&lt;a href="#передача-файлов-на-суперкомпьютер">&lt;span class="section-num">4&lt;/span> Передача файлов на суперкомпьютер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#хранение-файлов">&lt;span class="section-num">5&lt;/span> Хранение файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="что-такое-суперкомпьютер-кластер">&lt;span class="section-num">1&lt;/span> Что такое суперкомпьютер-кластер&lt;/h2>
&lt;ul>
&lt;li>Вычислительный кластер (суперкомпьютер) состоит из вычислительных узлов, объединенных высокоскоростной коммуникационной сетью.&lt;/li>
&lt;li>Каждый вычислительный узел имеет свою оперативную память и твердотельный накопитель, а также подключен к общему параллельному сетевому хранилищу.&lt;/li>
&lt;li>Чтобы независимые вычислительные узлы работали как единый компьютер, используется специальное параллельное программное обеспечение.&lt;/li>
&lt;li>Пользователь подключается к управляющему узлу, на котором нельзя запускать расчёты, с него можно только выполнять постановку задач в очередь.&lt;/li>
&lt;li>Непосредственное же выполнение расчётов происходит на мощных вычислительных узлах кластера, на которые задачи распределяет менеждер очереди задач (программа).&lt;/li>
&lt;/ul>
&lt;h2 id="этапы-работы-на-суперкомпьютере">&lt;span class="section-num">2&lt;/span> Этапы работы на суперкомпьютере&lt;/h2>
&lt;ul>
&lt;li>Пользователь подготавливает на своём компьютере исходные данные для имеющегося прикладного программного обеспечения суперкомпьютера или пишет собственную параллельную программу.&lt;/li>
&lt;li>Пользователь подключается к головному узлу кластера по SSH-протоколу (консолью), загружает исходные данные и ставит свою задачу в очередь на расчёт.&lt;/li>
&lt;li>Пользователь загружает результат с вычислительного кластера на свой персональный компьютер и изучает его локально.&lt;/li>
&lt;/ul>
&lt;h2 id="удаленный-доступ-к-суперкомпьютеру">&lt;span class="section-num">3&lt;/span> Удаленный доступ к суперкомпьютеру&lt;/h2>
&lt;ul>
&lt;li>Удалённое подключение к суперкомпьютеру осуществляется через головной узел по протоколу SSH.&lt;/li>
&lt;li>В операционных системах Linux и Mac OS для подключения используется приложение ssh, для Microsoft Windows рекомендуется свободно распространяемая программа PuTTY.&lt;/li>
&lt;/ul>
&lt;h2 id="передача-файлов-на-суперкомпьютер">&lt;span class="section-num">4&lt;/span> Передача файлов на суперкомпьютер&lt;/h2>
&lt;ul>
&lt;li>Для передачи файлов на вычислительный кластер воспользуйтесь программами, поддерживающими протокол SFTP.&lt;/li>
&lt;li>Для MS Windows рекомендуется программа WinSCP, для ОС Linux &amp;mdash; scp, для MacOS &amp;mdash; программы scp/Cyberduck/Mountain Duck.&lt;/li>
&lt;/ul>
&lt;h2 id="хранение-файлов">&lt;span class="section-num">5&lt;/span> Хранение файлов&lt;/h2>
&lt;ul>
&lt;li>В соответствии с правилами, пользователь самостоятельно обеспечивает резервное копирование своих данных.&lt;/li>
&lt;li>Хранение данных, которые уже не участвуют в вычислениях, на суперкомпьютере не допускается.&lt;/li>
&lt;li>Пользовательские директории имеют вид /home/&amp;lt;имя_пользователя&amp;gt;.&lt;/li>
&lt;li>Максимальный объем данных для пользователя обусловлен дисковой квотой, определяемой при регистрации.&lt;/li>
&lt;li>Для просмотра текущей квоты используйте команду checkquota.&lt;/li>
&lt;li>Кроме того, на каждом вычислительном узле доступен локальный каталог для временных файлов (&lt;code>/tmp&lt;/code>). После окончания работы программы временные файлы пользователя в &lt;code>/tmp&lt;/code> узла удаляются автоматически.&lt;/li>
&lt;/ul></description></item><item><title>Критерии выбора персонального компьютера</title><link>https://yamadharma.github.io/ru/post/2022/07/21/criteria-choosing-personal-computer/</link><pubDate>Thu, 21 Jul 2022 20:17:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/07/21/criteria-choosing-personal-computer/</guid><description>&lt;p>Критерии выбора персонального компьютера.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#область-применения">&lt;span class="section-num">1&lt;/span> Область применения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#универсальные">&lt;span class="section-num">1.1&lt;/span> Универсальные&lt;/a>&lt;/li>
&lt;li>&lt;a href="#для-развлечения--мультимедийные">&lt;span class="section-num">1.2&lt;/span> Для развлечения (мультимедийные)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#игровые">&lt;span class="section-num">1.3&lt;/span> Игровые&lt;/a>&lt;/li>
&lt;li>&lt;a href="#рабочие-станции">&lt;span class="section-num">1.4&lt;/span> Рабочие станции&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пафосные">&lt;span class="section-num">1.5&lt;/span> Пафосные&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#комплектация">&lt;span class="section-num">2&lt;/span> Комплектация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#диск">&lt;span class="section-num">2.1&lt;/span> Диск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#оперативная-память">&lt;span class="section-num">2.2&lt;/span> Оперативная память&lt;/a>&lt;/li>
&lt;li>&lt;a href="#экран">&lt;span class="section-num">2.3&lt;/span> Экран&lt;/a>&lt;/li>
&lt;li>&lt;a href="#видеокарта">&lt;span class="section-num">2.4&lt;/span> Видеокарта&lt;/a>&lt;/li>
&lt;li>&lt;a href="#интерфейсы">&lt;span class="section-num">2.5&lt;/span> Интерфейсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#цена">&lt;span class="section-num">3&lt;/span> Цена&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="область-применения">&lt;span class="section-num">1&lt;/span> Область применения&lt;/h2>
&lt;h3 id="универсальные">&lt;span class="section-num">1.1&lt;/span> Универсальные&lt;/h3>
&lt;h3 id="для-развлечения--мультимедийные">&lt;span class="section-num">1.2&lt;/span> Для развлечения (мультимедийные)&lt;/h3>
&lt;h3 id="игровые">&lt;span class="section-num">1.3&lt;/span> Игровые&lt;/h3>
&lt;h3 id="рабочие-станции">&lt;span class="section-num">1.4&lt;/span> Рабочие станции&lt;/h3>
&lt;h3 id="пафосные">&lt;span class="section-num">1.5&lt;/span> Пафосные&lt;/h3>
&lt;ul>
&lt;li>Чаще всего фирмы Apple.&lt;/li>
&lt;/ul>
&lt;h2 id="комплектация">&lt;span class="section-num">2&lt;/span> Комплектация&lt;/h2>
&lt;h3 id="диск">&lt;span class="section-num">2.1&lt;/span> Диск&lt;/h3>
&lt;ul>
&lt;li>Только SSD.
&lt;ul>
&lt;li>Ёмкость &amp;mdash; не менее 512 GB.&lt;/li>
&lt;li>На данный момент оптимальный размер &amp;mdash; 1 TB.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>HDD может использоваться для архивного хранения, но не для работы.&lt;/li>
&lt;/ul>
&lt;h3 id="оперативная-память">&lt;span class="section-num">2.2&lt;/span> Оперативная память&lt;/h3>
&lt;ul>
&lt;li>Минимальный объём &amp;mdash; 16 GB.&lt;/li>
&lt;li>Оптимальный объём &amp;mdash; 32 GB.&lt;/li>
&lt;li>Рекомендуемый объём &amp;mdash; 64 GB.&lt;/li>
&lt;/ul>
&lt;h3 id="экран">&lt;span class="section-num">2.3&lt;/span> Экран&lt;/h3>
&lt;ul>
&lt;li>Разрешение:
&lt;ul>
&lt;li>Минимальное: 1920x1080 (&lt;em>Full HD&lt;/em>).&lt;/li>
&lt;li>Рекомендуемое: 4K &amp;mdash; 3840×2160 (Ultra HD 4K).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Частота обновления:
&lt;ul>
&lt;li>Минимальная: 60 Гц.&lt;/li>
&lt;li>Рекомендуемая: 144Гц (минимум 120 Гц).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Диагональ:
&lt;ul>
&lt;li>27&amp;rsquo;&amp;rsquo;&amp;ndash;32&amp;rsquo;'.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Тип матрицы
&lt;ul>
&lt;li>Лучше не брать &lt;em>TN+Film&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="видеокарта">&lt;span class="section-num">2.4&lt;/span> Видеокарта&lt;/h3>
&lt;ul>
&lt;li>Начальный уровень:
&lt;ul>
&lt;li>Интегрированная видеокарта (Intel, AMD).&lt;/li>
&lt;li>GeForce GTX 1650.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Средний уровень:
&lt;ul>
&lt;li>GeForce GTX 1660 SUPER, GeForce RTX 2070 SUPER.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Высокий уровень:
&lt;ul>
&lt;li>GeForce RTX 2080 SUPER.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="интерфейсы">&lt;span class="section-num">2.5&lt;/span> Интерфейсы&lt;/h3>
&lt;ul>
&lt;li>USB:
&lt;ul>
&lt;li>не менее двух разъемов USB 3.0/3.1 формата USB-A;&lt;/li>
&lt;li>желательно наличие USB-C.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Разъём M.2.&lt;/li>
&lt;li>Ethernet 1000 Gbps или 10000 Gbps.&lt;/li>
&lt;li>WiFi &amp;mdash; полезен.&lt;/li>
&lt;li>Bluetooth &amp;mdash; полезен.&lt;/li>
&lt;li>HDMI 2.1.&lt;/li>
&lt;li>Displayport 2.0.&lt;/li>
&lt;/ul>
&lt;h2 id="цена">&lt;span class="section-num">3&lt;/span> Цена&lt;/h2>
&lt;ul>
&lt;li>Нижняя граница цены на приемлемый системный блок &amp;mdash; $1200.&lt;/li>
&lt;/ul></description></item><item><title>Маршрутизация. VyOS</title><link>https://yamadharma.github.io/ru/post/2022/06/03/routing-vyos/</link><pubDate>Fri, 03 Jun 2022 12:24:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/06/03/routing-vyos/</guid><description>&lt;p>Программный маршрутизатор &lt;em>VyOS&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#модель-распространения">&lt;span class="section-num">2&lt;/span> Модель распространения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#функционал">&lt;span class="section-num">3&lt;/span> Функционал&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурирование">&lt;span class="section-num">4&lt;/span> Конфигурирование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#быстрая-настройка">&lt;span class="section-num">4.1&lt;/span> Быстрая настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#режим-конфигурации">&lt;span class="section-num">4.1.1&lt;/span> Режим конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сохранение">&lt;span class="section-num">4.1.2&lt;/span> Сохранение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-интерфейсов">&lt;span class="section-num">4.1.3&lt;/span> Конфигурация интерфейсов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ssh-сервер">&lt;span class="section-num">4.1.4&lt;/span> SSH-сервер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервисы-dhcp-и-dns">&lt;span class="section-num">4.1.5&lt;/span> Сервисы DHCP и DNS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-nat">&lt;span class="section-num">4.1.6&lt;/span> Настройка NAT&lt;/a>&lt;/li>
&lt;li>&lt;a href="#брандмауэр">&lt;span class="section-num">4.1.7&lt;/span> Брандмауэр&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-безопасности">&lt;span class="section-num">4.1.8&lt;/span> Настройка безопасности&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#образы-операционной-системы">&lt;span class="section-num">5&lt;/span> Образы операционной системы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайты.
&lt;ul>
&lt;li>Сайт: &lt;a href="https://vyos.net/" target="_blank" rel="noopener">https://vyos.net/&lt;/a>.&lt;/li>
&lt;li>Коммерческий сайт: &lt;a href="https://vyos.io/" target="_blank" rel="noopener">https://vyos.io/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/vyos/vyos-1x" target="_blank" rel="noopener">https://github.com/vyos/vyos-1x&lt;/a>.&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.vyos.io/" target="_blank" rel="noopener">https://docs.vyos.io/&lt;/a>.&lt;/li>
&lt;li>Документация в &lt;code>pdf&lt;/code>: &lt;a href="https://buildmedia.readthedocs.org/media/pdf/vyos/latest/vyos.pdf" target="_blank" rel="noopener">https://buildmedia.readthedocs.org/media/pdf/vyos/latest/vyos.pdf&lt;/a>.&lt;/li>
&lt;li>Блог: &lt;a href="https://blog.vyos.io/" target="_blank" rel="noopener">https://blog.vyos.io/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Поддержка Vagrant (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/12/using-vagrant/">Использование vagrant&lt;/a>).
&lt;ul>
&lt;li>Образы для Vagrant: &lt;a href="https://app.vagrantup.com/vyos/" target="_blank" rel="noopener">https://app.vagrantup.com/vyos/&lt;/a>.&lt;/li>
&lt;li>Плагин для Vagrant: &lt;a href="https://github.com/higebu/vagrant-vyos" target="_blank" rel="noopener">https://github.com/higebu/vagrant-vyos&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Форк проекта &lt;em>Vyatta&lt;/em>.&lt;/li>
&lt;li>Реализовано на основе дистрибутива Debian.&lt;/li>
&lt;li>Система команд похожа на Juniper.&lt;/li>
&lt;li>Подсистема маршрутизации основывается на проекте FRRouting (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/06/02/routing-frrouting/">Маршрутизация. FRRouting&lt;/a>).&lt;/li>
&lt;li>Можно купить аппаратную платформу, на которой возможно развернуть маршрутизатор:
&lt;ul>
&lt;li>&lt;a href="https://aliexpress.ru/popular/vyos-router.html" target="_blank" rel="noopener">https://aliexpress.ru/popular/vyos-router.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="модель-распространения">&lt;span class="section-num">2&lt;/span> Модель распространения&lt;/h2>
&lt;ul>
&lt;li>Можно собрать самому из исходного кода (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/07/06/vyos-build/">Сборка образа VyOS&lt;/a>).&lt;/li>
&lt;li>Образы LTS можно скачивать за плату.
&lt;ul>
&lt;li>Для учебных заведений и некоммерческих организаций предоставляется бесплатный доступ к релизам.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Образы для rolling релизов можно скачивать бесплатно.&lt;/li>
&lt;li>Rolling релизы:
&lt;ul>
&lt;li>&lt;a href="https://vyos.net/get/?dir=rolling/current/amd64" target="_blank" rel="noopener">https://vyos.net/get/?dir=rolling/current/amd64&lt;/a>;&lt;/li>
&lt;li>&lt;a href="https://community.vyos.net/get/" target="_blank" rel="noopener">https://community.vyos.net/get/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Блокируются российский ip-адреса.&lt;/li>
&lt;/ul>
&lt;h2 id="функционал">&lt;span class="section-num">3&lt;/span> Функционал&lt;/h2>
&lt;ul>
&lt;li>VPN: Dynamic Multipoint VPN (DMVPN), GRE, IPSec, IPSec VTI, OpenVPN (server и client), WireGuard.&lt;/li>
&lt;li>Туннели: L2TP, L2TPv3, VXLAN, PPTP, GRE, IPIP, SIT, IPIP, IPIP6, IP6IP6.&lt;/li>
&lt;li>Интерфейсы L2/L3: Ethernet Bridge, 802.1Q VLAN, QinQ, Агрегация портов (LACP и статическая).&lt;/li>
&lt;li>Маршрутизация: BGP, OSPF, OSPFv3, RIP, RIPng протоколов динамической маршрутизации.&lt;/li>
&lt;li>Статическая маршрутизация и Policy-Based Routing (PBR)&lt;/li>
&lt;li>QoS для приоритизации трафика.&lt;/li>
&lt;li>Высокая доступность: VRRP, WAN load-balancing, Conntrack-Sync, Clustering.&lt;/li>
&lt;li>Сетевые сервисы: DHCP, DNS recursive server, Network Address Translation, IGMP-Proxy, NTP, LLDP, mDNS repeater, PPPoE server, TFTP сервер.&lt;/li>
&lt;li>Фильтрация трафика: Zone-based firewall, stateful firewall.&lt;/li>
&lt;li>Политики: Shaping, Rate limiting, Priority-based queues.&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурирование">&lt;span class="section-num">4&lt;/span> Конфигурирование&lt;/h2>
&lt;h3 id="быстрая-настройка">&lt;span class="section-num">4.1&lt;/span> Быстрая настройка&lt;/h3>
&lt;ul>
&lt;li>Настроим шлюз NAT с двумя сетевыми интерфейсами (&lt;code>eth0&lt;/code> и &lt;code>eth1&lt;/code>).&lt;/li>
&lt;/ul>
&lt;h4 id="режим-конфигурации">&lt;span class="section-num">4.1.1&lt;/span> Режим конфигурации&lt;/h4>
&lt;ul>
&lt;li>В рабочем режиме в командной строке отображается символ &lt;code>$&lt;/code>.&lt;/li>
&lt;li>В режиме конфигурации в командной строке отображается &lt;code>#&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vyos@vyos$ configure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos#
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="сохранение">&lt;span class="section-num">4.1.2&lt;/span> Сохранение&lt;/h4>
&lt;ul>
&lt;li>После каждого изменения конфигурации необходимо применить изменения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">commit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В конце нужно сохранить конфигурацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">save
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация-интерфейсов">&lt;span class="section-num">4.1.3&lt;/span> Конфигурация интерфейсов&lt;/h4>
&lt;ul>
&lt;li>Внешний интерфейс: &lt;code>eth0&lt;/code>. Он получает адрес по DHCP.&lt;/li>
&lt;li>Внутренний интерфейс: &lt;code>eth1&lt;/code>. Использует статический IP-адрес &lt;code>192.168.0.1/24&lt;/code>.&lt;/li>
&lt;li>После перехода в режим конфигурации введём следующие команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth0 address dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth0 description &lt;span class="s1">&amp;#39;OUTSIDE&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth1 address &lt;span class="s1">&amp;#39;192.168.0.1/24&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth1 description &lt;span class="s1">&amp;#39;INSIDE&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="ssh-сервер">&lt;span class="section-num">4.1.4&lt;/span> SSH-сервер&lt;/h4>
&lt;ul>
&lt;li>Включим ssh-сервер:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service ssh port &lt;span class="s1">&amp;#39;22&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="сервисы-dhcp-и-dns">&lt;span class="section-num">4.1.5&lt;/span> Сервисы DHCP и DNS&lt;/h4>
&lt;ul>
&lt;li>Сетевые настройки:
&lt;ul>
&lt;li>Шлюз по умолчанию и адрес сервера DNS: &lt;code>192.168.0.1/24&lt;/code>.&lt;/li>
&lt;li>Диапазон адресов для статических назначений: &lt;code>192.168.0.2/24&lt;/code>&amp;ndash;&lt;code>192.168.0.8/24&lt;/code>.&lt;/li>
&lt;li>Диапазон адресов для клиентов DHCP: &lt;code>192.168.0.9&lt;/code>&amp;ndash;&lt;code>192.168.0.254&lt;/code>.&lt;/li>
&lt;li>Время аренды адреса DHCP: однин день (86400 секунд).&lt;/li>
&lt;li>Рекурсор DNS могут использовать только хосты из локальной сети.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 default-router &lt;span class="s1">&amp;#39;192.168.0.1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 name-server &lt;span class="s1">&amp;#39;192.168.0.1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 domain-name &lt;span class="s1">&amp;#39;vyos.net&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 lease &lt;span class="s1">&amp;#39;86400&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 range &lt;span class="m">0&lt;/span> start 192.168.0.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dhcp-server shared-network-name LAN subnet 192.168.0.0/24 range &lt;span class="m">0&lt;/span> stop &lt;span class="s1">&amp;#39;192.168.0.254&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dns forwarding cache-size &lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dns forwarding listen-address &lt;span class="s1">&amp;#39;192.168.0.1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service dns forwarding allow-from &lt;span class="s1">&amp;#39;192.168.0.0/24&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-nat">&lt;span class="section-num">4.1.6&lt;/span> Настройка NAT&lt;/h4>
&lt;ul>
&lt;li>Настроим правила SNAT для внутренней сети:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> nat &lt;span class="nb">source&lt;/span> rule &lt;span class="m">100&lt;/span> outbound-interface &lt;span class="s1">&amp;#39;eth0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> nat &lt;span class="nb">source&lt;/span> rule &lt;span class="m">100&lt;/span> &lt;span class="nb">source&lt;/span> address &lt;span class="s1">&amp;#39;192.168.0.0/24&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> nat &lt;span class="nb">source&lt;/span> rule &lt;span class="m">100&lt;/span> translation address masquerade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="брандмауэр">&lt;span class="section-num">4.1.7&lt;/span> Брандмауэр&lt;/h4>
&lt;ul>
&lt;li>Блокируем весь трафик, который не был инициирован со стороны локальной сети:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-IN default-action &lt;span class="s1">&amp;#39;drop&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-IN rule &lt;span class="m">10&lt;/span> action &lt;span class="s1">&amp;#39;accept&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-IN rule &lt;span class="m">10&lt;/span> state established &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-IN rule &lt;span class="m">10&lt;/span> state related &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL default-action &lt;span class="s1">&amp;#39;drop&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">10&lt;/span> action &lt;span class="s1">&amp;#39;accept&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">10&lt;/span> state established &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">10&lt;/span> state related &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">20&lt;/span> action &lt;span class="s1">&amp;#39;accept&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">20&lt;/span> icmp type-name &lt;span class="s1">&amp;#39;echo-request&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">20&lt;/span> protocol &lt;span class="s1">&amp;#39;icmp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">20&lt;/span> state new &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Разрешим SSH-доступ к маршрутизатору с внешнего интерфейса.&lt;/li>
&lt;li>Ограничивают до 4 запросов в минуту (для блокировки взлома грубой силой):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> action &lt;span class="s1">&amp;#39;drop&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> destination port &lt;span class="s1">&amp;#39;22&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> protocol &lt;span class="s1">&amp;#39;tcp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> recent count &lt;span class="s1">&amp;#39;4&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> recent &lt;span class="nb">time&lt;/span> &lt;span class="s1">&amp;#39;60&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">30&lt;/span> state new &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">31&lt;/span> action &lt;span class="s1">&amp;#39;accept&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">31&lt;/span> destination port &lt;span class="s1">&amp;#39;22&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">31&lt;/span> protocol &lt;span class="s1">&amp;#39;tcp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> firewall name OUTSIDE-LOCAL rule &lt;span class="m">31&lt;/span> state new &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Применим политики брандмауэра:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth0 firewall in name &lt;span class="s1">&amp;#39;OUTSIDE-IN&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> interfaces ethernet eth0 firewall &lt;span class="nb">local&lt;/span> name &lt;span class="s1">&amp;#39;OUTSIDE-LOCAL&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Зафиксируем изменения, сохраним конфигурацию и выйдем из режима конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vyos@vyos# commit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos# save
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Saving configuration to &lt;span class="s1">&amp;#39;/config/config.boot&amp;#39;&lt;/span>...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos# &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-безопасности">&lt;span class="section-num">4.1.8&lt;/span> Настройка безопасности&lt;/h4>
&lt;ul>
&lt;li>Заменим системного пользователя по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> system login user myvyosuser authentication plaintext-password mysecurepassword
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настроим аутентификацию на основе ключа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> system login user myvyosuser authentication public-keys myusername@mydesktop &lt;span class="nb">type&lt;/span> ssh-rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> system login user myvyosuser authentication public-keys myusername@mydesktop key contents_of_id_rsa.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалим исходного пользователя &lt;code>vyos&lt;/code> полностью отключим аутентификацию по паролю для SSH:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">delete system login user vyos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> service ssh disable-password-authentication
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Зафиксируем изменения, сохраним конфигурацию и выйдем из режима конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vyos@vyos# commit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos# save
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Saving configuration to &lt;span class="s1">&amp;#39;/config/config.boot&amp;#39;&lt;/span>...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos# &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vyos@vyos$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="образы-операционной-системы">&lt;span class="section-num">5&lt;/span> Образы операционной системы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/course/nettech/gns3-vyos/">GNS3. Образ VyOS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/06/vyos-build/">Сборка образа VyOS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/16/vyos-build-repository/">Сборка образа VyOS. Репозиторий&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Маршрутизация. FRRouting</title><link>https://yamadharma.github.io/ru/post/2022/06/02/routing-frrouting/</link><pubDate>Thu, 02 Jun 2022 19:30:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/06/02/routing-frrouting/</guid><description>&lt;p>Проект &lt;em>FRRouting&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#протоколы">&lt;span class="section-num">2&lt;/span> Протоколы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-в-gns3">&lt;span class="section-num">3&lt;/span> Установка в GNS3&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#видео-установка-приложения--маршрутизатор-frr">&lt;span class="section-num">3.1&lt;/span> Видео: Установка приложения (маршрутизатор FRR)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://frrouting.org/" target="_blank" rel="noopener">https://frrouting.org/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/FRRouting/frr" target="_blank" rel="noopener">https://github.com/FRRouting/frr&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.frrouting.org/" target="_blank" rel="noopener">https://docs.frrouting.org/&lt;/a>.&lt;/li>
&lt;li>Форк проекта Quagga.&lt;/li>
&lt;li>Для управления используется оболочка &lt;em>vtysh&lt;/em>, система команд которой похожа на Cisco.&lt;/li>
&lt;/ul>
&lt;h2 id="протоколы">&lt;span class="section-num">2&lt;/span> Протоколы&lt;/h2>
&lt;ul>
&lt;li>Border Gateway Protocol (BGP)&lt;/li>
&lt;li>Intermediate System to Intermediate System (IS-IS)&lt;/li>
&lt;li>Open Shortest Path First (OSPF)&lt;/li>
&lt;li>Protocol-Independent Multicast (PIM)&lt;/li>
&lt;li>Routing Information Protocol (RIP)&lt;/li>
&lt;li>Routing Information Protocol next generation (RIPng)&lt;/li>
&lt;li>Enhanced Interior Gateway Routing Protocol (EIGRP)&lt;/li>
&lt;li>Next Hop Resolution Protocol (NHRP)&lt;/li>
&lt;li>Bidirectional Forwarding Detection (BFD)&lt;/li>
&lt;li>Policy-based Routing (PBR)&lt;/li>
&lt;/ul>
&lt;h2 id="установка-в-gns3">&lt;span class="section-num">3&lt;/span> Установка в GNS3&lt;/h2>
&lt;h3 id="видео-установка-приложения--маршрутизатор-frr">&lt;span class="section-num">3.1&lt;/span> Видео: Установка приложения (маршрутизатор FRR)&lt;/h3>
&lt;nav>
&lt;div class="nav nav-tabs" id="nav-tab" role="tablist">
&lt;a class="nav-item nav-link active "
id="nav-fadebc" data-toggle="tab" href="#fadebc"
role="tab" aria-controls="nav-home" aria-selected="true">RuTube&lt;/a>
&lt;a class="nav-item nav-link "
id="nav-abecfd" data-toggle="tab" href="#abecfd"
role="tab" aria-controls="nav-home" aria-selected="true">Youtube&lt;/a>
&lt;/div>
&lt;/nav>
&lt;div class="tab-content" id="nav-tab-content">
&lt;div class="tab-pane fade show active " id="fadebc" role="tabpanel" aria-labelledby="nav-1">
&lt;div class="embed video-player">
&lt;iframe class="rutube-player" type="text/html"
width="720" height="405"
src="https://rutube.ru/play/embed/f90d7b7baaea8a0d5549384327207060"
webkitAllowFullScreen mozallowfullscreen allowFullScreen
allow="clipboard-write" frameborder="0">
&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;div class="tab-pane fade show " id="abecfd" role="tabpanel" aria-labelledby="nav-1">
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/BgIzJo18yp8?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;/div>
&lt;/div></description></item><item><title>Дедупликация btrfs. Bees</title><link>https://yamadharma.github.io/ru/post/2022/05/28/deduplication-btrfs-filesystem-bees/</link><pubDate>Sat, 28 May 2022 14:51:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/28/deduplication-btrfs-filesystem-bees/</guid><description>&lt;p>BEES (Best-Effort Extent-Same) &amp;mdash; агент дедупликации &lt;em>btrfs&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#плюсы-и-минусы">&lt;span class="section-num">2&lt;/span> Плюсы и минусы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сильные-стороны">&lt;span class="section-num">2.1&lt;/span> Сильные стороны&lt;/a>&lt;/li>
&lt;li>&lt;a href="#слабые-стороны">&lt;span class="section-num">2.2&lt;/span> Слабые стороны&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">4&lt;/span> Использование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#запуск">&lt;span class="section-num">4.1&lt;/span> Запуск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">4.2&lt;/span> Конфигурация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/Zygo/bees" target="_blank" rel="noopener">https://github.com/Zygo/bees&lt;/a>&lt;/li>
&lt;li>Сайт: &lt;a href="https://zygo.github.io/bees/" target="_blank" rel="noopener">https://zygo.github.io/bees/&lt;/a>&lt;/li>
&lt;li>Уровень дедупликации: блочный.&lt;/li>
&lt;li>Работает как демон.&lt;/li>
&lt;li>Поддерживается инкрементное сканирование данных.&lt;/li>
&lt;/ul>
&lt;h2 id="плюсы-и-минусы">&lt;span class="section-num">2&lt;/span> Плюсы и минусы&lt;/h2>
&lt;h3 id="сильные-стороны">&lt;span class="section-num">2.1&lt;/span> Сильные стороны&lt;/h3>
&lt;ul>
&lt;li>Хеш-таблица с эффективным использованием места, можно использовать всего 1 ГБ хеш-таблицы на 10 ТБ уникальных данных.&lt;/li>
&lt;li>Демон постепенно выполняет дедупликацию новых данных, используя поиск по дереву btrfs.&lt;/li>
&lt;li>Поддержка сжатия btrfs, дедупликация комбинации сжатых и несжатых файлов.&lt;/li>
&lt;li>Постоянная хеш-таблица для быстрого перезапуска после выключения.&lt;/li>
&lt;li>Дедупликация всей файловой системы, включая моментальные снимки.&lt;/li>
&lt;li>Постоянный размер хеш-таблицы: использование оперативной памяти не увеличивается, если набор данных становится больше.&lt;/li>
&lt;li>Автоматическое саморегулирование в зависимости от загрузки системы.&lt;/li>
&lt;/ul>
&lt;h3 id="слабые-стороны">&lt;span class="section-num">2.2&lt;/span> Слабые стороны&lt;/h3>
&lt;ul>
&lt;li>Дедупликация только всей файловой системы.&lt;/li>
&lt;li>Требуются привилегии &lt;code>root&lt;/code> (или &lt;code>CAP_SYS_ADMIN&lt;/code>).&lt;/li>
&lt;li>Первый запуск может увеличить использование пространства метаданных, если существует много моментальных снимков.&lt;/li>
&lt;li>Постоянный размер хеш-таблицы: использование оперативной памяти не уменьшается, если набор данных становится меньше.&lt;/li>
&lt;li>Работает только с &lt;em>btrfs&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge bees
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">4&lt;/span> Использование&lt;/h2>
&lt;h3 id="запуск">&lt;span class="section-num">4.1&lt;/span> Запуск&lt;/h3>
&lt;ul>
&lt;li>Для запуска используем скрипт &lt;code>beesd&lt;/code> (в исходниках &lt;code>scripts/beesd&lt;/code>).&lt;/li>
&lt;li>Посмотрим идентификаторы &lt;code>UUID&lt;/code> файловых систем:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs filesystem show
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активируем демон дедупликации, указав &lt;code>UUID&lt;/code> в качестве идентификатора инстанса. Пусть &lt;code>UUID=&amp;quot;f8963df3-1320-4bc0-a125-62be185b029e&amp;quot;&lt;/code>, тогда команда активации будет иметь вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now beesd@f8963df3-1320-4bc0-a125-62be185b029e
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация">&lt;span class="section-num">4.2&lt;/span> Конфигурация&lt;/h3>
&lt;ul>
&lt;li>Для работы демона необходим файл конфигурации.&lt;/li>
&lt;li>Шаблон для файла конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/etc/bees/beesd.conf.sample
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируйте его, задав произвольное имя (например, &lt;code>root.conf&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /etc/bees/beesd.conf.sample /etc/bees/root.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В этом файле задайте поле &lt;code>UUID&lt;/code> с необходимым значение.&lt;/li>
&lt;li>Для запуска необходимо наличие файла с расширением &lt;code>.conf&lt;/code> и поля &lt;code>UUID&lt;/code>.&lt;/li>
&lt;li>Остальные поля конфигурации настраиваются по желанию. В противном случае используются значения по умолчанию.&lt;/li>
&lt;/ul></description></item><item><title>Дедупликация файловой системы btrfs</title><link>https://yamadharma.github.io/ru/post/2022/05/26/deduplication-btrfs-filesystem/</link><pubDate>Thu, 26 May 2022 14:29:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/26/deduplication-btrfs-filesystem/</guid><description>&lt;p>Дедупликация файловой системы btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#реализация">&lt;span class="section-num">2&lt;/span> Реализация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#duperemove">&lt;span class="section-num">2.1&lt;/span> duperemove&lt;/a>&lt;/li>
&lt;li>&lt;a href="#bees">&lt;span class="section-num">2.2&lt;/span> bees&lt;/a>&lt;/li>
&lt;li>&lt;a href="#bedup">&lt;span class="section-num">2.3&lt;/span> bedup&lt;/a>&lt;/li>
&lt;li>&lt;a href="#btrfs-dedup">&lt;span class="section-num">2.4&lt;/span> btrfs-dedup&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#дедупликация-на-уровне-файлов">&lt;span class="section-num">3&lt;/span> Дедупликация на уровне файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>При дедупликации идентифицируются блоки данных, которые имеют общие последовательности.&lt;/li>
&lt;li>Они объединяются в один экстент с семантикой копирования при записи.&lt;/li>
&lt;/ul>
&lt;h2 id="реализация">&lt;span class="section-num">2&lt;/span> Реализация&lt;/h2>
&lt;h3 id="duperemove">&lt;span class="section-num">2.1&lt;/span> duperemove&lt;/h3>
&lt;h3 id="bees">&lt;span class="section-num">2.2&lt;/span> bees&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/28/deduplication-btrfs-filesystem-bees/">Дедупликация btrfs. Bees&lt;/a>&lt;/li>
&lt;li>Уровень дедупликации: блочный.&lt;/li>
&lt;li>Работает как демон.&lt;/li>
&lt;li>Использую для дедупликации файловой системы.&lt;/li>
&lt;/ul>
&lt;h3 id="bedup">&lt;span class="section-num">2.3&lt;/span> bedup&lt;/h3>
&lt;h3 id="btrfs-dedup">&lt;span class="section-num">2.4&lt;/span> btrfs-dedup&lt;/h3>
&lt;h2 id="дедупликация-на-уровне-файлов">&lt;span class="section-num">3&lt;/span> Дедупликация на уровне файлов&lt;/h2>
&lt;ul>
&lt;li>Некоторые утилиты для дедупликации на уровне файлов поддерживают файловую систему &lt;em>btrfs&lt;/em>.&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/file-deduplication-linux/">Дедупликация файлов в Linux&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Дедупликация файлов в Linux</title><link>https://yamadharma.github.io/ru/post/2022/05/26/file-deduplication-linux/</link><pubDate>Thu, 26 May 2022 14:21:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/26/file-deduplication-linux/</guid><description>&lt;p>Утилиты дедупликации файлов в Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#jdupes">&lt;span class="section-num">1&lt;/span> &lt;code>jdupes&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="jdupes">&lt;span class="section-num">1&lt;/span> &lt;code>jdupes&lt;/code>&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/02/23/file-deduplication-jdupes/">Дедупликация файлов. jdupes&lt;/a>&lt;/li>
&lt;li>Форк &lt;code>fdupes&lt;/code>.&lt;/li>
&lt;li>Включает поддержку дедупликации BTRFS.&lt;/li>
&lt;/ul></description></item><item><title>Дедупликация данных</title><link>https://yamadharma.github.io/ru/post/2022/05/26/data-deduplication/</link><pubDate>Thu, 26 May 2022 13:31:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/26/data-deduplication/</guid><description>&lt;p>Дедупликация данных.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#оценка-метода">&lt;span class="section-num">2&lt;/span> Оценка метода&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#положительные-стороны-дедупликации">&lt;span class="section-num">2.1&lt;/span> Положительные стороны дедупликации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отрицательные-стороны-дедупликации">&lt;span class="section-num">2.2&lt;/span> Отрицательные стороны дедупликации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#уровни-детализации-дедупликации">&lt;span class="section-num">3&lt;/span> Уровни детализации дедупликации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#уровень-блоков">&lt;span class="section-num">3.1&lt;/span> Уровень блоков&lt;/a>&lt;/li>
&lt;li>&lt;a href="#уровень-файлов">&lt;span class="section-num">3.2&lt;/span> Уровень файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#уровень-байтов">&lt;span class="section-num">3.3&lt;/span> Уровень байтов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#место-выполнения-дедупликации">&lt;span class="section-num">4&lt;/span> Место выполнения дедупликации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#дедупликация-клиент-сервер">&lt;span class="section-num">4.1&lt;/span> Дедупликация клиент-сервер&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дедупликация-на-клиенте">&lt;span class="section-num">4.2&lt;/span> Дедупликация на клиенте&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дедупликация-на-сервере">&lt;span class="section-num">4.3&lt;/span> Дедупликация на сервере&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#аппаратный-тип">&lt;span class="section-num">4.3.1&lt;/span> Аппаратный тип&lt;/a>&lt;/li>
&lt;li>&lt;a href="#программный-тип">&lt;span class="section-num">4.3.2&lt;/span> Программный тип&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#реализации">&lt;span class="section-num">5&lt;/span> Реализации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Дедупликация данных есть процесс, при котором устраняются избыточные копии информации.&lt;/li>
&lt;li>Снижаются текущие расходы на хранение информации.&lt;/li>
&lt;li>Дедупликация позволяет сохранять на носителях исключительно одну уникальную единицу информации.&lt;/li>
&lt;li>У дедупликации данных есть несколько уровней детализации:
&lt;ul>
&lt;li>байты;&lt;/li>
&lt;li>файлы;&lt;/li>
&lt;li>блоки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="оценка-метода">&lt;span class="section-num">2&lt;/span> Оценка метода&lt;/h2>
&lt;h3 id="положительные-стороны-дедупликации">&lt;span class="section-num">2.1&lt;/span> Положительные стороны дедупликации&lt;/h3>
&lt;ul>
&lt;li>Высокая эффективность хранения информации.&lt;/li>
&lt;li>Выгодность применения при низкой пропускной способности сети.&lt;/li>
&lt;li>Возможность чаще создавать бэкапы и хранить резервные копии данных дольше.&lt;/li>
&lt;/ul>
&lt;h3 id="отрицательные-стороны-дедупликации">&lt;span class="section-num">2.2&lt;/span> Отрицательные стороны дедупликации&lt;/h3>
&lt;ul>
&lt;li>Возможность возникновения конфликта данных (коллизии), если одновременно пара разных блоков генерируют один и тот же хеш-ключ.&lt;/li>
&lt;/ul>
&lt;h2 id="уровни-детализации-дедупликации">&lt;span class="section-num">3&lt;/span> Уровни детализации дедупликации&lt;/h2>
&lt;h3 id="уровень-блоков">&lt;span class="section-num">3.1&lt;/span> Уровень блоков&lt;/h3>
&lt;ul>
&lt;li>Наиболее популярный метод дедупликации.&lt;/li>
&lt;li>Проводится анализ данных по блокам, с дальнейшим сохранением лишь уникальных повторений информации для каждого отдельно взятого блока.&lt;/li>
&lt;li>Блоком считается одна логическая единица информации с характерным размером, который может варьироваться.&lt;/li>
&lt;li>Все данные при дедупликации на уровне блоков обрабатываются с применением хеширования.&lt;/li>
&lt;li>Хеш-алгоритмы позволяют создавать и хранить в базе дедупликации определённую сигнатуру (идентификатор), которая соответствует каждому отдельно взятому уникальному блоку данных.&lt;/li>
&lt;li>Разновидности блочной дедупликации:
&lt;ul>
&lt;li>с переменной длиной блока;&lt;/li>
&lt;li>с постоянной длиной блока.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="уровень-файлов">&lt;span class="section-num">3.2&lt;/span> Уровень файлов&lt;/h3>
&lt;ul>
&lt;li>Проводится сравнение нового файла с уже сохранённым.&lt;/li>
&lt;li>Сохраняется только ссылка на файл.&lt;/li>
&lt;li>Главное преимущество &amp;mdash; простота реализации.&lt;/li>
&lt;/ul>
&lt;h3 id="уровень-байтов">&lt;span class="section-num">3.3&lt;/span> Уровень байтов&lt;/h3>
&lt;ul>
&lt;li>Проводится анализ данных по байтам.&lt;/li>
&lt;li>Очень ресурсоёмко.&lt;/li>
&lt;/ul>
&lt;h2 id="место-выполнения-дедупликации">&lt;span class="section-num">4&lt;/span> Место выполнения дедупликации&lt;/h2>
&lt;ul>
&lt;li>Выполнение дедупликации можно классифицировать по:
&lt;ul>
&lt;li>месту выполнения;&lt;/li>
&lt;li>источнику данных (клиенту);&lt;/li>
&lt;li>стороне хранения (серверу).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="дедупликация-клиент-сервер">&lt;span class="section-num">4.1&lt;/span> Дедупликация клиент-сервер&lt;/h3>
&lt;ul>
&lt;li>Необходимые процессы могут запускаться как на сервере, так и на клиенте.&lt;/li>
&lt;li>Вычисляется хеш у каждого блока данных, после чего хеш отправляется на сервер в виде файла-списка различных хеш-ключей.&lt;/li>
&lt;li>На сервере производится сравнение списка этих ключей, а затем клиенту отправляются блоки с данными.&lt;/li>
&lt;/ul>
&lt;h3 id="дедупликация-на-клиенте">&lt;span class="section-num">4.2&lt;/span> Дедупликация на клиенте&lt;/h3>
&lt;ul>
&lt;li>Выполняется на источнике данных.&lt;/li>
&lt;li>После завершения процесса данные будут отправлены на устройства хранения информации.&lt;/li>
&lt;li>Высокая нагрузка на клиента (ОЗУ и процессор).&lt;/li>
&lt;li>Низкие требования к пропускной способности сети.&lt;/li>
&lt;/ul>
&lt;h3 id="дедупликация-на-сервере">&lt;span class="section-num">4.3&lt;/span> Дедупликация на сервере&lt;/h3>
&lt;ul>
&lt;li>Данные поступают на сервер в полностью необработанном виде (без кодирования и сжатия).&lt;/li>
&lt;/ul>
&lt;h4 id="аппаратный-тип">&lt;span class="section-num">4.3.1&lt;/span> Аппаратный тип&lt;/h4>
&lt;ul>
&lt;li>Устройство дедупликации представляет собой аппаратного решение, объединяющем логику дедупликации и процедуру восстановления данных.&lt;/li>
&lt;/ul>
&lt;h4 id="программный-тип">&lt;span class="section-num">4.3.2&lt;/span> Программный тип&lt;/h4>
&lt;ul>
&lt;li>Используется специальное программное обеспечения.&lt;/li>
&lt;/ul>
&lt;h2 id="реализации">&lt;span class="section-num">5&lt;/span> Реализации&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/file-deduplication-linux/">Дедупликация файлов в Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/deduplication-btrfs-filesystem/">Дедупликация файловой системы btrfs&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Файл подкачки на btrfs</title><link>https://yamadharma.github.io/ru/post/2022/05/20/btrfs-swap-file/</link><pubDate>Fri, 20 May 2022 10:29:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/20/btrfs-swap-file/</guid><description>&lt;p>Размещение файла подкачки на разделе &lt;em>btrfs&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-файла-подкачки">&lt;span class="section-num">2&lt;/span> Создание файла подкачки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>btrfs поддерживает файл подкачки (начиная с ядра версии 5.0).&lt;/li>
&lt;li>Файл подкачки &lt;strong>не может&lt;/strong> находиться на любом рейде btrfs.&lt;/li>
&lt;li>btrfs не позволяет создавать снапшоты, если на подтоме есть рабочий файл подкачки.&lt;/li>
&lt;li>Рекомендуется размещать файл подкачки на отдельном подтоме.&lt;/li>
&lt;li>Файл подкачки должен иметь свойство NODATACOW.&lt;/li>
&lt;li>Файл подкачки должен быть без сжатия.&lt;/li>
&lt;/ul>
&lt;h2 id="создание-файла-подкачки">&lt;span class="section-num">2&lt;/span> Создание файла подкачки&lt;/h2>
&lt;ul>
&lt;li>Подмонтируем раздел с btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,space_cache,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9 /dev/sda4 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим подтом для файла подкачки на btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отмонтируем том btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">umount /mnt/gentoo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим точку монтирования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем подтом &lt;code>@swap&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nv">subvol&lt;/span>&lt;span class="o">=&lt;/span>@swap /dev/sda4 /swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключим для этого подтома CoW:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chattr +C /swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">truncate -s &lt;span class="m">0&lt;/span> /swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключим сжатие:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs property &lt;span class="nb">set&lt;/span> /swap/swapfile compression &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим права доступа &lt;code>600&lt;/code> к файлу подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">600&lt;/span> /swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим размер файла подкачки.
&lt;ul>
&lt;li>Можно задать размер вручную (например, 4GiB):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">fallocate -l 4G /swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно установить размер файла подкачки исходя из размера оперативной памяти:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">fallocate -l &lt;span class="k">$(&lt;/span>free -h --si &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;NR == 2 {print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span> /swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Отформатируем файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkswap /swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Активируем файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">swapon /swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавим запись в &lt;code>/etc/fstab&lt;/code>, чтобы подключать файл подкачки при загрузке (для устройства с &lt;code>UUID=&amp;quot;f8963df3-1320-4bc0-a125-62be185b029e&amp;quot;&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34; /swap btrfs relatime,discard,autodefrag,compress=zstd:9,subvol=@swap 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/swap/swapfile none swap sw 0 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте, что файл &lt;code>/etc/fstab&lt;/code> не содержит ошибок:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">findmnt --verify --verbose
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Клиенты ACME. acme.sh</title><link>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-acme-sh/</link><pubDate>Mon, 02 May 2022 17:11:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-acme-sh/</guid><description>&lt;p>Клиент протокола ACME, написанный на Unix shell.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/acmesh-official/acme.sh" target="_blank" rel="noopener">https://github.com/acmesh-official/acme.sh&lt;/a>&lt;/li>
&lt;li>Wiki: &lt;a href="https://github.com/acmesh-official/acme.sh/wiki" target="_blank" rel="noopener">https://github.com/acmesh-official/acme.sh/wiki&lt;/a>&lt;/li>
&lt;li>Провайдер по умолчанию: ZeroSSL.com.&lt;/li>
&lt;li>Работает с большим количеством провайдеров.&lt;/li>
&lt;/ul></description></item><item><title>Провайдеры ACME</title><link>https://yamadharma.github.io/ru/post/2022/05/02/acme-providers/</link><pubDate>Mon, 02 May 2022 17:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/02/acme-providers/</guid><description>&lt;p>Существующие провайдеры, работающие по протоколу ACME.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#letsencrypt">&lt;span class="section-num">1&lt;/span> Letsencrypt&lt;/a>&lt;/li>
&lt;li>&lt;a href="#zerossl">&lt;span class="section-num">2&lt;/span> ZeroSSL&lt;/a>&lt;/li>
&lt;li>&lt;a href="#buypass">&lt;span class="section-num">3&lt;/span> BuyPass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ssl-dot-com">&lt;span class="section-num">4&lt;/span> SSL.com&lt;/a>&lt;/li>
&lt;li>&lt;a href="#google-dot-com-public-ca">&lt;span class="section-num">5&lt;/span> Google.com Public CA&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="letsencrypt">&lt;span class="section-num">1&lt;/span> Letsencrypt&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://letsencrypt.org/" target="_blank" rel="noopener">https://letsencrypt.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="zerossl">&lt;span class="section-num">2&lt;/span> ZeroSSL&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://zerossl.com/" target="_blank" rel="noopener">https://zerossl.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="buypass">&lt;span class="section-num">3&lt;/span> BuyPass&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.buypass.com/" target="_blank" rel="noopener">https://www.buypass.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ssl-dot-com">&lt;span class="section-num">4&lt;/span> SSL.com&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.ssl.com/" target="_blank" rel="noopener">https://www.ssl.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="google-dot-com-public-ca">&lt;span class="section-num">5&lt;/span> Google.com Public CA&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://cloud.google.com/certificate-authority-service" target="_blank" rel="noopener">https://cloud.google.com/certificate-authority-service&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Клиенты ACME. Certbot</title><link>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-certbot/</link><pubDate>Mon, 02 May 2022 16:54:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-certbot/</guid><description>&lt;p>Клиент протокола ACME &lt;em>Certbot&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#получение-сертификатов">&lt;span class="section-num">2&lt;/span> Получение сертификатов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сертификаты-dns">&lt;span class="section-num">2.1&lt;/span> Сертификаты DNS&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2.1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-программного-обеспечения">&lt;span class="section-num">2.1.2&lt;/span> Установка программного обеспечения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-bind">&lt;span class="section-num">2.1.3&lt;/span> Настройка BIND&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-certbot">&lt;span class="section-num">2.1.4&lt;/span> Настройка certbot&lt;/a>&lt;/li>
&lt;li>&lt;a href="#получение-сертификата">&lt;span class="section-num">2.1.5&lt;/span> Получение сертификата&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#сертификаты-http">&lt;span class="section-num">2.2&lt;/span> Сертификаты HTTP&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сервер-apache">&lt;span class="section-num">2.2.1&lt;/span> Сервер &lt;em>Apache&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сервер-nginx">&lt;span class="section-num">2.2.2&lt;/span> Сервер &lt;em>Nginx&lt;/em>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-certbot">&lt;span class="section-num">3.1&lt;/span> Установка &lt;em>certbot&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-реализации-snap-certbot">&lt;span class="section-num">3.2&lt;/span> Установка реализации &lt;em>snap certbot&lt;/em>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Бесплатный программный инструмент с открытым исходным кодом для автоматического использования сертификатов Let’s Encrypt.&lt;/li>
&lt;li>Создан Electronic Frontier Foundation (EFF).&lt;/li>
&lt;li>Сайт: &lt;a href="https://certbot.eff.org/" target="_blank" rel="noopener">https://certbot.eff.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="получение-сертификатов">&lt;span class="section-num">2&lt;/span> Получение сертификатов&lt;/h2>
&lt;h3 id="сертификаты-dns">&lt;span class="section-num">2.1&lt;/span> Сертификаты DNS&lt;/h3>
&lt;h4 id="общая-информация">&lt;span class="section-num">2.1.1&lt;/span> Общая информация&lt;/h4>
&lt;ul>
&lt;li>Для выпуска wildcard-сертификата необходимо выполнить &lt;em>DNS challenge request&lt;/em>, используя протокол ACMEv2.&lt;/li>
&lt;li>&lt;em>DNS challenge&lt;/em> представляет собой запись TXT, предоставленную клиентом &lt;em>certbot&lt;/em>, которую необходимо установить вручную в DNS.&lt;/li>
&lt;li>Нужно будет обновлять DNS при каждом обновлении сертификатов.
&lt;ul>
&lt;li>Чтобы не делать это вручную, воспользуйтесь &lt;em>rfc2136&lt;/em>, для которого в Certbot есть плагин &lt;code>certbot-dns-rfc2136&lt;/code>.&lt;/li>
&lt;li>Также необходимо настроить DNS-сервер, чтобы разрешить динамическое обновление TXT-записей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Документация: &lt;a href="https://certbot-dns-rfc2136.readthedocs.io/" target="_blank" rel="noopener">https://certbot-dns-rfc2136.readthedocs.io/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="установка-программного-обеспечения">&lt;span class="section-num">2.1.2&lt;/span> Установка программного обеспечения&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Snap&lt;/p>
&lt;ul>
&lt;li>Установка плагина &lt;code>certbot-dns-rfc2136&lt;/code> для &lt;em>Snap&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">snap &lt;span class="nb">set&lt;/span> certbot trust-plugin-with-root&lt;span class="o">=&lt;/span>ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo snap install certbot-dns-rfc2136
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сам &lt;em>Certbot&lt;/em> может находиться на произвольном сервере.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Пакетный менеджер&lt;/p>
&lt;ul>
&lt;li>Rocky Linux:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf -y install certbot python3-certbot-dns-rfc2136
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="настройка-bind">&lt;span class="section-num">2.1.3&lt;/span> Настройка BIND&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Сгенерируйте секретный TSIG-ключ:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">tsig-keygen -a HMAC-SHA512 example-key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Здесь &lt;code>example-key&lt;/code> &amp;mdash; имя вашего ключа. Выбирается произвольно. Можно назвать по имени домена.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Добавьте ключ в файл конфигурации &lt;em>Bind&lt;/em> &lt;code>/etc/named.conf&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">// /etc/named.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zone &amp;#34;domain.ltd&amp;#34; IN {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // this is for certbot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> update-policy {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> grant example-key name _acme-challenge.domain.ltd. txt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">key &amp;#34;example-key&amp;#34; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> algorithm hmac-sha512;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> secret &amp;#34;секретный_ключ&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Перезапустите &lt;em>named&lt;/em>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl restart named.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-certbot">&lt;span class="section-num">2.1.4&lt;/span> Настройка certbot&lt;/h4>
&lt;ul>
&lt;li>Сгенерируйте файл конфигурации для плагина &lt;em>rfc2136&lt;/em> &lt;code>/etc/letsencrypt/rfc2136_domain.ltd.ini&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Target DNS server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">dns_rfc2136_server&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">IP-адрес&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Target DNS port&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">dns_rfc2136_port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">53&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># TSIG key name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">dns_rfc2136_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">example-key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># TSIG key secret&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">dns_rfc2136_secret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">ключ_без_кавычек&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># TSIG key algorithm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">dns_rfc2136_algorithm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">HMAC-SHA512&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Поправьте права доступа:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">600&lt;/span> /etc/letsencrypt/rfc2136_domain.ltd.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="получение-сертификата">&lt;span class="section-num">2.1.5&lt;/span> Получение сертификата&lt;/h4>
&lt;ul>
&lt;li>Выполните команду
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot certonly --dns-rfc2136 --force-renewal --dns-rfc2136-credentials /etc/letsencrypt/rfc2136_domain.ltd.ini --server https://acme-v02.api.letsencrypt.org/directory --email admin@domain.ltd --agree-tos --no-eff-email --dns-rfc2136-propagation-seconds &lt;span class="m">60&lt;/span> -d &lt;span class="s1">&amp;#39;domain.ltd&amp;#39;&lt;/span> -d &lt;span class="s1">&amp;#39;*.domain.ltd&amp;#39;&lt;/span> --non-interactive --quiet
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сертификаты помещаются в каталог &lt;code>/etc/letsencrypt/live/domain.ltd&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="сертификаты-http">&lt;span class="section-num">2.2&lt;/span> Сертификаты HTTP&lt;/h3>
&lt;h4 id="сервер-apache">&lt;span class="section-num">2.2.1&lt;/span> Сервер &lt;em>Apache&lt;/em>&lt;/h4>
&lt;ul>
&lt;li>Плагин &lt;code>certbot-apache&lt;/code> предоставляет автоматическую настройку &lt;em>Apache HTTP Server&lt;/em>.&lt;/li>
&lt;li>Он пытается найти конфигурацию каждого домена, а также добавляет рекомендованные для безопасности параметры, настройки использования сертификатов и пути к сертификатам Let&amp;rsquo;s Encrypt.&lt;/li>
&lt;li>Первоначальная настройка виртуальных хостов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot --apache
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновление сертификатов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot renew
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Изменение сертификатов без изменения файлов конфигурации &lt;em>apache&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot --apache certonly
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="сервер-nginx">&lt;span class="section-num">2.2.2&lt;/span> Сервер &lt;em>Nginx&lt;/em>&lt;/h4>
&lt;ul>
&lt;li>Плагин &lt;code>certbot-nginx&lt;/code> предоставляет автоматическую настройку &lt;em>Nginx HTTP Server&lt;/em>.&lt;/li>
&lt;li>Он пытается найти конфигурацию каждого домена, а также добавляет рекомендованные для безопасности параметры, настройки использования сертификатов и пути к сертификатам Let&amp;rsquo;s Encrypt.&lt;/li>
&lt;li>Первоначальная настройка виртуальных хостов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot --nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновление сертификатов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot renew
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Изменение сертификатов без изменения файлов конфигурации &lt;em>nginx&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">certbot --nginx certonly
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/h2>
&lt;h3 id="установка-certbot">&lt;span class="section-num">3.1&lt;/span> Установка &lt;em>certbot&lt;/em>&lt;/h3>
&lt;ul>
&lt;li>Проверьте, что установлен репозитории EPEL:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install epel-release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите &lt;em>certbot&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install certbot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для веб-сервера Apache:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install python3-certbot-apache
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для веб-сервера Nginx:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install python3-certbot-nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для сертификата DNS:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf -y install python3-certbot-dns-rfc2136
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-реализации-snap-certbot">&lt;span class="section-num">3.2&lt;/span> Установка реализации &lt;em>snap certbot&lt;/em>&lt;/h3>
&lt;ul>
&lt;li>Установка &lt;em>Snap&lt;/em>
&lt;ul>
&lt;li>Centos
&lt;ul>
&lt;li>Установите репозиторий &lt;em>Epel&lt;/em>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf install epel-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dnf upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите &lt;em>Snap&lt;/em>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf -y install snapd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Запустите &lt;em>Snap&lt;/em>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> --now snapd.socket
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ln -s /var/lib/snapd/snap /snap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите &lt;em>Snap&lt;/em> (перед этим необходимо немного подождать, чтобы запустился snapd)
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo snap install core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo snap refresh core
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка &lt;em>certbot&lt;/em>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo snap install --classic certbot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сделайте символьную ссылку для запуска:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo ln -s /snap/bin/certbot /usr/local/bin/certbot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Клиенты ACME</title><link>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients/</link><pubDate>Mon, 02 May 2022 16:50:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/05/02/acme-clients/</guid><description>&lt;p>Выдача сертификатов SSL по протоколу ACME.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#certbot">&lt;span class="section-num">1&lt;/span> Certbot&lt;/a>&lt;/li>
&lt;li>&lt;a href="#acme-dot-sh">&lt;span class="section-num">2&lt;/span> acme.sh&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="certbot">&lt;span class="section-num">1&lt;/span> Certbot&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-certbot/">Клиенты ACME. Certbot&lt;/a>&lt;/li>
&lt;li>Наиболее популярный клиент ACME.&lt;/li>
&lt;li>Основной провайдер: Let&amp;rsquo;s Encrypt.&lt;/li>
&lt;li>Написан на &lt;em>python&lt;/em>.&lt;/li>
&lt;li>Есть реализация &lt;em>snap&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h2 id="acme-dot-sh">&lt;span class="section-num">2&lt;/span> acme.sh&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/02/acme-clients-acme-sh/">Клиенты ACME. acme.sh&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Критерии выбора ноутбука</title><link>https://yamadharma.github.io/ru/post/2022/04/30/criteria-choosing-laptop/</link><pubDate>Sat, 30 Apr 2022 20:06:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/30/criteria-choosing-laptop/</guid><description>&lt;p>Как выбрать ноутбук.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#размеры">&lt;span class="section-num">1&lt;/span> Размеры&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#портативные">&lt;span class="section-num">1.1&lt;/span> Портативные&lt;/a>&lt;/li>
&lt;li>&lt;a href="#переносные">&lt;span class="section-num">1.2&lt;/span> Переносные&lt;/a>&lt;/li>
&lt;li>&lt;a href="#стационарные">&lt;span class="section-num">1.3&lt;/span> Стационарные&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#область-применения">&lt;span class="section-num">2&lt;/span> Область применения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#универсальные">&lt;span class="section-num">2.1&lt;/span> Универсальные&lt;/a>&lt;/li>
&lt;li>&lt;a href="#для-развлечения--мультимедийные">&lt;span class="section-num">2.2&lt;/span> Для развлечения (мультимедийные)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#игровые">&lt;span class="section-num">2.3&lt;/span> Игровые&lt;/a>&lt;/li>
&lt;li>&lt;a href="#рабочие-станции">&lt;span class="section-num">2.4&lt;/span> Рабочие станции&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пафосные">&lt;span class="section-num">2.5&lt;/span> Пафосные&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#комплектация">&lt;span class="section-num">3&lt;/span> Комплектация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#диск">&lt;span class="section-num">3.1&lt;/span> Диск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#оперативная-память">&lt;span class="section-num">3.2&lt;/span> Оперативная память&lt;/a>&lt;/li>
&lt;li>&lt;a href="#экран">&lt;span class="section-num">3.3&lt;/span> Экран&lt;/a>&lt;/li>
&lt;li>&lt;a href="#тип-матрицы">&lt;span class="section-num">3.4&lt;/span> Тип матрицы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#видеокарта">&lt;span class="section-num">3.5&lt;/span> Видеокарта&lt;/a>&lt;/li>
&lt;li>&lt;a href="#интерфейсы">&lt;span class="section-num">3.6&lt;/span> Интерфейсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#цена">&lt;span class="section-num">4&lt;/span> Цена&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="размеры">&lt;span class="section-num">1&lt;/span> Размеры&lt;/h2>
&lt;h3 id="портативные">&lt;span class="section-num">1.1&lt;/span> Портативные&lt;/h3>
&lt;ul>
&lt;li>Вес 1&amp;ndash;1,5 кг.&lt;/li>
&lt;li>Размер экрана: 13,3&amp;quot;&amp;ndash;14&amp;quot;.&lt;/li>
&lt;li>Можно возить с собой.&lt;/li>
&lt;/ul>
&lt;h3 id="переносные">&lt;span class="section-num">1.2&lt;/span> Переносные&lt;/h3>
&lt;ul>
&lt;li>Вес до 2,5 кг.&lt;/li>
&lt;li>Размер экрана: 15&amp;quot;&amp;ndash;17&amp;quot;.&lt;/li>
&lt;li>Можно переносить в пределах помещения.&lt;/li>
&lt;/ul>
&lt;h3 id="стационарные">&lt;span class="section-num">1.3&lt;/span> Стационарные&lt;/h3>
&lt;ul>
&lt;li>Вес 3 кг и выше.&lt;/li>
&lt;li>Размер экрана: 17&amp;quot; и выше.&lt;/li>
&lt;li>Стоит на столе.&lt;/li>
&lt;li>Обычно игровые или рабочие станции.&lt;/li>
&lt;/ul>
&lt;h2 id="область-применения">&lt;span class="section-num">2&lt;/span> Область применения&lt;/h2>
&lt;h3 id="универсальные">&lt;span class="section-num">2.1&lt;/span> Универсальные&lt;/h3>
&lt;h3 id="для-развлечения--мультимедийные">&lt;span class="section-num">2.2&lt;/span> Для развлечения (мультимедийные)&lt;/h3>
&lt;h3 id="игровые">&lt;span class="section-num">2.3&lt;/span> Игровые&lt;/h3>
&lt;h3 id="рабочие-станции">&lt;span class="section-num">2.4&lt;/span> Рабочие станции&lt;/h3>
&lt;h3 id="пафосные">&lt;span class="section-num">2.5&lt;/span> Пафосные&lt;/h3>
&lt;ul>
&lt;li>Чаще всего фирмы Apple.&lt;/li>
&lt;/ul>
&lt;h2 id="комплектация">&lt;span class="section-num">3&lt;/span> Комплектация&lt;/h2>
&lt;h3 id="диск">&lt;span class="section-num">3.1&lt;/span> Диск&lt;/h3>
&lt;ul>
&lt;li>Только SSD.
&lt;ul>
&lt;li>Ёмкость &amp;mdash; не менее 512 GB.&lt;/li>
&lt;li>На данный момент оптимальный размер &amp;mdash; 1 TB.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>HDD может использоваться для архивного хранения, но не для работы.&lt;/li>
&lt;/ul>
&lt;h3 id="оперативная-память">&lt;span class="section-num">3.2&lt;/span> Оперативная память&lt;/h3>
&lt;ul>
&lt;li>Минимальный объём &amp;mdash; 8 GB.&lt;/li>
&lt;li>Оптимальный объём &amp;mdash; 16 GB.&lt;/li>
&lt;li>Рекомендуемый объём &amp;mdash; 32 GB.&lt;/li>
&lt;/ul>
&lt;h3 id="экран">&lt;span class="section-num">3.3&lt;/span> Экран&lt;/h3>
&lt;ul>
&lt;li>Разрешение &amp;mdash; достаточно 1920x1080 (&lt;em>Full HD&lt;/em>).&lt;/li>
&lt;li>Более высокое разрешение не является необходимым.
&lt;ul>
&lt;li>Проблематично использовать. Плохая поддержка в операционных системах.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="тип-матрицы">&lt;span class="section-num">3.4&lt;/span> Тип матрицы&lt;/h3>
&lt;ul>
&lt;li>Лучше не брать &lt;em>TN+Film&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h3 id="видеокарта">&lt;span class="section-num">3.5&lt;/span> Видеокарта&lt;/h3>
&lt;ul>
&lt;li>С интегрированной видеокартой (Intel, AMD) меньше проблем.&lt;/li>
&lt;li>Дискретные видеокарты подходят для специального применения (инженерные расчёты, графика, игры).&lt;/li>
&lt;li>Видеокарты &lt;em>Nvidia&lt;/em> плохо поддерживаются в Linux (не в Windows).&lt;/li>
&lt;/ul>
&lt;h3 id="интерфейсы">&lt;span class="section-num">3.6&lt;/span> Интерфейсы&lt;/h3>
&lt;ul>
&lt;li>USB
&lt;ul>
&lt;li>USB-A &amp;mdash; чем больше, тем лучше.&lt;/li>
&lt;li>USB-C &amp;mdash; пока мало такой переферии.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Ethernet &amp;mdash; чаще всего присутствует стационарных моделях.&lt;/li>
&lt;li>WiFi &amp;mdash; необходим.&lt;/li>
&lt;li>Bluetooth &amp;mdash; полезен.&lt;/li>
&lt;li>HDMI &amp;mdash; если собираетесь выводить видео на экран или проектор.&lt;/li>
&lt;li>При недостатке интерфейсов есть смысл купить расширитель (док-станцию).&lt;/li>
&lt;/ul>
&lt;h2 id="цена">&lt;span class="section-num">4&lt;/span> Цена&lt;/h2>
&lt;ul>
&lt;li>Нижняя граница цены на приемлемый ноутбук &amp;mdash; $1800.&lt;/li>
&lt;/ul></description></item><item><title>Сертификаты ACME</title><link>https://yamadharma.github.io/ru/post/2022/04/30/acme-certificates/</link><pubDate>Sat, 30 Apr 2022 14:49:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/30/acme-certificates/</guid><description>&lt;p>SSL-сертификаты от &lt;em>Let&amp;rsquo;s Encrypt&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#провайдеры">&lt;span class="section-num">2&lt;/span> Провайдеры&lt;/a>&lt;/li>
&lt;li>&lt;a href="#инструментарий">&lt;span class="section-num">3&lt;/span> Инструментарий&lt;/a>&lt;/li>
&lt;li>&lt;a href="#тестирование-работы-выдачи-сертификатов-acme">&lt;span class="section-num">4&lt;/span> Тестирование работы выдачи сертификатов ACME&lt;/a>&lt;/li>
&lt;li>&lt;a href="#проверки-acme">&lt;span class="section-num">5&lt;/span> Проверки ACME&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проверка-http-01">&lt;span class="section-num">5.1&lt;/span> Проверка HTTP-01&lt;/a>&lt;/li>
&lt;li>&lt;a href="#проверка-dns-01">&lt;span class="section-num">5.2&lt;/span> Проверка DNS-01&lt;/a>&lt;/li>
&lt;li>&lt;a href="#проверка-tls-alpn-01">&lt;span class="section-num">5.3&lt;/span> Проверка TLS-ALPN-01&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://letsencrypt.org/" target="_blank" rel="noopener">https://letsencrypt.org/&lt;/a>&lt;/li>
&lt;li>Использует протокол ACME для выдачи сертификата.&lt;/li>
&lt;li>Наиболее известным провайдером сертификатов, выдаваемых по протоколу ACME, является Let&amp;rsquo;s Encrypt.&lt;/li>
&lt;/ul>
&lt;h2 id="провайдеры">&lt;span class="section-num">2&lt;/span> Провайдеры&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/02/acme-providers/">Провайдеры ACME&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="инструментарий">&lt;span class="section-num">3&lt;/span> Инструментарий&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/02/acme-clients/">Клиенты ACME&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="тестирование-работы-выдачи-сертификатов-acme">&lt;span class="section-num">4&lt;/span> Тестирование работы выдачи сертификатов ACME&lt;/h2>
&lt;ul>
&lt;li>Проверить на проблемы работу Let&amp;rsquo;s Encrypt можно с помощью сайта: &lt;a href="https://letsdebug.net/" target="_blank" rel="noopener">https://letsdebug.net/&lt;/a>.&lt;/li>
&lt;li>Видимость Ваших ресурсов из внешних сетей можно проверить на сайте &lt;a href="https://check-host.net/" target="_blank" rel="noopener">https://check-host.net/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="проверки-acme">&lt;span class="section-num">5&lt;/span> Проверки ACME&lt;/h2>
&lt;ul>
&lt;li>Для выдачи сертификата необходимо верифицировать хост, которому выдаётся сертификат.&lt;/li>
&lt;/ul>
&lt;h3 id="проверка-http-01">&lt;span class="section-num">5.1&lt;/span> Проверка HTTP-01&lt;/h3>
&lt;ul>
&lt;li>Этот тип проверки используется чаще всего.&lt;/li>
&lt;li>Let&amp;rsquo;s Encrypt выдаёт ACME-клиенту токен, а ACME-клиент записывает этот токен в файл на web-сервере по пути &lt;code>http://&amp;lt;YOUR_DOMAIN&amp;gt;/.well-known/acme-challenge/&amp;lt;TOKEN&amp;gt;&lt;/code>.
&lt;ul>
&lt;li>В этом файле содержится сам токен, плюс отпечаток ключа вашего аккаунта.&lt;/li>
&lt;li>Как только ACME-клиент сообщит Let&amp;rsquo;s Encrypt, что файл готов, Let&amp;rsquo;s Encrypt будет пытаться получить этот файл по URL (возможно, несколько раз, с различных адресов).&lt;/li>
&lt;li>Если полученный ответ будет верным, проверка считается успешной, и сертификат для выбранного домена готов к использованию.&lt;/li>
&lt;li>Если проверка прошла неудачно, требуется повторить попытку с новым сертификатом.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Реализация проверки HTTP-01 разрешает редиректы запросов, общим числом не более 10.
&lt;ul>
&lt;li>Редиректы принимаются только на адреса, начинающиеся с &lt;code>http:&lt;/code> или &lt;code>https:&lt;/code>, и только на порты 80 или 443.&lt;/li>
&lt;li>Редиректы на IP-адреса не принимаются.&lt;/li>
&lt;li>Если редирект выполнялся на URL c HTTPS, то сертификат не считается подтверждённым (т.к. проверка для новых сертификатов, может обнаружить самоподписанные или просроченные сертификаты).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Проверка HTTP-01 выполняется только с использованием порта 80. Произвольный порт для проверки снижает надёжность, и потому запрещён стандартом ACME.&lt;/li>
&lt;li>Плюсы:
&lt;ul>
&lt;li>Упрощённая автоматизация процесса, не требующая дополнительных знаний по настройке доменов.&lt;/li>
&lt;li>Выпуск сертификатов для доменов хостинг-провайдеров, привязанных по &lt;code>CNAME&lt;/code>.&lt;/li>
&lt;li>Совместим с уже настроенными web-серверами.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Минусы:
&lt;ul>
&lt;li>&lt;strong>Требует открытого порта 80&lt;/strong>.&lt;/li>
&lt;li>Let&amp;rsquo;s Encrypt не разрешает использовать эту проверку для сертификатов с подстановкой (wildcard-сертификатов).&lt;/li>
&lt;li>Для каждого web-сервера требуется свой файл.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="проверка-dns-01">&lt;span class="section-num">5.2&lt;/span> Проверка DNS-01&lt;/h3>
&lt;ul>
&lt;li>Эта проверка требует подтверждения прав на домен с помощью специальной TXT-записи для доменного имени.
&lt;ul>
&lt;li>Проверка DNS-01 разрешает выпускать сертификаты с подстановкой (wildcard-сертификаты).&lt;/li>
&lt;li>После того, как Let&amp;rsquo;s Encrypt передаёт ACME-клиенту токен, клиент создаёт содержимое TXT-записи на основе токена и ключа аккаунта, и записывает её в &lt;code>_acme-challenge.&amp;lt;YOUR_DOMAIN&amp;gt;&lt;/code>.&lt;/li>
&lt;li>Далее, Let&amp;rsquo;s Encrypt запрашивает TXT-запись в DNS-зоне домена. Если значения совпадают, то сертификат готов к использованию!&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для автоматизации процесса выпуска и отзыва сертификатов желательно, чтобы DNS-провайдер предоставлял API для автоматических обновлений.&lt;/li>
&lt;li>Let&amp;rsquo;s Encrypt придерживается стандартов DNS для поиска TXT-записи при проверке DNS-01, поэтому можно задействовать записи CNAME или NS для делегирования права ответа за другие DNS-зоны.
&lt;ul>
&lt;li>Например настроив субдомен &lt;code>_acme-challenge&lt;/code> для специального сервера валидации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для одного и того же доменного имени допускается несколько TXT-записей.
&lt;ul>
&lt;li>Например, когда требуется одновременно выполнить проверку и для обычного сертификата, и для wildcard-сертификата.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Рекомендуется удалять неактуальные TXT-записи, т.к. из-за большого размера ответа сервера при проверке Let&amp;rsquo;s Encrypt признает проверку неудачной.&lt;/li>
&lt;li>Плюсы:
&lt;ul>
&lt;li>Подходит для сертификатов с подстановкой (wildcard-сертификатов).&lt;/li>
&lt;li>Одна запись для нескольких web-серверов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Минусы:
&lt;ul>
&lt;li>У DNS-провайдера может не быть своего API.&lt;/li>
&lt;li>Хранение учётной записи для DNS API небезопасно.&lt;/li>
&lt;li>DNS API может не быть методов оценки период обновления записей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="проверка-tls-alpn-01">&lt;span class="section-num">5.3&lt;/span> Проверка TLS-ALPN-01&lt;/h3>
&lt;ul>
&lt;li>Замена проверки TLS-SNI-01.&lt;/li>
&lt;li>Проверка TLS-ALPN-01 выполняется через TLS handshake на порте 443.&lt;/li>
&lt;li>Плюсы:
&lt;ul>
&lt;li>Будет работать даже если порт 80 закрыт.&lt;/li>
&lt;li>Реализована целиком внутри слоя TLS&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Минусы:
&lt;ul>
&lt;li>Пока не поддерживается Apache, Nginx или Certbot, и, возможно, не будет поддерживаться.&lt;/li>
&lt;li>Как и для проверки HTTP-01, настраивать нужно ответ от каждого web-сервера.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Почта. Yahoo.com. Настройка почтового клиента</title><link>https://yamadharma.github.io/ru/post/2022/04/26/mail-yahoo-com-configuring-mail-client/</link><pubDate>Tue, 26 Apr 2022 17:01:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/26/mail-yahoo-com-configuring-mail-client/</guid><description>&lt;p>Настройка клиента для работы с почтой &lt;em>Yahoo.com&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#парольные-файлы-для-pass--см-dot-менеджер-паролей-pass-20210428185000-менеджер-паролеи-pass-dot-md">&lt;span class="section-num">3&lt;/span> Парольные файлы для &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://mail.yahoo.com/" target="_blank" rel="noopener">https://mail.yahoo.com/&lt;/a>&lt;/li>
&lt;li>Используются локализованные названия для папок IMAP.&lt;/li>
&lt;li>Папки почты по умолчанию (отображение в web-интерфейсе):
&lt;ul>
&lt;li>&lt;code>INBOX&lt;/code>;&lt;/li>
&lt;li>&lt;code>Архив&lt;/code>;&lt;/li>
&lt;li>&lt;code>Корзина&lt;/code>;&lt;/li>
&lt;li>&lt;code>Спам&lt;/code>;&lt;/li>
&lt;li>&lt;code>Черновики&lt;/code>;&lt;/li>
&lt;li>&lt;code>Отправленные&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Папки почты по умолчанию (IMAP названия):
&lt;ul>
&lt;li>&lt;code>INBOX&lt;/code>;&lt;/li>
&lt;li>&lt;code>Archive&lt;/code>;&lt;/li>
&lt;li>&lt;code>Trash&lt;/code>;&lt;/li>
&lt;li>&lt;code>Bulk Mail&lt;/code>;&lt;/li>
&lt;li>&lt;code>Draft&lt;/code>;&lt;/li>
&lt;li>&lt;code>Sent&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Необходимо использовать пароль приложения: &lt;a href="https://help.yahoo.com/kb/generate-manage-third-party-passwords-sln15241.html" target="_blank" rel="noopener">https://help.yahoo.com/kb/generate-manage-third-party-passwords-sln15241.html&lt;/a>
&lt;ul>
&lt;li>Войдите на страницу безопасности учетной записи Yahoo &lt;a href="https://login.yahoo.com/account/security?.lang=en-US&amp;amp;.intl=us&amp;amp;.src=yhelp" target="_blank" rel="noopener">https://login.yahoo.com/account/security?.lang=en-US&amp;.intl=us&amp;.src=yhelp&lt;/a>.&lt;/li>
&lt;li>Нажмите «Создать пароль приложения» или «Создать и управлять паролями приложений».&lt;/li>
&lt;li>Введите название вашего приложения в текстовое поле.&lt;/li>
&lt;li>Щёлкните &lt;em>Создать пароль&lt;/em>.&lt;/li>
&lt;li>Следуйте инструкциям под паролем приложения.&lt;/li>
&lt;li>Щёлкните &lt;em>Готово&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/h2>
&lt;ul>
&lt;li>Справочная страница:
&lt;ul>
&lt;li>&lt;a href="https://help.yahoo.com/kb/SLN4075.html" target="_blank" rel="noopener">https://help.yahoo.com/kb/SLN4075.html&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://help.yahoo.com/kb/pop-access-settings-instructions-yahoo-mail-sln4724.html" target="_blank" rel="noopener">https://help.yahoo.com/kb/pop-access-settings-instructions-yahoo-mail-sln4724.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на &lt;code>yahoo.com&lt;/code> (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль приложения для вашего почтового ящика домена на &lt;code>yahoo.com&lt;/code>;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>smtp.mail.yahoo.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;
&lt;ul>
&lt;li>порт &amp;mdash; 465;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>защита соединения &amp;mdash; STARTTLS;
&lt;ul>
&lt;li>порт &amp;mdash; 587.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на &lt;code>yahoo.com&lt;/code> (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль приложения для вашего почтового ящика домена на &lt;code>yahoo.com&lt;/code>;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>imap.mail.yahoo.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 993.&lt;/li>
&lt;/ul>
&lt;h3 id="pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на &lt;code>yahoo.com&lt;/code> (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль приложения для вашего почтового ящика домена на &lt;code>yahoo.com&lt;/code>;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>pop.mail.yahoo.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 995.&lt;/li>
&lt;/ul>
&lt;h2 id="парольные-файлы-для-pass--см-dot-менеджер-паролей-pass-20210428185000-менеджер-паролеи-pass-dot-md">&lt;span class="section-num">3&lt;/span> Парольные файлы для &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>)&lt;/h2>
&lt;ul>
&lt;li>Для входа через web-интерфейс: &lt;code>yahoo.com/account@yahoo.com.gpg&lt;/code>.&lt;/li>
&lt;li>Пароль приложения: &lt;code>yahoo.com/account@yahoo.com@apppassword.gpg&lt;/code>.&lt;/li>
&lt;li>Пароль приложения для SMTP: &lt;code>yahoo.com/account@yahoo.com@smtp.mail.yahoo.com.gpg&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>DavMail</title><link>https://yamadharma.github.io/ru/post/2022/04/10/davmail/</link><pubDate>Sun, 10 Apr 2022 19:02:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/10/davmail/</guid><description>&lt;p>DavMail &amp;mdash; прокси-сервер, позволяющая взаимодействовать с сервером Microsoft Exchange.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#пакетная-установка">&lt;span class="section-num">2.1&lt;/span> Пакетная установка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файлы-конфигурации">&lt;span class="section-num">3&lt;/span> Файлы конфигурации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#запуск-под-пользователем">&lt;span class="section-num">3.1&lt;/span> Запуск под пользователем&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-на-системном-уровне">&lt;span class="section-num">3.2&lt;/span> Запуск на системном уровне&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#параметры-настройки">&lt;span class="section-num">4&lt;/span> Параметры настройки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#протокол-exchange">&lt;span class="section-num">4.1&lt;/span> Протокол Exchange&lt;/a>&lt;/li>
&lt;li>&lt;a href="#url-адрес-owa">&lt;span class="section-num">4.2&lt;/span> URL-адрес OWA&lt;/a>&lt;/li>
&lt;li>&lt;a href="#порты">&lt;span class="section-num">4.3&lt;/span> Порты&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конфигурирование">&lt;span class="section-num">5&lt;/span> Конфигурирование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#протокол-o365modern">&lt;span class="section-num">5.1&lt;/span> Протокол &lt;code>O365Modern&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://davmail.sourceforge.net/" target="_blank" rel="noopener">http://davmail.sourceforge.net/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="пакетная-установка">&lt;span class="section-num">2.1&lt;/span> Пакетная установка&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Gentoo&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge net-mail/davmail-bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Не в основном дереве portage.&lt;/li>
&lt;li>Используйте оверлей &lt;em>pentoo&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="файлы-конфигурации">&lt;span class="section-num">3&lt;/span> Файлы конфигурации&lt;/h2>
&lt;ul>
&lt;li>Два варианта работы:
&lt;ul>
&lt;li>запуск под пользователем;&lt;/li>
&lt;li>запуск на системном уровне.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-под-пользователем">&lt;span class="section-num">3.1&lt;/span> Запуск под пользователем&lt;/h3>
&lt;ul>
&lt;li>Конфигурационный файл: &lt;code>~/.davmail.properties&lt;/code>.&lt;/li>
&lt;li>Запуск:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">davmail
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В трее появляется значок.&lt;/li>
&lt;li>Можно сконфигурить в графическом режиме, а после скопировать конфигурационный файл на системный уровень.&lt;/li>
&lt;li>Если сконфигурирована аутентификация Oauth2, то конфигурационный файл содержит токен доступа.
&lt;ul>
&lt;li>В таком виде использовать конфигурационный файл на системном уровне вряд ли получится.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>systemd-скрипт&lt;/em> &lt;code>/usr/lib/systemd/user/davmail.service&lt;/code> для запуска под пользователем:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Unit]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description=Davmail Exchange gateway for %i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Documentation=http://davmail.sourceforge.net/serversetup.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Documentation=http://davmail.sourceforge.net/advanced.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Documentation=http://davmail.sourceforge.net/sslsetup.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">After=network.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Service]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStart=/usr/bin/davmail %h/.davmail.properties
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Restart=on-failure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Install]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WantedBy=default.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DefaultInstance=davmail
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно поместить этот скрипт в каталог &lt;code>~/.config/systemd/user&lt;/code>.&lt;/li>
&lt;li>Запуск скрипта:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now davmail
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-на-системном-уровне">&lt;span class="section-num">3.2&lt;/span> Запуск на системном уровне&lt;/h3>
&lt;ul>
&lt;li>Конфигурационный файл: &lt;code>/etc/davmail.properties&lt;/code>.&lt;/li>
&lt;li>Запускается системным init-скриптом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now davmail
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;em>systemd-скрипт&lt;/em> &lt;code>/usr/lib/systemd/system/davmail.service&lt;/code> для запуска:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Unit&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Davmail&lt;/span> &lt;span class="n">Exchange&lt;/span> &lt;span class="n">gateway&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Documentation&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">davmail&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sourceforge&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">serversetup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Documentation&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">davmail&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sourceforge&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">advanced&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Documentation&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">davmail&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sourceforge&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sslsetup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">After&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">network&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Service&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">simple&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">User&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">davmail&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">PermissionsStartOnly&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ExecStartPre&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">touch&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">davmail&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ExecStartPre&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">chown&lt;/span> &lt;span class="n">davmail&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">davmail&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">davmail&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ExecStart&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">davmail&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">davmail&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">properties&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">SuccessExitStatus&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">143&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Restart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">on&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">failure&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">Install&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WantedBy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="параметры-настройки">&lt;span class="section-num">4&lt;/span> Параметры настройки&lt;/h2>
&lt;h3 id="протокол-exchange">&lt;span class="section-num">4.1&lt;/span> Протокол Exchange&lt;/h3>
&lt;ul>
&lt;li>Параметр: &lt;code>davmail.mode&lt;/code>.&lt;/li>
&lt;li>&lt;code>O365Modern&lt;/code> : Современная проверка подлинности Office 365 (Oauth2).&lt;/li>
&lt;li>&lt;code>O365Interactive&lt;/code> : Современная проверка подлинности Office 365 с интерактивным окном браузера:
&lt;ul>
&lt;li>недоступно в автономном режиме (headless mode);&lt;/li>
&lt;li>требуется OpenJFX.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>O365Manual&lt;/code> : Современная проверка подлинности Office 365 с интерактивным диалогом:
&lt;ul>
&lt;li>недоступно в автономном режиме (headless mode).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>O365&lt;/code> : EWS режим Office 365.&lt;/li>
&lt;li>&lt;code>EWS&lt;/code> : Exchange 2007 и более поздние версии.&lt;/li>
&lt;li>&lt;code>WebDav&lt;/code> : Exchange 2007 и более ранний с режимом WebDav.&lt;/li>
&lt;li>&lt;code>Auto&lt;/code> : Автоматический режим WebDav с переключением в режим &lt;code>EWS&lt;/code> при ошибке.&lt;/li>
&lt;/ul>
&lt;h3 id="url-адрес-owa">&lt;span class="section-num">4.2&lt;/span> URL-адрес OWA&lt;/h3>
&lt;ul>
&lt;li>Параметр: &lt;code>davmail.url&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">davmail.url=https://outlook.office365.com/EWS/Exchange.asmx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>URL-адрес Outlook Web Access для доступа к серверу Exchange.&lt;/li>
&lt;li>&lt;code>https://outlook.office365.com/EWS/Exchange.asmx&lt;/code> : значение по умолчанию для Office 365;&lt;/li>
&lt;li>&lt;code>https://Your.Exchange.Server/EWS/Exchange.asmx&lt;/code> : для своего Exchange-сервера.&lt;/li>
&lt;li>Значение зависит от версии Microsoft Exchange.&lt;/li>
&lt;/ul>
&lt;h3 id="порты">&lt;span class="section-num">4.3&lt;/span> Порты&lt;/h3>
&lt;ul>
&lt;li>Значение локальных портов обычно равно стандартному порту + 1000:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">davmail.smtpPort=1025
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">davmail.imapPort=1143
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">davmail.popPort=1110
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">davmail.ldapPort=1389
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">davmail.caldavPort=1080
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурирование">&lt;span class="section-num">5&lt;/span> Конфигурирование&lt;/h2>
&lt;h3 id="протокол-o365modern">&lt;span class="section-num">5.1&lt;/span> Протокол &lt;code>O365Modern&lt;/code>&lt;/h3>
&lt;ul>
&lt;li>Для настройки используйте &lt;code>O365Interactive&lt;/code> или &lt;code>O365Manual&lt;/code>.&lt;/li>
&lt;li>Для работы используйте &lt;code>O365Modern&lt;/code>.&lt;/li>
&lt;li>При запуске в режиме &lt;code>O365Interactive&lt;/code> откроется окно с web-ссылкой и полем для заполнения.
&lt;ul>
&lt;li>Перейдите по ней и разрешите приложению доступ.&lt;/li>
&lt;li>После этого откроется пустое окно.&lt;/li>
&lt;li>Адресную строку из этого окна перенесите в поле в исходном окне.&lt;/li>
&lt;li>Сохраните конфигурацию.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Научная школа. Возможные инновации</title><link>https://yamadharma.github.io/ru/post/2022/04/07/scientific-school-possible-innovations/</link><pubDate>Thu, 07 Apr 2022 13:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/07/scientific-school-possible-innovations/</guid><description>&lt;p>Возможные инновации по результатам исследований.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#возможные-направления-инноваций">&lt;span class="section-num">1&lt;/span> Возможные направления инноваций&lt;/a>&lt;/li>
&lt;li>&lt;a href="#расчёт-оптических-приборов">&lt;span class="section-num">2&lt;/span> Расчёт оптических приборов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#технологии-devops">&lt;span class="section-num">3&lt;/span> Технологии DevOps&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="возможные-направления-инноваций">&lt;span class="section-num">1&lt;/span> Возможные направления инноваций&lt;/h2>
&lt;ul>
&lt;li>Расчёт оптических приборов.&lt;/li>
&lt;li>Управление сетевой инфраструктурой организации.&lt;/li>
&lt;li>Управление компьютерной инфраструктурой организации.&lt;/li>
&lt;/ul>
&lt;h2 id="расчёт-оптических-приборов">&lt;span class="section-num">2&lt;/span> Расчёт оптических приборов&lt;/h2>
&lt;ul>
&lt;li>Расчёт сложных оптических приборов:
&lt;ul>
&lt;li>определение параметров приборов по заданному необходимому пути лучей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В зависимости от длины волны излучения можно использовать в разных областях:
&lt;ul>
&lt;li>волноводные структуры;&lt;/li>
&lt;li>управление распространением электромагнитного излучения.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Методика построения суррогатных моделей для моделирования свойств сложных оптических систем.&lt;/li>
&lt;/ul>
&lt;h2 id="технологии-devops">&lt;span class="section-num">3&lt;/span> Технологии DevOps&lt;/h2>
&lt;ul>
&lt;li>Мы можем предложить широкий спектр консалтинговых услуг по следующим направлениям:
&lt;ul>
&lt;li>миграция программного обеспечения организации с проприетарного на свободно программное обеспечение (например, Windows -&amp;gt; Linux);&lt;/li>
&lt;li>управление и мониторинг сетевой инфраструктуры на основе свободного программного обеспечения;&lt;/li>
&lt;li>управление и мониторинг компьютерной инфраструктуры на основе свободного программного обеспечения;&lt;/li>
&lt;li>миграция сетевых каталогов на свободное программное обеспечение;&lt;/li>
&lt;li>миграция облачной инфраструктуры иностранных провайдеров в локальную облачную инфраструктуру организации;&lt;/li>
&lt;li>перевод офисной инфраструктуры на технологию documentation-as-code.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>rofi-pass</title><link>https://yamadharma.github.io/ru/post/2022/04/03/rofi-pass/</link><pubDate>Sun, 03 Apr 2022 19:11:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/04/03/rofi-pass/</guid><description>&lt;p>Скрипт bash для работы с менеджером паролей &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>), используя интерфейс &lt;em>rofi&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/19/launcher_rofi/">Запуск приложений. Rofi&lt;/a>).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#функциональность">&lt;span class="section-num">3&lt;/span> Функциональность&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#поиск-файла-конфигурации">&lt;span class="section-num">4.1&lt;/span> Поиск файла конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#стандартные-сочетания-клавиш">&lt;span class="section-num">4.2&lt;/span> Стандартные сочетания клавиш&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#интеграция-с-графическим-окружением">&lt;span class="section-num">5&lt;/span> Интеграция с графическим окружением&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#i3wm">&lt;span class="section-num">5.1&lt;/span> i3wm&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Интеграция &lt;em>pass&lt;/em> с &lt;em>rofi&lt;/em>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/carnager/rofi-pass" target="_blank" rel="noopener">https://github.com/carnager/rofi-pass&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Установка
&lt;ul>
&lt;li>
&lt;p>Gentoo&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge x11-misc/rofi-pass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Находится в репозитории &lt;a href="https://gpo.zugaina.org/Overlays/winny" target="_blank" rel="noopener">winny&lt;/a>.&lt;/li>
&lt;li>Добавить репозиторий:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">layman -a winny
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="функциональность">&lt;span class="section-num">3&lt;/span> Функциональность&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Открытие URL-адреса записей с помощью горячих клавиш.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Добавление новых записей в хранилище паролей.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Редактирование существующих записей.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Создание новых паролей для записей.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Перемещение/удаление существующих записей.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Поддержка нескольких хранилищ паролей.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Автозаполнение полей пользователя и/или пароля.&lt;/p>
&lt;ul>
&lt;li>Формат файлов паролей должен быть следующим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">foobarmysecurepassword
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user: MyUser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">url: http://my.url.foo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Автоматический ввод имени пользователя на основе пути файла пароля.&lt;/p>
&lt;ul>
&lt;li>Структура хранилища паролей должна быть следующей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">foo/bar/site.com/username
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Нужно установить &lt;code>default-autotype&lt;/code> в &lt;code>path :tab pass&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Автоматический ввод более одного поля с использованием записи &lt;code>autotype&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">foobarmysecurepassword
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user: MyUser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SomeField: foobar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AnotherField: barfoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">url: http://my.url.foo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">autotype: SomeField :tab user :tab AnotherField :tab pass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Используются флаги: &lt;code>:tab&lt;/code>, &lt;code>:enter&lt;/code>, &lt;code>:space&lt;/code>, &lt;code>:otp&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Генерация одноразовых паролей.&lt;/p>
&lt;ul>
&lt;li>Формат одноразовых паролей должен быть совместим с &lt;code>pass-otp&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[...]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">otpauth://[...]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно задать метод генерации одноразовых паролей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[...]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">otp_method: /opt/obscure-otp-generator/oog --some-option some args
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Поле &lt;code>:delay&lt;/code> вызывает задержку (по умолчанию 2 секунды).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Все горячие клавиши настраиваются в конфигурационном файле.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Имена полей &lt;code>user&lt;/code>, &lt;code>url&lt;/code>, &lt;code>autotype&lt;/code> можно настраивать.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="поиск-файла-конфигурации">&lt;span class="section-num">4.1&lt;/span> Поиск файла конфигурации&lt;/h3>
&lt;ul>
&lt;li>Конфигурации считывается в следующем порядке:
&lt;ul>
&lt;li>переменная среды &lt;code>ROFI_PASS_CONFIG&lt;/code>;&lt;/li>
&lt;li>&lt;code>$HOME/.config/rofi-pass/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/rofi-pass.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Загружается только первый найденный файл.&lt;/li>
&lt;li>Если файл конфигурации не существует, используются значения по умолчанию.&lt;/li>
&lt;li>Возможно установить переменную среды при запуске:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ROFI_PASS_CONFIG&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/path/to/config&amp;#34;&lt;/span> rofi-pass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="стандартные-сочетания-клавиш">&lt;span class="section-num">4.2&lt;/span> Стандартные сочетания клавиш&lt;/h3>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Сочетания клавиш для &lt;i>rofi-pass&lt;/i>
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Команда&lt;/th>
&lt;th>Сочетание клавиш&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>autotype&lt;/td>
&lt;td>&lt;code>Alt+1&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>type_user&lt;/td>
&lt;td>&lt;code>Alt+2&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>type_pass&lt;/td>
&lt;td>&lt;code>Alt+3&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>open_url&lt;/td>
&lt;td>&lt;code>Alt+4&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy_name&lt;/td>
&lt;td>&lt;code>Alt+u&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy_url&lt;/td>
&lt;td>&lt;code>Alt+l&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy_pass&lt;/td>
&lt;td>&lt;code>Alt+p&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show&lt;/td>
&lt;td>&lt;code>Alt+o&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy_entry&lt;/td>
&lt;td>&lt;code>Alt+2&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>type_entry&lt;/td>
&lt;td>&lt;code>Alt+1&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>copy_menu&lt;/td>
&lt;td>&lt;code>Alt+c&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>action_menu&lt;/td>
&lt;td>&lt;code>Alt+a&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>type_menu&lt;/td>
&lt;td>&lt;code>Alt+t&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>help&lt;/td>
&lt;td>&lt;code>Alt+h&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switch&lt;/td>
&lt;td>&lt;code>Alt+x&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>insert_pass&lt;/td>
&lt;td>&lt;code>Alt+n&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="интеграция-с-графическим-окружением">&lt;span class="section-num">5&lt;/span> Интеграция с графическим окружением&lt;/h2>
&lt;h3 id="i3wm">&lt;span class="section-num">5.1&lt;/span> i3wm&lt;/h3>
&lt;ul>
&lt;li>Можно добавить в конфигурационный файл вызов &lt;em>rofi-pass&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym $mod+p exec &amp;#34;rofi-pass&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Neotree</title><link>https://yamadharma.github.io/ru/post/2022/03/23/emacs-neotree/</link><pubDate>Wed, 23 Mar 2022 18:52:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/03/23/emacs-neotree/</guid><description>&lt;p>Плагин к Emacs для отображения дерева каталогов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">2&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#темы-neotree">&lt;span class="section-num">2.1&lt;/span> Темы &lt;em>NeoTree&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сочетания-клавиш">&lt;span class="section-num">2.2&lt;/span> Сочетания клавиш&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отслеживание-каталога">&lt;span class="section-num">2.3&lt;/span> Отслеживание каталога&lt;/a>&lt;/li>
&lt;li>&lt;a href="#взаимодействие-с-projectile">&lt;span class="section-num">2.4&lt;/span> Взаимодействие с &lt;em>projectile&lt;/em>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>&lt;em>Neotree&lt;/em> основан на идее NerdTree для Vim.&lt;/li>
&lt;li>Отображает дерево каталогов в боковой панели.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/jaypei/emacs-neotree" target="_blank" rel="noopener">https://github.com/jaypei/emacs-neotree&lt;/a>&lt;/li>
&lt;li>Wiki: &lt;a href="https://www.emacswiki.org/emacs/NeoTree" target="_blank" rel="noopener">https://www.emacswiki.org/emacs/NeoTree&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">2&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="темы-neotree">&lt;span class="section-num">2.1&lt;/span> Темы &lt;em>NeoTree&lt;/em>&lt;/h3>
&lt;ul>
&lt;li>Можно изменить тему NeoTree, используя переменную &lt;code>neo-theme&lt;/code>.&lt;/li>
&lt;li>Значение по умолчанию &lt;code>classic&lt;/code>.&lt;/li>
&lt;li>Используйте &lt;code>nerd&lt;/code>, если хотите, чтобы он больше всего походил на NERDTree в VIM.&lt;/li>
&lt;li>Для настройки следует установить переменную &lt;code>neo-theme&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">neo-theme&lt;/span> &lt;span class="ss">&amp;#39;icons&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Параметры темы NeoTree
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Параметр&lt;/th>
&lt;th>Описание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>classic&lt;/td>
&lt;td>Использование иконок для отображения элементов&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ascii&lt;/td>
&lt;td>Использование символов &lt;code>x&lt;/code>, &lt;code>-&lt;/code> для отображения каталогов&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>arrow&lt;/td>
&lt;td>Использование стрелок Юникод&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>icons&lt;/td>
&lt;td>Использование пакета &lt;code>all-the-icons&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nerd&lt;/td>
&lt;td>Использование режима отступов и стрелкок как в NERDTree&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="сочетания-клавиш">&lt;span class="section-num">2.2&lt;/span> Сочетания клавиш&lt;/h3>
&lt;ul>
&lt;li>Сочетания работают только в буфере &lt;em>NeoTree&lt;/em>&lt;/li>
&lt;/ul>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 2:&lt;/span>
Сочетания клавиш NeoTree
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Клавиши&lt;/th>
&lt;th>Значение&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>n&lt;/code>&lt;/td>
&lt;td>следующая строка&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>p&lt;/code>&lt;/td>
&lt;td>предыдущая строка&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>SPC&lt;/code> или &lt;code>RET&lt;/code> или &lt;code>TAB&lt;/code>&lt;/td>
&lt;td>Открыть текущий элемент, если это файл. Свернуть/развернуть текущий элемент, если это каталог&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>U&lt;/code>&lt;/td>
&lt;td>Перейти вверх по каталогу&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>g&lt;/code>&lt;/td>
&lt;td>Обновить&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>A&lt;/code>&lt;/td>
&lt;td>Развернуть/свернуть окно NeoTree&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>H&lt;/code>&lt;/td>
&lt;td>Переключить отображение скрытых файлов&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>O&lt;/code>&lt;/td>
&lt;td>Рекурсивно открыть каталог&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>C-c&lt;/code> &lt;code>C-n&lt;/code>&lt;/td>
&lt;td>Создайте файл или создайте каталог, если имя файла заканчивается на &lt;code>/&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>C-c&lt;/code> &lt;code>C-d&lt;/code>&lt;/td>
&lt;td>Удалить файл или каталог&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>C-c&lt;/code> &lt;code>C-r&lt;/code>&lt;/td>
&lt;td>Переименуйте файл или каталог&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>C-c&lt;/code> &lt;code>C-c&lt;/code>&lt;/td>
&lt;td>Измените корневой каталог&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>C-c&lt;/code> &lt;code>C-p&lt;/code>&lt;/td>
&lt;td>Скопируйте файл или каталог&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="отслеживание-каталога">&lt;span class="section-num">2.3&lt;/span> Отслеживание каталога&lt;/h3>
&lt;ul>
&lt;li>Каждый раз при открытии окна &lt;em>neotree&lt;/em> фокус переходит на текущий файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">neo-smart-open&lt;/span> &lt;span class="no">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="взаимодействие-с-projectile">&lt;span class="section-num">2.4&lt;/span> Взаимодействие с &lt;em>projectile&lt;/em>&lt;/h3>
&lt;ul>
&lt;li>Переключение на корень проекта при открытии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">defun&lt;/span> &lt;span class="nv">neotree-project-dir&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Open NeoTree using the git root.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">interactive&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">let&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nv">project-dir&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">projectile-project-root&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">file-name&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">buffer-file-name&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">neotree-toggle&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">if&lt;/span> &lt;span class="nv">project-dir&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">neo-global--window-exists-p&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">progn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">neotree-dir&lt;/span> &lt;span class="nv">project-dir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">neotree-find&lt;/span> &lt;span class="nv">file-name&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">message&lt;/span> &lt;span class="s">&amp;#34;Could not find git project root.&amp;#34;&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nv">global-set-key&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">f8&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="ss">&amp;#39;neotree-project-dir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Закачка с youtube</title><link>https://yamadharma.github.io/ru/post/2022/03/09/download-youtube/</link><pubDate>Wed, 09 Mar 2022 17:38:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/03/09/download-youtube/</guid><description>&lt;p>Возникла задача скопировать видео с Youtube. Основная часть содержимого &amp;mdash; это мои видеозаписи для преподавания.
Для этой задачи я использовал &lt;code>yt-dlp&lt;/code>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">2.1&lt;/span> Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">2.2&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#примеры-использования">&lt;span class="section-num">3&lt;/span> Примеры использования&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#скачивание-видео-с-youtube">&lt;span class="section-num">3.1&lt;/span> Скачивание видео с Youtube&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скачать-только-аудио-дорожку">&lt;span class="section-num">3.2&lt;/span> Скачать только аудио-дорожку&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скачивание-своего-общедоступного-видео-с-youtube">&lt;span class="section-num">3.3&lt;/span> Скачивание своего общедоступного видео с Youtube&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#постановка-задачи">&lt;span class="section-num">3.3.1&lt;/span> Постановка задачи&lt;/a>&lt;/li>
&lt;li>&lt;a href="#решение">&lt;span class="section-num">3.3.2&lt;/span> Решение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конфигурационный-файл">&lt;span class="section-num">4&lt;/span> Конфигурационный файл&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener">https://github.com/yt-dlp/yt-dlp&lt;/a>&lt;/li>
&lt;li>Является продвинутым форком &lt;code>youtube-dl&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="linux">&lt;span class="section-num">2.1&lt;/span> Linux&lt;/h3>
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>Установка &lt;code>yt-dlp&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge net-misc/yt-dlp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка в режиме совместимости с &lt;code>youtube-dl&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">USE&lt;/span>&lt;span class="o">=&lt;/span>yt-dlp emerge net-misc/youtube-dl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="windows">&lt;span class="section-num">2.2&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>C использованием &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install yt-dlp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="примеры-использования">&lt;span class="section-num">3&lt;/span> Примеры использования&lt;/h2>
&lt;h3 id="скачивание-видео-с-youtube">&lt;span class="section-num">3.1&lt;/span> Скачивание видео с Youtube&lt;/h3>
&lt;ul>
&lt;li>Просто указывается линк на скачиваемое видео:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yt-dlp &amp;lt;url&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Загрузите лучшее видео с лучшим кодеком, но не лучше, чем &lt;code>h264&lt;/code>; разрешение не выше, чем 1080 строк:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yt-dlp -S &lt;span class="s2">&amp;#34;codec:h264,height:1080&amp;#34;&lt;/span> &amp;lt;url&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="скачать-только-аудио-дорожку">&lt;span class="section-num">3.2&lt;/span> Скачать только аудио-дорожку&lt;/h3>
&lt;ul>
&lt;li>Опция &lt;code>-x&lt;/code> используется для загрузки только аудио (требуется &lt;em>FFmpeg&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">youtube-dl -x -f bestaudio &amp;lt;url&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="скачивание-своего-общедоступного-видео-с-youtube">&lt;span class="section-num">3.3&lt;/span> Скачивание своего общедоступного видео с Youtube&lt;/h3>
&lt;h4 id="постановка-задачи">&lt;span class="section-num">3.3.1&lt;/span> Постановка задачи&lt;/h4>
&lt;ul>
&lt;li>Видео добавлены в плейлисты по темам.&lt;/li>
&lt;li>Есть ссылки на чужие видео.&lt;/li>
&lt;li>Скачать нужно только своё общедоступное видео.&lt;/li>
&lt;li>Следует сохранить порядок расположения видео в плейлистах.&lt;/li>
&lt;/ul>
&lt;h4 id="решение">&lt;span class="section-num">3.3.2&lt;/span> Решение&lt;/h4>
&lt;ul>
&lt;li>&lt;code>%(playlist)s&lt;/code> : будем сортировать виде по плейлистам.&lt;/li>
&lt;li>&lt;code>%(playlist_index)s&lt;/code> : будем сохранять номер видео в плейлисте.&lt;/li>
&lt;li>&lt;code>%(title)s.%(ext)s&lt;/code> : будем сохранять видео с его названием.&lt;/li>
&lt;li>&lt;code>--write-comments&lt;/code> : будем сохранять всю дополнительную информацию в отдельный файл формата &lt;code>json&lt;/code>.&lt;/li>
&lt;li>&lt;code>--match-filter &amp;quot;uploader = 'Dmitry Kulyabov'&amp;quot;&lt;/code> : будем скачивать только те видео, который загрузили мы сами.&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Итоговый скрипт&lt;/p>
&lt;ul>
&lt;li>Итоговый скрипт будет иметь следующий вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yt-dlp -o &lt;span class="s2">&amp;#34;%(uploader)s/%(playlist)s/%(playlist_index)s - %(title)s.%(ext)s&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;https://www.youtube.com/user/&amp;lt;youtube user name&amp;gt;/playlists&amp;#34;&lt;/span> --write-comments --match-filter &lt;span class="s2">&amp;#34;uploader = &amp;#39;Dmitry Kulyabov&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="конфигурационный-файл">&lt;span class="section-num">4&lt;/span> Конфигурационный файл&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Конфигурационный файл служит для заданий опций по умолчанию.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Конфигурационный файл:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">~/.config/yt-dlp/config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Пример содержания конфигурационого файла:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Ignore errors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--ignore-errors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Save in ~/Videos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-o ~/Videos/%(title)s.%(ext)s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Prefer 1080p or lower resolutions, FPS &amp;lt; 60 Hz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-f bestvideo[ext=mp4][height&amp;lt;1200][fps&amp;lt;60]+bestaudio[ext=m4a]/bestvideo[height&amp;lt;1200][fps&amp;lt;60]+bestaudio/best[height&amp;lt;1200][fps&amp;lt;60]/best
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Использование sfdisk</title><link>https://yamadharma.github.io/ru/post/2022/03/08/using-sfdisk/</link><pubDate>Tue, 08 Mar 2022 19:45:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/03/08/using-sfdisk/</guid><description>&lt;p>Использование &lt;em>sfdisk&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#примеры-использования">&lt;span class="section-num">1&lt;/span> Примеры использования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="примеры-использования">&lt;span class="section-num">1&lt;/span> Примеры использования&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Создать один большой раздел&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;;&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sfdisk /dev/sda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Создать один большой раздел с определённым типом раздела&lt;/p>
&lt;ul>
&lt;li>W95 FAT32 (LBA)
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;,,c;&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sfdisk /dev/sda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>lvm
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;,,8e;&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sfdisk /dev/sdd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Три основных раздела: два по 50 МиБ и третья на всё остальное пространство:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sfdisk /dev/sda &lt;span class="s">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,50MiB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,50MiB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Раздел диспетчера загрузки OS2 размером 1 МБ, раздел DOS размером 50 МБ и три расширенных раздела (DOS D:, подкачка Linux, Linux):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sfdisk /dev/sda &lt;span class="s">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,1MiB,a
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,50MiB,6
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,,E
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,20MiB,4
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">,16MiB,S
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Полезные команды&lt;/p>
&lt;ul>
&lt;li>список разделов
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sfdisk -l /dev/sda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>список расширенных разделов
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sfdisk -l -x /dev/sda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>список типов разделов
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sfdisk -T
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Ключи ssh</title><link>https://yamadharma.github.io/ru/post/2022/02/17/ssh-keys/</link><pubDate>Thu, 17 Feb 2022 14:53:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/17/ssh-keys/</guid><description>&lt;p>Создание и работа с ключами ssh.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#алгоритмы-шифрования-ssh">&lt;span class="section-num">1&lt;/span> Алгоритмы шифрования ssh&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#аутентификация">&lt;span class="section-num">1.1&lt;/span> Аутентификация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#отключение-ключей-у-сервера-sshd">&lt;span class="section-num">1.1.1&lt;/span> Отключение ключей у сервера &lt;code>sshd&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-серверных-ключей">&lt;span class="section-num">1.1.2&lt;/span> Создание серверных ключей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-клиентских-ключей">&lt;span class="section-num">1.1.3&lt;/span> Создание клиентских ключей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#симметричные-шифры">&lt;span class="section-num">1.2&lt;/span> Симметричные шифры&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурация-сервера">&lt;span class="section-num">1.2.1&lt;/span> Конфигурация сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-для-клиентов">&lt;span class="section-num">1.2.2&lt;/span> Конфигурация для клиентов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#обмен-ключами">&lt;span class="section-num">1.3&lt;/span> Обмен ключами&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-сервера">&lt;span class="section-num">1.3.1&lt;/span> Настройка сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">1.3.2&lt;/span> Настройка клиента&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#файлы-ssh-ключей">&lt;span class="section-num">2&lt;/span> Файлы ssh-ключей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-ключа-ssh">&lt;span class="section-num">3&lt;/span> Создание ключа ssh&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавление-ssh-ключа-в-учётную-запись-github">&lt;span class="section-num">4&lt;/span> Добавление SSH-ключа в учётную запись GitHub&lt;/a>&lt;/li>
&lt;li>&lt;a href="#аутентификации-на-базе-ключей-ssh">&lt;span class="section-num">5&lt;/span> Аутентификации на базе ключей SSH&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#копирование-открытого-ключа-на-удалённый-хост-с-использованием-ssh-copy-id">&lt;span class="section-num">5.1&lt;/span> Копирование открытого ключа на удалённый хост с использованием &lt;code>ssh-copy-id&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копирование-открытого-ключа-с-помощью-ssh">&lt;span class="section-num">5.2&lt;/span> Копирование открытого ключа с помощью SSH&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка-ключей">&lt;span class="section-num">6&lt;/span> Настройка ключей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="алгоритмы-шифрования-ssh">&lt;span class="section-num">1&lt;/span> Алгоритмы шифрования ssh&lt;/h2>
&lt;h3 id="аутентификация">&lt;span class="section-num">1.1&lt;/span> Аутентификация&lt;/h3>
&lt;p>В SSH поддерживается четыре алгоритма аутентификации по открытым ключам:&lt;/p>
&lt;ul>
&lt;li>DSA,
&lt;ul>
&lt;li>размер ключей DSA не может превышать 1024, его следует отключить&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>RSA
&lt;ul>
&lt;li>следует создавать ключ большого размера: 4096 бит&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ECDSA
&lt;ul>
&lt;li>ECDSA завязан на технологиях NIST, его следует отключить&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Ed25519
&lt;ul>
&lt;li>используется пока не везде&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="отключение-ключей-у-сервера-sshd">&lt;span class="section-num">1.1.1&lt;/span> Отключение ключей у сервера &lt;code>sshd&lt;/code>&lt;/h4>
&lt;ul>
&lt;li>Ключи отключаются у сервера.&lt;/li>
&lt;li>Если просто удалить ключ, он будет повторно создан при перезапуске демона.
&lt;ul>
&lt;li>Можно воспользоваться обходным путём с создать заведомо нерабочую символическую ссылку, которая помешает создать и использовать ключ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /etc/ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm ssh_host_ecdsa_key*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s ssh_host_ecdsa_key ssh_host_ecdsa_key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm ssh_host_dsa_key*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s ssh_host_dsa_key ssh_host_dsa_key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm ssh_host_key*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s ssh_host_key ssh_host_key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="создание-серверных-ключей">&lt;span class="section-num">1.1.2&lt;/span> Создание серверных ключей&lt;/h4>
&lt;ul>
&lt;li>Для RSA следует создать ключ большего размера:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /etc/ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm ssh_host_rsa_key*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-keygen -t rsa -b &lt;span class="m">4096&lt;/span> -f ssh_host_rsa_key &amp;lt; /dev/null
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="создание-клиентских-ключей">&lt;span class="section-num">1.1.3&lt;/span> Создание клиентских ключей&lt;/h4>
&lt;ul>
&lt;li>Для создания клиентских ключей лучше использовать команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -t ed25519
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-keygen -t rsa -b &lt;span class="m">4096&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="симметричные-шифры">&lt;span class="section-num">1.2&lt;/span> Симметричные шифры&lt;/h3>
&lt;ul>
&lt;li>Из 15 поддерживаемых в SSH алгоритмов симметричного шифрования, безопасными можно считать:
&lt;ul>
&lt;li>&lt;code>chacha20-poly1305&lt;/code>;&lt;/li>
&lt;li>&lt;code>aes*-ctr&lt;/code>;&lt;/li>
&lt;li>&lt;code>aes*-gcm&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Шифры &lt;code>3des-cbc&lt;/code> и &lt;code>arcfour&lt;/code> потенциально уязвимы в силу использования DES и RC4.&lt;/li>
&lt;li>Шифр &lt;code>cast128-cbc&lt;/code> применяет слишком короткий размер блока (64 бит).&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация-сервера">&lt;span class="section-num">1.2.1&lt;/span> Конфигурация сервера&lt;/h4>
&lt;ul>
&lt;li>В &lt;code>/etc/ssh/sshd_config&lt;/code> рекомендуется добавить:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Ciphers aes256-gcm@openssh.com,aes128-gcm@openssh.com,chacha20-poly1305@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="конфигурация-для-клиентов">&lt;span class="section-num">1.2.2&lt;/span> Конфигурация для клиентов&lt;/h4>
&lt;ul>
&lt;li>В &lt;code>/etc/ssh/ssh_config&lt;/code> рекомендуется добавить:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Ciphers aes256-gcm@openssh.com,aes128-gcm@openssh.com,chacha20-poly1305@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="обмен-ключами">&lt;span class="section-num">1.3&lt;/span> Обмен ключами&lt;/h3>
&lt;ul>
&lt;li>Применяемые в SSH методы обмена ключей DH (Diffie-Hellman) и ECDH (Elliptic Curve Diffie-Hellman) можно считать безопасными.&lt;/li>
&lt;li>Из 8 поддерживаемых в SSH протоколов обмена ключами вызывают подозрения три, основанные на рекомендациях NIST:
&lt;ul>
&lt;li>&lt;code>ecdh-sha2-nistp256&lt;/code>;&lt;/li>
&lt;li>&lt;code>ecdh-sha2-nistp384&lt;/code>;&lt;/li>
&lt;li>&lt;code>ecdh-sha2-nistp521&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Не стоит использовать протоколы, основанные на &lt;em>SHA1&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-сервера">&lt;span class="section-num">1.3.1&lt;/span> Настройка сервера&lt;/h4>
&lt;ul>
&lt;li>В &lt;code>/etc/ssh/sshd_config&lt;/code> рекомендуется указать:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="настройка-клиента">&lt;span class="section-num">1.3.2&lt;/span> Настройка клиента&lt;/h4>
&lt;ul>
&lt;li>В &lt;code>/etc/ssh/ssh_config&lt;/code> рекомендуется добавить
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="файлы-ssh-ключей">&lt;span class="section-num">2&lt;/span> Файлы ssh-ключей&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>По умолчанию пользовательские ssh-ключи сохраняются в каталоге &lt;code>~/.ssh&lt;/code> в домашнем каталоге пользователя.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Убедитесь, что у вас ещё нет ключа.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Файлы закрытых ключей имеют названия типа &lt;code>id_&amp;lt;алгоритм&amp;gt;&lt;/code> (например, &lt;code>id_dsa&lt;/code>, &lt;code>id_rsa&lt;/code>).&lt;/p>
&lt;ul>
&lt;li>По умолчанию закрытые ключи имеют имена:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">id_dsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_ecdsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_ed25519
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Открытые ключи имеют дополнительные расширения &lt;code>.pub&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>По умолчанию публичные ключи имеют имена:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">id_dsa.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_ecdsa.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_ed25519.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id_rsa.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="создание-ключа-ssh">&lt;span class="section-num">3&lt;/span> Создание ключа ssh&lt;/h2>
&lt;ul>
&lt;li>Ключ ssh создаётся командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -t &amp;lt;алгоритм&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создайте ключи:
&lt;ul>
&lt;li>по алгоритму &lt;em>rsa&lt;/em> с ключём размером 4096 бит:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -t rsa -b &lt;span class="m">4096&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>по алгоритму &lt;em>ed25519&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -t ed25519
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>При создании ключа команда попросит ввести любую ключевую фразу для более надёжной защиты вашего пароля. Можно пропустить этот этап, нажав &lt;code>Enter&lt;/code>.&lt;/li>
&lt;li>Сменить пароль на ключ можно с помощью команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="добавление-ssh-ключа-в-учётную-запись-github">&lt;span class="section-num">4&lt;/span> Добавление SSH-ключа в учётную запись GitHub&lt;/h2>
&lt;ul>
&lt;li>Скопируйте созданный SSH-ключ в буфер обмена командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">xclip -i &amp;lt; ~/.ssh/id_ed25519.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Откройте настройки своего аккаунта на GitHub и перейдем в раздел &lt;code>SSH and GPC keys&lt;/code>.&lt;/li>
&lt;li>Нажмите кнопку &lt;code>New SSH key&lt;/code>.&lt;/li>
&lt;li>Добавьте в поле &lt;code>Title&lt;/code> название этого ключа, например, &lt;code>ed25519@&amp;lt;hostname&amp;gt;&lt;/code>.&lt;/li>
&lt;li>Вставьте из буфера обмена в поле &lt;code>Key&lt;/code> ключ.&lt;/li>
&lt;li>Нажмите кнопку &lt;code>Add SSH key&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="аутентификации-на-базе-ключей-ssh">&lt;span class="section-num">5&lt;/span> Аутентификации на базе ключей SSH&lt;/h2>
&lt;ul>
&lt;li>При аутентификации по ключу можно войти на удалённый хост без пароля учетной записи для удаленного хоста.&lt;/li>
&lt;li>На удалённом хосте для сервера ssh долен быть настроен вход по ключу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Should we allow Pubkey (SSH version 2) authentication?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PubkeyAuthentication yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Where do we look for authorized public keys?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># If it doesn&amp;#39;t start with a slash, then it is
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># relative to the user&amp;#39;s home directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthorizedKeysFile .ssh/authorized_keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="копирование-открытого-ключа-на-удалённый-хост-с-использованием-ssh-copy-id">&lt;span class="section-num">5.1&lt;/span> Копирование открытого ключа на удалённый хост с использованием &lt;code>ssh-copy-id&lt;/code>&lt;/h3>
&lt;ul>
&lt;li>Скопируйте на удалённый хост открытый ключ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-copy-id username@remote_host
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="копирование-открытого-ключа-с-помощью-ssh">&lt;span class="section-num">5.2&lt;/span> Копирование открытого ключа с помощью SSH&lt;/h3>
&lt;ul>
&lt;li>Можно загрузить на удалённый хост ключи с помощью стандартного метода SSH:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cat ~/.ssh/id_rsa.pub &lt;span class="p">|&lt;/span> ssh username@remote_host &lt;span class="s2">&amp;#34;mkdir -p ~/.ssh &amp;amp;&amp;amp; cat &amp;gt;&amp;gt; ~/.ssh/authorized_keys&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-ключей">&lt;span class="section-num">6&lt;/span> Настройка ключей&lt;/h2>
&lt;ul>
&lt;li>Для совместимости необходимо настроить разные типы ключей (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/02/03/ssh-key-type/">Тип ключа ssh&lt;/a>).&lt;/li>
&lt;/ul></description></item><item><title>Linutop Kiosk</title><link>https://yamadharma.github.io/ru/post/2022/02/15/linutop-kiosk/</link><pubDate>Tue, 15 Feb 2022 12:39:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/15/linutop-kiosk/</guid><description>&lt;ul>
&lt;li>Фирма Linutop выпускает MiniPC на ARM.&lt;/li>
&lt;li>Кроме того, собирает под них дистрибутивы Linux: Linutop OS, Linutop Kiosk и Linutop.TV.&lt;/li>
&lt;li>Это один из немногих дистрибутивов для киосков, собранный для ARM.&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#поддерживаемые-архитектуры">&lt;span class="section-num">1.1&lt;/span> Поддерживаемые архитектуры&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.linutop.com/software.en.html" target="_blank" rel="noopener">https://www.linutop.com/software.en.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="поддерживаемые-архитектуры">&lt;span class="section-num">1.1&lt;/span> Поддерживаемые архитектуры&lt;/h3>
&lt;ul>
&lt;li>x86&lt;/li>
&lt;li>x86_64&lt;/li>
&lt;li>ARM (Raspberry Pi: Zero, A, A+ ,B, B+, 2, 3).&lt;/li>
&lt;/ul></description></item><item><title>Porteus Kiosk</title><link>https://yamadharma.github.io/ru/post/2022/02/15/porteus-kiosk/</link><pubDate>Tue, 15 Feb 2022 11:36:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/15/porteus-kiosk/</guid><description>&lt;p>&lt;em>Porteus Kiosk&lt;/em> &amp;mdash; дистрибутив Linux, реализующий режим киоска (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/02/15/kiosk-mode/">Режим киоска&lt;/a>).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#поддерживаемые-архитектуры">&lt;span class="section-num">1.1&lt;/span> Поддерживаемые архитектуры&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ограничения">&lt;span class="section-num">1.2&lt;/span> Ограничения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#структура-дистрибутива">&lt;span class="section-num">2&lt;/span> Структура дистрибутива&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#модульная-структура">&lt;span class="section-num">2.1&lt;/span> Модульная структура&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#видео">&lt;span class="section-num">3&lt;/span> Видео&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурация-на-сервере">&lt;span class="section-num">3.1&lt;/span> Конфигурация на сервере&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3.2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование-после-установки">&lt;span class="section-num">3.3&lt;/span> Использование после установки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удалённый-доступ">&lt;span class="section-num">3.4&lt;/span> Удалённый доступ&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://porteus-kiosk.org/" target="_blank" rel="noopener">http://porteus-kiosk.org/&lt;/a>&lt;/li>
&lt;li>Есть централизованные платные сервисы.&lt;/li>
&lt;/ul>
&lt;h3 id="поддерживаемые-архитектуры">&lt;span class="section-num">1.1&lt;/span> Поддерживаемые архитектуры&lt;/h3>
&lt;ul>
&lt;li>Поддерживается только архитектура &lt;em>x86_64&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h3 id="ограничения">&lt;span class="section-num">1.2&lt;/span> Ограничения&lt;/h3>
&lt;ul>
&lt;li>Заблокирован доступ к скачиванию модулей дистрибутива из России.&lt;/li>
&lt;/ul>
&lt;h2 id="структура-дистрибутива">&lt;span class="section-num">2&lt;/span> Структура дистрибутива&lt;/h2>
&lt;h3 id="модульная-структура">&lt;span class="section-num">2.1&lt;/span> Модульная структура&lt;/h3>
&lt;ul>
&lt;li>Часть программного обеспечения реализовано в виде модулей.&lt;/li>
&lt;li>Можно собирать собственный вариант дистрибутива с необходимыми модулями.&lt;/li>
&lt;li>Список модулей:
&lt;ul>
&lt;li>Citrix Receiver.&lt;/li>
&lt;li>Дополнительные шрифты.&lt;/li>
&lt;li>Поддержка печати для локальных и сетевых принтеров.&lt;/li>
&lt;li>Поддержка загрузки по PXE.&lt;/li>
&lt;li>Службы SSH и VNC для удалённого управления и мониторинга киоска&lt;/li>
&lt;li>Поддержка UEFI.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="видео">&lt;span class="section-num">3&lt;/span> Видео&lt;/h2>
&lt;h3 id="конфигурация-на-сервере">&lt;span class="section-num">3.1&lt;/span> Конфигурация на сервере&lt;/h3>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/3FmzjSAVHuc?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;h3 id="установка">&lt;span class="section-num">3.2&lt;/span> Установка&lt;/h3>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/gWEFRG4mOl4?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;h3 id="использование-после-установки">&lt;span class="section-num">3.3&lt;/span> Использование после установки&lt;/h3>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/TCykM713AjA?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;h3 id="удалённый-доступ">&lt;span class="section-num">3.4&lt;/span> Удалённый доступ&lt;/h3>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/ZAA-ftK5eA0?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div></description></item><item><title>Режим киоска</title><link>https://yamadharma.github.io/ru/post/2022/02/15/kiosk-mode/</link><pubDate>Tue, 15 Feb 2022 11:14:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/15/kiosk-mode/</guid><description>&lt;ul>
&lt;li>&lt;em>Режим киоска&lt;/em> &amp;mdash; особый режим работы компьютера с ограниченной функциональностью.&lt;/li>
&lt;li>Особенно распространены так называемые интернет-киоски (Internet kiosk) и цифровые вывески (digital signage).&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#функции-режима-киоска">&lt;span class="section-num">1&lt;/span> Функции режима киоска&lt;/a>&lt;/li>
&lt;li>&lt;a href="#инструментарий-для-создания-дистрибутива">&lt;span class="section-num">2&lt;/span> Инструментарий для создания дистрибутива&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="функции-режима-киоска">&lt;span class="section-num">1&lt;/span> Функции режима киоска&lt;/h2>
&lt;ul>
&lt;li>Блокируются системные комбинации клавиш (&lt;code>Control&lt;/code> + &lt;code>Alt&lt;/code> + &lt;code>Delete&lt;/code>, &lt;code>Alt&lt;/code> + &lt;code>Tab&lt;/code> и др.).&lt;/li>
&lt;li>При использовании броузера:
&lt;ul>
&lt;li>блокируется меню броузера,&lt;/li>
&lt;li>фильтруется возможность ввода URL (белый или чёрный список),&lt;/li>
&lt;li>можно скрывать адресную строку,&lt;/li>
&lt;li>можно блокировать скачивание, печать.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Очистка сессии и возврат на начальный экран по истечении времени неактивности.&lt;/li>
&lt;li>Печать на принтере киоска без вывода окна настроек печати.&lt;/li>
&lt;li>Виртуальная клавиатура может подвергаться адаптации, иметь переключатель языков и возможность ввода спецсимволов.&lt;/li>
&lt;li>Удалённый мониторинг состояния киоска.&lt;/li>
&lt;li>Удалённое обновление программного обеспечения и/или контента.&lt;/li>
&lt;li>Удалённое управление киоском.&lt;/li>
&lt;li>Отключение экрана по расписанию.&lt;/li>
&lt;/ul>
&lt;h2 id="инструментарий-для-создания-дистрибутива">&lt;span class="section-num">2&lt;/span> Инструментарий для создания дистрибутива&lt;/h2>
&lt;ul>
&lt;li>Chromium kiosk: &lt;a href="https://github.com/Salamek/chromium-kiosk" target="_blank" rel="noopener">https://github.com/Salamek/chromium-kiosk&lt;/a>
&lt;ul>
&lt;li>qiosk: &lt;a href="https://github.com/Salamek/qiosk" target="_blank" rel="noopener">https://github.com/Salamek/qiosk&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Kiosk installer for Debian based Linux distros: &lt;a href="https://github.com/josfaber/debian-kiosk-installer" target="_blank" rel="noopener">https://github.com/josfaber/debian-kiosk-installer&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>CentOS 8. Изменение адресов репозиториев</title><link>https://yamadharma.github.io/ru/post/2022/02/10/centos8-changing-repository-addresses/</link><pubDate>Thu, 10 Feb 2022 14:39:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/10/centos8-changing-repository-addresses/</guid><description>&lt;p>С 31 января 2022 года установка пакетов или обновление репозиториев в CentOS8 выдаёт ошибку.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#ошибка">&lt;span class="section-num">1&lt;/span> Ошибка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#причины">&lt;span class="section-num">2&lt;/span> Причины&lt;/a>&lt;/li>
&lt;li>&lt;a href="#устранение">&lt;span class="section-num">3&lt;/span> Устранение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="ошибка">&lt;span class="section-num">1&lt;/span> Ошибка&lt;/h2>
&lt;ul>
&lt;li>При работе с репозиториями в CentOS 8 появилась ошибка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Error: Failed to download metadata &lt;span class="k">for&lt;/span> repo &lt;span class="s1">&amp;#39;repo_name&amp;#39;&lt;/span>: Cannot prepare internal mirrorlist: No URLs in mirrorlist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="причины">&lt;span class="section-num">2&lt;/span> Причины&lt;/h2>
&lt;ul>
&lt;li>31 января 2022 года удалены все пакеты для &lt;em>CentOS8&lt;/em> с официальных зеркал.&lt;/li>
&lt;li>Вызвано прекращением поддержки &lt;em>CentOS8&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/">Замена Centos&lt;/a>).&lt;/li>
&lt;li>Теперь они перенесены на &lt;a href="https://vault.centos.org" target="_blank" rel="noopener">https://vault.centos.org&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="устранение">&lt;span class="section-num">3&lt;/span> Устранение&lt;/h2>
&lt;ul>
&lt;li>Следует обновить файлы описания репозиториев в &lt;code>/etc/yum.repos.d&lt;/code>.&lt;/li>
&lt;li>Следует использовать &lt;code>vault.centos.org&lt;/code> вместо &lt;code>mirror.centos.org&lt;/code>.&lt;/li>
&lt;li>Предлагается выполнить следующие команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo sed -i -e &lt;span class="s2">&amp;#34;s|mirrorlist=|#mirrorlist=|g&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-e &lt;span class="s2">&amp;#34;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-e &lt;span class="s2">&amp;#34;s|\$contentdir|centos|g&amp;#34;&lt;/span> /etc/yum.repos.d/CentOS-*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Тип ключа ssh</title><link>https://yamadharma.github.io/ru/post/2022/02/03/ssh-key-type/</link><pubDate>Thu, 03 Feb 2022 14:48:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/02/03/ssh-key-type/</guid><description>&lt;p>При подключении по &lt;em>ssh&lt;/em> получаю сообщение &lt;em>no matching host key type found. Their offer: ssh-rsa,ssh-dss&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#описание-ситуации">&lt;span class="section-num">1&lt;/span> Описание ситуации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#решение">&lt;span class="section-num">2&lt;/span> Решение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#однократное-подключение">&lt;span class="section-num">2.1&lt;/span> Однократное подключение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-для-конкретного-хоста">&lt;span class="section-num">2.2&lt;/span> Конфигурация для конкретного хоста&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-для-группы-хостов">&lt;span class="section-num">2.3&lt;/span> Конфигурация для группы хостов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="описание-ситуации">&lt;span class="section-num">1&lt;/span> Описание ситуации&lt;/h2>
&lt;ul>
&lt;li>После перехода на openssh-8.8 при подключении к серверам со старыми версиями системы появляется сообщение типа: &lt;em>no matching host key type found. Their offer: ssh-rsa,ssh-dss&lt;/em>.&lt;/li>
&lt;li>Старый ssh поддерживал механизмы ssh-rsa и ssh-dss, а в новой версии их отключили.&lt;/li>
&lt;/ul>
&lt;h2 id="решение">&lt;span class="section-num">2&lt;/span> Решение&lt;/h2>
&lt;ul>
&lt;li>Будем считать, что мы подключаемся к хосту &lt;code>192.168.0.10&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="однократное-подключение">&lt;span class="section-num">2.1&lt;/span> Однократное подключение&lt;/h3>
&lt;ul>
&lt;li>Зададим алгоритм подключения как опции командной строки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh -oHostKeyAlgorithms&lt;span class="o">=&lt;/span>+ssh-rsa root@192.168.0.10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-для-конкретного-хоста">&lt;span class="section-num">2.2&lt;/span> Конфигурация для конкретного хоста&lt;/h3>
&lt;ul>
&lt;li>Создайте файл конфигурации &lt;code>~/.ssh/config&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch ~/.ssh/config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Зададим конфигурацию конкретного хоста в файле &lt;code>~/.ssh/config&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host 192.168.0.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> HostKeyAlgorithms=+ssh-rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> PubkeyAcceptedKeyTypes +ssh-rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 1:&lt;/span>
&lt;code>~/.ssh/config&lt;/code>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-для-группы-хостов">&lt;span class="section-num">2.3&lt;/span> Конфигурация для группы хостов&lt;/h3>
&lt;ul>
&lt;li>Можно задать группу хостов в виде шаблонов командной строки (wildcards).
&lt;ul>
&lt;li>Например, правило для сети:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host 192.168.0.*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> HostKeyAlgorithms=+ssh-rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> PubkeyAcceptedKeyTypes +ssh-rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 2:&lt;/span>
&lt;code>~/.ssh/config&lt;/code>
&lt;/div>
&lt;/li>
&lt;li>Можно задать привило для всех хостов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> HostKeyAlgorithms=+ssh-rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> PubkeyAcceptedKeyTypes +ssh-rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 3:&lt;/span>
&lt;code>~/.ssh/config&lt;/code>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Настройка LibreOffice</title><link>https://yamadharma.github.io/ru/post/2022/01/27/libreoffice-tuning/</link><pubDate>Thu, 27 Jan 2022 14:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/01/27/libreoffice-tuning/</guid><description>&lt;p>Настройка окружения для LibreOffice.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#используемые-графические-тулкиты">&lt;span class="section-num">1&lt;/span> Используемые графические тулкиты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#устранение-проблем">&lt;span class="section-num">2&lt;/span> Устранение проблем&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#зависания-или-аварийное-завершение-работы">&lt;span class="section-num">2.1&lt;/span> Зависания или аварийное завершение работы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проблемы-с-opencl">&lt;span class="section-num">2.1.1&lt;/span> Проблемы с OpenCL&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="используемые-графические-тулкиты">&lt;span class="section-num">1&lt;/span> Используемые графические тулкиты&lt;/h2>
&lt;ul>
&lt;li>LibreOffice попытается автоматически определить наиболее подходящий тулкит для пользовательского интерфейса в зависимости от среды рабочего стола.&lt;/li>
&lt;li>Чтобы принудительно использовать задать тулкит, надо использовать переменные среды:
&lt;ul>
&lt;li>&lt;code>SAL_USE_VCLPLUGIN=gen&lt;/code>: использовать универсальный графический тулкит;&lt;/li>
&lt;li>&lt;code>SAL_USE_VCLPLUGIN=gtk3&lt;/code>: использовать GTK-3;&lt;/li>
&lt;li>&lt;code>SAL_USE_VCLPLUGIN=kf5&lt;/code>: использовать QT5.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="устранение-проблем">&lt;span class="section-num">2&lt;/span> Устранение проблем&lt;/h2>
&lt;h3 id="зависания-или-аварийное-завершение-работы">&lt;span class="section-num">2.1&lt;/span> Зависания или аварийное завершение работы&lt;/h3>
&lt;h4 id="проблемы-с-opencl">&lt;span class="section-num">2.1.1&lt;/span> Проблемы с OpenCL&lt;/h4>
&lt;ul>
&lt;li>Можно отключить OpenCL для LibreOffice, задав переменные среды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">SAL_DISABLE_OPENCL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">SAL_DISABLEGL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Обновление пакетов python</title><link>https://yamadharma.github.io/ru/post/2022/01/21/update-all-python-packages/</link><pubDate>Fri, 21 Jan 2022 16:33:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/01/21/update-all-python-packages/</guid><description>&lt;ul>
&lt;li>Пакеты можно устанавливать с помощью системного менеджера пакетов, и с помощью пакетного менеджера самого &lt;em>python&lt;/em>, например &lt;em>pip&lt;/em>.&lt;/li>
&lt;li>В последнем случае пакеты лучше устанавливать в каталоге пользователя (user-wide).&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#список-всех-устаревших-пакетов">&lt;span class="section-num">1&lt;/span> Список всех устаревших пакетов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-всех-пакетов-python-в-linux">&lt;span class="section-num">2&lt;/span> Обновление всех пакетов python в Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-всех-пакетов-python-в-windows">&lt;span class="section-num">3&lt;/span> Обновление всех пакетов python в Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="список-всех-устаревших-пакетов">&lt;span class="section-num">1&lt;/span> Список всех устаревших пакетов&lt;/h2>
&lt;ul>
&lt;li>Создать список всех устаревших пакетов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip3 list --outdated
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создать список всех устаревших пакетов, установленных пользователем:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip3 list --outdated --user
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-всех-пакетов-python-в-linux">&lt;span class="section-num">2&lt;/span> Обновление всех пакетов python в Linux&lt;/h2>
&lt;ul>
&lt;li>Обновляем пакеты, установленные пользователем (&lt;code>--user&lt;/code>).&lt;/li>
&lt;li>С использованием &lt;code>pip&lt;/code> и &lt;code>grep&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip3 list --outdated --format&lt;span class="o">=&lt;/span>freeze --user &lt;span class="p">|&lt;/span> grep -v &lt;span class="s1">&amp;#39;^\-e&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> cut -d &lt;span class="o">=&lt;/span> -f &lt;span class="m">1&lt;/span> &lt;span class="p">|&lt;/span> xargs -n1 pip3 install -U --user
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>С использованием &lt;code>pip&lt;/code> и &lt;code>awk&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip3 list --outdated --user &lt;span class="p">|&lt;/span> cut -f1 -d&lt;span class="s1">&amp;#39; &amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> tr &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;\n&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{if(NR&amp;gt;=3)print)&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> cut -d&lt;span class="s1">&amp;#39; &amp;#39;&lt;/span> -f1 &lt;span class="p">|&lt;/span> xargs -n1 pip3 install -U --user
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-всех-пакетов-python-в-windows">&lt;span class="section-num">3&lt;/span> Обновление всех пакетов python в Windows&lt;/h2>
&lt;ul>
&lt;li>Обновляем пакеты, установленные пользователем (&lt;code>--user&lt;/code>).&lt;/li>
&lt;li>Используем &lt;em>powershell&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pip freeze --user &lt;span class="p">|&lt;/span> %&lt;span class="o">{&lt;/span>&lt;span class="nv">$_&lt;/span>.split&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;==&amp;#39;&lt;/span>&lt;span class="o">)[&lt;/span>0&lt;span class="o">]}&lt;/span> &lt;span class="p">|&lt;/span> %&lt;span class="o">{&lt;/span>pip install --upgrade &lt;span class="nv">$_&lt;/span> --user&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Web консоль Cockpit</title><link>https://yamadharma.github.io/ru/post/2022/01/18/cockpit-web-console/</link><pubDate>Tue, 18 Jan 2022 17:23:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/01/18/cockpit-web-console/</guid><description>&lt;p>&lt;em>Cockpit&lt;/em> представляет собой инструмент для администрирования устройств под управлением Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#функционал">&lt;span class="section-num">2&lt;/span> Функционал&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-в-redhat-и-деривативах">&lt;span class="section-num">3.1&lt;/span> Установка в RedHat и деривативах:&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-модули">&lt;span class="section-num">3.2&lt;/span> Дополнительные модули&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#веб-интерфейс-приложения">&lt;span class="section-num">4&lt;/span> Веб-интерфейс приложения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h2 id="функционал">&lt;span class="section-num">2&lt;/span> Функционал&lt;/h2>
&lt;ul>
&lt;li>управление службами;&lt;/li>
&lt;li>менеджмент учетных записей;&lt;/li>
&lt;li>настройка брандмауэра;&lt;/li>
&lt;li>конфигурирование сетевых интерфейсов и подключений;&lt;/li>
&lt;li>чтение системных логов;&lt;/li>
&lt;li>контроль над виртуальными машинами;&lt;/li>
&lt;li>формирование отчетов на базе результатов диагностики;&lt;/li>
&lt;li>настройка дампа ядра;&lt;/li>
&lt;li>администрирование SELinux (Security-Enhanced Linux);&lt;/li>
&lt;li>обновление пакетов приложений;&lt;/li>
&lt;li>управление подписками.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/h2>
&lt;h3 id="установка-в-redhat-и-деривативах">&lt;span class="section-num">3.1&lt;/span> Установка в RedHat и деривативах:&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Centos 7&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yum install cockpit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Centos 8&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install cockpit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В CentOS 8 &lt;em>cockpit&lt;/em> устанавливается по умолчанию.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Запуск служб&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now cockpit.socket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Настройка брандмауэра&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">firewall-cmd --add-service&lt;span class="o">=&lt;/span>cockpit --permanent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">firewall-cmd --reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="дополнительные-модули">&lt;span class="section-num">3.2&lt;/span> Дополнительные модули&lt;/h3>
&lt;ul>
&lt;li>cockpit-composer&lt;/li>
&lt;li>cockpit-dashboard
&lt;ul>
&lt;li>Улучшенный дашборд для сервера.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>cockpit-doc&lt;/li>
&lt;li>cockpit-docker&lt;/li>
&lt;li>cockpit-kubernetes&lt;/li>
&lt;li>cockpit-machines
&lt;ul>
&lt;li>Работа с виртуальными машинами KVM.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>cockpit-machines-ovirt&lt;/li>
&lt;li>cockpit-packagekit
&lt;ul>
&lt;li>Работа с пакетами.&lt;/li>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yum install cockpit-packagekit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установка необходимого программного обеспечения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yum install virt-install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>cockpit-pcp&lt;/li>
&lt;li>cockpit-storaged
&lt;ul>
&lt;li>Работа с устройствами хранения.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>cockpit-subscriptions&lt;/li>
&lt;li>cockpit-tests&lt;/li>
&lt;/ul>
&lt;h2 id="веб-интерфейс-приложения">&lt;span class="section-num">4&lt;/span> Веб-интерфейс приложения&lt;/h2>
&lt;ul>
&lt;li>Используется порт &lt;code>9090&lt;/code>.&lt;/li>
&lt;li>По умолчанию используется самоподписанный сертификат SSL.&lt;/li>
&lt;li>Язык лучше выбрать английский. Русский перевод крайне прискорбен.&lt;/li>
&lt;/ul></description></item><item><title>Подключение ресурсов через RSS</title><link>https://yamadharma.github.io/ru/post/2022/01/17/resources-to-rss/</link><pubDate>Mon, 17 Jan 2022 17:14:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/01/17/resources-to-rss/</guid><description>&lt;ul>
&lt;li>Мне удобно читать обновления web-ресурсов через RSS.&lt;/li>
&lt;li>К сожалению сейчас стало много ресурсов, не поддерживающих подключение через этот формат.&lt;/li>
&lt;li>Но можно осуществить просмотр ресурсов через RSS, используя разные шлюзы.&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#универсальный-шлюз-rsshub-dot-app">&lt;span class="section-num">2&lt;/span> Универсальный шлюз &lt;em>rsshub.app&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">3&lt;/span> Ресурсы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#vkontakte">&lt;span class="section-num">3.1&lt;/span> Vkontakte&lt;/a>&lt;/li>
&lt;li>&lt;a href="#telegram">&lt;span class="section-num">3.2&lt;/span> Telegram&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>RSS &amp;mdash; семейство XML-форматов, предназначенных для описания разных интернет ресурсов.&lt;/li>
&lt;li>В разных версиях аббревиатура RSS имела разные расшифровки:
&lt;ul>
&lt;li>Rich Site Summary (RSS 0.9x) &amp;mdash; обогащённая сводка сайта;&lt;/li>
&lt;li>RDF Site Summary (RSS 0.9 и 1.0) &amp;mdash; сводка сайта с применением инфраструктуры описания ресурсов;&lt;/li>
&lt;li>Really Simple Syndication (RSS 2.x) &amp;mdash; очень простое распространение.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Существуют специализированные приложения (RSS-агрегаторы), собирающие и обрабатывающие информацию RSS-каналов.&lt;/li>
&lt;/ul>
&lt;h2 id="универсальный-шлюз-rsshub-dot-app">&lt;span class="section-num">2&lt;/span> Универсальный шлюз &lt;em>rsshub.app&lt;/em>&lt;/h2>
&lt;ul>
&lt;li>Адрес: &lt;a href="https://rsshub.app/" target="_blank" rel="noopener">https://rsshub.app/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/DIYgod/RSSHub" target="_blank" rel="noopener">https://github.com/DIYgod/RSSHub&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://docs.rsshub.app/" target="_blank" rel="noopener">https://docs.rsshub.app/&lt;/a>&lt;/li>
&lt;li>Имеет большое количество шлюзов для обработки разных ресурсов.&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">3&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Ресурсы, которыми я пользуюсь.&lt;/li>
&lt;/ul>
&lt;h3 id="vkontakte">&lt;span class="section-num">3.1&lt;/span> Vkontakte&lt;/h3>
&lt;ul>
&lt;li>Шлюз &lt;em>vkrss.ru&lt;/em>
&lt;ul>
&lt;li>Адрес: &lt;a href="https://vkrss.ru/" target="_blank" rel="noopener">https://vkrss.ru/&lt;/a>&lt;/li>
&lt;li>Если у вас группа &lt;code>https://vk.com/groupname&lt;/code>, то имя rss-канала будет &lt;code>https://vkrss.ru/groupname&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="telegram">&lt;span class="section-num">3.2&lt;/span> Telegram&lt;/h3>
&lt;ul>
&lt;li>Шлюз &lt;em>rsshub.app&lt;/em>
&lt;ul>
&lt;li>Если нужно подключить канал &lt;em>&lt;a href="https://t.me/channelname" target="_blank" rel="noopener">https://t.me/channelname&lt;/a>&lt;/em>, то имя rss-канала будет &lt;em>&lt;a href="https://rsshub.app/telegram/channel/channelname" target="_blank" rel="noopener">https://rsshub.app/telegram/channel/channelname&lt;/a>&lt;/em>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Использование vagrant</title><link>https://yamadharma.github.io/ru/post/2021/11/12/using-vagrant/</link><pubDate>Fri, 12 Nov 2021 12:11:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/11/12/using-vagrant/</guid><description>&lt;p>Использование vagrant.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#лицензия">&lt;span class="section-num">1.1&lt;/span> Лицензия&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ответвления">&lt;span class="section-num">1.2&lt;/span> Ответвления&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-понятия-vagrant">&lt;span class="section-num">1.3&lt;/span> Основные понятия Vagrant&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-команды-vagrant">&lt;span class="section-num">1.4&lt;/span> Основные команды Vagrant&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пример-конфигурации-vagrantfile">&lt;span class="section-num">1.5&lt;/span> Пример конфигурации Vagrantfile&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">2.1&lt;/span> Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">2.2&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#принципы-работы">&lt;span class="section-num">3&lt;/span> Принципы работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подготовка-образа">&lt;span class="section-num">4&lt;/span> Подготовка образа&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#описание-установки">&lt;span class="section-num">4.2&lt;/span> Описание установки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-дополнений">&lt;span class="section-num">5&lt;/span> Установка дополнений&lt;/a>&lt;/li>
&lt;li>&lt;a href="#разные-системы-виртуализации">&lt;span class="section-num">6&lt;/span> Разные системы виртуализации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конкретные-примеры">&lt;span class="section-num">7&lt;/span> Конкретные примеры&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.vagrantup.com/" target="_blank" rel="noopener">https://www.vagrantup.com/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/hashicorp/vagrant" target="_blank" rel="noopener">https://github.com/hashicorp/vagrant&lt;/a>&lt;/li>
&lt;li>Бинарные сборки: &lt;a href="https://releases.hashicorp.com/vagrant" target="_blank" rel="noopener">https://releases.hashicorp.com/vagrant&lt;/a> (на данный момент не доступно из России).&lt;/li>
&lt;li>Зеркало бинарных сборок:
&lt;ul>
&lt;li>&lt;a href="https://hashicorp-releases.yandexcloud.net/vagrant/" target="_blank" rel="noopener">https://hashicorp-releases.yandexcloud.net/vagrant/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://hashicorp-releases.mcs.mail.ru/vagrant/" target="_blank" rel="noopener">https://hashicorp-releases.mcs.mail.ru/vagrant/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Зеркало сборок из репозитория:
&lt;ul>
&lt;li>&lt;a href="https://sourceforge.net/projects/vagrant.mirror/files/" target="_blank" rel="noopener">https://sourceforge.net/projects/vagrant.mirror/files/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Репозиторий образов для Vagrant: &lt;a href="https://app.vagrantup.com/" target="_blank" rel="noopener">https://app.vagrantup.com/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="лицензия">&lt;span class="section-num">1.1&lt;/span> Лицензия&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/21/hashicorp-changes-license/">Смена лицензии HashiCorp&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="ответвления">&lt;span class="section-num">1.2&lt;/span> Ответвления&lt;/h3>
&lt;ul>
&lt;li>Смена лицензии привела к возникновению форка под лицензией MPL.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/viagrunts/viagrunts" target="_blank" rel="noopener">https://github.com/viagrunts/viagrunts&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="основные-понятия-vagrant">&lt;span class="section-num">1.3&lt;/span> Основные понятия Vagrant&lt;/h3>
&lt;ul>
&lt;li>провайдер (provider) &amp;mdash; система виртуализации, с которой работает Vagrant (например, VirtualBox, VMWare и т.п.);&lt;/li>
&lt;li>box-файл (или Vagrant Box) &amp;mdash; сохранённый образ виртуальной машины с развёрнутой в ней операционной системой; по сути, box-файл используется как основа для клонирования виртуальных машин с теми или иными настройками;&lt;/li>
&lt;li>Vagrantfile &amp;mdash; конфигурационный файл, написанный на языке Ruby, в котором указаны настройки запуска виртуальной машины.&lt;/li>
&lt;/ul>
&lt;h3 id="основные-команды-vagrant">&lt;span class="section-num">1.4&lt;/span> Основные команды Vagrant&lt;/h3>
&lt;ul>
&lt;li>С Vagrant можно работать, используя следующие основные команды:
&lt;ul>
&lt;li>&lt;code>vagrant help&lt;/code> &amp;mdash; вызов справки по командам Vagrant;&lt;/li>
&lt;li>&lt;code>vagrant box list&lt;/code> &amp;mdash; список подключённых к Vagrant box-файлов;&lt;/li>
&lt;li>&lt;code>vagrant box add&lt;/code> &amp;mdash; подключение box-файла к Vagrant;&lt;/li>
&lt;li>&lt;code>vagrant destroy&lt;/code> &amp;mdash; отключение box-файла от Vagrant и удаление его из виртуального окружения;&lt;/li>
&lt;li>&lt;code>vagrant init&lt;/code> &amp;mdash; создание &lt;span class="org-target" id="org-target-----------">&lt;/span> конфигурационного файла &lt;code>Vagrantfile&lt;/code> для его последующего изменения;&lt;/li>
&lt;li>&lt;code>vagrant up&lt;/code> &amp;mdash; запуск виртуальной машины с использованием инструкций по запуску из конфигурационного файла &lt;code>Vagrantfile&lt;/code>;&lt;/li>
&lt;li>&lt;code>vagrant reload&lt;/code> &amp;mdash; перезагрузка виртуальной машины;&lt;/li>
&lt;li>&lt;code>vagrant halt&lt;/code> &amp;mdash; остановка и выключение виртуальной машины;&lt;/li>
&lt;li>&lt;code>vagrant provision&lt;/code> &amp;mdash; настройка внутреннего окружения имеющейся виртуальной машины (например, добавление новых инструкций (скриптов) в ранее созданную виртуальную машину);&lt;/li>
&lt;li>&lt;code>vagrant ssh&lt;/code> &amp;mdash; подключение к виртуальной машине через ssh.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="пример-конфигурации-vagrantfile">&lt;span class="section-num">1.5&lt;/span> Пример конфигурации Vagrantfile&lt;/h3>
&lt;ul>
&lt;li>Пример содержимого файла &lt;code>Vagrantfile&lt;/code> для понимания принципов его синтаксиса.&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># -*- mode: ruby -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># vi: set ft=ruby :&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="no">Vagrant&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">configure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="o">|&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">box&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;BOX_NAME&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hostname&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;HOST_NAME&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">network&lt;/span> &lt;span class="s2">&amp;#34;private_network&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">ip&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.168.1.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">define&lt;/span> &lt;span class="s2">&amp;#34;VM_NAME&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">provider&lt;/span> &lt;span class="s2">&amp;#34;virtualbox&amp;#34;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="o">|&lt;/span>&lt;span class="n">vb&lt;/span>&lt;span class="o">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vb&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gui&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kp">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vb&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">memory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;1024&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Первые две строки указывают на режим работы с &lt;code>Vagrantfile&lt;/code> и использование языка Ruby.&lt;/li>
&lt;li>Затем идёт цикл &lt;code>do&lt;/code>, заменяющий конструкцию &lt;code>Vagrant.configure&lt;/code> далее по тексту на &lt;code>config&lt;/code>.&lt;/li>
&lt;li>Строка &lt;code>config.vm.box = &amp;quot;BOX_NAME&amp;quot;&lt;/code> задаёт название образа (box-файла) виртуальной машины (обычно выбирается из официального репозитория).&lt;/li>
&lt;li>Строка &lt;code>config.vm.hostname = &amp;quot;HOST_NAME&amp;quot;&lt;/code> задаёт имя виртуальной машины.&lt;/li>
&lt;li>Конструкция &lt;code>config.vm.network&lt;/code> задаёт тип сетевого соединения и может иметь следующие назначения:
&lt;ul>
&lt;li>&lt;code>config.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;xxx.xxx.xxx.xxx&amp;quot;&lt;/code> &amp;mdash; адрес из внутренней сети;&lt;/li>
&lt;li>&lt;code>config.vm.network &amp;quot;public_network&amp;quot;, ip: &amp;quot;xxx.xxx.xxx.xxx&amp;quot;&lt;/code> &amp;mdash; публичный адрес, по которому виртуальная машина будет доступна;&lt;/li>
&lt;li>&lt;code>config.vm.network &amp;quot;private_network&amp;quot;, type: &amp;quot;dhcp&amp;quot;&lt;/code> &amp;mdash; адрес, назначаемый по протоколу DHCP.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Строка &lt;code>config.vm.define &amp;quot;VM_NAME&amp;quot;&lt;/code> задаёт название виртуальной машины, по которому можно обращаться к ней из Vagrant и VirtualBox.&lt;/li>
&lt;li>В конце идёт конструкция, определяющая параметры провайдера, а именно запуск виртуальной машины без графического интерфейса и с выделением 1 ГБ памяти.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="linux">&lt;span class="section-num">2.1&lt;/span> Linux&lt;/h3>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-emulation/vagrant
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="windows">&lt;span class="section-num">2.2&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>Установка с помощью Chocolatey (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install vagrant
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="принципы-работы">&lt;span class="section-num">3&lt;/span> Принципы работы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/11/vagrant-network/">Сеть в vagrant&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="подготовка-образа">&lt;span class="section-num">4&lt;/span> Подготовка образа&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Подготовка образа проводится с помощью &lt;em>Packer&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/10/30/packer/">Packer&lt;/a>).&lt;/li>
&lt;li>Сайт: &lt;a href="https://www.packer.io/" target="_blank" rel="noopener">https://www.packer.io/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="описание-установки">&lt;span class="section-num">4.2&lt;/span> Описание установки&lt;/h3>
&lt;ul>
&lt;li>Ранее использовался язык описания JSON.&lt;/li>
&lt;li>После &lt;em>Packer-1.5&lt;/em> используется формат HCL2.&lt;/li>
&lt;/ul>
&lt;h2 id="установка-дополнений">&lt;span class="section-num">5&lt;/span> Установка дополнений&lt;/h2>
&lt;ul>
&lt;li>Список дополнений: &lt;a href="https://github.com/hashicorp/vagrant/wiki/Available-Vagrant-Plugins" target="_blank" rel="noopener">https://github.com/hashicorp/vagrant/wiki/Available-Vagrant-Plugins&lt;/a>&lt;/li>
&lt;li>Установка дополнения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant plugin install &amp;lt;plugin-name&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Дополнение скачивается с сайта .&lt;/li>
&lt;li>Поскольку доступ из России блокируется, следует явно указать зеркало для загрузки дополнений:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vagrant plugin install --plugin-clean-sources --plugin-source https://rubygems.org &amp;lt;plugin-name&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="разные-системы-виртуализации">&lt;span class="section-num">6&lt;/span> Разные системы виртуализации&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/20/using-vagrant-virtualbox/">Использование vagrant. Virtualbox&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="конкретные-примеры">&lt;span class="section-num">7&lt;/span> Конкретные примеры&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/20/using-vagrant-install-rocky-linux/">Использование vagrant. Установка Rocky Linux&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Почта. Yandex. Пароли приложений</title><link>https://yamadharma.github.io/ru/post/2021/11/01/mail-yandex-application-passwords/</link><pubDate>Mon, 01 Nov 2021 21:09:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/11/01/mail-yandex-application-passwords/</guid><description>&lt;p>Пароли приложений Yandex.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#типы-приложений">&lt;span class="section-num">2&lt;/span> Типы приложений&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-пароля-приложения">&lt;span class="section-num">3&lt;/span> Создание пароля приложения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сброс-паролей-приложений">&lt;span class="section-num">4&lt;/span> Сброс паролей приложений&lt;/a>&lt;/li>
&lt;li>&lt;a href="#имена-файлов-паролей-паролей-для-pass">&lt;span class="section-num">5&lt;/span> Имена файлов паролей паролей для pass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Создавать пароли приложений можно на странице &lt;a href="https://passport.yandex.ru/profile/" target="_blank" rel="noopener">Управление аккаунтом&lt;/a>.&lt;/li>
&lt;li>При включенной двухфакторной аутентификации пароли приложений обязательны, и отключить их нельзя.&lt;/li>
&lt;/ul>
&lt;h2 id="типы-приложений">&lt;span class="section-num">2&lt;/span> Типы приложений&lt;/h2>
&lt;ul>
&lt;li>почтовый клиент;&lt;/li>
&lt;li>WebDAV-клиент для Яндекс.Диска;&lt;/li>
&lt;li>CardDAV-клиент для синхронизации контактов Яндекс.Почты с мобильным устройством;&lt;/li>
&lt;li>CalDAV-клиент для Яндекс.Календаря;&lt;/li>
&lt;li>Jabber-клиент;&lt;/li>
&lt;li>сборщики почты других почтовых сервисов (Mail.ru, Gmail, Outlook.com и прочие).&lt;/li>
&lt;/ul>
&lt;h2 id="создание-пароля-приложения">&lt;span class="section-num">3&lt;/span> Создание пароля приложения&lt;/h2>
&lt;ul>
&lt;li>Откройте страницу &lt;em>Управление аккаунтом&lt;/em> &lt;a href="https://passport.yandex.ru/profile/" target="_blank" rel="noopener">https://passport.yandex.ru/profile/&lt;/a>.&lt;/li>
&lt;li>Войдите в раздел &lt;em>Безопасность &amp;gt; Доступ к вашим данным &amp;gt; Пароли приложений&lt;/em>.&lt;/li>
&lt;li>Выберите пункт, соответствующий типу приложения.&lt;/li>
&lt;li>Например, для работы с почтой выберите пункт &lt;em>Почта&lt;/em>.&lt;/li>
&lt;li>Придумайте название пароля, например укажите название приложения, для которого вы создаете пароль. С этим названием пароль будет отображаться в списке.&lt;/li>
&lt;li>Нажмите кнопку &lt;em>Далее&lt;/em>. Пароль приложения отобразится во всплывающем окне.&lt;/li>
&lt;li>Созданный пароль можно увидеть только один раз. Если вы ввели его неправильно и закрыли окно, удалите текущий пароль и создайте новый.&lt;/li>
&lt;/ul>
&lt;h2 id="сброс-паролей-приложений">&lt;span class="section-num">4&lt;/span> Сброс паролей приложений&lt;/h2>
&lt;ul>
&lt;li>Все созданные пароли приложений сбрасываются в следующих случаях:
&lt;ul>
&lt;li>вы сменили пароль (при отключенной двухфакторной аутентификации);&lt;/li>
&lt;li>вы включили или выключили двухфакторную аутентификацию;&lt;/li>
&lt;li>вы восстановили доступ к своему аккаунту, самостоятельно или через службу поддержки;&lt;/li>
&lt;li>вы перешли по ссылке Выйти на всех устройствах на странице Управление аккаунтом.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>После этого каждый нужный вам пароль нужно создать заново.&lt;/li>
&lt;/ul>
&lt;h2 id="имена-файлов-паролей-паролей-для-pass">&lt;span class="section-num">5&lt;/span> Имена файлов паролей паролей для pass&lt;/h2>
&lt;ul>
&lt;li>Пароли храню в хранилище &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>).&lt;/li>
&lt;li>Шаблон имени файла пароля:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">account@yandex.ru@server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Список серверов
&lt;ul>
&lt;li>IMAP: &lt;code>imap.yandex.ru&lt;/code>;&lt;/li>
&lt;li>POP3: &lt;code>pop.yandex.ru&lt;/code>;&lt;/li>
&lt;li>SMTP: &lt;code>smtp.yandex.ru&lt;/code>;&lt;/li>
&lt;li>WebDAV: &lt;code>webdav.yandex.ru&lt;/code>;&lt;/li>
&lt;li>CardDAV: &lt;code>carddav.yandex.ru&lt;/code>;&lt;/li>
&lt;li>CalDAV: &lt;code>caldav.yandex.ru&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Шрифты в Linux</title><link>https://yamadharma.github.io/ru/post/2021/10/27/linux-fonts/</link><pubDate>Wed, 27 Oct 2021 11:36:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/10/27/linux-fonts/</guid><description>&lt;p>Работа со шрифтами в Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#установка-шрифтов-microsoft">&lt;span class="section-num">1&lt;/span> Установка шрифтов Microsoft&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#основные-шрифты-microsoft">&lt;span class="section-num">1.1&lt;/span> Основные шрифты Microsoft&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ubuntu">&lt;span class="section-num">1.1.1&lt;/span> Ubuntu&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#шрифты-для-программирования">&lt;span class="section-num">2&lt;/span> Шрифты для программирования&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="установка-шрифтов-microsoft">&lt;span class="section-num">1&lt;/span> Установка шрифтов Microsoft&lt;/h2>
&lt;h3 id="основные-шрифты-microsoft">&lt;span class="section-num">1.1&lt;/span> Основные шрифты Microsoft&lt;/h3>
&lt;h4 id="ubuntu">&lt;span class="section-num">1.1.1&lt;/span> Ubuntu&lt;/h4>
&lt;ul>
&lt;li>Шрифты Microsoft не идут под свободной лицензией.&lt;/li>
&lt;li>Для работы с ними нужно установить соответствующий пакет:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt-get install ttf-mscorefonts-installer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Вас попросят принять лицензию (EULA), после этого будут скачаны соответствующие шрифты (в виде архивов), распакованы и установлены в системе.&lt;/li>
&lt;li>Скачиваются они с проекта &lt;em>Corefonts&lt;/em> (&lt;a href="http://corefonts.sourceforge.net/" target="_blank" rel="noopener">http://corefonts.sourceforge.net/&lt;/a>).&lt;/li>
&lt;li>Обычно устанавливаются шрифты в каталог &lt;code>/usr/share/fonts/truetype/msttcorefonts&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="шрифты-для-программирования">&lt;span class="section-num">2&lt;/span> Шрифты для программирования&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/21/monospace-fonts/">Моноширинные шрифты&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Допустимые символы в имени файла</title><link>https://yamadharma.github.io/ru/post/2021/10/17/allowed-characters-filename/</link><pubDate>Sun, 17 Oct 2021 20:40:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/10/17/allowed-characters-filename/</guid><description>&lt;p>Допустимые символы в имени файла.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запрещённые-печатные-символы-ascii">&lt;span class="section-num">2&lt;/span> Запрещённые печатные символы ASCII&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#linux-unix">&lt;span class="section-num">2.1&lt;/span> Linux/Unix&lt;/a>&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">2.2&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#непечатаемые-символы">&lt;span class="section-num">3&lt;/span> Непечатаемые символы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#linux-unix">&lt;span class="section-num">3.1&lt;/span> Linux/Unix&lt;/a>&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">3.2&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#зарезервированные-имена-файлов">&lt;span class="section-num">4&lt;/span> Зарезервированные имена файлов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">4.1&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#другие-ограничения">&lt;span class="section-num">5&lt;/span> Другие ограничения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">5.1&lt;/span> Windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#macos">&lt;span class="section-num">5.2&lt;/span> macOS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Для Windows базируемся на документе &lt;a href="https://docs.microsoft.com/ru-ru/windows/win32/fileio/naming-a-file" target="_blank" rel="noopener">https://docs.microsoft.com/ru-ru/windows/win32/fileio/naming-a-file&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="запрещённые-печатные-символы-ascii">&lt;span class="section-num">2&lt;/span> Запрещённые печатные символы ASCII&lt;/h2>
&lt;h3 id="linux-unix">&lt;span class="section-num">2.1&lt;/span> Linux/Unix&lt;/h3>
&lt;ul>
&lt;li>&lt;code>/&lt;/code> (forward slash)&lt;/li>
&lt;/ul>
&lt;h3 id="windows">&lt;span class="section-num">2.2&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>&amp;lt;&lt;/code> (less than)&lt;/li>
&lt;li>&lt;code>&amp;gt;&lt;/code> (greater than)&lt;/li>
&lt;li>&lt;code>:&lt;/code> (colon), в NTFS имеет семантику альтернативных потоков данных (Alternate Data Streams)&lt;/li>
&lt;li>&lt;code>&amp;quot;&lt;/code> (double quote)&lt;/li>
&lt;li>&lt;code>/&lt;/code> (forward slash)&lt;/li>
&lt;li>&lt;code>\&lt;/code> (backslash)&lt;/li>
&lt;li>&lt;code>|&lt;/code> (vertical bar or pipe)&lt;/li>
&lt;li>&lt;code>?&lt;/code> (question mark)&lt;/li>
&lt;li>&lt;code>*&lt;/code> (asterisk)&lt;/li>
&lt;/ul>
&lt;h2 id="непечатаемые-символы">&lt;span class="section-num">3&lt;/span> Непечатаемые символы&lt;/h2>
&lt;h3 id="linux-unix">&lt;span class="section-num">3.1&lt;/span> Linux/Unix&lt;/h3>
&lt;ul>
&lt;li>&lt;code>0&lt;/code> или &lt;code>NUL&lt;/code> (NULL byte)&lt;/li>
&lt;/ul>
&lt;h3 id="windows">&lt;span class="section-num">3.2&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>0&lt;/code>&amp;ndash;&lt;code>31&lt;/code> (ASCII control characters)&lt;/li>
&lt;/ul>
&lt;h2 id="зарезервированные-имена-файлов">&lt;span class="section-num">4&lt;/span> Зарезервированные имена файлов&lt;/h2>
&lt;h3 id="windows">&lt;span class="section-num">4.1&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>CON&lt;/code>&lt;/li>
&lt;li>&lt;code>PRN&lt;/code>&lt;/li>
&lt;li>&lt;code>AUX&lt;/code>&lt;/li>
&lt;li>&lt;code>NUL&lt;/code>&lt;/li>
&lt;li>&lt;code>COM1&lt;/code>&lt;/li>
&lt;li>&lt;code>COM2&lt;/code>&lt;/li>
&lt;li>&lt;code>COM3&lt;/code>&lt;/li>
&lt;li>&lt;code>COM4&lt;/code>&lt;/li>
&lt;li>&lt;code>COM5&lt;/code>&lt;/li>
&lt;li>&lt;code>COM6&lt;/code>&lt;/li>
&lt;li>&lt;code>COM7&lt;/code>&lt;/li>
&lt;li>&lt;code>COM8&lt;/code>&lt;/li>
&lt;li>&lt;code>COM9&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT1&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT2&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT3&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT4&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT5&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT6&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT7&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT8&lt;/code>&lt;/li>
&lt;li>&lt;code>LPT9&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="другие-ограничения">&lt;span class="section-num">5&lt;/span> Другие ограничения&lt;/h2>
&lt;h3 id="windows">&lt;span class="section-num">5.1&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>Имена файлов не могут заканчиваться пробелом или точкой.&lt;/li>
&lt;/ul>
&lt;h3 id="macos">&lt;span class="section-num">5.2&lt;/span> macOS&lt;/h3>
&lt;ul>
&lt;li>Двоеточие &lt;code>:&lt;/code> и косая черта &lt;code>/&lt;/code> запрещены в зависимости от контекста.&lt;/li>
&lt;li>Двоеточие &lt;code>:&lt;/code> используется в качестве разделителя в путях HFS, а косая черта &lt;code>/&lt;/code> используется в качестве разделителя в путях POSIX.&lt;/li>
&lt;/ul></description></item><item><title>Сброс пароля на коммутаторах Catalyst</title><link>https://yamadharma.github.io/ru/post/2021/10/06/password-reset-catalyst-switches/</link><pubDate>Wed, 06 Oct 2021 11:36:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/10/06/password-reset-catalyst-switches/</guid><description>&lt;p>Сброс пароля на коммутаторах Catalyst серий 2900, 2950, 2960, 3500, 3550.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">&lt;/nav>
&lt;/details>
&lt;ul>
&lt;li>При нажатой кнопке выбора режима (mode) вставить шнур питания (не отпускать кнопку, до тех пор, пока индикатор над портом 1, не будет гореть, как минимум 2 секунды).&lt;/li>
&lt;li>Ввести команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">flash_init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Ввести команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">load_helper
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Переименовать файл &lt;code>config.text&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rename flash:config.text flash:config.old
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Продолжить процесс загрузки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">boot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отказаться от входа в режим настройки (набрать &lt;code>no&lt;/code>).&lt;/li>
&lt;li>Перейти в пользовательский режим: (&lt;code>Enter&lt;/code>).&lt;/li>
&lt;li>Перейти в привилегированный режим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">enable&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Вернуть имя ранее переименованному файлу:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rename flash:config.old flash:config.text
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Загрузить в running-config конфигурационный файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">copy startup run
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перейти в конфигурационный режим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">conf t
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Изменить пароль:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">enable&lt;/span> password &amp;lt;пароль&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выйти из режима настройки (&lt;code>Ctrl+Z&lt;/code>).&lt;/li>
&lt;li>Сохранить конфигурацию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">write memory
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Почта. Message-mode</title><link>https://yamadharma.github.io/ru/post/2021/09/27/emacs-mail-message-mode/</link><pubDate>Mon, 27 Sep 2021 19:00:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/27/emacs-mail-message-mode/</guid><description>&lt;p>Режим Emacs для создания писем.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#приёмы-работы">&lt;span class="section-num">2&lt;/span> Приёмы работы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#прикрепить-несколько-файлов">&lt;span class="section-num">2.1&lt;/span> Прикрепить несколько файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h2 id="приёмы-работы">&lt;span class="section-num">2&lt;/span> Приёмы работы&lt;/h2>
&lt;h3 id="прикрепить-несколько-файлов">&lt;span class="section-num">2.1&lt;/span> Прикрепить несколько файлов&lt;/h3>
&lt;ul>
&lt;li>Откройте каталог в режиме &lt;code>dired&lt;/code> с помощью &lt;code>C-x 4 d&lt;/code>.&lt;/li>
&lt;li>Введите &lt;code>M-x turn-on-gnus-dired-mode&lt;/code>.
&lt;ul>
&lt;li>Если у Вас &lt;code>M-x&lt;/code> привязано к &lt;code>helm&lt;/code>, то сделать это сразу не получится.&lt;/li>
&lt;li>Тогда Вам надо нажать на нужном каталоге &lt;code>C-RET&lt;/code>, а потом уже ввести &lt;code>M-x turn-on-gnus-dired-mode&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Отметьте необходимые файлы с помощью &lt;code>m&lt;/code>.&lt;/li>
&lt;li>Введите &lt;code>C-c RET C-a&lt;/code> для вставки в уже открытый буфер сообщений (или назначьте новый).&lt;/li>
&lt;/ul></description></item><item><title>Программное обеспечение для дисплейных классов</title><link>https://yamadharma.github.io/ru/post/2021/09/26/computer-classes-software/</link><pubDate>Sun, 26 Sep 2021 19:43:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/26/computer-classes-software/</guid><description>&lt;p>Программное обеспечение, устанавливаемое в дисплейных классах.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#устанавливаемое-программное-обеспечение">&lt;span class="section-num">1&lt;/span> Устанавливаемое программное обеспечение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#лицензии-программного-обеспечения">&lt;span class="section-num">2&lt;/span> Лицензии программного обеспечения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="устанавливаемое-программное-обеспечение">&lt;span class="section-num">1&lt;/span> Устанавливаемое программное обеспечение&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Программное обеспечение&lt;/th>
&lt;th>Linux&lt;/th>
&lt;th>Windows&lt;/th>
&lt;th>Лицензия&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Windows&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Microsoft Subscription Enrollment for Education Solutions&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Microsoft Office&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Microsoft Subscription Enrollment for Education Solutions&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Linux (gentoo, CentOS, Ubuntu)&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL-2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Офисный пакет LibreOffice&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>MPL-2.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Firefox&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>MPL-2.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Thunderbird&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>MPL-2.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Chrome&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Google Chrome Terms of Service&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SciLab&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>MIT License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Java OpenJDK&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>GPL-2 with the Classpath Exception&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Python&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Python Software Foundation License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7-zip&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>LGPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Far&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>BSD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Adobe Reader&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Adobe Software License Agreement&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Putty&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>MIT License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>WinCP&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GPSS&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>GPSS World Student License Agreement 5.2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Perl&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>Artistic License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Packet Tracer&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>Cisco Packet Tracer Software License Agreement&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OpenModelica&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>OSMC-PL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>VirtualBox&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>MIT License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Drupal&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Apache&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>Apache License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MariaDB&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL-2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Postfix&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>IBM-Public-License-1.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Dovecot&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>MIT License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fail2ban&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OpenSSH&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>OpenBSD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GNUPlot&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>gnuplot License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nasm&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>The 2-Clause BSD License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gdb&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>edb&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL-2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>maxima&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gcc&lt;/td>
&lt;td>+&lt;/td>
&lt;td>+&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DevCpp&lt;/td>
&lt;td>-&lt;/td>
&lt;td>+&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gfortran&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FreePascal&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>postgresql&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>PostgreSQL License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>python&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>Python Software Foundation License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>numpy&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>NumPy license&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>sympy&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>The 3-Clause BSD License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>matplotlib&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>Python Software Foundation License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vagrant&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>MIT License&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>emacs&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>GPL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Android Studio&lt;/td>
&lt;td>+&lt;/td>
&lt;td>-&lt;/td>
&lt;td>Apache License 2.0&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="лицензии-программного-обеспечения">&lt;span class="section-num">2&lt;/span> Лицензии программного обеспечения&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Лицензия&lt;/th>
&lt;th>Ссылка на лицензию&lt;/th>
&lt;th>Пояснение&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Microsoft Subscription Enrollment for Education Solutions&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MPL-2.0&lt;/td>
&lt;td>&lt;a href="https://www.mozilla.org/en-US/MPL/2.0/" target="_blank" rel="noopener">https://www.mozilla.org/en-US/MPL/2.0/&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Google Chrome Terms of Service&lt;/td>
&lt;td>&lt;a href="https://www.google.com/intl/en/chrome/privacy/eula_text.html" target="_blank" rel="noopener">https://www.google.com/intl/en/chrome/privacy/eula_text.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MIT License&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener">https://opensource.org/licenses/MIT&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GPL-2 with the Classpath Exception&lt;/td>
&lt;td>&lt;a href="http://openjdk.java.net/legal/gplv2&amp;#43;ce.html" target="_blank" rel="noopener">http://openjdk.java.net/legal/gplv2+ce.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Python Software Foundation License&lt;/td>
&lt;td>&lt;a href="https://docs.python.org/3/license.html" target="_blank" rel="noopener">https://docs.python.org/3/license.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LGPL&lt;/td>
&lt;td>&lt;a href="https://www.gnu.org/licenses/lgpl.html" target="_blank" rel="noopener">https://www.gnu.org/licenses/lgpl.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>BSD&lt;/td>
&lt;td>&lt;a href="https://farmanager.com/license.php" target="_blank" rel="noopener">https://farmanager.com/license.php&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Adobe Software License Agreement&lt;/td>
&lt;td>&lt;a href="https://www.adobe.com/content/dam/acom/ru/legal/licenses-terms/pdf/Reader-EULA-ru_RU-20181207.pdf" target="_blank" rel="noopener">https://www.adobe.com/content/dam/acom/ru/legal/licenses-terms/pdf/Reader-EULA-ru_RU-20181207.pdf&lt;/a>&lt;/td>
&lt;td>Разрешает условное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MIT License&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener">https://opensource.org/licenses/MIT&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GPL&lt;/td>
&lt;td>&lt;a href="https://www.gnu.org/licenses/gpl.html" target="_blank" rel="noopener">https://www.gnu.org/licenses/gpl.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GPSS World Student License Agreement 5.2&lt;/td>
&lt;td>&lt;a href="http://www.minutemansoftware.com/stulicense.htm" target="_blank" rel="noopener">http://www.minutemansoftware.com/stulicense.htm&lt;/a>&lt;/td>
&lt;td>Разрешает условное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Artistic License&lt;/td>
&lt;td>&lt;a href="https://dev.perl.org/licenses/artistic.html" target="_blank" rel="noopener">https://dev.perl.org/licenses/artistic.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Cisco Packet Tracer Software License Agreement&lt;/td>
&lt;td>&lt;a href="https://www.netacad.com" target="_blank" rel="noopener">https://www.netacad.com&lt;/a>&lt;/td>
&lt;td>Разрешает условное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GPL-2&lt;/td>
&lt;td>&lt;a href="https://www.gnu.org/licenses/old-licenses/gpl-2.0.html" target="_blank" rel="noopener">https://www.gnu.org/licenses/old-licenses/gpl-2.0.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MPL-2.0&lt;/td>
&lt;td>&lt;a href="https://www.mozilla.org/en-US/MPL/2.0/" target="_blank" rel="noopener">https://www.mozilla.org/en-US/MPL/2.0/&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Google Chrome Terms of Service&lt;/td>
&lt;td>&lt;a href="https://www.google.com/intl/en/chrome/privacy/eula_text.html" target="_blank" rel="noopener">https://www.google.com/intl/en/chrome/privacy/eula_text.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OSMC-PL&lt;/td>
&lt;td>&lt;a href="https://www.openmodelica.org/developersresources/contributor-license-agreement?id=56:full-license" target="_blank" rel="noopener">https://www.openmodelica.org/developersresources/contributor-license-agreement?id=56:full-license&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Apache License 2.0&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/Apache-2.0" target="_blank" rel="noopener">https://opensource.org/licenses/Apache-2.0&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IBM-Public-License-1.0&lt;/td>
&lt;td>&lt;a href="http://www.postfix.org/IBM-Public-License-1.0.txt" target="_blank" rel="noopener">http://www.postfix.org/IBM-Public-License-1.0.txt&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OpenBSD&lt;/td>
&lt;td>&lt;a href="https://cvsweb.openbsd.org/src/share/misc/license.template?rev=HEAD" target="_blank" rel="noopener">https://cvsweb.openbsd.org/src/share/misc/license.template?rev=HEAD&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gnuplot License&lt;/td>
&lt;td>&lt;a href="https://fedoraproject.org/wiki/Licensing:Gnuplot?rd=Licensing/Gnuplot" target="_blank" rel="noopener">https://fedoraproject.org/wiki/Licensing:Gnuplot?rd=Licensing/Gnuplot&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>The 2-Clause BSD License&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/BSD-2-Clause" target="_blank" rel="noopener">https://opensource.org/licenses/BSD-2-Clause&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PostgreSQL License&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/postgresql" target="_blank" rel="noopener">https://opensource.org/licenses/postgresql&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Python Software Foundation License&lt;/td>
&lt;td>&lt;a href="https://docs.python.org/3/license.html" target="_blank" rel="noopener">https://docs.python.org/3/license.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NumPy license&lt;/td>
&lt;td>&lt;a href="http://www.numpy.org/license.html" target="_blank" rel="noopener">http://www.numpy.org/license.html&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>The 3-Clause BSD License&lt;/td>
&lt;td>&lt;a href="https://opensource.org/licenses/BSD-3-Clause" target="_blank" rel="noopener">https://opensource.org/licenses/BSD-3-Clause&lt;/a>&lt;/td>
&lt;td>Разрешает свободное использование&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Дисплейные классы</title><link>https://yamadharma.github.io/ru/post/2021/09/26/computer-classes/</link><pubDate>Sun, 26 Sep 2021 19:40:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/26/computer-classes/</guid><description>&lt;p>Организация работы дисплейных классов.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#программное-обеспечение">&lt;span class="section-num">2&lt;/span> Программное обеспечение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#нумерация-дисплейных-классов">&lt;span class="section-num">3&lt;/span> Нумерация дисплейных классов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#нумерация-рекомендованная-управлением">&lt;span class="section-num">3.1&lt;/span> Нумерация, рекомендованная Управлением&lt;/a>&lt;/li>
&lt;li>&lt;a href="#кабинеты-на-донской">&lt;span class="section-num">3.2&lt;/span> Кабинеты на Донской&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/12/regulations-display-classes/">Регламент работы дисплейных классов&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/07/regulations-access-supercomputer-rudn/">Регламент доступа к суперкомпьютеру РУДН&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="программное-обеспечение">&lt;span class="section-num">2&lt;/span> Программное обеспечение&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/26/computer-classes-software/">Программное обеспечение для дисплейных классов&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="нумерация-дисплейных-классов">&lt;span class="section-num">3&lt;/span> Нумерация дисплейных классов&lt;/h2>
&lt;h3 id="нумерация-рекомендованная-управлением">&lt;span class="section-num">3.1&lt;/span> Нумерация, рекомендованная Управлением&lt;/h3>
&lt;ul>
&lt;li>Имена ПК: ORD-W-номер_кабинета-номер_ПК&lt;/li>
&lt;/ul>
&lt;h3 id="кабинеты-на-донской">&lt;span class="section-num">3.2&lt;/span> Кабинеты на Донской&lt;/h3>
&lt;ul>
&lt;li>ДК-1 - 399б&lt;/li>
&lt;li>ДК-2 - 399а&lt;/li>
&lt;li>ДК-3 - 299&lt;/li>
&lt;li>ДК-4 - 298&lt;/li>
&lt;li>ДК-5 - 297&lt;/li>
&lt;li>ДК-6 - 296&lt;/li>
&lt;li>ДК-7 - 295&lt;/li>
&lt;/ul></description></item><item><title>Обслуживание btrfs</title><link>https://yamadharma.github.io/ru/post/2021/09/23/btrfs-maintenence/</link><pubDate>Thu, 23 Sep 2021 10:22:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/23/btrfs-maintenence/</guid><description>&lt;p>Действия по обслуживанию Btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#проверка-целостности">&lt;span class="section-num">1&lt;/span> Проверка целостности&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дефрагментация">&lt;span class="section-num">2&lt;/span> Дефрагментация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#trim">&lt;span class="section-num">3&lt;/span> Trim&lt;/a>&lt;/li>
&lt;li>&lt;a href="#балансировка">&lt;span class="section-num">4&lt;/span> Балансировка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#скрипт-btrfsmaintenance">&lt;span class="section-num">5&lt;/span> Скрипт btrfsmaintenance&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">5.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">5.2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск">&lt;span class="section-num">5.3&lt;/span> Запуск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удаление">&lt;span class="section-num">5.4&lt;/span> Удаление&lt;/a>&lt;/li>
&lt;li>&lt;a href="#фалы-конфигурации">&lt;span class="section-num">5.5&lt;/span> Фалы конфигурации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="проверка-целостности">&lt;span class="section-num">1&lt;/span> Проверка целостности&lt;/h2>
&lt;ul>
&lt;li>Следующая команда считывает все блоки данных и метаданных со всех устройств и проверяет контрольные суммы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs scrub start -Bd &amp;lt;путь&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Автоматически восстанавливает поврежденные блоки, если есть правильная копия.&lt;/li>
&lt;li>Не является средством проверки файловой системы (fsck) и не проверяет и не устраняет структурные повреждения в файловой системе.&lt;/li>
&lt;li>Пользователь должен запускать его вручную или через периодическую системную службу. Рекомендуемый период составляет месяц, но может быть и меньше.&lt;/li>
&lt;/ul>
&lt;h2 id="дефрагментация">&lt;span class="section-num">2&lt;/span> Дефрагментация&lt;/h2>
&lt;ul>
&lt;li>При первой записи Btrfs записывает данные последовательно.&lt;/li>
&lt;li>Механизм COW (Copy-On-Write) подразумевает, что любая последующая модификация файла не должна быть написана поверх старых данных, и соответственно, она помещается в свободный блок.&lt;/li>
&lt;li>Данное обстоятельство вызывает повышенную фрагментацию файловой системы.&lt;/li>
&lt;li>В Btrfs для борьбы с фрагментацией существует несколько методов:
&lt;ul>
&lt;li>дефрагментация с помощью команды
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs filesystem defragment &amp;lt;путь&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>опция монтирования &lt;code>-o nodatacow&lt;/code>, которая отключает COW для данных.
&lt;ul>
&lt;li>Можно применять к отдельному файлу либо к подтому/директории, в том числе рекурсивно.&lt;/li>
&lt;li>Атрибут &lt;code>nocow&lt;/code> можно также выставить новому или пустому файлу.&lt;/li>
&lt;li>Он отключает механизм &lt;em>copy on write&lt;/em>, благодаря чему Btrfs при обновлении содержимого файла будет всегда работать с фиксированной дисковой областью, записывая данные поверх существующих (на физическом уровне).&lt;/li>
&lt;li>Включение атрибута &lt;code>nocow&lt;/code> отключает проверку контрольной суммы файлов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>опция монтирования &lt;code>-o autodefrag&lt;/code>.
&lt;ul>
&lt;li>Обнаруживает небольшие случайные записи в файлы и ставит их в очередь для автоматического дефрагментации, поэтому файловая система будет дефрагментировать себя, пока она используется.&lt;/li>
&lt;li>Не подходит для виртуализации или высоконагруженных баз данных, но хорошо работает для небольших файлов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Оценить фрагментированность файлов можно при помощи утилиты &lt;code>filefrag&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="trim">&lt;span class="section-num">3&lt;/span> Trim&lt;/h2>
&lt;ul>
&lt;li>Btrfs может передавать SSD информацию о том, какие блоки данных больше не используются (удалённые файлы и т.д.).&lt;/li>
&lt;li>Это позволяет избежать постепенного снижения производительности SSD.&lt;/li>
&lt;li>Операция &lt;code>fstrim&lt;/code> предназначена для таких целей. Для большинства современных SSD она доступна.&lt;/li>
&lt;li>Btrfs автоматически определяет при монтировании твердотельные накопители.&lt;/li>
&lt;li>Для работы &lt;code>fstrim&lt;/code> необходим ручной запуск или установка опции монтирования &lt;code>-o discard&lt;/code>, которая будет запускать &lt;code>fstrim&lt;/code> после каждого удаления файла.&lt;/li>
&lt;/ul>
&lt;h2 id="балансировка">&lt;span class="section-num">4&lt;/span> Балансировка&lt;/h2>
&lt;ul>
&lt;li>Основной целью функции &lt;code>balance&lt;/code> является распределение групп блоков по всем устройствам.&lt;/li>
&lt;li>Работает только на смонтированной файловой системе.&lt;/li>
&lt;li>Btrfs использует двуступенчатый распределитель:
&lt;ul>
&lt;li>на первом этапе выделяются большие области пространства, известные как чанки (chunks) для определенных типов данных;&lt;/li>
&lt;li>на втором этапе выделяются блоки (blocks).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Существует три типа чанков:
&lt;ul>
&lt;li>Data chunks хранят обычные данные файла.&lt;/li>
&lt;li>Metadata Chunks хранят метаданные о файлах, включая, метки времени, контрольные суммы, имена файлов, владельца, разрешения и расширенные атрибуты.&lt;/li>
&lt;li>System Chunks это особый тип чанков, которые хранят данные о том, где находятся все остальные чанки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Только тот тип данных, для которого выделен блок, может быть сохранен в этом блоке.&lt;/li>
&lt;li>Ошибка &lt;code>ENOSPC&lt;/code> в Btrfs. Файловая система исчерпала пространство для данных или метаданных в существующих чанках и не может выделить новый чанк.
&lt;ul>
&lt;li>Запустите &lt;code>btrfs fi df &amp;lt;путь&amp;gt;&lt;/code> в файловой системе, которая вызвала ошибку.&lt;/li>
&lt;li>Если в строке &amp;ldquo;Данные&amp;rdquo; или &amp;ldquo;Метаданные&amp;rdquo; отображается значение &amp;ldquo;Итого&amp;rdquo;, которое значительно отличается от значения &amp;ldquo;Используется&amp;rdquo;, то это, вероятно, является причиной.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Команда &lt;code>btrfs balance&lt;/code> отправляет данные обратно через распределитель (allocator), что приводит к более компактному использованию чанков.&lt;/li>
&lt;li>Если запустить &lt;code>btrfs fi df &amp;lt;путь&amp;gt;&lt;/code> после запуска баланса, значения Total и Used станут намного ближе друг к другу, так как баланс удаляет фрагменты, которые больше не нужны.&lt;/li>
&lt;/ul>
&lt;h2 id="скрипт-btrfsmaintenance">&lt;span class="section-num">5&lt;/span> Скрипт btrfsmaintenance&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">5.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Выполняемые действия:
&lt;ul>
&lt;li>периодическая проверка целостности;&lt;/li>
&lt;li>периодическая балансировка;&lt;/li>
&lt;li>периодический trim для SSD;&lt;/li>
&lt;li>периодическая дефрагментация.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/kdave/btrfsmaintenance" target="_blank" rel="noopener">https://github.com/kdave/btrfsmaintenance&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="установка">&lt;span class="section-num">5.2&lt;/span> Установка&lt;/h3>
&lt;ul>
&lt;li>Gentoo Linux
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge sys-fs/btrfsmaintenance
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="запуск">&lt;span class="section-num">5.3&lt;/span> Запуск&lt;/h3>
&lt;ul>
&lt;li>Следует выбрать один из вариантов.&lt;/li>
&lt;li>Обновление таймеров через &lt;em>systemd&lt;/em> (при каждой загрузке системы):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> --now btrfsmaintenance-refresh.path
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Ручное обновление таймеров через &lt;em>systemd&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/share/btrfsmaintenance/btrfsmaintenance-refresh-cron.sh systemd-timer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Ручное обновление таблиц через &lt;em>crond&lt;/em> (без &lt;em>systemd&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/share/btrfsmaintenance/btrfsmaintenance-refresh-cron.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="удаление">&lt;span class="section-num">5.4&lt;/span> Удаление&lt;/h3>
&lt;ul>
&lt;li>Данные действия выполняют обычно менеджеры пакетов.&lt;/li>
&lt;li>Для удаления всех таймеров запустите:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/share/btrfsmaintenance/btrfsmaintenance-refresh-cron.sh uninstall
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="фалы-конфигурации">&lt;span class="section-num">5.5&lt;/span> Фалы конфигурации&lt;/h3>
&lt;ul>
&lt;li>В зависимости от дистрибутива конфигурация может находиться в следующих файлах:
&lt;ul>
&lt;li>&lt;code>/etc/sysconfig/btrfsmaintenance&lt;/code>: RedHat, SUSE и производные;&lt;/li>
&lt;li>&lt;code>/etc/default/btrfsmaintenance&lt;/code>: Debian и производные, Gentoo.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В качестве шаблона для этих файлов используется &lt;code>sysconfig.btrfsmaintenance&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>Установка загрузчика grub</title><link>https://yamadharma.github.io/ru/post/2021/09/19/installing-grub-bootloader/</link><pubDate>Sun, 19 Sep 2021 13:58:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/19/installing-grub-bootloader/</guid><description>&lt;p>Установка загрузчика grub2.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-с-uefi">&lt;span class="section-num">2&lt;/span> Установка с UEFI&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-в-режиме-uefi">&lt;span class="section-num">2.1&lt;/span> Установка в режиме UEFI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-без-доступа-к-uefi">&lt;span class="section-num">2.2&lt;/span> Установка без доступа к UEFI&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-в-режиме-chroot">&lt;span class="section-num">3&lt;/span> Установка в режиме chroot&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подмонтировать-каталоги">&lt;span class="section-num">3.1&lt;/span> Подмонтировать каталоги&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подмонтировать-виртуальные-файловые-системы">&lt;span class="section-num">3.2&lt;/span> Подмонтировать виртуальные файловые системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подмонтировать-виртуальные-файловые-системы-для-случая-uefi">&lt;span class="section-num">3.3&lt;/span> Подмонтировать виртуальные файловые системы для случая UEFI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перейти-в-chroot">&lt;span class="section-num">3.4&lt;/span> Перейти в chroot&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установим-grub">&lt;span class="section-num">3.5&lt;/span> Установим grub&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.gnu.org/software/grub/grub.html" target="_blank" rel="noopener">https://www.gnu.org/software/grub/grub.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-с-uefi">&lt;span class="section-num">2&lt;/span> Установка с UEFI&lt;/h2>
&lt;h3 id="установка-в-режиме-uefi">&lt;span class="section-num">2.1&lt;/span> Установка в режиме UEFI&lt;/h3>
&lt;ul>
&lt;li>Обычно разделы монтируются следующим образом:
&lt;ul>
&lt;li>&lt;code>/boot&lt;/code>: загрузочный раздел (значение по умолчанию для опции &lt;code>--boot-directory&lt;/code>);&lt;/li>
&lt;li>&lt;code>/boot/efi&lt;/code>: раздел UEFI (значение по умолчанию для опции &lt;code>--efi-directory&lt;/code>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Установка осуществляется следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grub-install --boot-directory&lt;span class="o">=&lt;/span>/boot --efi-directory&lt;span class="o">=&lt;/span>/boot/efi --target&lt;span class="o">=&lt;/span>x86_64-efi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если используются значения по умолчанию, можно просто выполнить:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grub-install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-без-доступа-к-uefi">&lt;span class="section-num">2.2&lt;/span> Установка без доступа к UEFI&lt;/h3>
&lt;ul>
&lt;li>Используется, если нужно установить EFI-версию GRUB2
&lt;ul>
&lt;li>из системы, загруженной в режиме BIOS;&lt;/li>
&lt;li>для другой архитектуры;&lt;/li>
&lt;li>на сменный носитель.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>При отсутствии доступа к переменным UEFI (&lt;code>efibootmgr&lt;/code> не работает):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grub-install --boot-directory&lt;span class="o">=&lt;/span>/boot --efi-directory&lt;span class="o">=&lt;/span>/boot/efi --target&lt;span class="o">=&lt;/span>x86_64-efi --removable
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-в-режиме-chroot">&lt;span class="section-num">3&lt;/span> Установка в режиме chroot&lt;/h2>
&lt;h3 id="подмонтировать-каталоги">&lt;span class="section-num">3.1&lt;/span> Подмонтировать каталоги&lt;/h3>
&lt;ul>
&lt;li>Создадим точку монтирования
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем партиции.
&lt;ul>
&lt;li>Например, для btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nv">subvol&lt;/span>&lt;span class="o">=&lt;/span>@ /dev/sda4 /mnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda2 /mnt/boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda1 /mnt/boot/efi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nv">subvol&lt;/span>&lt;span class="o">=&lt;/span>@var /dev/sda4 /mnt/var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nv">subvol&lt;/span>&lt;span class="o">=&lt;/span>@var-tmp /dev/sda4 /mnt/var/tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nv">subvol&lt;/span>&lt;span class="o">=&lt;/span>@home /dev/sda4 /mnt/home
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="подмонтировать-виртуальные-файловые-системы">&lt;span class="section-num">3.2&lt;/span> Подмонтировать виртуальные файловые системы&lt;/h3>
&lt;ul>
&lt;li>Для функционирования окружения &lt;em>chroot&lt;/em> необходимо подключить виртуальные файловые системы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -t proc proc /mnt/proc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -t sysfs sys /mnt/sys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /dev /mnt/dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -t devpts pts /mnt/dev/pts/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /run /mnt/run
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="подмонтировать-виртуальные-файловые-системы-для-случая-uefi">&lt;span class="section-num">3.3&lt;/span> Подмонтировать виртуальные файловые системы для случая UEFI&lt;/h3>
&lt;ul>
&lt;li>Для доступа к переменным UEFI нужно подмонтировать соответствующую виртуальную файловую систему:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -t efivarfs efivarfs /mnt/sys/firmware/efi/efivars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перейти-в-chroot">&lt;span class="section-num">3.4&lt;/span> Перейти в chroot&lt;/h3>
&lt;ul>
&lt;li>Перейдём в окружение chroot
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chroot /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установим-grub">&lt;span class="section-num">3.5&lt;/span> Установим grub&lt;/h3>
&lt;ul>
&lt;li>Установка grub выполняется стандартным образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grub-install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grub-mkconfig -o /boot/grub/grub.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Система виртуализации VirtualBox</title><link>https://yamadharma.github.io/ru/post/2021/09/17/virtualbox-virtualization-system/</link><pubDate>Fri, 17 Sep 2021 11:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/17/virtualbox-virtualization-system/</guid><description>&lt;p>Система виртуализации VirtualBox.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настойка-параметров">&lt;span class="section-num">2&lt;/span> Настойка параметров&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-хост-клавиши">&lt;span class="section-num">2.1&lt;/span> Настройка хост-клавиши&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#графический-интерфейс">&lt;span class="section-num">2.1.1&lt;/span> Графический интерфейс&lt;/a>&lt;/li>
&lt;li>&lt;a href="#командная-строка">&lt;span class="section-num">2.1.2&lt;/span> Командная строка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#папка-виртуальных-машин">&lt;span class="section-num">2.2&lt;/span> Папка виртуальных машин&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#значения-по-умолчанию">&lt;span class="section-num">2.2.1&lt;/span> Значения по умолчанию&lt;/a>&lt;/li>
&lt;li>&lt;a href="#графический-интерфейс">&lt;span class="section-num">2.2.2&lt;/span> Графический интерфейс&lt;/a>&lt;/li>
&lt;li>&lt;a href="#командная-строка">&lt;span class="section-num">2.2.3&lt;/span> Командная строка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ошибки-при-эксплуатации">&lt;span class="section-num">4&lt;/span> Ошибки при эксплуатации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#macos">&lt;span class="section-num">4.1&lt;/span> MacOS&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.virtualbox.org/" target="_blank" rel="noopener">https://www.virtualbox.org/&lt;/a>.&lt;/li>
&lt;li>Лицензия: GNU GPL-2 + проприетарная (&lt;a href="https://www.virtualbox.org/wiki/VirtualBox_PUEL" target="_blank" rel="noopener">https://www.virtualbox.org/wiki/VirtualBox_PUEL&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="настойка-параметров">&lt;span class="section-num">2&lt;/span> Настойка параметров&lt;/h2>
&lt;h3 id="настройка-хост-клавиши">&lt;span class="section-num">2.1&lt;/span> Настройка хост-клавиши&lt;/h3>
&lt;h4 id="графический-интерфейс">&lt;span class="section-num">2.1.1&lt;/span> Графический интерфейс&lt;/h4>
&lt;ul>
&lt;li>В меню выберите &lt;em>Файл&lt;/em>, &lt;em>Настройки&lt;/em>.&lt;/li>
&lt;li>Выберите &lt;em>Ввод&lt;/em>, вкладка &lt;em>Виртуальная машина&lt;/em>.&lt;/li>
&lt;li>Выберите &lt;em>Сочетание клавиш&lt;/em> в строке &lt;em>Хост-комбинация&lt;/em>.&lt;/li>
&lt;li>Нажмите новое сочетание клавиш.&lt;/li>
&lt;li>Нажмите ОК, чтобы сохранить изменения.&lt;/li>
&lt;/ul>
&lt;h4 id="командная-строка">&lt;span class="section-num">2.1.2&lt;/span> Командная строка&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Проверьте текущую комбинацию для хост-клавиши:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">VBoxManage getextradata global GUI/Input/HostKeyCombination
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>По умолчанию установлена комбинация &lt;code>65508&lt;/code>, соответствующая правой клавише &lt;code>Ctrl&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Установите нужную клавишу (в примере клавиша &lt;em>Menu&lt;/em>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">VBoxManage setextradata global GUI/Input/HostKeyCombination &lt;span class="m">65383&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Комбинации клавиш можно, например, посмотреть на странице &lt;a href="https://pythonhosted.org/pyglet/api/pyglet.window.key-module.html" target="_blank" rel="noopener">https://pythonhosted.org/pyglet/api/pyglet.window.key-module.html&lt;/a>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="папка-виртуальных-машин">&lt;span class="section-num">2.2&lt;/span> Папка виртуальных машин&lt;/h3>
&lt;h4 id="значения-по-умолчанию">&lt;span class="section-num">2.2.1&lt;/span> Значения по умолчанию&lt;/h4>
&lt;ul>
&lt;li>Linux: &lt;code>$HOME/VirtualBox VMs&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="графический-интерфейс">&lt;span class="section-num">2.2.2&lt;/span> Графический интерфейс&lt;/h4>
&lt;ul>
&lt;li>В меню выберите &lt;em>Файл&lt;/em>, &lt;em>Настройки&lt;/em>.&lt;/li>
&lt;li>Выберите &lt;em>Общие&lt;/em>, поле &lt;em>Папка для машин по умолчанию&lt;/em>.&lt;/li>
&lt;li>Установите новое значение, например &lt;code>/var/vm&lt;/code>.&lt;/li>
&lt;li>Нажмите ОК, чтобы сохранить изменения.&lt;/li>
&lt;/ul>
&lt;h4 id="командная-строка">&lt;span class="section-num">2.2.3&lt;/span> Командная строка&lt;/h4>
&lt;ul>
&lt;li>Установим папку для виртуальных машине в &lt;code>/var/vm&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">VBoxManage setproperty machinefolder /var/vm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно восстановить значение по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">VBoxManage setproperty machinefolder default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">3&lt;/span> Использование&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/02/15/virtualbox-headless/">VirtualBox. Использование без монитора&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ошибки-при-эксплуатации">&lt;span class="section-num">4&lt;/span> Ошибки при эксплуатации&lt;/h2>
&lt;h3 id="macos">&lt;span class="section-num">4.1&lt;/span> MacOS&lt;/h3>
&lt;ul>
&lt;li>Начиная с версии MacOS 10.13 требуется ряд новых полномочий для программного обеспечения.&lt;/li>
&lt;li>После установки кнопка с запросом разрешений находится в панели &amp;ldquo;Системные настройки&amp;rdquo;, раздел &amp;ldquo;Безопасность и конфиденциальность&amp;rdquo;.&lt;/li>
&lt;li>Данная кнопка активна примерно полчаса после установки программного обеспечения, после пропадает.&lt;/li>
&lt;li>В этом случае следует удалить программный продукт и установить заново.&lt;/li>
&lt;li>После этого добавить приложению разрешения.&lt;/li>
&lt;/ul></description></item><item><title>XDG. Пользовательские каталоги</title><link>https://yamadharma.github.io/ru/post/2021/09/16/xdg-user-directories/</link><pubDate>Thu, 16 Sep 2021 20:15:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/16/xdg-user-directories/</guid><description>&lt;p>Пользовательские каталоги по стандарту XDG.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#программы">&lt;span class="section-num">2&lt;/span> Программы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-каталогов">&lt;span class="section-num">2.1&lt;/span> Создание каталогов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запрос-имён-каталогов">&lt;span class="section-num">2.2&lt;/span> Запрос имён каталогов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конфигурационные-файлы">&lt;span class="section-num">3&lt;/span> Конфигурационные файлы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#локализация-названий-каталогов">&lt;span class="section-num">4&lt;/span> Локализация названий каталогов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Стандарт XDG задаёт стандартные имена для пользовательских каталогов (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/10/19/xdg-directories/">XDG. Каталоги&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="программы">&lt;span class="section-num">2&lt;/span> Программы&lt;/h2>
&lt;h3 id="создание-каталогов">&lt;span class="section-num">2.1&lt;/span> Создание каталогов&lt;/h3>
&lt;ul>
&lt;li>Для создания каталогов стандарта XDG служит программа &lt;code>xdg-user-dirs-update&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="запрос-имён-каталогов">&lt;span class="section-num">2.2&lt;/span> Запрос имён каталогов&lt;/h3>
&lt;ul>
&lt;li>Программа &lt;code>xdg-user-dir&lt;/code> служит для запроса имён каталогов, соответствующих стандартным переменным.&lt;/li>
&lt;li>Например, для получения каталога для переменной &lt;code>XDG_TEMPLATES_DIR&lt;/code> (это каталог, содержащий шаблоны):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-user-dir TEMPLATES
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурационные-файлы">&lt;span class="section-num">3&lt;/span> Конфигурационные файлы&lt;/h2>
&lt;ul>
&lt;li>Включение использования каталогов XDG и их кодировка задаются в файлах:
&lt;ul>
&lt;li>&lt;code>/etc/xdg/user-dirs.conf&lt;/code>: уровень системы;&lt;/li>
&lt;li>&lt;code>~/.config/user-dirs.conf&lt;/code>: уровень пользователя.&lt;/li>
&lt;li>Содержание данного файла имеет вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">filename_encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">UTF-8&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Имена каталогов по умолчанию (системный уровень) находятся в файле &lt;code>/etc/xdg/user-dirs.defaults&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Default settings for user directories&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The values are relative pathnames from the home directory and&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># will be translated on a per-path-element basis into the users locale&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DESKTOP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Desktop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DOWNLOAD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Downloads&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">TEMPLATES&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Templates&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">PUBLICSHARE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Public&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DOCUMENTS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Documents&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">MUSIC&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Music&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">PICTURES&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Pictures&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">VIDEOS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Videos&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Another alternative is:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#MUSIC=Documents/Music&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#PICTURES=Documents/Pictures&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#VIDEOS=Documents/Videos&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Локальный файл конфигурации &lt;code>~/.config/user-dirs.dirs&lt;/code> используется для явного задания имён каталогов.
&lt;ul>
&lt;li>Например, файл &lt;code>~/.config/user-dirs.dirs&lt;/code> со стандартными английскими названиями:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_DESKTOP_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Desktop&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_DOCUMENTS_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Documents&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_DOWNLOAD_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Downloads&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_MUSIC_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Music&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_PICTURES_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Pictures&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_PUBLICSHARE_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Public&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_TEMPLATES_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Templates&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">XDG_VIDEOS_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;$HOME/Videos&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Редактировать этот файл можно как непосредственно, так и с помощью утилиты &lt;code>xdg-user-dirs-update&lt;/code>.&lt;/li>
&lt;li>Например, зададим значение &lt;code>XDG_DOWNLOAD_DIR&lt;/code> как &lt;code>$HOME/Internet&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">xdg-user-dirs-update --set DOWNLOAD ~/Internet
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Локальный файл конфигурации &lt;code>~/.config/user-dirs.locale&lt;/code> используется для явной установки локали.&lt;/li>
&lt;/ul>
&lt;h2 id="локализация-названий-каталогов">&lt;span class="section-num">4&lt;/span> Локализация названий каталогов&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Иногда русские названия стандартных каталогов не очень удобны. Например, при работе в консоли приходится переключать язык.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Для принудительного создания каталогов с английскими именами можно использовать:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LC_ALL&lt;/span>&lt;span class="o">=&lt;/span>en_US xdg-user-dirs-update --force
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Для фиксации локали для каталогов нужно задать её в файле конфигурации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;en_US&amp;#39;&lt;/span> &amp;gt; ~/.config/user-dirs.locale
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>После этого надо пересоздать каталоги:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LC_ALL&lt;/span>&lt;span class="o">=&lt;/span>en_US xdg-user-dirs-update --force
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Менеджер библиографической информации Ebib</title><link>https://yamadharma.github.io/ru/post/2021/09/14/emacs-ebib-bibliography-manager/</link><pubDate>Tue, 14 Sep 2021 16:19:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/14/emacs-ebib-bibliography-manager/</guid><description>&lt;p>Менеджер библиографической информации &lt;em>Ebib&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#организация-библиографической-информации">&lt;span class="section-num">2&lt;/span> Организация библиографической информации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-списками-чтения">&lt;span class="section-num">3&lt;/span> Управление списками чтения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">3.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#комбинации-клавиш">&lt;span class="section-num">3.2&lt;/span> Комбинации клавиш&lt;/a>&lt;/li>
&lt;li>&lt;a href="#шаблоны-захвата">&lt;span class="section-num">3.3&lt;/span> Шаблоны захвата&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#модификаторы-шаблона">&lt;span class="section-num">3.3.1&lt;/span> Модификаторы шаблона&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пример-шаблона-захвата">&lt;span class="section-num">3.3.2&lt;/span> Пример шаблона захвата&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://joostkremers.github.io/ebib/" target="_blank" rel="noopener">https://joostkremers.github.io/ebib/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/joostkremers/ebib" target="_blank" rel="noopener">https://github.com/joostkremers/ebib&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://joostkremers.github.io/ebib/ebib-manual.html" target="_blank" rel="noopener">https://joostkremers.github.io/ebib/ebib-manual.html&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="организация-библиографической-информации">&lt;span class="section-num">2&lt;/span> Организация библиографической информации&lt;/h2>
&lt;h2 id="управление-списками-чтения">&lt;span class="section-num">3&lt;/span> Управление списками чтения&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">3.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Есть возможность управлять списком чтения в виде org-файла.&lt;/li>
&lt;li>Имя файла задаётся &lt;code>ebib-reading-list-file&lt;/code>.&lt;/li>
&lt;li>В строке режима буфера записи будет отображаться &lt;code>[R]&lt;/code> для записи из списка чтения.&lt;/li>
&lt;/ul>
&lt;h3 id="комбинации-клавиш">&lt;span class="section-num">3.2&lt;/span> Комбинации клавиш&lt;/h3>
&lt;ul>
&lt;li>&lt;code>R d&lt;/code>: пометить запись как выполненную.&lt;/li>
&lt;li>&lt;code>R a&lt;/code>: добавить текущую запись в список чтения.&lt;/li>
&lt;li>&lt;code>R v&lt;/code>: просмотр листа чтения.&lt;/li>
&lt;/ul>
&lt;h3 id="шаблоны-захвата">&lt;span class="section-num">3.3&lt;/span> Шаблоны захвата&lt;/h3>
&lt;ul>
&lt;li>Шаблон задаётся в переменной &lt;code>ebib-reading-list-template&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="модификаторы-шаблона">&lt;span class="section-num">3.3.1&lt;/span> Модификаторы шаблона&lt;/h4>
&lt;ul>
&lt;li>&lt;code>%K&lt;/code> (&lt;code>ebib-reading-list-create-org-identifier&lt;/code>)
&lt;ul>
&lt;li>Ключ записи. Заносится в свойства записи как &lt;code>:Custom_id:&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%T&lt;/code> (&lt;code>ebib-create-org-title&lt;/code>)
&lt;ul>
&lt;li>Название публикации&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%M&lt;/code> (&lt;code>ebib-reading-list-todo-marker&lt;/code>)
&lt;ul>
&lt;li>Метка выполнения записи.&lt;/li>
&lt;li>По умолчанию &lt;code>TODO&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%L&lt;/code> (&lt;code>ebib-create-org-link&lt;/code>)
&lt;ul>
&lt;li>Ссылка на файл публикации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%F&lt;/code> (&lt;code>ebib-create-org-file-link&lt;/code>)
&lt;ul>
&lt;li>Ссылка на файл публикации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%D&lt;/code> (&lt;code>ebib-create-org-doi-link&lt;/code>)
&lt;ul>
&lt;li>Ссылка на &lt;em>doi&lt;/em> публикации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%U&lt;/code> (&lt;code>bib-create-org-url-link&lt;/code>)
&lt;ul>
&lt;li>Ссылка на &lt;em>url&lt;/em> публикации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="пример-шаблона-захвата">&lt;span class="section-num">3.3.2&lt;/span> Пример шаблона захвата&lt;/h4>
&lt;ul>
&lt;li>Шаблон по умолчанию имеет вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">ebib-reading-list-template&lt;/span> &lt;span class="s">&amp;#34;* %M %T\n:PROPERTIES:\n%K\n:END:\n%F\n&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Vdirsyncer. Синхронизация адресной книги и календаря</title><link>https://yamadharma.github.io/ru/post/2021/09/12/vdirsyncer-synchronizing-address-book-calendar/</link><pubDate>Sun, 12 Sep 2021 16:01:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/12/vdirsyncer-synchronizing-address-book-calendar/</guid><description>&lt;p>Синхронизация локальной базы контактов и календаря.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурирование">&lt;span class="section-num">3&lt;/span> Конфигурирование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#типовая-конфигурация">&lt;span class="section-num">3.1&lt;/span> Типовая конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-с-google">&lt;span class="section-num">3.2&lt;/span> Синхронизация с Google&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-с-office-365">&lt;span class="section-num">3.3&lt;/span> Синхронизация с Office 365&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-с-yandex">&lt;span class="section-num">3.4&lt;/span> Синхронизация с Yandex&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-с-fuux">&lt;span class="section-num">3.5&lt;/span> Синхронизация с Fuux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#утилиты-для-работы-с-vdir">&lt;span class="section-num">4&lt;/span> Утилиты для работы с &lt;em>vdir&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#работа-из-emacs">&lt;span class="section-num">5&lt;/span> Работа из Emacs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обслуживание">&lt;span class="section-num">6&lt;/span> Обслуживание&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#запуск-через-таймер-systemd">&lt;span class="section-num">6.1&lt;/span> Запуск через таймер systemd&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://vdirsyncer.pimutils.org/" target="_blank" rel="noopener">http://vdirsyncer.pimutils.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/pimutils/vdirsyncer" target="_blank" rel="noopener">https://github.com/pimutils/vdirsyncer&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Linux
&lt;ul>
&lt;li>
&lt;p>Gentoo&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge vdirsyncer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурирование">&lt;span class="section-num">3&lt;/span> Конфигурирование&lt;/h2>
&lt;h3 id="типовая-конфигурация">&lt;span class="section-num">3.1&lt;/span> Типовая конфигурация&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>В поставке идёт пример файла конфигурации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># An example configuration for vdirsyncer.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Move it to ~/.vdirsyncer/config or ~/.config/vdirsyncer/config and edit it.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Run `vdirsyncer --help` for CLI usage.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Optional parameters are commented out.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This file doesn&amp;#39;t document all available parameters, see&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># http://vdirsyncer.pimutils.org/ for the rest of them.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[general]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># A folder where vdirsyncer can store some metadata about each pair.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">status_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;~/.vdirsyncer/status/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># CARDDAV&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[pair bob_contacts]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># A `[pair &amp;lt;name&amp;gt;]` block defines two storages `a` and `b` that should be&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># synchronized. The definition of these storages follows in `[storage &amp;lt;name&amp;gt;]`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># blocks. This is similar to accounts in OfflineIMAP.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;bob_contacts_local&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;bob_contacts_remote&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Synchronize all collections that can be found.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># You need to run `vdirsyncer discover` if new calendars/addressbooks are added&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># on the server.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">collections&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">[&amp;#34;from a&amp;#34;, &amp;#34;from b&amp;#34;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Synchronize the &amp;#34;display name&amp;#34; property into a local file (~/.contacts/displayname).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">metadata&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">[&amp;#34;displayname&amp;#34;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># To resolve a conflict the following values are possible:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># `null` - abort when collisions occur (default)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># `&amp;#34;a wins&amp;#34;` - assume a&amp;#39;s items to be more up-to-date&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># `&amp;#34;b wins&amp;#34;` - assume b&amp;#39;s items to be more up-to-date&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#conflict_resolution = null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[storage bob_contacts_local]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># A storage references actual data on a remote server or on the local disk.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Similar to repositories in OfflineIMAP.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;filesystem&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;~/.contacts/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">fileext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;.vcf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[storage bob_contacts_remote]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;carddav&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;https://owncloud.example.com/remote.php/carddav/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#username =&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The password can also be fetched from the system password storage, netrc or a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># custom command. See http://vdirsyncer.pimutils.org/en/stable/keyring.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#password =&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># CALDAV&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[pair bob_calendar]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;bob_calendar_local&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;bob_calendar_remote&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">collections&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">[&amp;#34;from a&amp;#34;, &amp;#34;from b&amp;#34;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Calendars also have a color property&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">metadata&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">[&amp;#34;displayname&amp;#34;, &amp;#34;color&amp;#34;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[storage bob_calendar_local]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;filesystem&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;~/.calendars/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">fileext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;.ics&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[storage bob_calendar_remote]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;caldav&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;https://owncloud.example.com/remote.php/caldav/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#username =&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#password =&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-с-google">&lt;span class="section-num">3.2&lt;/span> Синхронизация с Google&lt;/h3>
&lt;h3 id="синхронизация-с-office-365">&lt;span class="section-num">3.3&lt;/span> Синхронизация с Office 365&lt;/h3>
&lt;h3 id="синхронизация-с-yandex">&lt;span class="section-num">3.4&lt;/span> Синхронизация с Yandex&lt;/h3>
&lt;h3 id="синхронизация-с-fuux">&lt;span class="section-num">3.5&lt;/span> Синхронизация с Fuux&lt;/h3>
&lt;h2 id="утилиты-для-работы-с-vdir">&lt;span class="section-num">4&lt;/span> Утилиты для работы с &lt;em>vdir&lt;/em>&lt;/h2>
&lt;h2 id="работа-из-emacs">&lt;span class="section-num">5&lt;/span> Работа из Emacs&lt;/h2>
&lt;h2 id="обслуживание">&lt;span class="section-num">6&lt;/span> Обслуживание&lt;/h2>
&lt;h3 id="запуск-через-таймер-systemd">&lt;span class="section-num">6.1&lt;/span> Запуск через таймер systemd&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Дистрибутив включает файлы модулей для запуска с определённым интервалом (по умолчанию каждые 15 ± 5 минут).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Файл &lt;code>vdirsyncer.service&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Unit]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Synchronize calendars and contacts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Documentation&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">https://vdirsyncer.readthedocs.org/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Service]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">ExecStart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">/usr/bin/vdirsyncer sync&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">RuntimeMaxSec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Restart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">on-failure&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Файл &lt;code>vdirsyncer.timer&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Unit]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Synchronize vdirs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Timer]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">OnBootSec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">5m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">OnUnitActiveSec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">AccuracySec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">5m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Install]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">WantedBy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">timers.target&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Для запуска на уровне пользователя скопируйте их в каталог &lt;code>~/.config/systemd/user&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Для активации и запуска выполните:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> vdirsyncer.timer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl --user start vdirsyncer.timer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Контакты. Google-contacts</title><link>https://yamadharma.github.io/ru/post/2021/09/11/emacs-contacts-google-contacts/</link><pubDate>Sat, 11 Sep 2021 13:33:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/11/emacs-contacts-google-contacts/</guid><description>&lt;ul>
&lt;li>Пакет &lt;em>google-contacts&lt;/em>.&lt;/li>
&lt;li>На данный момент не работает из-за изменений API Google (замена Contacts API на People API).&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#первый-запуск">&lt;span class="section-num">2.1&lt;/span> Первый запуск&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/jd/google-contacts.el" target="_blank" rel="noopener">https://github.com/jd/google-contacts.el&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/h2>
&lt;h3 id="первый-запуск">&lt;span class="section-num">2.1&lt;/span> Первый запуск&lt;/h3>
&lt;ul>
&lt;li>Запустите google-contacts:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">M-x&lt;/span> &lt;span class="nv">google-contacts&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Будет запрошена учётная запись на google и будет предложено залогиниться.&lt;/li>
&lt;li>Запрос откроется в &lt;em>eww&lt;/em> &amp;mdash; броузере emacs. Через меню откройте этот URL во внешнем броузере.&lt;/li>
&lt;li>При первом использовании необходимо вставить токен &lt;code>oauth2&lt;/code> в минибуфер emacs.&lt;/li>
&lt;li>Затем необходимо ввести кодовую фразу для шифрования токена &lt;code>oauth2&lt;/code>.&lt;/li>
&lt;li>Это происходит потому, что &lt;em>google-contacts&lt;/em> использует &lt;code>oauth2.el&lt;/code>, который хранит информацию аутентификации в зашифрованном файле GPG с использованием &lt;code>plstore.el&lt;/code>.&lt;/li>
&lt;li>Если вы не хотите вводить пароль при каждом поиске контактов в Google, вам необходимо установить для &lt;code>plstore-cache-passphrase-for-simric-encryption&lt;/code> значение &lt;code>t&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">plstore-cache-passphrase-for-symmetric-encryption&lt;/span> &lt;span class="no">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Контакты</title><link>https://yamadharma.github.io/ru/post/2021/09/11/emacs-contacts/</link><pubDate>Sat, 11 Sep 2021 13:29:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/11/emacs-contacts/</guid><description>&lt;p>Управление контактами в Emacs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#системы-управления-контактами">&lt;span class="section-num">1&lt;/span> Системы управления контактами&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="системы-управления-контактами">&lt;span class="section-num">1&lt;/span> Системы управления контактами&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/11/emacs-contacts-google-contacts/">Emacs. Контакты. Google-contacts&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Почта. Удаление дубликатов сообщений из локальных почтовых ящиков</title><link>https://yamadharma.github.io/ru/post/2021/09/09/removing-duplicate-messages/</link><pubDate>Thu, 09 Sep 2021 19:47:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/09/09/removing-duplicate-messages/</guid><description>&lt;p>Удаление дубликатов сообщений из почтового хранилища типа &lt;em>Maildir&lt;/em>. Для &lt;em>mbox&lt;/em> тоже можно.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#программные-средства">&lt;span class="section-num">1&lt;/span> Программные средства&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#mail-deduplicate">&lt;span class="section-num">1.1&lt;/span> mail-deduplicate&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#реализация-средствами-командной-строки">&lt;span class="section-num">2&lt;/span> Реализация средствами командной строки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#используемое-программное-обеспечение">&lt;span class="section-num">2.1&lt;/span> Используемое программное обеспечение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#предварительные-сведения">&lt;span class="section-num">2.2&lt;/span> Предварительные сведения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#реализация-для-maildir">&lt;span class="section-num">2.3&lt;/span> Реализация для Maildir&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#удаление-дубликатов">&lt;span class="section-num">2.3.1&lt;/span> Удаление дубликатов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#необязательные-проверки">&lt;span class="section-num">2.3.2&lt;/span> Необязательные проверки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#реализация-для-mbox">&lt;span class="section-num">2.4&lt;/span> Реализация для mbox&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#удаление-дубликатов">&lt;span class="section-num">2.4.1&lt;/span> Удаление дубликатов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="программные-средства">&lt;span class="section-num">1&lt;/span> Программные средства&lt;/h2>
&lt;h3 id="mail-deduplicate">&lt;span class="section-num">1.1&lt;/span> mail-deduplicate&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/kdeldycke/mail-deduplicate" target="_blank" rel="noopener">https://github.com/kdeldycke/mail-deduplicate&lt;/a>&lt;/li>
&lt;li>Сайт: &lt;a href="https://mail-deduplicate.readthedocs.io/en/latest/" target="_blank" rel="noopener">https://mail-deduplicate.readthedocs.io/en/latest/&lt;/a>&lt;/li>
&lt;li>При первом поиске нашёл данную утилиту.&lt;/li>
&lt;li>К сожалению, собственно функционал по удалению дубликатов писем продекларирован, но пока не реализован.&lt;/li>
&lt;/ul>
&lt;h2 id="реализация-средствами-командной-строки">&lt;span class="section-num">2&lt;/span> Реализация средствами командной строки&lt;/h2>
&lt;ul>
&lt;li>Принято решение реализовать на коленке.&lt;/li>
&lt;/ul>
&lt;h3 id="используемое-программное-обеспечение">&lt;span class="section-num">2.1&lt;/span> Используемое программное обеспечение&lt;/h3>
&lt;ul>
&lt;li>Функционалом удаления почтовых дубликатов обладает утилита &lt;code>reformail&lt;/code>.&lt;/li>
&lt;li>Утилита является частью пакета &lt;em>maildrop&lt;/em>, которая в свою очередь является частью почтового сервера &lt;a href="http://www.courier-mta.org/" target="_blank" rel="noopener">Courier&lt;/a>.&lt;/li>
&lt;li>Сайт: &lt;a href="https://www.courier-mta.org/maildrop/" target="_blank" rel="noopener">https://www.courier-mta.org/maildrop/&lt;/a>&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Linux
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge maildrop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="предварительные-сведения">&lt;span class="section-num">2.2&lt;/span> Предварительные сведения&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Почтовый ящик &lt;code>maildir&lt;/code> представляет собой дерево каталогов:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Maildir/cur
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Maildir/new
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Maildir/tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Программа &lt;code>reformail&lt;/code> считывает сообщение со стандартного входа, обрабатывает его и записывает результат на стандартный вывод.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Извлечение и печать содержимого заголовка:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">reformail -x
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Обнаружение повторяющихся сообщений&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">reformail -D len filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>Параметр &lt;code>-D&lt;/code> реализует удаления повторяющихся сообщений во входящей почте.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>filename&lt;/code> &amp;mdash; файл кэша длиной примерно &lt;code>len&lt;/code> байт.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Если сообщение имеет заголовок &lt;code>Message-ID:&lt;/code>, который уже находится в файле кэша, повторное сообщение завершается с кодом выхода, равным 0.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>В противном случае повторное сообщение завершается с кодом выхода, установленным на 1.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Например:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">formail -D &lt;span class="k">$((&lt;/span>&lt;span class="m">1024&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="m">1024&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="k">))&lt;/span> /tmp/idcache
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Кэш установлен в 10 мегабайт.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Для работы с форматом &lt;code>mbox&lt;/code> используют параметр &lt;code>-s&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>Файл почтового ящика в формате &lt;code>mbox&lt;/code> разбивается на отдельные сообщения.&lt;/li>
&lt;li>Для каждого сообщения выполняется внешняя программа.&lt;/li>
&lt;li>Содержание каждого отдельного сообщения будет предоставлено внешней программе на стандартном вводе.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="реализация-для-maildir">&lt;span class="section-num">2.3&lt;/span> Реализация для Maildir&lt;/h3>
&lt;h4 id="удаление-дубликатов">&lt;span class="section-num">2.3.1&lt;/span> Удаление дубликатов&lt;/h4>
&lt;ul>
&lt;li>Простейший однострочник:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm -f /tmp/idcache&lt;span class="p">;&lt;/span> &lt;span class="k">for&lt;/span> i in cur/*&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> reformail -D &lt;span class="k">$((&lt;/span>&lt;span class="m">1024&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="m">1024&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="k">))&lt;/span> /tmp/idcache &amp;lt;&lt;span class="nv">$i&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> rm &lt;span class="nv">$i&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скрипт, удаляющий дубликаты во всех ящиках, синхронизируемых с помощью &lt;em>mbsync&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/22/mail-synchronization-mbsync/">Почта. Синхронизация. mbsync&lt;/a>)
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># NAME: dedup-mailbox&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAILDIR&lt;/span>&lt;span class="o">=&lt;/span>~/Maildir
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">list_imap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>grep -e &lt;span class="s2">&amp;#34;^IMAPAccount&amp;#34;&lt;/span> ~/.mbsyncrc &lt;span class="p">|&lt;/span> cut -d&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span> -f2 &lt;span class="p">|&lt;/span> xargs -I &lt;span class="o">{}&lt;/span> -n &lt;span class="m">1&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="o">{}&lt;/span>&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> i in &lt;span class="si">${&lt;/span>&lt;span class="nv">list_imap&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">list_imapdir&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>ls &lt;span class="si">${&lt;/span>&lt;span class="nv">MAILDIR&lt;/span>&lt;span class="si">}&lt;/span>/&lt;span class="si">${&lt;/span>&lt;span class="nv">i&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> j in &lt;span class="nv">$list_imapdir&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">cd&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">MAILDIR&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">i&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">j&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">messages_before&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="k">for&lt;/span> k in cur/*&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="o">[[&lt;/span> -f &lt;span class="nv">$k&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> reformail -x Message-ID: &amp;lt;&lt;span class="nv">$k&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span> &lt;span class="p">|&lt;/span> wc -l&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">messages_unique_before&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="k">for&lt;/span> k in cur/*&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="o">[[&lt;/span> -f &lt;span class="nv">$k&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> reformail -x Message-ID: &amp;lt;&lt;span class="nv">$k&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span> &lt;span class="p">|&lt;/span> sort -u &lt;span class="p">|&lt;/span> wc -l&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rm -f /tmp/idcache
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> k in cur/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[[&lt;/span> -f &lt;span class="nv">$k&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> reformail -D &lt;span class="k">$((&lt;/span>&lt;span class="m">1024&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="m">1024&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="k">))&lt;/span> /tmp/idcache &amp;lt;&lt;span class="nv">$k&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> rm &lt;span class="nv">$k&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">messages_after&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="k">for&lt;/span> k in cur/*&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="o">[[&lt;/span> -f &lt;span class="nv">$k&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> reformail -x Message-ID: &amp;lt;&lt;span class="nv">$k&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span> &lt;span class="p">|&lt;/span> wc -l&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">messages_unique_after&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="k">for&lt;/span> k in cur/*&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="o">[[&lt;/span> -f &lt;span class="nv">$k&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> reformail -x Message-ID: &amp;lt;&lt;span class="nv">$k&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span> &lt;span class="p">|&lt;/span> sort -u &lt;span class="p">|&lt;/span> wc -l&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Number of messages in &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">MAILDIR&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">i&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">j&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;\t&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Total&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;\t&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Unique&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;Before:\t&amp;#34;&lt;/span> &lt;span class="nv">$messages_before&lt;/span> &lt;span class="s2">&amp;#34;\t&amp;#34;&lt;/span> &lt;span class="nv">$messages_unique_before&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;After:\t&amp;#34;&lt;/span> &lt;span class="nv">$messages_after&lt;/span> &lt;span class="s2">&amp;#34;\t&amp;#34;&lt;/span> &lt;span class="nv">$messages_unique_after&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="необязательные-проверки">&lt;span class="section-num">2.3.2&lt;/span> Необязательные проверки&lt;/h4>
&lt;ul>
&lt;li>Перед и после удаления проверьте полное количество сообщений:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> i in cur/*&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> reformail -x Message-ID: &amp;lt;&lt;span class="nv">$i&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span> &lt;span class="p">|&lt;/span> wc -l
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Также проверьте количество уникальных сообщений:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> i in cur/*&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> reformail -x Message-ID: &amp;lt;&lt;span class="nv">$i&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span> &lt;span class="p">|&lt;/span> sort -u &lt;span class="p">|&lt;/span> wc -l
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="реализация-для-mbox">&lt;span class="section-num">2.4&lt;/span> Реализация для mbox&lt;/h3>
&lt;h4 id="удаление-дубликатов">&lt;span class="section-num">2.4.1&lt;/span> Удаление дубликатов&lt;/h4>
&lt;ul>
&lt;li>Скрипт, вызывающий программу обработки для каждого сообщения из &lt;em>mbox&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># NAME: dedup-mbox&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># INPUT: $1 = mbox&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># OUTPUT: nmbox (файл с удалёнными дубликатами сообщений)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Delete temporary files&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -f /tmp/tmpmail /tmp/idcache nmbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># reformail-mbox.sh is called for each mail&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat &lt;span class="nv">$1&lt;/span> &lt;span class="p">|&lt;/span> reformail -s ./reformail-mbox.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Основной скрипт для дедупликации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># NAME: reformail-mbox.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># INPUT: stdin: a email&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># called by dedup-mbox&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">TM&lt;/span>&lt;span class="o">=&lt;/span>/tmp/tmpmail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f &lt;span class="nv">$TM&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> error!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat &amp;gt; &lt;span class="nv">$TM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># mbox format, each mail end with a blank line&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &amp;gt;&amp;gt; &lt;span class="nv">$TM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat &lt;span class="nv">$TM&lt;/span> &lt;span class="p">|&lt;/span> reformail -D &lt;span class="k">$((&lt;/span>&lt;span class="m">1024&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="m">1024&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="k">))&lt;/span> /tmp/idcache
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># if this mail isn&amp;#39;t a dup (reformail return 1 if message-id is not found)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$?&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># each mail shall have a message-id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> grep -q -i &lt;span class="s1">&amp;#39;^message-id:&amp;#39;&lt;/span> &lt;span class="nv">$TM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cat &lt;span class="nv">$TM&lt;/span> &amp;gt;&amp;gt; nmbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm &lt;span class="nv">$TM&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Подтома btrfs</title><link>https://yamadharma.github.io/ru/post/2021/08/27/btrfs-subvolumes/</link><pubDate>Fri, 27 Aug 2021 11:41:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/08/27/btrfs-subvolumes/</guid><description>&lt;p>Подтома (subvolumes) btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#именование-подтомов">&lt;span class="section-num">1&lt;/span> Именование подтомов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#список-подтомов">&lt;span class="section-num">1.1&lt;/span> Список подтомов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#минимально-рекомендуемый-набор-подтомов">&lt;span class="section-num">1.2&lt;/span> Минимально рекомендуемый набор подтомов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#создание-подтомов">&lt;span class="section-num">2&lt;/span> Создание подтомов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отключение-cow">&lt;span class="section-num">3&lt;/span> Отключение CoW&lt;/a>&lt;/li>
&lt;li>&lt;a href="#монтирование-подтомов-в-fstab">&lt;span class="section-num">4&lt;/span> Монтирование подтомов в fstab&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-нового-подтома">&lt;span class="section-num">5&lt;/span> Создание нового подтома&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="именование-подтомов">&lt;span class="section-num">1&lt;/span> Именование подтомов&lt;/h2>
&lt;ul>
&lt;li>Для определённости я называю подтома по шаблону &lt;code>@имя_подтома&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="список-подтомов">&lt;span class="section-num">1.1&lt;/span> Список подтомов&lt;/h3>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Возможные наименования подтомов btrfs
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Подтом&lt;/th>
&lt;th>Точка монтирования&lt;/th>
&lt;th>Описание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>@&lt;/code>&lt;/td>
&lt;td>&lt;code>/&lt;/code>&lt;/td>
&lt;td>Корневой каталог (системные файлы)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@home&lt;/code>&lt;/td>
&lt;td>&lt;code>/home&lt;/code>&lt;/td>
&lt;td>Домашний каталог с пользовательскими данными&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@root&lt;/code>&lt;/td>
&lt;td>&lt;code>/root&lt;/code>&lt;/td>
&lt;td>Домашний каталог пользователя &lt;code>root&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@snapshots&lt;/code>&lt;/td>
&lt;td>‒&lt;/td>
&lt;td>Корневой подтом для снапшотов&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@snapshots@root&lt;/code>&lt;/td>
&lt;td>&lt;code>/.snapshots&lt;/code>&lt;/td>
&lt;td>Содержит снапшоты корня, которые создает &lt;code>snapper&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@snapshots@home&lt;/code>&lt;/td>
&lt;td>&lt;code>/home/.snapshots&lt;/code>&lt;/td>
&lt;td>Содержит снапшоты домашнего каталога, которые создает &lt;code>snapper&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@machines&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/lib/machines&lt;/code>&lt;/td>
&lt;td>Если не существует, то создаст systemd&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@portables&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/lib/portables&lt;/code>&lt;/td>
&lt;td>Если не существует, то создаст systemd&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@docker&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/lib/docker&lt;/code>&lt;/td>
&lt;td>Докер создаёт подтома в &lt;code>./btrfs/subvolumes&lt;/code> либо в &lt;code>./XXX/btrfs/subvolumes&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@var&lt;/code>&lt;/td>
&lt;td>&lt;code>/var&lt;/code>&lt;/td>
&lt;td>Аналогично выше описанному&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@var@lib&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/lib&lt;/code>&lt;/td>
&lt;td>Вместо создания &lt;code>@machines&lt;/code>, &lt;code>@portables&lt;/code>, &lt;code>@docker&lt;/code> можно создать только этот, если в &lt;code>/var/lib&lt;/code> не будет храниться чего-то важного&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@var@tmp&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/tmp&lt;/code>&lt;/td>
&lt;td>Содержит временные файлы. Должен монтироваться с &lt;code>nodatacow&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@var@log&lt;/code> или &lt;code>@log&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/log&lt;/code>&lt;/td>
&lt;td>Содержит большое количество файлов, которые пишутся маленькими частями. Должен монтироваться с &lt;code>nodatacow&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@swap&lt;/code>&lt;/td>
&lt;td>&lt;code>/swap&lt;/code> или &lt;code>/var/swap&lt;/code>, или &lt;code>/var/lib/swap&lt;/code>&lt;/td>
&lt;td>Подтом для файла подкачки. Должен монтироваться с &lt;code>nodatacow&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/05/20/btrfs-swap-file/">Файл подкачки на btrfs&lt;/a>)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>@libvirt&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/lib/libvirt/images&lt;/code>&lt;/td>
&lt;td>Образы для &lt;em>libvirt&lt;/em>. Должен монтироваться с &lt;code>nodatacow&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="минимально-рекомендуемый-набор-подтомов">&lt;span class="section-num">1.2&lt;/span> Минимально рекомендуемый набор подтомов&lt;/h3>
&lt;ul>
&lt;li>Минимум нужны два подтома: &lt;code>@&lt;/code> и &lt;code>@home&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="создание-подтомов">&lt;span class="section-num">2&lt;/span> Создание подтомов&lt;/h2>
&lt;ul>
&lt;li>При установки системы я создаю подтома следующим образом:
&lt;ul>
&lt;li>Подмонтируем раздел с btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9 /dev/sdc2 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим подтома на btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var@tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var@log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage@local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage@com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @libvirt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @home
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="отключение-cow">&lt;span class="section-num">3&lt;/span> Отключение CoW&lt;/h2>
&lt;ul>
&lt;li>Для файловых систем с образами виртуальных машин следует отключить CoW (copy-on-write).&lt;/li>
&lt;li>Так же стоит отключить &lt;em>CoW&lt;/em> для часто изменяемых файлов (например, журналов).&lt;/li>
&lt;li>Подмонтируем файловую систему &lt;code>btrfs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@vm /dev/sdc2 /mnt/gentoo/var/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@libvirt /dev/sdc2 /mnt/gentoo/var/lib/libvirt/images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var@log /dev/sdc2 /mnt/gentoo/var/log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var@tmp /dev/sdc2 /mnt/gentoo/var/tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключим для этого подтома CoW:
&lt;ul>
&lt;li>Для &lt;code>/var/vm&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C vm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для &lt;code>/var/lib/libvirt/images&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/lib/libvirt/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C images
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для &lt;code>/var/log&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для &lt;code>/var/tmp&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Посмотреть результат можно командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lsattr -a /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lsattr -a /mnt/gentoo/var/lib/libvirt/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="монтирование-подтомов-в-fstab">&lt;span class="section-num">4&lt;/span> Монтирование подтомов в fstab&lt;/h2>
&lt;ul>
&lt;li>При монтировании я указываю универсальный идентификатор (UUID) файловой системы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /etc/fstab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="k">var&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">var_tmp&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vm&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">vm&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">home&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">portage_local&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">portage_com&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libvirt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">images&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">libvirt&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Идентификатор файловой системы можно узнать следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">blkid /dev/sdc2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="создание-нового-подтома">&lt;span class="section-num">5&lt;/span> Создание нового подтома&lt;/h2>
&lt;ul>
&lt;li>После установки системы может возникнуть необходимость создания дополнительных подтомов на существующем томе.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/btrfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount &lt;span class="nv">UUID&lt;/span>&lt;span class="o">=&lt;/span>f8963df3-1320-4bc0-a125-62be185b029e /mnt/btrfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvolume create /mnt/btrfs/@data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подключим в &lt;code>/etc/fstab&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;f8963df3-1320-4bc0-a125-62be185b029e&amp;#34;&lt;/span> /data btrfs relatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@data &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Файловая система btrfs</title><link>https://yamadharma.github.io/ru/post/2021/08/27/btrfs-file-system/</link><pubDate>Fri, 27 Aug 2021 11:33:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/08/27/btrfs-file-system/</guid><description>&lt;p>Файловая система &lt;em>Btrfs&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#свойства">&lt;span class="section-num">1.1&lt;/span> Свойства&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#опции-монтирования">&lt;span class="section-num">2&lt;/span> Опции монтирования&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ssd-trim">&lt;span class="section-num">2.1&lt;/span> SSD TRIM&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#разное">&lt;span class="section-num">3&lt;/span> Разное&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обслуживание-btrfs">&lt;span class="section-num">4&lt;/span> Обслуживание btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#необходимое-программное-обеспечение">&lt;span class="section-num">5&lt;/span> Необходимое программное обеспечение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#btrfs-progs">&lt;span class="section-num">5.1&lt;/span> btrfs-progs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#btrfsmaintenance">&lt;span class="section-num">5.2&lt;/span> btrfsmaintenance&lt;/a>&lt;/li>
&lt;li>&lt;a href="#snapper">&lt;span class="section-num">5.3&lt;/span> snapper&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">6&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h3 id="свойства">&lt;span class="section-num">1.1&lt;/span> Свойства&lt;/h3>
&lt;ul>
&lt;li>Копирование при записи (copy on write &amp;mdash; CoW).
&lt;ul>
&lt;li>Все копии файла суммарно занимают на диске столько же места сколько оригинал, а при изменениях файлов данные всегда пишутся в новые страницы.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Снапшоты.
&lt;ul>
&lt;li>Можно делать снимки состояния подтома на лету, а потом вернуть это состояние, например, после неудачного обновления или удаления чего-то нужного, просто отредактировав &lt;code>/etc/fstab&lt;/code> и выполнив &lt;code>mount -o remount mountpoint&lt;/code>.&lt;/li>
&lt;li>Для автоматического создания снапшотов можно использовать утилиту &lt;code>snapper&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Поддержка сжатия.&lt;/li>
&lt;li>Поддержка подтомов.
&lt;ul>
&lt;li>Вместо разделов предпочтительно использовать подтома.&lt;/li>
&lt;li>Подтома имеют динамический размер.&lt;/li>
&lt;li>Снапшоты являются по сути подтомами.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Поддержка дисков SSD.&lt;/li>
&lt;/ul>
&lt;h2 id="опции-монтирования">&lt;span class="section-num">2&lt;/span> Опции монтирования&lt;/h2>
&lt;h3 id="ssd-trim">&lt;span class="section-num">2.1&lt;/span> SSD TRIM&lt;/h3>
&lt;ul>
&lt;li>Файловая система Btrfs может освобождать неиспользуемые блоки с SSD диска, поддерживающего команду TRIM.&lt;/li>
&lt;li>Поддерживается асинхронный discard, который доступен в виде опции монтирования &lt;code>discard=async&lt;/code>.
&lt;ul>
&lt;li>Включено по умолчанию начиная с linux 6.2.&lt;/li>
&lt;li>Незанятые экстенты не освобождаются сразу, а группируются и освобождаются позже в отдельном потоке, что улучшает задержки при записи на диск.&lt;/li>
&lt;li>Асинхронный discard можно безопасно использовать вместе с периодическим TRIM.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="разное">&lt;span class="section-num">3&lt;/span> Разное&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/">Перенос Linux на btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-subvolumes/">Подтома btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/02/19/btrfs-checksumming/">btrfs. Контрольные суммы&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="обслуживание-btrfs">&lt;span class="section-num">4&lt;/span> Обслуживание btrfs&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/23/btrfs-maintenence/">Обслуживание btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/deduplication-btrfs-filesystem/">Дедупликация файловой системы btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/21/btrfs-recovery/">Восстановление btrfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="необходимое-программное-обеспечение">&lt;span class="section-num">5&lt;/span> Необходимое программное обеспечение&lt;/h2>
&lt;h3 id="btrfs-progs">&lt;span class="section-num">5.1&lt;/span> btrfs-progs&lt;/h3>
&lt;ul>
&lt;li>Утилиты для работы с &lt;em>btrfs&lt;/em>.&lt;/li>
&lt;li>Установка
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge sys-fs/btrfs-progs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="btrfsmaintenance">&lt;span class="section-num">5.2&lt;/span> btrfsmaintenance&lt;/h3>
&lt;ul>
&lt;li>Скрипт для регулярного обслуживания файловой системы &lt;em>btrfs&lt;/em>&lt;/li>
&lt;li>Установка
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge sys-fs/btrfsmaintenance
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="snapper">&lt;span class="section-num">5.3&lt;/span> snapper&lt;/h3>
&lt;ul>
&lt;li>Управление снапшотами&lt;/li>
&lt;li>Установка
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-backup/snapper
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">6&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Документация: &lt;a href="https://btrfs.readthedocs.io/" target="_blank" rel="noopener">https://btrfs.readthedocs.io/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Научное программное обеспечение</title><link>https://yamadharma.github.io/ru/post/2021/08/25/scientific-software/</link><pubDate>Wed, 25 Aug 2021 12:10:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/08/25/scientific-software/</guid><description>&lt;p>Научное программное обеспечение. Специфика. Назначение.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#специфика-научного-программного-обеспечения">&lt;span class="section-num">1&lt;/span> Специфика научного программного обеспечения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#используемые-алгоритмы-крайне-сложны">&lt;span class="section-num">1.1&lt;/span> Используемые алгоритмы крайне сложны&lt;/a>&lt;/li>
&lt;li>&lt;a href="#низкая-универсальность">&lt;span class="section-num">1.2&lt;/span> Низкая универсальность&lt;/a>&lt;/li>
&lt;li>&lt;a href="#уникальная-модель-распространения">&lt;span class="section-num">1.3&lt;/span> Уникальная модель распространения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#остаточное-финансирование">&lt;span class="section-num">1.4&lt;/span> Остаточное финансирование&lt;/a>&lt;/li>
&lt;li>&lt;a href="#учёный-не-программист">&lt;span class="section-num">1.5&lt;/span> Учёный &amp;mdash; не программист&lt;/a>&lt;/li>
&lt;li>&lt;a href="#унаследованный-код--legacy">&lt;span class="section-num">1.6&lt;/span> Унаследованный код (legacy)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#фрагментация-разработки">&lt;span class="section-num">1.7&lt;/span> Фрагментация разработки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сложность-отладки-и-тестирования">&lt;span class="section-num">1.8&lt;/span> Сложность отладки и тестирования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#требования-к-пользователям">&lt;span class="section-num">1.9&lt;/span> Требования к пользователям&lt;/a>&lt;/li>
&lt;li>&lt;a href="#идеология-devops">&lt;span class="section-num">1.10&lt;/span> Идеология DevOps&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="специфика-научного-программного-обеспечения">&lt;span class="section-num">1&lt;/span> Специфика научного программного обеспечения&lt;/h2>
&lt;ul>
&lt;li>Научное ПО имеет ряд особенностей, которые не встречаются в коммерческом ПО.&lt;/li>
&lt;/ul>
&lt;h3 id="используемые-алгоритмы-крайне-сложны">&lt;span class="section-num">1.1&lt;/span> Используемые алгоритмы крайне сложны&lt;/h3>
&lt;ul>
&lt;li>Зачастую в них разбирается очень узкая группа людей.&lt;/li>
&lt;/ul>
&lt;h3 id="низкая-универсальность">&lt;span class="section-num">1.2&lt;/span> Низкая универсальность&lt;/h3>
&lt;ul>
&lt;li>Всё, что можно было сделать стандартными методами, уже давно сделано.&lt;/li>
&lt;/ul>
&lt;h3 id="уникальная-модель-распространения">&lt;span class="section-num">1.3&lt;/span> Уникальная модель распространения&lt;/h3>
&lt;ul>
&lt;li>Основной источник информации о научном ПО &amp;mdash; реферируемые научные журналы.&lt;/li>
&lt;li>Информация о самих программах становится доступным уже после того, как с помощью этих программ были получены и опубликованы научные результаты.&lt;/li>
&lt;li>Наличие результата оправдывает существование описываемого программного обеспечения.&lt;/li>
&lt;/ul>
&lt;h3 id="остаточное-финансирование">&lt;span class="section-num">1.4&lt;/span> Остаточное финансирование&lt;/h3>
&lt;ul>
&lt;li>Кроме редких специфических случаев на научное ПО не выдаётся целенаправленное финансирование.&lt;/li>
&lt;li>Написание программного обеспечения рассматривается как производная от конкретной научной задачи.&lt;/li>
&lt;li>Иногда крупные популярные программы удостаиваются отдельных грантов.&lt;/li>
&lt;/ul>
&lt;h3 id="учёный-не-программист">&lt;span class="section-num">1.5&lt;/span> Учёный &amp;mdash; не программист&lt;/h3>
&lt;ul>
&lt;li>Программы пишутся самими учёными, не являющимися специалистами в индустриальной разработке программного обеспечения.&lt;/li>
&lt;li>Важен научный результат.&lt;/li>
&lt;li>Культуре разработки уделяется мало внимания.&lt;/li>
&lt;/ul>
&lt;h3 id="унаследованный-код--legacy">&lt;span class="section-num">1.6&lt;/span> Унаследованный код (legacy)&lt;/h3>
&lt;ul>
&lt;li>Наследуется код и средства разработки.&lt;/li>
&lt;li>Большой процент технического долга.&lt;/li>
&lt;li>Возникают требования к средствам разработки: большое время жизни и поддержка давно разработанного ПО.&lt;/li>
&lt;li>Поэтому стараются избегать средств программирования, нарушающих совместимость (как пример, python).&lt;/li>
&lt;/ul>
&lt;h3 id="фрагментация-разработки">&lt;span class="section-num">1.7&lt;/span> Фрагментация разработки&lt;/h3>
&lt;ul>
&lt;li>Разные модули программ пишутся разными людьми (студентами, аспирантами, сотрудниками).&lt;/li>
&lt;li>Они работают над кодом в течение 2&amp;ndash;3 лет, пока это нужно для подготовки диплома или диссертации, или пока есть финансирование.&lt;/li>
&lt;li>Код бросается в полусыром виде.&lt;/li>
&lt;li>Из-за отсутствия культуры программирования через несколько лет возникает спагетти-код.&lt;/li>
&lt;/ul>
&lt;h3 id="сложность-отладки-и-тестирования">&lt;span class="section-num">1.8&lt;/span> Сложность отладки и тестирования&lt;/h3>
&lt;ul>
&lt;li>Сравнить результаты работы программ зачастую просто не с чем (т.к. это и есть передний край науки).&lt;/li>
&lt;li>Для отладки программы, её приходится сравнивать с верификацией модели.&lt;/li>
&lt;/ul>
&lt;h3 id="требования-к-пользователям">&lt;span class="section-num">1.9&lt;/span> Требования к пользователям&lt;/h3>
&lt;ul>
&lt;li>Трудно отделить ошибки программы от специфики исследуемого объекта.&lt;/li>
&lt;li>Для интерпретации полученного результата нужна высокая научная квалификация пользователя.&lt;/li>
&lt;/ul>
&lt;h3 id="идеология-devops">&lt;span class="section-num">1.10&lt;/span> Идеология DevOps&lt;/h3>
&lt;ul>
&lt;li>Приходится не только разрабатывать программное обеспечение, но и поддерживать инфраструктуру.&lt;/li>
&lt;/ul></description></item><item><title>Выбор дистрибутива Linux</title><link>https://yamadharma.github.io/ru/post/2021/08/08/choosing-linux-distribution/</link><pubDate>Sun, 08 Aug 2021 11:20:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/08/08/choosing-linux-distribution/</guid><description>&lt;p>Какой дистрибутив Linux выбрать.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#серверный-компьютерный-парк">&lt;span class="section-num">1&lt;/span> Серверный компьютерный парк&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#требования">&lt;span class="section-num">1.1&lt;/span> Требования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#реализация">&lt;span class="section-num">1.2&lt;/span> Реализация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#обучение">&lt;span class="section-num">2&lt;/span> Обучение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#дисплейные-классы">&lt;span class="section-num">2.1&lt;/span> Дисплейные классы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#требования">&lt;span class="section-num">2.1.1&lt;/span> Требования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#реализация">&lt;span class="section-num">2.1.2&lt;/span> Реализация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#домашние-компьютеры-студентов">&lt;span class="section-num">2.2&lt;/span> Домашние компьютеры студентов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#специализированные-дистрибутивы-для-разных-предметов">&lt;span class="section-num">2.3&lt;/span> Специализированные дистрибутивы для разных предметов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#личное-использование">&lt;span class="section-num">3&lt;/span> Личное использование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#требования">&lt;span class="section-num">3.1&lt;/span> Требования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#реализация">&lt;span class="section-num">3.2&lt;/span> Реализация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="серверный-компьютерный-парк">&lt;span class="section-num">1&lt;/span> Серверный компьютерный парк&lt;/h2>
&lt;h3 id="требования">&lt;span class="section-num">1.1&lt;/span> Требования&lt;/h3>
&lt;ul>
&lt;li>Стабильность дистрибутива.&lt;/li>
&lt;li>Всё должно делаться само.&lt;/li>
&lt;li>Как можно больше автоматизации.&lt;/li>
&lt;/ul>
&lt;h3 id="реализация">&lt;span class="section-num">1.2&lt;/span> Реализация&lt;/h3>
&lt;ul>
&lt;li>Под описание подходят:
&lt;ul>
&lt;li>Debian;&lt;/li>
&lt;li>Ubuntu;&lt;/li>
&lt;li>Red Hat.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В качестве основного дистрибутива была принята CentOS.&lt;/li>
&lt;li>В связи с пертурбациями вокруг CentOS (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/">Замена Centos&lt;/a>), предполагается замена на Rocky Linux.&lt;/li>
&lt;/ul>
&lt;h2 id="обучение">&lt;span class="section-num">2&lt;/span> Обучение&lt;/h2>
&lt;h3 id="дисплейные-классы">&lt;span class="section-num">2.1&lt;/span> Дисплейные классы&lt;/h3>
&lt;h4 id="требования">&lt;span class="section-num">2.1.1&lt;/span> Требования&lt;/h4>
&lt;h4 id="реализация">&lt;span class="section-num">2.1.2&lt;/span> Реализация&lt;/h4>
&lt;ul>
&lt;li>В дисплейных классах развёрнут дистрибутив Gentoo.&lt;/li>
&lt;li>Это позволяет настраивать систему так, как будет нужным.&lt;/li>
&lt;/ul>
&lt;h3 id="домашние-компьютеры-студентов">&lt;span class="section-num">2.2&lt;/span> Домашние компьютеры студентов&lt;/h3>
&lt;h3 id="специализированные-дистрибутивы-для-разных-предметов">&lt;span class="section-num">2.3&lt;/span> Специализированные дистрибутивы для разных предметов&lt;/h3>
&lt;h2 id="личное-использование">&lt;span class="section-num">3&lt;/span> Личное использование&lt;/h2>
&lt;h3 id="требования">&lt;span class="section-num">3.1&lt;/span> Требования&lt;/h3>
&lt;ul>
&lt;li>Гибкость.&lt;/li>
&lt;li>Возможность поставить любую программу, любой версии.&lt;/li>
&lt;/ul>
&lt;h3 id="реализация">&lt;span class="section-num">3.2&lt;/span> Реализация&lt;/h3>
&lt;ul>
&lt;li>Для личного использования применяю Gentoo.&lt;/li>
&lt;/ul></description></item><item><title>Синхронизация файлов с помощью syncthing</title><link>https://yamadharma.github.io/ru/post/2021/08/01/synchronizing-files-syncthing/</link><pubDate>Sun, 01 Aug 2021 15:58:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/08/01/synchronizing-files-syncthing/</guid><description>&lt;p>Синхронизация файлов между хостами с помощью &lt;em>syncthing&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#варианты-приложения">&lt;span class="section-num">2&lt;/span> Варианты приложения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-синхронизации">&lt;span class="section-num">4&lt;/span> Настройка синхронизации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Позволяет синхронизировать файлы между несколькими устройствами.&lt;/li>
&lt;li>Лиценизия: MPL-2.0.&lt;/li>
&lt;li>Сайт: &lt;a href="https://syncthing.net/" target="_blank" rel="noopener">https://syncthing.net/&lt;/a>.&lt;/li>
&lt;li>Синхронизация происходит по дате изменения файла.&lt;/li>
&lt;li>Есть поддержка синхронизации на уровне блоков, то есть при небольших изменениях в файле будут синхронизированы только изменившиеся блоки, а не весь файл.&lt;/li>
&lt;li>&lt;em>Syncthing&lt;/em> фактически является заменой &lt;em>BitTorrent Sync&lt;/em> (сейчас &lt;em>Resilio Sync&lt;/em>) (&lt;a href="https://www.resilio.com/" target="_blank" rel="noopener">https://www.resilio.com/&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="варианты-приложения">&lt;span class="section-num">2&lt;/span> Варианты приложения&lt;/h2>
&lt;ul>
&lt;li>Официальный клиент:
&lt;ul>
&lt;li>Сайт: &lt;a href="https://syncthing.net/" target="_blank" rel="noopener">https://syncthing.net/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/syncthing/syncthing" target="_blank" rel="noopener">https://github.com/syncthing/syncthing&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>syncthing-android &amp;mdash; версия для Android:
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/syncthing/syncthing-android" target="_blank" rel="noopener">https://github.com/syncthing/syncthing-android&lt;/a>.&lt;/li>
&lt;li>Google Play: &lt;a href="https://play.google.com/store/apps/details?id=com.nutomic.syncthingandroid" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=com.nutomic.syncthingandroid&lt;/a>.&lt;/li>
&lt;li>F-Droid: &lt;a href="https://f-droid.org/ru/packages/com.nutomic.syncthingandroid/" target="_blank" rel="noopener">https://f-droid.org/ru/packages/com.nutomic.syncthingandroid/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">3&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge syncthing
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Fedora:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install syncthing
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Debian:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt install syncthing
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-синхронизации">&lt;span class="section-num">4&lt;/span> Настройка синхронизации&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/29/syncthing-cli/">Syncthing. Командная строка&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Почта. Google. Настройка почтового клиента</title><link>https://yamadharma.github.io/ru/post/2021/07/06/mail-google-configuring-mail-client/</link><pubDate>Tue, 06 Jul 2021 14:27:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/06/mail-google-configuring-mail-client/</guid><description>&lt;p>Настройка клиента для работы с почтой &lt;em>Google.com&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#имена-почтовых-ящиков">&lt;span class="section-num">3&lt;/span> Имена почтовых ящиков&lt;/a>&lt;/li>
&lt;li>&lt;a href="#поисковые-запросы-в-web-интерфейсе-gmail">&lt;span class="section-num">4&lt;/span> Поисковые запросы в Web-интерфейсе Gmail&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#размер-почтового-сообщения">&lt;span class="section-num">4.1&lt;/span> Размер почтового сообщения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.google.com/" target="_blank" rel="noopener">https://www.google.com/&lt;/a>&lt;/li>
&lt;li>Используются локализованные названия для папок IMAP.&lt;/li>
&lt;li>Папки IMAP (кроме &lt;code>INBOX&lt;/code>) находятся в иерархии &lt;code>[Gmail]&lt;/code>.&lt;/li>
&lt;li>Имена папок нужно передавать в модифицированном UTF-7 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-imap-folder-encoding/">Почта. Кодировка папок IMAP&lt;/a>).&lt;/li>
&lt;li>Необходимо включить доступ по IMAP:
&lt;ul>
&lt;li>Откройте Gmail на компьютере.&lt;/li>
&lt;li>В правом верхнем углу нажмите на значок &lt;code>Настройки&lt;/code>, затем &lt;code>Все настройки&lt;/code>.&lt;/li>
&lt;li>Откройте вкладку &lt;code>Пересылка и POP/IMAP&lt;/code>.&lt;/li>
&lt;li>В разделе &lt;code>Доступ по протоколу IMAP&lt;/code> выберите &lt;code>Включить IMAP&lt;/code>.&lt;/li>
&lt;li>Нажмите &lt;code>Сохранить изменения&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Лимиты по трафику:
&lt;ul>
&lt;li>скачивание по IMAP: не более 2500 МБ в день;&lt;/li>
&lt;li>скачивание по POP: не более 1250 МБ в день;&lt;/li>
&lt;li>загрузка по IMAP: не более 500 МБ в день.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Размер вложения: до 25 МБ.
&lt;ul>
&lt;li>Если размер вложения превышает 25 МБ, web-интерфейс Gmail автоматически добавляет ссылку на Google Диск в электронное письмо вместо того, чтобы включать её в качестве вложения.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Поддерживает двуэтапную авторизацию.&lt;/li>
&lt;li>Для приложений, не поддерживающих двуэтапную авторизацию, следует использовать ключ приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2020/12/25/mail-google-connect/">Почта. Подключение к Google&lt;/a>).&lt;/li>
&lt;li>Google сохраняет всю электронную почту в папке &amp;ldquo;Все сообщения&amp;rdquo;.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/h2>
&lt;h3 id="smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на google.com (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от почтового ящика домена на google.com;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>smtp.gmail.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL:
&lt;ul>
&lt;li>порт &amp;mdash; 465;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>защита соединения &amp;mdash; STARTTLS:
&lt;ul>
&lt;li>порт &amp;mdash; 587.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на google.com (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на google.com;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>imap.gmail.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 993.&lt;/li>
&lt;/ul>
&lt;h3 id="pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на google.com (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на google.com;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>pop.gmail.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 995.&lt;/li>
&lt;/ul>
&lt;h2 id="имена-почтовых-ящиков">&lt;span class="section-num">3&lt;/span> Имена почтовых ящиков&lt;/h2>
&lt;ul>
&lt;li>Можно получить информацию по именам почтовых ящиков с помощью консольного запроса (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/04/13/imap-queries-command-line/">Запросы по протоколу imap из командной строки&lt;/a>).&lt;/li>
&lt;li>В предположении, что используется парольный менеджер &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>, &lt;a href="https://yamadharma.github.io/ru/post/2021/07/06/mail-google-configuring-mail-client/">Почта. Google. Настройка почтового клиента&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl --insecure --url &lt;span class="s2">&amp;#34;imaps://imap.gmail.com/&amp;#34;&lt;/span> --user &lt;span class="s2">&amp;#34;username:&lt;/span>&lt;span class="k">$(&lt;/span>gopass -o mail/google.com/username@gmail.com@imap.gmail.com&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Имена ящиков будут на том языке, который установлен для интерфейса Gmail.&lt;/li>
&lt;li>Имена на других языках можно перевести (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-imap-folder-encoding/">Почта. Кодировка папок IMAP&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="поисковые-запросы-в-web-интерфейсе-gmail">&lt;span class="section-num">4&lt;/span> Поисковые запросы в Web-интерфейсе Gmail&lt;/h2>
&lt;h3 id="размер-почтового-сообщения">&lt;span class="section-num">4.1&lt;/span> Размер почтового сообщения&lt;/h3>
&lt;ul>
&lt;li>Размер сообщения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">size:&lt;span class="o">[&lt;/span>size in bytes&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В дополнение к размеру вы можете использовать операторы поиска, такие как больше, больше, чем меньше, меньше и меньше, чем меньше, чтобы найти файлы любого определенного размера:
&lt;ul>
&lt;li>&lt;code>larger_than&lt;/code>;&lt;/li>
&lt;li>&lt;code>smaller_than&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Примеры:
&lt;ul>
&lt;li>Все электронные письма размером более 5 МБ, содержащие файловые вложения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">size:5mb has:attachment
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Электронные письма размером более 10 МБ, вложения в формате &lt;code>pdf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">size:10mb has:attachment filename:pdf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Все электронные письма с размером вложений от 5 МБ до 8 МБ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">larger_than:5m smaller_than:8M
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Почта. Кодировка папок IMAP</title><link>https://yamadharma.github.io/ru/post/2021/07/04/mail-imap-folder-encoding/</link><pubDate>Sun, 04 Jul 2021 20:43:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/04/mail-imap-folder-encoding/</guid><description>&lt;p>Национальные символы в именах почтовых ящиков на сервере должны кодироваться в модифицированную кодировку UTF-7.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#преобразование">&lt;span class="section-num">2&lt;/span> Преобразование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#кодирование">&lt;span class="section-num">2.1&lt;/span> Кодирование&lt;/a>&lt;/li>
&lt;li>&lt;a href="#декодирование">&lt;span class="section-num">2.2&lt;/span> Декодирование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>В соответствие с RFC2060 национальные символы в именах почтовых ящиков на сервере должны кодироваться в модифицированную кодировку UTF-7.&lt;/li>
&lt;li>Отличия от оригинальной UTF-7 связаны с особым значением символа &lt;code>+&lt;/code> в некоторых почтовых системах и символа &lt;code>/&lt;/code> в роли разделителя имён каталогов в Unix.&lt;/li>
&lt;/ul>
&lt;h2 id="преобразование">&lt;span class="section-num">2&lt;/span> Преобразование&lt;/h2>
&lt;h3 id="кодирование">&lt;span class="section-num">2.1&lt;/span> Кодирование&lt;/h3>
&lt;ul>
&lt;li>Алгоритм кодирования имён папок:
&lt;ul>
&lt;li>Текст -&amp;gt; UTF7;&lt;/li>
&lt;li>&lt;code>&amp;amp;&lt;/code> -&amp;gt; &lt;code>&amp;amp;-&lt;/code>;&lt;/li>
&lt;li>&lt;code>/&lt;/code> -&amp;gt; &lt;code>,&lt;/code>;&lt;/li>
&lt;li>&lt;code>+&lt;/code> -&amp;gt; &lt;code>&amp;amp;&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Код (shell):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Черновики&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> iconv -f UTF8 -t UTF7 &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/&amp;amp;/&amp;amp;-/g;s/\//,/g;s/+/\&amp;amp;/g&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В результате получаем:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;amp;&lt;/span>BCcENQRABD0EPgQyBDgEOgQ4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="декодирование">&lt;span class="section-num">2.2&lt;/span> Декодирование&lt;/h3>
&lt;ul>
&lt;li>Алгоритм декодирования имён папок:
&lt;ul>
&lt;li>&lt;code>&amp;amp;&lt;/code> -&amp;gt; &lt;code>+&lt;/code>;&lt;/li>
&lt;li>&lt;code>&amp;amp;-&lt;/code> -&amp;gt; &lt;code>&amp;amp;&lt;/code>;&lt;/li>
&lt;li>&lt;code>,&lt;/code> -&amp;gt; &lt;code>/&lt;/code>;&lt;/li>
&lt;li>UTF7 -&amp;gt; Текст.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Код (shell):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;amp;BB4EQgQ,BEAEMAQyBDsENQQ9BD0ESwQ1-&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/&amp;amp;\([^-]\)/+\1/g;s/&amp;amp;-/&amp;amp;/g;s/,/\//g&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> iconv -f UTF7 -t UTF8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В результате получаем:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Отправленные
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Почта. Office365. Настройка почтового клиента</title><link>https://yamadharma.github.io/ru/post/2021/07/04/mail-office365-configuring-mail-client/</link><pubDate>Sun, 04 Jul 2021 17:47:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/04/mail-office365-configuring-mail-client/</guid><description>&lt;p>Настройка клиента для работы с почтой &lt;em>Office365&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.office.com/" target="_blank" rel="noopener">https://www.office.com/&lt;/a>&lt;/li>
&lt;li>Используются стандартные названия для папок IMAP.&lt;/li>
&lt;li>Папки IMAP имеют локализованные названия. В web-интерфейсе они помечаются специальными иконками.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/h2>
&lt;ul>
&lt;li>Информация по настройке: &lt;a href="https://support.microsoft.com/en-us/office/pop-imap-and-smtp-settings-8361e398-8af4-4e97-b147-6c6c4ac95353" target="_blank" rel="noopener">https://support.microsoft.com/en-us/office/pop-imap-and-smtp-settings-8361e398-8af4-4e97-b147-6c6c4ac95353&lt;/a>&lt;/li>
&lt;li>SMTP по умолчанию отключен, его нужно включать в свойствах почтового ящика, опция &amp;ldquo;SMTP с проверкой подлинности&amp;rdquo;:
&lt;ul>
&lt;li>&lt;a href="https://docs.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/authenticated-client-smtp-submission" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/authenticated-client-smtp-submission&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на Office365 (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от почтового ящика домена на Office365;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>smtp.office365.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; STARTTLS;&lt;/li>
&lt;li>порт &amp;mdash; 587.&lt;/li>
&lt;/ul>
&lt;h3 id="imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на Office365 (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на Office365;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>outlook.office365.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 993.&lt;/li>
&lt;/ul>
&lt;h3 id="pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@example.com&lt;/code> на Office365 (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>example.com&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на Office365;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>outlook.office365.com&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 995.&lt;/li>
&lt;/ul></description></item><item><title>Почта. Mail.ru. Настройка почтового клиента</title><link>https://yamadharma.github.io/ru/post/2021/07/04/mail-mail-ru-configuring-mail-client/</link><pubDate>Sun, 04 Jul 2021 15:30:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/04/mail-mail-ru-configuring-mail-client/</guid><description>&lt;p>Настройка клиента для работы с почтой &lt;em>Mail.ru&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://mail.ru/" target="_blank" rel="noopener">https://mail.ru/&lt;/a>&lt;/li>
&lt;li>Используются локализованные названия для папок IMAP.&lt;/li>
&lt;li>Папки почты по умолчанию:
&lt;ul>
&lt;li>&lt;code>INBOX&lt;/code>;&lt;/li>
&lt;li>&lt;code>Архив&lt;/code>;&lt;/li>
&lt;li>&lt;code>Корзина&lt;/code>;&lt;/li>
&lt;li>&lt;code>Спам&lt;/code>;&lt;/li>
&lt;li>&lt;code>Черновики&lt;/code>;&lt;/li>
&lt;li>&lt;code>Отправленные&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Имена папок можно передавать в Unicode.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-клиента">&lt;span class="section-num">2&lt;/span> Настройка клиента&lt;/h2>
&lt;ul>
&lt;li>Справочная страница: &lt;a href="https://help.mail.ru/mail/mailer/popsmtp" target="_blank" rel="noopener">https://help.mail.ru/mail/mailer/popsmtp&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="smtp">&lt;span class="section-num">2.1&lt;/span> SMTP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Mail.ru (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от почтового ящика домена на Mail.ru;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>smtp.mail.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 465.&lt;/li>
&lt;/ul>
&lt;h3 id="imap">&lt;span class="section-num">2.2&lt;/span> IMAP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Mail.ru (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на Mail.ru;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>imap.mail.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 993.&lt;/li>
&lt;/ul>
&lt;h3 id="pop3">&lt;span class="section-num">2.3&lt;/span> POP3&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Mail.ru (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>password &amp;mdash; пароль от вашего почтового ящика домена на Mail.ru;&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>pop.mail.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 995.&lt;/li>
&lt;/ul></description></item><item><title>Почта. Yandex. Настройка почтового клиента</title><link>https://yamadharma.github.io/ru/post/2021/07/04/mail-yandex-configuring-mail-client/</link><pubDate>Sun, 04 Jul 2021 12:16:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/04/mail-yandex-configuring-mail-client/</guid><description>&lt;p>Настройка клиента для работы с почтой &lt;em>Yandex&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#включение-доступа-к-почтовому-ящику">&lt;span class="section-num">2&lt;/span> Включение доступа к почтовому ящику&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-клиента">&lt;span class="section-num">3&lt;/span> Настройка клиента&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#smtp">&lt;span class="section-num">3.1&lt;/span> SMTP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#imap">&lt;span class="section-num">3.2&lt;/span> IMAP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pop3">&lt;span class="section-num">3.3&lt;/span> POP3&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#синхронизация-контактов">&lt;span class="section-num">4&lt;/span> Синхронизация контактов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-календаря">&lt;span class="section-num">5&lt;/span> Синхронизация календаря&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://yandex.ru/" target="_blank" rel="noopener">https://yandex.ru/&lt;/a>&lt;/li>
&lt;li>Используются стандартные названия для папок IMAP.&lt;/li>
&lt;li>Папки почты по умолчанию:
&lt;ul>
&lt;li>&lt;code>INBOX&lt;/code>;&lt;/li>
&lt;li>&lt;code>Archive&lt;/code>;&lt;/li>
&lt;li>&lt;code>Trash&lt;/code>;&lt;/li>
&lt;li>&lt;code>Spam&lt;/code>;&lt;/li>
&lt;li>&lt;code>Drafts&lt;/code>;&lt;/li>
&lt;li>&lt;code>Sent&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Нежелательные письма (&lt;em>папка Spam&lt;/em>) удаляются через 10 дней.&lt;/li>
&lt;li>Удалённые письма (&lt;em>папка Trash&lt;/em> ) удаляются через 31 день.&lt;/li>
&lt;/ul>
&lt;h2 id="включение-доступа-к-почтовому-ящику">&lt;span class="section-num">2&lt;/span> Включение доступа к почтовому ящику&lt;/h2>
&lt;ul>
&lt;li>Проверить статус включения доступа к почтовым ящикам по протоколам IMAP и POP3 можно:
&lt;ul>
&lt;li>по пунктам меню: &lt;code>Все настройки &amp;gt; Почтовые программы&lt;/code>;&lt;/li>
&lt;li>по ссылке: &lt;a href="https://mail.yandex.ru/#setup/client" target="_blank" rel="noopener">https://mail.yandex.ru/#setup/client&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Авторизация для IMAP проводится через пароли приложений (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/01/mail-yandex-application-passwords/">Почта. Yandex. Пароли приложений&lt;/a>).&lt;/li>
&lt;li>В Яндекс 360 для IMAP можно использовать и пароль входа.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-клиента">&lt;span class="section-num">3&lt;/span> Настройка клиента&lt;/h2>
&lt;h3 id="smtp">&lt;span class="section-num">3.1&lt;/span> SMTP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Яндексе (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>при имени ящика вида &lt;code>name@yandex.ru&lt;/code>, логином является часть адреса до знака &lt;code>@&lt;/code>;&lt;/li>
&lt;li>password :
&lt;ul>
&lt;li>пароль для почтового приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/01/mail-yandex-application-passwords/">Почта. Yandex. Пароли приложений&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>smtp.yandex.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL/TLS;&lt;/li>
&lt;li>порт &amp;mdash; 465.&lt;/li>
&lt;/ul>
&lt;h3 id="imap">&lt;span class="section-num">3.2&lt;/span> IMAP&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Яндексе (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>при имени ящика вида &lt;code>name@yandex.ru&lt;/code>, логином является часть адреса до знака &lt;code>@&lt;/code>;&lt;/li>
&lt;li>password :
&lt;ul>
&lt;li>пароль от Яндекс ID (единый аккаунт на Яндексе) (OAuth2) или;&lt;/li>
&lt;li>пароль для почтового приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/01/mail-yandex-application-passwords/">Почта. Yandex. Пароли приложений&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>imap.yandex.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL/TLS;&lt;/li>
&lt;li>порт &amp;mdash; 993.&lt;/li>
&lt;/ul>
&lt;h3 id="pop3">&lt;span class="section-num">3.3&lt;/span> POP3&lt;/h3>
&lt;ul>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Яндексе (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>при имени ящика вида &lt;code>name@yandex.ru&lt;/code>, логином является часть адреса до знака &lt;code>@&lt;/code>;&lt;/li>
&lt;li>password :
&lt;ul>
&lt;li>пароль от Яндекс ID (единый аккаунт на Яндексе) (OAuth2) или;&lt;/li>
&lt;li>пароль для почтового приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/01/mail-yandex-application-passwords/">Почта. Yandex. Пароли приложений&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>адрес почтового сервера &amp;mdash; &lt;code>pop.yandex.ru&lt;/code>;&lt;/li>
&lt;li>защита соединения &amp;mdash; SSL;&lt;/li>
&lt;li>порт &amp;mdash; 995.&lt;/li>
&lt;/ul>
&lt;h2 id="синхронизация-контактов">&lt;span class="section-num">4&lt;/span> Синхронизация контактов&lt;/h2>
&lt;ul>
&lt;li>Используйте для адресной книги формат CardDAV.&lt;/li>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Яндексе (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>при имени ящика вида &lt;code>name@yandex.ru&lt;/code>, логином является &lt;code>name@yandex.ru&lt;/code>;&lt;/li>
&lt;li>password :
&lt;ul>
&lt;li>пароль от Яндекс ID (единый аккаунт на Яндексе) (OAuth2) или;&lt;/li>
&lt;li>пароль для почтового приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/01/mail-yandex-application-passwords/">Почта. Yandex. Пароли приложений&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>адрес сервера: &lt;code>carddav.yandex.ru&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="синхронизация-календаря">&lt;span class="section-num">5&lt;/span> Синхронизация календаря&lt;/h2>
&lt;ul>
&lt;li>Используйте для адресной книги формат CalDAV.&lt;/li>
&lt;li>login &amp;mdash; почтовый адрес &lt;code>name@domain.ru&lt;/code> на Яндексе (где &lt;code>name&lt;/code> &amp;mdash; это имя почтового ящика, а &lt;code>domain.ru&lt;/code> &amp;mdash; имя домена);&lt;/li>
&lt;li>при имени ящика вида &lt;code>name@yandex.ru&lt;/code>, логином является &lt;code>name@yandex.ru&lt;/code>;&lt;/li>
&lt;li>password :
&lt;ul>
&lt;li>пароль от Яндекс ID (единый аккаунт на Яндексе) (OAuth2) или;&lt;/li>
&lt;li>пароль для почтового приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/01/mail-yandex-application-passwords/">Почта. Yandex. Пароли приложений&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>адрес сервера: &lt;code>caldav.yandex.ru&lt;/code> (&lt;a href="https://caldav.yandex.ru" target="_blank" rel="noopener">https://caldav.yandex.ru&lt;/a>).&lt;/li>
&lt;/ul></description></item><item><title>Hugo. Шаблон для научных работников</title><link>https://yamadharma.github.io/ru/post/2021/07/02/hugo-template-for-scientists/</link><pubDate>Fri, 02 Jul 2021 15:02:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/02/hugo-template-for-scientists/</guid><description>&lt;ul>
&lt;li>Тема &lt;em>Hugo Academic CV Theme&lt;/em>.&lt;/li>
&lt;li>Бывшая тема &lt;em>Wowchemy&lt;/em>.&lt;/li>
&lt;li>Бывшая тема &lt;em>Academic&lt;/em>.&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-шаблонов-wowchemy">&lt;span class="section-num">2&lt;/span> Обновление шаблонов Wowchemy&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#до-версии-5-dot-3">&lt;span class="section-num">2.1&lt;/span> До версии 5.3&lt;/a>&lt;/li>
&lt;li>&lt;a href="#общие-рекомендации">&lt;span class="section-num">2.2&lt;/span> Общие рекомендации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#устранение-проблем">&lt;span class="section-num">3&lt;/span> Устранение проблем&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ошибка-нарушение-безопасности">&lt;span class="section-num">3.1&lt;/span> Ошибка: нарушение безопасности&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#элементы-шаблонов-wowchemy">&lt;span class="section-num">4&lt;/span> Элементы шаблонов Wowchemy&lt;/a>&lt;/li>
&lt;li>&lt;a href="#типы-контента-wowchemy">&lt;span class="section-num">5&lt;/span> Типы контента Wowchemy&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="информация">&lt;span class="section-num">1&lt;/span> Информация&lt;/h2>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://hugoblox.com/" target="_blank" rel="noopener">https://hugoblox.com/&lt;/a>&lt;/li>
&lt;li>Репозиторий темы: &lt;a href="https://github.com/HugoBlox/theme-academic-cv" target="_blank" rel="noopener">https://github.com/HugoBlox/theme-academic-cv&lt;/a>&lt;/li>
&lt;li>Репозитории вариантов тем: &lt;a href="https://github.com/HugoBlox" target="_blank" rel="noopener">https://github.com/HugoBlox&lt;/a>&lt;/li>
&lt;li>Репозиторий модулей тем: &lt;a href="https://github.com/HugoBlox/hugo-blox-builder" target="_blank" rel="noopener">https://github.com/HugoBlox/hugo-blox-builder&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-шаблонов-wowchemy">&lt;span class="section-num">2&lt;/span> Обновление шаблонов Wowchemy&lt;/h2>
&lt;h3 id="до-версии-5-dot-3">&lt;span class="section-num">2.1&lt;/span> До версии 5.3&lt;/h3>
&lt;ul>
&lt;li>Примечания до версии 5.3 находятся в блоге &lt;a href="https://wowchemy.com/blog/" target="_blank" rel="noopener">https://wowchemy.com/blog/&lt;/a>.&lt;/li>
&lt;li>В файле &lt;code>go.mod&lt;/code> установите необходимую версию (например, &lt;code>5.3&lt;/code>), исправив строку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">require (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> github.com/wowchemy/wowchemy-hugo-modules/v5 v5.3.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновите пути к модулям в конфигурации в файле &lt;code>config/_default/config.yaml&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">module&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github.com/wowchemy/wowchemy-hugo-modules/wowchemy-cms/v5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github.com/wowchemy/wowchemy-hugo-modules/wowchemy/v5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>или &lt;code>config/_default/config.toml&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">module&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[[&lt;/span>&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">imports&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;github.com/wowchemy/wowchemy-hugo-modules/wowchemy-cms/v5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[[&lt;/span>&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">imports&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;github.com/wowchemy/wowchemy-hugo-modules/wowchemy/v5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для использования с &lt;em>netlify&lt;/em>:
&lt;ul>
&lt;li>Обновите &lt;code>HUGO_VERSION&lt;/code> в &lt;code>netlify.toml&lt;/code> до необходимой версии &lt;code>0.84.4&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Обновите модуль:
&lt;ul>
&lt;li>текущий релиз:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo mod get -u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>текущая версия разработчика:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo mod get -u ./...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="общие-рекомендации">&lt;span class="section-num">2.2&lt;/span> Общие рекомендации&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Текущую версию можно найти:&lt;/p>
&lt;ul>
&lt;li>в файле &lt;code>themes/academic/data/academic.toml&lt;/code> (если всё делалось очень давно);&lt;/li>
&lt;li>в файле &lt;code>go.mod&lt;/code>:
&lt;ul>
&lt;li>точная версия (например, &lt;code>v5.0.0&lt;/code>);&lt;/li>
&lt;li>версия сборки в ​​​​форме &lt;code>v&amp;lt;dummy-version-number&amp;gt;-&amp;lt;date&amp;gt;-&amp;lt;build-number&amp;gt;&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Отредактируйте файл &lt;code>go.mod&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">module my_website
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go 1.15
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">require (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> github.com/HugoBlox/hugo-blox-builder/modules/blox-bootstrap/v5 v5.9.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> github.com/HugoBlox/hugo-blox-builder/modules/blox-plugin-netlify v1.1.2-0.20231108141515-0478cf6921f9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> github.com/HugoBlox/hugo-blox-builder/modules/blox-plugin-reveal v1.1.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Вы настраиваете версию модуля в операторе &lt;code>require&lt;/code>.&lt;/li>
&lt;li>&lt;del>Вместо версии &lt;code>main&lt;/code> можно задать конкретную версию модуля (в формате &lt;code>v5.x.y&lt;/code>).&lt;/del>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Обновите пути модулей в файле &lt;code>config/_default/module.yaml&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">imports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github.com/HugoBlox/hugo-blox-builder/modules/blox-plugin-netlify&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github.com/HugoBlox/hugo-blox-builder/modules/blox-plugin-reveal&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">​ - path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github.com/HugoBlox/hugo-blox-builder/modules/blox-bootstrap/v5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Определите необходимую версию &lt;code>hugo&lt;/code> (&lt;code>HUGO_VERSION&lt;/code>) (возьмите из примечания к выпуску &lt;a href="https://github.com/HugoBlox/hugo-blox-builder/releases" target="_blank" rel="noopener">https://github.com/HugoBlox/hugo-blox-builder/releases&lt;/a>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Проверьте, что локальная версия &lt;em>Hugo Extended&lt;/em> имеет необходимую версию.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Последовательно примените любые критические изменения из соответствующих примечаний к выпуску. Если в релизе нет раздела &lt;em>Breaking Changes&lt;/em>, то никаких изменений не требуется.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Обновите модули темы:&lt;/p>
&lt;ul>
&lt;li>до последней официальной версии:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo mod get -u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>до текущей версии в репозитории:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo mod get -u ./...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>После этого &lt;code>main&lt;/code> в &lt;code>go.mod&lt;/code> будет заменена на конкретную версию.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Если Вы обновляете совсем старую версию, Вам может быть проще создать новый сайт и перенести папку &lt;code>content&lt;/code>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="устранение-проблем">&lt;span class="section-num">3&lt;/span> Устранение проблем&lt;/h2>
&lt;h3 id="ошибка-нарушение-безопасности">&lt;span class="section-num">3.1&lt;/span> Ошибка: нарушение безопасности&lt;/h3>
&lt;ul>
&lt;li>После обновления до 0.91 возникла следующая ошибка при генерации сайта:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo v0.91.0+extended linux/amd64 &lt;span class="nv">BuildDate&lt;/span>&lt;span class="o">=&lt;/span>2021-12-22T12:45:46+03:00 &lt;span class="nv">VendorInfo&lt;/span>&lt;span class="o">=&lt;/span>Gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ERROR render of &lt;span class="s2">&amp;#34;page&amp;#34;&lt;/span> failed: execute of template failed: template: project/single.html:5:3: executing &lt;span class="s2">&amp;#34;project/single.html&amp;#34;&lt;/span> at &amp;lt;partial &lt;span class="s2">&amp;#34;site_head&amp;#34;&lt;/span> .&amp;gt;: error calling partial: &lt;span class="s2">&amp;#34;/home/dharma/work/blog/git/resources/hugo_cache/modules/filecache/modules/pkg/mod/github.com/wowchemy/wowchemy-hugo-modules/wowchemy/v5@v5.0.0-20211221220555-87f69f8c265e/layouts/partials/site_head.html:207:13&amp;#34;&lt;/span>: execute of template failed: template: partials/site_head.html:207:13: executing &lt;span class="s2">&amp;#34;partials/site_head.html&amp;#34;&lt;/span> at &amp;lt;getenv &lt;span class="s2">&amp;#34;WC_POST_CSS&amp;#34;&lt;/span>&amp;gt;: error calling getenv: access denied: &lt;span class="s2">&amp;#34;WC_POST_CSS&amp;#34;&lt;/span> is not whitelisted in policy &lt;span class="s2">&amp;#34;security.funcs.getenv&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> the current security configuration is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>security&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">enableInlineShortcodes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>security.exec&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">allow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;^dart-sass-embedded$&amp;#39;&lt;/span>, &lt;span class="s1">&amp;#39;^go$&amp;#39;&lt;/span>, &lt;span class="s1">&amp;#39;^npx$&amp;#39;&lt;/span>, &lt;span class="s1">&amp;#39;^postcss$&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">osEnv&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;(?i)^(PATH|PATHEXT|APPDATA|TMP|TEMP|TERM)$&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>security.funcs&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">getenv&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;^HUGO_&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>security.http&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">methods&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;(?i)GET|POST&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">urls&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;.*&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Необходимо добавить строчки в белый список для переменной среды &lt;code>WC_POST_CSS&lt;/code>.&lt;/li>
&lt;li>Для &lt;code>config/_default/config.toml&lt;/code> (в формате TOML):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">security&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">funcs&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">getenv&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;^HUGO_&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;^WC_&amp;#34;&lt;/span>&lt;span class="p">,]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для &lt;code>config/_default/config.yaml&lt;/code> (в формате YAML):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">security&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">funcs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">getenv&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">​ - ^HUGO_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">​ - ^WC_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="элементы-шаблонов-wowchemy">&lt;span class="section-num">4&lt;/span> Элементы шаблонов Wowchemy&lt;/h2>
&lt;h2 id="типы-контента-wowchemy">&lt;span class="section-num">5&lt;/span> Типы контента Wowchemy&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/11/22/hugo-wowchemy-book/">Hugo. Wowchemy. Book&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Профессия Системный администратор</title><link>https://yamadharma.github.io/ru/post/2021/07/02/profession-system-administrator/</link><pubDate>Fri, 02 Jul 2021 12:02:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/07/02/profession-system-administrator/</guid><description>&lt;p>Профессия &lt;em>Системный администратор&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#отличие-от-программиста">&lt;span class="section-num">1&lt;/span> Отличие от программиста&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-направления-и-задачи-в-профессии">&lt;span class="section-num">2&lt;/span> Основные направления и задачи в профессии&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#системный-администратор-малой-компании">&lt;span class="section-num">2.1&lt;/span> Системный администратор малой компании&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администратор-веб-сервера">&lt;span class="section-num">2.2&lt;/span> Администратор веб-сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администратор-баз-данных">&lt;span class="section-num">2.3&lt;/span> Администратор баз данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сетевой-администратор">&lt;span class="section-num">2.4&lt;/span> Сетевой администратор&lt;/a>&lt;/li>
&lt;li>&lt;a href="#системный-архитектор">&lt;span class="section-num">2.5&lt;/span> Системный архитектор&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администратор-безопасности-сети">&lt;span class="section-num">2.6&lt;/span> Администратор безопасности сети&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администратор-систем-коммуникаций">&lt;span class="section-num">2.7&lt;/span> Администратор систем коммуникаций&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#что-должен-знать-и-уметь-сисадмин">&lt;span class="section-num">3&lt;/span> Что должен знать и уметь сисадмин&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#основные-задачи">&lt;span class="section-num">3.1&lt;/span> Основные задачи&lt;/a>&lt;/li>
&lt;li>&lt;a href="#личные-качества-системного-администратора">&lt;span class="section-num">3.2&lt;/span> Личные качества системного администратора&lt;/a>&lt;/li>
&lt;li>&lt;a href="#качества-для-каждого-сотрудника">&lt;span class="section-num">3.3&lt;/span> Качества для каждого сотрудника:&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#плюсы-и-минусы-профессии">&lt;span class="section-num">4&lt;/span> Плюсы и минусы профессии&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#плюсы">&lt;span class="section-num">4.1&lt;/span> Плюсы:&lt;/a>&lt;/li>
&lt;li>&lt;a href="#минусы">&lt;span class="section-num">4.2&lt;/span> Минусы:&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#профессиональные-уровни">&lt;span class="section-num">5&lt;/span> Профессиональные уровни&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#младший-системный-администратор">&lt;span class="section-num">5.1&lt;/span> Младший системный администратор&lt;/a>&lt;/li>
&lt;li>&lt;a href="#системный-администратор-среднего-уровня">&lt;span class="section-num">5.2&lt;/span> Системный администратор среднего уровня&lt;/a>&lt;/li>
&lt;li>&lt;a href="#старший-системному-администратору">&lt;span class="section-num">5.3&lt;/span> Старший системному администратору&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="отличие-от-программиста">&lt;span class="section-num">1&lt;/span> Отличие от программиста&lt;/h2>
&lt;ul>
&lt;li>Программирование &amp;mdash; создание компьютерных программ с помощью специальных языков.&lt;/li>
&lt;li>Системное администрирование &amp;mdash; процесс сопровождения программного и аппаратного обеспечения поддержки разработки программного обеспечения и функционирования организации.&lt;/li>
&lt;/ul>
&lt;h2 id="основные-направления-и-задачи-в-профессии">&lt;span class="section-num">2&lt;/span> Основные направления и задачи в профессии&lt;/h2>
&lt;h3 id="системный-администратор-малой-компании">&lt;span class="section-num">2.1&lt;/span> Системный администратор малой компании&lt;/h3>
&lt;ul>
&lt;li>Отвечает за всё:
&lt;ul>
&lt;li>поддержание работоспособности компьютеров;&lt;/li>
&lt;li>налаживание сетевых коммуникаций;&lt;/li>
&lt;li>обслуживанием веб-сервера;&lt;/li>
&lt;li>обслуживанием сети;&lt;/li>
&lt;li>мелкий ремонт компьютерного оборудования;&lt;/li>
&lt;li>helpdesk (эникейщик).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>ОС Windows;&lt;/li>
&lt;li>офисные и бухгалтерские программы.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="администратор-веб-сервера">&lt;span class="section-num">2.2&lt;/span> Администратор веб-сервера&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>установка и настройка ПО веб-сервера.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>Unix-системы (Linux и FreeBSD);&lt;/li>
&lt;li>веб-серверы (apache, nginx);&lt;/li>
&lt;li>Windows Server,&lt;/li>
&lt;li>почтовые серверы.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Знания:
&lt;ul>
&lt;li>сетевая модель передачи данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="администратор-баз-данных">&lt;span class="section-num">2.3&lt;/span> Администратор баз данных&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>работа с системами управления и хранения данных (СКУД, СХД);
&lt;ul>
&lt;li>MySQL, PostgreSQL, MS SQL, Oracle, Informix, Firebird;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>обслуживание систем баз данных;&lt;/li>
&lt;li>выявление и устранение неполадок баз данных;&lt;/li>
&lt;li>резервное копирование и восстановление баз данных.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>операционные системы, на которой работает база данных;&lt;/li>
&lt;li>язык программирования SQL.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="сетевой-администратор">&lt;span class="section-num">2.4&lt;/span> Сетевой администратор&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>сопровождение работы сетей;&lt;/li>
&lt;li>настройка маршрутизации;&lt;/li>
&lt;li>подключение сетевого оборудования.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>сетевые протоколы;&lt;/li>
&lt;li>системы биллинга;&lt;/li>
&lt;li>частные виртуальные сети (VPN).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Знания:
&lt;ul>
&lt;li>сетевые протоколы.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="системный-архитектор">&lt;span class="section-num">2.5&lt;/span> Системный архитектор&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>проектирование информационных систем.&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>знает все популярные ОС;&lt;/li>
&lt;li>работает с веб-серверами;&lt;/li>
&lt;li>работает с базами данных;&lt;/li>
&lt;li>работает со службами каталогов;&lt;/li>
&lt;li>работает с почтовыми серверами;&lt;/li>
&lt;li>работает системами CRM, ERP, CMS.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Системный архитектор занимает управленческое положение, формирует ТЗ для младших специалистов и контролирует их выполнение.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="администратор-безопасности-сети">&lt;span class="section-num">2.6&lt;/span> Администратор безопасности сети&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>занимается информационной безопасностью;&lt;/li>
&lt;li>работает с документами, регламентами безопасности.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Знания:
&lt;ul>
&lt;li>системы контроля доступа.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="администратор-систем-коммуникаций">&lt;span class="section-num">2.7&lt;/span> Администратор систем коммуникаций&lt;/h3>
&lt;ul>
&lt;li>Задачи:
&lt;ul>
&lt;li>настройка электронной почты, телефонии, внутренних чатов и голосовых конференций;&lt;/li>
&lt;li>работа с почтовыми серверами (Microsoft Exchange Server, qmail, Sendmail, Exim, Postfix).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>работа в основных программах-клиентах электронной почты (Microsoft Outlook, The Bat!, Mozilla Thunderbird, KMail, Evolution).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Знания:
&lt;ul>
&lt;li>сетевые протоколы;&lt;/li>
&lt;li>сетевые технологии.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="что-должен-знать-и-уметь-сисадмин">&lt;span class="section-num">3&lt;/span> Что должен знать и уметь сисадмин&lt;/h2>
&lt;h3 id="основные-задачи">&lt;span class="section-num">3.1&lt;/span> Основные задачи&lt;/h3>
&lt;ul>
&lt;li>работать с ПО, выявлять и ликвидировать ошибки;&lt;/li>
&lt;li>настраивать и обслуживать сети;&lt;/li>
&lt;li>проводить диагностику компьютера и устранять неполадки;&lt;/li>
&lt;li>работать с разными серверами;&lt;/li>
&lt;li>работать с системами управления и хранения баз данных;&lt;/li>
&lt;li>работать с клиентом, оказывать техподдержку;&lt;/li>
&lt;li>владеть несколькими языками программирования;&lt;/li>
&lt;li>документировать совершённые действия;&lt;/li>
&lt;li>знать технический английский язык.&lt;/li>
&lt;/ul>
&lt;h3 id="личные-качества-системного-администратора">&lt;span class="section-num">3.2&lt;/span> Личные качества системного администратора&lt;/h3>
&lt;ul>
&lt;li>аналитическое мышление;&lt;/li>
&lt;li>внимательность;&lt;/li>
&lt;li>стрессоустойчивость;&lt;/li>
&lt;li>умение работать в режиме многозадачности;&lt;/li>
&lt;li>обучаемость;&lt;/li>
&lt;li>терпеливость.&lt;/li>
&lt;/ul>
&lt;h3 id="качества-для-каждого-сотрудника">&lt;span class="section-num">3.3&lt;/span> Качества для каждого сотрудника:&lt;/h3>
&lt;ul>
&lt;li>ответственность;&lt;/li>
&lt;li>дисциплинированность;&lt;/li>
&lt;li>самоорганизованность.&lt;/li>
&lt;/ul>
&lt;h2 id="плюсы-и-минусы-профессии">&lt;span class="section-num">4&lt;/span> Плюсы и минусы профессии&lt;/h2>
&lt;h3 id="плюсы">&lt;span class="section-num">4.1&lt;/span> Плюсы:&lt;/h3>
&lt;ul>
&lt;li>важная должность;&lt;/li>
&lt;li>востребованность на рынке труда;&lt;/li>
&lt;li>высокий заработок;&lt;/li>
&lt;li>совмещение в нескольких организациях;&lt;/li>
&lt;li>возможность самостоятельно планировать рабочие часы, когда нет задач;&lt;/li>
&lt;li>перспективная профессия.&lt;/li>
&lt;/ul>
&lt;h3 id="минусы">&lt;span class="section-num">4.2&lt;/span> Минусы:&lt;/h3>
&lt;ul>
&lt;li>неравномерная нагрузка;&lt;/li>
&lt;li>высокая ответственность;&lt;/li>
&lt;li>сидячая работа;&lt;/li>
&lt;li>общение с пользователями как стресс-фактор.&lt;/li>
&lt;/ul>
&lt;h2 id="профессиональные-уровни">&lt;span class="section-num">5&lt;/span> Профессиональные уровни&lt;/h2>
&lt;h3 id="младший-системный-администратор">&lt;span class="section-num">5.1&lt;/span> Младший системный администратор&lt;/h3>
&lt;ul>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>администрировать Linux и Windows;&lt;/li>
&lt;li>разбираться в стеке протоколов TCP/IP, HTTP(S), DNS;&lt;/li>
&lt;li>знать bash, основы SQL и администрирования СУБД;&lt;/li>
&lt;li>заниматься диагностикой и ремонтом компьютера;&lt;/li>
&lt;li>знать технический английский язык.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="системный-администратор-среднего-уровня">&lt;span class="section-num">5.2&lt;/span> Системный администратор среднего уровня&lt;/h3>
&lt;ul>
&lt;li>Стаж:
&lt;ul>
&lt;li>от 1 года.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Требования:
&lt;ul>
&lt;li>высшее техническое образование.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>администрировать серверы под Linux (apache, nginx, MySQL, mongo, iptables, zabbix, redis, libvirt, docker);&lt;/li>
&lt;li>знать языки программирования и умение писать скрипты;&lt;/li>
&lt;li>знать серверное железо;&lt;/li>
&lt;li>знать технологию виртуализации данных для объединения физических дисковых устройств в логический модуль;&lt;/li>
&lt;li>работать с документацией;&lt;/li>
&lt;li>владеть техническим английским языком;&lt;/li>
&lt;li>быть ответственным и внимательным в работе.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="старший-системному-администратору">&lt;span class="section-num">5.3&lt;/span> Старший системному администратору&lt;/h3>
&lt;ul>
&lt;li>Стаж:
&lt;ul>
&lt;li>от 3 лет.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Умения и навыки:
&lt;ul>
&lt;li>обслуживание рабочих мест пользователей (ПК, оргтехника, телефон, ПО);&lt;/li>
&lt;li>исследование причин инцидентов и быстрый поиск оптимального решения;&lt;/li>
&lt;li>обслуживание Wi-Fi сети и серверов;&lt;/li>
&lt;li>обслуживание аудио / видео техники (А/В ресиверы, спутниковое ТВ, AppleTV, видеопроекторы);&lt;/li>
&lt;li>работа с базами данных и обеспечение информационной безопасности;&lt;/li>
&lt;li>обслуживание VoIP, спутниковой и сотовой связи;&lt;/li>
&lt;li>обслуживание устройств на платформе iOS (iPAD, iPhone);&lt;/li>
&lt;li>внимательность, опрятность, умение грамотно выражать свои мысли;&lt;/li>
&lt;li>навыки самостоятельного решения проблем;&lt;/li>
&lt;li>грамотно выстраивать структуру работы;&lt;/li>
&lt;li>быть лидером;&lt;/li>
&lt;li>технический английский язык.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Администрирование Cisco</title><link>https://yamadharma.github.io/ru/post/2021/06/16/cisco-administration/</link><pubDate>Wed, 16 Jun 2021 12:38:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/06/16/cisco-administration/</guid><description>&lt;p>Администрирование сетей и оборудования Cisco.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обслуживание">&lt;span class="section-num">2&lt;/span> Обслуживание&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="настройка">&lt;span class="section-num">1&lt;/span> Настройка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/06/16/cisco-storm-control/">Cisco. Защита от широковещательного шторма&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/11/15/initial-cisco-switch-configuration/">Начальная конфигурация коммутатора Cisco&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/03/cisco-wlc/">Контроллер Cisco WLC&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/04/04/cisco-huawei-commands/">Сопоставление команд Cisco и Huawei&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="обслуживание">&lt;span class="section-num">2&lt;/span> Обслуживание&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/10/06/password-reset-catalyst-switches/">Сброс пароля на коммутаторах Catalyst&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/07/03/flashing-cisco-aironet/">Перепрошивка точки доступа Cisco Aironet&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Cisco. Защита от широковещательного шторма</title><link>https://yamadharma.github.io/ru/post/2021/06/16/cisco-storm-control/</link><pubDate>Wed, 16 Jun 2021 11:48:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/06/16/cisco-storm-control/</guid><description>&lt;p>Для борьбы с широковещательным штормом в сетевых устройствах Cisco используется параметр &lt;code>storm-control&lt;/code>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#описание">&lt;span class="section-num">1&lt;/span> Описание&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#задание-порогов-срабатывания">&lt;span class="section-num">2.1&lt;/span> Задание порогов срабатывания&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#однопороговый-вариант">&lt;span class="section-num">2.1.1&lt;/span> Однопороговый вариант&lt;/a>&lt;/li>
&lt;li>&lt;a href="#двупороговый-вариант">&lt;span class="section-num">2.1.2&lt;/span> Двупороговый вариант&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#реакция-на-шторм">&lt;span class="section-num">2.2&lt;/span> Реакция на шторм&lt;/a>&lt;/li>
&lt;li>&lt;a href="#восстановление-портов">&lt;span class="section-num">2.3&lt;/span> Восстановление портов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обнаружение-петель">&lt;span class="section-num">2.4&lt;/span> Обнаружение петель&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-на-все-порты-сразу">&lt;span class="section-num">2.5&lt;/span> Настройка на все порты сразу&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#проверка-работы">&lt;span class="section-num">3&lt;/span> Проверка работы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="описание">&lt;span class="section-num">1&lt;/span> Описание&lt;/h2>
&lt;ul>
&lt;li>Параметр &lt;code>storm-control&lt;/code> задаёт количество бродкастов в секунду.&lt;/li>
&lt;li>Всё, что свыше этого значения, отбрасывается.&lt;/li>
&lt;li>Порт при этом продолжает работать для пересылки всего остального трафика.&lt;/li>
&lt;li>В случае высокого значения &lt;code>storm-contorol&lt;/code> можно получить перегрузку ЦПУ коммутатора, в случае низкого значения можно иметь проблемы с работой DHCP и ARP.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">2&lt;/span> Настройка&lt;/h2>
&lt;h3 id="задание-порогов-срабатывания">&lt;span class="section-num">2.1&lt;/span> Задание порогов срабатывания&lt;/h3>
&lt;ul>
&lt;li>Максимальный уровень широковещательного трафика задаётся либо в процентах от полосы пропускания (безразмерные значения), либо в битах в секунду (bps).&lt;/li>
&lt;li>Есть два варианта конфигурирования:
&lt;ul>
&lt;li>однопороговое,&lt;/li>
&lt;li>двупороговое.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="однопороговый-вариант">&lt;span class="section-num">2.1.1&lt;/span> Однопороговый вариант&lt;/h4>
&lt;ul>
&lt;li>Задаётся максимальный порог и действие по достижении этого порога:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># int f0/1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control broadcast level 30.00&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control multicast level 30.00&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Команда устанавливает максимальный уровень широковещательного трафика в 30% от полосы пропускания.&lt;/li>
&lt;/ul>
&lt;h4 id="двупороговый-вариант">&lt;span class="section-num">2.1.2&lt;/span> Двупороговый вариант&lt;/h4>
&lt;ul>
&lt;li>Указывается два порога.&lt;/li>
&lt;li>При достижении первого порога порт будет отключаться.&lt;/li>
&lt;li>При падении уровня трафика до второго порога порт будет включаться:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control broadcast level 30.00 10.00&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control multicast level 30.00 10.00&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Здесь первый порог &amp;mdash; 30% от полосы пропускания, второй порог &amp;mdash; 10% от полосы пропускания.&lt;/li>
&lt;/ul>
&lt;h3 id="реакция-на-шторм">&lt;span class="section-num">2.2&lt;/span> Реакция на шторм&lt;/h3>
&lt;ul>
&lt;li>Необходимо задать действие при возникновении шторма
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># int f0/1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control action shutdown&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Вторая команда указывает на то, какое действие должно быть совершено, когда лимит будет достигнут. В данном случае мы отключаем порт (&lt;code>shutdown&lt;/code>).&lt;/li>
&lt;li>Если действие не указывать, то свитч будет просто фильтровать трафик, превышающий порог, и не отправлять никаких оповещений.&lt;/li>
&lt;li>Можно включить SNMP-трапы и сообщения в Syslog:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control action trap&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="восстановление-портов">&lt;span class="section-num">2.3&lt;/span> Восстановление портов&lt;/h3>
&lt;ul>
&lt;li>Чтобы коммутатор автоматически восстанавливал порт через некоторое время после отключения, необходимо в глобальной конфигурации задать:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># errdisable recovery cause storm-control&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># errdisable recovery interval 180&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В данном случае восстановление происходит через 3 минуты (180 секунд).&lt;/li>
&lt;/ul>
&lt;h3 id="обнаружение-петель">&lt;span class="section-num">2.4&lt;/span> Обнаружение петель&lt;/h3>
&lt;ul>
&lt;li>У коммутаторов Cisco есть также штатное средство обнаружения петель, основанное на периодической отправке keepalive-сообщений.&lt;/li>
&lt;li>Эта опция обычно включена по умолчанию, и в случае срабатывания порт отключается.&lt;/li>
&lt;li>Для механизма keepalive можно также настроить автоматическое включение интерфейса:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># errdisable recovery cause loopback&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-на-все-порты-сразу">&lt;span class="section-num">2.5&lt;/span> Настройка на все порты сразу&lt;/h3>
&lt;ul>
&lt;li>Для настройки параметров всех портов сразу используйте &lt;em>диапазон портов&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config&lt;span class="o">)&lt;/span>&lt;span class="c1"># interface range f0/1 - 24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>config-if-range&lt;span class="o">)&lt;/span>&lt;span class="c1"># storm-control broadcast level 30.00 10.00&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="проверка-работы">&lt;span class="section-num">3&lt;/span> Проверка работы&lt;/h2>
&lt;ul>
&lt;li>Используйте команду &lt;code>show storm-control&lt;/code>, чтобы проверить конфигурацию функции подавления широковещательной и многоадресной рассылки.&lt;/li>
&lt;li>Используйте команду &lt;code>show storm-control &amp;lt;интерфейс&amp;gt;&lt;/code>, чтобы проверить конфигурацию функции подавления широковещательной и многоадресной рассылки на интерфейсе.&lt;/li>
&lt;li>Используйте команду &lt;code>show run interface &amp;lt;интерфейс&amp;gt;&lt;/code>, чтобы проверить ловушку (trap), настроенную для порта.&lt;/li>
&lt;/ul></description></item><item><title>Обратные ссылки в Hugo</title><link>https://yamadharma.github.io/ru/post/2021/06/02/backlinks-hugo/</link><pubDate>Wed, 02 Jun 2021 17:19:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/06/02/backlinks-hugo/</guid><description>&lt;p>Можно создавать обратные ссылки и в самом Hugo.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#источники-обратных-ссылок">&lt;span class="section-num">1&lt;/span> Источники обратных ссылок&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-обратных-ссылок-из-emacs">&lt;span class="section-num">2&lt;/span> Создание обратных ссылок из emacs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-обратных-ссылок-с-помощью-генератора-hugo">&lt;span class="section-num">3&lt;/span> Создание обратных ссылок с помощью генератора Hugo&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">3.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#каталоги-для-новой-структуры">&lt;span class="section-num">3.2&lt;/span> Каталоги для новой структуры&lt;/a>&lt;/li>
&lt;li>&lt;a href="#шаблон-генерации-обратных-ссылок">&lt;span class="section-num">3.3&lt;/span> Шаблон генерации обратных ссылок&lt;/a>&lt;/li>
&lt;li>&lt;a href="#шаблон-страницы">&lt;span class="section-num">3.4&lt;/span> Шаблон страницы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#исправление-обратных-ссылок">&lt;span class="section-num">4&lt;/span> Исправление обратных ссылок&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="источники-обратных-ссылок">&lt;span class="section-num">1&lt;/span> Источники обратных ссылок&lt;/h2>
&lt;ul>
&lt;li>У меня обратные ссылки получаются из заметок в Org-roam, которые я стараюсь вести по методике Zettelkasten (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/02/18/zettelkasten-method/">Метод Zettelkasten&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="создание-обратных-ссылок-из-emacs">&lt;span class="section-num">2&lt;/span> Создание обратных ссылок из emacs&lt;/h2>
&lt;ul>
&lt;li>Обратные ссылки можно создавать напрямую при экспорте из &lt;em>emacs&lt;/em>.&lt;/li>
&lt;li>Для экспорта обратных ссылок я использовал следующий скрипт на &lt;em>elisp&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">;;; -*- mode: emacs-lisp; lexical-binding: t; coding: utf-8-unix; -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">;;; Export Backlinks&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">defun&lt;/span> &lt;span class="nv">ecf/org-roam--backlinks-list&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">with-temp-buffer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">if-let*&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nv">backlinks&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">org-roam--get-backlinks&lt;/span> &lt;span class="nv">file&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">grouped-backlinks&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">--group-by&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">nth&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="nv">it&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">backlinks&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">progn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">dolist&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">group&lt;/span> &lt;span class="nv">grouped-backlinks&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">let&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nv">file-from&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">car&lt;/span> &lt;span class="nv">group&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">bls&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">cdr&lt;/span> &lt;span class="nv">group&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">insert&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">format&lt;/span> &lt;span class="s">&amp;#34;- [[file:%s][%s]]\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">file-from&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">org-roam-db--get-title&lt;/span> &lt;span class="nv">file-from&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">dolist&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">backlink&lt;/span> &lt;span class="nv">bls&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">pcase-let&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nv">file-from&lt;/span> &lt;span class="nv">_&lt;/span> &lt;span class="o">,&lt;/span>&lt;span class="nv">props&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">backlink&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">s-trim&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">s-replace&lt;/span> &lt;span class="s">&amp;#34;\n&amp;#34;&lt;/span> &lt;span class="s">&amp;#34; &amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">prin1-to-string&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">plist-get&lt;/span> &lt;span class="nv">props&lt;/span> &lt;span class="nb">:content&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">insert&lt;/span> &lt;span class="s">&amp;#34;\n\n&amp;#34;&lt;/span>&lt;span class="p">)))))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">buffer-string&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">defun&lt;/span> &lt;span class="nv">ecf/org-export-preprocessor&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">backend&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">let&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">links&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">ecf/org-roam--backlinks-list&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">buffer-file-name&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">unless&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">string=&lt;/span> &lt;span class="nv">links&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">save-excursion&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">goto-char&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">point-max&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">insert&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">concat&lt;/span> &lt;span class="s">&amp;#34;\n* Backlinks\n&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">links&lt;/span>&lt;span class="p">)))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">;;; Export backlinks only for ox-hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">defun&lt;/span> &lt;span class="nv">ecf/org-export-preprocessor-hugo&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">backend&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">when&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">org-export-derived-backend-p&lt;/span> &lt;span class="nv">backend&lt;/span> &lt;span class="ss">&amp;#39;hugo&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nv">ecf/org-export-preprocessor&lt;/span> &lt;span class="ss">&amp;#39;hugo&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nv">add-hook&lt;/span> &lt;span class="ss">&amp;#39;org-export-before-processing-hook&lt;/span> &lt;span class="ss">&amp;#39;ecf/org-export-preprocessor-hugo&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Недостатки:
&lt;ul>
&lt;li>Использовался вызов внутреннего API org-roam. При этом он постоянно менялся.&lt;/li>
&lt;li>Расположение обратных ссылок жёстко кодируется.&lt;/li>
&lt;li>Обратные ссылки получались статичными: при изменении связей необходимо повторно экспортировать все связанные ноды.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="создание-обратных-ссылок-с-помощью-генератора-hugo">&lt;span class="section-num">3&lt;/span> Создание обратных ссылок с помощью генератора Hugo&lt;/h2>
&lt;ul>
&lt;li>Но, возможно, оптимальнее создавать их с помощью самого Hugo.&lt;/li>
&lt;/ul>
&lt;h3 id="общая-информация">&lt;span class="section-num">3.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Примеры создания обратных ссылок в Hugo:
&lt;ul>
&lt;li>&lt;a href="https://gabrielleearnshaw.medium.com/implementing-backlinks-in-a-hugo-website-e548d3d8f0e0" target="_blank" rel="noopener">https://gabrielleearnshaw.medium.com/implementing-backlinks-in-a-hugo-website-e548d3d8f0e0&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://seds.nl/notes/export_org_roam_backlinks_with_gohugo/" target="_blank" rel="noopener">https://seds.nl/notes/export_org_roam_backlinks_with_gohugo/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Есть тема для Hugo, основным свойством которой является поддержка обратных ссылок:
&lt;ul>
&lt;li>&lt;a href="https://github.com/kausalflow/connectome" target="_blank" rel="noopener">https://github.com/kausalflow/connectome&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для создания обратных ссылок необходимо поправить шаблон.&lt;/li>
&lt;li>Саму генерацию обратных ссылок будем выполнять с помощью механизма &lt;em>частичных шаблонов&lt;/em>:
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/templates/partials/" target="_blank" rel="noopener">https://gohugo.io/templates/partials/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Шаблон страницы будем делать на основе шаблона &lt;em>single page&lt;/em>:
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/templates/single-page-templates" target="_blank" rel="noopener">https://gohugo.io/templates/single-page-templates&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="каталоги-для-новой-структуры">&lt;span class="section-num">3.2&lt;/span> Каталоги для новой структуры&lt;/h3>
&lt;ul>
&lt;li>Добавим каталог &lt;code>layouts&lt;/code> в корень нашего сайта для создания собственных шаблонов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">layouts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── _default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── single.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── partials
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── backlinks.html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="шаблон-генерации-обратных-ссылок">&lt;span class="section-num">3.3&lt;/span> Шаблон генерации обратных ссылок&lt;/h3>
&lt;ul>
&lt;li>Зададим частичный шаблон &lt;code>layouts/partials/backlinks.html&lt;/code>, создающий список обратных ссылок и отображающий его:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{ $re := $.File.BaseFileName }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ $backlinks := slice }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ range .Site.AllPages }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ if and (findRE $re .RawContent) (not (eq $re .File.BaseFileName)) }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ $backlinks = $backlinks | append . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ end }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ end }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">hr&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ if gt (len $backlinks) 0 }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;bl-section&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h4&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Links to this note&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h4&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;backlinks&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ range $backlinks }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ .RelPermalink }}&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>{{ .Title }}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ end }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ else }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;bl-section&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h4&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>No notes link to this note&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h4&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ end }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="шаблон-страницы">&lt;span class="section-num">3.4&lt;/span> Шаблон страницы&lt;/h3>
&lt;ul>
&lt;li>Шаблон страницы лучше делать на основе используемой темы.&lt;/li>
&lt;li>Я использую шаблон &lt;em>Academic&lt;/em> (&lt;code>https://github.com/wowchemy/starter-hugo-academic&lt;/code>), основанную на модуле &lt;em>wowchemy&lt;/em> (&lt;code>https://github.com/wowchemy/wowchemy-hugo-modules.git&lt;/code>).
&lt;ul>
&lt;li>Скачиваю модуль:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/wowchemy/wowchemy-hugo-modules.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Копирую файл &lt;code>wowchemy-hugo-modules/wowchemy/layouts/_default/single.html&lt;/code> в локальный каталог. Он имеет следующий вид (зависит от темы):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{- define &amp;#34;main&amp;#34; -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">article&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;page_header&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article-container&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article-style&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ .Content }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;page_footer&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">article&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- end -}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавляю использование частичного шаблона обратных ссылок:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-diff" data-lang="diff">&lt;span class="line">&lt;span class="cl">&lt;span class="gd">--- orig/single.html 2021-06-02 18:12:17.337530907 +0300
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gd">&lt;/span>&lt;span class="gi">+++ single.html 2021-06-02 16:15:08.178764024 +0300
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">&lt;/span>&lt;span class="gu">@@ -8,6 +8,7 @@
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gu">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;div class=&amp;#34;article-style&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ .Content }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">​+ {{ partial &amp;#34;backlinks&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/div&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;page_footer&amp;#34; . }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Получаю следующий файл &lt;code>layouts/_default/single.html&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{- define &amp;#34;main&amp;#34; -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">article&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;page_header&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article-container&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;article-style&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ .Content }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;backlinks&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ partial &amp;#34;page_footer&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">article&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- end -}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="исправление-обратных-ссылок">&lt;span class="section-num">4&lt;/span> Исправление обратных ссылок&lt;/h2>
&lt;ul>
&lt;li>При экспорте &lt;em>ox-hugo&lt;/em> экспортирует ссылки как указатели на имя файла.&lt;/li>
&lt;li>Имя файла в каталоге &lt;em>org-roam&lt;/em> может отличаться от имени, которое имеет файл в каталоге для сайта.&lt;/li>
&lt;li>Имя для сайта задаётся полем &lt;code>#+EXPORT_FILE_NAME:&lt;/code>.&lt;/li>
&lt;li>Предлагается после экспорта заменять ссылки на файлы на внутренние ссылки Hugo типа &lt;code>{{&amp;lt; relref имя_файла &amp;gt;}}&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2020/11/26/hugo-markdown/">Синтаксис Markdown для генератора сайтов Hugo&lt;/a>).&lt;/li>
&lt;li>Имя файла предполагается брать из поля &lt;code>#+EXPORT_FILE_NAME:&lt;/code>.&lt;/li>
&lt;li>Для этого был написан скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="ch">#!/usr/bin/env python3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># -*- coding: utf-8 -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># org-roam-links&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">sys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">re&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">orgroamdir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;~/work/org/notes/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">find_md_links&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;Returns dict of links in markdown:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#39;regular&amp;#39;: [foo](some.url)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#39;footnotes&amp;#39;: [foo][3]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> [3]: some.url
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://stackoverflow.com/a/30738268/2755116&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">INLINE_LINK_RE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;\[([^\]]+)\]\(([^)]+)\)&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">FOOTNOTE_LINK_TEXT_RE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;\[([^\]]+)\]\[(\d+)\]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">FOOTNOTE_LINK_URL_RE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;\[(\d+)\]:\s+(\S+)&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">links&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">INLINE_LINK_RE&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">footnote_links&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">dict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">FOOTNOTE_LINK_TEXT_RE&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">footnote_urls&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">dict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">FOOTNOTE_LINK_URL_RE&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">footnotes_linking&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">footnote_links&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">footnotes_linking&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">footnote_links&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">footnote_urls&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">footnote_links&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="p">]]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;regular&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">links&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;footnotes&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">footnotes_linking&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">replace_md_links&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;Replace links url to f(url)&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">links&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">find_md_links&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">newmd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">links&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;regular&amp;#39;&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">newmd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">newmd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">links&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;footnotes&amp;#39;&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">newmd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">newmd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">newmd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;__main__&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filename&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">argv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fin&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filename&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;rt&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filetext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fin&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">export_file_name_re&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;#\+EXPORT_FILE_NAME:\s+\S+&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">IGNORECASE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">relref_re&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s2">&amp;#34;{{&amp;lt; relref &lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">(.+)&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2"> &amp;gt;}}&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">links&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">find_md_links&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filetext&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">mdlink&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">links&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;regular&amp;#39;&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fulllink&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mdlink&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">isrelref&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">relref_re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="k">match&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fulllink&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">isrelref&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">linkpath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">isrelref&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drop extention&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">linkpath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">splitext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fulllink&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># add extention&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">md2org&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">linkpath&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;.org&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">orgfile&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">expanduser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">orgroamdir&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">md2org&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">orgfile&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">orgfiletext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">orgfile&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">export_file_name_text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">export_file_name_re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">orgfiletext&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">export_file_name_link&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">export_file_name_text&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hugolink&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;{{&amp;lt; relref &lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">export_file_name_link&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2"> &amp;gt;}}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">isrelref&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filetext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">filetext&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;{{&amp;lt; relref &lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">linkpath&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2"> &amp;gt;}}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">hugolink&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filetext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">filetext&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">linkpath&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;.md&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">hugolink&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fin&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fin&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filename&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;wt&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fin&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filetext&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fin&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запуск скрипта осуществляется через &lt;code>Makefile&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-makefile" data-lang="makefile">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">all&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">fixlinks&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> find . -name &lt;span class="s2">&amp;#34;*.md&amp;#34;&lt;/span> -newer .fixlinks -exec ./org-roam-links &lt;span class="s1">&amp;#39;{}&amp;#39;&lt;/span> &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> touch .fixlinks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">clean&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> find . -name &lt;span class="s2">&amp;#34;*~&amp;#34;&lt;/span> -delete
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Запуск осуществляется следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">make fixlinks clean
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скрипты помещаются в каталог &lt;code>content/&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>Ограничения ёмкости регистров TeX'а</title><link>https://yamadharma.github.io/ru/post/2021/05/28/limitations-capacity-tex-registers/</link><pubDate>Fri, 28 May 2021 10:47:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/28/limitations-capacity-tex-registers/</guid><description>&lt;ul>
&lt;li>TeX &amp;mdash; достаточно старая программа. Он разрабатывался ещё в те времена, когда в моде была обратная совместимость (legacy). Он должен был одинаково работать при смене версии программного обеспечения.&lt;/li>
&lt;li>TeX является мультиплатформенной программой. Он должен одинаково работать на разном оборудовании.&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общие-сведения">&lt;span class="section-num">1&lt;/span> Общие сведения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файлы-для-правки">&lt;span class="section-num">2&lt;/span> Файлы для правки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#tex-live">&lt;span class="section-num">2.1&lt;/span> TeX Live&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#ошибки">&lt;span class="section-num">3&lt;/span> Ошибки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#количество-открытых-файлов">&lt;span class="section-num">3.1&lt;/span> Количество открытых файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общие-сведения">&lt;span class="section-num">1&lt;/span> Общие сведения&lt;/h2>
&lt;ul>
&lt;li>В TeX есть набор ограничений, которые иногда мешают скомпилировать TeX-файл.&lt;/li>
&lt;li>Эти ограничения вполне адекватны.&lt;/li>
&lt;li>Возникновение таких проблем могут указывать на ошибку в файле.&lt;/li>
&lt;li>Лучше всего внести исправления в исходный файл, чтобы подобные ошибки не возникали.&lt;/li>
&lt;li>Но иногда без правки ограничений не обойтись.&lt;/li>
&lt;li>Многие ограничения сняты в реализациях &lt;code>XeTeX&lt;/code> и &lt;code>LuaTeX&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="файлы-для-правки">&lt;span class="section-num">2&lt;/span> Файлы для правки&lt;/h2>
&lt;h3 id="tex-live">&lt;span class="section-num">2.1&lt;/span> TeX Live&lt;/h3>
&lt;ul>
&lt;li>Рассматривается дистрибутив, установленный установщиком TeX Live (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/23/install-texlive/">Установка TeX Live&lt;/a>).&lt;/li>
&lt;li>Системный уровень
&lt;ul>
&lt;li>Все команды выполняются с полномочиями администратора:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При обычной установке настройки делаются в каталоге
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/local/texlive/texmf-local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Локальные настройки для форматов TeX находятся в файле
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/usr/local/texlive/texmf-local/web2c/texmf.cnf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>Этот каталог задаётся переменной
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">TEXMFLOCAL
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После исправления файлов следует перегенерить форматы TeX:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">fmtutil-sys --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пользовательский уровень
&lt;ul>
&lt;li>Все операции выполняются с полномочиями пользователя.&lt;/li>
&lt;li>При обычной установке настройки делаются в каталоге
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">~/texmf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>Этот каталог задаётся переменной
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">TEXMFHOME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройки пользователя для форматов TeX находятся в файле
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">~/texmf/web2c/texmf.cnf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>После исправления файлов следует перегенерить форматы TeX:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">fmtutil-user --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="ошибки">&lt;span class="section-num">3&lt;/span> Ошибки&lt;/h2>
&lt;h3 id="количество-открытых-файлов">&lt;span class="section-num">3.1&lt;/span> Количество открытых файлов&lt;/h3>
&lt;ul>
&lt;li>При компиляции ограничено количество открытых одновременно файлов.&lt;/li>
&lt;li>Ошибка выглядит следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">! TeX capacity exceeded, sorry &lt;span class="o">[&lt;/span>text input &lt;span class="nv">levels&lt;/span>&lt;span class="o">=&lt;/span>15&lt;span class="o">]&lt;/span>.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Необходимо увеличить количество открытых одновременно файлов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">%% web2c/texmf.cnf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">%% simultaneous input files and error insertions, also applies to MetaPost
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">max_in_open = 50
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Здесь мы увеличили количество одновременно открытых файлов до 50.&lt;/li>
&lt;/ul></description></item><item><title>Замена Centos</title><link>https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/</link><pubDate>Tue, 25 May 2021 15:22:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/</guid><description>&lt;p>После серии покупок (Centos -&amp;gt; RedHat -&amp;gt; IBM) дистрибутив &lt;em>Centos&lt;/em>, представляющий из себя свободную реализацию &lt;em>RedHat&lt;/em>, приказал долго жить.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#предыстория">&lt;span class="section-num">1&lt;/span> Предыстория&lt;/a>&lt;/li>
&lt;li>&lt;a href="#прекращение-публикации-исходных-текстов-redhat">&lt;span class="section-num">2&lt;/span> Прекращение публикации исходных текстов RedHat&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#openela">&lt;span class="section-num">2.1&lt;/span> OpenELA&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#альтернативы-centos">&lt;span class="section-num">3&lt;/span> Альтернативы Centos&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#условные-альтернативы">&lt;span class="section-num">3.1&lt;/span> Условные альтернативы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#rhel">&lt;span class="section-num">3.1.1&lt;/span> RHEL&lt;/a>&lt;/li>
&lt;li>&lt;a href="#centos-stream">&lt;span class="section-num">3.1.2&lt;/span> CentOS Stream&lt;/a>&lt;/li>
&lt;li>&lt;a href="#oracle-linux">&lt;span class="section-num">3.1.3&lt;/span> Oracle Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vzlinux">&lt;span class="section-num">3.1.4&lt;/span> VzLinux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#suse-liberty-linux">&lt;span class="section-num">3.1.5&lt;/span> SUSE Liberty Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#полные-альтернативы">&lt;span class="section-num">3.2&lt;/span> Полные альтернативы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#rocky-linux">&lt;span class="section-num">3.2.1&lt;/span> Rocky Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#almalinux">&lt;span class="section-num">3.2.2&lt;/span> Almalinux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#что-выбрать">&lt;span class="section-num">4&lt;/span> Что выбрать&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="предыстория">&lt;span class="section-num">1&lt;/span> Предыстория&lt;/h2>
&lt;ul>
&lt;li>Red Hat купила Centos.&lt;/li>
&lt;li>IBM купила RedHat.&lt;/li>
&lt;li>Компания RedHat декларировала завершение разработки и поддержки &lt;em>CentOS&lt;/em> в конце 2021 года и переход на поддержку непрерывного релиза &lt;em>CentOS Stream&lt;/em>.
&lt;ul>
&lt;li>&lt;a href="https://blog.centos.org/2020/12/future-is-centos-stream/" target="_blank" rel="noopener">https://blog.centos.org/2020/12/future-is-centos-stream/&lt;/a>.&lt;/li>
&lt;li>&lt;del>&lt;a href="https://centos.rip/" target="_blank" rel="noopener">https://centos.rip/&lt;/a> (издевательский сайт)&lt;/del>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="прекращение-публикации-исходных-текстов-redhat">&lt;span class="section-num">2&lt;/span> Прекращение публикации исходных текстов RedHat&lt;/h2>
&lt;ul>
&lt;li>&lt;/li>
&lt;li>&lt;a href="https://www.redhat.com/en/blog/furthering-evolution-centos-stream" target="_blank" rel="noopener">https://www.redhat.com/en/blog/furthering-evolution-centos-stream&lt;/a>&lt;/li>
&lt;li>Компания Red Hat объявила об изменении подхода к публикации исходных текстов пакетов дистрибутива Red Hat Enterprise Linux и прекращении публикации кода пакетов в Git-репозитории &lt;a href="https://git.centos.org/" target="_blank" rel="noopener">https://git.centos.org/&lt;/a>.&lt;/li>
&lt;li>Единственным публично доступным источником исходных текстов пакетов RHEL теперь будет репозиторий CentOS Stream.&lt;/li>
&lt;li>Для клиентов и партнёров Red Hat будет оставлена возможность загрузки кода пакетов, соответствующих релизам RHEL, через клиентский портал компании, доступ к которому требует наличия учётной записи.&lt;/li>
&lt;li>В &lt;a href="https://git.centos.org/" target="_blank" rel="noopener">https://git.centos.org/&lt;/a> публиковались исходные тексты пакетов уже выпущенных релизов, а в репозитории CentOS Stream развивается код пакетов для ещё не выпущенных релизов.&lt;/li>
&lt;li>Из этого репозиторий альтернативные реализации брали исходные коды пакетов для сборки.&lt;/li>
&lt;li>AlmaLinux и Rocky Linux опубликовали заявления c планом дальнейших действий.&lt;/li>
&lt;li>AlmaLinux
&lt;ul>
&lt;li>&lt;a href="https://almalinux.org/blog/impact-of-rhel-changes/" target="_blank" rel="noopener">https://almalinux.org/blog/impact-of-rhel-changes/&lt;/a>&lt;/li>
&lt;li>Отслеживание изменений из репозитория CentOS Stream, использование репозитория Oracle Linux.&lt;/li>
&lt;li>
&lt;ul>
&lt;li>&lt;a href="https://almalinux.org/blog/future-of-almalinux/" target="_blank" rel="noopener">https://almalinux.org/blog/future-of-almalinux/&lt;/a>&lt;/li>
&lt;li>Проект AlmaLinux объявил об изменении стратегии развития&lt;/li>
&lt;li>Дистрибутив больше не будет полностью клонировать Red Hat Enterprise Linux и станет допускать наличие незначительных расхождений в поведении.&lt;/li>
&lt;li>Сохранит бинарную совместимость на уровне ABI.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Rocky Linux
&lt;ul>
&lt;li>&lt;a href="https://rockylinux.org/news/2023-06-22-press-release/" target="_blank" rel="noopener">https://rockylinux.org/news/2023-06-22-press-release/&lt;/a>&lt;/li>
&lt;li>Создании дополнительного репозитория &lt;a href="https://git.rockylinux.org/staging/src-rhel/rpms" target="_blank" rel="noopener">https://git.rockylinux.org/staging/src-rhel/rpms&lt;/a>, отслеживании рассинхронизированных обновлений.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="openela">&lt;span class="section-num">2.1&lt;/span> OpenELA&lt;/h3>
&lt;ul>
&lt;li>&lt;span class="timestamp-wrapper">&lt;span class="timestamp">[2023-11-02 Чт]&lt;/span>&lt;/span>Ассоциация OpenELA (Open Enterprise Linux Association)создала репозиторий OpenELA для замены репозитория &lt;code>git.centos.org&lt;/code>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/openela-main" target="_blank" rel="noopener">https://github.com/openela-main&lt;/a>&lt;/li>
&lt;li>Сообщение о создании репозитория: &lt;a href="https://openela.org/news/2023.11.02-governance_and_code_availability/" target="_blank" rel="noopener">https://openela.org/news/2023.11.02-governance_and_code_availability/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="альтернативы-centos">&lt;span class="section-num">3&lt;/span> Альтернативы Centos&lt;/h2>
&lt;h3 id="условные-альтернативы">&lt;span class="section-num">3.1&lt;/span> Условные альтернативы&lt;/h3>
&lt;ul>
&lt;li>Данные дистрибутивы можно считать либо условными, либо временными альтернативами.&lt;/li>
&lt;/ul>
&lt;h4 id="rhel">&lt;span class="section-num">3.1.1&lt;/span> RHEL&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.redhat.com/" target="_blank" rel="noopener">https://www.redhat.com/&lt;/a>&lt;/li>
&lt;li>Собственно, это и есть первичный дистрибутив, который копируют.&lt;/li>
&lt;li>Отличается надёжностью, используется для корпоративных систем.&lt;/li>
&lt;li>Большой значение имеют дополнительные продукты: Satellite, Openstack, RHEV, Pacemaker, Gluster, Ceph, Openshift.&lt;/li>
&lt;li>&lt;span class="timestamp-wrapper">&lt;span class="timestamp">[2022-03-08 Вт]&lt;/span>&lt;/span>Компания Red Hat прекратила работу с организациями из России и Белоруссии (&lt;a href="https://www.redhat.com/en/blog/red-hats-response-war-ukraine" target="_blank" rel="noopener">https://www.redhat.com/en/blog/red-hats-response-war-ukraine&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Распространение&lt;/p>
&lt;ul>
&lt;li>В качестве компенсации за прекращение распространения CentOS предлагает программу для разработчиков (&lt;a href="https://developers.redhat.com/products/rhel/download" target="_blank" rel="noopener">Red Hat Developer&lt;/a>).&lt;/li>
&lt;li>В рамках этой программы можно установить 16 хостов.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="3">
&lt;li>
&lt;p>Миграция с Centos8&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Репозиторий скриптов: &lt;a href="https://github.com/oamg/convert2rhel/" target="_blank" rel="noopener">https://github.com/oamg/convert2rhel/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Документация: &lt;a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/converting_from_an_rpm-based_linux_distribution_to_rhel/index" target="_blank" rel="noopener">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/converting_from_an_rpm-based_linux_distribution_to_rhel/index&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Обновить дистрибутив:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf update -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установить репозиторий:&lt;/p>
&lt;ul>
&lt;li>Загрузите GPG-ключ Red Hat:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -o /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release https://www.redhat.com/security/data/fd431d51.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Загрузите SSL-сертификат:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl --create-dirs -o /etc/rhsm/ca/redhat-uep.pem https://ftp.redhat.com/redhat/convert2rhel/redhat-uep.pem
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите файл репозитория &lt;code>Convert2RHEL&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -o /etc/yum.repos.d/convert2rhel.repo https://ftp.redhat.com/redhat/convert2rhel/version_number/convert2rhel.repo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Установите скрипт:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yum -y install convert2rhel
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Провести миграцию:&lt;/p>
&lt;ul>
&lt;li>С идентификатором организации и ключом активации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">convert2rhel --org organization_ID --activationkey activation_key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>С именем пользователя, паролем и идентификатором пула:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">convert2rhel --username username --password password --pool pool_ID
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="centos-stream">&lt;span class="section-num">3.1.2&lt;/span> CentOS Stream&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.centos.org/" target="_blank" rel="noopener">https://www.centos.org/&lt;/a>&lt;/li>
&lt;li>Это rolling release.&lt;/li>
&lt;li>Теряется основное преимущество &amp;mdash; стабильность.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Миграция на CentOS Stream&lt;/p>
&lt;ul>
&lt;li>Подключаем репозиторий CentOS Stream:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install centos-release-stream
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Указываем новый репозиторий в качестве репозитория по умолчанию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf swap centos-&lt;span class="o">{&lt;/span>linux,stream&lt;span class="o">}&lt;/span>-repos
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Синхронизируем установленные пакеты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf distro-sync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="oracle-linux">&lt;span class="section-num">3.1.3&lt;/span> Oracle Linux&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.oracle.com/linux/" target="_blank" rel="noopener">https://www.oracle.com/linux/&lt;/a>&lt;/li>
&lt;li>Особенность &amp;mdash; собственное ядро &lt;em>Unbreakable Enterprise Kernel&lt;/em>.&lt;/li>
&lt;li>Нет доверия Ораклу. Они и дистрибутив сделали открытым в пику RedHat, чтобы пользователей перетянуть. В любой момент могут доступ прикрыть.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Миграция с Centos8&lt;/p>
&lt;ul>
&lt;li>Репозиторий скриптов: &lt;a href="https://github.com/oracle/centos2ol" target="_blank" rel="noopener">https://github.com/oracle/centos2ol&lt;/a>&lt;/li>
&lt;li>Обновить дистрибутив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf update -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачать скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/oracle/centos2ol.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Провести миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo bash centos2ol.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="vzlinux">&lt;span class="section-num">3.1.4&lt;/span> VzLinux&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://vzlinux.org/" target="_blank" rel="noopener">https://vzlinux.org/&lt;/a>&lt;/li>
&lt;li>Разрабатывает компания Virtuozzo (бывшее подразделение компании Parallels).&lt;/li>
&lt;li>Специализация: разработка серверного ПО для виртуализации на основе открытых проектов.&lt;/li>
&lt;li>Для них это побочное занятие.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Миграция с Centos8&lt;/p>
&lt;ul>
&lt;li>Репозиторий скриптов: &lt;a href="https://github.com/vzlinux/vzdeploy" target="_blank" rel="noopener">https://github.com/vzlinux/vzdeploy&lt;/a>&lt;/li>
&lt;li>Обновить дистрибутив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf update -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачать скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/vzlinux/vzdeploy.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Провести миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo bash vzdeploy8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="suse-liberty-linux">&lt;span class="section-num">3.1.5&lt;/span> SUSE Liberty Linux&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://www.suse.com/products/suse-liberty-linux/" target="_blank" rel="noopener">https://www.suse.com/products/suse-liberty-linux/&lt;/a>&lt;/li>
&lt;li>Пакеты пространства пользователя в SUSE Liberty Linux сформировано путём пересборки исходных SRPM-пакетов из RHEL 8.5.&lt;/li>
&lt;li>Пакет с ядром заменён на собственный вариант, основанный на ветке ядра Linux 5.3 и созданный путём пересборки пакета с ядром из дистрибутива SUSE Linux Enterprise 15 SP3.&lt;/li>
&lt;li>Дистрибутив формируется только для архитектуры x86-64.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="полные-альтернативы">&lt;span class="section-num">3.2&lt;/span> Полные альтернативы&lt;/h3>
&lt;h4 id="rocky-linux">&lt;span class="section-num">3.2.1&lt;/span> Rocky Linux&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://rockylinux.org/" target="_blank" rel="noopener">https://rockylinux.org/&lt;/a>&lt;/li>
&lt;li>Руководитель: Грегори Курцер (Gregory Kurtzer), основател CentOS.&lt;/li>
&lt;li>Для развития продуктов и поддержки сообщества разработчиков создана коммерческая компания Ctrl IQ.&lt;/li>
&lt;li>В финансировании проекта участвуют компании MontaVista, 45Drives, OpenDrives и Amazon Web Services.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Миграция с Centos8&lt;/p>
&lt;ul>
&lt;li>Репозиторий скриптов: &lt;a href="https://github.com/rocky-linux/rocky-tools" target="_blank" rel="noopener">https://github.com/rocky-linux/rocky-tools&lt;/a>&lt;/li>
&lt;li>Обновить дистрибутив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf update -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачать скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/rocky-linux/rocky-tools.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Провести миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo bash migrate2rocky.sh -r
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="almalinux">&lt;span class="section-num">3.2.2&lt;/span> Almalinux&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Описание дистрибутива&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://almalinux.org/" target="_blank" rel="noopener">https://almalinux.org/&lt;/a>&lt;/li>
&lt;li>Основан компанией CloudLinux.&lt;/li>
&lt;li>Проект курирует отдельная некоммерческая организация AlmaLinux OS Foundation.&lt;/li>
&lt;li>Слишком быстро выходят сборки (сразу после выпуска RedHat).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Зачем делается этот дистрибутив&lt;/p>
&lt;ul>
&lt;li>в CloudLinux осознали, что CentOS сам освобождает место под солнцем, а значит его можно попытаться занять;&lt;/li>
&lt;li>CloudLinux давно уже пересобирали RHEL/CentOS, есть опыт и своя сборочная инфраструктура;&lt;/li>
&lt;li>есть технология KernelCare &amp;mdash; обновления ядер без перезагрузки;&lt;/li>
&lt;li>стали срочно делать свою пересборку CentOS, доделывать сборочную инфраструктуру;&lt;/li>
&lt;li>купили железо для сборок под новые архитектуры (например, arm), под которые CloudLinux ранее не собирался;&lt;/li>
&lt;li>CloudLinux проверяет ABI своих пакетов на соответствие ABI пакетов из RHEL;&lt;/li>
&lt;li>хотят продвигать свои идеи в RHEL через CentOS Stream и апстримы.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="3">
&lt;li>
&lt;p>Миграция с Centos8&lt;/p>
&lt;ul>
&lt;li>Репозиторий скриптов: &lt;a href="https://github.com/AlmaLinux/almalinux-deploy" target="_blank" rel="noopener">https://github.com/AlmaLinux/almalinux-deploy&lt;/a>&lt;/li>
&lt;li>Обновить дистрибутив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo dnf update -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скачать скрипт для обновления:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -O https://raw.githubusercontent.com/AlmaLinux/almalinux-deploy/master/almalinux-deploy.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Провести миграцию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo bash almalinux-deploy.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="что-выбрать">&lt;span class="section-num">4&lt;/span> Что выбрать&lt;/h2>
&lt;ul>
&lt;li>Наблюдается паритет у Rocky Linux и Almalinux.&lt;/li>
&lt;li>На данный момент склоняюсь более к Rocky Linux.&lt;/li>
&lt;/ul></description></item><item><title>Комментирование для статических сайтов</title><link>https://yamadharma.github.io/ru/post/2021/05/25/commenting-static-sites/</link><pubDate>Tue, 25 May 2021 11:46:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/25/commenting-static-sites/</guid><description>&lt;ul>
&lt;li>Статические сайты являются системами без сохранения состояния.&lt;/li>
&lt;li>Поэтому не могут обрабатывать изменяющиеся данные, такие как учётные записи пользователей, комментарии и т. д.&lt;/li>
&lt;li>Для этого требуются некие внешние базы данных, взаимодействующих со статическим сайтом.&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#поддержка-комментариев-в-сайтах-созданных-hugo">&lt;span class="section-num">1&lt;/span> Поддержка комментариев в сайтах, созданных Hugo&lt;/a>&lt;/li>
&lt;li>&lt;a href="#disqus-стандарт-de-facto">&lt;span class="section-num">2&lt;/span> Disqus - стандарт de facto&lt;/a>&lt;/li>
&lt;li>&lt;a href="#альтернативы-disqus">&lt;span class="section-num">3&lt;/span> Альтернативы Disqus&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#commento">&lt;span class="section-num">3.1&lt;/span> Commento&lt;/a>&lt;/li>
&lt;li>&lt;a href="#remark42">&lt;span class="section-num">3.2&lt;/span> Remark42&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="поддержка-комментариев-в-сайтах-созданных-hugo">&lt;span class="section-num">1&lt;/span> Поддержка комментариев в сайтах, созданных Hugo&lt;/h2>
&lt;p>По умолчанию Hugo может использовать для комментариев сервисы &lt;a href="https://disqus.com/" target="_blank" rel="noopener">Disqus&lt;/a> и &lt;a href="https://commento.io/" target="_blank" rel="noopener">Commento&lt;/a>.&lt;/p>
&lt;h2 id="disqus-стандарт-de-facto">&lt;span class="section-num">2&lt;/span> Disqus - стандарт de facto&lt;/h2>
&lt;blockquote>
&lt;p>Если Вы не платите за товар, то Вы и есть товар.&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;a href="https://disqus.com/" target="_blank" rel="noopener">https://disqus.com/&lt;/a>&lt;/li>
&lt;li>Практически стандартная платформа для комментариев.&lt;/li>
&lt;li>Есть бесплатные и платные планы.
&lt;ul>
&lt;li>&lt;a href="https://disqus.com/pricing/" target="_blank" rel="noopener">https://disqus.com/pricing/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Есть информация, что в 2017 году Discuss приобрела компания &lt;a href="https://zetaglobal.com/" target="_blank" rel="noopener">Zeta Global&lt;/a>. Основная деятельность компании &amp;mdash; продажа маркетинговых данных.&lt;/li>
&lt;li>Недостатки:
&lt;ul>
&lt;li>Тяжёлый виджет.&lt;/li>
&lt;li>Большое количество телеметрии:
&lt;ul>
&lt;li>&lt;a href="http://donw.io/post/github-comments/" target="_blank" rel="noopener">http://donw.io/post/github-comments/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://habr.com/ru/post/327424/" target="_blank" rel="noopener">https://habr.com/ru/post/327424/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Нет поддержки markdown.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="альтернативы-disqus">&lt;span class="section-num">3&lt;/span> Альтернативы Disqus&lt;/h2>
&lt;h3 id="commento">&lt;span class="section-num">3.1&lt;/span> Commento&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://commento.io/" target="_blank" rel="noopener">https://commento.io/&lt;/a>&lt;/li>
&lt;li>Для использования как сервиса существует только платный план.&lt;/li>
&lt;li>Исходный код открыт:
&lt;ul>
&lt;li>&lt;a href="https://gitlab.com/commento" target="_blank" rel="noopener">https://gitlab.com/commento&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Можно расположить на своём хостинге:
&lt;ul>
&lt;li>&lt;a href="https://docs.commento.io/getting-started/self-hosting/" target="_blank" rel="noopener">https://docs.commento.io/getting-started/self-hosting/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Особенности:
&lt;ul>
&lt;li>Импорт из Disqus.&lt;/li>
&lt;li>Голосование (upvote/downvote) на карточке комментария.&lt;/li>
&lt;li>Закрепление комментариев в начале треда.&lt;/li>
&lt;li>Модерация с верификацией, удалением сообщений, банами и ограничением частоты комментирования.&lt;/li>
&lt;li>Определение спама.&lt;/li>
&lt;li>Настраиваемые уведомления (почта).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="remark42">&lt;span class="section-num">3.2&lt;/span> Remark42&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://remark42.com/" target="_blank" rel="noopener">https://remark42.com/&lt;/a>&lt;/li>
&lt;li>Демонстрация работы:
&lt;ul>
&lt;li>&lt;a href="https://remark42.com/demo/" target="_blank" rel="noopener">https://remark42.com/demo/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Исходный код открыт:
&lt;ul>
&lt;li>&lt;a href="https://github.com/umputun/remark42" target="_blank" rel="noopener">https://github.com/umputun/remark42&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Нет сервиса, только хостинг на своём оборудовании.&lt;/li>
&lt;li>Особенности:
&lt;ul>
&lt;li>Импорт из Disqus.&lt;/li>
&lt;li>Голосование (upvote/downvote) на карточке комментария.&lt;/li>
&lt;li>Логин по OAuth, по почте.&lt;/li>
&lt;li>Модерация с верификацией, удалением сообщений и банами.&lt;/li>
&lt;li>Загрузка картинок.&lt;/li>
&lt;li>Сортировка комментариев.&lt;/li>
&lt;li>Настраиваемые уведомления (телеграм, RSS).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для Hugo надо настраивать отдельно:
&lt;ul>
&lt;li>&lt;a href="https://blog.lasall.dev/post/hugo-and-comments-with-remark42/" target="_blank" rel="noopener">https://blog.lasall.dev/post/hugo-and-comments-with-remark42/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Перенос Linux на btrfs</title><link>https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/</link><pubDate>Fri, 21 May 2021 20:38:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/</guid><description>&lt;p>Перенос Gentoo Linux с одного диска на другой. На новом диске делается система btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#исходное-состояние-системы">&lt;span class="section-num">1&lt;/span> Исходное состояние системы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#система-на-lvm">&lt;span class="section-num">1.1&lt;/span> Система на LVM&lt;/a>&lt;/li>
&lt;li>&lt;a href="#система-на-btrfs">&lt;span class="section-num">1.2&lt;/span> Система на btrfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#разбиение-диска">&lt;span class="section-num">2&lt;/span> Разбиение диска&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#выделенная-boot-партиция">&lt;span class="section-num">2.1&lt;/span> Выделенная boot-партиция&lt;/a>&lt;/li>
&lt;li>&lt;a href="#все-разделы-на-файловой-системе-btrfs">&lt;span class="section-num">2.2&lt;/span> Все разделы на файловой системе btrfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подготовка-раздела-с-btrfs">&lt;span class="section-num">3&lt;/span> Подготовка раздела с btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копирование-существующих-файловых-систем">&lt;span class="section-num">4&lt;/span> Копирование существующих файловых систем&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#система-на-lvm">&lt;span class="section-num">4.1&lt;/span> Система на LVM&lt;/a>&lt;/li>
&lt;li>&lt;a href="#система-на-btrfs">&lt;span class="section-num">4.2&lt;/span> Система на btrfs&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подготовка-к-копированию">&lt;span class="section-num">4.2.1&lt;/span> Подготовка к копированию&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копирование-основных-файловых-систем">&lt;span class="section-num">4.2.2&lt;/span> Копирование основных файловых систем&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копируем-portage">&lt;span class="section-num">4.2.3&lt;/span> Копируем portage&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копируем-системы-с-отключением-cow">&lt;span class="section-num">4.2.4&lt;/span> Копируем системы с отключением CoW&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-загрузчика">&lt;span class="section-num">5&lt;/span> Установка загрузчика&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-монтирования-fstab">&lt;span class="section-num">6&lt;/span> Файл монтирования fstab&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-подкачки-на-файловой-системе-btrfs">&lt;span class="section-num">7&lt;/span> Файл подкачки на файловой системе btrfs&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подготовка-к-созданию-файла-подкачки">&lt;span class="section-num">7.1&lt;/span> Подготовка к созданию файла подкачки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-файла-подкачки">&lt;span class="section-num">7.2&lt;/span> Создание файла подкачки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#старый-подход">&lt;span class="section-num">7.2.1&lt;/span> Старый подход&lt;/a>&lt;/li>
&lt;li>&lt;a href="#новый-подход">&lt;span class="section-num">7.2.2&lt;/span> Новый подход&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#активация-файла-подкачки">&lt;span class="section-num">7.3&lt;/span> Активация файла подкачки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="исходное-состояние-системы">&lt;span class="section-num">1&lt;/span> Исходное состояние системы&lt;/h2>
&lt;ul>
&lt;li>Переносил несколько вариантов исходных систем.&lt;/li>
&lt;/ul>
&lt;h3 id="система-на-lvm">&lt;span class="section-num">1.1&lt;/span> Система на LVM&lt;/h3>
&lt;ul>
&lt;li>Исходно система установлена на LVM:
&lt;ul>
&lt;li>&lt;code>/dev/sda1&lt;/code>: &lt;code>/boot/EFI&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/sda2&lt;/code>: &lt;code>/boot&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/root&lt;/code>: &lt;code>/&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/var&lt;/code>: &lt;code>/var&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/var_tmp&lt;/code>: &lt;code>/var/tmp&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/vm&lt;/code>: &lt;code>/var/vm&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/portage&lt;/code>: &lt;code>/usr/portage&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/portage_local&lt;/code>: &lt;code>/usr/local/share/portage&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/portage_com&lt;/code>: &lt;code>/com/lib/portage&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/home&lt;/code>: &lt;code>/home&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="система-на-btrfs">&lt;span class="section-num">1.2&lt;/span> Система на btrfs&lt;/h3>
&lt;ul>
&lt;li>Система на btrfs:
&lt;ul>
&lt;li>&lt;code>/dev/sda1&lt;/code>: &lt;code>/boot/EFI&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/sda2&lt;/code>: &lt;code>/boot&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/sda3&lt;/code>: &lt;code>swap&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/sda4&lt;/code>: партиция с файловой системой btrfs.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="разбиение-диска">&lt;span class="section-num">2&lt;/span> Разбиение диска&lt;/h2>
&lt;ul>
&lt;li>Установим тип разбиения в GPT.&lt;/li>
&lt;/ul>
&lt;h3 id="выделенная-boot-партиция">&lt;span class="section-num">2.1&lt;/span> Выделенная boot-партиция&lt;/h3>
&lt;ul>
&lt;li>Разобьём на партиции:
&lt;ul>
&lt;li>p1 &amp;mdash; 512M, для &lt;code>EFI&lt;/code>.&lt;/li>
&lt;li>p2 &amp;mdash; 500&amp;ndash;1024M, для &lt;code>/boot&lt;/code>.&lt;/li>
&lt;li>p3 &amp;mdash; двойная оперативная память, для &lt;code>swap&lt;/code>.
&lt;ul>
&lt;li>Также можно разместить файл подкачки на &lt;code>btrfs&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/05/20/btrfs-swap-file/">Файл подкачки на btrfs&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>p4 &amp;mdash; всё остальное для &lt;code>btrfs&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Создадим файловые системы:
&lt;ul>
&lt;li>p1 (&lt;code>EFI&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkfs.vfat -F32 -n EFI /dev/sdc1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>p2 (&lt;code>/boot&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkfs.ext4 -L boot /dev/sdc2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>p3 (&lt;code>swap&lt;/code> в случае отдельной партиции):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkswap -L swap /dev/sdc3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>p4 (&lt;code>btrfs&lt;/code>)
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkfs.btrfs /dev/sdc4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="все-разделы-на-файловой-системе-btrfs">&lt;span class="section-num">2.2&lt;/span> Все разделы на файловой системе btrfs&lt;/h3>
&lt;ul>
&lt;li>Разобьём на партиции:
&lt;ul>
&lt;li>p1 &amp;mdash; 1024M, для &lt;code>EFI&lt;/code>.&lt;/li>
&lt;li>Файл подкачки на &lt;code>btrfs&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/05/20/btrfs-swap-file/">Файл подкачки на btrfs&lt;/a>).&lt;/li>
&lt;li>p4 &amp;mdash; всё остальное для &lt;code>btrfs&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Разобьём диск:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sgdisk -n 0:0:+1024M -t 0:ef00 -c 0:EFI /dev/sdc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sgdisk -n 0:0:0 -t 0:8300 -c 0:gentoo /dev/sdc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим файловые системы:
&lt;ul>
&lt;li>p1 (&lt;code>EFI&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkfs.vfat -F32 -n EFI /dev/sdc1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>p2 (&lt;code>btrfs&lt;/code>) (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/02/19/btrfs-checksumming/">btrfs. Контрольные суммы&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkfs.btrfs --checksum blake2 -L gentoo /dev/sdc2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="подготовка-раздела-с-btrfs">&lt;span class="section-num">3&lt;/span> Подготовка раздела с btrfs&lt;/h2>
&lt;ul>
&lt;li>Подмонтируем раздел с btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9 /dev/sdc2 /mnt/to/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим подтома на btrfs (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-subvolumes/">Подтома btrfs&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var@tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @var@log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @home
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @libvirt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подтома для &lt;em>Gentoo Linux&lt;/em>.&lt;/li>
&lt;li>Используется, если &lt;em>portage&lt;/em> размещается локально:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage@local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @portage@com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если используется файл подкачки на файловой системе, то создадим для него подтом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">btrfs subvol create @swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="копирование-существующих-файловых-систем">&lt;span class="section-num">4&lt;/span> Копирование существующих файловых систем&lt;/h2>
&lt;h3 id="система-на-lvm">&lt;span class="section-num">4.1&lt;/span> Система на LVM&lt;/h3>
&lt;ul>
&lt;li>Создадим точку монтирования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/from
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем root-партицию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/vgs/root /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/to/@
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>/var&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/vgs/var /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/to/@var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>/boot&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sdc2 /mnt/to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sdb2 /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/from
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>portage&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/vgs/portage /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/to/@portage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>portage_local&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/vgs/portage_local /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/to/@portage_local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="система-на-btrfs">&lt;span class="section-num">4.2&lt;/span> Система на btrfs&lt;/h3>
&lt;h4 id="подготовка-к-копированию">&lt;span class="section-num">4.2.1&lt;/span> Подготовка к копированию&lt;/h4>
&lt;ul>
&lt;li>Создадим точки монтирования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /mnt/from
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем исходную файловую систему btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/sda4 /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="копирование-основных-файловых-систем">&lt;span class="section-num">4.2.2&lt;/span> Копирование основных файловых систем&lt;/h4>
&lt;ul>
&lt;li>Скопируем root-партицию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -av -HS -AX --delete /mnt/from/@/* /mnt/to/@
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируем &lt;code>/var&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -av -HS -AX --delete /mnt/from/@var/* /mnt/to/@var
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>/boot&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda2 /mnt/boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/boot/* /mnt/to/@boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount /mnt/boot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="копируем-portage">&lt;span class="section-num">4.2.3&lt;/span> Копируем portage&lt;/h4>
&lt;ul>
&lt;li>Если &lt;code>portage&lt;/code> размещён локально, то его тоже надо скопировать.&lt;/li>
&lt;li>Скопируем &lt;code>@portage&lt;/code>:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/@portage/* /mnt/to/@portage
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Скопируем &lt;code>@portage@local&lt;/code>:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -av -HS --delete /mnt/from/@portage@local/* /mnt/to/@portage@local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="копируем-системы-с-отключением-cow">&lt;span class="section-num">4.2.4&lt;/span> Копируем системы с отключением CoW&lt;/h4>
&lt;ul>
&lt;li>Для файловых систем с образами виртуальных машин следует отключить CoW (copy-on-write) (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-subvolumes/">Подтома btrfs&lt;/a>).&lt;/li>
&lt;li>Так же стоит отключить &lt;em>CoW&lt;/em> для часто изменяемых файлов (например, журналов).&lt;/li>
&lt;li>Подмонтируем файловую систему &lt;code>btrfs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /mnt/gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@ /dev/sdc2 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var /dev/sdc2 /mnt/gentoo/var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var@tmp /dev/sdc2 /mnt/gentoo/var/tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@vm /dev/sdc2 /mnt/gentoo/var/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@libvirt /dev/sdc2 /mnt/gentoo/var/lib/libvirt/images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var@log /dev/sdc2 /mnt/gentoo/var/log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Копирование &lt;code>/var/vm&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Отключим для этого подтома CoW:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C vm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируем &lt;code>/var/vm&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -av -HS -AX --delete /mnt/from/@vm/* /mnt/to/@vm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Копирование &lt;code>/var/lib/libvirt/images&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Отключим для подтома &lt;code>/var/lib/libvirt/images&lt;/code> CoW:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/lib/libvirt/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C images
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируем &lt;code>/var/lib/libvirt/images&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -av -HS -AX --delete /mnt/from/@libvirt/* /mnt/to/@libvirt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="3">
&lt;li>
&lt;p>Копирование &lt;code>/var/log&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Для &lt;code>/var/log&lt;/code>&lt;/li>
&lt;li>Отключим для подтома &lt;code>/var/log&lt;/code> CoW:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируем &lt;code>/var/log&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rsync -av -HS -AX --delete /mnt/from/@var@log/* /mnt/to/@var@log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="4">
&lt;li>
&lt;p>Настройки &lt;code>/var/tmp&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Для &lt;code>/var/tmp&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chattr +C tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Посмотреть результат можно командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lsattr -a /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lsattr -a /mnt/gentoo/var/lib/libvirt/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="установка-загрузчика">&lt;span class="section-num">5&lt;/span> Установка загрузчика&lt;/h2>
&lt;ul>
&lt;li>Перемонтируем файловую систему &lt;code>btrfs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /mnt/gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@ /dev/sdc2 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var /dev/sdc2 /mnt/gentoo/var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var@tmp /dev/sdc2 /mnt/gentoo/var/tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@boot /dev/sdc2 /mnt/gentoo/boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sdc1 /mnt/gentoo/boot/efi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем псевдо-файловые системы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /dev /mnt/gentoo/dev/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /proc /mnt/gentoo/proc/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /sys /mnt/gentoo/sys/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /run /mnt/gentoo/run/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -t efivarfs efivarfs /mnt/gentoo/sys/firmware/efi/efivars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим загрузчик:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chroot /mnt/gentoo/ /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grub-install /boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grub-mkconfig -o /boot/grub/grub.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="файл-монтирования-fstab">&lt;span class="section-num">6&lt;/span> Файл монтирования fstab&lt;/h2>
&lt;ul>
&lt;li>Создадим файл монтирования fstab.&lt;/li>
&lt;li>Узнаем идентификатор партиции с файловой системой btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">blkid /dev/sdc2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Получим строчку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим файл &lt;code>/mnt/to/etc/fstab&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;boot&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">boot&lt;/span> &lt;span class="n">ext4&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;EFI&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">efi&lt;/span> &lt;span class="n">vfat&lt;/span> &lt;span class="n">defaults&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">flush&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">tz&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">UTC&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;swap&amp;#34;&lt;/span> &lt;span class="n">none&lt;/span> &lt;span class="n">swap&lt;/span> &lt;span class="n">sw&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="k">var&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">var_tmp&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vm&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">vm&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">home&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">portage_local&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">portage_com&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если используется файл подкачки, то вместо отдельной партиции следует подключить этот файл в &lt;code>/mnt/to/etc/fstab&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">UUID=&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34; /swap btrfs relatime,discard=async,autodefrag,compress=zstd:9,subvol=@swap 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/swap/swapfile none swap sw 0 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="файл-подкачки-на-файловой-системе-btrfs">&lt;span class="section-num">7&lt;/span> Файл подкачки на файловой системе btrfs&lt;/h2>
&lt;h3 id="подготовка-к-созданию-файла-подкачки">&lt;span class="section-num">7.1&lt;/span> Подготовка к созданию файла подкачки&lt;/h3>
&lt;ul>
&lt;li>Для раздела файла подкачки следует отключить CoW (copy-on-write).&lt;/li>
&lt;li>Подмонтируем файловую систему &lt;code>btrfs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@ /dev/sdc2 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим точку монтирования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /mnt/gentoo/swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем подтом &lt;code>@swap&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@swap /dev/sdc2 /mnt/gentoo/swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключим для этого подтома CoW:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chattr +C /mnt/gentoo/swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="создание-файла-подкачки">&lt;span class="section-num">7.2&lt;/span> Создание файла подкачки&lt;/h3>
&lt;h4 id="старый-подход">&lt;span class="section-num">7.2.1&lt;/span> Старый подход&lt;/h4>
&lt;ul>
&lt;li>Создадим файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">truncate -s &lt;span class="m">0&lt;/span> /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим права доступа &lt;code>600&lt;/code> к файлу подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">600&lt;/span> /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим размер файла подкачки исходя из размера оперативной памяти:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">fallocate -l &lt;span class="k">$(&lt;/span>free -h --si &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;NR == 2 {print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span> /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отформатируем файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkswap /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="новый-подход">&lt;span class="section-num">7.2.2&lt;/span> Новый подход&lt;/h4>
&lt;ul>
&lt;li>Работает начиная с версии утилит 6.1.&lt;/li>
&lt;li>Создадим файл подкачки размером 8ГБ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs filesystem mkswapfile --size 4g --uuid clear /mnt/gentooswap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим файл подкачки исходя из размера оперативной памяти:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">btrfs filesystem mkswapfile --size &lt;span class="k">$(&lt;/span>free -h --si &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;NR == 2 {print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span> --uuid clear /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="активация-файла-подкачки">&lt;span class="section-num">7.3&lt;/span> Активация файла подкачки&lt;/h3>
&lt;ul>
&lt;li>Активируем файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">swapon /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Window manager i3</title><link>https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/</link><pubDate>Fri, 14 May 2021 11:32:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/</guid><description>&lt;p>Менеджер окон &lt;em>i3&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозиторий-конфигурации">&lt;span class="section-num">2&lt;/span> Репозиторий конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-конфигурации">&lt;span class="section-num">3&lt;/span> Файл конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#навигация">&lt;span class="section-num">4&lt;/span> Навигация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#клавиша-модификатор">&lt;span class="section-num">4.1&lt;/span> Клавиша-модификатор&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-комбинации-клавиш">&lt;span class="section-num">4.2&lt;/span> Основные комбинации клавиш&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перемещение-фокуса">&lt;span class="section-num">4.3&lt;/span> Перемещение фокуса&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перемещение-окон">&lt;span class="section-num">4.4&lt;/span> Перемещение окон&lt;/a>&lt;/li>
&lt;li>&lt;a href="#modifying-windows">&lt;span class="section-num">4.5&lt;/span> Modifying windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#структура-расположения-контейнеров">&lt;span class="section-num">4.6&lt;/span> Структура расположения контейнеров&lt;/a>&lt;/li>
&lt;li>&lt;a href="#floating">&lt;span class="section-num">4.7&lt;/span> Floating&lt;/a>&lt;/li>
&lt;li>&lt;a href="#рабочие-области--workspaces">&lt;span class="section-num">4.8&lt;/span> Рабочие области (workspaces)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#opening-applications-closing-windows">&lt;span class="section-num">4.9&lt;/span> Opening applications / Closing windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#выход-перезапуск">&lt;span class="section-num">4.10&lt;/span> Выход/Перезапуск&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#терминал">&lt;span class="section-num">5.1&lt;/span> Терминал&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-окном-с-помощью-мышки">&lt;span class="section-num">5.2&lt;/span> Управление окном с помощью мышки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#строка-статуса">&lt;span class="section-num">5.3&lt;/span> Строка статуса&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#i3bar">&lt;span class="section-num">5.3.1&lt;/span> i3bar&lt;/a>&lt;/li>
&lt;li>&lt;a href="#py3status">&lt;span class="section-num">5.3.2&lt;/span> py3status&lt;/a>&lt;/li>
&lt;li>&lt;a href="#polybar">&lt;span class="section-num">5.3.3&lt;/span> polybar&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#запуск-приложений">&lt;span class="section-num">5.4&lt;/span> Запуск приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#rofi">&lt;span class="section-num">5.4.1&lt;/span> rofi&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#блокировка-экрана">&lt;span class="section-num">5.5&lt;/span> Блокировка экрана&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#блокировщик-экрана-i3lock">&lt;span class="section-num">5.5.1&lt;/span> Блокировщик экрана &lt;code>i3lock&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#блокировщик-экрана-i3lock-color">&lt;span class="section-num">5.5.2&lt;/span> Блокировщик экрана &lt;code>i3lock-color&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#приложения">&lt;span class="section-num">6&lt;/span> Приложения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#снимки-экрана">&lt;span class="section-num">6.1&lt;/span> Снимки экрана&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#совместимость-приложений">&lt;span class="section-num">7&lt;/span> Совместимость приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#java">&lt;span class="section-num">7.1&lt;/span> Java&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#серое-окно-приложения-не-меняют-размер-с-помощью-wm-меню-сразу-закрываются">&lt;span class="section-num">7.1.1&lt;/span> Серое окно, приложения не меняют размер с помощью WM, меню сразу закрываются&lt;/a>&lt;/li>
&lt;li>&lt;a href="#меню-в-приложениях-плавает-отдельно-им-невозможно-пользоваться">&lt;span class="section-num">7.1.2&lt;/span> Меню в приложениях плавает отдельно, им невозможно пользоваться&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Тайловый менеджер окон.&lt;/li>
&lt;li>&lt;a href="https://i3wm.org/" target="_blank" rel="noopener">https://i3wm.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="репозиторий-конфигурации">&lt;span class="section-num">2&lt;/span> Репозиторий конфигурации&lt;/h2>
&lt;ul>
&lt;li>Я сделал репозиторий со своей конфигурацией: &lt;a href="https://github.com/yamadharma/config-i3" target="_blank" rel="noopener">https://github.com/yamadharma/config-i3&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="файл-конфигурации">&lt;span class="section-num">3&lt;/span> Файл конфигурации&lt;/h2>
&lt;ul>
&lt;li>Файлы конфигурации просматриваются в следующем порядке:
&lt;ul>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3/config&lt;/code> (&lt;code>~/.config/i3/config&lt;/code>);&lt;/li>
&lt;li>&lt;code>~/.i3/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_DIRS/i3/config&lt;/code> (&lt;code>/etc/xdg/i3/config&lt;/code>);&lt;/li>
&lt;li>&lt;code>/etc/i3/config&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Начиная с версии 4.20, можно подключать другие файлы конфигурации из основного файла конфигурации &lt;em>i3&lt;/em>.
&lt;ul>
&lt;li>Примеры использования директивы &lt;code>include&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Тильда преобразуется в домашний каталог пользователя&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include ~/.config/i3/assignments.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Переменные среды разыменовываются&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include $HOME/.config/i3/assignments.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Символы подстановки раскрываются&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include ~/.config/i3/config.d/*.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Можно выполнять команду&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include ~/.config/i3/`hostname`.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Каждый путь загружается только один раз&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include ~/.config/i3/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Относительные пути интерпретируются относительно каталога конфигурационного файла&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">include assignments.conf&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="навигация">&lt;span class="section-num">4&lt;/span> Навигация&lt;/h2>
&lt;h3 id="клавиша-модификатор">&lt;span class="section-num">4.1&lt;/span> Клавиша-модификатор&lt;/h3>
&lt;ul>
&lt;li>В качестве модификатора обычно используется:
&lt;ul>
&lt;li>&lt;code>Alt&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">set $mod Mod1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Super&lt;/code> (Клавиша со значком &lt;em>Windows&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">set $mod Mod4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Предпочитаю &lt;code>Super&lt;/code>, чтобы не конфликтовать с Emacs.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="основные-комбинации-клавиш">&lt;span class="section-num">4.2&lt;/span> Основные комбинации клавиш&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Enter&lt;/code>: открыть терминал.&lt;/li>
&lt;/ul>
&lt;h3 id="перемещение-фокуса">&lt;span class="section-num">4.3&lt;/span> Перемещение фокуса&lt;/h3>
&lt;ul>
&lt;li>Фокус можно перемещать как с помощью стрелок, так и с помощью буквенных клавиш, как в редакторе &lt;em>vi&lt;/em>.
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>h&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Left&lt;/code>: сдвиг фокуса влево.&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>j&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Down&lt;/code>: сдвиг фокуса вниз.&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>k&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Up&lt;/code>: сдвиг фокуса вверх.&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>l&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Right&lt;/code>: сдвиг фокуса вправо.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация выглядит следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Home row direction keys, like vim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $left h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $down j
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $up k
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $right l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Move your focus around
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$left focus left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$down focus down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$up focus up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$right focus right
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Or use $mod+[up|down|left|right]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Left focus left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Down focus down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Up focus up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Right focus right
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Впрочем, следует заметить, что также могут использоваться и другие соглашения:
&lt;ul>
&lt;li>&lt;code>j&lt;/code>: влево;&lt;/li>
&lt;li>&lt;code>k&lt;/code>: вниз;&lt;/li>
&lt;li>&lt;code>l&lt;/code>: вверх;&lt;/li>
&lt;li>&lt;code>;&lt;/code>: вправо.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Поскольку в данном менеджере окон поддерживаются контейнеры, то можно переключить фокус на родительский контейнер:
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>a&lt;/code>: переключить фокус на родительский контейнер.&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Move focus to the parent container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+a focus parent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Space&lt;/code>: переключить режим фокуса.&lt;/li>
&lt;/ul>
&lt;h3 id="перемещение-окон">&lt;span class="section-num">4.4&lt;/span> Перемещение окон&lt;/h3>
&lt;ul>
&lt;li>Делается аналогично перемещению фокуса, но с добавлением модификатора &lt;code>Shift&lt;/code>:
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>h&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Left&lt;/code>: перемещение влево;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>j&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Down&lt;/code>: перемещение вниз;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>k&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Up&lt;/code>: перемещение вверх;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>l&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Right&lt;/code>: перемещение вправо.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация выглядит следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Move the focused window with the same, but add Shift
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$left move left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$down move down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$up move up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$right move right
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Ditto, with arrow keys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Left move left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Down move down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Up move up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Right move right
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="modifying-windows">&lt;span class="section-num">4.5&lt;/span> Modifying windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + f toggle fullscreen&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + v split a window vertically&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + h split a window horizontally&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + r resize mode&lt;/li>
&lt;/ul>
&lt;h3 id="структура-расположения-контейнеров">&lt;span class="section-num">4.6&lt;/span> Структура расположения контейнеров&lt;/h3>
&lt;ul>
&lt;li>Поддерживаются следующие расположения контейнеров:
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>e&lt;/code>: переключение разделённого расположения (split layout);&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>s&lt;/code>: стековое размещение (stacking layout);&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>w&lt;/code>: размещение с табами (tabbed layout).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Switch the current container between different layout styles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+s layout stacking
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+w layout tabbed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+e layout toggle split
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для раскладки по умолчанию я использую табы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### Layout mode for new containers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## default|stacking|tabbed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">workspace_layout tabbed
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="floating">&lt;span class="section-num">4.7&lt;/span> Floating&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + Shift + Space toggle floating&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + Left click drag floating&lt;/li>
&lt;/ul>
&lt;h3 id="рабочие-области--workspaces">&lt;span class="section-num">4.8&lt;/span> Рабочие области (workspaces)&lt;/h3>
&lt;ul>
&lt;li>Сконфигурим рабочие области:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Define names for workspaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws1 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws2 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws3 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws4 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws5 5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws6 6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws7 7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws8 8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws9 9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws10 10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>0&lt;/code> &amp;ndash; &lt;code>9&lt;/code>: переключиться на соответствующую рабочую область:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Switch to workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+1 workspace $ws1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+2 workspace $ws2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+3 workspace $ws3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+4 workspace $ws4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+5 workspace $ws5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+6 workspace $ws6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+7 workspace $ws7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+8 workspace $ws8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+9 workspace $ws9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+0 workspace $ws10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>0&lt;/code> &amp;ndash; &lt;code>9&lt;/code>: перенести окно на соответствующую рабочую область:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Move focused container to workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+1 move container to workspace $ws1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+2 move container to workspace $ws2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+3 move container to workspace $ws3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+4 move container to workspace $ws4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+5 move container to workspace $ws5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+6 move container to workspace $ws6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+7 move container to workspace $ws7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+8 move container to workspace $ws8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+9 move container to workspace $ws9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+0 move container to workspace $ws10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="opening-applications-closing-windows">&lt;span class="section-num">4.9&lt;/span> Opening applications / Closing windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + d open application launcher (dmenu)&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + Shift + q kill a window&lt;/li>
&lt;/ul>
&lt;h3 id="выход-перезапуск">&lt;span class="section-num">4.10&lt;/span> Выход/Перезапуск&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>c&lt;/code>: перечитать конфигурационный файл.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## ~/.config/i3/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## reload the configuration file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bindsym&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">mod&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">reload&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>r&lt;/code>: перестартовать &lt;em>i3&lt;/em>, сохранив сессию.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+r restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>e&lt;/code>: выход из &lt;em>i3&lt;/em>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## exit i3 (logs you out of your X session)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+e exec &amp;#34;i3-nagbar -t warning -m &amp;#39;You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.&amp;#39; -B &amp;#39;Yes, exit i3&amp;#39; &amp;#39;i3-msg exit&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/h2>
&lt;h3 id="терминал">&lt;span class="section-num">5.1&lt;/span> Терминал&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>В качестве терминала я использую kitty.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Конфигурация запуска терминала:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">set $term kitty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Return exec $term
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В этом случае запускается одно окно терминала.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Для работы я использую специальную настройку сессии терминала. Я её запускаю при входе в сессию. Для этого я приспособил комбинацию &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Enter&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Return exec kitty --session ~/.config/kitty/startup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="управление-окном-с-помощью-мышки">&lt;span class="section-num">5.2&lt;/span> Управление окном с помощью мышки&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Можно управлять окнами с помощью мышки.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Привязка осуществляется следующей командой:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym [--release] [--border] [--whole-window] [--exclude-titlebar] [&amp;lt;Modifiers&amp;gt;+]button&amp;lt;n&amp;gt; command
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>По умолчанию привязка запускается только при нажатии на строку заголовка окна.&lt;/li>
&lt;li>Если указан флаг &lt;code>--release&lt;/code>, он запустится, когда кнопка мыши будет отпущена.&lt;/li>
&lt;li>Если указан флаг &lt;code>--whole-window&lt;/code>, то привязка также будет выполняться при щелчке по любой части окна, за исключением границы.&lt;/li>
&lt;li>Чтобы привязка выполнялась при щелчке границы, нужно указать флаг &lt;code>--border&lt;/code>.&lt;/li>
&lt;li>Если задан флаг &lt;code>--exclude-titlebar&lt;/code>, заголовок не будет учитываться для привязки клавиш.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Примеры.&lt;/p>
&lt;ul>
&lt;li>Средняя кнопка на заголовке закрывает окно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym --release button2 kill
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Средняя кнопка и модификатор над любой частью окна закрывает окно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym --whole-window $mod+button2 kill
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Правая кнопка мыши переключает плавающий режим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym button3 floating toggle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+button3 floating toggle
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Боковые кнопки мыши перемещают окно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bindsym button9 move left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym button8 move right
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="строка-статуса">&lt;span class="section-num">5.3&lt;/span> Строка статуса&lt;/h3>
&lt;h4 id="i3bar">&lt;span class="section-num">5.3.1&lt;/span> i3bar&lt;/h4>
&lt;ul>
&lt;li>Отрисовку панели осуществляет утилита &lt;code>i3bar&lt;/code>.&lt;/li>
&lt;li>Отображается вверху или внизу экрана.&lt;/li>
&lt;li>Содержит:
&lt;ul>
&lt;li>область с кнопками переключения рабочих областей &lt;em>i3&lt;/em>;&lt;/li>
&lt;li>системную строку, генерируемую при помощи &lt;code>i3status&lt;/code> или аналогов;&lt;/li>
&lt;li>системный трей с иконками программ.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В конфигурационном файле задаётся следующим образом (&lt;a href="https://i3wm.org/docs/userguide.html#_configuring_i3bar" target="_blank" rel="noopener">https://i3wm.org/docs/userguide.html#_configuring_i3bar&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/i3/config -*- mode: conf-unix; -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Start i3bar to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status_command i3status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Поддержка иконок в i3bar&lt;/p>
&lt;ul>
&lt;li>В &lt;code>i3bar&lt;/code> можно использовать шрифты иконок (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/21/monospace-fonts/">Моноширинные шрифты&lt;/a>).&lt;/li>
&lt;li>Наиболее распространённым является шрифт &lt;a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome&lt;/a>.&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge media-fonts/fontawesome
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для вставки шрифта в файл можно использовать список кодов для иконок &lt;a href="https://fontawesome.com/cheatsheet" target="_blank" rel="noopener">https://fontawesome.com/cheatsheet&lt;/a>.&lt;/li>
&lt;li>Шрифт лучше явно обозначить в конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> …
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> font pango:Source Sans Pro, FontAwesome 5 Free 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> …
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для набора символа по его коду следует использовать конфигурации клавиш. Например, для набора символа с кодом &lt;code>0xf004&lt;/code>, требуется набрать:
&lt;ul>
&lt;li>приложения на основе GTK: &lt;code>Ctrl&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>u&lt;/code>, &lt;code>f004&lt;/code>, &lt;code>Enter&lt;/code>;&lt;/li>
&lt;li>emacs: &lt;code>Ctrl&lt;/code> + &lt;code>x&lt;/code>, &lt;code>8&lt;/code>, &lt;code>Enter&lt;/code>, &lt;code>f004&lt;/code>, &lt;code>Enter&lt;/code>;&lt;/li>
&lt;li>vim: &lt;code>Ctrl&lt;/code> + &lt;code>v&lt;/code>, &lt;code>uf004&lt;/code>;&lt;/li>
&lt;li>urxvt: удерживая &lt;code>Ctrl&lt;/code> + &lt;code>Shift&lt;/code>, наберите &lt;code>f004&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>i3status&lt;/p>
&lt;ul>
&lt;li>Использовано &lt;a href="https://igancev.ru/2020-05-11-configuring-i3status-in-i3wm" target="_blank" rel="noopener">https://igancev.ru/2020-05-11-configuring-i3status-in-i3wm&lt;/a>.&lt;/li>
&lt;li>&lt;code>i3status&lt;/code> генерирует строку состояния для &lt;code>i3bar&lt;/code>.&lt;/li>
&lt;li>Содержит встроенные модули:
&lt;ul>
&lt;li>IPv6 &amp;mdash; получает и выводит IPv6 адрес.&lt;/li>
&lt;li>Disk &amp;mdash; отображает информацию о занятом и свободном месте в файловой системе.&lt;/li>
&lt;li>Run-watch &amp;mdash; мониторинг определённого процесса в системе.&lt;/li>
&lt;li>Path-exists &amp;mdash; проверяет на существование путь в файловой системе.&lt;/li>
&lt;li>Wireless &amp;mdash; позволяет выводить подключения к WIFI сети, уровень сигнала, имя точки доступа.&lt;/li>
&lt;li>Ethernet &amp;mdash; предоставляет IP адрес и скорость соединения сетевого интерфейса.&lt;/li>
&lt;li>Battery &amp;mdash; показ уровня заряда батареи.&lt;/li>
&lt;li>CPU-Temperature &amp;mdash; показ температуры процессора.&lt;/li>
&lt;li>CPU Usage &amp;mdash; использование процессора в процентах.&lt;/li>
&lt;li>Memory &amp;mdash; использование оперативной памяти.&lt;/li>
&lt;li>Load &amp;mdash; среднее значение загрузки системы за 1, 5 и 15 минут (Load Overage).&lt;/li>
&lt;li>Time &amp;mdash; время в текущей временной зоне.&lt;/li>
&lt;li>TzTime &amp;mdash; время в заданной временной зоне.&lt;/li>
&lt;li>DDate &amp;mdash; дата.&lt;/li>
&lt;li>Volume &amp;mdash; управление громкостью звука.&lt;/li>
&lt;li>File Contents &amp;mdash; вывод содержимого указанного файла.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Модули в строке можно переиспользовать по нескольку раз, управляя порядком вывода.&lt;/li>
&lt;li>Конфигурацию условно можно разделить на 3 части:
&lt;ul>
&lt;li>блок &lt;code>general&lt;/code> &amp;mdash; содержит общие параметры;&lt;/li>
&lt;li>переменная &lt;code>order&lt;/code> &amp;mdash; в неё записывается порядок вывода интересующих модулей;&lt;/li>
&lt;li>блоки конфигурации модулей &amp;mdash; непосредственно настройки самих блоков с метриками.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В конфигурации i3bar задаётся конфигурационный файл для i3status:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/i3/config -*- mode: conf-unix; -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Start i3bar to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> font pango:Source Sans Pro, FontAwesome 5 Free 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status_command i3status --config ~/.config/i3/i3status/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Структура информационной панели задаётся в конфигурационном файле:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### -*- mode: conf-unix; -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## ~/.config/i3/i3status/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">general&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">colors&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="c1"># включение/выключение поддержки цветов true/false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">interval&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># интервал обновления строки статуса, в секундах&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">output_format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;i3bar&amp;#34;&lt;/span> &lt;span class="c1"># формат вывода, устанавливаем i3bar (JSON)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># порядок вывода модулей&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;run_watch openvpn&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;run_watch openconnect&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;volume master&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;wireless _first_&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;battery all&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;disk /&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;memory&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;cpu_usage&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;cpu_temperature 0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;tztime local&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># отслеживание процесса openvpn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># служит как индикатор работы openvpn клиента&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># при запуске openvpn необходимо&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># указывать параметр --writepid /var/run/openvpn.pid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">run_watch&lt;/span> &lt;span class="n">openvpn&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pidfile&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/var/run/openvpn.pid&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; openvpn&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># если пареметр format_down оставить пустым,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># то при неактивном процессе блок будет отсутствовать&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format_down&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># аналогичный блок индикатор openconnect vpn клиента&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># требуется запуск клиента с параметром --pid-file=/var/run/openconnect.pid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">run_watch&lt;/span> &lt;span class="n">openconnect&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pidfile&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/var/run/openconnect.pid&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; openconnect vpn&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format_down&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># управление громкостью звука&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">volume&lt;/span> &lt;span class="n">master&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; %volume&amp;#34;&lt;/span> &lt;span class="c1"># шаблон громкости в активном состоянии&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format_muted&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; %volume&amp;#34;&lt;/span> &lt;span class="c1"># шаблон громкости в состоянии muted (без звука)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">device&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;default&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mixer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Master&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mixer_idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># индикатор WIFI&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wireless&lt;/span> &lt;span class="n">_first_&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># шаблон вывода, можно дополнить&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># наименованием подключения %essid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># и ip адресом %ip&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format_up&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;%quality &lt;/span>&lt;span class="si">%f&lt;/span>&lt;span class="s2">requency&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format_down&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># состояние заряда батареи&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">battery&lt;/span> &lt;span class="n">all&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># шаблон вывода, можно дополнить&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># оставшимся временем работы %emptytime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># энергопотреблением %consumption в ваттах&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">tatus %percentage&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># true - показ процента заряда от 0 до 100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># false - показ процента заряда от 0 до n, с учетом&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># изношенности аккумулятора&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">last_full_capacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format_down&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status_chr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c1"># статус подзарядки&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status_bat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c1"># статус в режиме работы от батареи&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status_unk&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;? UNK&amp;#34;&lt;/span> &lt;span class="c1"># неизвестный статус&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status_full&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c1"># статус полного заряда&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/sys/class/power_supply/BAT&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">/uevent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># нижний порог заряда, после которого блок&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># будет окрашен в &amp;#34;color_bad&amp;#34; (по умолчанию красный)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># подробнее в man i3status&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">low_threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># отслеживаемый накопитель&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">disk&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># доступные переменные:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># %used, %percentage_used - занятое пространство&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># %free, %percentage_free - свободное пространство&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># %avail, %percentage_avail - доступное пространство&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># %total - всего&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; %avail&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># будет окрашен в &amp;#34;color_bad&amp;#34; (по умолчанию красный)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># при достижении нижнего порога менее 10GB доступного пространства&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">low_threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;10&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">threshold_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;gbytes_avail&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format_below_threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; Warning: %avail&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># миниторинг оперативной памяти&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">memory&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># доступные переменные:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># %total, percentage_total&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># %used, percentage_used&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># %free, percentage_free&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># %available, percentage_available&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># %shared, percentage_shared&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="si">%u&lt;/span>&lt;span class="s2">sed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># порог, при котором вывод окрасится в&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># желтый (degraded) или красный (critical)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># а формат вывода изменится на format_degraded&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">threshold_degraded&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;1G&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">threshold_critical&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;200M&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format_degraded&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;MEMORY &amp;lt; %available&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># температура процессора&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cpu_temperature&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">egrees&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># верхний порог температуры, при достижении которого&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># вывод окрасится красным,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># и формат изменится на format_above_threshold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">max_threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;80&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format_above_threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">egrees&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/sys/class/thermal/thermal_zone0/temp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># использование центрального процессора&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cpu_usage&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># %usage - процентное использование ЦП&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># %cpu&amp;lt;N&amp;gt; - начиная с %cpu0 и далее показывает использование ядер&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="si">%u&lt;/span>&lt;span class="s2">sage&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># доступны параметры:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># degraded_threshold, окрас в желтый, по умолчанию 90&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># max_threshold, окрас в красный, по умолчанию 95&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># и кастомные форматы для них&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># format_above_degraded_threshold и format_above_threshold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># вывод даты и времени по заданному формату&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">tztime&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2"> %b %Y  %H:%M:%S&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="py3status">&lt;span class="section-num">5.3.2&lt;/span> py3status&lt;/h4>
&lt;ul>
&lt;li>&lt;code>py3status&lt;/code> &amp;mdash; это расширяемая оболочка для &lt;code>i3status&lt;/code>, написанная на python.&lt;/li>
&lt;li>Сайт: &lt;a href="https://py3status.readthedocs.io/" target="_blank" rel="noopener">https://py3status.readthedocs.io/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/ultrabug/py3status" target="_blank" rel="noopener">https://github.com/ultrabug/py3status&lt;/a>.&lt;/li>
&lt;li>Можно управлять &lt;code>i3bar&lt;/code>:
&lt;ul>
&lt;li>используя один из доступных модулей, поставляемых с &lt;code>py3status&lt;/code>;&lt;/li>
&lt;li>группировать несколько модулей и автоматически или вручную циклически отображать их отображение;&lt;/li>
&lt;li>писать свои собственные модули и отображать их вывод на панели;&lt;/li>
&lt;li>обрабатывать события кликов на &lt;code>i3bar&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Отображается вверху или внизу экрана.&lt;/li>
&lt;li>Содержит:
&lt;ul>
&lt;li>область с кнопками переключения рабочих областей &lt;em>i3&lt;/em>;&lt;/li>
&lt;li>системную строку;&lt;/li>
&lt;li>системный трей с иконками программ.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Запуск py3status&lt;/p>
&lt;ul>
&lt;li>Запускается вместо &lt;code>i3bar&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/i3/config -*- mode: conf-unix; -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Start py3status to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> font pango:Iosevka Nerd Font 12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status_command py3status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Использует конфигурационный файл от &lt;code>i3status&lt;/code> или собственную конфигурацию.&lt;/li>
&lt;li>Порядок поиска конфигурационного файла:
&lt;ul>
&lt;li>&lt;code>$XDG_CONFIG_HOME/py3status/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3status/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3/i3status.conf&lt;/code>;&lt;/li>
&lt;li>&lt;code>~/.i3status.conf&lt;/code>;&lt;/li>
&lt;li>&lt;code>~/.i3/i3status.conf&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_DIRS/i3status/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/i3status.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="polybar">&lt;span class="section-num">5.3.3&lt;/span> polybar&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Отдельное приложение для строки статуса.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Применяется для замены &lt;em>i3bar&lt;/em>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://polybar.github.io/" target="_blank" rel="noopener">https://polybar.github.io/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://github.com/polybar/polybar" target="_blank" rel="noopener">https://github.com/polybar/polybar&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Темы для &lt;em>polybar&lt;/em>: &lt;a href="https://github.com/adi1090x/polybar-themes" target="_blank" rel="noopener">https://github.com/adi1090x/polybar-themes&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Одним из побудительных мотивов установки &lt;em>polybar&lt;/em> может быть то, что здесь можно без проблем настроить индикатор раскладки клавиатуры.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">USE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;i3wm&amp;#34;&lt;/span> emerge x11-misc/polybar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Конфигурационный файл:&lt;/p>
&lt;ul>
&lt;li>стандартное расположение: &lt;code>~/.config/polybar/config&lt;/code> (&lt;code>$XDG_CONFIG_HOME/polybar/config&lt;/code>);&lt;/li>
&lt;li>использую для локальных настроек только для &lt;em>i3&lt;/em>: &lt;code>~/.config/i3/polybar/config&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Скрипт запуска&lt;/p>
&lt;ul>
&lt;li>Создадим скрипт запуска &lt;code>polybar&lt;/code>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># ~/.config/i3/polybar/launch.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Terminate already running bar instances&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">killall -q polybar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># If all your bars have ipc enabled, you can also use&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># polybar-msg cmd quit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Wait until the processes have been shut down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> pgrep -u &lt;span class="nv">$UID&lt;/span> -x polybar &amp;gt;/dev/null&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> sleep 1&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Launch Polybar, using config location ~/.config/i3/polybar/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">polybar --config&lt;span class="o">=&lt;/span>~/.config/i3/polybar/config i3 &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Polybar launched...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим права на исполнение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod +x ~/.config/i3/polybar/launch.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавим вызов &lt;code>polybar&lt;/code> в файл конфигурации &lt;em>i3&lt;/em>. Конфигурацию для &lt;em>i3bar&lt;/em> следует закомментировать.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Start i3bar to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># font pango:Source Sans Pro, FontAwesome 5 Free 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># status_command i3status --config ~/.config/i3/i3status/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Start polybar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exec_always --no-startup-id ~/.config/i3/polybar/launch.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="запуск-приложений">&lt;span class="section-num">5.4&lt;/span> Запуск приложений&lt;/h3>
&lt;ul>
&lt;li>По умолчанию используется &lt;code>dmenu&lt;/code>.&lt;/li>
&lt;li>Можно заменить на &lt;code>rofi&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/19/launcher_rofi/">Запуск приложений. Rofi&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h4 id="rofi">&lt;span class="section-num">5.4.1&lt;/span> rofi&lt;/h4>
&lt;ul>
&lt;li>Используется для запуска приложений, переключения окон.&lt;/li>
&lt;li>&lt;a href="https://github.com/davatorium/rofi" target="_blank" rel="noopener">https://github.com/davatorium/rofi&lt;/a>&lt;/li>
&lt;li>Конфигурация по умолчанию находится в &lt;code>~/.config/rofi/config&lt;/code>.&lt;/li>
&lt;li>Для выбора темы можно использовать команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rofi-theme-selector
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для запуска программ используется несколько мод:
&lt;ul>
&lt;li>&lt;code>run&lt;/code>: запускать приложения из пути (&lt;code>$PATH&lt;/code>) с возможностью запуска в терминале.&lt;/li>
&lt;li>&lt;code>drun&lt;/code>: запускать приложения на основе desctop-файлов (по стандарту XDG).&lt;/li>
&lt;li>&lt;code>window&lt;/code>: переключение между окнами в оконном менеджере, совместимом со спецификацией EWMH.&lt;/li>
&lt;li>&lt;code>ssh&lt;/code>: подключение к удаленному хосту через &lt;code>ssh&lt;/code>.&lt;/li>
&lt;li>&lt;code>file-browser&lt;/code>: базовый файловый броузер для открытия файлов.&lt;/li>
&lt;li>&lt;code>keys&lt;/code>: список внутренних привязок клавиш.&lt;/li>
&lt;li>&lt;code>script&lt;/code>: использование простых скриптов.&lt;/li>
&lt;li>&lt;code>combi&lt;/code>: объединяет несколько мод в одну.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Использование запятых в файле настроек &lt;em>i3&lt;/em> может привести к проблемам. Лучше использовать файл настроек &lt;em>rofi&lt;/em> или замените запятые символом &lt;code>#&lt;/code>, например, заменить строку
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rofi -combi-modi window,drun,ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>на
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rofi -combi-modi window#drun#ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Возможная конфигурация в командной строке команды &lt;code>rofi&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $menu rofi -combi-modi window#drun -show combi -modi combi -show-icons
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Конфигурация с помощью конфигурационного файла (поместим его в &lt;code>~/.config/i3/rofi/config&lt;/code>).&lt;/li>
&lt;/ul>
&lt;h3 id="блокировка-экрана">&lt;span class="section-num">5.5&lt;/span> Блокировка экрана&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для отключения экрана можно использовать DPMS:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">exec --no-startup-id xset dpms 1800&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Отключается через 30 минут.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="блокировщик-экрана-i3lock">&lt;span class="section-num">5.5.1&lt;/span> Блокировщик экрана &lt;code>i3lock&lt;/code>&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>В качестве блокировщика экрана используем &lt;code>i3lock&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>Установка
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge x11-misc/i3lock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование в конфигурационном файле:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">set $Locker i3lock --color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">000000 &amp;amp;&amp;amp; sleep 1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>sleep 1&lt;/code> добавляет небольшую задержку, чтобы предотвратить возможное состояние гонки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Для блокировки экрана после заданного периода времени можно использовать &lt;code>xautolock&lt;/code> или &lt;code>xss-lock&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Использование &lt;code>xautolock&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge x11-misc/xautolock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование в конфигурационном файле:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">exec --no-startup-id xautolock -time 10 -locker &amp;#34;$Locker&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Блокирует через 10 минут.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование &lt;code>xss-lock&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge x11-misc/xss-lock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование в конфигурационном файле:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="cl">&lt;span class="na">exec --no-startup-id xss-lock -- &amp;#34;$Locker&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="блокировщик-экрана-i3lock-color">&lt;span class="section-num">5.5.2&lt;/span> Блокировщик экрана &lt;code>i3lock-color&lt;/code>&lt;/h4>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/Raymo111/i3lock-color" target="_blank" rel="noopener">https://github.com/Raymo111/i3lock-color&lt;/a>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Дополнительные возможности в i3lock-color&lt;/p>
&lt;ul>
&lt;li>Дополнительное управление цветом элементов.&lt;/li>
&lt;li>Размытие текущего экрана и использование его в качестве фона блокировки.&lt;/li>
&lt;li>Отображение часов в индикаторе.&lt;/li>
&lt;li>Обновление по таймеру, а не при каждом нажатии клавиши.&lt;/li>
&lt;li>Отображение раскладки клавиатуры.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>Порт находится в оверлее &lt;code>guru&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge x11-misc/i3lock-color
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="приложения">&lt;span class="section-num">6&lt;/span> Приложения&lt;/h2>
&lt;h3 id="снимки-экрана">&lt;span class="section-num">6.1&lt;/span> Снимки экрана&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для скриншотов можно использовать &lt;a href="https://github.com/resurrecting-open-source-projects/scrot" target="_blank" rel="noopener">scrot&lt;/a>.&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge media-gfx/scrot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Добавим в конфигурационный файл:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## Screenshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Screenshot active display
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym --release Print exec --no-startup-id scrot &amp;#39;%Y-%m-%d_%H-%M-%S_$wx$h.png&amp;#39; -e &amp;#39;mv $f `xdg-user-dir PICTURES` 2&amp;gt;/dev/null&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Screenshot current window
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym --release $mod+Print exec --no-startup-id scrot -u &amp;#39;%Y-%m-%d_%H-%M-%S_$wx$h.png&amp;#39; -e &amp;#39;mv $f `xdg-user-dir PICTURES` 2&amp;gt;/dev/null&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Screenshot selected region
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym --release $mod+Shift+Print exec --no-startup-id scrot -s &amp;#39;%Y-%m-%d_%H-%M-%S_$wx$h.png&amp;#39; -e &amp;#39;mv $f `xdg-user-dir PICTURES` 2&amp;gt;/dev/null&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>По клавише &lt;code>PrtScr&lt;/code> делается скриншот.&lt;/li>
&lt;li>По клавише &lt;code>mod&lt;/code> + &lt;code>PrtScr&lt;/code> делается скриншот активного окна.&lt;/li>
&lt;li>По клавише &lt;code>mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>PrtScr&lt;/code> предлагается выделить область экрана, скриншот которой следует сделать.&lt;/li>
&lt;li>Скриншоты переносятся в каталог $XDG_PICTURES_DIR (обычно &lt;code>~/Pictures&lt;/code> или &lt;code>~/Изображения&lt;/code>) (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/09/16/xdg-user-directories/">XDG. Пользовательские каталоги&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="совместимость-приложений">&lt;span class="section-num">7&lt;/span> Совместимость приложений&lt;/h2>
&lt;h3 id="java">&lt;span class="section-num">7.1&lt;/span> Java&lt;/h3>
&lt;h4 id="серое-окно-приложения-не-меняют-размер-с-помощью-wm-меню-сразу-закрываются">&lt;span class="section-num">7.1.1&lt;/span> Серое окно, приложения не меняют размер с помощью WM, меню сразу закрываются&lt;/h4>
&lt;ul>
&lt;li>В стандартных тулкитах для Java жестко зашит список оконных менеджеров.&lt;/li>
&lt;li>Следует установить переменную окружения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">_JAVA_AWT_WM_NONREPARENTING&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="меню-в-приложениях-плавает-отдельно-им-невозможно-пользоваться">&lt;span class="section-num">7.1.2&lt;/span> Меню в приложениях плавает отдельно, им невозможно пользоваться&lt;/h4>
&lt;ul>
&lt;li>В выпусках Java до версии 9 GTK интерфейс ориентирован на GTK2, в последующих версиях на GTK3.&lt;/li>
&lt;li>GTK LookAndFeel может работать с GTK версий 2, 2.2 и 3.&lt;/li>
&lt;li>По умолчанию используется GTK3.&lt;/li>
&lt;li>Следует явно задать более старую версию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">JAVA_TOOL_OPTIONS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;-Djdk.gtk.version=2.2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Have I Been Pwned (HIBP)</title><link>https://yamadharma.github.io/ru/post/2021/05/03/have-i-been-pwned-hibp/</link><pubDate>Mon, 03 May 2021 15:21:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/03/have-i-been-pwned-hibp/</guid><description>&lt;p>Сервис &lt;em>Have I Been Pwned?&lt;/em> содержит данные по скомпрометированным интернет-ресурсам и позволяет проверить, скомпрометирована ли Ваша личная информация.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#порядок-работы">&lt;span class="section-num">2&lt;/span> Порядок работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#клиентские-утилиты">&lt;span class="section-num">3&lt;/span> Клиентские утилиты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#passchek">&lt;span class="section-num">3.1&lt;/span> passchek&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pwnedpasswords-dot-sh">&lt;span class="section-num">3.2&lt;/span> pwnedpasswords.sh&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Сайт &lt;a href="https://haveibeenpwned.com/" target="_blank" rel="noopener">https://haveibeenpwned.com/&lt;/a>&lt;/li>
&lt;li>Код &lt;a href="https://github.com/HaveIBeenPwned/" target="_blank" rel="noopener">https://github.com/HaveIBeenPwned/&lt;/a>&lt;/li>
&lt;li>Написан на C#.&lt;/li>
&lt;li>Лицензия BSD.&lt;/li>
&lt;li>2021-05-28 открыты исходные сервиса:
&lt;ul>
&lt;li>&lt;a href="https://www.troyhunt.com/pwned-passwords-open-source-in-the-dot-net-foundation-and-working-with-the-fbi/" target="_blank" rel="noopener">https://www.troyhunt.com/pwned-passwords-open-source-in-the-dot-net-foundation-and-working-with-the-fbi/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="порядок-работы">&lt;span class="section-num">2&lt;/span> Порядок работы&lt;/h2>
&lt;ul>
&lt;li>Переходим на сайт &lt;a href="https://haveibeenpwned.com/" target="_blank" rel="noopener">https://haveibeenpwned.com/&lt;/a>.&lt;/li>
&lt;li>Вводим адрес электронной почты и нажимаем кнопку &lt;em>pwned&lt;/em>.&lt;/li>
&lt;li>Если адрес скомпрометирован, то появится сообщение &lt;em>Oh no - pwned!&lt;/em>.
&lt;ul>
&lt;li>Будет показана информация о сайтах, допустивших утечку.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В противном случае появится сообщение &lt;em>Good news - no pwnage found!&lt;/em>.&lt;/li>
&lt;li>На сайте также имеется страница &lt;em>Взломанные пароли&lt;/em> &lt;em>(Pwned Passwords)&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h2 id="клиентские-утилиты">&lt;span class="section-num">3&lt;/span> Клиентские утилиты&lt;/h2>
&lt;h3 id="passchek">&lt;span class="section-num">3.1&lt;/span> passchek&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://github.com/edyatl/passchek" target="_blank" rel="noopener">https://github.com/edyatl/passchek&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="pwnedpasswords-dot-sh">&lt;span class="section-num">3.2&lt;/span> pwnedpasswords.sh&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://github.com/jamesridgway/pwnedpasswords.sh" target="_blank" rel="noopener">https://github.com/jamesridgway/pwnedpasswords.sh&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Администрирование Windows</title><link>https://yamadharma.github.io/ru/post/2021/05/01/windows-administration/</link><pubDate>Sat, 01 May 2021 16:28:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/01/windows-administration/</guid><description>&lt;p>Вопросы системного администрирования Windows.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">1&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-программным-обеспечением">&lt;span class="section-num">2&lt;/span> Управление программным обеспечением&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-операционной-системы">&lt;span class="section-num">3&lt;/span> Настройка операционной системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#интерфейс-пользователя">&lt;span class="section-num">4&lt;/span> Интерфейс пользователя&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="установка">&lt;span class="section-num">1&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/08/windows-kms-keys/">Windows. Ключи KMS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/08/windows-unattended-simple-autounattend/">Windows. Автоустановка. Простой файл ответов&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/23/install-windows-hard-drive/">Установка Windows с жёсткого диска&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/29/windows-install-kvm/">Windows. Установка в kvm&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/10/22/windows-installation-image/">Установочный образ Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="управление-программным-обеспечением">&lt;span class="section-num">2&lt;/span> Управление программным обеспечением&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/01/software-installed-windows/">Программное обеспечение, устанавливаемое на Windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/package-manager-windows-winget/">Пакетный менеджер для Windows. WinGet&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-операционной-системы">&lt;span class="section-num">3&lt;/span> Настройка операционной системы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/11/16/windows-time-synchronization/">Windows. Синхронизация времени&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="интерфейс-пользователя">&lt;span class="section-num">4&lt;/span> Интерфейс пользователя&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/09/window-manager-windows/">Window manager для Windows&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Менеджеры паролей</title><link>https://yamadharma.github.io/ru/post/2021/04/29/password-managers/</link><pubDate>Thu, 29 Apr 2021 11:56:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/04/29/password-managers/</guid><description>&lt;p>Менеджеры паролей, которые я использовал.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#lastpass">&lt;span class="section-num">1&lt;/span> LastPass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#keepassxc">&lt;span class="section-num">2&lt;/span> KeePassXC&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pass">&lt;span class="section-num">3&lt;/span> pass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="lastpass">&lt;span class="section-num">1&lt;/span> LastPass&lt;/h2>
&lt;h2 id="keepassxc">&lt;span class="section-num">2&lt;/span> KeePassXC&lt;/h2>
&lt;h2 id="pass">&lt;span class="section-num">3&lt;/span> pass&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Менеджер паролей pass</title><link>https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/</link><pubDate>Wed, 28 Apr 2021 18:50:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/</guid><description>&lt;ul>
&lt;li>Менеджер паролей &lt;code>pass&lt;/code> &amp;mdash; программа, сделанная в рамках идеологии Unix.&lt;/li>
&lt;li>Также носит название стандартного менеджера паролей для Unix (&lt;em>The standard Unix password manager&lt;/em>).&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#основные-свойства">&lt;span class="section-num">1&lt;/span> Основные свойства&lt;/a>&lt;/li>
&lt;li>&lt;a href="#структура-базы-паролей">&lt;span class="section-num">2&lt;/span> Структура базы паролей&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#семантическая-структура-базы-паролей">&lt;span class="section-num">2.1&lt;/span> Семантическая структура базы паролей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#реализации">&lt;span class="section-num">3&lt;/span> Реализации&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#утилиты-командной-строки">&lt;span class="section-num">3.1&lt;/span> Утилиты командной строки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#графические-интерфейсы">&lt;span class="section-num">3.2&lt;/span> Графические интерфейсы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#qtpass">&lt;span class="section-num">3.2.1&lt;/span> qtpass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gopass-ui">&lt;span class="section-num">3.2.2&lt;/span> gopass-ui&lt;/a>&lt;/li>
&lt;li>&lt;a href="#webpass">&lt;span class="section-num">3.2.3&lt;/span> webpass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#приложения-для-android">&lt;span class="section-num">3.3&lt;/span> Приложения для Android&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#password-store">&lt;span class="section-num">3.3.1&lt;/span> Password Store&lt;/a>&lt;/li>
&lt;li>&lt;a href="#openkeychain-easy-pgp">&lt;span class="section-num">3.3.2&lt;/span> OpenKeychain: Easy PGP&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#пакеты-для-emacs">&lt;span class="section-num">3.4&lt;/span> Пакеты для Emacs&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pass">&lt;span class="section-num">3.4.1&lt;/span> pass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#helm-pass">&lt;span class="section-num">3.4.2&lt;/span> helm-pass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ivy-pass">&lt;span class="section-num">3.4.3&lt;/span> ivy-pass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">4&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ключи-gpg">&lt;span class="section-num">5.1&lt;/span> Ключи GPG&lt;/a>&lt;/li>
&lt;li>&lt;a href="#инициализация-хранилища">&lt;span class="section-num">5.2&lt;/span> Инициализация хранилища&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pass">&lt;span class="section-num">5.2.1&lt;/span> pass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gopass">&lt;span class="section-num">5.2.2&lt;/span> gopass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#qtpass">&lt;span class="section-num">5.2.3&lt;/span> qtpass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#синхронизация-с-git">&lt;span class="section-num">5.3&lt;/span> Синхронизация с git&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gopass">&lt;span class="section-num">5.3.1&lt;/span> gopass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#прямые-изменения">&lt;span class="section-num">5.3.2&lt;/span> Прямые изменения&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#тонкие-настройки">&lt;span class="section-num">5.4&lt;/span> Тонкие настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#устранение-сбоев">&lt;span class="section-num">5.5&lt;/span> Устранение сбоев&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#невозможно-расшифровать-пароль">&lt;span class="section-num">5.5.1&lt;/span> Невозможно расшифровать пароль&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#работа-с-паролями">&lt;span class="section-num">6&lt;/span> Работа с паролями&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-нового-пароля">&lt;span class="section-num">6.1&lt;/span> Создание нового пароля&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ручная-правка-базы-паролей">&lt;span class="section-num">6.2&lt;/span> Ручная правка базы паролей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#миграция-баз-паролей-из-других-программ">&lt;span class="section-num">7&lt;/span> Миграция баз паролей из других программ&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#скрипты-для-миграции">&lt;span class="section-num">7.1&lt;/span> Скрипты для миграции&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pass-import">&lt;span class="section-num">7.1.1&lt;/span> pass-import&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отдельные-скрипты">&lt;span class="section-num">7.1.2&lt;/span> Отдельные скрипты&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#конкретные-рецепты">&lt;span class="section-num">7.2&lt;/span> Конкретные рецепты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#lastpass">&lt;span class="section-num">7.2.1&lt;/span> LastPass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#экспорт-паролей">&lt;span class="section-num">7.3&lt;/span> Экспорт паролей&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pass2csv">&lt;span class="section-num">7.3.1&lt;/span> pass2csv&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#дополнительные-возможности">&lt;span class="section-num">8&lt;/span> Дополнительные возможности&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#проверка-утечки-пароля">&lt;span class="section-num">8.1&lt;/span> Проверка утечки пароля&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pass">&lt;span class="section-num">8.1.1&lt;/span> pass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gopass">&lt;span class="section-num">8.1.2&lt;/span> gopass&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#одноразовые-пароли">&lt;span class="section-num">8.2&lt;/span> Одноразовые пароли&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#интеграция-с-другими-программами">&lt;span class="section-num">9&lt;/span> Интеграция с другими программами&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="основные-свойства">&lt;span class="section-num">1&lt;/span> Основные свойства&lt;/h2>
&lt;ul>
&lt;li>Данные хранятся в файловой системе в виде каталогов и файлов.&lt;/li>
&lt;li>Файлы шифруются с помощью GPG-ключа.&lt;/li>
&lt;/ul>
&lt;h2 id="структура-базы-паролей">&lt;span class="section-num">2&lt;/span> Структура базы паролей&lt;/h2>
&lt;ul>
&lt;li>Структура базы может быть произвольной, если Вы собираетесь использовать её напрямую, без промежуточного программного обеспечения. Тогда семантику структуры базы данных Вы держите в своей голове.&lt;/li>
&lt;li>Если же необходимо использовать дополнительное программное обеспечение, необходимо семантику заложить в структуру базы паролей.&lt;/li>
&lt;/ul>
&lt;h3 id="семантическая-структура-базы-паролей">&lt;span class="section-num">2.1&lt;/span> Семантическая структура базы паролей&lt;/h3>
&lt;ul>
&lt;li>Рассмотрим пользователя &lt;code>user&lt;/code> в домене &lt;code>example.com&lt;/code>, порт &lt;code>22&lt;/code>.&lt;/li>
&lt;li>Отсутствие имени пользователя или порта в имени файла означает, что любое имя пользователя и порт будут совпадать:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">example.com.pgp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Соответствующее имя пользователя может быть именем файла внутри каталога, имя которого совпадает с хостом. Это полезно, если в базе есть пароли для нескольких пользователей на одном хосте:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">example.com/user.pgp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Имя пользователя также может быть записано в виде префикса, отделенного от хоста знаком &lt;code>@&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">user@example.com.pgp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Соответствующий порт может быть указан после хоста, отделённый двоеточием (&lt;code>:&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">example.com:22.pgp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">example.com:22/user.pgp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user@example.com:22.pgp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Эти все записи могут быть расположены в произвольных каталогах, задающих Вашу собственную иерархию.&lt;/li>
&lt;/ul>
&lt;h2 id="реализации">&lt;span class="section-num">3&lt;/span> Реализации&lt;/h2>
&lt;h3 id="утилиты-командной-строки">&lt;span class="section-num">3.1&lt;/span> Утилиты командной строки&lt;/h3>
&lt;ul>
&lt;li>На данный момент существует 2 основных реализации:
&lt;ul>
&lt;li>&lt;code>pass&lt;/code> &amp;mdash; классическая реализация в виде shell-скриптов (&lt;a href="https://www.passwordstore.org/" target="_blank" rel="noopener">https://www.passwordstore.org/&lt;/a>);&lt;/li>
&lt;li>&lt;code>gopass&lt;/code> &amp;mdash; реализация на go с дополнительными интегрированными функциями (&lt;a href="https://www.gopass.pw/" target="_blank" rel="noopener">https://www.gopass.pw/&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Дальше в тексте будет использоваться программа &lt;code>pass&lt;/code>, но всё то же самое можно сделать с помощью программы &lt;code>gopass&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="графические-интерфейсы">&lt;span class="section-num">3.2&lt;/span> Графические интерфейсы&lt;/h3>
&lt;h4 id="qtpass">&lt;span class="section-num">3.2.1&lt;/span> qtpass&lt;/h4>
&lt;ul>
&lt;li>&lt;code>qtpass&lt;/code> &amp;mdash; может работать как графический интерфейс к &lt;code>pass&lt;/code>, так и как самостоятельная программа. В настройках можно переключаться между использованием &lt;code>pass&lt;/code> и &lt;code>gnupg&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="gopass-ui">&lt;span class="section-num">3.2.2&lt;/span> gopass-ui&lt;/h4>
&lt;ul>
&lt;li>&lt;code>gopass-ui&lt;/code> &amp;mdash; интерфейс к &lt;code>gopass&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h4 id="webpass">&lt;span class="section-num">3.2.3&lt;/span> webpass&lt;/h4>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/emersion/webpass" target="_blank" rel="noopener">https://github.com/emersion/webpass&lt;/a>&lt;/li>
&lt;li>Веб-интерфейс к pass.&lt;/li>
&lt;li>Написано на golang.&lt;/li>
&lt;/ul>
&lt;h3 id="приложения-для-android">&lt;span class="section-num">3.3&lt;/span> Приложения для Android&lt;/h3>
&lt;h4 id="password-store">&lt;span class="section-num">3.3.1&lt;/span> Password Store&lt;/h4>
&lt;ul>
&lt;li>URL: &lt;a href="https://play.google.com/store/apps/details?id=dev.msfjarvis.aps" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=dev.msfjarvis.aps&lt;/a>&lt;/li>
&lt;li>Репозиторий с кодом: &lt;a href="https://github.com/android-password-store/Android-Password-Store" target="_blank" rel="noopener">https://github.com/android-password-store/Android-Password-Store&lt;/a>&lt;/li>
&lt;li>Документация: &lt;a href="https://android-password-store.github.io/docs/" target="_blank" rel="noopener">https://android-password-store.github.io/docs/&lt;/a>&lt;/li>
&lt;li>Для синхронизации с git необходимо импортировать ssh-ключи.&lt;/li>
&lt;li>Поддерживает разблокировку по биометрическим данным.&lt;/li>
&lt;li>Версия 1.x для работы требует наличия &lt;em>OpenKeychain: Easy PGP&lt;/em>.&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>История&lt;/p>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>&lt;span class="timestamp-wrapper">&lt;span class="timestamp">[2024-10-15 Вт]&lt;/span>&lt;/span>&lt;/p>
&lt;ul>
&lt;li>Репозиторий &lt;a href="https://github.com/android-password-store/Android-Password-Store" target="_blank" rel="noopener">https://github.com/android-password-store/Android-Password-Store&lt;/a> переведён в режим read-only.&lt;/li>
&lt;li>Сообщение: &lt;a href="https://github.com/android-password-store/Android-Password-Store/discussions/3260" target="_blank" rel="noopener">https://github.com/android-password-store/Android-Password-Store/discussions/3260&lt;/a>&lt;/li>
&lt;li>Текущий ментейнер сообщил, что далее не может работать над проектом и готов отдать его другому сопровождающему.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;h4 id="openkeychain-easy-pgp">&lt;span class="section-num">3.3.2&lt;/span> OpenKeychain: Easy PGP&lt;/h4>
&lt;ul>
&lt;li>URL: &lt;a href="https://play.google.com/store/apps/details?id=org.sufficientlysecure.keychain" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=org.sufficientlysecure.keychain&lt;/a>&lt;/li>
&lt;li>Операции с ключами pgp.&lt;/li>
&lt;li>Необходимо будет импортировать pgp-ключи.&lt;/li>
&lt;li>Не поддерживает разблокировку по биометрическим данным. Необходимо набирать пароль ключа.&lt;/li>
&lt;/ul>
&lt;h3 id="пакеты-для-emacs">&lt;span class="section-num">3.4&lt;/span> Пакеты для Emacs&lt;/h3>
&lt;h4 id="pass">&lt;span class="section-num">3.4.1&lt;/span> pass&lt;/h4>
&lt;ul>
&lt;li>Основной режим для управления хранилищем и редактирования записей.&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/12/02/emacs-pass/">Emacs. Пакет pass&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/NicolasPetton/pass" target="_blank" rel="noopener">https://github.com/NicolasPetton/pass&lt;/a>&lt;/li>
&lt;li>Позволяет редактировать базу данных паролей.&lt;/li>
&lt;li>Запуск:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">M-x&lt;/span> &lt;span class="nv">pass&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="helm-pass">&lt;span class="section-num">3.4.2&lt;/span> helm-pass&lt;/h4>
&lt;ul>
&lt;li>Интерфейс &lt;em>helm&lt;/em> для &lt;em>pass&lt;/em>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/emacs-helm/helm-pass" target="_blank" rel="noopener">https://github.com/emacs-helm/helm-pass&lt;/a>&lt;/li>
&lt;li>Запуск:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">M-x&lt;/span> &lt;span class="nv">helm-pass&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Выдаёт в минибуфере список записей из базы паролей. При нажатии &lt;code>Enter&lt;/code> копирует пароль в буфер.&lt;/li>
&lt;/ul>
&lt;h4 id="ivy-pass">&lt;span class="section-num">3.4.3&lt;/span> ivy-pass&lt;/h4>
&lt;ul>
&lt;li>Интерфейс &lt;em>ivy&lt;/em> для &lt;em>pass&lt;/em>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/ecraven/ivy-pass" target="_blank" rel="noopener">https://github.com/ecraven/ivy-pass&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">4&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Linux&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>&lt;code>pass&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/pass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>gopass&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/gopass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>qtpass&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/qtpass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Gopass UI
&lt;ul>
&lt;li>Находится в оверлее awesome (&lt;a href="https://gitlab.awesome-it.de/overlays/awesome/" target="_blank" rel="noopener">https://gitlab.awesome-it.de/overlays/awesome/&lt;/a>).&lt;/li>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/gopass-ui
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Fedora
&lt;ul>
&lt;li>
&lt;p>&lt;code>pass&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install pass pass-otp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>gopass&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dnf install gopass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Macintosh&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">brew install pass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Windows&lt;/p>
&lt;ul>
&lt;li>&lt;code>pass&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install pass4win
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>gopass&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install gopass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/h2>
&lt;h3 id="ключи-gpg">&lt;span class="section-num">5.1&lt;/span> Ключи GPG&lt;/h3>
&lt;ul>
&lt;li>Просмотр списка ключей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --list-secret-keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если ключа нет, нужно создать новый:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --full-generate-key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="инициализация-хранилища">&lt;span class="section-num">5.2&lt;/span> Инициализация хранилища&lt;/h3>
&lt;h4 id="pass">&lt;span class="section-num">5.2.1&lt;/span> pass&lt;/h4>
&lt;ul>
&lt;li>Инициализируем хранилище:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass init &amp;lt;gpg-id or email&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="gopass">&lt;span class="section-num">5.2.2&lt;/span> gopass&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Для &lt;code>gopass&lt;/code> можно просто ввести:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Программа запросит ключ и почту для git.&lt;/li>
&lt;li>Будет инициализирована сразу структура git в каталоге &lt;code>~/.password-store&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="qtpass">&lt;span class="section-num">5.2.3&lt;/span> qtpass&lt;/h4>
&lt;ul>
&lt;li>Также можно инициализировать с помощью графического инструмента &lt;code>qtpass&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">qtpass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-с-git">&lt;span class="section-num">5.3&lt;/span> Синхронизация с git&lt;/h3>
&lt;h4 id="gopass">&lt;span class="section-num">5.3.1&lt;/span> gopass&lt;/h4>
&lt;ul>
&lt;li>При инициализации &lt;code>gopass&lt;/code> инициализирует также структуру git.&lt;/li>
&lt;li>При необходимости это можно сделать отдельно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass git init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Также можно задать адрес репозитория на хостинге (репозиторий необходимо предварительно создать):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass git remote add origin git@github.com:&amp;lt;git_username&amp;gt;/&amp;lt;git_repo&amp;gt;.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для синхронизации выполняется следующая команда:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass sync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="прямые-изменения">&lt;span class="section-num">5.3.2&lt;/span> Прямые изменения&lt;/h4>
&lt;ul>
&lt;li>Следует заметить, что отслеживаются только изменения, сделанные через сам &lt;code>gopass&lt;/code> (или &lt;code>pass&lt;/code>).&lt;/li>
&lt;li>Если изменения сделаны непосредственно на файловой системе, необходимо вручную закоммитить и выложить изменения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/.password-store/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -am &lt;span class="s1">&amp;#39;edit manually&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверить статус синхронизации модно командой
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass git status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="тонкие-настройки">&lt;span class="section-num">5.4&lt;/span> Тонкие настройки&lt;/h3>
&lt;ul>
&lt;li>По умолчанию каталог с паролями называется &lt;code>~/.password-store&lt;/code>. Но его можно задать также с помощью переменной окружения &lt;code>PASSWORD_STORE_DIR&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="устранение-сбоев">&lt;span class="section-num">5.5&lt;/span> Устранение сбоев&lt;/h3>
&lt;h4 id="невозможно-расшифровать-пароль">&lt;span class="section-num">5.5.1&lt;/span> Невозможно расшифровать пароль&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Команда &lt;code>gopass show secret&lt;/code> выдаёт &lt;code>Error: Failed to decrypt&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Можно установить в &lt;code>~/.bashrc&lt;/code> или &lt;code>~/.profile&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">GPG_TTY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>tty&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;a href="https://github.com/gopasspw/gopass/issues/208" target="_blank" rel="noopener">https://github.com/gopasspw/gopass/issues/208&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/gopasspw/gopass/issues/209" target="_blank" rel="noopener">https://github.com/gopasspw/gopass/issues/209&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="работа-с-паролями">&lt;span class="section-num">6&lt;/span> Работа с паролями&lt;/h2>
&lt;h3 id="создание-нового-пароля">&lt;span class="section-num">6.1&lt;/span> Создание нового пароля&lt;/h3>
&lt;h3 id="ручная-правка-базы-паролей">&lt;span class="section-num">6.2&lt;/span> Ручная правка базы паролей&lt;/h3>
&lt;ul>
&lt;li>Базу паролей можно редактировать и без использования специальных утилит.&lt;/li>
&lt;li>Можно использовать для исправления структуры каталогов и имён файлов.&lt;/li>
&lt;li>Синхронизацию с &lt;em>git&lt;/em> придётся выполнять вручную.&lt;/li>
&lt;li>Не следует использовать символьные ссылки. Они не переносимы между разными операционными системами и могут нарушиться при синхронизации (например, с Android).&lt;/li>
&lt;li>После ручного редактирования рекомендуется проверить структуру базы паролей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass fsck
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="миграция-баз-паролей-из-других-программ">&lt;span class="section-num">7&lt;/span> Миграция баз паролей из других программ&lt;/h2>
&lt;h3 id="скрипты-для-миграции">&lt;span class="section-num">7.1&lt;/span> Скрипты для миграции&lt;/h3>
&lt;h4 id="pass-import">&lt;span class="section-num">7.1.1&lt;/span> pass-import&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://github.com/roddhjav/pass-import" target="_blank" rel="noopener">https://github.com/roddhjav/pass-import&lt;/a>&lt;/li>
&lt;li>Расширение для &lt;code>pass&lt;/code>.&lt;/li>
&lt;li>Можно использовать для разных менеджеров паролей:
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Целевой менеджер паролей&lt;/th>
&lt;th>Формат&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>csv&lt;/td>
&lt;td>csv&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gopass&lt;/td>
&lt;td>gopass&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>keepass&lt;/td>
&lt;td>kdbx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>keepassx2&lt;/td>
&lt;td>kdbx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>keepassxc&lt;/td>
&lt;td>kdbx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pass&lt;/td>
&lt;td>pass&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>Находится в оверлее &lt;code>wjn-overlay&lt;/code> (&lt;a href="https://data.gpo.zugaina.org/wjn-overlay/" target="_blank" rel="noopener">https://data.gpo.zugaina.org/wjn-overlay/&lt;/a>).&lt;/li>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/pass-import
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Использование&lt;/p>
&lt;ul>
&lt;li>Для &lt;code>pass&lt;/code>:
&lt;ul>
&lt;li>Автоопределение формата источника:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass import path/to/passwords
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если автоопределение не сработало:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass import &amp;lt;password_manager&amp;gt; path/to/passwords
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если конвертация не для &lt;code>pass&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pimport &amp;lt;new_pm&amp;gt; &amp;lt;former_pm&amp;gt; path/to/passwords --out path/to/destination/pm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="отдельные-скрипты">&lt;span class="section-num">7.1.2&lt;/span> Отдельные скрипты&lt;/h4>
&lt;ul>
&lt;li>На странице &lt;a href="https://www.passwordstore.org/" target="_blank" rel="noopener">https://www.passwordstore.org/&lt;/a> приведён список отдельных скриптов для миграции из разных служб.&lt;/li>
&lt;li>Используйте в целях эксперимента.&lt;/li>
&lt;/ul>
&lt;h3 id="конкретные-рецепты">&lt;span class="section-num">7.2&lt;/span> Конкретные рецепты&lt;/h3>
&lt;h4 id="lastpass">&lt;span class="section-num">7.2.1&lt;/span> LastPass&lt;/h4>
&lt;ul>
&lt;li>В меню выберите &lt;em>Account options &amp;gt; Advanced &amp;gt; Export &amp;gt; LastPass CVS File&lt;/em>.&lt;/li>
&lt;li>Сохраняем результат в файл &lt;code>lastpass_export.csv&lt;/code>.&lt;/li>
&lt;li>Конвертация с помощью &lt;code>pass-import&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass import lastpass lastpass_export.csv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Альтернативный вариант. Не используйте его. Результат не соответствует структуре именования &lt;code>pass&lt;/code>.
&lt;ul>
&lt;li>Скачайте скрипт:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget https://git.zx2c4.com/password-store/plain/contrib/importers/lastpass2pass.rb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сделайте скрипт исполняемым:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod +x lastpass2pass.rb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Импортируйте пароли:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">./lastpass2pass.rb lastpass_export.csv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="экспорт-паролей">&lt;span class="section-num">7.3&lt;/span> Экспорт паролей&lt;/h3>
&lt;h4 id="pass2csv">&lt;span class="section-num">7.3.1&lt;/span> pass2csv&lt;/h4>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/reinefjord/pass2csv" target="_blank" rel="noopener">https://github.com/reinefjord/pass2csv&lt;/a>&lt;/li>
&lt;li>Сайт: &lt;a href="https://pypi.org/project/pass2csv/" target="_blank" rel="noopener">https://pypi.org/project/pass2csv/&lt;/a>&lt;/li>
&lt;li>Экспортирует хранилище паролей pass в &lt;em>csv&lt;/em>.&lt;/li>
&lt;li>Поддерживает задание шаблонов экспорта.&lt;/li>
&lt;/ul>
&lt;h2 id="дополнительные-возможности">&lt;span class="section-num">8&lt;/span> Дополнительные возможности&lt;/h2>
&lt;h3 id="проверка-утечки-пароля">&lt;span class="section-num">8.1&lt;/span> Проверка утечки пароля&lt;/h3>
&lt;ul>
&lt;li>Проверка утечки пароля производится с помощью сервиса &lt;a href="https://haveibeenpwned.com/" target="_blank" rel="noopener">https://haveibeenpwned.com/&lt;/a> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/03/have-i-been-pwned-hibp/">Have I Been Pwned (HIBP)&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h4 id="pass">&lt;span class="section-num">8.1.1&lt;/span> pass&lt;/h4>
&lt;ul>
&lt;li>Проверка производится с помощью плагина &lt;code>pass-audit&lt;/code>.&lt;/li>
&lt;li>Код: &lt;a href="https://github.com/roddhjav/pass-audit" target="_blank" rel="noopener">https://github.com/roddhjav/pass-audit&lt;/a>.&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Gentoo:
Находится в репозитории &lt;a href="https://github.com/yamadharma/gentoo-portage-local" target="_blank" rel="noopener">https://github.com/yamadharma/gentoo-portage-local&lt;/a>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/pass-audit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Использование:
&lt;ul>
&lt;li>Проверка по парольному каталогу или по парольной записи:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pass audit &lt;span class="o">[&lt;/span>каталог или одна запись&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Без параметра проверяет всю базу паролей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="gopass">&lt;span class="section-num">8.1.2&lt;/span> gopass&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Простая проверка качества пароля&lt;/p>
&lt;ul>
&lt;li>Простая проверка качества пароля по парольному каталогу или по парольной записи:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass audit &lt;span class="o">[&lt;/span>каталог или одна запись&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Без параметра проверяет всю базу паролей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Проверка утечки пароля&lt;/p>
&lt;ul>
&lt;li>Начиная с версии gopass-1.12.0 команда создания интерфейса взаимодействия с HIPB выделена в отдельную утилиту.&lt;/li>
&lt;li>Проверка производится с помощью плагина &lt;code>gopass-hibp&lt;/code>.&lt;/li>
&lt;li>Код: &lt;a href="https://github.com/gopasspw/gopass-hibp" target="_blank" rel="noopener">https://github.com/gopasspw/gopass-hibp&lt;/a>.&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge app-admin/gopass-hibp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Использование:
&lt;ul>
&lt;li>Использование HIBPv2 API
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass-hibp api
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Сравнение хешей паролей с дампом HIBP:
&lt;ul>
&lt;li>Скачиваем дамп SHA-1 хешей паролей с &lt;a href="https://haveibeenpwned.com/Passwords" target="_blank" rel="noopener">https://haveibeenpwned.com/Passwords&lt;/a> и распаковываем его.&lt;/li>
&lt;li>Проверяем пароли:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gopass-hibp dump pwned-passwords-1.0.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>Этот вариант помедленнее.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Проверяет сразу все записи в базе паролей. Один пароль проверить нельзя.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="одноразовые-пароли">&lt;span class="section-num">8.2&lt;/span> Одноразовые пароли&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/24/password-manager-pass-one-time-passwords/">Менеджер паролей pass. Одноразовые пароли&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="интеграция-с-другими-программами">&lt;span class="section-num">9&lt;/span> Интеграция с другими программами&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/11/20/password-manager-pass-integration/">Менеджер паролей pass. Интеграция с другими программами&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Мультимедиа сервер PipeWire</title><link>https://yamadharma.github.io/ru/post/2021/04/28/pipewire-multimedia-server/</link><pubDate>Wed, 28 Apr 2021 16:28:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/04/28/pipewire-multimedia-server/</guid><description>&lt;p>PipeWire есть новый аудио и видео сервер. В основном для Wayland. Должен заменить другие видео-серверы.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка-пользовательской-сессии">&lt;span class="section-num">3&lt;/span> Настройка пользовательской сессии&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#права-пользователя">&lt;span class="section-num">3.1&lt;/span> Права пользователя&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-запуска-на-уровне-пользователя">&lt;span class="section-num">3.2&lt;/span> Настройка запуска на уровне пользователя&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-запуска-на-уровне-системы">&lt;span class="section-num">3.3&lt;/span> Настройка запуска на уровне системы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование-с-другими-серверами">&lt;span class="section-num">4&lt;/span> Использование с другими серверами&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#замена-pulseaudio">&lt;span class="section-num">4.1&lt;/span> Замена PulseAudio&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pulseaudio-с-поддержкой-запуска-как-демон">&lt;span class="section-num">4.1.1&lt;/span> PulseAudio с поддержкой запуска как демон&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pulseaudio-без-поддержки-запуска-кок-демон">&lt;span class="section-num">4.1.2&lt;/span> PulseAudio без поддержки запуска кок демон&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#замена-jack">&lt;span class="section-num">4.2&lt;/span> Замена Jack&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#проверка-работы">&lt;span class="section-num">5&lt;/span> Проверка работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">6&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурационные-файлы">&lt;span class="section-num">6.1&lt;/span> Конфигурационные файлы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#профили-устройств">&lt;span class="section-num">6.2&lt;/span> Профили устройств&lt;/a>&lt;/li>
&lt;li>&lt;a href="#изменение-частоты-дискретизации">&lt;span class="section-num">6.3&lt;/span> Изменение частоты дискретизации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий проекта: &lt;a href="https://gitlab.freedesktop.org/pipewire/pipewire" target="_blank" rel="noopener">https://gitlab.freedesktop.org/pipewire/pipewire&lt;/a>&lt;/li>
&lt;li>Wiki проекта: &lt;a href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/home" target="_blank" rel="noopener">https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/home&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Чтобы использовать PipeWire вместо PulseAudio для звукового сервера, включите USE-флаг &lt;code>USE=sound-server&lt;/code> для &lt;code>media-video/pipewire&lt;/code> и отключите USE-флаг &lt;code>USE=daemon&lt;/code> для &lt;code>media-sound/pulseaudio&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Добавьте в файл &lt;code>/etc/portage/package.use&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">media-video/pipewire sound-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">media-sound/pulseaudio -daemon
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Удалите &lt;code>media-sound/pulseaudio-daemon&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -Cv media-sound/pulseaudio-daemon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emerge -Cv media-sound/paprefs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установить само приложение:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge media-video/pipewire
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emerge media-video/wireplumber
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-пользовательской-сессии">&lt;span class="section-num">3&lt;/span> Настройка пользовательской сессии&lt;/h2>
&lt;h3 id="права-пользователя">&lt;span class="section-num">3.1&lt;/span> Права пользователя&lt;/h3>
&lt;ul>
&lt;li>Желательно добавить пользователя в группу &lt;code>audio&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">usermod -aG audio &amp;lt;user&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-запуска-на-уровне-пользователя">&lt;span class="section-num">3.2&lt;/span> Настройка запуска на уровне пользователя&lt;/h3>
&lt;ul>
&lt;li>По умолчанию &lt;em>PipeWire&lt;/em> настроен на использование &lt;em>systemd&lt;/em>.&lt;/li>
&lt;li>Следует настроить его запуск для пользователя.&lt;/li>
&lt;li>Флаг &lt;code>--now&lt;/code> позволяет одновременно активировать и запускать сервис.&lt;/li>
&lt;li>Отключите &lt;code>pulseaudio&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user disable --now pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для каждого пользователя можно установить активацию по обращению к сокету:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.socket pipewire-pulse.socket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В качестве альтернативы можно сразу запускать необходимый процесс:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.service pipewire-pulse.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключите демон сессии &lt;code>pipewire-media-session.service&lt;/code> и запустите &lt;code>wireplumber&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user disable pipewire-media-session.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl --user --force &lt;span class="nb">enable&lt;/span> --now wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-запуска-на-уровне-системы">&lt;span class="section-num">3.3&lt;/span> Настройка запуска на уровне системы&lt;/h3>
&lt;ul>
&lt;li>Под пользователем &lt;code>root&lt;/code> можно настроить запуск сервисов на уровне системы, заменив &lt;code>--user&lt;/code> на &lt;code>--global&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --global &lt;span class="nb">enable&lt;/span> pipewire.socket pipewire-pulse.socket
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl --global --force &lt;span class="nb">enable&lt;/span> wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При выборе этого варианта службы должны быть запущены вручную под пользователем пользователем.&lt;/li>
&lt;/ul>
&lt;h2 id="использование-с-другими-серверами">&lt;span class="section-num">4&lt;/span> Использование с другими серверами&lt;/h2>
&lt;h3 id="замена-pulseaudio">&lt;span class="section-num">4.1&lt;/span> Замена PulseAudio&lt;/h3>
&lt;h4 id="pulseaudio-с-поддержкой-запуска-как-демон">&lt;span class="section-num">4.1.1&lt;/span> PulseAudio с поддержкой запуска как демон&lt;/h4>
&lt;ul>
&lt;li>Ранее &lt;em>PulseAudio&lt;/em> собиралась только с поддержкой запуска как демон.&lt;/li>
&lt;li>Если &lt;em>PulseAudio&lt;/em> настроено с поддержкой запуска как демона&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>, то его необходимо отключить:
&lt;ul>
&lt;li>запретить запуск &lt;code>pulseaudio&lt;/code>;&lt;/li>
&lt;li>отключить запуск в файле конфигурации:
&lt;ul>
&lt;li>отредактируйте файл &lt;code>/etc/pulse/daemon.conf&lt;/code> и замените &lt;code>daemonize&lt;/code> на &lt;code>daemonize = no&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Одновременно отключим &lt;em>PulseAudio&lt;/em> и включим &lt;em>PipeWire&lt;/em> для каждого пользователя:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user disable --now pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.socket pipewire-pulse.socket wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно замаскировать PulseAudio (но он всё равно может стартовать автоматически):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user mask pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Кроме того, рекомендуется удалить файлы, оставшиеся от PulseAudio:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm -r ~/.config/pulse/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="pulseaudio-без-поддержки-запуска-кок-демон">&lt;span class="section-num">4.1.2&lt;/span> PulseAudio без поддержки запуска кок демон&lt;/h4>
&lt;ul>
&lt;li>Теперь &lt;em>PulseAudio&lt;/em> рекомендуется собирать без поддержки демона.&lt;/li>
&lt;li>В этом случае всё работает сразу.&lt;/li>
&lt;li>Напомним, что на уровне пользователя следует подключить &lt;code>pipewire-pulse.socket&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user disable --now pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.socket pipewire-pulse.socket wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="замена-jack">&lt;span class="section-num">4.2&lt;/span> Замена Jack&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для маршрутизации клиентов Jack через PipeWire в настоящее время
предпочтительно запускать их через &lt;code>pw-jack&lt;/code>, который использует
&lt;code>LD_PRELOAD&lt;/code> для использования библиотек PipeWire вместо Jack, например:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pw-jack &amp;lt;application&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Можно задать собственный размер буфера, установив размер_буфера/частота_дискретизации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PIPEWIRE_LATENCY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;128/48000&amp;#34;&lt;/span> pw-jack &amp;lt;application&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="проверка-работы">&lt;span class="section-num">5&lt;/span> Проверка работы&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Для &lt;em>PipeWire&lt;/em> возможно посмотреть информацию по серверу &lt;code>pipewire&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LANG&lt;/span>&lt;span class="o">=&lt;/span>C pactl info &lt;span class="p">|&lt;/span> grep &lt;span class="s2">&amp;#34;Server Name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В результате должна присутствовать строчка типа такой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Server Name: PulseAudio &lt;span class="o">(&lt;/span>on PipeWire 0.3.56&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">6&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="конфигурационные-файлы">&lt;span class="section-num">6.1&lt;/span> Конфигурационные файлы&lt;/h3>
&lt;ul>
&lt;li>Конфигурация, идущая в комплекте с дистрибутивом, находится в &lt;code>/usr/share/pipewire&lt;/code>.&lt;/li>
&lt;li>Для изменения параметров скопируйте файлы конфигурации в:
&lt;ul>
&lt;li>&lt;code>/etc/pipewire&lt;/code>: уровень системы;&lt;/li>
&lt;li>&lt;code>~/.config/pipewire&lt;/code>: уровень пользователя.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="профили-устройств">&lt;span class="section-num">6.2&lt;/span> Профили устройств&lt;/h3>
&lt;ul>
&lt;li>Профили устройств хранятся в каталоге &lt;code>~/.local/state/pipewire/media-session.d/&lt;/code>.&lt;/li>
&lt;li>При запуске в первый раз с подключёнными внешними устройствами (например, usb-устройствами), профили для них не создаются. Необходимо их переподключить в этом случае.&lt;/li>
&lt;/ul>
&lt;h3 id="изменение-частоты-дискретизации">&lt;span class="section-num">6.3&lt;/span> Изменение частоты дискретизации&lt;/h3>
&lt;ul>
&lt;li>По умолчанию &lt;em>PipeWire&lt;/em> глобально устанавливает частоту дискретизации равную 48 КГц.&lt;/li>
&lt;li>Для изменения нужно отредактировать строку &lt;code>default.clock.rate = 48000&lt;/code> в файле конфигурации &lt;code>/etc/pipewire/pipewire.conf&lt;/code> или &lt;code>~/.config/pipewire/pipewire.conf&lt;/code>.&lt;/li>
&lt;li>Например, если вы хотите частоту дискретизации в 192 КГц, раскомментируйте строку и поменяйте её на &lt;code>default.clock.rate = 192000&lt;/code>.&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>В Gentoo это означает, что &lt;code>pulseaudio&lt;/code> скомпилирован с флагом &lt;code>daemon&lt;/code>.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Загрузочная флешка</title><link>https://yamadharma.github.io/ru/post/2021/04/10/bootable-usb-stick/</link><pubDate>Sat, 10 Apr 2021 18:46:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/04/10/bootable-usb-stick/</guid><description>&lt;p>Задача состояла в том, чтобы сделать загрузочную флешку, способную загружать ISO-образы.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#программный-загрузчик">&lt;span class="section-num">1&lt;/span> Программный загрузчик&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-под-windows">&lt;span class="section-num">2.1&lt;/span> Установка под Windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-для-linux">&lt;span class="section-num">2.2&lt;/span> Установка для Linux&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-из-командной-строки">&lt;span class="section-num">2.2.1&lt;/span> Установка из командной строки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#графическая-установка">&lt;span class="section-num">2.2.2&lt;/span> Графическая установка&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#копирование-образов-систем">&lt;span class="section-num">2.3&lt;/span> Копирование образов систем&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#используемые-образы-операционных-систем">&lt;span class="section-num">3&lt;/span> Используемые образы операционных систем&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#systemrescue">&lt;span class="section-num">3.1&lt;/span> SystemRescue&lt;/a>&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">3.2&lt;/span> Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#видезапись">&lt;span class="section-num">4&lt;/span> Видезапись&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;p>Несмотря на наличие usb-диска в корпусе Zalman ZM-VE300 (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/06/06/zalman-zm-ve300/">Контейнер для жесткого диска Zalman ZM-VE300&lt;/a>), хотелось также иметь бутовую флешку, загружающую операционные системы из ISO-образов.&lt;/p>
&lt;h2 id="программный-загрузчик">&lt;span class="section-num">1&lt;/span> Программный загрузчик&lt;/h2>
&lt;ul>
&lt;li>В качестве программного загрузчика был выбран Ventoy:
&lt;ul>
&lt;li>&lt;a href="https://www.ventoy.net/" target="_blank" rel="noopener">https://www.ventoy.net/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/ventoy/Ventoy" target="_blank" rel="noopener">https://github.com/ventoy/Ventoy&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Основан на загрузчике &lt;code>grub2&lt;/code> (&lt;a href="https://ru.wikipedia.org/wiki/GNU_GRUB" target="_blank" rel="noopener">https://ru.wikipedia.org/wiki/GNU_GRUB&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="установка-под-windows">&lt;span class="section-num">2.1&lt;/span> Установка под Windows&lt;/h3>
&lt;ul>
&lt;li>Скачиваем откомпилированный образ для Windows из &lt;a href="https://github.com/ventoy/Ventoy/releases" target="_blank" rel="noopener">https://github.com/ventoy/Ventoy/releases&lt;/a>.&lt;/li>
&lt;li>Запускаем установщик:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Ventoy2Disk.exe
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-для-linux">&lt;span class="section-num">2.2&lt;/span> Установка для Linux&lt;/h3>
&lt;ul>
&lt;li>Скачиваем откомпилированный образ для Linux из &lt;a href="https://github.com/ventoy/Ventoy/releases" target="_blank" rel="noopener">https://github.com/ventoy/Ventoy/releases&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h4 id="установка-из-командной-строки">&lt;span class="section-num">2.2.1&lt;/span> Установка из командной строки&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Запустить от пользователя &lt;code>root&lt;/code> установщик:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Ventoy2Disk.sh &lt;span class="o">{&lt;/span> -i &lt;span class="p">|&lt;/span> -I &lt;span class="p">|&lt;/span> -u &lt;span class="o">}&lt;/span> /dev/sdX
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Здесь&lt;/p>
&lt;ul>
&lt;li>&lt;code>/dev/sdX&lt;/code> &amp;mdash; usb-диск (флешка);&lt;/li>
&lt;li>&lt;code>-i&lt;/code> &amp;mdash; установить загрузчик;&lt;/li>
&lt;li>&lt;code>-I&lt;/code> &amp;mdash; установить загрузчик принудительно (даже если на флешке был уже установлен этот загрузчик);&lt;/li>
&lt;li>&lt;code>-u&lt;/code> &amp;mdash; обновить загрузчик.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="графическая-установка">&lt;span class="section-num">2.2.2&lt;/span> Графическая установка&lt;/h4>
&lt;ul>
&lt;li>Начиная с версии 1.0.52 поддерживается графическая установка.&lt;/li>
&lt;li>Исполняемый файл имеет название вида &lt;code>VentoyGUI.&amp;lt;архитектура&amp;gt;&lt;/code>.&lt;/li>
&lt;li>Установщик запускается из-под пользователя &lt;code>root&lt;/code> или из-под обычного пользователя.&lt;/li>
&lt;/ul>
&lt;h3 id="копирование-образов-систем">&lt;span class="section-num">2.3&lt;/span> Копирование образов систем&lt;/h3>
&lt;ul>
&lt;li>После завершения установки usb-накопитель будет разделен на 2 раздела.&lt;/li>
&lt;li>1 раздел форматируется по умолчанию файловой системой exFAT (можно потом переформатировать самому, по желанию в FAT32/NTFS/UDF/XFS/Ext2/Ext3/Ext4).&lt;/li>
&lt;li>Образы операционных систем копируются на 2 раздел.&lt;/li>
&lt;li>По умолчанию поиск образов систем ведётся во всех подкаталогах.&lt;/li>
&lt;li>2 раздел служебный (для UEFI).&lt;/li>
&lt;/ul>
&lt;h2 id="используемые-образы-операционных-систем">&lt;span class="section-num">3&lt;/span> Используемые образы операционных систем&lt;/h2>
&lt;h3 id="systemrescue">&lt;span class="section-num">3.1&lt;/span> SystemRescue&lt;/h3>
&lt;ul>
&lt;li>В качестве образа для администрирования системы обычно использую SystemRescue.
&lt;ul>
&lt;li>&lt;a href="https://www.system-rescue-cd.org/" target="_blank" rel="noopener">https://www.system-rescue-cd.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="windows">&lt;span class="section-num">3.2&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>У нас имеется лицензия на Windows for Education. Поэтому я использую следующий образ:
&lt;ul>
&lt;li>&lt;a href="https://www.microsoft.com/ru-ru/software-download/vlacademicwindows10iso" target="_blank" rel="noopener">https://www.microsoft.com/ru-ru/software-download/vlacademicwindows10iso&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="видезапись">&lt;span class="section-num">4&lt;/span> Видезапись&lt;/h2>
&lt;p>Видеозапись процесса создания бутовой флешки.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/vHFncWdJCzY?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div></description></item><item><title>Системное администрирование</title><link>https://yamadharma.github.io/ru/post/2021/04/10/system-administration/</link><pubDate>Sat, 10 Apr 2021 18:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/04/10/system-administration/</guid><description>&lt;p>По мере сил занимаюсь настройкой компьютеров. В основном на Linux.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#devops">&lt;span class="section-num">1&lt;/span> DevOps&lt;/a>&lt;/li>
&lt;li>&lt;a href="#безопасность">&lt;span class="section-num">2&lt;/span> Безопасность&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#пароли">&lt;span class="section-num">2.1&lt;/span> Пароли&lt;/a>&lt;/li>
&lt;li>&lt;a href="#разное">&lt;span class="section-num">2.2&lt;/span> Разное&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#гаджеты">&lt;span class="section-num">3&lt;/span> Гаджеты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#графическое-окружение">&lt;span class="section-num">4&lt;/span> Графическое окружение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">4.1&lt;/span> Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#wayland">&lt;span class="section-num">4.2&lt;/span> Wayland&lt;/a>&lt;/li>
&lt;li>&lt;a href="#x11">&lt;span class="section-num">4.3&lt;/span> X11&lt;/a>&lt;/li>
&lt;li>&lt;a href="#темы-оформления">&lt;span class="section-num">4.4&lt;/span> Темы оформления&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#инфраструктура-в-рудн">&lt;span class="section-num">5&lt;/span> Инфраструктура в РУДН&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурации">&lt;span class="section-num">6&lt;/span> Конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#оборудование">&lt;span class="section-num">7&lt;/span> Оборудование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подбор-компьютера">&lt;span class="section-num">7.1&lt;/span> Подбор компьютера&lt;/a>&lt;/li>
&lt;li>&lt;a href="#процессоры">&lt;span class="section-num">7.2&lt;/span> Процессоры&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#операционные-системы">&lt;span class="section-num">8&lt;/span> Операционные системы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">8.1&lt;/span> Windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">8.2&lt;/span> Linux&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-операционных-систем">&lt;span class="section-num">8.3&lt;/span> Установка операционных систем&lt;/a>&lt;/li>
&lt;li>&lt;a href="#серверные-системы">&lt;span class="section-num">8.4&lt;/span> Серверные системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-программным-обеспечением">&lt;span class="section-num">8.5&lt;/span> Управление программным обеспечением&lt;/a>&lt;/li>
&lt;li>&lt;a href="#терминальный-доступ">&lt;span class="section-num">8.6&lt;/span> Терминальный доступ&lt;/a>&lt;/li>
&lt;li>&lt;a href="#утилиты-настройки-среды">&lt;span class="section-num">8.7&lt;/span> Утилиты настройки среды&lt;/a>&lt;/li>
&lt;li>&lt;a href="#загрузчики">&lt;span class="section-num">8.8&lt;/span> Загрузчики&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#организация-обучения">&lt;span class="section-num">9&lt;/span> Организация обучения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пользовательские-программы">&lt;span class="section-num">10&lt;/span> Пользовательские программы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#виртуализация">&lt;span class="section-num">10.1&lt;/span> Виртуализация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#вычисления">&lt;span class="section-num">10.2&lt;/span> Вычисления&lt;/a>&lt;/li>
&lt;li>&lt;a href="#квантовая-химия">&lt;span class="section-num">10.3&lt;/span> Квантовая химия&lt;/a>&lt;/li>
&lt;li>&lt;a href="#наборы-программ">&lt;span class="section-num">10.4&lt;/span> Наборы программ&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обработка-видео">&lt;span class="section-num">10.5&lt;/span> Обработка видео&lt;/a>&lt;/li>
&lt;li>&lt;a href="#офисные-программы">&lt;span class="section-num">10.6&lt;/span> Офисные программы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#просмотрщики">&lt;span class="section-num">10.7&lt;/span> Просмотрщики&lt;/a>&lt;/li>
&lt;li>&lt;a href="#работа-с-дисками">&lt;span class="section-num">10.8&lt;/span> Работа с дисками&lt;/a>&lt;/li>
&lt;li>&lt;a href="#работа-с-терминалом">&lt;span class="section-num">10.9&lt;/span> Работа с терминалом&lt;/a>&lt;/li>
&lt;li>&lt;a href="#работа-с-файлами">&lt;span class="section-num">10.10&lt;/span> Работа с файлами&lt;/a>&lt;/li>
&lt;li>&lt;a href="#редакторы">&lt;span class="section-num">10.11&lt;/span> Редакторы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сетевые-клиенты">&lt;span class="section-num">10.12&lt;/span> Сетевые клиенты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#броузеры">&lt;span class="section-num">10.12.1&lt;/span> Броузеры&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#синхронизация-файлов">&lt;span class="section-num">10.13&lt;/span> Синхронизация файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#телеконференции">&lt;span class="section-num">10.14&lt;/span> Телеконференции&lt;/a>&lt;/li>
&lt;li>&lt;a href="#утилиты">&lt;span class="section-num">10.15&lt;/span> Утилиты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файлы-конфигурации">&lt;span class="section-num">10.16&lt;/span> Файлы конфигурации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#профессиональные-требования">&lt;span class="section-num">11&lt;/span> Профессиональные требования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#разработка">&lt;span class="section-num">12&lt;/span> Разработка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#серверы-приложений">&lt;span class="section-num">13&lt;/span> Серверы приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#drupal">&lt;span class="section-num">13.1&lt;/span> Drupal&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ojs">&lt;span class="section-num">13.2&lt;/span> OJS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ldap">&lt;span class="section-num">13.3&lt;/span> Ldap&lt;/a>&lt;/li>
&lt;li>&lt;a href="#kerberos">&lt;span class="section-num">13.4&lt;/span> Kerberos&lt;/a>&lt;/li>
&lt;li>&lt;a href="#git">&lt;span class="section-num">13.5&lt;/span> Git&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#сети">&lt;span class="section-num">14&lt;/span> Сети&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#оборудование">&lt;span class="section-num">14.1&lt;/span> Оборудование&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vlan">&lt;span class="section-num">14.2&lt;/span> VLAN&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vpn">&lt;span class="section-num">14.3&lt;/span> VPN&lt;/a>&lt;/li>
&lt;li>&lt;a href="#железо">&lt;span class="section-num">14.4&lt;/span> Железо&lt;/a>&lt;/li>
&lt;li>&lt;a href="#коммутаторы">&lt;span class="section-num">14.5&lt;/span> Коммутаторы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-и-мониторинг">&lt;span class="section-num">14.6&lt;/span> Управление и мониторинг&lt;/a>&lt;/li>
&lt;li>&lt;a href="#протоколы">&lt;span class="section-num">14.7&lt;/span> Протоколы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#bittorrent">&lt;span class="section-num">14.7.1&lt;/span> Bittorrent&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#сетевые-сервисы">&lt;span class="section-num">14.8&lt;/span> Сетевые сервисы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#dns">&lt;span class="section-num">14.8.1&lt;/span> DNS&lt;/a>&lt;/li>
&lt;li>&lt;a href="#dhcp">&lt;span class="section-num">14.8.2&lt;/span> DHCP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#почта">&lt;span class="section-num">14.8.3&lt;/span> Почта&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#управление-и-мониторинг">&lt;span class="section-num">15&lt;/span> Управление и мониторинг&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файловые-системы">&lt;span class="section-num">16&lt;/span> Файловые системы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#локальные-файловые-системы">&lt;span class="section-num">16.1&lt;/span> Локальные файловые системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#сетевые-и-распределённые-файловые-системы">&lt;span class="section-num">16.2&lt;/span> Сетевые и распределённые файловые системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файловые-системы-объединения--union">&lt;span class="section-num">16.3&lt;/span> Файловые системы объединения (union)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#форматы-файлов">&lt;span class="section-num">17&lt;/span> Форматы файлов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#csv">&lt;span class="section-num">17.1&lt;/span> csv&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#шрифты">&lt;span class="section-num">18&lt;/span> Шрифты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#языки-программирования">&lt;span class="section-num">19&lt;/span> Языки программирования&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">20&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#серверы-приложений">&lt;span class="section-num">21&lt;/span> Серверы приложений&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="devops">&lt;span class="section-num">1&lt;/span> DevOps&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/16/continuous-integration-github-actions/">Непрерывная интеграция. GitHub Actions&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="безопасность">&lt;span class="section-num">2&lt;/span> Безопасность&lt;/h2>
&lt;h3 id="пароли">&lt;span class="section-num">2.1&lt;/span> Пароли&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/04/29/password-managers/">Менеджеры паролей&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/03/have-i-been-pwned-hibp/">Have I Been Pwned (HIBP)&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/24/one-time-passwords/">Одноразовые пароли&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="разное">&lt;span class="section-num">2.2&lt;/span> Разное&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/02/03/ssh-key-type/">Тип ключа ssh&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/04/30/acme-certificates/">Сертификаты ACME&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/03/hsts-mechanism/">Механизм HSTS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/30/fail2ban-basic-settings/">fail2ban. Основные настройки&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="гаджеты">&lt;span class="section-num">3&lt;/span> Гаджеты&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/22/gadget/">Гаджеты&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="графическое-окружение">&lt;span class="section-num">4&lt;/span> Графическое окружение&lt;/h2>
&lt;h3 id="linux">&lt;span class="section-num">4.1&lt;/span> Linux&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/pipewire-multimedia-server/">Мультимедиа сервер PipeWire&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/10/19/xdg-directories/">XDG. Каталоги&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/16/xdg-user-directories/">XDG. Пользовательские каталоги&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/04/02/xdg-mime-applications/">XDG. Приложения MIME&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/12/26/using-compose-key/">Ввод с помощью Compose&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/19/tiling-window-manager/">Тайловые оконные менеджеры&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/25/linux-console-kmscon/">Консоль linux. Kmscon&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/11/launcher/">Лаунчеры&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="wayland">&lt;span class="section-num">4.2&lt;/span> Wayland&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/14/wayland/">Wayland&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/03/06/linux-applications-progress-indicator-wob/">Linux. Приложения. Индикатор прогресса wob&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/">Переход на Sway&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="x11">&lt;span class="section-num">4.3&lt;/span> X11&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="темы-оформления">&lt;span class="section-num">4.4&lt;/span> Темы оформления&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/07/linux-themes/">Linux. Темы оформления&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="инфраструктура-в-рудн">&lt;span class="section-num">5&lt;/span> Инфраструктура в РУДН&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/04/20/switching-domain-pfur/">Переход на домен pfur.ru&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/11/computer-specifications/">Спецификации компьютеров&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/15/servers-donskaya/">Сервера на Донской&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/13/network-donskaya/">Сеть на Донской&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурации">&lt;span class="section-num">6&lt;/span> Конфигурации&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/03/06/my-software-configuration/">Моя конфигурация программного обеспечения&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="оборудование">&lt;span class="section-num">7&lt;/span> Оборудование&lt;/h2>
&lt;h3 id="подбор-компьютера">&lt;span class="section-num">7.1&lt;/span> Подбор компьютера&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/04/30/criteria-choosing-laptop/">Критерии выбора ноутбука&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/07/21/criteria-choosing-personal-computer/">Критерии выбора персонального компьютера&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/11/system-administrator-tools/">Набор вещей для системного администратора&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/11/keyboards/">Клавиатуры&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="процессоры">&lt;span class="section-num">7.2&lt;/span> Процессоры&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/20/microarchitecture-level-x86-64/">Варианты микроархитектуры x86&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="операционные-системы">&lt;span class="section-num">8&lt;/span> Операционные системы&lt;/h2>
&lt;h3 id="windows">&lt;span class="section-num">8.1&lt;/span> Windows&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/01/windows-administration/">Администрирование Windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/23/msys2-unix-applications-windows/">MSYS2. Приложения Unix под Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="linux">&lt;span class="section-num">8.2&lt;/span> Linux&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/07/linux-administration/">Администрирование Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-операционных-систем">&lt;span class="section-num">8.3&lt;/span> Установка операционных систем&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/04/10/bootable-usb-stick/">Загрузочная флешка&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/">Перенос Linux на btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/19/installing-grub-bootloader/">Установка загрузчика grub&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/11/12/using-vagrant/">Использование vagrant&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/27/sali-automatic-linux-installer/">Система установки SALI&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/27/salii-installer/">Система установки SALII&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="серверные-системы">&lt;span class="section-num">8.4&lt;/span> Серверные системы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/05/25/replacing-centos/">Замена Centos&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/02/10/centos8-changing-repository-addresses/">CentOS 8. Изменение адресов репозиториев&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/08/12/rockylinux-server-installation/">Rocky Linux. Установка сервера&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/25/redhat-based-systems-auto-update/">Автообновление систем на базе деривативов RedHat&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/12/redhat-derivatives-update/">Обновление деривативов RedHat&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="управление-программным-обеспечением">&lt;span class="section-num">8.5&lt;/span> Управление программным обеспечением&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/01/21/update-all-python-packages/">Обновление пакетов python&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="терминальный-доступ">&lt;span class="section-num">8.6&lt;/span> Терминальный доступ&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/07/23/virtual-desktop-infrastructure/">Virtual Desktop Infrastructure&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="утилиты-настройки-среды">&lt;span class="section-num">8.7&lt;/span> Утилиты настройки среды&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/07/24/module-utility/">Утилита module&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="загрузчики">&lt;span class="section-num">8.8&lt;/span> Загрузчики&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/01/29/refind-boot-manager/">Загрузчик rEFInd&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="организация-обучения">&lt;span class="section-num">9&lt;/span> Организация обучения&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/26/computer-classes/">Дисплейные классы&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/14/learning-management-systems/">Системы управления обучением&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="пользовательские-программы">&lt;span class="section-num">10&lt;/span> Пользовательские программы&lt;/h2>
&lt;h3 id="виртуализация">&lt;span class="section-num">10.1&lt;/span> Виртуализация&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/09/17/virtualbox-virtualization-system/">Система виртуализации VirtualBox&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/16/vmware-virtualization-system/">Система виртуализации VMware&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="вычисления">&lt;span class="section-num">10.2&lt;/span> Вычисления&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/07/22/principles-using-supercomputer/">Принципы работы на суперкомпьютере&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/07/regulations-access-supercomputer-rudn/">Регламент доступа к суперкомпьютеру РУДН&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="квантовая-химия">&lt;span class="section-num">10.3&lt;/span> Квантовая химия&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/10/17/quantum-chemistry-gamess/">Квантовая химия. Gamess&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="наборы-программ">&lt;span class="section-num">10.4&lt;/span> Наборы программ&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/26/android-apps/">Программы на Android&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="обработка-видео">&lt;span class="section-num">10.5&lt;/span> Обработка видео&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/23/video-kdenlive/">Видео. KDEnlive&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/10/21/video-processing-command-line/">Обработка видео. Командная строка&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/03/09/download-youtube/">Закачка с youtube&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="офисные-программы">&lt;span class="section-num">10.6&lt;/span> Офисные программы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/01/27/libreoffice-tuning/">Настройка LibreOffice&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/19/microsoft-office-alternatives/">Альтернативы Microsoft Office&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="просмотрщики">&lt;span class="section-num">10.7&lt;/span> Просмотрщики&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/20/pdf-viewer-zathura/">Pdf. Просмотр. Zathura&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="работа-с-дисками">&lt;span class="section-num">10.8&lt;/span> Работа с дисками&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/03/08/using-sfdisk/">Использование sfdisk&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="работа-с-терминалом">&lt;span class="section-num">10.9&lt;/span> Работа с терминалом&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/02/19/terminal-multiplexer-tmux/">Терминальный мультиплексор tmux&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/03/16/kitty-terminal-emulator/">Эмулятор терминала kitty&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="работа-с-файлами">&lt;span class="section-num">10.10&lt;/span> Работа с файлами&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/26/midnight-commander-file-manager/">Файловый менеджер Midnight Commander&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="редакторы">&lt;span class="section-num">10.11&lt;/span> Редакторы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/12/24/emacs/">Emacs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/04/vim-editor/">Редактор vim&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="сетевые-клиенты">&lt;span class="section-num">10.12&lt;/span> Сетевые клиенты&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/07/17/email-client-aerc/">Почтовый клиент aerc&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="броузеры">&lt;span class="section-num">10.12.1&lt;/span> Броузеры&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/02/28/google-chrome-flags/">Флаги запуска google chrome&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/05/nyxt-browser/">Броузер Nyxt&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2006/12/24/firefox-extention/">Firefox. Расширения&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/19/vim-keyboard-browsers/">Vim. Клавиатура. Броузеры&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/19/emacs-keyboard-browsers/">Emacs. Клавиатура. Броузеры&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-файлов">&lt;span class="section-num">10.13&lt;/span> Синхронизация файлов&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/10/27/rclone/">rclone&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/08/01/synchronizing-files-syncthing/">Синхронизация файлов с помощью syncthing&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/01/google-photo-download/">Скачать фотографии с google photo&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="телеконференции">&lt;span class="section-num">10.14&lt;/span> Телеконференции&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/23/video-conferencing-software-analogues/">Аналоги программ для видеоконференций&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="утилиты">&lt;span class="section-num">10.15&lt;/span> Утилиты&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/27/pdf-grep/">Pdf. Поиск подстроки&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/27/desktop-search/">Локальные поисковики&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/03/22/linux-archiving/">Linux. Архивирование&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/22/buku-bookmark-manager/">Менеджер закладок buku&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="файлы-конфигурации">&lt;span class="section-num">10.16&lt;/span> Файлы конфигурации&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/10/28/configuration-file-management-chezmoi/">Управление файлами конфигурации. Домашний каталог. Chezmoi&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/30/configuration-file-management-repo/">Управление файлами конфигурации. Домашний каталог. Репозиторий&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="профессиональные-требования">&lt;span class="section-num">11&lt;/span> Профессиональные требования&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/02/profession-system-administrator/">Профессия Системный администратор&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/01/27/limoncelli-test/">Тест Лимончелли&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="разработка">&lt;span class="section-num">12&lt;/span> Разработка&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/14/update-bitbucket-ssh-host-keys/">Обновление хостовых ключей ssh Bitbucket Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="серверы-приложений">&lt;span class="section-num">13&lt;/span> Серверы приложений&lt;/h2>
&lt;h3 id="drupal">&lt;span class="section-num">13.1&lt;/span> Drupal&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/13/move-drupal-other-machine/">Перенос Drupal на другую машину&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="ojs">&lt;span class="section-num">13.2&lt;/span> OJS&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/10/22/open-journal-systems/">Open Journal Systems&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="ldap">&lt;span class="section-num">13.3&lt;/span> Ldap&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/01/openldap-migration/">Перенос Openldap на другую машину&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/02/configure-openldap-rocky-linux/">Настройка Openldap&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="kerberos">&lt;span class="section-num">13.4&lt;/span> Kerberos&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/03/kerberos-migration/">Перенос kerberos на другую машину&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="git">&lt;span class="section-num">13.5&lt;/span> Git&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/29/git-hosting-gitea/">Хостинг git. gitea&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="сети">&lt;span class="section-num">14&lt;/span> Сети&lt;/h2>
&lt;h3 id="оборудование">&lt;span class="section-num">14.1&lt;/span> Оборудование&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/06/16/cisco-administration/">Администрирование Cisco&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/06/huawei-administration/">Администрирование Huawei&lt;/a>&lt;/li>
&lt;li>&lt;/li>
&lt;/ul>
&lt;h3 id="vlan">&lt;span class="section-num">14.2&lt;/span> VLAN&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/13/linux-vlan-configuration/">Linux. Настройка vlan&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="vpn">&lt;span class="section-num">14.3&lt;/span> VPN&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/02/05/l2tp-ipsec-vpn-client-setup/">VPN. L2TP+IPsec. Подключение клиента&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/19/cisco-vpn-client-setup/">Подключение к Cisco VPN&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="железо">&lt;span class="section-num">14.4&lt;/span> Железо&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/19/small-form-factor-pluggable/">Формат Small Form-factor Pluggable (SFP)&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="коммутаторы">&lt;span class="section-num">14.5&lt;/span> Коммутаторы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/05/dhcp-snooping/">DHCP snooping&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="управление-и-мониторинг">&lt;span class="section-num">14.6&lt;/span> Управление и мониторинг&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/02/observium-monitoring-system/">Система мониторинга Observium&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/20/librenms-monitoring-system/">Система мониторинга LibreNMS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/16/bandwidth-network-speed-monitoring/">Мониторинг пропускной способности и скорости сети&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/19/netbox/">Система управления сетью NetBox&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="протоколы">&lt;span class="section-num">14.7&lt;/span> Протоколы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/06/26/ipv6-protocol/">Протокол IPv6&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="bittorrent">&lt;span class="section-num">14.7.1&lt;/span> Bittorrent&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/01/31/bittorrent-opentracker/">bittorrent. Трекер opentracker&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="сетевые-сервисы">&lt;span class="section-num">14.8&lt;/span> Сетевые сервисы&lt;/h3>
&lt;h4 id="dns">&lt;span class="section-num">14.8.1&lt;/span> DNS&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/16/domain-name-system-dns/">Domain Name System (DNS)&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="dhcp">&lt;span class="section-num">14.8.2&lt;/span> DHCP&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/18/dhcp-kea-server/">Сервер DHCP Kea&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/19/server-isc-dhcp/">Сервер ISC DHCP&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/09/05/dhcp-snooping/">DHCP snooping&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/course/nettech/configuring-dhcp-ipv4/">Адресация IPv4 и IPv6. Настройка DHCP для IPv4&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/course/nettech/configuring-dhcpv6-ipv6/">Адресация IPv4 и IPv6. Настройка DHCPv6 для IPv6&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="почта">&lt;span class="section-num">14.8.3&lt;/span> Почта&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/04/13/imap-queries-command-line/">Запросы по протоколу imap из командной строки&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="управление-и-мониторинг">&lt;span class="section-num">15&lt;/span> Управление и мониторинг&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/01/18/cockpit-web-console/">Web консоль Cockpit&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/20/librenms-monitoring-system/">Система мониторинга LibreNMS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/03/02/observium-monitoring-system/">Система мониторинга Observium&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="файловые-системы">&lt;span class="section-num">16&lt;/span> Файловые системы&lt;/h2>
&lt;h3 id="локальные-файловые-системы">&lt;span class="section-num">16.1&lt;/span> Локальные файловые системы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-file-system/">Файловая система btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/05/26/data-deduplication/">Дедупликация данных&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/26/xfs-file-system/">Файловая система xfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="сетевые-и-распределённые-файловые-системы">&lt;span class="section-num">16.2&lt;/span> Сетевые и распределённые файловые системы&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/28/file-system-afs/">Файловая система afs&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/25/using-yandex-disk/">Использование Яндекс-диска&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/08/30/ipfs-file-system/">Файловая система ipfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="файловые-системы-объединения--union">&lt;span class="section-num">16.3&lt;/span> Файловые системы объединения (union)&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/01/28/mergerfs/">Файловая система mergerfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="форматы-файлов">&lt;span class="section-num">17&lt;/span> Форматы файлов&lt;/h2>
&lt;h3 id="csv">&lt;span class="section-num">17.1&lt;/span> csv&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/07/06/csv-csvkit/">Формат CSV. csvkit&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="шрифты">&lt;span class="section-num">18&lt;/span> Шрифты&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/10/27/linux-fonts/">Шрифты в Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="языки-программирования">&lt;span class="section-num">19&lt;/span> Языки программирования&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/11/05/hcl-programming-language/">Язык программирования HCL&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">20&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Awesome Sysadmin: &lt;a href="https://github.com/awesome-foss/awesome-sysadmin" target="_blank" rel="noopener">https://github.com/awesome-foss/awesome-sysadmin&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="серверы-приложений">&lt;span class="section-num">21&lt;/span> Серверы приложений&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/24/indico-event-organisation/">Система управления событиями Indico&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/09/15/moodle-learning-management-system/">Система управления обучением Moodle&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Использование смартфона в качестве камеры</title><link>https://yamadharma.github.io/ru/post/2021/02/12/smartphone-as-camera/</link><pubDate>Fri, 12 Feb 2021 18:38:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/02/12/smartphone-as-camera/</guid><description>&lt;p>При отсутствии компьютерной камеры можно в качестве камеры использовать смартфон.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#droidcam">&lt;span class="section-num">1&lt;/span> Droidcam&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#установка-программного-обеспечения">&lt;span class="section-num">1.1&lt;/span> Установка программного обеспечения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#смартфон">&lt;span class="section-num">1.1.1&lt;/span> Смартфон&lt;/a>&lt;/li>
&lt;li>&lt;a href="#windows">&lt;span class="section-num">1.1.2&lt;/span> Windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#linux">&lt;span class="section-num">1.1.3&lt;/span> Linux&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование-программы">&lt;span class="section-num">1.2&lt;/span> Использование программы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подключение-по-wi-fi">&lt;span class="section-num">1.2.1&lt;/span> Подключение по Wi-Fi&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-по-wi-fi--через-броузер">&lt;span class="section-num">1.2.2&lt;/span> Подключение по Wi-Fi (через броузер)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-по-wi-fi--создав-wi-fi-сервер">&lt;span class="section-num">1.2.3&lt;/span> Подключение по Wi-Fi (создав Wi-Fi сервер)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-по-usb">&lt;span class="section-num">1.2.4&lt;/span> Подключение по USB&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="droidcam">&lt;span class="section-num">1&lt;/span> Droidcam&lt;/h2>
&lt;p>Программный пакет &lt;a href="https://www.dev47apps.com/" target="_blank" rel="noopener">Droidcam&lt;/a> предполагает установку приложений как на смартфон, так и на компьютер.&lt;/p>
&lt;h3 id="установка-программного-обеспечения">&lt;span class="section-num">1.1&lt;/span> Установка программного обеспечения&lt;/h3>
&lt;p>Для работы следует установить клиента на смартфон и на операционную систему компьютера.&lt;/p>
&lt;h4 id="смартфон">&lt;span class="section-num">1.1.1&lt;/span> Смартфон&lt;/h4>
&lt;p>На смартфон следует установить приложение &lt;a href="https://play.google.com/store/apps/details?id=com.dev47apps.droidcam" target="_blank" rel="noopener">DroidCam&lt;/a>.&lt;/p>
&lt;ul>
&lt;li>Домашняя страница: &lt;a href="https://www.dev47apps.com/" target="_blank" rel="noopener">https://www.dev47apps.com/&lt;/a>.&lt;/li>
&lt;li>Google Play (версия Free): &lt;a href="https://play.google.com/store/apps/details?id=com.dev47apps.droidcam" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=com.dev47apps.droidcam&lt;/a>.
&lt;ul>
&lt;li>Поддержка разрешения видео 640x480, 320x240.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Google Play (версия Pro): &lt;a href="https://play.google.com/store/apps/details?id=com.dev47apps.droidcamx" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=com.dev47apps.droidcamx&lt;/a>.
&lt;ul>
&lt;li>Нет рекламы.&lt;/li>
&lt;li>Поддержка высокого разрешения видео (720p/1080p в HD Mode).&lt;/li>
&lt;li>Настройки камеры: вспышка, авто-фокусировка, увеличение изображения и другое.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Есть вариант для iPhone.&lt;/li>
&lt;li>Инструкция от разработчика: &lt;a href="https://www.dev47apps.com/droidcam/connect/" target="_blank" rel="noopener">https://www.dev47apps.com/droidcam/connect/&lt;/a>.&lt;/li>
&lt;li>Help по программе: &lt;a href="https://www.dev47apps.com/droidcam/help/" target="_blank" rel="noopener">https://www.dev47apps.com/droidcam/help/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h4 id="windows">&lt;span class="section-num">1.1.2&lt;/span> Windows&lt;/h4>
&lt;ul>
&lt;li>Установка с помощью менеджера пакетов Chocolatey (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/">Пакетный менеджер для Windows. Chocolatey&lt;/a>).
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install droidcamclient
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно скачать и установить вручную, скачав приложение по адресу: &lt;a href="https://www.dev47apps.com/droidcam/windows/" target="_blank" rel="noopener">https://www.dev47apps.com/droidcam/windows/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h4 id="linux">&lt;span class="section-num">1.1.3&lt;/span> Linux&lt;/h4>
&lt;ul>
&lt;li>Необходима поддержка &lt;code>Video4Linux loopback&lt;/code> в ядре:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Device Drivers ---&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;M&amp;gt; Multimedia support ---&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [*] Cameras/video grabbers support
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [*] Media Controller API
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [*] V4L2 sub-device userspace API
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Пакет устанавливает утилиты и модуль ядра.&lt;/li>
&lt;li>Репозиторий клиента: &lt;a href="https://github.com/dev47apps/droidcam" target="_blank" rel="noopener">https://github.com/dev47apps/droidcam&lt;/a>.&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Дистрибутивы&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>Пакет отсутствует в основном дереве portage. Следует использовать overlay:
&lt;ul>
&lt;li>nex-overlay &lt;a href="https://gitlab.com/NexAdn/nex-overlay" target="_blank" rel="noopener">https://gitlab.com/NexAdn/nex-overlay&lt;/a>;&lt;/li>
&lt;li>thegreatmcpain
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">layman -a thegreatmcpain
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>guru
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">layman -a guru
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge droidcam
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Настройка&lt;/p>
&lt;ul>
&lt;li>В результате будет установлен модуль ядра &lt;code>v4l2loopback_dc&lt;/code>.&lt;/li>
&lt;li>По умолчанию разрешение установлено в 640x480.&lt;/li>
&lt;li>Для настройки разрешения необходимо задать опции для модуля.&lt;/li>
&lt;li>Опции задаются в соответствующих файлах. В зависимости от дистрибутива они называются:
&lt;ul>
&lt;li>&lt;code>/etc/modprobe.d/v4l2loopback-dc.conf&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/modprobe.d/droidcam.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Формат записи:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">options v4l2loopback-dc width=640 height=480
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Поддерживаемые разрешения: 320×240, 480×360, 640×480, 960×720, 1280×720, 1920x1080.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="использование-программы">&lt;span class="section-num">1.2&lt;/span> Использование программы&lt;/h3>
&lt;p>После запуска программы на смартфоне возможно переключения камер телефона.&lt;/p>
&lt;h4 id="подключение-по-wi-fi">&lt;span class="section-num">1.2.1&lt;/span> Подключение по Wi-Fi&lt;/h4>
&lt;ul>
&lt;li>Запускаем &lt;code>droidcam&lt;/code> на компьютере и на телефоне.&lt;/li>
&lt;li>Выбираем подключение по Wi-Fi (нужно подключаться обязательно к одной и той же сети с телефона и с компьютера).&lt;/li>
&lt;li>После подключения к Wi-Fi в программе на смартфоне отобразиться IP.&lt;/li>
&lt;li>На компьютере в программе выберите тип подключения &amp;ldquo;Connect over WiFi (LAN)&amp;rdquo;, введите IP и порт из приложения на смартфоне, нажмите Start.&lt;/li>
&lt;/ul>
&lt;h4 id="подключение-по-wi-fi--через-броузер">&lt;span class="section-num">1.2.2&lt;/span> Подключение по Wi-Fi (через броузер)&lt;/h4>
&lt;ul>
&lt;li>Запускаем &lt;code>droidcam&lt;/code> на телефоне.&lt;/li>
&lt;li>Открываем броузер на любом устройстве и вводим в адресную строку &lt;code>http://ip:port&lt;/code>, где &lt;code>ip&lt;/code> и &lt;code>port&lt;/code> &amp;mdash; это IP-адрес и порт из приложения на андроиде.&lt;/li>
&lt;/ul>
&lt;h4 id="подключение-по-wi-fi--создав-wi-fi-сервер">&lt;span class="section-num">1.2.3&lt;/span> Подключение по Wi-Fi (создав Wi-Fi сервер)&lt;/h4>
&lt;ul>
&lt;li>На компьютере в программе выбирается режим &lt;code>Create WiFi Server&lt;/code>, нажмите Start.&lt;/li>
&lt;li>На смартфоне в приложении:
&lt;ul>
&lt;li>откройте опции, выберите &lt;code>Connect to Server&lt;/code>, &lt;code>Add new&lt;/code>;&lt;/li>
&lt;li>в поле &lt;code>Name&lt;/code> введите любое название;&lt;/li>
&lt;li>в поле &lt;code>IP Address&lt;/code> введите адрес компьютера;&lt;/li>
&lt;li>нажимает &lt;code>Save&lt;/code>;&lt;/li>
&lt;li>выбираем созданный сервер.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="подключение-по-usb">&lt;span class="section-num">1.2.4&lt;/span> Подключение по USB&lt;/h4>
&lt;ul>
&lt;li>На смартфоне включить &lt;code>Отладка по USB&lt;/code>.&lt;/li>
&lt;li>На компьютере в программе выбрать режим &lt;code>Connect over USB&lt;/code> (на компьютере должны быть установлены драйвера ADB).&lt;/li>
&lt;li>Подключить смартфон по USB кабелю.&lt;/li>
&lt;li>На компьютере нажать &lt;code>Start&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>Верификация коммитов git с помощью GPG</title><link>https://yamadharma.github.io/ru/post/2021/01/28/verifying-git-commits-gpg/</link><pubDate>Thu, 28 Jan 2021 18:47:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/01/28/verifying-git-commits-gpg/</guid><description>&lt;p>Настроим верификацию коммитов git с помощью GPG.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#верификация-коммитов-с-помощью-pgp">&lt;span class="section-num">1&lt;/span> Верификация коммитов с помощью &lt;em>PGP&lt;/em>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#создание-ключа">&lt;span class="section-num">1.1&lt;/span> Создание ключа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#экспорт-ключа">&lt;span class="section-num">1.2&lt;/span> Экспорт ключа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавление-gpg-ключа-в-github">&lt;span class="section-num">1.3&lt;/span> Добавление GPG ключа в GitHub&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подписывание-коммитов-git">&lt;span class="section-num">1.4&lt;/span> Подписывание коммитов git&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-автоматических-подписей-коммитов-git">&lt;span class="section-num">1.5&lt;/span> Настройка автоматических подписей коммитов git&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование-keybase">&lt;span class="section-num">2&lt;/span> Использование Keybase&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#генерация-gpg-ключа">&lt;span class="section-num">2.1&lt;/span> Генерация GPG ключа&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавление-gpg-ключа-в-github">&lt;span class="section-num">2.2&lt;/span> Добавление GPG ключа в GitHub&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#проверка-коммитов-в-git">&lt;span class="section-num">3&lt;/span> Проверка коммитов в Git&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#режим-бдительности--vigilant-mode">&lt;span class="section-num">3.1&lt;/span> Режим бдительности (vigilant mode)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="верификация-коммитов-с-помощью-pgp">&lt;span class="section-num">1&lt;/span> Верификация коммитов с помощью &lt;em>PGP&lt;/em>&lt;/h2>
&lt;ul>
&lt;li>Как настроить PGP-подпись коммитов с помощью &lt;code>gpg&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="создание-ключа">&lt;span class="section-num">1.1&lt;/span> Создание ключа&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Генерируем ключ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --full-generate-key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Из предложенных опций выбираем:
&lt;ul>
&lt;li>тип &lt;em>RSA and RSA&lt;/em>;&lt;/li>
&lt;li>размер 4096;&lt;/li>
&lt;li>выберите срок действия; значение по умолчанию &amp;mdash; 0 (срок действия не истекает никогда).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>GPG запросит личную информацию, которая сохранится в ключе:
&lt;ul>
&lt;li>Имя (не менее 5 символов).&lt;/li>
&lt;li>Адрес электронной почты.
&lt;ul>
&lt;li>При вводе email убедитесь, что он соответствует адресу, используемому на GitHub.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Комментарий. Можно ввести что угодно или нажать клавишу ввода, чтобы оставить это поле пустым.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="экспорт-ключа">&lt;span class="section-num">1.2&lt;/span> Экспорт ключа&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Выводим список ключей и копируем отпечаток приватного ключа:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --list-secret-keys --keyid-format LONG
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Отпечаток ключа &amp;mdash; это последовательность байтов, используемая для идентификации более длинного, по сравнению с самим отпечатком ключа.&lt;/li>
&lt;li>Формат строки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">sec Алгоритм/Отпечаток_ключа Дата_создания [Флаги] [Годен_до]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ID_ключа
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Экспортируем ключ в формате ASCII по его отпечатку:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --armor --export &amp;lt;PGP Fingerprint&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="добавление-gpg-ключа-в-github">&lt;span class="section-num">1.3&lt;/span> Добавление GPG ключа в GitHub&lt;/h3>
&lt;ul>
&lt;li>Копируем ключ и добавляем его в настройках профиля на GitHub (или GitLab).&lt;/li>
&lt;li>Cкопируйте ваш сгенерированный PGP ключ в буфер обмена:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --armor --export &amp;lt;PGP Fingerprint&amp;gt; &lt;span class="p">|&lt;/span> xclip -sel clip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перейдите в настройки GitHub (&lt;a href="https://github.com/settings/keys" target="_blank" rel="noopener">https://github.com/settings/keys&lt;/a>), нажмите на кнопку &lt;em>New GPG key&lt;/em> и вставьте полученный ключ в поле ввода.&lt;/li>
&lt;/ul>
&lt;h3 id="подписывание-коммитов-git">&lt;span class="section-num">1.4&lt;/span> Подписывание коммитов git&lt;/h3>
&lt;ul>
&lt;li>Подпись коммитов при работе через терминал:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git commit -a -S -m &lt;span class="s1">&amp;#39;your commit message&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Флаг &lt;code>-S&lt;/code> означает создание подписанного коммита. При этом может потребоваться ввод кодовой фразы, заданной при генерации GPG-ключа.&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-автоматических-подписей-коммитов-git">&lt;span class="section-num">1.5&lt;/span> Настройка автоматических подписей коммитов git&lt;/h3>
&lt;ul>
&lt;li>Используя введёный email, укажите Git применять его при подписи коммитов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global user.signingkey &amp;lt;PGP Fingerprint&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global commit.gpgsign &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global gpg.program &lt;span class="k">$(&lt;/span>which gpg&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование-keybase">&lt;span class="section-num">2&lt;/span> Использование Keybase&lt;/h2>
&lt;ul>
&lt;li>Для генерации и хранения GPG ключей можно использовать Keybase &lt;a href="https://keybase.io/" target="_blank" rel="noopener">https://keybase.io/&lt;/a>.&lt;/li>
&lt;li>После того, как вы зарегистрируетесь в Keybase, зайдите в терминал и запустите следующие команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">keybase login
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="генерация-gpg-ключа">&lt;span class="section-num">2.1&lt;/span> Генерация GPG ключа&lt;/h3>
&lt;ul>
&lt;li>Создайте новый GPG ключ, используя ваше настоящее имя и email, сохраненный в GitHub:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">keybase pgp gen
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Просмотр списка ключей:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">keybase pgp list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="добавление-gpg-ключа-в-github">&lt;span class="section-num">2.2&lt;/span> Добавление GPG ключа в GitHub&lt;/h3>
&lt;ul>
&lt;li>Cкопируйте ваш сгенерированный PGP ключ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">keybase pgp &lt;span class="nb">export&lt;/span> &lt;span class="p">|&lt;/span> xclip -i
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перейдите в настройки GitHub (&lt;a href="https://github.com/settings/keys" target="_blank" rel="noopener">https://github.com/settings/keys&lt;/a>), нажмите на кнопку &lt;em>New GPG key&lt;/em> и вставьте полученный ключ в поле ввода.&lt;/li>
&lt;/ul>
&lt;h2 id="проверка-коммитов-в-git">&lt;span class="section-num">3&lt;/span> Проверка коммитов в Git&lt;/h2>
&lt;ul>
&lt;li>GitHub и GitLab будут показывать значок &lt;em>Verified&lt;/em> рядом с вашими новыми коммитами.&lt;/li>
&lt;/ul>
&lt;h3 id="режим-бдительности--vigilant-mode">&lt;span class="section-num">3.1&lt;/span> Режим бдительности (vigilant mode)&lt;/h3>
&lt;ul>
&lt;li>На GitHub есть настройка &lt;a href="https://docs.github.com/en/github/authenticating-to-github/managing-commit-signature-verification/displaying-verification-statuses-for-all-of-your-commits" target="_blank" rel="noopener">vigilant mode&lt;/a>.&lt;/li>
&lt;li>Все неподписанные коммиты будут явно помечены как &lt;em>Unverified&lt;/em>.&lt;/li>
&lt;li>Включается это в настройках в разделе &lt;em>SSH and GPG keys&lt;/em>. Установите метку на &lt;em>Flag unsigned commits as unverified&lt;/em>.&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Почта. Парольная аутентификация</title><link>https://yamadharma.github.io/ru/post/2021/01/22/mail-password-authentication/</link><pubDate>Fri, 22 Jan 2021 15:20:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/01/22/mail-password-authentication/</guid><description>&lt;p>Конфигурационные файлы для настройки парольной аутентификации для почтовых программ (в частности для Emacs).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#описание">&lt;span class="section-num">1&lt;/span> Описание&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-emacs">&lt;span class="section-num">2&lt;/span> Настройка Emacs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#парольная-аутентификация-netrc">&lt;span class="section-num">3&lt;/span> Парольная аутентификация &lt;em>netrc&lt;/em>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурационные-файлы">&lt;span class="section-num">3.1&lt;/span> Конфигурационные файлы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#разрешения">&lt;span class="section-num">3.2&lt;/span> Разрешения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#формат-файла-паролей">&lt;span class="section-num">3.3&lt;/span> Формат файла паролей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#шифрование-файла-паролей">&lt;span class="section-num">3.4&lt;/span> Шифрование файла паролей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-подключения-к-google">&lt;span class="section-num">3.5&lt;/span> Настройка подключения к Google&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="описание">&lt;span class="section-num">1&lt;/span> Описание&lt;/h2>
&lt;ul>
&lt;li>Библиотека &lt;code>auth-source&lt;/code> для emacs создавалась для хранения паролей для gnus.&lt;/li>
&lt;li>Документация: &lt;a href="https://www.gnu.org/software/emacs/manual/html_mono/auth.html" target="_blank" rel="noopener">https://www.gnu.org/software/emacs/manual/html_mono/auth.html&lt;/a>&lt;/li>
&lt;li>Библиотека &lt;code>auth-source&lt;/code> поддерживает несколько бэкэнд-хранилищ:
&lt;ul>
&lt;li>бэкэнд &lt;em>netrc&lt;/em>,&lt;/li>
&lt;li>файлы &lt;em>json&lt;/em>,
&lt;ul>
&lt;li>формат файла:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[{&lt;/span> &lt;span class="s2">&amp;#34;machine&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;SERVER&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;PORT&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;login&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;USER&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;PASSWORD&amp;#34;&lt;/span> &lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>Secret Service API&lt;/em> (&lt;a href="https://www.freedesktop.org/wiki/Specifications/secret-storage-spec/" target="_blank" rel="noopener">https://www.freedesktop.org/wiki/Specifications/secret-storage-spec/&lt;/a>),&lt;/li>
&lt;li>стандартный менеджер паролей Unix &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-emacs">&lt;span class="section-num">2&lt;/span> Настройка Emacs&lt;/h2>
&lt;ul>
&lt;li>Переменная &lt;code>auth-sources&lt;/code> задаёт источники аутентификации:
&lt;ul>
&lt;li>устаревшая настройка по умолчанию (для &lt;em>netrc&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">auth-sources&lt;/span> &lt;span class="o">&amp;#39;&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nb">:source&lt;/span> &lt;span class="s">&amp;#34;~/.authinfo.gpg&amp;#34;&lt;/span> &lt;span class="nb">:host&lt;/span> &lt;span class="no">t&lt;/span> &lt;span class="nb">:port&lt;/span> &lt;span class="no">t&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>то же самое, но короче (для &lt;em>netrc&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">auth-sources&lt;/span> &lt;span class="o">&amp;#39;&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nb">:source&lt;/span> &lt;span class="s">&amp;#34;~/.authinfo.gpg&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>несколько источников (все варианты для &lt;em>netrc&lt;/em>) (это является значением по умолчанию):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">auth-sources&lt;/span> &lt;span class="o">&amp;#39;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;~/.authinfo.gpg&amp;#34;&lt;/span> &lt;span class="s">&amp;#34;~/.authinfo&amp;#34;&lt;/span> &lt;span class="s">&amp;#34;~/.netrc&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>использование &lt;em>Secrets API&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">auth-sources&lt;/span> &lt;span class="o">&amp;#39;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;secrets:Login&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>использование &lt;em>pass&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">auth-sources&lt;/span> &lt;span class="o">&amp;#39;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">password-store&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>использование &lt;em>json&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-elisp" data-lang="elisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">auth-sources&lt;/span> &lt;span class="o">&amp;#39;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;~/.authinfo.json.gpg&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="парольная-аутентификация-netrc">&lt;span class="section-num">3&lt;/span> Парольная аутентификация &lt;em>netrc&lt;/em>&lt;/h2>
&lt;h3 id="конфигурационные-файлы">&lt;span class="section-num">3.1&lt;/span> Конфигурационные файлы&lt;/h3>
&lt;ul>
&lt;li>&lt;code>~/.authinfo.gpg&lt;/code> - зашифрованный;&lt;/li>
&lt;li>&lt;code>~/.authinfo&lt;/code> - не зашифрованный;&lt;/li>
&lt;li>&lt;code>~/.netrc&lt;/code> - устаревший вариант.&lt;/li>
&lt;/ul>
&lt;h3 id="разрешения">&lt;span class="section-num">3.2&lt;/span> Разрешения&lt;/h3>
&lt;p>Установите права только на чтение и запись для пользователя:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">600&lt;/span> ~/.authinfo.gpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="формат-файла-паролей">&lt;span class="section-num">3.3&lt;/span> Формат файла паролей&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Файл имеет следующий формат:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">machine HOST login NAME password VALUE port NUMBER
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Если имеется несколько учётных записей на одном сервере (например, на gmail), вместо имени хоста можно использовать имя профиля:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">machine PROFILE login NAME password VALUE port NUMBER
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Учитывая, что с одним логином могут быть почтовые адреса на разных доменах, предлагается в качестве &lt;code>PROFILE&lt;/code> использовать полный почтовый адрес (такой, как &lt;code>account@domain&lt;/code>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Также можно использовать этот файл для указания клиентских сертификатов, которые будут использоваться при настройке TLS-соединений:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">machine HOST port PORT key KEY cert CERT
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="шифрование-файла-паролей">&lt;span class="section-num">3.4&lt;/span> Шифрование файла паролей&lt;/h3>
&lt;p>Для безопасности следует зашифровать файл паролей (см. &lt;a href="https://yamadharma.github.io/ru/post/2020/12/18/using-pgp/">Работа с PGP&lt;/a>).&lt;/p>
&lt;ul>
&lt;li>Зашифровать файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg -c .authinfo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>или
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --symmetric .authinfo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Расшифровать файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --decrypt-files .authinfo.gpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-подключения-к-google">&lt;span class="section-num">3.5&lt;/span> Настройка подключения к Google&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/12/25/mail-google-connect/">Почта. Подключение к Google&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Почта. Синхронизация. mbsync</title><link>https://yamadharma.github.io/ru/post/2021/01/22/mail-synchronization-mbsync/</link><pubDate>Fri, 22 Jan 2021 15:10:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/01/22/mail-synchronization-mbsync/</guid><description>&lt;p>Настройка синхронизации IMAP с помощью &lt;em>mbsync&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#описание">&lt;span class="section-num">1&lt;/span> Описание&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">3&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общие-положения">&lt;span class="section-num">3.1&lt;/span> Общие положения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-учётных-записей">&lt;span class="section-num">3.2&lt;/span> Конфигурация учётных записей&lt;/a>&lt;/li>
&lt;li>&lt;a href="#общие-параметры">&lt;span class="section-num">3.3&lt;/span> Общие параметры&lt;/a>&lt;/li>
&lt;li>&lt;a href="#примеры-конфигурации-для-разных-провайдеров">&lt;span class="section-num">3.4&lt;/span> Примеры конфигурации для разных провайдеров&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gmail">&lt;span class="section-num">3.4.1&lt;/span> Gmail&lt;/a>&lt;/li>
&lt;li>&lt;a href="#apple">&lt;span class="section-num">3.4.2&lt;/span> Apple&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gmx">&lt;span class="section-num">3.4.3&lt;/span> GMX&lt;/a>&lt;/li>
&lt;li>&lt;a href="#proton">&lt;span class="section-num">3.4.4&lt;/span> Proton&lt;/a>&lt;/li>
&lt;li>&lt;a href="#yandex">&lt;span class="section-num">3.4.5&lt;/span> Yandex&lt;/a>&lt;/li>
&lt;li>&lt;a href="#mail-dot-ru">&lt;span class="section-num">3.4.6&lt;/span> Mail.ru&lt;/a>&lt;/li>
&lt;li>&lt;a href="#office365">&lt;span class="section-num">3.4.7&lt;/span> Office365&lt;/a>&lt;/li>
&lt;li>&lt;a href="#yahoo-dot-com">&lt;span class="section-num">3.4.8&lt;/span> Yahoo.com&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#синхронизация">&lt;span class="section-num">4&lt;/span> Синхронизация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#настройка-синхронизации">&lt;span class="section-num">4.1&lt;/span> Настройка синхронизации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-из-командной-строки">&lt;span class="section-num">4.2&lt;/span> Запуск из командной строки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск-по-таймеру">&lt;span class="section-num">4.3&lt;/span> Запуск по таймеру&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#поддержка-почтовых-файлов">&lt;span class="section-num">5&lt;/span> Поддержка почтовых файлов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#удаление-дубликатов">&lt;span class="section-num">5.1&lt;/span> Удаление дубликатов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#перенос-почтовых-файлов-на-другую-машину">&lt;span class="section-num">6&lt;/span> Перенос почтовых файлов на другую машину&lt;/a>&lt;/li>
&lt;li>&lt;a href="#технические-моменты">&lt;span class="section-num">7&lt;/span> Технические моменты&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#имена-почтовых-файлов">&lt;span class="section-num">7.1&lt;/span> Имена почтовых файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="описание">&lt;span class="section-num">1&lt;/span> Описание&lt;/h2>
&lt;ul>
&lt;li>Домашняя страница: &lt;a href="https://isync.sourceforge.io/" target="_blank" rel="noopener">https://isync.sourceforge.io/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://sourceforge.net/p/isync/isync/ci/master/tree/" target="_blank" rel="noopener">https://sourceforge.net/p/isync/isync/ci/master/tree/&lt;/a>&lt;/li>
&lt;li>&lt;code>isync&lt;/code> / &lt;code>mbsync&lt;/code> &amp;mdash; программа для синхронизации IMAP и локальных почтовых файлов.&lt;/li>
&lt;li>&lt;code>isync&lt;/code> &amp;mdash; старое название (для совместимости).&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge isync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">3&lt;/span> Настройка&lt;/h2>
&lt;h3 id="общие-положения">&lt;span class="section-num">3.1&lt;/span> Общие положения&lt;/h3>
&lt;ul>
&lt;li>Все учётные записи приводятся к единой структуре.&lt;/li>
&lt;li>Папки IMAP унифицируются следующим образом: Inbox, Archive, Sent, Trash, Drafts, Spam.&lt;/li>
&lt;li>В принципе, никто не мешает использовать названия папок самого IMAP-сервера.&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-учётных-записей">&lt;span class="section-num">3.2&lt;/span> Конфигурация учётных записей&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Учётные записи делаем по полному наименованию почты. Я это делаю потому, что у меня есть почтовые ящики с одинаковыми именами в разных почтовых доменах.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Создать необходимые каталоги:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkdir -p ~/Maildir/account@domain
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Можно создать каталоги все скопом из конфигурационного файла &lt;code>~/.config/isyncrc&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAILDIR&lt;/span>&lt;span class="o">=&lt;/span>~/Maildir
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Make mailbox directories&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grep -e &lt;span class="s2">&amp;#34;^IMAPAccount&amp;#34;&lt;/span> ~/.config/isyncrc &lt;span class="p">|&lt;/span> cut -d&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span> -f2 &lt;span class="p">|&lt;/span> xargs -I &lt;span class="o">{}&lt;/span> -n &lt;span class="m">1&lt;/span> mkdir -p &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">MAILDIR&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/{}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mbsync -a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 1:&lt;/span>
Файл ~/bin/mbsync-mkdir
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Делаем конфигурационный файл для &lt;em>mbsync&lt;/em>. Файл называется &lt;code>~/.config/isyncrc&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Чтобы не хранить пароли в конфигурационном файле (оператор &lt;code>Pass&lt;/code>) будем использовать хранение пароля, совместимое с &lt;em>emacs&lt;/em> (с использованием оператора &lt;code>PassCmd&lt;/code>):&lt;/p>
&lt;ul>
&lt;li>
&lt;p>в файле &lt;code>~/.authinfo.gpg&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/22/mail-password-authentication/">Emacs. Почта. Парольная аутентификация&lt;/a>):&lt;/p>
&lt;ul>
&lt;li>структура команды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@example.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>в менеджере паролей &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>):&lt;/p>
&lt;ul>
&lt;li>структура команды:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/example.com/account@example.com&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Начиная с версии &lt;em>mbsync-1.4.1&lt;/em> операторы &lt;code>Master&lt;/code> и &lt;code>Slave&lt;/code> заменены на &lt;code>Far&lt;/code> и &lt;code>Near&lt;/code>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="общие-параметры">&lt;span class="section-num">3.3&lt;/span> Общие параметры&lt;/h3>
&lt;ul>
&lt;li>Установка параметра &lt;code>CopyArrivalDate&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># By default (CopyArrivalDate no), if you copy an old email from inbox to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Archive (e.g.) it will get the date of the copy assigned, instead of just
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># keeping its original date of arrival! Also see:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># https://rakhim.org/fastmail-setup-with-emacs-mu4e-and-mbsync-on-macos/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># https://wiki.archlinux.org/index.php/Isync#Emails_on_remote_server_have_the_wrong_date
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="примеры-конфигурации-для-разных-провайдеров">&lt;span class="section-num">3.4&lt;/span> Примеры конфигурации для разных провайдеров&lt;/h3>
&lt;ul>
&lt;li>Может потребоваться для разных провайдеров увеличить тайм-аут соединения (по умолчанию равно &lt;code>20&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Вместо &lt;code>pass&lt;/code> можно использовать &lt;code>gopass&lt;/code>. При последовательном запуске нескольких &lt;code>pass&lt;/code> утилита может не находить ключ &lt;em>pgp&lt;/em>.&lt;/li>
&lt;li>Папки IMAP можно получить либо через web-интерфейс, либо в командной строке (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/04/13/imap-queries-command-line/">Запросы по протоколу imap из командной строки&lt;/a>)&lt;/li>
&lt;/ul>
&lt;h4 id="gmail">&lt;span class="section-num">3.4.1&lt;/span> Gmail&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://www.google.com/intl/ru/gmail/about/" target="_blank" rel="noopener">https://www.google.com/intl/ru/gmail/about/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/06/mail-google-configuring-mail-client/">Почта. Google. Настройка почтового клиента&lt;/a>&lt;/li>
&lt;li>Из-за структуры тегов Gmail необходимо явно задавать названия почтовых ящиков в директивах &lt;code>Far&lt;/code> и &lt;code>Near&lt;/code>.&lt;/li>
&lt;li>Синхронизацию папки &lt;code>Отправленные&lt;/code> можно отключить. Google сохраняет всю электронную почту в папке &lt;code>Все сообщения&lt;/code>. В результате можно получить локальные дубликаты.&lt;/li>
&lt;li>Рекомендуется на сайте Gmail настроить в пункте &lt;code>Настройки &amp;gt; Пересылка и POP/IMAP &amp;gt; Доступ по протоколу IMAP&lt;/code> (&lt;code>Settings&lt;/code> &amp;gt; &lt;code>Forwarding and POP/IMAP&lt;/code> &amp;gt; &lt;code>IMAP Access&lt;/code>):
&lt;ul>
&lt;li>отметить &lt;code>Автоматическое стирание включено (немедленно обновлять данные на сервере; по умолчанию)&lt;/code> &lt;code>Auto-Expunge on - Immediately update the server. (default)&lt;/code>;&lt;/li>
&lt;li>&lt;del>отметить &lt;code>Автоматическое стирание выключено (ожидать, пока клиент не обновит данные на сервере)&lt;/code> (&lt;code>Turn Auto Expunge Off&lt;/code>)&lt;/del>;&lt;/li>
&lt;li>отметить &lt;code>Архивировать сообщение (по умолчанию)&lt;/code> (&lt;code>Archive message (default)&lt;/code>).&lt;/li>
&lt;li>&lt;del>отметить &lt;code>Отправить письмо в корзину&lt;/code> (&lt;code>Send email to trash&lt;/code>)&lt;/del>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>При использовании двуфакторной аутентификации (2FA) необходимо использовать &lt;em>пароль приложения&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2020/12/25/mail-google-connect/">Почта. Подключение к Google&lt;/a>).
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># IMAPAccount (gmail)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Pass ***************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## To store the password in an encrypted file use PassCmd instead of Pass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@gmail.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;pass email/google.com/account@gmail.com@apppassword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/google.com/account@gmail.com&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Port 993
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSVersions +1.2 +1.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@gmail.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@gmail.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@gmail.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@gmail.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@gmail.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmail.com-remote:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmail.com-local:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Far :account@gmail.com-remote:&amp;#34;[Gmail]/Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmail.com-remote:&amp;#34;[Gmail]/&amp;amp;BBoEPgRABDcEOAQ9BDA-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmail.com-local:&amp;#34;Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Far :account@gmail.com-remote:&amp;#34;[Gmail]/Spam&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmail.com-remote:&amp;#34;[Gmail]/&amp;amp;BCEEPwQwBDw-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmail.com-local:&amp;#34;Spam&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Far :account@gmail.com-remote:&amp;#34;[Gmail]/All Mail&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmail.com-remote:&amp;#34;[Gmail]/&amp;amp;BBIEQQRP- &amp;amp;BD8EPgRHBEIEMA-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmail.com-local:&amp;#34;Archive&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Far :account@gmail.com-remote:&amp;#34;[Gmail]/Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmail.com-remote:&amp;#34;[Gmail]/&amp;amp;BCcENQRABD0EPgQyBDgEOgQ4-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmail.com-local:&amp;#34;Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Far :account@gmail.com-remote:&amp;#34;[Gmail]/Sent Mail&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmail.com-remote:&amp;#34;[Gmail]/&amp;amp;BB4EQgQ,BEAEMAQyBDsENQQ9BD0ESwQ1-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmail.com-local:&amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group account@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmail.com-sent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="apple">&lt;span class="section-num">3.4.2&lt;/span> Apple&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://www.icloud.com/mail" target="_blank" rel="noopener">https://www.icloud.com/mail&lt;/a>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># IMAPAccount (Apple)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@icloud.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.mail.me.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PORT 993
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@icloud.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@icloud.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSVersions +1.2 +1.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@icloud.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@icloud.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@icloud.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@icloud.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@icloud.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@icloud.com-all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@icloud.com-remote:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@icloud.com-local:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Included mailboxes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Patterns &amp;#34;INBOX&amp;#34; &amp;#34;Archive&amp;#34; &amp;#34;Trash&amp;#34; &amp;#34;Spam&amp;#34; &amp;#34;Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@icloud.com-sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@icloud.com-remote:&amp;#34;Sent Messages&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@icloud.com-local:&amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group account@icloud.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@icloud.com-sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@icloud.com-all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="gmx">&lt;span class="section-num">3.4.3&lt;/span> GMX&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://www.gmx.com/" target="_blank" rel="noopener">https://www.gmx.com/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.gmx.net/" target="_blank" rel="noopener">https://www.gmx.net/&lt;/a>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># IMAPAccount (GMX)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@gmx.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.gmx.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@gmx.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@gmx.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSVersions +1.2 +1.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@gmx.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@gmx.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@gmx.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@gmx.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@gmx.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@gmx.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@gmx.com-remote:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@gmx.com-local:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Patterns &amp;#34;INBOX&amp;#34; &amp;#34;Archive&amp;#34; &amp;#34;Trash&amp;#34; &amp;#34;Spam&amp;#34; &amp;#34;Drafts&amp;#34; &amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="proton">&lt;span class="section-num">3.4.4&lt;/span> Proton&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://protonmail.com/" target="_blank" rel="noopener">https://protonmail.com/&lt;/a>&lt;/li>
&lt;li>Заблокирован в России.&lt;/li>
&lt;li>Для работы необходимо установить локальное приложение &lt;a href="https://protonmail.com/bridge/" target="_blank" rel="noopener">https://protonmail.com/bridge/&lt;/a>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># IMAPAccount (Proton)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@protonmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PORT 1111
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@protonmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@protonmail.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSType STARTTLS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSVersions +1.2 +1.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@protonmail.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@protonmail.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@protonmail.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@protonmail.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@protonmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@protonmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@protonmail.com-remote:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@protonmail.com-local:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Patterns &amp;#34;INBOX&amp;#34; &amp;#34;Archive&amp;#34; &amp;#34;Trash&amp;#34; &amp;#34;Spam&amp;#34; &amp;#34;Drafts&amp;#34; &amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="yandex">&lt;span class="section-num">3.4.5&lt;/span> Yandex&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yandex.ru/" target="_blank" rel="noopener">https://yandex.ru/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-yandex-configuring-mail-client/">Почта. Yandex. Настройка почтового клиента&lt;/a>&lt;/li>
&lt;li>Пароли приложений
&lt;ul>
&lt;li>При подключении паролей приложений обычные пароли использовать не получится. Придётся сгенерить пароль приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/01/mail-yandex-application-passwords/">Почта. Yandex. Пароли приложений&lt;/a>).&lt;/li>
&lt;li>Для паролей &lt;code>pass&lt;/code>:
&lt;ul>
&lt;li>Пароль для приложения почты можно назвать &lt;code>account@yandex.ru@apppassword@mail&lt;/code>.&lt;/li>
&lt;li>Пароль для smtp следует именовать как &lt;code>account@yandex.ru@smtp.yandex.ru&lt;/code> (это тот же пароль для почтового приложения).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## IMAPAccount (Yandex)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@yandex.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.yandex.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@yandex.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Pass ***************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## To store the password in an encrypted file use PassCmd instead of Pass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@yandex.ru/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;pass email/yandex.ru/account@yandex.ru@apppassword@mail&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/yandex.ru/account@yandex.ru&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSVersions +1.2 +1.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@yandex.ru-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@yandex.ru/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@yandex.ru/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@yandex.ru-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@yandex.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yandex.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yandex.ru-remote:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yandex.ru-local:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Patterns &amp;#34;INBOX&amp;#34; &amp;#34;Archive&amp;#34; &amp;#34;Trash&amp;#34; &amp;#34;Spam&amp;#34; &amp;#34;Drafts&amp;#34; &amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="mail-dot-ru">&lt;span class="section-num">3.4.6&lt;/span> Mail.ru&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-mail-ru-configuring-mail-client/">Почта. Mail.ru. Настройка почтового клиента&lt;/a>&lt;/li>
&lt;li>Пароли приложений
&lt;ul>
&lt;li>При подключении паролей приложений обычные пароли использовать не получится. Придётся сгенерить пароль приложения (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/10/27/mail-ru-passwords/">Пароли mail.ru&lt;/a>).&lt;/li>
&lt;li>Для паролей &lt;code>pass&lt;/code>:
&lt;ul>
&lt;li>Пароль для приложения почты можно назвать &lt;code>account@mail.ru@apppassword@mail&lt;/code>.&lt;/li>
&lt;li>Пароль для smtp следует именовать как &lt;code>account@mail.ru@smtp.mail.ru&lt;/code> (это тот же пароль для почтового приложения).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## IMAPAccount (Mail.ru)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@mail.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.mail.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@mail.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Pass ***************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## To store the password in an encrypted file use PassCmd instead of Pass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@mail.ru@apppassword@mail/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/mail.ru/account@mail.ru@apppassword@mail&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSVersions +1.2 +1.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@mail.ru-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@mail.ru/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@mail.ru/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@mail.ru-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@mail.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;Корзина&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;Спам&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;Spam&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;Черновики&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;Архив&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;Archive&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@mail.ru-remote:&amp;#34;Отправленные&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@mail.ru-local:&amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group account@mail.ru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@mail.ru-sent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="office365">&lt;span class="section-num">3.4.7&lt;/span> Office365&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-office365-configuring-mail-client/">Почта. Office365. Настройка почтового клиента&lt;/a>&lt;/li>
&lt;li>Названия IMAP-ящиков даётся в модифицированной кодировке UTF-7 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/07/04/mail-imap-folder-encoding/">Почта. Кодировка папок IMAP&lt;/a>).&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Аутентификация &lt;em>LOGIN&lt;/em>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Конфигурация &lt;em>mbsync&lt;/em>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## IMAPAccount (outlook.office365.com)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host smtp.office365.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Pass ***************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## To store the password in an encrypted file use PassCmd instead of Pass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@example.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/example.com/account@example.com&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSVersions +1.2 +1.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PipelineDepth 50
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@example.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@example.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@example.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@example.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;&amp;amp;BCMENAQwBDsENQQ9BD0ESwQ1-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;&amp;amp;BB0ENQQ2BDUEOwQwBEIENQQ7BEwEPQQwBE8- &amp;amp;BD8EPgRHBEIEMA-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;Spam&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;&amp;amp;BCcENQRABD0EPgQyBDgEOgQ4-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;Archive1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;Archive&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@example.com-remote:&amp;#34;&amp;amp;BB4EQgQ,BEAEMAQyBDsENQQ9BD0ESwQ1-&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@example.com-local:&amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@example.com-sent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Конфигурация SMTP для Emacs:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">send-mail-function&lt;/span> &lt;span class="ss">&amp;#39;smtpmail-send-it&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-smtp-server&lt;/span> &lt;span class="s">&amp;#34;example.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-stream-type&lt;/span> &lt;span class="ss">&amp;#39;starttls&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-smtp-service&lt;/span> &lt;span class="mi">587&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Для smtp следует именовать пароль &lt;em>pass&lt;/em> как &lt;code>account@example.com@smtp.office365.com&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Аутентификация &lt;em>Oauth2&lt;/em> с &lt;em>DavMail&lt;/em>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Аутентификацию &lt;em>oauth2&lt;/em> можно настроить с помощью &lt;em>DavMail&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/04/10/davmail/">DavMail&lt;/a>).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Сначала настройте &lt;em>DavMail&lt;/em> аутентификацией &lt;code>O365Interactive&lt;/code> или &lt;code>O365Manual&lt;/code>, а потом переключите в режим &lt;code>O365Modern&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>В конфигурации меняется блок аутентификации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">IMAPAccount account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Port 1143
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Pass ***************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## To store the password in an encrypted file use PassCmd instead of Pass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@example.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;pass email/example.com/account@example.com&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSType None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PipelineDepth 50
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Конфигурация SMTP для Emacs:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-emacs-lisp" data-lang="emacs-lisp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">setq&lt;/span> &lt;span class="nv">send-mail-function&lt;/span> &lt;span class="ss">&amp;#39;smtpmail-send-it&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-smtp-server&lt;/span> &lt;span class="s">&amp;#34;localhost&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-stream-type&lt;/span> &lt;span class="ss">&amp;#39;plain&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">smtpmail-smtp-service&lt;/span> &lt;span class="mi">1025&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Для smtp следует именовать пароль &lt;em>pass&lt;/em> как &lt;code>account@example.com@localhost&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="yahoo-dot-com">&lt;span class="section-num">3.4.8&lt;/span> Yahoo.com&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/04/26/mail-yahoo-com-configuring-mail-client/">Почта. Yahoo.com. Настройка почтового клиента&lt;/a>&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## IMAPAccount (Yahoo.com)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPAccount account@yahoo.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host imap.mail.yahoo.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User account@yahoo.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># PassCmd &amp;#34;gpg -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk &amp;#39;/machine account@yahoo.com/ {print $6}&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PassCmd &amp;#34;gopass email/yahoo.com/account@yahoo.com@apppassword&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AuthMechs LOGIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSType IMAPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TLSVersions +1.2 +1.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Increase timeout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Timeout 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PipelineDepth 50
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MaildirStore account@yahoo.com-local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path ~/Maildir/account@yahoo.com/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Inbox ~/Maildir/account@yahoo.com/Inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SubFolders Verbatim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IMAPStore account@yahoo.com-remote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Account account@yahoo.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;INBOX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;Trash&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;Bulk&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;Spam&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;Draft&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;Drafts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;Archive&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;Archive&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-sent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Far :account@yahoo.com-remote:&amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Near :account@yahoo.com-local:&amp;#34;Sent&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CopyArrivalDate yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Expunge Both
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyncState *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group account@yahoo.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-inbox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-spam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-drafts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-archive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Channel account@yahoo.com-sent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="синхронизация">&lt;span class="section-num">4&lt;/span> Синхронизация&lt;/h2>
&lt;h3 id="настройка-синхронизации">&lt;span class="section-num">4.1&lt;/span> Настройка синхронизации&lt;/h3>
&lt;ul>
&lt;li>Будем настраивать синхронизацию нескольких учётных записей.&lt;/li>
&lt;li>Для хранения паролей будем использовать аутентификацию, совместимую с emacs (например, файл формата &lt;code>.authinfo&lt;/code>) (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/22/mail-password-authentication/">Emacs. Почта. Парольная аутентификация&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-из-командной-строки">&lt;span class="section-num">4.2&lt;/span> Запуск из командной строки&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Синхронизация конкретной учётной записи:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mbsync &amp;lt;chanel&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Синхронизация всех учётных записей:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mbsync --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="запуск-по-таймеру">&lt;span class="section-num">4.3&lt;/span> Запуск по таймеру&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для синхронизации с помощью &lt;code>systemd&lt;/code> надо добавить сервис и таймер.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>После создания этих файлов добавьте &lt;code>mbsync.timer&lt;/code> в &lt;code>systemctl&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user --now &lt;span class="nb">enable&lt;/span> mbsync.timer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>~/.config/systemd/user/mbsync.service&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/systemd/user/mbsync.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Unit]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description=Mailbox synchronization service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Service]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type=oneshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStart=/usr/bin/mbsync -a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>~/.config/systemd/user/mbsync.service&lt;/code>. Здесь мы после синхронизации запускаем индексирование для &lt;code>mu&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/systemd/user/mbsync.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Unit]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description=Mailbox synchronization service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Service]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type=oneshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStart=-/usr/bin/mbsync -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStartPost=-/usr/bin/mu index
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Знак &lt;code>-&lt;/code> перед командой позволяет игнорировать код возврата.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>~/.config/systemd/user/mbsync.timer&lt;/code>. Настраиваем запуск &lt;code>mbsync&lt;/code> через 2 минуты после загрузки, а затем запускаем каждые 5 минут.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ~/.config/systemd/user/mbsync.timer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Unit]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description=Mailbox synchronization timer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Timer]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OnBootSec=2m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OnUnitActiveSec=5m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Unit=mbsync.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Install]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WantedBy=timers.target
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="поддержка-почтовых-файлов">&lt;span class="section-num">5&lt;/span> Поддержка почтовых файлов&lt;/h2>
&lt;h3 id="удаление-дубликатов">&lt;span class="section-num">5.1&lt;/span> Удаление дубликатов&lt;/h3>
&lt;ul>
&lt;li>При копировании могут возникать дубликаты сообщений.&lt;/li>
&lt;li>Их можно удалить (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/09/09/removing-duplicate-messages/">Почта. Удаление дубликатов сообщений из локальных почтовых ящиков&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="перенос-почтовых-файлов-на-другую-машину">&lt;span class="section-num">6&lt;/span> Перенос почтовых файлов на другую машину&lt;/h2>
&lt;ul>
&lt;li>Имя почтового файла содержит имя хоста. Поэтому просто так синхронизировать почтовую базу между хостами не получится.&lt;/li>
&lt;li>Синхронизация может понадобиться для случая, когда у Вас большие почтовые ящики, а сервер квотирует почтовый трафик.&lt;/li>
&lt;li>Предлагается скопировать текущую базу на другой хост (в качестве первоначальной постовой базы), а потом переименовать файлы почты.
&lt;ul>
&lt;li>Необходимо скопировать данные с &lt;code>host1&lt;/code> на &lt;code>host2&lt;/code>.&lt;/li>
&lt;li>Проведём проверку переименования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/Maildir/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find . -iname &lt;span class="s2">&amp;#34;*host1*&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;p;s:host1:host2:&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> xargs -n2 -p mv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проведём переименование, убрав ключ &lt;code>p&lt;/code> у &lt;code>xargs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/Maildir/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find . -iname &lt;span class="s2">&amp;#34;*host1*&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;p;s:host1:host2:&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> xargs -n2 mv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="технические-моменты">&lt;span class="section-num">7&lt;/span> Технические моменты&lt;/h2>
&lt;h3 id="имена-почтовых-файлов">&lt;span class="section-num">7.1&lt;/span> Имена почтовых файлов&lt;/h3>
&lt;ul>
&lt;li>Информация по почтовым файлам хранится либо в каталоге &lt;code>~/.mbsync&lt;/code> в файлах вида:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;lt;remote account&amp;gt;:&amp;lt;remote!folder&amp;gt;:&amp;lt;&lt;span class="nb">local&lt;/span> account&amp;gt;:&amp;lt;local!folder&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Либо информация хранится в почтовых папках в файлах &lt;code>.mbsyncstate&lt;/code> (параметр &lt;code>SyncState *&lt;/code>).&lt;/li>
&lt;li>В файле &lt;code>.uidvalidity&lt;/code> хранится последняя отметка времени и идентификатор.&lt;/li>
&lt;li>Файлы сообщений именуются по шаблону:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;lt;timestamp&amp;gt;.&amp;lt;PID&amp;gt;_&amp;lt;counter&amp;gt;.&amp;lt;hostname&amp;gt;,U&lt;span class="o">=&lt;/span>&amp;lt;increment&amp;gt;:2,&amp;lt;flags&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Пакетный менеджер для Windows. Chocolatey</title><link>https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/</link><pubDate>Mon, 18 Jan 2021 11:23:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/01/18/package-manager-windows-chocolatey/</guid><description>&lt;p>Наиболее популярным пакетным менеджером для Windows является &lt;em>Chocolatey&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">1&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-chocolatey">&lt;span class="section-num">2&lt;/span> Установка Chocolatey&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-настройки">&lt;span class="section-num">3&lt;/span> Дополнительные настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пакеты">&lt;span class="section-num">4&lt;/span> Пакеты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#работа-с-программным-обеспечением">&lt;span class="section-num">5&lt;/span> Работа с программным обеспечением&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#сервисные-функции">&lt;span class="section-num">5.1&lt;/span> Сервисные функции&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-пакета">&lt;span class="section-num">5.2&lt;/span> Установка пакета&lt;/a>&lt;/li>
&lt;li>&lt;a href="#удаление-пакета">&lt;span class="section-num">5.3&lt;/span> Удаление пакета&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-пакетов">&lt;span class="section-num">5.4&lt;/span> Обновление пакетов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#автоматическое-обновление-пакетов">&lt;span class="section-num">5.5&lt;/span> Автоматическое обновление пакетов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="ресурсы">&lt;span class="section-num">1&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>Домашняя страница: &lt;a href="https://chocolatey.org/" target="_blank" rel="noopener">https://chocolatey.org/&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/chocolatey/choco" target="_blank" rel="noopener">https://github.com/chocolatey/choco&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-chocolatey">&lt;span class="section-num">2&lt;/span> Установка Chocolatey&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Порядок установки описан на странице &lt;a href="https://chocolatey.org/install" target="_blank" rel="noopener">https://chocolatey.org/install&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установка проводится в PowerShell.&lt;/p>
&lt;ul>
&lt;li>PowerShell должен быть запущен с правами администратора.&lt;/li>
&lt;li>Проще всего запустить его комбинаций клавиш &lt;code>Win+X&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Команда установки находится на странице &lt;a href="https://chocolatey.org/install" target="_blank" rel="noopener">https://chocolatey.org/install&lt;/a>.&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/_1O4vKHhm3I?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
>&lt;/iframe>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h2 id="дополнительные-настройки">&lt;span class="section-num">3&lt;/span> Дополнительные настройки&lt;/h2>
&lt;ul>
&lt;li>Для того, чтобы установка происходила без запроса подтверждения, можно сделать следующую настройку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco feature &lt;span class="nb">enable&lt;/span> -n&lt;span class="o">=&lt;/span>allowGlobalConfirmation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обратно включить запрос подтверждения можно командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco feature disable -n&lt;span class="o">=&lt;/span>allowGlobalConfirmation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="пакеты">&lt;span class="section-num">4&lt;/span> Пакеты&lt;/h2>
&lt;ul>
&lt;li>Список пакетов находится на странице &lt;a href="https://chocolatey.org/packages" target="_blank" rel="noopener">https://chocolatey.org/packages&lt;/a>.&lt;/li>
&lt;li>Список пакетов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="работа-с-программным-обеспечением">&lt;span class="section-num">5&lt;/span> Работа с программным обеспечением&lt;/h2>
&lt;h3 id="сервисные-функции">&lt;span class="section-num">5.1&lt;/span> Сервисные функции&lt;/h3>
&lt;ul>
&lt;li>Информация по ключам командной строки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco --help
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Список пакетов в репозитории:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Список установленных пакетов:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco list --local-only
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="установка-пакета">&lt;span class="section-num">5.2&lt;/span> Установка пакета&lt;/h3>
&lt;ul>
&lt;li>Для установки пакета нужно выполнить команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install package_name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы установить без запроса на подтверждение, следует добавить ключ &lt;code>y&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install package_name -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="удаление-пакета">&lt;span class="section-num">5.3&lt;/span> Удаление пакета&lt;/h3>
&lt;ul>
&lt;li>Для удаления пакета нужно выполнить команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco uninstall package_name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="обновление-пакетов">&lt;span class="section-num">5.4&lt;/span> Обновление пакетов&lt;/h3>
&lt;ul>
&lt;li>Для обновления пакета нужно выполнить команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco upgrade package_name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для обновления всех установленных пакетов нужно выполнить команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco upgrade all -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="автоматическое-обновление-пакетов">&lt;span class="section-num">5.5&lt;/span> Автоматическое обновление пакетов&lt;/h3>
&lt;ul>
&lt;li>Для автоматического обновления пакетов используется пакет &lt;code>choco-upgrade-all-at&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install choco-upgrade-all-at
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Обновление можно выполнить командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco-upgrade-all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы задать время обновления, нужно устанавливать с определёнными параметрами:
&lt;ul>
&lt;li>если не указывать никаких параметров, &lt;code>choco-upgrade-all-at&lt;/code> по умолчанию будет запускаться ежедневно в 2 часа ночи и прерываться в 4 часа ночи;&lt;/li>
&lt;li>запуск &lt;code>choco upgrade all -y&lt;/code> ежедневно (по умолчанию) в 23:00 и прерывание в 1:00 ( по умолчанию &lt;code>ABORTTIME&lt;/code> равно +2 часа):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install choco-upgrade-all-at --params &lt;span class="s2">&amp;#34;&amp;#39;/TIME:23:00&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>запуск &lt;code>choco upgrade all -y&lt;/code> ежедневно в 4:00 и прерывание в 8:00:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install choco-upgrade-all-at --params &lt;span class="s2">&amp;#34;&amp;#39;/DAILY:yes /TIME:04:00 /ABORTTIME:08:00&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>запуск &lt;code>choco upgrade all -y&lt;/code> каждое воскресенье в 1:00 и прерывание в 3:00:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco install choco-upgrade-all-at --params &lt;span class="s2">&amp;#34;&amp;#39;/WEEKLY:yes /DAY:SUN /TIME:01:00&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Параметры можно отредактировать, запустив команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">choco-upgrade-all -EditConfig
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Почта. Подключение к Google</title><link>https://yamadharma.github.io/ru/post/2020/12/25/mail-google-connect/</link><pubDate>Fri, 25 Dec 2020 16:55:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/12/25/mail-google-connect/</guid><description>&lt;p>Google по умолчанию блокирует подключение сторонних клиентов.&lt;/p>
&lt;p>@@hugo{{&amp;lt; toc &amp;gt;}}@@&lt;/p>
&lt;h2 id="явное-разрешение-подключения">&lt;span class="section-num">1&lt;/span> Явное разрешение подключения&lt;/h2>
&lt;ul>
&lt;li>Перейти на страницу безопасности Google &lt;a href="https://myaccount.google.com/security" target="_blank" rel="noopener">https://myaccount.google.com/security&lt;/a>.&lt;/li>
&lt;li>Переключить «Небезопасные приложения заблокированы» на «Небезопасные приложения разрешены» (&lt;a href="https://myaccount.google.com/lesssecureapps" target="_blank" rel="noopener">https://myaccount.google.com/lesssecureapps&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h3 id="примечание">&lt;span class="section-num">1.1&lt;/span> Примечание&lt;/h3>
&lt;ul>
&lt;li>Начиная с 30 мая 2022 года Google больше не поддерживает сторонние приложения и устройства, которые предлагают войти в аккаунт Google только с помощью имени пользователя и пароля.&lt;/li>
&lt;li>Для корпоративных тарифов.
&lt;ul>
&lt;li>Начиная с 30 сентября 2024 года Google больше не поддерживает сторонние приложения и устройства, которые предлагают войти в аккаунт Google только с помощью имени пользователя и пароля в корпоративных тарифах..&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Таким образом, данные рекомендации больше &lt;strong>не работают&lt;/strong>.&lt;/li>
&lt;/ul>
&lt;h2 id="двухэтапная-аутентификация">&lt;span class="section-num">2&lt;/span> Двухэтапная аутентификация&lt;/h2>
&lt;ul>
&lt;li>В Google Mail используется проприетарное расширение SASL XOAUTH2 для поддержки токенов OAuth 2.0 для аутентификации SMTP/IMAP.&lt;/li>
&lt;li>Подключите на учётной записи двухэтапную аутентификацию: &lt;a href="https://myaccount.google.com/signinoptions/two-step-verification/enroll-welcome" target="_blank" rel="noopener">https://myaccount.google.com/signinoptions/two-step-verification/enroll-welcome&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="пароли-приложений">&lt;span class="section-num">3&lt;/span> Пароли приложений&lt;/h2>
&lt;ul>
&lt;li>Необходимо включить двухэтапную аутентификацию для устройств, не поддерживающих двухэтапную аутентификацию. Для этого необходимо:
&lt;ul>
&lt;li>Перейти по адресу &lt;a href="https://myaccount.google.com/apppasswords" target="_blank" rel="noopener">https://myaccount.google.com/apppasswords&lt;/a>.&lt;/li>
&lt;li>Подключиться к необходимой учётной записи.&lt;/li>
&lt;li>Сгенерить пароль приложения.&lt;/li>
&lt;li>Поместите полученный пароль в файл аутентификации (например, &lt;code>~/.authinfo&lt;/code>) вместо Вашего пароля.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="имена-файлов-паролей-паролей-для-pass">&lt;span class="section-num">4&lt;/span> Имена файлов паролей паролей для pass&lt;/h2>
&lt;ul>
&lt;li>Пароли храню в хранилище &lt;em>pass&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>).&lt;/li>
&lt;li>Шаблон имени файла пароля:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">account@google.com@server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Список серверов
&lt;ul>
&lt;li>IMAP: &lt;code>imap.google.com&lt;/code>;&lt;/li>
&lt;li>POP3: &lt;code>pop.google.com&lt;/code>;&lt;/li>
&lt;li>SMTP: &lt;code>smtp.google.com&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Emacs. Почта. GNUS</title><link>https://yamadharma.github.io/ru/post/2020/12/21/emacs-mail-gnus/</link><pubDate>Mon, 21 Dec 2020 19:44:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/12/21/emacs-mail-gnus/</guid><description>&lt;ul>
&lt;li>Gnus является программой для чтения новостей.&lt;/li>
&lt;li>Также он может работать и с почтой.&lt;/li>
&lt;/ul>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#аутентификация">&lt;span class="section-num">1&lt;/span> Аутентификация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#чтение-сообщений">&lt;span class="section-num">2&lt;/span> Чтение сообщений&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="аутентификация">&lt;span class="section-num">1&lt;/span> Аутентификация&lt;/h2>
&lt;p>Для аутентификации будем использовать файл формата &lt;code>.authinfo&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/01/22/mail-password-authentication/">Почта. Парольная аутентификация&lt;/a>).&lt;/p>
&lt;h2 id="чтение-сообщений">&lt;span class="section-num">2&lt;/span> Чтение сообщений&lt;/h2>
&lt;ul>
&lt;li>Введите &lt;code>M-x gnus&lt;/code> для загрузки Gnus.&lt;/li>
&lt;li>Gnus подключается к серверу, отображает список групп (почтовые папки отображаются как группы).&lt;/li>
&lt;li>Gnus также указывает количество непрочитанных сообщений в каждой группе.&lt;/li>
&lt;li>Нажмите &lt;code>RET&lt;/code> (&lt;code>gnus-group-select-group&lt;/code>), чтобы просмотреть сообщения в группе.&lt;/li>
&lt;li>После этого Gnus переходит в сводное представление для этой группы.&lt;/li>
&lt;/ul>
&lt;p>&lt;a id="table--gnus-summary-view">&lt;/a>&lt;/p>
&lt;div class="table-caption">
&lt;span class="table-number">&lt;a href="#table--gnus-summary-view">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1&lt;/a>:&lt;/span>
Сочетания клавиш для чтения сообщений Gnus
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Описание&lt;/th>
&lt;th>Комбинация клавиш&lt;/th>
&lt;th>Команда&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Отображает выбранное сообщение или прокручивает отображаемое сообщение вниз&lt;/td>
&lt;td>RET&lt;/td>
&lt;td>&lt;code>gnus­summary­scroll­up&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Показать следующую страницу выбранного сообщения или перейти к следующему непрочитанному сообщению&lt;/td>
&lt;td>SPC&lt;/td>
&lt;td>&lt;code>gnus­summary­next­page&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Показать предыдущую страницу выбранного сообщения&lt;/td>
&lt;td>&amp;lt;backspace&amp;gt;&lt;/td>
&lt;td>&lt;code>gnus­summary­prev­page&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ответить автору сообщения, процитировав исходное сообщение&lt;/td>
&lt;td>R&lt;/td>
&lt;td>&lt;code>gnus­summary­reply­withoriginal&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ответить автору сообщения, но не цитировать исходное сообщение&lt;/td>
&lt;td>r&lt;/td>
&lt;td>&lt;code>gnus­summary­reply&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ответить всем, процитировав исходное сообщение&lt;/td>
&lt;td>F&lt;/td>
&lt;td>&lt;code>gnus­summary­followup­withoriginal&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ответить всем, но не цитировать исходное сообщение&lt;/td>
&lt;td>f&lt;/td>
&lt;td>&lt;code>gnus­summary­followup&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Написать сообщение&lt;/td>
&lt;td>m&lt;/td>
&lt;td>&lt;code>gnus­summary­mail­otherwindow&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Удалить текущее сообщение&lt;/td>
&lt;td>B DEL&lt;/td>
&lt;td>&lt;code>gnus­summary­delete­article&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Переместить текущее сообщение в другую группу&lt;/td>
&lt;td>B m&lt;/td>
&lt;td>&lt;code>gnus­summary­move­article&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Выйти из текущей группы и вернуться к экрану выбора группы&lt;/td>
&lt;td>q&lt;/td>
&lt;td>&lt;code>gnus­summary­exit&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Работа с PGP</title><link>https://yamadharma.github.io/ru/post/2020/12/18/using-pgp/</link><pubDate>Fri, 18 Dec 2020 12:39:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/12/18/using-pgp/</guid><description>&lt;p>Использование набора программ GPG (GNU ревлизация PGP).&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#экспорт-ключей-pgp">&lt;span class="section-num">1&lt;/span> Экспорт ключей PGP&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gpg-agent">&lt;span class="section-num">2&lt;/span> &lt;code>gpg-agent&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#запуск">&lt;span class="section-num">2.2&lt;/span> Запуск&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перезапуск-агента">&lt;span class="section-num">2.3&lt;/span> Перезапуск агента&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">2.4&lt;/span> Настройка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pinentry">&lt;span class="section-num">2.5&lt;/span> pinentry&lt;/a>&lt;/li>
&lt;li>&lt;a href="#кэширование-паролей">&lt;span class="section-num">2.6&lt;/span> Кэширование паролей&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#шифрование">&lt;span class="section-num">3&lt;/span> Шифрование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#симметричное-шифрование">&lt;span class="section-num">3.1&lt;/span> Симметричное шифрование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="экспорт-ключей-pgp">&lt;span class="section-num">1&lt;/span> Экспорт ключей PGP&lt;/h2>
&lt;ul>
&lt;li>Экспорт ключей
&lt;ul>
&lt;li>Экспорт всех открытых ключей в текстовый файл в кодировке base64:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg -a --export &amp;gt; mypubkeys.asc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Экспорт всех зашифрованных закрытых ключей (которые также будут включать соответствующие открытые ключи) в текстовый файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg -a --export-secret-keys &amp;gt; myprivatekeys.asc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Опционально экспортируется &lt;code>trustdb&lt;/code> gpg в текстовый файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --export-ownertrust &amp;gt; otrust.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Импорт ключей
&lt;ul>
&lt;li>Выполните команды &lt;code>gpg --import&lt;/code> для двух файлов &lt;code>asc&lt;/code>, а затем проверьте наличие новых ключей с помощью &lt;code>gpg -k&lt;/code> и &lt;code>gpg -K&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --import myprivatekeys.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg --import mypubkeys.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg -K
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg -k
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При желании также импортируйте файл &lt;code>trustdb&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --import-ownertrust otrust.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Проверьте шифрование и дешифрование с помощью команд &lt;code>gpg -er USERID&lt;/code> и &lt;code>gpg -d&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="gpg-agent">&lt;span class="section-num">2&lt;/span> &lt;code>gpg-agent&lt;/code>&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">2.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Используется для временного хранения пароля.&lt;/li>
&lt;li>Предоставляются пользовательские сокеты &lt;code>systemd&lt;/code>:
&lt;ul>
&lt;li>основной сокет &lt;code>gpg-agent.socket&lt;/code> используется &lt;em>gpg&lt;/em> для подключения к демону &lt;code>gpg-agent&lt;/code>;&lt;/li>
&lt;li>сокет &lt;code>gpg-agent-extra.socket&lt;/code> на локальной системе используется для настройки переадресации Unix-сокета с удалённой системы;&lt;/li>
&lt;li>&lt;code>gpg-agent-browser.socket&lt;/code> позволяет веб-браузерам обращаться к демону &lt;code>gpg-agent&lt;/code>;&lt;/li>
&lt;li>&lt;code>gpg-agent-ssh.socket&lt;/code> может использоваться SSH для кэширования ключей SSH, добавленных программой ssh-add;&lt;/li>
&lt;li>&lt;code>dirmngr.socket&lt;/code> запускает демон GnuPG, обрабатывающий соединения с серверами ключей.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="запуск">&lt;span class="section-num">2.2&lt;/span> Запуск&lt;/h3>
&lt;ul>
&lt;li>Активизируются сокеты, а не сам &lt;code>gpg-agent&lt;/code>.&lt;/li>
&lt;li>Запуск под управлением &lt;code>systemd&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now gpg-agent.socket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="перезапуск-агента">&lt;span class="section-num">2.3&lt;/span> Перезапуск агента&lt;/h3>
&lt;ul>
&lt;li>После обновления настроек следует перезапустить агента, передав команду &lt;code>RELOADAGENT&lt;/code> программе &lt;code>gpg-connect-agent&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg-connect-agent reloadagent /bye
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка">&lt;span class="section-num">2.4&lt;/span> Настройка&lt;/h3>
&lt;ul>
&lt;li>Настраивается в файле &lt;code>~/.gnupg/gpg-agent.conf&lt;/code>.&lt;/li>
&lt;li>Время жизни для ключей в кэше с момента последнего использования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">default-cache-ttl 3600
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="pinentry">&lt;span class="section-num">2.5&lt;/span> pinentry&lt;/h3>
&lt;ul>
&lt;li>gpg-agent использует pinentry для отображения диалога запроса пароля.&lt;/li>
&lt;li>Вариант диалога настраивается в файле настроек &lt;code>~/.gnupg/gpg-agent.conf&lt;/code>.&lt;/li>
&lt;li>Чтобы установить конкретный диалог, установите опцию &lt;code>pinentry-program&lt;/code> в файле &lt;code>~/.gnupg/gpg-agent.conf&lt;/code>, например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pinentry-program /usr/bin/pinentry-curses
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Существуют разные реализации pinentry.&lt;/li>
&lt;li>Просмотр реализаций:
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">eselect pinentry list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="кэширование-паролей">&lt;span class="section-num">2.6&lt;/span> Кэширование паролей&lt;/h3>
&lt;ul>
&lt;li>Время кеширования определяется параметрами &lt;code>max-cache-ttl&lt;/code> и &lt;code>default-cache-ttl&lt;/code>.&lt;/li>
&lt;li>Чтобы вводить пароль всего один раз за сеанс, нужно установить их на очень высокое значение, например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## gpg-agent.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">max-cache-ttl 60480000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default-cache-ttl 60480000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для кэширования паролей в режиме эмуляции SSH следует установить параметры &lt;code>default-cache-ttl-ssh&lt;/code> и &lt;code>max-cache-ttl-ssh&lt;/code>, например:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## gpg-agent.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default-cache-ttl-ssh 60480000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">max-cache-ttl-ssh 60480000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="шифрование">&lt;span class="section-num">3&lt;/span> Шифрование&lt;/h2>
&lt;ul>
&lt;li>Шифрование может быть симметричным и ассиметричным.&lt;/li>
&lt;li>Симметричное шифрование шифруется и расшифровывается приватным ключом или одной и той же парольной фразой.&lt;/li>
&lt;li>Ассиметричное шифрование шифруется публичным ключом, расшифровывается приватным.&lt;/li>
&lt;/ul>
&lt;h3 id="симметричное-шифрование">&lt;span class="section-num">3.1&lt;/span> Симметричное шифрование&lt;/h3>
&lt;ul>
&lt;li>Зашифровать файл:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg -c filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>или&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --symmetric filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Расшифровать файл:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --decrypt-files filename.gpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Расшифровать файл с выводом на терминал:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">gpg --decrypt filename.gpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Работа с 1С в РУДН</title><link>https://yamadharma.github.io/ru/post/2020/12/09/working-with-1c-rudn-university/</link><pubDate>Wed, 09 Dec 2020 11:35:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/12/09/working-with-1c-rudn-university/</guid><description>&lt;p>Работа с 1С в РУДН.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#виды-подключения">&lt;span class="section-num">1&lt;/span> Виды подключения&lt;/a>&lt;/li>
&lt;li>&lt;a href="#модули-1с">&lt;span class="section-num">2&lt;/span> Модули 1С&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#управление-вузом">&lt;span class="section-num">2.1&lt;/span> Управление ВУЗом&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#тонкий-клиент">&lt;span class="section-num">2.1.1&lt;/span> Тонкий клиент&lt;/a>&lt;/li>
&lt;li>&lt;a href="#web-клиент">&lt;span class="section-num">2.1.2&lt;/span> Web-клиент&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#расписание">&lt;span class="section-num">2.2&lt;/span> Расписание&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#тонкий-клиент">&lt;span class="section-num">2.2.1&lt;/span> Тонкий клиент&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#итилиум">&lt;span class="section-num">2.3&lt;/span> Итилиум&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#тонкий-клиент">&lt;span class="section-num">2.3.1&lt;/span> Тонкий клиент&lt;/a>&lt;/li>
&lt;li>&lt;a href="#web-клиент">&lt;span class="section-num">2.3.2&lt;/span> Web-клиент&lt;/a>&lt;/li>
&lt;li>&lt;a href="#мобильное-приложение">&lt;span class="section-num">2.3.3&lt;/span> Мобильное приложение&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#документооборот">&lt;span class="section-num">2.4&lt;/span> Документооборот&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#тонкий-клиент">&lt;span class="section-num">2.4.1&lt;/span> Тонкий клиент&lt;/a>&lt;/li>
&lt;li>&lt;a href="#web-клиент">&lt;span class="section-num">2.4.2&lt;/span> Web-клиент&lt;/a>&lt;/li>
&lt;li>&lt;a href="#мобильное-приложение">&lt;span class="section-num">2.4.3&lt;/span> Мобильное приложение&lt;/a>&lt;/li>
&lt;li>&lt;a href="#подключение-извне-сети-университета">&lt;span class="section-num">2.4.4&lt;/span> Подключение извне сети Университета&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="виды-подключения">&lt;span class="section-num">1&lt;/span> Виды подключения&lt;/h2>
&lt;ul>
&lt;li>Часть сервисов 1С доступны непосредственно из сети.&lt;/li>
&lt;li>Часть сервисов доступна через VPN из внешний сети и напрямую из локальной сети Университета.&lt;/li>
&lt;li>При подключении можно выбрать одну из опций:
&lt;ul>
&lt;li>&lt;em>На веб-сервере&lt;/em>
&lt;ul>
&lt;li>Доступен как изнутри, так и извне.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>На сервере 1С:Предприятие&lt;/em>
&lt;ul>
&lt;li>Задаётся локальный адрес сервера или кластера серверов.&lt;/li>
&lt;li>Доступен через внутреннюю сеть либо через VPN.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="модули-1с">&lt;span class="section-num">2&lt;/span> Модули 1С&lt;/h2>
&lt;h3 id="управление-вузом">&lt;span class="section-num">2.1&lt;/span> Управление ВУЗом&lt;/h3>
&lt;h4 id="тонкий-клиент">&lt;span class="section-num">2.1.1&lt;/span> Тонкий клиент&lt;/h4>
&lt;ul>
&lt;li>Рекомендуемое название: &lt;em>Управление ВУЗом&lt;/em>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>На веб-сервере&lt;/p>
&lt;ul>
&lt;li>Расположение информационной базы на веб-сервере: &lt;a href="https://vuz.rudn.ru/VUZ_RUDN/" target="_blank" rel="noopener">https://vuz.rudn.ru/VUZ_RUDN/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>На сервере 1С:Предприятие&lt;/p>
&lt;ul>
&lt;li>Кластер серверов: &lt;code>192.168.125.103:1941&lt;/code>&lt;/li>
&lt;li>Имя информационной базы: &lt;code>VUZ_RUDN&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="web-клиент">&lt;span class="section-num">2.1.2&lt;/span> Web-клиент&lt;/h4>
&lt;ul>
&lt;li>Ссылка:
&lt;ul>
&lt;li>&lt;a href="https://vuz.rudn.ru/VUZ_RUDN" target="_blank" rel="noopener">https://vuz.rudn.ru/VUZ_RUDN&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://eisweb.rudn.ru/VUZ_RUDN" target="_blank" rel="noopener">https://eisweb.rudn.ru/VUZ_RUDN&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="расписание">&lt;span class="section-num">2.2&lt;/span> Расписание&lt;/h3>
&lt;h4 id="тонкий-клиент">&lt;span class="section-num">2.2.1&lt;/span> Тонкий клиент&lt;/h4>
&lt;ul>
&lt;li>Рекомендуемое название: Расписание&lt;/li>
&lt;li>Сервер: 192.168.125.107&lt;/li>
&lt;li>Имя ИБ: &lt;code>RASP_RUDN&lt;/code>&lt;/li>
&lt;li>Замечание: Если после настройки отображается ошибка установки соединения, необходимо вручную прописать в файл &lt;code>/etc/hosts&lt;/code> локальной машины сопоставление DNS-имени сервера 1C:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">192.168.125.107 rasp1cserapp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="итилиум">&lt;span class="section-num">2.3&lt;/span> Итилиум&lt;/h3>
&lt;ul>
&lt;li>Система Service Desk Итилиум &amp;mdash; управление IT-услугами на платформе 1С.&lt;/li>
&lt;li>Сайт: &lt;a href="https://itilium.ru/service-desk" target="_blank" rel="noopener">https://itilium.ru/service-desk&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h4 id="тонкий-клиент">&lt;span class="section-num">2.3.1&lt;/span> Тонкий клиент&lt;/h4>
&lt;ul>
&lt;li>Рекомендуемое название: Итилиум&lt;/li>
&lt;li>Кластер серверов: 192.168.125.103:2441&lt;/li>
&lt;li>Имя ИБ: &lt;code>ITL_RUDN&lt;/code>&lt;/li>
&lt;/ul>
&lt;h4 id="web-клиент">&lt;span class="section-num">2.3.2&lt;/span> Web-клиент&lt;/h4>
&lt;ul>
&lt;li>Ссылка: &lt;a href="https://eisweb.rudn.ru/ITL_RUDN/" target="_blank" rel="noopener">https://eisweb.rudn.ru/ITL_RUDN/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="мобильное-приложение">&lt;span class="section-num">2.3.3&lt;/span> Мобильное приложение&lt;/h4>
&lt;ul>
&lt;li>Android: &lt;a href="https://play.google.com/store/apps/details?id=com.desnol.itiliummobile.itiliummobile&amp;amp;hl=ru" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=com.desnol.itiliummobile.itiliummobile&amp;hl=ru&lt;/a>.&lt;/li>
&lt;li>iOS: &lt;a href="https://itunes.apple.com/ru/app/%D0%B8%D1%82%D0%B8%D0%BB%D0%B8%D1%83%D0%BC/id1057128487?platform=iphone&amp;amp;preserveScrollPosition=true#platform/iphone" target="_blank" rel="noopener">https://itunes.apple.com/ru/app/%D0%B8%D1%82%D0%B8%D0%BB%D0%B8%D1%83%D0%BC/id1057128487?platform=iphone&amp;preserveScrollPosition=true#platform/iphone&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h3 id="документооборот">&lt;span class="section-num">2.4&lt;/span> Документооборот&lt;/h3>
&lt;h4 id="тонкий-клиент">&lt;span class="section-num">2.4.1&lt;/span> Тонкий клиент&lt;/h4>
&lt;ul>
&lt;li>Рекомендуемое название: &lt;em>СЭД&lt;/em>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>На веб-сервере&lt;/p>
&lt;ul>
&lt;li>Расположение информационной базы на веб-сервере: &lt;code>https://sed.rudn.ru/DGU_RUDN&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>На сервере 1С:Предприятие&lt;/p>
&lt;ul>
&lt;li>Кластер серверов: &lt;code>192.168.125.183&lt;/code>&lt;/li>
&lt;li>Имя информационной базы: &lt;code>DGU_RUDN&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="web-клиент">&lt;span class="section-num">2.4.2&lt;/span> Web-клиент&lt;/h4>
&lt;ul>
&lt;li>Ссылка: &lt;a href="https://sed.rudn.ru/" target="_blank" rel="noopener">https://sed.rudn.ru/&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h4 id="мобильное-приложение">&lt;span class="section-num">2.4.3&lt;/span> Мобильное приложение&lt;/h4>
&lt;ul>
&lt;li>Google Play: &lt;a href="https://play.google.com/store/apps/details?id=ru.rudn.sed" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=ru.rudn.sed&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="подключение-извне-сети-университета">&lt;span class="section-num">2.4.4&lt;/span> Подключение извне сети Университета&lt;/h4>
&lt;ul>
&lt;li>Подключение извне корпоративной сети РУДН проводится с помощью VPN по протоколу Cisco AnyConnect (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/08/19/cisco-vpn-client-setup/">Подключение к Cisco VPN&lt;/a>).&lt;/li>
&lt;li>Клиента для Windows можно получить с сайта &lt;a href="https://vpn.rudn.ru:444/" target="_blank" rel="noopener">https://vpn.rudn.ru:444/&lt;/a>.&lt;/li>
&lt;li>В настройках укажите в качестве шлюза &lt;code>vpn.rudn.ru:444&lt;/code>.&lt;/li>
&lt;li>При первом подключении будет запрошен логин и пароль.&lt;/li>
&lt;li>Рекомендуется разрешить сохранение парольной информации для дальнейших сессий.&lt;/li>
&lt;li>DNS сервер РУДН не поддерживает DNSSEC, поэтому рекомендуется отключить его у локального кэширующего DNS-сервера.&lt;/li>
&lt;/ul></description></item><item><title>Генератор статических сайтов Hugo</title><link>https://yamadharma.github.io/ru/post/2020/12/07/hugo-site-generator/</link><pubDate>Mon, 07 Dec 2020 14:06:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/12/07/hugo-site-generator/</guid><description>&lt;p>Особенности генератора статических сайтов Hugo.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#темы">&lt;span class="section-num">1&lt;/span> Темы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#язык-описания-страниц">&lt;span class="section-num">2&lt;/span> Язык описания страниц&lt;/a>&lt;/li>
&lt;li>&lt;a href="#собственная-favicon-для-сайта">&lt;span class="section-num">3&lt;/span> Собственная favicon для сайта&lt;/a>&lt;/li>
&lt;li>&lt;a href="#взаимодействие-с-внешними-сервисами">&lt;span class="section-num">4&lt;/span> Взаимодействие с внешними сервисами&lt;/a>&lt;/li>
&lt;li>&lt;a href="#процесс-создания-блога">&lt;span class="section-num">5&lt;/span> Процесс создания блога&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-статического-сайта">&lt;span class="section-num">6&lt;/span> Создание статического сайта&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="темы">&lt;span class="section-num">1&lt;/span> Темы&lt;/h2>
&lt;ul>
&lt;li>В рамах Hugo создан набор разнообразных тем.&lt;/li>
&lt;li>Для сайта научного работника или научной группы можно рекомендовать набор тем Wowchemy (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/07/02/hugo-template-for-scientists/">Hugo. Шаблон для научных работников&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="язык-описания-страниц">&lt;span class="section-num">2&lt;/span> Язык описания страниц&lt;/h2>
&lt;ul>
&lt;li>В качестве языка описания страниц используется Markdown. Сам Hugo использует библиотеку &lt;a href="https://github.com/yuin/goldmark/" target="_blank" rel="noopener">Goldmark&lt;/a>. Этот диалект полностью соответствует спецификации &lt;a href="https://commonmark.org/" target="_blank" rel="noopener">CommonMark&lt;/a>.&lt;/li>
&lt;li>Язык расширен в основном за счёт операторов (shortcodes) и поддержки расширений для диаграмм, LaTeX и др. ( см. &lt;a href="https://yamadharma.github.io/ru/post/2020/11/26/hugo-markdown/">Синтаксис Markdown для генератора сайтов Hugo&lt;/a>).&lt;/li>
&lt;li>Кроме того, возможно использование и других диалектов Markdown.&lt;/li>
&lt;li>Также возможно использование других легковесных языков разметки (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/28/lightweight-markup-languages/">Легковесные языки разметки&lt;/a>): &lt;a href="https://github.com/niklasfasching/go-org" target="_blank" rel="noopener">Emacs Org-mode&lt;/a>, &lt;a href="https://asciidoctor.org/" target="_blank" rel="noopener">AsciiDoc&lt;/a>, &lt;a href="http://docutils.sourceforge.net/rst.html" target="_blank" rel="noopener">RST&lt;/a> через внешние программы.&lt;/li>
&lt;/ul>
&lt;h2 id="собственная-favicon-для-сайта">&lt;span class="section-num">3&lt;/span> Собственная favicon для сайта&lt;/h2>
&lt;ul>
&lt;li>Собственная иконка для сайта делается в виде файла &lt;code>icon.png&lt;/code>, размеры 512x512 пикселей.&lt;/li>
&lt;li>Иконка располагается в каталоге &lt;code>assets/media/&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="взаимодействие-с-внешними-сервисами">&lt;span class="section-num">4&lt;/span> Взаимодействие с внешними сервисами&lt;/h2>
&lt;ul>
&lt;li>Для комментариев используются сервисы &lt;a href="https://disqus.com/" target="_blank" rel="noopener">Disqus&lt;/a> и &lt;a href="https://commento.io/" target="_blank" rel="noopener">Commento&lt;/a> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/25/commenting-static-sites/">Комментирование для статических сайтов&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="процесс-создания-блога">&lt;span class="section-num">5&lt;/span> Процесс создания блога&lt;/h2>
&lt;ul>
&lt;li>Предлагается не писать заметки непосредственно для сайта, а использовать систему генерации статических сайтов как бэкенд для систем ведения заметок.&lt;/li>
&lt;li>Предлагается использовать режим &lt;em>org-roam&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/11/23/org-roam-hugo-export/">Org-roam. Экспорт в Hugo&lt;/a>) редактора &lt;em>emacs&lt;/em> как реализации &lt;em>Zettelkasten&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/02/18/zettelkasten-method/">Метод Zettelkasten&lt;/a>).&lt;/li>
&lt;li>Для реализации методики &lt;em>Zettelkasten&lt;/em> на сайте необходима реализация обратных ссылок (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/06/02/backlinks-hugo/">Обратные ссылки в Hugo&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="создание-статического-сайта">&lt;span class="section-num">6&lt;/span> Создание статического сайта&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/04/12/creating-hugo-site/">Создание сайта на Hugo&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Переход на Sway</title><link>https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/</link><pubDate>Thu, 10 Sep 2020 10:33:15 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/</guid><description>&lt;p>Решил попробовать &lt;a href="https://wayland.freedesktop.org/" target="_blank" rel="noopener">Wayland&lt;/a>. По этой причине пришлось &lt;a href="http://way-cooler.org/blog/2020/01/09/way-cooler-post-mortem.html" target="_blank" rel="noopener">перейти&lt;/a> с &lt;a href="https://awesomewm.org/" target="_blank" rel="noopener">awesome&lt;/a> на &lt;a href="https://swaywm.org/" target="_blank" rel="noopener">sway&lt;/a>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-sway">&lt;span class="section-num">2&lt;/span> Установка &lt;code>sway&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#репозитории-gentoo">&lt;span class="section-num">2.1&lt;/span> Репозитории &lt;code>gentoo&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#первоначальная-конфигурация">&lt;span class="section-num">3&lt;/span> Первоначальная конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-устройств-ввода">&lt;span class="section-num">4&lt;/span> Конфигурация устройств ввода&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#раскладка-клавиатуры">&lt;span class="section-num">4.2&lt;/span> Раскладка клавиатуры&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#примеры-модификации">&lt;span class="section-num">4.2.1&lt;/span> Примеры модификации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#комбинации-клавиш">&lt;span class="section-num">5&lt;/span> Комбинации клавиш&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#режимы-и-управление-окнами">&lt;span class="section-num">5.1&lt;/span> Режимы и управление окнами&lt;/a>&lt;/li>
&lt;li>&lt;a href="#разное">&lt;span class="section-num">5.2&lt;/span> Разное&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#совместимость-приложений">&lt;span class="section-num">6&lt;/span> Совместимость приложений&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://swaywm.org/" target="_blank" rel="noopener">https://swaywm.org/&lt;/a>&lt;/li>
&lt;li>Создавался для замены i3 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>) под Wayland.&lt;/li>
&lt;/ul>
&lt;h2 id="установка-sway">&lt;span class="section-num">2&lt;/span> Установка &lt;code>sway&lt;/code>&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">emerge -v gui-wm/sway
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="репозитории-gentoo">&lt;span class="section-num">2.1&lt;/span> Репозитории &lt;code>gentoo&lt;/code>&lt;/h3>
&lt;ul>
&lt;li>Программы для Wayland есть как в основном репозитории, так и дополнительных.&lt;/li>
&lt;li>Хочу порекомендовать для просмотра следующие репозитории (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/">Gentoo. Дополнительные репозитории&lt;/a>):
&lt;ul>
&lt;li>&lt;a href="https://github.com/epsilon-0/wayland-desktop" target="_blank" rel="noopener">wayland-desktop&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> wayland-desktop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emaint sync --repo wayland-desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;a href="https://wiki.gentoo.org/wiki/Project:GURU" target="_blank" rel="noopener">guru&lt;/a>&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> guru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emaint sync --repo guru
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="первоначальная-конфигурация">&lt;span class="section-num">3&lt;/span> Первоначальная конфигурация&lt;/h2>
&lt;ul>
&lt;li>Файл конфигурации ищется в следующем порядке:
&lt;ul>
&lt;li>&lt;code>~/.sway/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/sway/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>~/.i3/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/sway/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/i3/config&lt;/code>.&lt;/li>
&lt;li>Переменная окружения &lt;code>$XDG_CONFIG_HOME&lt;/code> по умолчанию установлена в &lt;code>~/.config/&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пакет устанавливает глобальную конфигурацию в &lt;code>/etc/sway/config&lt;/code>.&lt;/li>
&lt;li>При желании внести изменение в конфигурацию можно скопировать файл глобальной конфигурации в локальную:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p ~/.config/sway
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /etc/sway/config ~/.config/sway/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация-устройств-ввода">&lt;span class="section-num">4&lt;/span> Конфигурация устройств ввода&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Сводка доступных опций:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">man &lt;span class="m">5&lt;/span> sway-input
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Список устройств ввода можно получить, запустив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">swaymsg -t get_inputs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Идентификатор устройства используется в файле конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">input &amp;lt;identifier&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ...config options...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно иметь несколько конфигураций для разных устройств:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># default layout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">input &amp;#34;1:1:AT_Translated_Set_2_keyboard&amp;#34; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> xkb_layout us
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># custom layout for an external keyboard
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">input &amp;#34;1452:591:Custom_Keyboard&amp;#34; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> xkb_layout YourCustomLayout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="раскладка-клавиатуры">&lt;span class="section-num">4.2&lt;/span> Раскладка клавиатуры&lt;/h3>
&lt;ul>
&lt;li>Информация по параметрам:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">man &lt;span class="m">7&lt;/span> xkeyboard-config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Конфигурация раскладки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># or input &amp;lt;identifier&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">input&lt;/span> &lt;span class="s2">&amp;#34;type:keyboard&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">xkb_layout&lt;/span> &lt;span class="n">us&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">de&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">xkb_variant&lt;/span> &lt;span class="p">,&lt;/span>&lt;span class="n">nodeadkeys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">xkb_options&lt;/span> &lt;span class="n">grp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">alt_shift_toggle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройка модификаций доступна через &lt;code>xkb_options&lt;/code>.&lt;/li>
&lt;li>Варианты можно найти в &lt;code>/usr/share/X11/xkb/symbols/{altwin,capslock,compose,ctrl}&lt;/code>, соответствующее имя параметра находится в &lt;code>/usr/share/X11/xkb/rules/base&lt;/code>.&lt;/li>
&lt;li>Для команд &lt;code>xkb_layout&lt;/code>, &lt;code>xkb_model&lt;/code>, &lt;code>xkb_options&lt;/code>, &lt;code>xkb_rules&lt;/code>, &lt;code>xkb_variant&lt;/code> несколько вариантов разделяются запятыми.&lt;/li>
&lt;li>Чтобы активировать несколько опций, необходимо перечислить их через запятую, например &lt;code>xkb_options caps:escape,altwin:swap_lalt_lwin;&lt;/code>.&lt;/li>
&lt;li>Если записать опции в несколько строк, будет действовать только последняя.&lt;/li>
&lt;/ul>
&lt;h4 id="примеры-модификации">&lt;span class="section-num">4.2.1&lt;/span> Примеры модификации&lt;/h4>
&lt;ul>
&lt;li>&lt;em>Caps Lock&lt;/em> работает как &lt;em>Escape&lt;/em>: &lt;code>xkb_options caps:escape&lt;/code>.&lt;/li>
&lt;li>Поменять местами &lt;em>Escape&lt;/em> и &lt;em>Caps Lock&lt;/em>: &lt;code>xkb_options caps:swapescape&lt;/code>.&lt;/li>
&lt;li>&lt;em>Caps Lock&lt;/em> меняется с &lt;em>Control&lt;/em>: &lt;code>xkb_options ctrl:nocaps&lt;/code>.&lt;/li>
&lt;li>&lt;em>Caps Lock&lt;/em> становится дополнительным &lt;em>Control&lt;/em>: &lt;code>xkb_options caps:ctrl_modifier&lt;/code>.&lt;/li>
&lt;li>Поменять местами &lt;em>левый Alt&lt;/em> и &lt;em>Super&lt;/em>, установить &lt;em>Caps Lock&lt;/em> как &lt;em>Escape&lt;/em>: &lt;code>xkb_options altwin:swap_lalt_lwin,caps:escape&lt;/code>.&lt;/li>
&lt;li>&lt;em>Menu&lt;/em> становится дополнительным &lt;em>Super&lt;/em>: &lt;code>xkb_options altwin:menu_win&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="комбинации-клавиш">&lt;span class="section-num">5&lt;/span> Комбинации клавиш&lt;/h2>
&lt;h3 id="режимы-и-управление-окнами">&lt;span class="section-num">5.1&lt;/span> Режимы и управление окнами&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Клавиатурная комбинация&lt;/th>
&lt;th>Описание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>Mod + Shift + Space&lt;/code>&lt;/td>
&lt;td>Переключение окна в плавающий режим и обратно&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + Shift + minus&lt;/code>&lt;/td>
&lt;td>Отправка окна в блокнот (scratchpad)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + minus&lt;/code>&lt;/td>
&lt;td>Сворачивание, вызов окна в блокноте (scratchpad)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + b&lt;/code>&lt;/td>
&lt;td>Горизонтальное разделение&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + v&lt;/code>&lt;/td>
&lt;td>Вертикальное разделение&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + e&lt;/code>&lt;/td>
&lt;td>Переключить разделение&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + s&lt;/code>&lt;/td>
&lt;td>Стековое размещение (stacking layout)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + w&lt;/code>&lt;/td>
&lt;td>Размещение с табами (tabbed layout)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + r&lt;/code>&lt;/td>
&lt;td>И изменение размеров, используем &lt;code>h&lt;/code>, &lt;code>j&lt;/code>, &lt;code>k&lt;/code> , &lt;code>l&lt;/code> или ←,→,↑,↓, выход из режима &amp;mdash; &lt;code>Esc&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + {←,→,↑,↓}&lt;/code> или &lt;code>Mod + {h,j,k,l}&lt;/code>&lt;/td>
&lt;td>Перемещение по окнам&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + Shift + {←,→,↑,↓}&lt;/code> или &lt;code>Mod + Shift + {h,j,k,l}&lt;/code>&lt;/td>
&lt;td>Меняет позицию окна&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + {0..9}&lt;/code>&lt;/td>
&lt;td>Переключение между workspace&amp;rsquo;ами&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + Shift + {0..9}&lt;/code>&lt;/td>
&lt;td>Перемещение окна на заданный workspace&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + =Shift + =q&lt;/code>&lt;/td>
&lt;td>Закрыть текущее окно&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + =f&lt;/code>&lt;/td>
&lt;td>Раскрыть окно во весь экран или свернуть его обратно&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="разное">&lt;span class="section-num">5.2&lt;/span> Разное&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Клавиатурная комбинация&lt;/th>
&lt;th>Описание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>Mod + Enter&lt;/code>&lt;/td>
&lt;td>открыть новый терминал&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + d&lt;/code>&lt;/td>
&lt;td>запустить программу&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + =Shift + =c&lt;/code>&lt;/td>
&lt;td>перечитать конфигурацию &lt;code>sway&lt;/code> (перестартовать)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + Shift + e&lt;/code>&lt;/td>
&lt;td>Выйти из &lt;code>sway&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="совместимость-приложений">&lt;span class="section-num">6&lt;/span> Совместимость приложений&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/20/sway-application-compatibility/">Sway. Совместимость приложений&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Firefox. Расширения</title><link>https://yamadharma.github.io/ru/post/2006/12/24/firefox-extention/</link><pubDate>Sun, 24 Dec 2006 18:10:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2006/12/24/firefox-extention/</guid><description>&lt;p>Расширения Firefox, которые я использую.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#актуальный-список">&lt;span class="section-num">1&lt;/span> Актуальный список&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#блокировщики">&lt;span class="section-num">1.1&lt;/span> Блокировщики&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#ghostery">&lt;span class="section-num">1.1.1&lt;/span> Ghostery&lt;/a>&lt;/li>
&lt;li>&lt;a href="#adguard-addblocker">&lt;span class="section-num">1.1.2&lt;/span> AdGuard Addblocker&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#закладки">&lt;span class="section-num">1.2&lt;/span> Закладки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#bukubrow">&lt;span class="section-num">1.2.1&lt;/span> Bukubrow&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#навигация">&lt;span class="section-num">1.3&lt;/span> Навигация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#vimium-c">&lt;span class="section-num">1.3.1&lt;/span> Vimium C&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#пароли">&lt;span class="section-num">1.4&lt;/span> Пароли&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#browserpass">&lt;span class="section-num">1.4.1&lt;/span> Browserpass&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gopass-bridge">&lt;span class="section-num">1.4.2&lt;/span> Gopass Bridge&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#переводчики">&lt;span class="section-num">1.5&lt;/span> Переводчики&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#twp-translate-web-pages">&lt;span class="section-num">1.5.1&lt;/span> TWP - Translate Web Pages&lt;/a>&lt;/li>
&lt;li>&lt;a href="#voice-over-translation">&lt;span class="section-num">1.5.2&lt;/span> voice-over-translation&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#фреймворки">&lt;span class="section-num">1.6&lt;/span> Фреймворки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#tampermonkey">&lt;span class="section-num">1.6.1&lt;/span> Tampermonkey&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#архив">&lt;span class="section-num">2&lt;/span> Архив&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#usability">&lt;span class="section-num">2.1&lt;/span> Usability&lt;/a>&lt;/li>
&lt;li>&lt;a href="#блокировщики">&lt;span class="section-num">2.2&lt;/span> Блокировщики&lt;/a>&lt;/li>
&lt;li>&lt;a href="#загрузки">&lt;span class="section-num">2.3&lt;/span> Загрузки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#закладки">&lt;span class="section-num">2.4&lt;/span> Закладки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#красивости">&lt;span class="section-num">2.5&lt;/span> Красивости&lt;/a>&lt;/li>
&lt;li>&lt;a href="#работа-с-изображениями">&lt;span class="section-num">2.6&lt;/span> Работа с изображениями&lt;/a>&lt;/li>
&lt;li>&lt;a href="#разное">&lt;span class="section-num">2.7&lt;/span> Разное&lt;/a>&lt;/li>
&lt;li>&lt;a href="#улучшение-интерфейса">&lt;span class="section-num">2.8&lt;/span> Улучшение интерфейса&lt;/a>&lt;/li>
&lt;li>&lt;a href="#языковые-инструменты">&lt;span class="section-num">2.9&lt;/span> Языковые инструменты&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="актуальный-список">&lt;span class="section-num">1&lt;/span> Актуальный список&lt;/h2>
&lt;h3 id="блокировщики">&lt;span class="section-num">1.1&lt;/span> Блокировщики&lt;/h3>
&lt;h4 id="ghostery">&lt;span class="section-num">1.1.1&lt;/span> Ghostery&lt;/h4>
&lt;ul>
&lt;li>Сайт: &lt;a href="http://www.ghostery.com/" target="_blank" rel="noopener">http://www.ghostery.com/&lt;/a>&lt;/li>
&lt;li>Firefox: &lt;a href="https://addons.mozilla.org/ru/firefox/addon/ghostery/" target="_blank" rel="noopener">https://addons.mozilla.org/ru/firefox/addon/ghostery/&lt;/a>.&lt;/li>
&lt;li>Блокировка рекламы.&lt;/li>
&lt;li>Защита конфиденциальности.&lt;/li>
&lt;/ul>
&lt;h4 id="adguard-addblocker">&lt;span class="section-num">1.1.2&lt;/span> AdGuard Addblocker&lt;/h4>
&lt;ul>
&lt;li>Сайт: &lt;a href="https://adguard.info" target="_blank" rel="noopener">https://adguard.info&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/AdguardTeam/AdguardBrowserExtension" target="_blank" rel="noopener">https://github.com/AdguardTeam/AdguardBrowserExtension&lt;/a>&lt;/li>
&lt;li>Firefox: &lt;a href="https://addons.mozilla.org/ru/firefox/addon/adguard-adblocker/" target="_blank" rel="noopener">https://addons.mozilla.org/ru/firefox/addon/adguard-adblocker/&lt;/a>&lt;/li>
&lt;li>Лицензия: GPL-3.0.&lt;/li>
&lt;li>Блокирует рекламу, включая:
&lt;ul>
&lt;li>видеорекламу (в том числе на YouTube);&lt;/li>
&lt;li>Rich media (анимированную рекламу);&lt;/li>
&lt;li>нежелательные всплывающие окна;&lt;/li>
&lt;li>баннеры и текстовые объявления.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="закладки">&lt;span class="section-num">1.2&lt;/span> Закладки&lt;/h3>
&lt;h4 id="bukubrow">&lt;span class="section-num">1.2.1&lt;/span> Bukubrow&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/22/buku-bookmark-manager/">Менеджер закладок buku&lt;/a>&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/samhh/bukubrow-webext" target="_blank" rel="noopener">https://github.com/samhh/bukubrow-webext&lt;/a>&lt;/li>
&lt;li>Firefox: &lt;a href="https://addons.mozilla.org/en-US/firefox/addon/bukubrow/" target="_blank" rel="noopener">https://addons.mozilla.org/en-US/firefox/addon/bukubrow/&lt;/a>&lt;/li>
&lt;li>Chrome/Chromium: &lt;a href="https://chrome.google.com/webstore/detail/bukubrow/ghniladkapjacfajiooekgkfopkjblpn" target="_blank" rel="noopener">https://chrome.google.com/webstore/detail/bukubrow/ghniladkapjacfajiooekgkfopkjblpn&lt;/a>&lt;/li>
&lt;li>Переведён в неподдерживаемое состояние &lt;span class="timestamp-wrapper">&lt;span class="timestamp">[2024-09-07 Сб]&lt;/span>&lt;/span>.&lt;/li>
&lt;li>Предполагается замена на использование лаунчера (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/08/11/launcher/">Лаунчеры&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h3 id="навигация">&lt;span class="section-num">1.3&lt;/span> Навигация&lt;/h3>
&lt;h4 id="vimium-c">&lt;span class="section-num">1.3.1&lt;/span> Vimium C&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/19/vim-keyboard-browsers/">Vim. Клавиатура. Броузеры&lt;/a>&lt;/li>
&lt;li>Навигация в стиле Vim.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/gdh1995/vimium-c" target="_blank" rel="noopener">https://github.com/gdh1995/vimium-c&lt;/a>&lt;/li>
&lt;li>Firefox: &lt;a href="https://addons.mozilla.org/ru/firefox/addon/vimium-c/" target="_blank" rel="noopener">https://addons.mozilla.org/ru/firefox/addon/vimium-c/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="пароли">&lt;span class="section-num">1.4&lt;/span> Пароли&lt;/h3>
&lt;h4 id="browserpass">&lt;span class="section-num">1.4.1&lt;/span> Browserpass&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>&lt;/li>
&lt;li>Работа с паролями через парольный менеджер &lt;em>pass&lt;/em>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/browserpass/browserpass-extension" target="_blank" rel="noopener">https://github.com/browserpass/browserpass-extension&lt;/a>&lt;/li>
&lt;li>Firefox: &lt;a href="https://github.com/browserpass/browserpass-extension" target="_blank" rel="noopener">https://github.com/browserpass/browserpass-extension&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="gopass-bridge">&lt;span class="section-num">1.4.2&lt;/span> Gopass Bridge&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2021/04/28/password-manager-pass/">Менеджер паролей pass&lt;/a>&lt;/li>
&lt;li>Работа с паролями через парольный менеджер &lt;em>gopass&lt;/em>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/gopasspw/gopassbridge" target="_blank" rel="noopener">https://github.com/gopasspw/gopassbridge&lt;/a>&lt;/li>
&lt;li>Firefox: &lt;a href="https://addons.mozilla.org/en-US/firefox/addon/gopass-bridge/" target="_blank" rel="noopener">https://addons.mozilla.org/en-US/firefox/addon/gopass-bridge/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="переводчики">&lt;span class="section-num">1.5&lt;/span> Переводчики&lt;/h3>
&lt;h4 id="twp-translate-web-pages">&lt;span class="section-num">1.5.1&lt;/span> TWP - Translate Web Pages&lt;/h4>
&lt;ul>
&lt;li>Перевод страницы с помощью Google или Яндекс.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/FilipePS/Traduzir-paginas-web" target="_blank" rel="noopener">https://github.com/FilipePS/Traduzir-paginas-web&lt;/a>&lt;/li>
&lt;li>Firefox: &lt;a href="https://addons.mozilla.org/ru/firefox/addon/traduzir-paginas-web/" target="_blank" rel="noopener">https://addons.mozilla.org/ru/firefox/addon/traduzir-paginas-web/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="voice-over-translation">&lt;span class="section-num">1.5.2&lt;/span> voice-over-translation&lt;/h4>
&lt;ul>
&lt;li>Перевод видео на русский, английский, казахский.&lt;/li>
&lt;li>Для перевода использует сервис &lt;a href="https://translate.yandex.ru/" target="_blank" rel="noopener">Yandex.Translate&lt;/a>.&lt;/li>
&lt;li>Использует фреймворк &lt;em>Tampermonkey&lt;/em>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/ilyhalight/voice-over-translation" target="_blank" rel="noopener">https://github.com/ilyhalight/voice-over-translation&lt;/a>&lt;/li>
&lt;li>Сам скрипт: &lt;a href="https://raw.githubusercontent.com/ilyhalight/voice-over-translation/master/dist/vot.user.js" target="_blank" rel="noopener">https://raw.githubusercontent.com/ilyhalight/voice-over-translation/master/dist/vot.user.js&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="фреймворки">&lt;span class="section-num">1.6&lt;/span> Фреймворки&lt;/h3>
&lt;h4 id="tampermonkey">&lt;span class="section-num">1.6.1&lt;/span> Tampermonkey&lt;/h4>
&lt;ul>
&lt;li>Позволяет запускать пользовательские скрипты на JavaScript.&lt;/li>
&lt;li>Сайт: &lt;a href="https://www.tampermonkey.net/" target="_blank" rel="noopener">https://www.tampermonkey.net/&lt;/a>&lt;/li>
&lt;li>Firefox: &lt;a href="https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/" target="_blank" rel="noopener">https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="архив">&lt;span class="section-num">2&lt;/span> Архив&lt;/h2>
&lt;h3 id="usability">&lt;span class="section-num">2.1&lt;/span> Usability&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://urandom.ca/nosquint/" target="_blank" rel="noopener">NoSquint&lt;/a>: запоминает увеличение страницы.&lt;/li>
&lt;/ul>
&lt;h3 id="блокировщики">&lt;span class="section-num">2.2&lt;/span> Блокировщики&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://www.pierceive.com/" target="_blank" rel="noopener">Adblock Filterset.G Updater&lt;/a>: обновление фильтров для Adblock Plus.&lt;/li>
&lt;li>&lt;a href="http://adblockplus.org/" target="_blank" rel="noopener">Adblock Plus&lt;/a>: банерорезка.&lt;/li>
&lt;/ul>
&lt;h3 id="загрузки">&lt;span class="section-num">2.3&lt;/span> Загрузки&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://flashgot.net/" target="_blank" rel="noopener">FlashGot&lt;/a>: интерфейс к менеджерам загрузки.&lt;/li>
&lt;li>&lt;a href="http://www.pdfdownload.org/" target="_blank" rel="noopener">PDF Download&lt;/a>: не загружает сразу PDF для просмотра, а предлагает некий набор действий.&lt;/li>
&lt;li>&lt;a href="http://videodownloader.net/" target="_blank" rel="noopener">VideoDownloader&lt;/a>: загрузка разных медийных материалов со страницы.&lt;/li>
&lt;li>&lt;a href="http://www.compunach.co.nr/unplug/" target="_blank" rel="noopener">UnPlug&lt;/a>: то же, что и предыдущее расширение. Поставил для пробы.&lt;/li>
&lt;li>&lt;a href="http://park2.wakwak.com/%7Ebenki/cacheviewer.html" target="_blank" rel="noopener">CacheViewer&lt;/a> (&lt;a href="https://addons.mozilla.org/firefox/2489" target="_blank" rel="noopener">https://addons.mozilla.org/firefox/2489&lt;/a>): работа с кэшем броузера. Есть возможность поиска.&lt;/li>
&lt;/ul>
&lt;h3 id="закладки">&lt;span class="section-num">2.4&lt;/span> Закладки&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://www.foxmarks.com/" target="_blank" rel="noopener">Foxmarks Bookmark Synchronizer&lt;/a>: синхронизирует закладки с сервером sync.foxcloud.com. Особенно удобно, когда работаешь в нескольких местах.&lt;/li>
&lt;li>&lt;a href="http://www.google.com/search?q=Firefox%20Enhanced%20Bookmark%20Search" target="_blank" rel="noopener">Enhanced Bookmark Search&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="красивости">&lt;span class="section-num">2.5&lt;/span> Красивости&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://www.cutemenuproject.com/" target="_blank" rel="noopener">CuteMenus - Crystal SVG&lt;/a>: красивости для оформления меню.&lt;/li>
&lt;li>&lt;a href="https://addons.mozilla.org/en-US/firefox/addon/1951" target="_blank" rel="noopener">Fission&lt;/a>: Индикатор процесса загрузки страницы в панели адреса.&lt;/li>
&lt;/ul>
&lt;h3 id="работа-с-изображениями">&lt;span class="section-num">2.6&lt;/span> Работа с изображениями&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://imagezoom.yellowgorilla.net/" target="_blank" rel="noopener">Image Zoom&lt;/a>: удобное изменение масштаба изображения.&lt;/li>
&lt;li>&lt;a href="http://imglikeopera.mozdev.org/" target="_blank" rel="noopener">ImgLikeOpera&lt;/a>: позволяет не загружать изображения (стоит, но я не пользуюсь).&lt;/li>
&lt;/ul>
&lt;h3 id="разное">&lt;span class="section-num">2.7&lt;/span> Разное&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://deepestsender.mozdev.org/" target="_blank" rel="noopener">Deepest Sender&lt;/a>: blog-клиент.&lt;/li>
&lt;li>&lt;a href="http://www.foxytunes.com/" target="_blank" rel="noopener">FoxyTunes&lt;/a>: управление проигрыванием музыки.&lt;/li>
&lt;li>&lt;a href="http://amb.vis.ne.jp/mozilla/scrapbook/" target="_blank" rel="noopener">ScrapBook&lt;/a>: позволяет сохранять страницы целиком и каталогизировать их.&lt;/li>
&lt;li>&lt;a href="http://passwordexporter.fligtar.com/" target="_blank" rel="noopener">Password Exporter&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.google.com/search?q=Firefox%20Enhanced%20History%20Manager" target="_blank" rel="noopener">Enhanced History Manager&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://fasterfox.mozdev.org/" target="_blank" rel="noopener">Fasterfox&lt;/a>: должно ускорять работу броузера. Не знаю, работает или нет.&lt;/li>
&lt;li>&lt;a href="http://informenter.mozdev.org/" target="_blank" rel="noopener">InFormEnter&lt;/a>: работа с формами.&lt;/li>
&lt;/ul>
&lt;h3 id="улучшение-интерфейса">&lt;span class="section-num">2.8&lt;/span> Улучшение интерфейса&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="http://firefox.exxile.net/aios/" target="_blank" rel="noopener">All-in-One Sidebar&lt;/a>: удобная боковая панель.&lt;/li>
&lt;li>&lt;a href="http://www.mrtech.com/extensions/local_install/" target="_blank" rel="noopener">MR Tech Local Install&lt;/a>: улучшения для работы с расширениями.&lt;/li>
&lt;li>&lt;a href="http://tmp.garyr.net/" target="_blank" rel="noopener">Tab Mix Plus&lt;/a>: работа с вкладками.&lt;/li>
&lt;/ul>
&lt;h3 id="языковые-инструменты">&lt;span class="section-num">2.9&lt;/span> Языковые инструменты&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://addons.mozilla.org/firefox/3529/" target="_blank" rel="noopener">Russian hot keys bugfix&lt;/a>: позволяет работать клавишным сочетаниям в русском регистре.&lt;/li>
&lt;li>&lt;a href="https://addons.mozilla.org/firefox/3703/" target="_blank" rel="noopener">Russian spell dictionary&lt;/a>: собственно русский словарь для проверки орфографии.&lt;/li>
&lt;li>&lt;a href="http://en.design-noir.de/mozilla/dictionary-switcher/" target="_blank" rel="noopener">Dictionary Switcher&lt;/a>: переключатель словарей.[[&lt;a href="http://en.design-noir.de/mozilla/dictionary-switcher-tb/" target="_blank" rel="noopener">http://en.design-noir.de/mozilla/dictionary-switcher-tb/&lt;/a>][]]&lt;/li>
&lt;li>&lt;a href="http://www.google.com/search?q=Firefox%20Human%20URL" target="_blank" rel="noopener">Human URL&lt;/a>: вместо символов %XX пишутся нормальные буквы.&lt;/li>
&lt;/ul></description></item></channel></rss>