---
title: "Quarto. Профили"
author: ["Dmitry S. Kulyabov"]
date: 2025-10-08T19:45:00+03:00
lastmod: 2025-10-14T20:03:00+03:00
tags: ["markdown"]
categories: ["computer-science"]
draft: false
slug: "quarto-profiles"
---

Quarto. Профили.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Общая информация {#общая-информация}

-   Профили в Quarto позволяют адаптировать опции, окружение и содержание проектов для различных сценариев.
-   С их помощью можно, например:
    -   настроить разное поведение при выполнении на производственном сервере и локально;
    -   предоставлять различные учётные данные для баз данных или веб-сервисов в зависимости от профиля;
    -   создавать разные версии книги из одного исходного кода (например, базовую и продвинутую).


## <span class="section-num">2</span> Шаги по применению профилей в Quarto {#шаги-по-применению-профилей-в-quarto}


### <span class="section-num">2.1</span> Создание основного файла конфигурации {#создание-основного-файла-конфигурации}

-   начните с создания основного файла `_quarto.yml`, в котором укажите базовые настройки проекта;
-   в этом файле определите общие параметры, которые будут применяться ко всем версиям проекта.


### <span class="section-num">2.2</span> Создание дополнительных файлов конфигурации для профилей {#создание-дополнительных-файлов-конфигурации-для-профилей}

-   для каждого профиля создайте отдельный файл конфигурации, например, `_quarto-production.yml` для производственного профиля или `_quarto-advanced.yml` для продвинутой версии;
-   в этих файлах укажите параметры, которые должны переопределять или дополнять настройки из основного файла `_quarto.yml`.


### <span class="section-num">2.3</span> Настройка параметров в файлах профилей: {#настройка-параметров-в-файлах-профилей}

-   в файлах профилей можно настроить такие параметры, как заголовок проекта, директорию вывода, поведение выполнения и другие опции;
-   пример настройки:

<!--listend-->

```yaml
_quarto-production.yml:
  execute:
    freeze: false
```

-   Это отключит использование `freeze` при рендеринге в производственном профиле.


### <span class="section-num">2.4</span> Активация профилей {#активация-профилей}

-   Активировать профили можно двумя способами: через переменную окружения `QUARTO_PROFILE` или с помощью аргумента командной строки `--profile`.
-   Активация через переменную окружения:

<!--listend-->

```shell
export QUARTO_PROFILE=production
quarto render
```

-   Активация через аргумент командной строки:

<!--listend-->

```shell
quarto render --profile production
```

-   Активация нескольких профилей одновременно:

<!--listend-->

```shell
quarto render --profile production,advanced
```


### <span class="section-num">2.5</span> Включение/исключение контента в зависимости от профиля {#включение-исключение-контента-в-зависимости-от-профиля}

-   Чтобы включать или исключать контент в зависимости от активного профиля, используйте класс `.content-visible` вместе с атрибутом `when-profile` для элементов `div` или `span`:

<!--listend-->

```html
::: {.content-visible when-profile="advanced"}
Этот контент будет отображаться только в продвинутой версии.
:::
```

-   Для исключения контента из определённого профиля можно использовать атрибут `unless-profile`:

<!--listend-->

```html
::: {.content-visible unless-profile="advanced"}
Этот контент будет отображаться во всех версиях, кроме продвинутой.
:::
```


### <span class="section-num">2.6</span> Настройка профиля по умолчанию {#настройка-профиля-по-умолчанию}

-   Чтобы определить профиль по умолчанию, который будет использоваться, если не указан `QUARTO_PROFILE` или `--profile`, добавьте опцию `default` в ключ `profile` в файле `_quarto.yml`:

<!--listend-->

```yaml
profile:
  default: development
```


## <span class="section-num">3</span> Примеры {#примеры}


### <span class="section-num">3.1</span> Многоязычный сайт {#многоязычный-сайт}

-   Создайте отдельные профили для каждого языка, например, `_quarto-english.yml` и `_quarto-german.yml`.
-   Настройте в профилях соответствующие параметры, такие как язык интерфейса, навигацию и директорию вывода.
-   Для переключения между языками на сайте можно использовать ссылки с относительными путями, например:

<!--listend-->

```yaml
navbar:
  right:
    - href: ../de
      text: Deutsch
    - href: ../en
      text: English
```

-   При публикации сайта укажите `_site` в качестве папки для публикации.


### <span class="section-num">3.2</span> Документ на нескольких языках {#документ-на-нескольких-языках}

-   Документ подготавливается на одном языке (например, на русском), а затем добавляется перевод на другой язык (например, на английский).
-   Переводы идут рядом в тексте.


#### <span class="section-num">3.2.1</span> Блоки текста {#блоки-текста}

-   Текст заключаем в блоки с соответствующими атрибутами:
    ```markdown
    ::: {.content-visible when-profile="russian"}
    Русский текст.
    :::
    ::: {.content-visible when-profile="english"}
    English text.
    :::
    ```


#### <span class="section-num">3.2.2</span> Компиляция {#компиляция}

-   Компиляция выполняется командой:
    ```shell
    quarto render --profile russian,english
    ```
