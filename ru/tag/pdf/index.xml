<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Pdf | Д. С. Кулябов</title><link>http://localhost:1313/ru/tag/pdf/</link><atom:link href="http://localhost:1313/ru/tag/pdf/index.xml" rel="self" type="application/rss+xml"/><description>Pdf</description><generator>Hugo Blox Builder (https://hugoblox.com)</generator><language>ru-ru</language><copyright>© 2025 Dmitry S. Kulyabov</copyright><lastBuildDate>Tue, 29 Apr 2025 16:29:00 +0300</lastBuildDate><image><url>http://localhost:1313/media/icon_hu_3756dbc1adf0ae14.png</url><title>Pdf</title><link>http://localhost:1313/ru/tag/pdf/</link></image><item><title>Конвертация djvu в pdf. dpsprep</title><link>http://localhost:1313/ru/post/2025/04/29/convert-djvu-pdf-dpsprep/</link><pubDate>Tue, 29 Apr 2025 16:29:00 +0300</pubDate><guid>http://localhost:1313/ru/post/2025/04/29/convert-djvu-pdf-dpsprep/</guid><description>&lt;p&gt;Конвертация djvu в pdf. dpsprep.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#параметры"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Параметры&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#выполнение-сжатия"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Выполнение сжатия&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#примеры-использования"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Примеры использования&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Конвертер DjVu в PDF.&lt;/li&gt;
&lt;li&gt;Позволяет сохранять структуру документа (например, оглавление) и текстовые слои (например, OCR).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="параметры"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Параметры&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-q&lt;/code&gt;, &lt;code&gt;--quality&lt;/code&gt; : качество изображений на выходе. Используется только для сжатия JPEG, т.е. изображений RGB и Grayscale. Передается напрямую в Pillow и оптимизатору OCRmyPDF.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p&lt;/code&gt;, &lt;code&gt;--pool-size&lt;/code&gt; : размер пула MultiProcessing для обработки постраничных операций.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-v&lt;/code&gt;, &lt;code&gt;--verbose&lt;/code&gt; : отображение отладочных сообщений.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-o&lt;/code&gt;, &lt;code&gt;--overwrite&lt;/code&gt; : перезаписать файл назначения.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-w&lt;/code&gt;, &lt;code&gt;--preserve-working&lt;/code&gt; : сохранять рабочий каталог после завершения скрипта.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-d&lt;/code&gt;, &lt;code&gt;--delete-working&lt;/code&gt; : перед записью в рабочий каталог удалите все существующие файлы.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-t&lt;/code&gt;, &lt;code&gt;--no-text&lt;/code&gt; : отключить генерацию текстовых слоев. Подразумевается &lt;code&gt;--ocr&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-m&lt;/code&gt;, &lt;code&gt;--mode&lt;/code&gt; : режим изображения. По умолчанию запрашивается режим изображения каждой страницы у libdjvu. Иногда имеет смысл принудительно использовать битональные изображения, поскольку они хорошо сжимаются.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--ocr&lt;/code&gt; : выполнить OCR через OCRmyPDF, а не пытаться преобразовать текстовый слой. Если этот параметр имеет значение, это должен быть словарь JSON с параметрами, которые будут переданы в OCRmyPDF.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-O1&lt;/code&gt; : используйте оптимизацию изображений PDF без потерь с помощью OCRmyPDF (без выполнения OCR).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-O2&lt;/code&gt; : используйте оптимизацию изображений PDF от OCRmyPDF.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-O3&lt;/code&gt; : используйте агрессивную оптимизацию изображений PDF с потерями от OCRmyPDF.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="выполнение-сжатия"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Выполнение сжатия&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Компрессия поводится в два этапа:
&lt;ul&gt;
&lt;li&gt;сжатие по умолчанию, предоставляемое Pillow. Для битональных изображений код генерации PDF говорит, если &lt;code&gt;libtiff&lt;/code&gt; доступен, для сжатия используется &lt;code&gt;group4&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;если установлен OCRmyPDF, его оптимизацию PDF можно использовать с помощью флагов &lt;code&gt;-O1&lt;/code&gt;, &lt;code&gt;-O2&lt;/code&gt;, &lt;code&gt;-O3&lt;/code&gt; (это не требует OCR).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Если OCRmyPDF запускается вручную, обратите внимание, что команда оптимизации, предложенная в документации (параметр &lt;code&gt;--tesseract-timeout&lt;/code&gt; к &lt;code&gt;0&lt;/code&gt; ) может испортить существующие текстовые слои.&lt;/li&gt;
&lt;li&gt;Чтобы выполнить только оптимизацию PDF, вы можете использовать следующий недокументированный способ вызова:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;python -m ocrmypdf.optimize &amp;lt;input_file&amp;gt; &amp;lt;level&amp;gt; &amp;lt;output_file&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="примеры-использования"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Примеры использования&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Создать файл &lt;code&gt;file.pdf&lt;/code&gt; в текущем каталоге:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dpsprep /wherever/file.djvu
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Создать &lt;code&gt;output.pdf&lt;/code&gt; с пониженным качеством изображения и агрессивной оптимизацией изображений PDF:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dpsprep --quality&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt; -O3 input.djvu output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Использовать большой пул рабочих процессов:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dpsprep --pool&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt; input.djvu
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Принудительно сделать изображения двуцветными:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dpsprep --mode bitonal input.djvu
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Игнорировать текстовый слой и запустить OCRmyPDF:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dpsprep --ocr &lt;span class="s1"&gt;&amp;#39;{&amp;#34;language&amp;#34;: [&amp;#34;rus&amp;#34;, &amp;#34;eng&amp;#34;]}&amp;#39;&lt;/span&gt; input.djvu
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Просто проигнорируйте текстовый слой без OCR:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dpsprep --no-text input.djvu
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Распознавание pdf</title><link>http://localhost:1313/ru/post/2024/08/21/pdf-ocr/</link><pubDate>Wed, 21 Aug 2024 20:50:00 +0300</pubDate><guid>http://localhost:1313/ru/post/2024/08/21/pdf-ocr/</guid><description>&lt;p&gt;Распознавание pdf.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#решения-по-распознаванию-pdf"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Решения по распознаванию pdf&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#ocrmypdf"&gt;&lt;span class="section-num"&gt;1.1&lt;/span&gt; OCRmyPDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#pdfsandwich"&gt;&lt;span class="section-num"&gt;1.2&lt;/span&gt; pdfsandwich&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#некоторые-типовые-задачи"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Некоторые типовые задачи&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#перенос-ocr-слоя-из-одно-файла-в-другой"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Перенос ocr-слоя из одно файла в другой&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#постановка-задачи"&gt;&lt;span class="section-num"&gt;2.1.1&lt;/span&gt; Постановка задачи&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#пример-задачи"&gt;&lt;span class="section-num"&gt;2.1.2&lt;/span&gt; Пример задачи&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#варианты-решения"&gt;&lt;span class="section-num"&gt;2.1.3&lt;/span&gt; Варианты решения&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#ресурсы"&gt;&lt;span class="section-num"&gt;2.1.4&lt;/span&gt; Ресурсы&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="решения-по-распознаванию-pdf"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Решения по распознаванию pdf&lt;/h2&gt;
&lt;h3 id="ocrmypdf"&gt;&lt;span class="section-num"&gt;1.1&lt;/span&gt; OCRmyPDF&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="pdfsandwich"&gt;&lt;span class="section-num"&gt;1.2&lt;/span&gt; pdfsandwich&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="некоторые-типовые-задачи"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Некоторые типовые задачи&lt;/h2&gt;
&lt;h3 id="перенос-ocr-слоя-из-одно-файла-в-другой"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Перенос ocr-слоя из одно файла в другой&lt;/h3&gt;
&lt;h4 id="постановка-задачи"&gt;&lt;span class="section-num"&gt;2.1.1&lt;/span&gt; Постановка задачи&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Есть 2 pdf-файла:
&lt;ul&gt;
&lt;li&gt;хороший, но без текстового слоя;&lt;/li&gt;
&lt;li&gt;плохой, но с правильным текстовым слоем.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Оба файла содержат одинаковые изображения.&lt;/li&gt;
&lt;li&gt;Цель состоит в том, чтобы встроить текстовый слой из второго файла в первый pdf-файл.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="пример-задачи"&gt;&lt;span class="section-num"&gt;2.1.2&lt;/span&gt; Пример задачи&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Первый файл подготовлен с помощью OCRmyPDF, имеет адекватный размер.&lt;/li&gt;
&lt;li&gt;Второй файл обработан FineReader, имеет хороший текстовый слой, но очень большой размер.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="варианты-решения"&gt;&lt;span class="section-num"&gt;2.1.3&lt;/span&gt; Варианты решения&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Удалить изображения из файла &lt;code&gt;input_ocr.pdf&lt;/code&gt; с помощью Ghostscript:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o &lt;span class="s2"&gt;&amp;#34;input_ocr_textonly.pdf&amp;#34;&lt;/span&gt; -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dFILTERIMAGE &lt;span class="s2"&gt;&amp;#34;input_ocr.pdf&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Объединить его с файлом &lt;code&gt;input_image.pdf&lt;/code&gt; с помощью &lt;code&gt;pdftk&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftk &lt;span class="s2"&gt;&amp;#34;input_ocr_textonly.pdf&amp;#34;&lt;/span&gt; multistamp &lt;span class="s2"&gt;&amp;#34;input_image.pdf&amp;#34;&lt;/span&gt; output &lt;span class="s2"&gt;&amp;#34;output.pdf&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Или объединить его с файлом &lt;code&gt;input_image.pdf&lt;/code&gt; с помощью &lt;code&gt;qpdf&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;qpdf --empty --pages &lt;span class="s2"&gt;&amp;#34;input_image.pdf&amp;#34;&lt;/span&gt; -- --underlay &lt;span class="s2"&gt;&amp;#34;input_ocr_textonly.pdf&amp;#34;&lt;/span&gt; -- &lt;span class="s2"&gt;&amp;#34;output.pdf&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ресурсы"&gt;&lt;span class="section-num"&gt;2.1.4&lt;/span&gt; Ресурсы&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Преобразование djvu в pdf</title><link>http://localhost:1313/ru/post/2024/07/26/convert-djvu-pdf/</link><pubDate>Fri, 26 Jul 2024 18:54:00 +0300</pubDate><guid>http://localhost:1313/ru/post/2024/07/26/convert-djvu-pdf/</guid><description>&lt;p&gt;Преобразование djvu в pdf.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#использование-djvulibre"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Использование DjVuLibre&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#преобразование-одного-файла-djvu-в-pdf"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Преобразование одного файла DjVu в PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#преобразование-нескольких-файлов-djvu-в-pdf"&gt;&lt;span class="section-num"&gt;2.2&lt;/span&gt; Преобразование нескольких файлов DjVu в PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#настройка-параметров-преобразования"&gt;&lt;span class="section-num"&gt;2.3&lt;/span&gt; Настройка параметров преобразования&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#использование-imagemagick"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Использование ImageMagick&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#преобразование-одного-файла-djvu-в-pdf"&gt;&lt;span class="section-num"&gt;3.1&lt;/span&gt; Преобразование одного файла DjVu в PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#преобразование-нескольких-файлов-djvu-в-pdf"&gt;&lt;span class="section-num"&gt;3.2&lt;/span&gt; Преобразование нескольких файлов DjVu в PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#настройка-параметров-преобразования"&gt;&lt;span class="section-num"&gt;3.3&lt;/span&gt; Настройка параметров преобразования&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#утилиты"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Утилиты&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Формат DjVu оптимизирует сжатие отсканированных документов, таких как книги, журналы и тексты с большим количеством изображений.&lt;/li&gt;
&lt;li&gt;Он уменьшает размер файла, сохраняя качество, особенно для высококонтрастных изображений и текста.&lt;/li&gt;
&lt;li&gt;Это делает DjVu идеальным для хранения больших коллекций отсканированных материалов, где важна эффективность хранения.&lt;/li&gt;
&lt;li&gt;PDF является одним из наиболее широко используемых форматов для обмена, просмотра и печати документов.&lt;/li&gt;
&lt;li&gt;PDF также поддерживает такие функции, как аннотации, цифровые подписи и текстовый поиск, которые не всегда доступны в DjVu.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="использование-djvulibre"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Использование DjVuLibre&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;DjVuLibre &amp;mdash; набор инструментов и библиотек для работы с файлами DjVu.&lt;/li&gt;
&lt;li&gt;Он широко используется для просмотра, создания и конвертации документов DjVu.&lt;/li&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="преобразование-одного-файла-djvu-в-pdf"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Преобразование одного файла DjVu в PDF&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Преобразовать один файл DjVu в PDF:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ddjvu -format&lt;span class="o"&gt;=&lt;/span&gt;pdf input.djvu output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;По умолчанию DjVuLibre сохраняет преобразованный PDF в том же каталоге, что и входной файл DjVu.&lt;/li&gt;
&lt;li&gt;Можно указать желаемый выходной путь:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ddjvu -format&lt;span class="o"&gt;=&lt;/span&gt;pdf input.djvu /path/to/output/folder/output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="преобразование-нескольких-файлов-djvu-в-pdf"&gt;&lt;span class="section-num"&gt;2.2&lt;/span&gt; Преобразование нескольких файлов DjVu в PDF&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Пакетное преобразование нескольких файлов DjVu:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt; file in *.djvu&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; ddjvu -format&lt;span class="o"&gt;=&lt;/span&gt;pdf &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$file&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="p"&gt;%.djvu&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;.pdf&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="настройка-параметров-преобразования"&gt;&lt;span class="section-num"&gt;2.3&lt;/span&gt; Настройка параметров преобразования&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Можно настроить качество PDF с помощью параметра &lt;code&gt;-quality&lt;/code&gt;, который принимает значения от 25 до 150 точек на дюйм (DPI).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Установим значение &lt;code&gt;-quality&lt;/code&gt; равным 150:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ddjvu -format&lt;span class="o"&gt;=&lt;/span&gt;pdf -quality&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;150&lt;/span&gt; input.djvu output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Включим определённые страницы в преобразование, используя опцию &lt;code&gt;-page&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ddjvu -format&lt;span class="o"&gt;=&lt;/span&gt;pdf -page&lt;span class="o"&gt;=&lt;/span&gt;1-5 input.djvu output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Эта команда преобразует только страницы с 1 по 5 файла DjVu в новый PDF-файл.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="использование-imagemagick"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Использование ImageMagick&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ImageMagick &amp;mdash; универсальное программное обеспечение с открытым исходным кодом, подходящее для обработки изображений.&lt;/li&gt;
&lt;li&gt;Оно поддерживает различные форматы файлов и предлагает надежные инструменты для преобразования и редактирования изображений и документов, включая файлы DjVu.&lt;/li&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="преобразование-одного-файла-djvu-в-pdf"&gt;&lt;span class="section-num"&gt;3.1&lt;/span&gt; Преобразование одного файла DjVu в PDF&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Будем использовать утилиту &lt;code&gt;convert&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;convert input.djvu output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Для корректного выполнения этой команды нужно убедиться, что политика безопасности ImageMagick разрешает чтение и запись PDF-файлов.&lt;/li&gt;
&lt;li&gt;Проверим файл &lt;code&gt;/etc/ImageMagick-7/policy.xml&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-xml" data-lang="xml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;&amp;lt;policy&lt;/span&gt; &lt;span class="na"&gt;domain=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;coder&amp;#34;&lt;/span&gt; &lt;span class="na"&gt;rights=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;read|write&amp;#34;&lt;/span&gt; &lt;span class="na"&gt;pattern=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;PDF&amp;#34;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="преобразование-нескольких-файлов-djvu-в-pdf"&gt;&lt;span class="section-num"&gt;3.2&lt;/span&gt; Преобразование нескольких файлов DjVu в PDF&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Одновременная обработки нескольких файлов DjVu:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt; file in *.djvu&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; convert &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$file&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="p"&gt;%.djvu&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;.pdf&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="настройка-параметров-преобразования"&gt;&lt;span class="section-num"&gt;3.3&lt;/span&gt; Настройка параметров преобразования&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Изменим разрешение вывода с помощью опции &lt;code&gt;-density&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;convert -density &lt;span class="m"&gt;120&lt;/span&gt; input.djvu output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Это устанавливает разрешение 120 точек на дюйм (DPI).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Чтобы извлечь определённые страницы, укажем диапазон страниц:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;convert&lt;/span&gt; &lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;djvu&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Здесь страницы с 1 по 4 (индекс начинается с 0) преобразуются в PDF.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Для управления размером PDF-файлов мы можем использовать комбинацию параметров &lt;code&gt;-density=и =-quality&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;convert&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;density&lt;/span&gt; &lt;span class="mi"&gt;120&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;quality&lt;/span&gt; &lt;span class="mi"&gt;90&lt;/span&gt; &lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;djvu&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Параметр &lt;code&gt;-quality&lt;/code&gt; управляет качеством сжатия.&lt;/li&gt;
&lt;li&gt;Его значение варьируется от 1 до 100.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="утилиты"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Утилиты&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Pdf. Оглавление. pdf.tocgen</title><link>http://localhost:1313/ru/post/2024/06/21/pdf-toc-pdf-tocgen/</link><pubDate>Fri, 21 Jun 2024 20:36:00 +0300</pubDate><guid>http://localhost:1313/ru/post/2024/06/21/pdf-toc-pdf-tocgen/</guid><description>&lt;p&gt;Pdf. Оглавление. pdf.tocgen.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#установка"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Установка&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#рабочий-процесс"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Рабочий процесс&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#примеры-использования"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Примеры использования&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#pdftocio"&gt;&lt;span class="section-num"&gt;4.1&lt;/span&gt; pdftocio&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#pdftocgen"&gt;&lt;span class="section-num"&gt;4.2&lt;/span&gt; pdftocgen&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#pdfxmeta"&gt;&lt;span class="section-num"&gt;4.3&lt;/span&gt; pdfxmeta&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#исправление-номеров-страниц"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Исправление номеров страниц&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="установка"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Установка&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Устанавливается как python-пакет:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pipx install pdf.tocgen
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="рабочий-процесс"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Рабочий процесс&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Пакет pdf.tocgen состоит из 3 отдельных программ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pdfxmeta&lt;/code&gt; : извлечь метаданные (атрибуты шрифта, позиции) заголовков в создать файл рецепта;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdftocgen&lt;/code&gt; : создать оглавление из рецепта;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdftocio&lt;/code&gt; : импортировать оглавление в документ PDF.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Используем &lt;code&gt;pdfxmeta&lt;/code&gt; для поиска метаданных заголовков и генерации фильтры заголовков с использованием автоматической настройки:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdfxmeta -p &amp;lt;page&amp;gt; -a &lt;span class="m"&gt;1&lt;/span&gt; in.pdf &lt;span class="s2"&gt;&amp;#34;Section&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; recipe.toml
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdfxmeta -p &amp;lt;page&amp;gt; -a &lt;span class="m"&gt;2&lt;/span&gt; in.pdf &lt;span class="s2"&gt;&amp;#34;Subsection&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; recipe.toml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Здесь &lt;code&gt;&amp;lt;page&amp;gt;&lt;/code&gt; есть номер страницы в файле.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Файл &lt;code&gt;recipe.toml&lt;/code&gt; будет содержать несколько фильтров заголовков.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Пример файла рецепта будет выглядеть так:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="nx"&gt;heading&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;level&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;greedy&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;font&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Times-Bold&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;font&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;size&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;19.92530059814453&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="nx"&gt;heading&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;level&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;greedy&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;font&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Times-Bold&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;font&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;size&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;11.9552001953125&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Передадим рецепт программе &lt;code&gt;pdftocgen&lt;/code&gt; для создания оглавления:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocgen in.pdf &amp;lt; recipe.toml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;В результате получим текст оглавления следующего вида:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;#34;Preface&amp;#34; 5
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;Bottom-up Design&amp;#34; 5
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;Plan of the Book&amp;#34; 7
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;Examples&amp;#34; 9
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;Acknowledgements&amp;#34; 9
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;#34;Contents&amp;#34; 11
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;#34;The Extensible Language&amp;#34; 14
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;1.1 Design by Evolution&amp;#34; 14
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;1.2 Programming Bottom-Up&amp;#34; 16
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;1.3 Extensible Software&amp;#34; 18
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;1.4 Extending Lisp&amp;#34; 19
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;1.5 Why Lisp (or When)&amp;#34; 21
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;#34;Functions&amp;#34; 22
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;2.1 Functions as Data&amp;#34; 22
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;2.2 Defining Functions&amp;#34; 23
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;2.3 Functional Arguments&amp;#34; 26
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;2.4 Functions as Properties&amp;#34; 28
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;2.5 Scope&amp;#34; 29
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;2.6 Closures&amp;#34; 30
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;2.7 Local Functions&amp;#34; 34
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;2.8 Tail-Recursion&amp;#34; 35
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;2.9 Compilation&amp;#34; 37
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;2.10 Functions from Lists&amp;#34; 40
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;#34;Functional Programming&amp;#34; 41
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;3.1 Functional Design&amp;#34; 41
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;3.2 Imperative Outside-In&amp;#34; 46
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;3.3 Functional Interfaces&amp;#34; 48
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;3.4 Interactive Programming&amp;#34; 50
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Его можно сразу импортировать в файл PDF с помощью &lt;code&gt;pdftocio&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;$ pdftocgen in.pdf &amp;lt; recipe.toml &lt;span class="p"&gt;|&lt;/span&gt; pdftocio -o out.pdf in.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Можно отредактировать оглавление перед его импортом:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocgen in.pdf &amp;lt; recipe.toml &amp;gt; toc
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocio in.pdf &amp;lt; toc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="примеры-использования"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Примеры использования&lt;/h2&gt;
&lt;h3 id="pdftocio"&gt;&lt;span class="section-num"&gt;4.1&lt;/span&gt; pdftocio&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Отобразить существующее оглавление PDF-файла в stdout:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocio doc.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Записать существующее оглавление PDF-файла в файл с именем toc:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocio doc.pdf &amp;gt; toc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Записать оглавление из toc-файла в doc.pdf:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocio doc.pdf &amp;lt; toc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Указать имя выходного PDF-файла:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocio -o out.pdf doc.pdf &amp;lt; toc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Скопировать оглавление из doc1.pdf в doc2.pdf:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocio -v doc1.pdf &lt;span class="p"&gt;|&lt;/span&gt; pdftocio doc2.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Флаг &lt;code&gt;-v&lt;/code&gt; помогает сохранить вертикальные позиции заголовков при копировании.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Вывести оглавление для чтения:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocio -H doc.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="pdftocgen"&gt;&lt;span class="section-num"&gt;4.2&lt;/span&gt; pdftocgen&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Применить существующий рецепт &lt;code&gt;recipe.toml&lt;/code&gt; к файлу &lt;code&gt;doc.pdf&lt;/code&gt; (результат дублируется в &lt;code&gt;stdout&lt;/code&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocgen doc.pdf &amp;lt; recipe.toml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Вывести оглавление в файл с именем &lt;code&gt;toc&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocgen doc.pdf &amp;lt; recipe.toml &amp;gt; toc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Импортировать созданное оглавление в файл PDF и вывести в doc_out.pdf:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocgen doc.pdf &amp;lt; recipe.toml &lt;span class="p"&gt;|&lt;/span&gt; pdftocio -o doc_out.pdf doc.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Вывести сгенерированное оглавление для чтения:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocgen -H doc.pdf &amp;lt; recipe.toml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Если вы хотите включить вертикальное положение на странице для каждого заголовка, используйте флаг &lt;code&gt;-v&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocgen -v doc.pdf &amp;lt; recipe.toml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="pdfxmeta"&gt;&lt;span class="section-num"&gt;4.3&lt;/span&gt; pdfxmeta&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Искать слово &lt;code&gt;Anaphoric&lt;/code&gt; во всем PDF:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdfxmeta onlisp.pdf &lt;span class="s2"&gt;&amp;#34;Anaphoric&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Вывести результат в виде фильтра заголовков с автоматическими настройками:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdfxmeta -a &lt;span class="m"&gt;1&lt;/span&gt; onlisp.pdf &lt;span class="s2"&gt;&amp;#34;Anaphoric&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Поиск без учета регистра &lt;code&gt;Anaphoric&lt;/code&gt; во всем PDF:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdfxmeta -i onlisp.pdf &lt;span class="s2"&gt;&amp;#34;Anaphoric&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Использование регулярного выражения для поиска без учета регистра &lt;code&gt;Anaphoric&lt;/code&gt; в PDF-файле:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdfxmeta onlisp.pdf &lt;span class="s2"&gt;&amp;#34;[Aa]naphoric&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Поиск только на странице 203:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdfxmeta -p &lt;span class="m"&gt;203&lt;/span&gt; onlisp.pdf &lt;span class="s2"&gt;&amp;#34;anaphoric&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="исправление-номеров-страниц"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Исправление номеров страниц&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Возможно несовпадения номеров страниц книги и pdf-файла.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Возможно сдвинуть все номера страниц на некоторую величину.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Скрипт изменяет номера страниц в конце строк:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$#&lt;/span&gt; -ne &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Использование: &lt;/span&gt;&lt;span class="nv"&gt;$0&lt;/span&gt;&lt;span class="s2"&gt; &amp;lt;файл&amp;gt; &amp;lt;инкремент&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;increment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cp &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$file&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;.bak&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;awk -v &lt;span class="nv"&gt;inc&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$increment&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; # Сохраняем оригинальные отступы
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; match($0, /^ */)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; leading_space = substr($0, 1, RLENGTH)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; content = substr($0, RLENGTH+1)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; # Ищем номер страницы в формате: пробел+число(или диапазон) в конце строки
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; if (match(content, /([0-9]+(-[0-9]+)?)[[:space:]]*$/)) {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; prefix = substr(content, 1, RSTART-1)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; split(substr(content, RSTART, RLENGTH), parts, &amp;#34;-&amp;#34;)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; # Обрабатываем числа
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; new_nums = &amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; for(i in parts) {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; parts[i] += inc
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; new_nums = (i&amp;gt;1 ? new_nums &amp;#34;-&amp;#34; : &amp;#34;&amp;#34;) parts[i]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; # Собираем новую строку
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; $0 = leading_space prefix new_nums
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; print
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$file&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &amp;gt; tmp &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; mv tmp &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$file&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Номера страниц увеличены на &lt;/span&gt;&lt;span class="nv"&gt;$increment&lt;/span&gt;&lt;span class="s2"&gt;. Резервная копия: &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;.bak&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="src-block-caption"&gt;
&lt;span class="src-block-number"&gt;&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 1:&lt;/span&gt;
increment_page.sh
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Пример использования:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;./increment_page.sh toc &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Pdf. Оглавление. pdf-toc</title><link>http://localhost:1313/ru/post/2024/06/21/pdf-toc-pdf-toc/</link><pubDate>Fri, 21 Jun 2024 20:20:00 +0300</pubDate><guid>http://localhost:1313/ru/post/2024/06/21/pdf-toc-pdf-toc/</guid><description>&lt;p&gt;Pdf. Оглавление. pdf-toc.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#форматы-файлов-оглавления"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Форматы файлов оглавления&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#установка"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Установка&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#примеры-применения"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Примеры применения&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Позволяет считывать отравление из pdf-файла и записывать оглавление в pdf-файл.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="форматы-файлов-оглавления"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Форматы файлов оглавления&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Поддерживаются два типа файлов toc.&lt;/li&gt;
&lt;li&gt;Формат json, который в основном соответствует спецификации PyMuPDF.&lt;/li&gt;
&lt;li&gt;Локально определённый формат на основе markdown.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="установка"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Установка&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Устанавливается как приложение python:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pip --user install pdf-toc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="примеры-применения"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Примеры применения&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Показать содержание файла pdf в формате toc:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf-toc --show-toc toc file.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Создайте новый pdf-файл на основе файла &lt;code&gt;file.pdf&lt;/code&gt; и оглавления toc из toc.txt:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf-toc -t toc.txt -d new-file.pdf file.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Заменить оглавление файла &lt;code&gt;file.pdf&lt;/code&gt; на содержание из toc.txt:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf-toc -m -t toc.txt file.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Распознавание pdf. OCRmyPDF</title><link>http://localhost:1313/ru/post/2024/06/07/pdf-ocr-ocrmypdf/</link><pubDate>Fri, 07 Jun 2024 21:07:00 +0300</pubDate><guid>http://localhost:1313/ru/post/2024/06/07/pdf-ocr-ocrmypdf/</guid><description>&lt;p&gt;Распознавание pdf. OCRmyPDF&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#примеры-использования"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Примеры использования&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="примеры-использования"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Примеры использования&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Список языков для распознавания:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tesseract --list-langs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Преобразовать сканированный файл в файл PDF/A с распознаванием русского и английского языков:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf -l rus+eng input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Заменить отсканированный PDF-файл PDF/A-файлом:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Пропустить страницы входного PDF-файла смешанного формата, которые уже содержат текст:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --skip-text input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Очистите, исправьте перекос и поверните плохо отсканированные страницы:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --clean --deskew --rotate-pages input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Убрать фон:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --clean --remove-background input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Разделить сдвоенные страницы:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf -l rus+eng --clean --clean-final --unpaper-args &lt;span class="s1"&gt;&amp;#39;--layout double&amp;#39;&lt;/span&gt; input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Контролируем оптимизацию:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --optimize &lt;span class="m"&gt;3&lt;/span&gt; --jbig2-lossy input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Распознавание с оптимизацией:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf -l rus+eng --optimize &lt;span class="m"&gt;3&lt;/span&gt; --jbig2-lossy input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Задать метаданные PDF-файла:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --skip-text --title &lt;span class="s2"&gt;&amp;#34;&amp;lt;title&amp;gt;&amp;#34;&lt;/span&gt; --author &lt;span class="s2"&gt;&amp;#34;&amp;lt;author&amp;gt;&amp;#34;&lt;/span&gt; --subject &lt;span class="s2"&gt;&amp;#34;&amp;lt;subject&amp;gt;&amp;#34;&lt;/span&gt; --keywords &lt;span class="s2"&gt;&amp;#34;&amp;lt;keyword; key phrase; ...&amp;gt;&amp;#34;&lt;/span&gt; input_file.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Не распознавать pdf-файл&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;При установке параметра &lt;code&gt;--tesseract-timeout 0&lt;/code&gt; OCRmyPDF будет обрабатывать изображения без выполнения OCR.&lt;/li&gt;
&lt;/ul&gt;
&lt;!--listend--&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --tesseract-timeout&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; --remove-background input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Удалить весь распознанный текст из pdf-файла:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --tesseract-timeout &lt;span class="m"&gt;0&lt;/span&gt; --optimize &lt;span class="m"&gt;3&lt;/span&gt; --force-ocr input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Оптимизация изображений без выполнения распознавания:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --tesseract-timeout&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; --optimize &lt;span class="m"&gt;3&lt;/span&gt; --skip-text input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Примеры команд для обработки pdf</title><link>http://localhost:1313/ru/post/2024/04/28/examples-pdf-processing-commands/</link><pubDate>Sun, 28 Apr 2024 18:02:00 +0300</pubDate><guid>http://localhost:1313/ru/post/2024/04/28/examples-pdf-processing-commands/</guid><description>&lt;p&gt;Примеры команд для обработки pdf.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#создание-pdf-файла-из-изображений"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Создание PDF-файла из изображений&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#объединение-pdf-файлов"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Объединение PDF-файлов&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#извлечь-текст-из-pdf"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Извлечь текст из PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#зашифровать-pdf-файл"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Зашифровать PDF-файл&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#извлечение-изображений-из-pdf-файла"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Извлечение изображений из PDF-файла&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#извлечение-диапазона-страниц-из-pdf-разделение-многостраничного-pdf-документа"&gt;&lt;span class="section-num"&gt;6&lt;/span&gt; Извлечение диапазона страниц из PDF, разделение многостраничного PDF-документа&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#наложить-pdf--nup"&gt;&lt;span class="section-num"&gt;7&lt;/span&gt; Наложить PDF (nup)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#разделить-страницы"&gt;&lt;span class="section-num"&gt;8&lt;/span&gt; Разделить страницы&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#mutool"&gt;&lt;span class="section-num"&gt;8.1&lt;/span&gt; mutool&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#метаданные"&gt;&lt;span class="section-num"&gt;9&lt;/span&gt; Метаданные&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#проверка-метаданных"&gt;&lt;span class="section-num"&gt;9.1&lt;/span&gt; Проверка метаданных&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#записать-метаданные"&gt;&lt;span class="section-num"&gt;9.2&lt;/span&gt; Записать метаданные&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#exiftool"&gt;&lt;span class="section-num"&gt;9.2.1&lt;/span&gt; exiftool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#pdftk"&gt;&lt;span class="section-num"&gt;9.2.2&lt;/span&gt; pdftk&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#удалить-метаданные"&gt;&lt;span class="section-num"&gt;9.3&lt;/span&gt; Удалить метаданные&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#exiftool"&gt;&lt;span class="section-num"&gt;9.3.1&lt;/span&gt; exiftool&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#уменьшить-размер-pdf-файла--сжатие"&gt;&lt;span class="section-num"&gt;10&lt;/span&gt; Уменьшить размер pdf-файла (сжатие)&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#ghostscript"&gt;&lt;span class="section-num"&gt;10.1&lt;/span&gt; Ghostscript&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#уменьшить-размер-pdf-файла--оптимизация"&gt;&lt;span class="section-num"&gt;11&lt;/span&gt; Уменьшить размер pdf-файла (оптимизация)&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#qpdf"&gt;&lt;span class="section-num"&gt;11.1&lt;/span&gt; qpdf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#exiftool"&gt;&lt;span class="section-num"&gt;11.2&lt;/span&gt; exiftool&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#растеризовать-pdf-файл"&gt;&lt;span class="section-num"&gt;12&lt;/span&gt; Растеризовать PDF-файл&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#добавить-цифровую-подпись-в-pdf"&gt;&lt;span class="section-num"&gt;13&lt;/span&gt; Добавить цифровую подпись в PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#аннотации"&gt;&lt;span class="section-num"&gt;14&lt;/span&gt; Аннотации&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#удаление-аннотаций-из-pdf-файла"&gt;&lt;span class="section-num"&gt;14.1&lt;/span&gt; Удаление аннотаций из PDF-файла&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#pdftk"&gt;&lt;span class="section-num"&gt;14.1.1&lt;/span&gt; pdftk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#perl-cam-pdf"&gt;&lt;span class="section-num"&gt;14.1.2&lt;/span&gt; perl-cam-pdf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#добавьте-номера-страниц"&gt;&lt;span class="section-num"&gt;15&lt;/span&gt; Добавьте номера страниц&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#добавить-метки-страниц"&gt;&lt;span class="section-num"&gt;16&lt;/span&gt; Добавить метки страниц&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#закладки"&gt;&lt;span class="section-num"&gt;17&lt;/span&gt; Закладки&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#извлечь-закладки"&gt;&lt;span class="section-num"&gt;17.1&lt;/span&gt; Извлечь закладки&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#pdftk"&gt;&lt;span class="section-num"&gt;17.1.1&lt;/span&gt; pdftk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#qpdf"&gt;&lt;span class="section-num"&gt;17.1.2&lt;/span&gt; qpdf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#добавить-закладки"&gt;&lt;span class="section-num"&gt;17.2&lt;/span&gt; Добавить закладки&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#шрифты"&gt;&lt;span class="section-num"&gt;18&lt;/span&gt; Шрифты&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#список-шрифтов"&gt;&lt;span class="section-num"&gt;18.1&lt;/span&gt; Список шрифтов&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#poppler"&gt;&lt;span class="section-num"&gt;18.1.1&lt;/span&gt; poppler&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#внедрить-шрифты-в-файл"&gt;&lt;span class="section-num"&gt;18.2&lt;/span&gt; Внедрить шрифты в файл&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#ghostscript"&gt;&lt;span class="section-num"&gt;18.2.1&lt;/span&gt; ghostscript&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#восстановить-повреждённый-pdf-файл"&gt;&lt;span class="section-num"&gt;19&lt;/span&gt; Восстановить повреждённый PDF-файл&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#ghostscript"&gt;&lt;span class="section-num"&gt;19.1&lt;/span&gt; ghostscript&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#poppler"&gt;&lt;span class="section-num"&gt;19.2&lt;/span&gt; poppler&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#mupdf"&gt;&lt;span class="section-num"&gt;19.3&lt;/span&gt; mupdf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#стандарт-pdf-a"&gt;&lt;span class="section-num"&gt;20&lt;/span&gt; Стандарт PDF/A&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#преобразование-pdf-в-стандарт-pdf-a"&gt;&lt;span class="section-num"&gt;20.1&lt;/span&gt; Преобразование PDF в стандарт PDF/A&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#ghostscript"&gt;&lt;span class="section-num"&gt;20.1.1&lt;/span&gt; ghostscript&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#проверка-соответствия-pdf-a"&gt;&lt;span class="section-num"&gt;20.2&lt;/span&gt; Проверка соответствия PDF/A&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#verapdf"&gt;&lt;span class="section-num"&gt;20.2.1&lt;/span&gt; verapdf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#оглавление-в-pdf"&gt;&lt;span class="section-num"&gt;21&lt;/span&gt; Оглавление в PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#преобразование-djvu-в-pdf"&gt;&lt;span class="section-num"&gt;22&lt;/span&gt; Преобразование djvu в pdf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="создание-pdf-файла-из-изображений"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Создание PDF-файла из изображений&lt;/h2&gt;
&lt;p&gt;С помощью GraphicsMagick :&lt;/p&gt;
&lt;p&gt;$ GM Convert 1.jpg 2.jpg 3.jpg out.pdf
С помощью ImageMagick :&lt;/p&gt;
&lt;p&gt;$ Magick Convert 1.jpg 2.jpg 3.jpg out.pdf
Обратите внимание, что вывод ImageMagick имеет потери. Для создания PDF-файла без потерь из JPEG используйте img2pdf .&lt;/p&gt;
&lt;h2 id="объединение-pdf-файлов"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Объединение PDF-файлов&lt;/h2&gt;
&lt;p&gt;С помощью Ghostscript:&lt;/p&gt;
&lt;p&gt;$ gs -dNOPAUSE -sDEVICE=pdfwrite -sOUTPUTFILE=out.pdf -dBATCH 1.pdf 2.pdf 3.pdf
С PDFtk:&lt;/p&gt;
&lt;p&gt;$ pdftk 1.pdf 2.pdf 3.pdf вывод кота.pdf
С Попплером:&lt;/p&gt;
&lt;p&gt;$ pdfunite 1.pdf 2.pdf 3.pdf out.pdf
С QPDF:&lt;/p&gt;
&lt;p&gt;$ qpdf &amp;ndash;empty &amp;ndash;pages 1.pdf 2.pdf 3.pdf &amp;ndash; out.pdf&lt;/p&gt;
&lt;h2 id="извлечь-текст-из-pdf"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Извлечь текст из PDF&lt;/h2&gt;
&lt;p&gt;С помощью Poppler и сохранением макета:&lt;/p&gt;
&lt;p&gt;$ pdftotext -макет в.pdf out.txt
См. также pdftotext(1) .&lt;/p&gt;
&lt;p&gt;С калибром :&lt;/p&gt;
&lt;p&gt;$ ebook-convert in.pdf out.txt
Результаты различаются в зависимости от приложения и от PDF-файла.&lt;/p&gt;
&lt;p&gt;Расшифровать PDF-файл
В этом разделе перечислены команды для расшифровки PDF-файла в незашифрованный файл. Обратите внимание, что большинство программ просмотра PDF также поддерживают зашифрованные PDF-файлы.&lt;/p&gt;
&lt;p&gt;С PDFtk:&lt;/p&gt;
&lt;p&gt;$ pdftk in.pdf input_pw вывод пароля out.pdf
С помощью Poppler в PostScript:&lt;/p&gt;
&lt;p&gt;$ pdftops -upw пароль in.pdf out.ps
С QPDF:&lt;/p&gt;
&lt;p&gt;$ qpdf &amp;ndash;decrypt &amp;ndash;password= пароль in.pdf out.pdf
Совет: Забытые пароли можно восстановить с помощью pdfcrack , см. pdfcrack(1) .&lt;/p&gt;
&lt;h2 id="зашифровать-pdf-файл"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Зашифровать PDF-файл&lt;/h2&gt;
&lt;p&gt;Пароль пользователя используется для шифрования, пароль владельца — для ограничения операций после расшифровки документа. Дополнительную информацию см. в Википедии:PDF#Шифрование и подписи .&lt;/p&gt;
&lt;p&gt;С PDFtk:&lt;/p&gt;
&lt;p&gt;$ pdftk in.pdf вывод out.pdf user_pw пароль
С ПоДоФо :&lt;/p&gt;
&lt;p&gt;$ podofoencrypt -u пароль_пользователя -o пароль_владельца in.pdf out.pdf
С QPDF:&lt;/p&gt;
&lt;p&gt;$ qpdf &amp;ndash;encrypt user_password владелец_пароль длина_ключа &amp;ndash; in.pdf out.pdf
где key_lengthможет быть 40, 128 или 256.&lt;/p&gt;
&lt;h2 id="извлечение-изображений-из-pdf-файла"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Извлечение изображений из PDF-файла&lt;/h2&gt;
&lt;p&gt;С помощью poppler сохранение изображений в формате JPEG:&lt;/p&gt;
&lt;p&gt;$ pdfimages infile .pdf -j outfileroot&lt;/p&gt;
&lt;h2 id="извлечение-диапазона-страниц-из-pdf-разделение-многостраничного-pdf-документа"&gt;&lt;span class="section-num"&gt;6&lt;/span&gt; Извлечение диапазона страниц из PDF, разделение многостраничного PDF-документа&lt;/h2&gt;
&lt;p&gt;С Ghostscript в виде одного файла [6]&lt;/p&gt;
&lt;p&gt;$ gs -sDEVICE=pdfwrite -dNOPAUSE -dBATCH -dSAFER -dFirstPage= первый -dLastPage= последний -sOutputFile= выходной файл .pdf входящий файл .pdf
С PDFtk как одним файлом:&lt;/p&gt;
&lt;p&gt;$ pdftk infile .pdf cat первый — последний выходной файл .pdf
С Poppler в виде отдельных файлов:&lt;/p&gt;
&lt;p&gt;$ pdfseparate -f первый -l последний infile .pdf outfileroot -%d.pdf
Если QPDF представляет собой один файл:&lt;/p&gt;
&lt;p&gt;$ qpdf &amp;ndash;empty &amp;ndash;pages infile .pdf первый - последний &amp;ndash; исходящий файл .pdf
С mutool в виде одного файла:&lt;/p&gt;
&lt;p&gt;$ mutool clean -g infile .pdf исходящий файл .pdf первый - последний&lt;/p&gt;
&lt;h2 id="наложить-pdf--nup"&gt;&lt;span class="section-num"&gt;7&lt;/span&gt; Наложить PDF (nup)&lt;/h2&gt;
&lt;p&gt;Наложение PDF — это процесс, при котором несколько входных страниц объединяются в одну выходную страницу, расположенную в сетке строк x столбцов .&lt;/p&gt;
&lt;p&gt;Это можно сделать с помощью pdfjam (обратите внимание, что сценарии-оболочки, такие как pdfnup и pdfbook , устарели):&lt;/p&gt;
&lt;p&gt;$ pdfjam &amp;ndash;nup строк x столбцов input.pdf &amp;ndash;outfile output.pdf
или с pdfsak :&lt;/p&gt;
&lt;p&gt;$ pdfsak &amp;ndash;input-file input.pdf &amp;ndash;output output.pdf &amp;ndash;nup rows columns&lt;/p&gt;
&lt;h2 id="разделить-страницы"&gt;&lt;span class="section-num"&gt;8&lt;/span&gt; Разделить страницы&lt;/h2&gt;
&lt;h3 id="mutool"&gt;&lt;span class="section-num"&gt;8.1&lt;/span&gt; mutool&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Являются частью mupdf (
).&lt;/li&gt;
&lt;li&gt;Разделение по горизонтали:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mutool poster -x &lt;span class="m"&gt;2&lt;/span&gt; input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Разделение по вертикали:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mutool poster -y &lt;span class="m"&gt;2&lt;/span&gt; input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="метаданные"&gt;&lt;span class="section-num"&gt;9&lt;/span&gt; Метаданные&lt;/h2&gt;
&lt;h3 id="проверка-метаданных"&gt;&lt;span class="section-num"&gt;9.1&lt;/span&gt; Проверка метаданных&lt;/h3&gt;
&lt;p&gt;С помощью ExifTool :&lt;/p&gt;
&lt;p&gt;$ exiftool -Все файлы.pdf
С Попплером:&lt;/p&gt;
&lt;p&gt;$ pdfinfo файл.pdf
Удалить метаданные
Использование ExifTool
С помощью ExifTool :&lt;/p&gt;
&lt;p&gt;$ exiftool -All= -overwrite_original input.pdf
$ mv input.pdf /tmp/temp.pdf
$ qpdf &amp;ndash;линеаризовать /tmp/temp.pdf input.pdf
Шаг линеаризации необходим для предотвращения восстановления удаленных метаданных. См. этот вопрос SuperUser и соответствующую ветку форума ExifTool .&lt;/p&gt;
&lt;p&gt;Использование pdftk
Многие PDF-файлы хранят метаданные документа, используя как словарь Info (старая школа), так и поток XMP (новая школа). Эта команда pdftk полностью удаляет поток XMP из PDF-файла. Информационный словарь не удаляется.&lt;/p&gt;
&lt;p&gt;Обратите внимание, что объекты внутри PDF-файла могут иметь свои собственные отдельные потоки метаданных XMP, и эта команда не удаляет их. Он удаляет только поток XMP на уровне документа PDF.&lt;/p&gt;
&lt;p&gt;$ pdftk input.pdf drop_xmp вывод output.pdf&lt;/p&gt;
&lt;h3 id="записать-метаданные"&gt;&lt;span class="section-num"&gt;9.2&lt;/span&gt; Записать метаданные&lt;/h3&gt;
&lt;h4 id="exiftool"&gt;&lt;span class="section-num"&gt;9.2.1&lt;/span&gt; exiftool&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Обновить метаданные:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;exiftool -Title&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;This is the Title&amp;#34;&lt;/span&gt; -Author&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;Author&amp;#34;&lt;/span&gt; -Subject&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;Subject&amp;#34;&lt;/span&gt; file.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;При просмотре в evince тема оказывается в поле ключевых слов метаданных файла PDF.&lt;/li&gt;
&lt;li&gt;Adobe Acrobat и PDF-XChange показывают правильно.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfinfo&lt;/code&gt; показывает правильно.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="pdftk"&gt;&lt;span class="section-num"&gt;9.2.2&lt;/span&gt; pdftk&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Извлечь метаданные:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftk input.pdf dump_data output metadata.txt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Измените файл metadata.txt.&lt;/li&gt;
&lt;li&gt;Обновить pdf-файл:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftk input.pdf update_info metadata.txt output output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Проверьте новые метаданные pdf:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftk output.pdf dump_data
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="удалить-метаданные"&gt;&lt;span class="section-num"&gt;9.3&lt;/span&gt; Удалить метаданные&lt;/h3&gt;
&lt;h4 id="exiftool"&gt;&lt;span class="section-num"&gt;9.3.1&lt;/span&gt; exiftool&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Удалить все метаданные:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;exiftool -all&lt;span class="o"&gt;=&lt;/span&gt; input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="уменьшить-размер-pdf-файла--сжатие"&gt;&lt;span class="section-num"&gt;10&lt;/span&gt; Уменьшить размер pdf-файла (сжатие)&lt;/h2&gt;
&lt;h3 id="ghostscript"&gt;&lt;span class="section-num"&gt;10.1&lt;/span&gt; Ghostscript&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Скрипт ps2pdf:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ps2pdf -dPDFSETTINGS&lt;span class="o"&gt;=&lt;/span&gt;/screen in.pdf out.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Команда gs:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -dNOPAUSE -dBATCH -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dCompatibilityLevel&lt;span class="o"&gt;=&lt;/span&gt;1.4 -dPDFSETTINGS&lt;span class="o"&gt;=&lt;/span&gt;/printer -sOutputFile&lt;span class="o"&gt;=&lt;/span&gt;out.pdf in.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-sDEVICE=pdfwrite&lt;/code&gt; : указывает используемое устройство вывода (&lt;code&gt;pdfwrite&lt;/code&gt; указывает, что результат будет в формате PDF);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-dCompatibilityLevel&lt;/code&gt; : устанавливает уровень совместимости для оптимизированного PDF-файла (уровень совместимости &lt;code&gt;1.4&lt;/code&gt; соответствует версии PDF-1.4);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-dPDFSETTINGS&lt;/code&gt; : определяет параметры качества и сжатия оптимизированного PDF-файла (см.
):
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/screen&lt;/code&gt; : 72 dpi;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/default&lt;/code&gt; : 72 dpi;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/ebook&lt;/code&gt; : 150 dpi (для просмотра на устройствах для чтения электронных книг);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/printer&lt;/code&gt; : 300 dpi (для высококачественной печати);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/prepress&lt;/code&gt; : 300 dpi;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-dNOPAUSE&lt;/code&gt; : предотвращает паузу Ghostscript между страницами;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-dQUIET&lt;/code&gt; : подавляет информационные сообщения;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-dBATCH&lt;/code&gt; : предотвращает выход Ghostscript после обработки входного файла;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-sOutputFile=output.pdf&lt;/code&gt; : указывает имя выходного файла.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="уменьшить-размер-pdf-файла--оптимизация"&gt;&lt;span class="section-num"&gt;11&lt;/span&gt; Уменьшить размер pdf-файла (оптимизация)&lt;/h2&gt;
&lt;h3 id="qpdf"&gt;&lt;span class="section-num"&gt;11.1&lt;/span&gt; qpdf&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Команда qpdf:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;qpdf --compress-streams&lt;span class="o"&gt;=&lt;/span&gt;y --object-streams&lt;span class="o"&gt;=&lt;/span&gt;generate --recompress-flate --optimize-images --linearize document.pdf qpdf_compressed.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--compress-streams=y&lt;/code&gt; : указывает &lt;code&gt;qpdf&lt;/code&gt; сжимать потоки контента в файле PDF. Потоки контента содержат фактические данные, такие как текст и изображения, в документе PDF;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--object-streams=generate&lt;/code&gt; : определяет обработку объектных потоков в файле PDF. Опция генерации указывает qpdf генерировать новые потоки объектов во время процесса оптимизации;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;document.pdf&lt;/code&gt; : входной файл для оптимизации;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qpdf_compressed.pdf&lt;/code&gt; : выходной или оптимизированный файл.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="exiftool"&gt;&lt;span class="section-num"&gt;11.2&lt;/span&gt; exiftool&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Файлы PDF могут содержать метаданные, такие как имена авторов, даты создания и другую информацию, которая может влиять на размер файла.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Можно удалить эти метаданные, чтобы уменьшить размер PDF-файла:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;exiftool -all:all&lt;span class="o"&gt;=&lt;/span&gt; document.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-all:all=&lt;/code&gt; : указывает имя тега, который нужно изменить.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="растеризовать-pdf-файл"&gt;&lt;span class="section-num"&gt;12&lt;/span&gt; Растеризовать PDF-файл&lt;/h2&gt;
&lt;p&gt;Эти команды преобразуют ваш PDF-файл в изображения.&lt;/p&gt;
&lt;p&gt;С помощью GraphicsMagick для преобразования определенной страницы в файл изображения:&lt;/p&gt;
&lt;p&gt;$ gm Convert -density dpi входящий файл .pdf[ страница ] исходящий файл .jpg
С помощью ImageMagick для преобразования определенной страницы в файл изображения:&lt;/p&gt;
&lt;p&gt;$ Magick Convert -density dpi входящий файл .pdf[ страница ] исходящий файл .jpg&lt;/p&gt;
&lt;p&gt;С помощью ImageMagick конвертируйте все страницы в другой PDF-файл, состоящий из файла изображения на каждой странице:&lt;/p&gt;
&lt;p&gt;$ Magick Convert -density dpi входящий файл .pdf исходящий файл .pdf
Предупреждение. Это существенно увеличит размер вашего PDF-файла. Используйте его, например, если ваш принтер не может правильно распечатать PDF-файл.
С помощью Poppler для преобразования всех страниц в один файл изображения на странице:&lt;/p&gt;
&lt;p&gt;$ pdftoppm -jpeg -r dpi infile .pdf outfileroot
С помощью Poppler для преобразования определенной страницы в файл изображения:&lt;/p&gt;
&lt;p&gt;$ pdftoppm -jpeg -r dpi -f page -singlefile infile .pdf outfileroot
Разделить страницы PDF
С помощью инструментов mupdf для разделения каждой страницы по вертикали на две страницы:&lt;/p&gt;
&lt;p&gt;$ mutool плакат -y 2 in.pdf out.pdf
Может использоваться для отмены простого наложения .&lt;/p&gt;
&lt;p&gt;Добавить изображение
Можно добавить изображение в любое место PDF-файла.&lt;/p&gt;
&lt;p&gt;с ImageMagick (конвертировать), xv AUR и pdftk . ( скрипт-обертка )
с журналом AUR
с LibreOffice
Подробности об этих и других решениях можно найти на StackExchange .&lt;/p&gt;
&lt;h2 id="добавить-цифровую-подпись-в-pdf"&gt;&lt;span class="section-num"&gt;13&lt;/span&gt; Добавить цифровую подпись в PDF&lt;/h2&gt;
&lt;p&gt;jsignpdf AUR может подписывать PDF-файлы цифровой подписью с помощью сертификатов X.509 в графическом интерфейсе пользователя и интерфейсе командной строки.&lt;/p&gt;
&lt;p&gt;Такие программы чтения, как Okular и MuPDF, могут подписывать PDF-файлы цифровыми подписями. Для этого требуется сертификат PFX, который можно создать с помощью команды OpenSSL :&lt;/p&gt;
&lt;p&gt;$ openssl req -x509 -days 365 -newkey rsa:2048 -keyout cert.pem -out cert.pem
$ openssl pkcs12 -export -in cert.pem -out cert.pfx
Пользователи MuPDF могут затем подписывать PDF-файлы с cert.pfxпомощью графического интерфейса или инструмента mutool-sign .&lt;/p&gt;
&lt;p&gt;Пользователи Okular должны импортировать сертификаты cert.pfxв хранилище сертификатов, например, в профиль Firefox по умолчанию. [7] [ недействительная ссылка 13 января 2024 г. ⓘ] В Firefox это можно сделать через «Настройки» &amp;gt; «Конфиденциальность и безопасность» &amp;gt; «Просмотр сертификатов» &amp;gt; «Ваши сертификаты» &amp;gt; «Импортировать» и выбрать cert.pfx . После этого Okular предложит использовать этот сертификат при подписании PDF-файлов.&lt;/p&gt;
&lt;p&gt;Libreoffice также может подписывать PDF-файлы. [8]&lt;/p&gt;
&lt;h2 id="аннотации"&gt;&lt;span class="section-num"&gt;14&lt;/span&gt; Аннотации&lt;/h2&gt;
&lt;h3 id="удаление-аннотаций-из-pdf-файла"&gt;&lt;span class="section-num"&gt;14.1&lt;/span&gt; Удаление аннотаций из PDF-файла&lt;/h3&gt;
&lt;h4 id="pdftk"&gt;&lt;span class="section-num"&gt;14.1.1&lt;/span&gt; pdftk&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Удалить все аннотации:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftk in.pdf output - uncompress &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;/^\/Annots/d&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; pdftk - output out.pdf compress
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="perl-cam-pdf"&gt;&lt;span class="section-num"&gt;14.1.2&lt;/span&gt; perl-cam-pdf&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Удалить все аннотации:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;rewritepdf.pl -C in.pdf out.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="добавьте-номера-страниц"&gt;&lt;span class="section-num"&gt;15&lt;/span&gt; Добавьте номера страниц&lt;/h2&gt;
&lt;p&gt;С pdfsak :&lt;/p&gt;
&lt;p&gt;$ pdfsak --input-file input.pdf --output output.pdf --text "\large \\$page/\$pages&amp;quot; br 0.99 0.99 &amp;ndash;latex-engine xelatex &amp;ndash;font &amp;ldquo;Noto Regular&amp;rdquo;&lt;/p&gt;
&lt;h2 id="добавить-метки-страниц"&gt;&lt;span class="section-num"&gt;16&lt;/span&gt; Добавить метки страниц&lt;/h2&gt;
&lt;p&gt;Метки страниц — это логические номера страниц, отображаемые на панели навигации программы чтения PDF-файлов. Они полезны, например, если первые страницы PDF-файла представляют собой индексы, пронумерованные римскими цифрами (I, II и т. д.), а страница с номером «1» соответствует странице PDF-файла с номером больше 1, и вы хотите, чтобы номер страницы отображался на панели навигации соответствует номеру страницы, указанному на физической странице.&lt;/p&gt;
&lt;p&gt;Это не следует путать с добавлением номеров страниц на физическую страницу. См. раздел 12.4.2 справочника по PDF, чтобы лучше понять метки страниц.&lt;/p&gt;
&lt;p&gt;Используя pagelabels-py , предположим, что у нас есть PDF-файл с именем my_document.pdf, содержащий 12 страниц.
Страницы с 1 по 4 должны быть помечены Intro Iкак Intro IV.
Страницы с 5 по 9 должны быть помечены 2как 6.
Страницы с 10 по 12 должны быть помечены Appendix AкакAppendix C
Мы можем выдать следующий список команд:
$ python3 -m метки страниц --удалить "my_document.pdf"
$ python3 -m метки страниц &amp;ndash;startpage 1 &amp;ndash;prefix &amp;ldquo;Введение&amp;rdquo; &amp;ndash;type &amp;ldquo;римские заглавные буквы&amp;rdquo; &amp;ldquo;my_document.pdf&amp;rdquo;
$ python3 -m метки страниц --startpage 5 --firstpagenum 2 "my_document.pdf"
$ python3 -m метки страниц &amp;ndash;startpage 10 &amp;ndash;prefix &amp;ldquo;Приложение&amp;rdquo; &amp;ndash;type &amp;ldquo;буквы в верхнем регистре&amp;rdquo; &amp;ldquo;my_document.pdf&amp;rdquo;
Примечание. pagelabels-py преобразует ваш файл в формат PDF 1.3.
Используя pdftk , создайте metadata.txtфайл с метками:
PageLabelBegin
PageLabelNewIndex: 1
PageLabelStart: 1
PageLabelPrefix: Обложка
PageLabelNumStyle: Нонумбер
PageLabelBegin
PageLabelNewIndex: 2
PageLabelStart: 1
PageLabelPrefix: задняя обложка
PageLabelNumStyle: Нонумбер
PageLabelBegin
PageLabelNewIndex: 3
PageLabelStart: 1
PageLabelNumStyle: строчные римские цифры
PageLabelBegin
PageLabelNewIndex: 27
PageLabelStart: 1
PageLabelNumStyle: Десятичные арабские цифры
Где:
PageLabelBegin
сигнализирует о том, что последует новое определение метки страницы
PageLabelNewIndex
— индекс страницы PDF, к которому применяется стиль нумерации, считая с единицы. Стиль нумерации будет сохраняться до следующей метки страницы или, если меток страниц больше нет, до конца документа.
PageLabelStart
это стартовый номер. Например, если здесь указать 5, страницы будут пронумерованы 5, 6, 7,&amp;hellip;
Префикс PageLabelPrefix
текст, который будет помещен перед числом в метках страниц.
PageLabelNumStyle
может быть DecimalArabicNumerals, UppercaseRomanNumerals, LowercaseRomanNumerals, UppercaseLetters, LowercaseLettersили NoNumber.
Затем используйте:
pdftk book.pdf update_info_utf8 Metadata.txt выходная книга-с-метаданными.pdf
Подробнее см . в этом вопросе SuperUser .&lt;/p&gt;
&lt;h2 id="закладки"&gt;&lt;span class="section-num"&gt;17&lt;/span&gt; Закладки&lt;/h2&gt;
&lt;h3 id="извлечь-закладки"&gt;&lt;span class="section-num"&gt;17.1&lt;/span&gt; Извлечь закладки&lt;/h3&gt;
&lt;h4 id="pdftk"&gt;&lt;span class="section-num"&gt;17.1.1&lt;/span&gt; pdftk&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Найти все закладки:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftk file.pdf dump_data_utf8 &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s1"&gt;&amp;#39;^Bookmark&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="qpdf"&gt;&lt;span class="section-num"&gt;17.1.2&lt;/span&gt; qpdf&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Найти все закладки:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;qpdf --json --json-key&lt;span class="o"&gt;=&lt;/span&gt;outlines file.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="добавить-закладки"&gt;&lt;span class="section-num"&gt;17.2&lt;/span&gt; Добавить закладки&lt;/h3&gt;
&lt;p&gt;С pdftk
Создайте текстовый файл bookmark_definitions.txtс определениями закладок в следующем формате:&lt;/p&gt;
&lt;p&gt;ЗакладкаНачать
ЗакладкаНазвание: Глава 1
Уровень закладки: 1
ЗакладкаНомерСтраницы: 1
ЗакладкаНачать
ЗакладкаНазвание: Глава 1.1
Уровень закладки: 2
ЗакладкаНомерСтраницы: 2
ЗакладкаНачать
ЗакладкаНазвание: Глава 1.2
Уровень закладки: 2
ЗакладкаНомерСтраницы: 3
ЗакладкаНачать
ЗакладкаНазвание: Глава 1.3
Уровень закладки: 2
ЗакладкаНомерСтраницы: 4
ЗакладкаНачать
ЗакладкаНазвание: Глава 1.3.1
Уровень закладки: 3
ЗакладкаНомерСтраницы: 5
ЗакладкаНачать
ЗакладкаНазвание: Глава 2
Уровень закладки: 1
ЗакладкаНомерСтраницы: 6
Где&lt;/p&gt;
&lt;p&gt;ЗакладкаНачать
сигнализировать о новом определении закладки
ЗакладкаНазвание
название закладки
Уровень закладки
уровень закладки в иерархии
ЗакладкаНомерСтраницы
номер страницы, на которую перенаправляется закладка
В этом примере приведенный выше файл создаст следующую структуру закладок:&lt;/p&gt;
&lt;p&gt;Глава 1
Глава 1.1
Глава 1.2
Глава 1.3
Глава 1.3.1
Глава 2
Примените закладки с помощью следующей команды:&lt;/p&gt;
&lt;p&gt;$ pdftk input.pdf update_info_utf8 bookmark_definitions.txt вывод output.pdf
Извлечение страниц, содержащихся в закладке
Чтобы извлечь страницы, содержащиеся в закладке, вы можете использовать pdf_extbook-git AUR .&lt;/p&gt;
&lt;p&gt;При этом вам будет подсказано, какую закладку, чьи страницы вы хотите извлечь и куда ее сохранить. Чтобы извлечь все закладки данного иерархического уровня: pdf_extbook file&lt;/p&gt;
&lt;p&gt;$ файл pdf_extbook - уровень выходного_файла_stem
Удалить пустые страницы
Можно использовать следующий скрипт для удаления пустых страниц из PDF-файла (кредит: сообщение SuperUser ):&lt;/p&gt;
&lt;p&gt;#!/бин/ш&lt;/p&gt;
&lt;p&gt;ИН=&amp;quot;\(1&amp;quot;
filename=\)(базовое имя &amp;ldquo;\({IN}&amp;rdquo;)
filename=&amp;quot;\){filename%.*}&amp;quot;
PAGES=$(pdfinfo "$IN&amp;quot; | grep ^Pages: | tr -dc &amp;lsquo;0-9&amp;rsquo;)&lt;/p&gt;
&lt;p&gt;non_blank() {
для я в $(seq 1 \\(PAGES); делать
PERCENT=\\)(gs -o - -dFirstPage=\\({i} -dLastPage=\\){i} -sDEVICE=ink_cov "$IN&amp;quot; | grep CMYK | nawk &amp;lsquo;BEGIN { sum=0; } {sum += $1 + $2 + $3 + $4;} END { printf &amp;ldquo;%.5f\n&amp;rdquo;, sum } &amp;lsquo;)
if [ $(echo "$PERCENT &amp;gt; 0,001&amp;quot; | bc) -eq 1 ]; затем
эхо $i
#echo $i 1&amp;gt;&amp;amp;2
быть
эхо -н. 1&amp;gt;&amp;amp;2
сделано | тройник &amp;ldquo;$filename.tmp&amp;rdquo;
эхо 1&amp;gt;&amp;amp;2
}&lt;/p&gt;
&lt;p&gt;установить +х
pdftk &amp;ldquo;${IN}&amp;rdquo; cat \((non_blank) вывод &amp;ldquo;\){filename}_noblanks.pdf&amp;rdquo;
Используйте его как pdf_remove_blank_pages input.pdf.&lt;/p&gt;
&lt;p&gt;Для сценария необходимы pdftk , nawk и Ghostscript .&lt;/p&gt;
&lt;h2 id="шрифты"&gt;&lt;span class="section-num"&gt;18&lt;/span&gt; Шрифты&lt;/h2&gt;
&lt;h3 id="список-шрифтов"&gt;&lt;span class="section-num"&gt;18.1&lt;/span&gt; Список шрифтов&lt;/h3&gt;
&lt;h4 id="poppler"&gt;&lt;span class="section-num"&gt;18.1.1&lt;/span&gt; poppler&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Используем команду &lt;code&gt;pdffonts&lt;/code&gt; чтобы узнать, какие шрифты используются в PDF-файле и встроены ли они в него или нет:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdffonts file.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="внедрить-шрифты-в-файл"&gt;&lt;span class="section-num"&gt;18.2&lt;/span&gt; Внедрить шрифты в файл&lt;/h3&gt;
&lt;h4 id="ghostscript"&gt;&lt;span class="section-num"&gt;18.2.1&lt;/span&gt; ghostscript&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Перегенерим файл с помощью ghostscript:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -q -dNOPAUSE -dBATCH -dPDFSETTINGS&lt;span class="o"&gt;=&lt;/span&gt;/prepress -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dEmbedAllFonts&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt; -sOutputFile&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;outfile.pdf&amp;gt; &amp;lt;infile.pdf&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="восстановить-повреждённый-pdf-файл"&gt;&lt;span class="section-num"&gt;19&lt;/span&gt; Восстановить повреждённый PDF-файл&lt;/h2&gt;
&lt;h3 id="ghostscript"&gt;&lt;span class="section-num"&gt;19.1&lt;/span&gt; ghostscript&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Отремонтировать файл:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o repaired.pdf -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dPDFSETTINGS&lt;span class="o"&gt;=&lt;/span&gt;/prepress corrupted.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="poppler"&gt;&lt;span class="section-num"&gt;19.2&lt;/span&gt; poppler&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Отремонтировать файл:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftocairo -pdf corrupted.pdf repaired.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="mupdf"&gt;&lt;span class="section-num"&gt;19.3&lt;/span&gt; mupdf&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Отремонтировать файл:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mutool clean corrupted.pdf repaired.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="стандарт-pdf-a"&gt;&lt;span class="section-num"&gt;20&lt;/span&gt; Стандарт PDF/A&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="преобразование-pdf-в-стандарт-pdf-a"&gt;&lt;span class="section-num"&gt;20.1&lt;/span&gt; Преобразование PDF в стандарт PDF/A&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ghostscript"&gt;&lt;span class="section-num"&gt;20.1.1&lt;/span&gt; ghostscript&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Конвертация:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -dPDFA -dBATCH -dNOPAUSE -sColorConversionStrategy&lt;span class="o"&gt;=&lt;/span&gt;UseDeviceIndependentColor -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dPDFACompatibilityPolicy&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; -sOutputFile&lt;span class="o"&gt;=&lt;/span&gt;document_pdfa.pdf document.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="проверка-соответствия-pdf-a"&gt;&lt;span class="section-num"&gt;20.2&lt;/span&gt; Проверка соответствия PDF/A&lt;/h3&gt;
&lt;h4 id="verapdf"&gt;&lt;span class="section-num"&gt;20.2.1&lt;/span&gt; verapdf&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Проверить соответствие PDF различным вариантам стандарта PDF/A:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;verapdf --flavour 1a --format text document.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="оглавление-в-pdf"&gt;&lt;span class="section-num"&gt;21&lt;/span&gt; Оглавление в PDF&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="преобразование-djvu-в-pdf"&gt;&lt;span class="section-num"&gt;22&lt;/span&gt; Преобразование djvu в pdf&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Формат PDF</title><link>http://localhost:1313/ru/post/2022/06/30/pdf-format/</link><pubDate>Thu, 30 Jun 2022 18:47:00 +0300</pubDate><guid>http://localhost:1313/ru/post/2022/06/30/pdf-format/</guid><description>&lt;p&gt;Формат файлов &lt;em&gt;pdf&lt;/em&gt;.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#версии-формата-pdf"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Версии формата PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#стандарты-формата-pdf"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Стандарты формата PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#обработка-pdf"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Обработка PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#оглавление-в-pdf"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Оглавление в PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#просмотр-pdf"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Просмотр PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#использование-в-latex"&gt;&lt;span class="section-num"&gt;6&lt;/span&gt; Использование в LaTeX&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="версии-формата-pdf"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Версии формата PDF&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;PDF 1, PDF 1.1
&lt;ul&gt;
&lt;li&gt;1993-1994&lt;/li&gt;
&lt;li&gt;Работа с потоками данных, защита паролем и цветопередача, независимая от устройства.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PDF 1.2
&lt;ul&gt;
&lt;li&gt;1996&lt;/li&gt;
&lt;li&gt;Интерактивные элементы и возможность обрабатывать действия мыши.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PDF 1.3
&lt;ul&gt;
&lt;li&gt;1999&lt;/li&gt;
&lt;li&gt;Электронная подпись (ЭП), javaSAFEscript.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PDF 1.4
&lt;ul&gt;
&lt;li&gt;2001&lt;/li&gt;
&lt;li&gt;Прозрачность, текстовый слой поверх картинки, метаданные ключ-значение.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PDF 1.5
&lt;ul&gt;
&lt;li&gt;2003&lt;/li&gt;
&lt;li&gt;Мультимедиа, объектные и перекрестные потоки, слои.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PDF 1.6
&lt;ul&gt;
&lt;li&gt;2005&lt;/li&gt;
&lt;li&gt;XML-формы, AES-шифрование.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PDF 1.7, PDF 2.0
&lt;ul&gt;
&lt;li&gt;2005-2020&lt;/li&gt;
&lt;li&gt;AES-шифрование 256-битным ключом, архитектура XML-форм XFA 3.0.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="стандарты-формата-pdf"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Стандарты формата PDF&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="обработка-pdf"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Обработка PDF&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="оглавление-в-pdf"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Оглавление в PDF&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;Позволяет копировать оглавление в текстовый файл и обратно загружать в pdf-файл.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;Позволяет создавать оглавление на основе шаблона заголовков.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="просмотр-pdf"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Просмотр PDF&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="использование-в-latex"&gt;&lt;span class="section-num"&gt;6&lt;/span&gt; Использование в LaTeX&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>