<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Read | Д. С. Кулябов</title><link>https://yamadharma.github.io/ru/tag/read/</link><atom:link href="https://yamadharma.github.io/ru/tag/read/index.xml" rel="self" type="application/rss+xml"/><description>Read</description><generator>Hugo Blox Builder (https://hugoblox.com)</generator><language>ru-ru</language><copyright>© 2025 Dmitry S. Kulyabov</copyright><lastBuildDate>Mon, 30 Dec 2024 10:32:00 +0300</lastBuildDate><image><url>https://yamadharma.github.io/media/icon_hu_3756dbc1adf0ae14.png</url><title>Read</title><link>https://yamadharma.github.io/ru/tag/read/</link></image><item><title>Читалка. Foliate</title><link>https://yamadharma.github.io/ru/post/2024/12/30/reader-foliate/</link><pubDate>Mon, 30 Dec 2024 10:32:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/12/30/reader-foliate/</guid><description>&lt;p&gt;Читалка. Foliate.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#установка-по-умолчанию"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Установка по умолчанию&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#закладки-и-аннотации"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Закладки и аннотации&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Лицензия: GPL-3.0&lt;/li&gt;
&lt;li&gt;Форматы: EPUB, Mobipocket, Kindle, FB2, CBZ, PDF.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="установка-по-умолчанию"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Установка по умолчанию&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Можно установить &lt;em&gt;foliate&lt;/em&gt; как просмотрщик по умолчанию (см.
).&lt;/li&gt;
&lt;li&gt;Проверим, какие ассоциации актуальны:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cat /usr/share/applications/com.github.johnfactotum.Foliate.desktop &lt;span class="p"&gt;|&lt;/span&gt; grep -i MimeType &lt;span class="p"&gt;|&lt;/span&gt; cut -d &lt;span class="s2"&gt;&amp;#34;=&amp;#34;&lt;/span&gt; -f &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; tr &lt;span class="s1"&gt;&amp;#39;;&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;\n&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; xargs -l1 xdg-mime query default
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Установим для всех типов ассоциацию с &lt;em&gt;foliate&lt;/em&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cat /usr/share/applications/com.github.johnfactotum.Foliate.desktop &lt;span class="p"&gt;|&lt;/span&gt; grep -i MimeType &lt;span class="p"&gt;|&lt;/span&gt; cut -d &lt;span class="s2"&gt;&amp;#34;=&amp;#34;&lt;/span&gt; -f &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; tr &lt;span class="s1"&gt;&amp;#39;;&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;\n&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; xargs -l1 xdg-mime default com.github.johnfactotum.Foliate.desktop
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="закладки-и-аннотации"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Закладки и аннотации&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Запись местоположения базируется на стандартных идентификаторах канонических фрагментов EPUB (CFI) (
).&lt;/li&gt;
&lt;li&gt;Прогресс чтения, закладки и аннотации сохраняются в &lt;code&gt;~/.local/share/com.github.johnfactotum.Foliate&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Данные для каждой книги хранятся в файле JSON, названном по идентификатору книги.&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Отложенное чтение. Wallabag</title><link>https://yamadharma.github.io/ru/post/2024/12/05/read-it-later-wallabag/</link><pubDate>Thu, 05 Dec 2024 11:58:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/12/05/read-it-later-wallabag/</guid><description>&lt;p&gt;Отложенное чтение. Wallabag.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#особенности"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Особенности&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#утилиты"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Утилиты&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#cleanabag"&gt;&lt;span class="section-num"&gt;3.1&lt;/span&gt; cleanABag&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#установка"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Установка&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#контейнер"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Контейнер&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;5.1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#podman"&gt;&lt;span class="section-num"&gt;5.2&lt;/span&gt; Podman&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;5.2.1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#загрузка"&gt;&lt;span class="section-num"&gt;5.2.2&lt;/span&gt; Загрузка&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#nginx"&gt;&lt;span class="section-num"&gt;5.3&lt;/span&gt; Nginx&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#обновление"&gt;&lt;span class="section-num"&gt;5.4&lt;/span&gt; Обновление&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#система-на-базе-sqlite"&gt;&lt;span class="section-num"&gt;5.5&lt;/span&gt; Система на базе SQLite&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#запуск-вручную"&gt;&lt;span class="section-num"&gt;5.5.1&lt;/span&gt; Запуск вручную&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#docker-compose"&gt;&lt;span class="section-num"&gt;5.5.2&lt;/span&gt; docker-compose&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#скрипт-systemd"&gt;&lt;span class="section-num"&gt;5.5.3&lt;/span&gt; Скрипт systemd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#обновление-через-compose"&gt;&lt;span class="section-num"&gt;5.5.4&lt;/span&gt; Обновление через compose&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#система-на-базе-postgresql"&gt;&lt;span class="section-num"&gt;5.6&lt;/span&gt; Система на базе PostgreSQL&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#docker-compose"&gt;&lt;span class="section-num"&gt;5.6.1&lt;/span&gt; docker-compose&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#импорт-и-экспорт"&gt;&lt;span class="section-num"&gt;6&lt;/span&gt; Импорт и экспорт&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#импорт-omnivore"&gt;&lt;span class="section-num"&gt;6.1&lt;/span&gt; Импорт Omnivore&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#импорт-instapaper"&gt;&lt;span class="section-num"&gt;6.2&lt;/span&gt; Импорт Instapaper&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#импорт-pocket"&gt;&lt;span class="section-num"&gt;6.3&lt;/span&gt; Импорт Pocket&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#экспорт-всех-записей"&gt;&lt;span class="section-num"&gt;6.4&lt;/span&gt; Экспорт всех записей&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#экспорт"&gt;&lt;span class="section-num"&gt;6.4.1&lt;/span&gt; Экспорт&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#импорт"&gt;&lt;span class="section-num"&gt;6.4.2&lt;/span&gt; Импорт&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#экспорта-из-контейнера"&gt;&lt;span class="section-num"&gt;6.4.3&lt;/span&gt; Экспорта из контейнера&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Позволяет сохранять веб-страницы для последующего чтения.&lt;/li&gt;
&lt;li&gt;Лицензия: MIT license&lt;/li&gt;
&lt;li&gt;Сайт с платной подпиской:
.&lt;/li&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Приложение для Android:
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Магазин приложений:
&lt;ul&gt;
&lt;li&gt;Google:
&lt;/li&gt;
&lt;li&gt;FDroid:
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Приложение для iOS:
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Расширение браузера:
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;li&gt;Firefox:
&lt;/li&gt;
&lt;li&gt;Chrome:
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Приложения для Linux:
&lt;ul&gt;
&lt;li&gt;Read It Later:
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Ссылки по экосистеме:
&lt;/li&gt;
&lt;li&gt;Emacs:
&lt;ul&gt;
&lt;li&gt;wallabag.el:
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;wombag:
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="особенности"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Особенности&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Клиенты wallabag скачивают всю базу.&lt;/li&gt;
&lt;li&gt;При разрастании базы происходит деградация производительности.&lt;/li&gt;
&lt;li&gt;И в конце концов клиент просто перестаёт работать.&lt;/li&gt;
&lt;li&gt;Рекомендуется удалять прочитанные статьи с сервера.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="утилиты"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Утилиты&lt;/h2&gt;
&lt;h3 id="cleanabag"&gt;&lt;span class="section-num"&gt;3.1&lt;/span&gt; cleanABag&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;cli-инструмент для удаления статей старше указанной даты из wallabag.&lt;/li&gt;
&lt;li&gt;Оставляет помеченные и непрочтённые сообщения по умолчанию.&lt;/li&gt;
&lt;li&gt;Конфигурационный файл credentials.json:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-js" data-lang="js"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;WallabagURL&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;https://your.wallabag.tld&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;ClientId&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;client ID generate in your profile on wallabag&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;ClientSecret&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;client secrete generate in your profile on wallabag&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;UserName&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;your username&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;UserPassword&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;your password&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Пример запуска.
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Удалите архивные статьи старше 2021-12-31 (дата в формате YYYY-MM-DD), не затрагивая непрочтённые и отмеченные&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Протестировать&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cleanABag prune -c /path/to/credentials.json -d &lt;span class="s2"&gt;&amp;#34;2021-12-31&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Удалить&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cleanABag prune -c /path/to/credentials.json -d &lt;span class="s2"&gt;&amp;#34;2021-12-31&amp;#34;&lt;/span&gt; --delete
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Удалить статьи старше 3 месяцев:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cleanABag -v -c credentials.json prune -d &lt;span class="k"&gt;$(&lt;/span&gt;date -d &lt;span class="s2"&gt;&amp;#34;-3 month&amp;#34;&lt;/span&gt; +&lt;span class="s2"&gt;&amp;#34;%F&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; --delete
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="установка"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Установка&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Документация:
&lt;/li&gt;
&lt;li&gt;При первом логине используются следующие параметры:
&lt;ul&gt;
&lt;li&gt;login: wallabag&lt;/li&gt;
&lt;li&gt;password: wallabag&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="контейнер"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Контейнер&lt;/h2&gt;
&lt;h3 id="общая-информация"&gt;&lt;span class="section-num"&gt;5.1&lt;/span&gt; Общая информация&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Dockerhub:
&lt;/li&gt;
&lt;li&gt;Учётные данные по умолчанию: &lt;code&gt;wallabag:wallabag&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;При первом запуске необходимо будет сконфигурить приложение.&lt;/li&gt;
&lt;li&gt;Пусть доменное имя установки будет &lt;code&gt;wallabag.example.com&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="podman"&gt;&lt;span class="section-num"&gt;5.2&lt;/span&gt; Podman&lt;/h3&gt;
&lt;h4 id="общая-информация"&gt;&lt;span class="section-num"&gt;5.2.1&lt;/span&gt; Общая информация&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="загрузка"&gt;&lt;span class="section-num"&gt;5.2.2&lt;/span&gt; Загрузка&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Скачайте контейнер:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman pull wallabag/wallabag
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="nginx"&gt;&lt;span class="section-num"&gt;5.3&lt;/span&gt; Nginx&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Настройте &lt;em&gt;nginx&lt;/em&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;server {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; listen 443 ssl http2;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; listen [::]:443 ssl http2;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; server_name wallabag.example.com;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ssl_certificate /etc/letsencrypt/live/wallabag.example.com/fullchain.pem;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ssl_certificate_key /etc/letsencrypt/live/wallabag.example.com/privkey.pem;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; charset utf-8;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; gzip on;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; gzip_types text/css application/javascript text/javascript application/x-javascript image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; location / {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; proxy_pass http://localhost:40401;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; proxy_set_header X-Forwarded-Host $server_name;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; proxy_set_header X-Forwarded-Proto https;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; proxy_set_header X-Forwarded-For $remote_addr;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;server {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; listen 80;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; listen [::]:80;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; server_name wallabag.example.com;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; return 301 https://$server_name$request_uri;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="обновление"&gt;&lt;span class="section-num"&gt;5.4&lt;/span&gt; Обновление&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Обновление контейнера:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman pull wallabag/wallabag
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman stop wallabag
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman compose --file wallabag-sqlite.yaml up --detach
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="система-на-базе-sqlite"&gt;&lt;span class="section-num"&gt;5.5&lt;/span&gt; Система на базе SQLite&lt;/h3&gt;
&lt;h4 id="запуск-вручную"&gt;&lt;span class="section-num"&gt;5.5.1&lt;/span&gt; Запуск вручную&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Создайте каталоги для постоянных данных:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p /opt/wallabag/&lt;span class="o"&gt;{&lt;/span&gt;data,images&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;chown -R nobody:nobody /opt/wallabag
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Необходимо указать том для контейнера (для постоянного хранения):
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman run --name wallabag -v /opt/wallabag/data:/var/www/wallabag/data -v /opt/wallabag/images:/var/www/wallabag/web/assets/images -p 40401:80 -e &lt;span class="s2"&gt;&amp;#34;SYMFONY__ENV__DOMAIN_NAME=https://wallabag.example.com&amp;#34;&lt;/span&gt; wallabag/wallabag
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Сервер будет доступен по &lt;code&gt;http://localhost:40401&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="docker-compose"&gt;&lt;span class="section-num"&gt;5.5.2&lt;/span&gt; docker-compose&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Создадим файл для docker-compose &lt;code&gt;docker-compose.yml&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;3&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;proxy-network&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;external&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;wallabag&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;wallabag/wallabag:latest&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;wallabag&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;unless-stopped&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - TZ=Etc/UTC&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__MAILER_DSN=smtp://127.0.0.1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__MAILER_HOST=mail.example.com&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__FROM_EMAIL=&amp;#34;wallabag@example.com&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__SERVER_NAME=&amp;#34;wallabag.example.com&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__DOMAIN_NAME=https://wallabag.example.com&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - PHP_MEMORY_LIMIT=512M&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__MAILER_USER=&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__MAILER_PASSWORD=&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__FOSUSER_REGISTRATION=false&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__FOSUSER_CONFIRMATION=false&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__TWOFACTOR_AUTH=false&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - 40401:80&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - /opt/wallabag/images:/var/www/wallabag/web/assets/images&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - /opt/wallabag/data:/var/www/wallabag/data&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - proxy-network&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;healthcheck&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;test&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;CMD&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;wget&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;--no-verbose&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;--tries=1&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;--spider&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;http://localhost/api/info&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;interval&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;1m&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;timeout&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;3s&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Запуск будет выполняться следующим образом:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman compose --file wallabag-sqlite.yaml up --detach
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="скрипт-systemd"&gt;&lt;span class="section-num"&gt;5.5.3&lt;/span&gt; Скрипт systemd&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Создаём файл сервиса &lt;code&gt;/etc/containers/systemd/wallabag.container&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[Unit]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Description=A templated wallabag container
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[Container]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Image=wallabag
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ContainerName=wallabag
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;PublishPort=40401:80
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[Service]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;# Restart service when sleep finishes
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Restart=always
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[Install]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;WantedBy=default.target
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Запустим генератор и сообщим &lt;em&gt;systemd&lt;/em&gt; о запуске новой службы:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;systemctl daemon-reload
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Запустим службу:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;systemctl start wallabag.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="обновление-через-compose"&gt;&lt;span class="section-num"&gt;5.5.4&lt;/span&gt; Обновление через compose&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Обновить:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman compose pull
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Остановим и переименуем старый контейнер:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman stop wallabag
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman rename wallabag wallabag.&lt;span class="k"&gt;$(&lt;/span&gt;date -I&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Собираем контейнеры:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman-compose up -d
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Если всё нормально, удаляем старый контейнер:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman rm wallabag.&amp;lt;дата&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="система-на-базе-postgresql"&gt;&lt;span class="section-num"&gt;5.6&lt;/span&gt; Система на базе PostgreSQL&lt;/h3&gt;
&lt;h4 id="docker-compose"&gt;&lt;span class="section-num"&gt;5.6.1&lt;/span&gt; docker-compose&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Создадим файл docker-compose &lt;code&gt;wallabag-pgsql.yaml&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;3&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;wallabag&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;wallabag/wallabag:latest&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;wallabag-pgsql&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;unless-stopped&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - TZ=Etc/UTC&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__MAILER_DSN=smtp://127.0.0.1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__FROM_EMAIL=wallabag@example.com&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__DOMAIN_NAME=https://wallabag.example.com&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__SERVER_NAME=wallabag.example.com&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - PHP_MEMORY_LIMIT=1024M&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - PHP_MAX_EXECUTION_TIME=600&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - PHP_MAX_INPUT_TIME=600&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - POSTGRES_PASSWORD=&amp;lt;password1&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - POSTGRES_USER=postgres&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__DATABASE_DRIVER=pdo_pgsql&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__DATABASE_HOST=wallabag-db-pgsql&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__DATABASE_PORT=5432&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__DATABASE_NAME=wallabag&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__DATABASE_USER=wallabag&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - SYMFONY__ENV__DATABASE_PASSWORD=&amp;lt;password2&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - &amp;#34;40401:80&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;depends_on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - wallabag-db-pgsql&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;wallabag-db-pgsql&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;postgres:14&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;wallabag-db-pgsql&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;unless-stopped&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - POSTGRES_PASSWORD=&amp;lt;password1&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="l"&gt;​ - POSTGRES_USER=postgres&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Используем postgres-14, посколку в версии 15 были сделаны исправления безопасности (
).&lt;/li&gt;
&lt;li&gt;Но docker-образ для wallabag не поддерживает этого.&lt;/li&gt;
&lt;li&gt;Запуск будет выполняться следующим образом:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman compose --file wallabag-pgsql.yaml up --detach
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="импорт-и-экспорт"&gt;&lt;span class="section-num"&gt;6&lt;/span&gt; Импорт и экспорт&lt;/h2&gt;
&lt;h3 id="импорт-omnivore"&gt;&lt;span class="section-num"&gt;6.1&lt;/span&gt; Импорт Omnivore&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Экспортировал записи с Omnivore.&lt;/li&gt;
&lt;li&gt;Скачал архив с большим количеством файлов json (более 600).&lt;/li&gt;
&lt;li&gt;Загружать каждый файл через web-интерфейс не представлялось возможным.&lt;/li&gt;
&lt;li&gt;Скопировал архив на сервер.&lt;/li&gt;
&lt;li&gt;Поскольку каталог &lt;code&gt;/opt/wallabag/images&lt;/code&gt; уже подмонтирован к контейнеру в каталог &lt;code&gt;/var/www/wallabag/web/assets/images&lt;/code&gt;, сделал в нём каталог &lt;code&gt;omnivore&lt;/code&gt; и распаковал туда архив.&lt;/li&gt;
&lt;li&gt;Запустил скрипт:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /opt/wallabag/images/omnivore
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt; i in metadata*
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; podman &lt;span class="nb"&gt;exec&lt;/span&gt; -it &amp;lt;container-id&amp;gt; sh -c &lt;span class="s2"&gt;&amp;#34;cd /var/www/wallabag/web/assets/images/omnivore; /var/www/wallabag/bin/console --env=prod wallabag:import -v --importer=omnivore --markAsRead=true -- &amp;lt;username&amp;gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="импорт-instapaper"&gt;&lt;span class="section-num"&gt;6.2&lt;/span&gt; Импорт Instapaper&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Скопировал файл на сервер.&lt;/li&gt;
&lt;li&gt;Поскольку каталог &lt;code&gt;/opt/wallabag/images&lt;/code&gt; уже подмонтирован к контейнеру в каталог &lt;code&gt;/var/www/wallabag/web/assets/images&lt;/code&gt;, сделал в нём каталог &lt;code&gt;instapaper&lt;/code&gt; и поместил туда файл.&lt;/li&gt;
&lt;li&gt;Структура файла:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-csv" data-lang="csv"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt;URL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;Title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;Selection&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;Folder&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;Timestamp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;Tags&lt;/span&gt;&lt;span class="p"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Запустил скрипт:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /opt/wallabag/images/instapaper
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt; i in *.csv
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; podman &lt;span class="nb"&gt;exec&lt;/span&gt; -it &amp;lt;container-id&amp;gt; sh -c &lt;span class="s2"&gt;&amp;#34;cd /var/www/wallabag/web/assets/images/instapaper; /var/www/wallabag/bin/console --env=prod wallabag:import -v --importer=instapaper --markAsRead=true -- &amp;lt;username&amp;gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="импорт-pocket"&gt;&lt;span class="section-num"&gt;6.3&lt;/span&gt; Импорт Pocket&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;li&gt;Сохранить архив можно на странице:
.&lt;/li&gt;
&lt;li&gt;Скопировал архив на сервер.&lt;/li&gt;
&lt;li&gt;Поскольку каталог &lt;code&gt;/opt/wallabag/images&lt;/code&gt; уже подмонтирован к контейнеру в каталог &lt;code&gt;/var/www/wallabag/web/assets/images&lt;/code&gt;, сделал в нём каталог &lt;code&gt;pocket&lt;/code&gt; и поместил туда архив.&lt;/li&gt;
&lt;li&gt;Распаковал архив.&lt;/li&gt;
&lt;li&gt;Там файлы &lt;code&gt;.csv&lt;/code&gt;, структура файлов:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-csv" data-lang="csv"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt;title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;time_added&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;status&lt;/span&gt;&lt;span class="p"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Нет отметки, что файл в избранном.&lt;/li&gt;
&lt;li&gt;Импортер &lt;code&gt;--importer=pocket&lt;/code&gt; их не читает.&lt;/li&gt;
&lt;li&gt;Переделал из под формат &lt;em&gt;Instapaper&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Установил csvkit (см.
):
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pipx install csvkit
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Распаковал файл &lt;code&gt;pocket.zip&lt;/code&gt; в каталог &lt;code&gt;/opt/wallabag/images/pocket/in&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p /opt/wallabag/images/pocket/in
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cp pocket.zip /opt/wallabag/images/pocket/in
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /opt/wallabag/images/pocket/in
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;unzip pocket.zip
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Преобразовал формат:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /opt/wallabag/images/pocket/in
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt; i in *.csv&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;,&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; csvjoin &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; - &lt;span class="p"&gt;|&lt;/span&gt; csvcut -c 2,1,6,5,3,4 &amp;gt; ../&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ../
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Запустил скрипт:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /opt/wallabag/images/instapaper
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt; i in *.csv
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman &lt;span class="nb"&gt;exec&lt;/span&gt; -it &amp;lt;container-id&amp;gt; sh -c &lt;span class="s2"&gt;&amp;#34;cd /var/www/wallabag/web/assets/images/pocket; /var/www/wallabag/bin/console --env=prod wallabag:import -v --importer=instapaper --markAsRead=true -- &amp;lt;username&amp;gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="экспорт-всех-записей"&gt;&lt;span class="section-num"&gt;6.4&lt;/span&gt; Экспорт всех записей&lt;/h3&gt;
&lt;h4 id="экспорт"&gt;&lt;span class="section-num"&gt;6.4.1&lt;/span&gt; Экспорт&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Перейдите в директорию установки wallabag.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Выполните команду:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;bin/console wallabag:export --env&lt;span class="o"&gt;=&lt;/span&gt;prod &amp;lt;имя_пользователя&amp;gt; &lt;span class="o"&gt;[&lt;/span&gt;&amp;lt;путь_к_файлу&amp;gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;имя_пользователя&amp;gt;&lt;/code&gt; - имя пользователя, чьи записи нужно экспортировать;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;путь_к_файлу&amp;gt;&lt;/code&gt; - опциональный параметр, указывающий путь к файлу экспорта.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Пример использования:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;bin/console wallabag:export --env&lt;span class="o"&gt;=&lt;/span&gt;prod john.doe /var/www/wallabag/exports/export.json
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;После выполнения команды все записи указанного пользователя будут экспортированы в выбранный файл в формате JSON.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="импорт"&gt;&lt;span class="section-num"&gt;6.4.2&lt;/span&gt; Импорт&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Для импорта используем следующую команду:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;bin/console wallabag:import --env&lt;span class="o"&gt;=&lt;/span&gt;prod username export.json
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="экспорта-из-контейнера"&gt;&lt;span class="section-num"&gt;6.4.3&lt;/span&gt; Экспорта из контейнера&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Получите идентификатор контейнера:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman container list
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Поскольку каталог &lt;code&gt;/opt/wallabag/images&lt;/code&gt; уже подмонтирован к контейнеру в каталог &lt;code&gt;/var/www/wallabag/web/assets/images&lt;/code&gt;, будем экспортировать в его.&lt;/li&gt;
&lt;li&gt;Подключитесь к контейнеру и выполните экспорт:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;podman &lt;span class="nb"&gt;exec&lt;/span&gt; -it &amp;lt;container-id&amp;gt; sh -c &lt;span class="s2"&gt;&amp;#34;bin/console wallabag:export --env=prod john.doe /var/www/wallabag/web/assets/images/&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;date -I&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;.json&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Распознавание pdf</title><link>https://yamadharma.github.io/ru/post/2024/08/21/pdf-ocr/</link><pubDate>Wed, 21 Aug 2024 20:50:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/08/21/pdf-ocr/</guid><description>&lt;p&gt;Распознавание pdf.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#решения-по-распознаванию-pdf"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Решения по распознаванию pdf&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#ocrmypdf"&gt;&lt;span class="section-num"&gt;1.1&lt;/span&gt; OCRmyPDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#pdfsandwich"&gt;&lt;span class="section-num"&gt;1.2&lt;/span&gt; pdfsandwich&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#некоторые-типовые-задачи"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Некоторые типовые задачи&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#перенос-ocr-слоя-из-одно-файла-в-другой"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Перенос ocr-слоя из одно файла в другой&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#постановка-задачи"&gt;&lt;span class="section-num"&gt;2.1.1&lt;/span&gt; Постановка задачи&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#пример-задачи"&gt;&lt;span class="section-num"&gt;2.1.2&lt;/span&gt; Пример задачи&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#варианты-решения"&gt;&lt;span class="section-num"&gt;2.1.3&lt;/span&gt; Варианты решения&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#ресурсы"&gt;&lt;span class="section-num"&gt;2.1.4&lt;/span&gt; Ресурсы&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="решения-по-распознаванию-pdf"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Решения по распознаванию pdf&lt;/h2&gt;
&lt;h3 id="ocrmypdf"&gt;&lt;span class="section-num"&gt;1.1&lt;/span&gt; OCRmyPDF&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="pdfsandwich"&gt;&lt;span class="section-num"&gt;1.2&lt;/span&gt; pdfsandwich&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="некоторые-типовые-задачи"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Некоторые типовые задачи&lt;/h2&gt;
&lt;h3 id="перенос-ocr-слоя-из-одно-файла-в-другой"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Перенос ocr-слоя из одно файла в другой&lt;/h3&gt;
&lt;h4 id="постановка-задачи"&gt;&lt;span class="section-num"&gt;2.1.1&lt;/span&gt; Постановка задачи&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Есть 2 pdf-файла:
&lt;ul&gt;
&lt;li&gt;хороший, но без текстового слоя;&lt;/li&gt;
&lt;li&gt;плохой, но с правильным текстовым слоем.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Оба файла содержат одинаковые изображения.&lt;/li&gt;
&lt;li&gt;Цель состоит в том, чтобы встроить текстовый слой из второго файла в первый pdf-файл.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="пример-задачи"&gt;&lt;span class="section-num"&gt;2.1.2&lt;/span&gt; Пример задачи&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Первый файл подготовлен с помощью OCRmyPDF, имеет адекватный размер.&lt;/li&gt;
&lt;li&gt;Второй файл обработан FineReader, имеет хороший текстовый слой, но очень большой размер.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="варианты-решения"&gt;&lt;span class="section-num"&gt;2.1.3&lt;/span&gt; Варианты решения&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Удалить изображения из файла &lt;code&gt;input_ocr.pdf&lt;/code&gt; с помощью Ghostscript:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o &lt;span class="s2"&gt;&amp;#34;input_ocr_textonly.pdf&amp;#34;&lt;/span&gt; -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dFILTERIMAGE &lt;span class="s2"&gt;&amp;#34;input_ocr.pdf&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Объединить его с файлом &lt;code&gt;input_image.pdf&lt;/code&gt; с помощью &lt;code&gt;pdftk&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdftk &lt;span class="s2"&gt;&amp;#34;input_ocr_textonly.pdf&amp;#34;&lt;/span&gt; multistamp &lt;span class="s2"&gt;&amp;#34;input_image.pdf&amp;#34;&lt;/span&gt; output &lt;span class="s2"&gt;&amp;#34;output.pdf&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Или объединить его с файлом &lt;code&gt;input_image.pdf&lt;/code&gt; с помощью &lt;code&gt;qpdf&lt;/code&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;qpdf --empty --pages &lt;span class="s2"&gt;&amp;#34;input_image.pdf&amp;#34;&lt;/span&gt; -- --underlay &lt;span class="s2"&gt;&amp;#34;input_ocr_textonly.pdf&amp;#34;&lt;/span&gt; -- &lt;span class="s2"&gt;&amp;#34;output.pdf&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ресурсы"&gt;&lt;span class="section-num"&gt;2.1.4&lt;/span&gt; Ресурсы&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Распознавание pdf. OCRmyPDF</title><link>https://yamadharma.github.io/ru/post/2024/06/07/pdf-ocr-ocrmypdf/</link><pubDate>Fri, 07 Jun 2024 21:07:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/06/07/pdf-ocr-ocrmypdf/</guid><description>&lt;p&gt;Распознавание pdf. OCRmyPDF&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#примеры-использования"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Примеры использования&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="примеры-использования"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Примеры использования&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Список языков для распознавания:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tesseract --list-langs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Преобразовать сканированный файл в файл PDF/A с распознаванием русского и английского языков:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf -l rus+eng input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Заменить отсканированный PDF-файл PDF/A-файлом:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Пропустить страницы входного PDF-файла смешанного формата, которые уже содержат текст:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --skip-text input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Очистите, исправьте перекос и поверните плохо отсканированные страницы:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --clean --deskew --rotate-pages input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Убрать фон:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --clean --remove-background input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Разделить сдвоенные страницы:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf -l rus+eng --clean --clean-final --unpaper-args &lt;span class="s1"&gt;&amp;#39;--layout double&amp;#39;&lt;/span&gt; input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Контролируем оптимизацию:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --optimize &lt;span class="m"&gt;3&lt;/span&gt; --jbig2-lossy input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Распознавание с оптимизацией:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf -l rus+eng --optimize &lt;span class="m"&gt;3&lt;/span&gt; --jbig2-lossy input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Задать метаданные PDF-файла:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --skip-text --title &lt;span class="s2"&gt;&amp;#34;&amp;lt;title&amp;gt;&amp;#34;&lt;/span&gt; --author &lt;span class="s2"&gt;&amp;#34;&amp;lt;author&amp;gt;&amp;#34;&lt;/span&gt; --subject &lt;span class="s2"&gt;&amp;#34;&amp;lt;subject&amp;gt;&amp;#34;&lt;/span&gt; --keywords &lt;span class="s2"&gt;&amp;#34;&amp;lt;keyword; key phrase; ...&amp;gt;&amp;#34;&lt;/span&gt; input_file.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Не распознавать pdf-файл&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;При установке параметра &lt;code&gt;--tesseract-timeout 0&lt;/code&gt; OCRmyPDF будет обрабатывать изображения без выполнения OCR.&lt;/li&gt;
&lt;/ul&gt;
&lt;!--listend--&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --tesseract-timeout&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; --remove-background input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Удалить весь распознанный текст из pdf-файла:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --tesseract-timeout &lt;span class="m"&gt;0&lt;/span&gt; --optimize &lt;span class="m"&gt;3&lt;/span&gt; --force-ocr input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Оптимизация изображений без выполнения распознавания:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ocrmypdf --tesseract-timeout&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; --optimize &lt;span class="m"&gt;3&lt;/span&gt; --skip-text input.pdf output.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Чтение</title><link>https://yamadharma.github.io/ru/post/2023/12/05/read/</link><pubDate>Tue, 05 Dec 2023 10:13:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/12/05/read/</guid><description>&lt;p&gt;Организация чтения.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#подготовка-документов"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Подготовка документов&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#программы-для-чтения"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Программы для чтения&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#чтение-книг"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Чтение книг&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#foliate"&gt;&lt;span class="section-num"&gt;2.1.1&lt;/span&gt; Foliate&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#crqt-ng"&gt;&lt;span class="section-num"&gt;2.1.2&lt;/span&gt; crqt-ng&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#просмотр-pdf"&gt;&lt;span class="section-num"&gt;2.2&lt;/span&gt; Просмотр pdf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="подготовка-документов"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Подготовка документов&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="программы-для-чтения"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Программы для чтения&lt;/h2&gt;
&lt;h3 id="чтение-книг"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Чтение книг&lt;/h3&gt;
&lt;h4 id="foliate"&gt;&lt;span class="section-num"&gt;2.1.1&lt;/span&gt; Foliate&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="crqt-ng"&gt;&lt;span class="section-num"&gt;2.1.2&lt;/span&gt; crqt-ng&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Форк проекта CoolReader.&lt;/li&gt;
&lt;li&gt;Фактически это Qt-интерфейс для библиотеки crengine-ng.&lt;/li&gt;
&lt;li&gt;Поддерживаемые форматы электронных книг: fb2, fb3 (неполный), epub (без DRM), doc, docx, odt, rtf, pdb, mobi (без DRM), txt, html, markdown, chm, tcr.&lt;/li&gt;
&lt;li&gt;Поддержка FB2: стили, таблицы, сноски внизу страницы.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="просмотр-pdf"&gt;&lt;span class="section-num"&gt;2.2&lt;/span&gt; Просмотр pdf&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Подготовка документов для чтения</title><link>https://yamadharma.github.io/ru/post/2023/12/05/preparing-documents-reading/</link><pubDate>Tue, 05 Dec 2023 10:09:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/12/05/preparing-documents-reading/</guid><description>&lt;p&gt;Подготовка документов для чтения.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#преобразование-формата"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Преобразование формата&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#чистка-документа"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Чистка документа&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#удалить-текстовый-слой"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Удалить текстовый слой&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#unpaper"&gt;&lt;span class="section-num"&gt;2.2&lt;/span&gt; unpaper&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#scantailor"&gt;&lt;span class="section-num"&gt;2.3&lt;/span&gt; ScanTailor&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#распознавание-документа"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Распознавание документа&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#создание-оглавления"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Создание оглавления&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;4.1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#ссылки"&gt;&lt;span class="section-num"&gt;4.2&lt;/span&gt; Ссылки&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#handyoutliner-for-djvu-pdf"&gt;&lt;span class="section-num"&gt;4.3&lt;/span&gt; HandyOutliner for DjVu / PDF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#pdf-and-djvu-bookmarker"&gt;&lt;span class="section-num"&gt;4.4&lt;/span&gt; Pdf &amp;amp; Djvu Bookmarker&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#jpdfbookmarks"&gt;&lt;span class="section-num"&gt;4.5&lt;/span&gt; jpdfbookmarks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="преобразование-формата"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Преобразование формата&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="чистка-документа"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Чистка документа&lt;/h2&gt;
&lt;h3 id="удалить-текстовый-слой"&gt;&lt;span class="section-num"&gt;2.1&lt;/span&gt; Удалить текстовый слой&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ghostscript поддерживает параметры, которые позволяют удалить из PDF-файла либо весь текст, либо все изображения, либо все векторные элементы.&lt;/li&gt;
&lt;li&gt;Удалить весь текст из входного PDF-файла:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o no-more-texts.pdf -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dFILTERTEXT input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Удалить все растровые элементы из входного PDF-файла:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o no-more-texts.pdf -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dFILTERIMAGE input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Удалить все векторные элементы из входного PDF-файла:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o no-more-texts.pdf -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dFILTERVECTOR input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;Можно комбинировать любой из двух вышеуказанных параметров (объединение всех трёх приведет к созданию пустых страниц):
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o noIMG.pdf -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dFILTERIMAGE input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o noTXT.pdf -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dFILTERTEXT input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o noVCT.pdf -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dFILTERVECTOR input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o onlyIMG.pdf -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dFILTERVECTOR -dFILTERTEXT input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o onlyTXT.pdf -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dFILTERVECTOR -dFILTERIMAGE input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -o onlyVCT.pdf -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -dFILTERIMAGE -dFILTERTEXT input.pdf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="unpaper"&gt;&lt;span class="section-num"&gt;2.2&lt;/span&gt; unpaper&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;li&gt;Инструмент постобработки отсканированных изображений.&lt;/li&gt;
&lt;li&gt;Основная цель &amp;mdash; сделать отсканированные страницы книги более читабельными.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="scantailor"&gt;&lt;span class="section-num"&gt;2.3&lt;/span&gt; ScanTailor&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;ScanTailor Advanced объединяет функции версий ScanTailor Featured и ScanTailor Enhanced.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="распознавание-документа"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Распознавание документа&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="создание-оглавления"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Создание оглавления&lt;/h2&gt;
&lt;h3 id="общая-информация"&gt;&lt;span class="section-num"&gt;4.1&lt;/span&gt; Общая информация&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Оглавление упрощает ориентацию в книге.&lt;/li&gt;
&lt;li&gt;Оглавление позволяет:
&lt;ul&gt;
&lt;li&gt;всегда иметь под рукой список глав и заголовков книги;&lt;/li&gt;
&lt;li&gt;быстро переходить к началу нужной главы или другим важным местам в книге;&lt;/li&gt;
&lt;li&gt;структурировать заметки к книге.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ссылки"&gt;&lt;span class="section-num"&gt;4.2&lt;/span&gt; Ссылки&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="handyoutliner-for-djvu-pdf"&gt;&lt;span class="section-num"&gt;4.3&lt;/span&gt; HandyOutliner for DjVu / PDF&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;li&gt;Sourceforge:
&lt;/li&gt;
&lt;li&gt;Требует .NET 4.0.&lt;/li&gt;
&lt;li&gt;Под Linux работает под mono.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="pdf-and-djvu-bookmarker"&gt;&lt;span class="section-num"&gt;4.4&lt;/span&gt; Pdf &amp;amp; Djvu Bookmarker&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;li&gt;Создание оглавление производится с одновременным просмотром самого документа.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="jpdfbookmarks"&gt;&lt;span class="section-num"&gt;4.5&lt;/span&gt; jpdfbookmarks&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий:
&lt;/li&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Отложенное чтение. Pocket</title><link>https://yamadharma.github.io/ru/post/2023/09/06/deferred-reading-pocket/</link><pubDate>Wed, 06 Sep 2023 15:21:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/09/06/deferred-reading-pocket/</guid><description>&lt;p&gt;Отложенное чтение. Сервис Pocket.&lt;/p&gt;
&lt;details class="print:hidden xl:hidden" &gt;
&lt;summary&gt;Содержание&lt;/summary&gt;
&lt;div class="text-sm"&gt;
&lt;nav id="TableOfContents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#программное-обеспечение"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Программное обеспечение&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#сохранение-в-pocket-с-клавиатуры"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Сохранение в Pocket с клавиатуры&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#сочетания-клавиш-в-pocket-для-веба"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Сочетания клавиш в Pocket для Веба&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#прекращение-работы-pocket"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Прекращение работы Pocket&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;
&lt;/div&gt;
&lt;/details&gt;
&lt;h2 id="общая-информация"&gt;&lt;span class="section-num"&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Сайт:
&lt;/li&gt;
&lt;li&gt;Синхронизация на нескольких устройствах.&lt;/li&gt;
&lt;li&gt;Возможен офлайн-просмотр.&lt;/li&gt;
&lt;li&gt;Есть платная подписка Premium:
&lt;ul&gt;
&lt;li&gt;в ленте нет спонсированных материалов;&lt;/li&gt;
&lt;li&gt;сохраняются копии всех ссылок.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Принадлежит Mozilla.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="программное-обеспечение"&gt;&lt;span class="section-num"&gt;2&lt;/span&gt; Программное обеспечение&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="сохранение-в-pocket-с-клавиатуры"&gt;&lt;span class="section-num"&gt;3&lt;/span&gt; Сохранение в Pocket с клавиатуры&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Сохранение в Pocket с помощью сочетания клавиш в Firefox можно осуществить с помощью дополнения ShortcutKey2URL (см.
):
&lt;ul&gt;
&lt;li&gt;Установите дополнение ShortcutKey2URL.&lt;/li&gt;
&lt;li&gt;Скопируйте код javascript из Pocket bookmarklet (
).&lt;/li&gt;
&lt;li&gt;В настройках ShortcutKey2URL добавьте новую запись, вставив полученный код.&lt;/li&gt;
&lt;li&gt;Установите клавишу меню, например &lt;code&gt;S&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Чтобы вызвать меню надо нажать &lt;code&gt;Ctrl+.&lt;/code&gt; (или другую комбинацию, если вы перенастроили).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="сочетания-клавиш-в-pocket-для-веба"&gt;&lt;span class="section-num"&gt;4&lt;/span&gt; Сочетания клавиш в Pocket для Веба&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Нажмите клавишу &lt;code&gt;?&lt;/code&gt; или &lt;code&gt;/&lt;/code&gt;, чтобы просмотреть список сочетаний клавиш на веб-сайте Pocket.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="table-caption"&gt;
&lt;span class="table-number"&gt;&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span&gt;
Сочетания клавиш при просмотре списка
&lt;/div&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Перейти к Сохранениям&lt;/th&gt;
&lt;th&gt;g, затем l&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Перейти в Архив&lt;/td&gt;
&lt;td&gt;g, затем a&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Перейти к Избранному&lt;/td&gt;
&lt;td&gt;g, затем f&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Перейти к Статьям&lt;/td&gt;
&lt;td&gt;g, затем r&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Перейти к Выделениям&lt;/td&gt;
&lt;td&gt;g, затем h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Перейти к Видео&lt;/td&gt;
&lt;td&gt;g, затем v&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Перейти ко Всем меткам&lt;/td&gt;
&lt;td&gt;g, затем t&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Перейти к Поиску&lt;/td&gt;
&lt;td&gt;g, затем s&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Множественное редактирование&lt;/td&gt;
&lt;td&gt;g, затем b&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Сохранить URL&lt;/td&gt;
&lt;td&gt;g, затем u&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Сортировать по Новым&lt;/td&gt;
&lt;td&gt;s, затем n&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Сортировать по Старым&lt;/td&gt;
&lt;td&gt;s, затем o&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Вид Списком&lt;/td&gt;
&lt;td&gt;v, затем l&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Вид Сеткой&lt;/td&gt;
&lt;td&gt;v, затем g&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Подробный просмотр&lt;/td&gt;
&lt;td&gt;v, затем d&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Изменить на Светлую тему&lt;/td&gt;
&lt;td&gt;c, затем l&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Изменить на Тёмную тему&lt;/td&gt;
&lt;td&gt;c, затем d&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Перейти на тему Sephia&lt;/td&gt;
&lt;td&gt;c, затем s&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Открыть оверлей Справки&lt;/td&gt;
&lt;td&gt;? или /&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="table-caption"&gt;
&lt;span class="table-number"&gt;&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 2:&lt;/span&gt;
Действия с элементами
&lt;/div&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Открыть оригинал в Новой вкладке&lt;/th&gt;
&lt;th&gt;o&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Заархивировать выбранный элемент&lt;/td&gt;
&lt;td&gt;a&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Добавить выбранный элемент в Избранное&lt;/td&gt;
&lt;td&gt;f&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Назначить метку на выбранный элемент&lt;/td&gt;
&lt;td&gt;t&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Удалить выбранный элмент&lt;/td&gt;
&lt;td&gt;d&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Выбрать элемент во Множественном редактировании&lt;/td&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Выбрать следующий элемент&lt;/td&gt;
&lt;td&gt;j&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Выбрать предыдущий элемент&lt;/td&gt;
&lt;td&gt;k&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="table-caption"&gt;
&lt;span class="table-number"&gt;&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 3:&lt;/span&gt;
Действия с элементами при просмотре статей
&lt;/div&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Увеличить/уменьшить размер шрифта&lt;/th&gt;
&lt;th&gt;Cmd/Ctrl +/-&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Вернуться к Сохранениям&lt;/td&gt;
&lt;td&gt;b&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Удалить элемент&lt;/td&gt;
&lt;td&gt;d&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Отредактировать метки&lt;/td&gt;
&lt;td&gt;t&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Заархивировать элемент&lt;/td&gt;
&lt;td&gt;a&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Добавить элемент в Избранное&lt;/td&gt;
&lt;td&gt;f&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Просмотр оригинала&lt;/td&gt;
&lt;td&gt;o&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Увеличение/уменьшение ширины столбца (Premium)&lt;/td&gt;
&lt;td&gt;Alt/Option =/-&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="прекращение-работы-pocket"&gt;&lt;span class="section-num"&gt;5&lt;/span&gt; Прекращение работы Pocket&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;Пришло письмо, что Pocket прекращает свою работу.&lt;/li&gt;
&lt;li&gt;
&lt;/li&gt;
&lt;li&gt;22 мая 2025 г.
&lt;ul&gt;
&lt;li&gt;Pocket удален из магазинов приложений&lt;/li&gt;
&lt;li&gt;Ежемесячное продление подписки отключено&lt;/li&gt;
&lt;li&gt;Регистрация новых учетных записей Pocket отключена&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;8 июля 2025 г.
&lt;ul&gt;
&lt;li&gt;Pocket выключается&lt;/li&gt;
&lt;li&gt;Ежегодные возвраты средств подписчикам производятся пропорционально и автоматически.&lt;/li&gt;
&lt;li&gt;Режим «только экспорт» в Pocket Web&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;8 октября 2025 г.
&lt;ul&gt;
&lt;li&gt;Конечная дата экспорта данных&lt;/li&gt;
&lt;li&gt;Все аккаунты и данные удалены&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>