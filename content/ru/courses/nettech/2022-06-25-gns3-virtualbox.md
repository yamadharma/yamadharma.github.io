---
title: "GNS3 на Virtualbox"
author: ["Dmitry S. Kulyabov"]
date: 2022-06-25T16:57:00+03:00
lastmod: 2023-10-09T09:56:00+03:00
tags: ["network", "education"]
categories: ["computer-science"]
draft: false
weight: 201
toc: true
type: docs
feedback: false
slug: "gns3-virtualbox"
summary: "GNS3 на Virtualbox"
menu:
  "gns3-virtualbox":
    parent: "nettech-gns3-lab"
    weight: 201
    identifier: "gns3-virtualbox"
---

Использование образа GNS3 для Virtualbox.

<!--more-->


## <span class="section-num">1</span> Установка программ GNS3 {#установка-программ-gns3}


### <span class="section-num">1.1</span> Установка на Windows {#установка-на-windows}


#### <span class="section-num">1.1.1</span> Установка с помощью инсталлятора {#установка-с-помощью-инсталлятора}

-   Расположение инсталлятора: <https://github.com/GNS3/gns3-gui/releases>.
-   Наименование испольняемого файла: `GNS3-<версия>-all-in-one.exe`


#### <span class="section-num">1.1.2</span> Установка с помощью менеджера пакетов {#установка-с-помощью-менеджера-пакетов}

-   Используйте [Пакетный менеджер для Windows. Chocolatey]({{< relref "2021-01-18-package-manager-windows-chocolatey" >}}).
-   Установите VirtualBox:
    ```shell
    choco install virtualbox -y
    ```
-   Установите GNS3:
    ```shell
    choco install gns3 -y
    ```

    -   Отметьте для установки:
        -   GNS3 Desctop;
        -   GNS3 VM;
        -   Tools.
-   При установке будет скачан образ для виртуальной машины (в папку `Downloads`).
-   После установки не надо запускать GNS3, нужно вначале сконфигурить виртуальную машину.


#### <span class="section-num">1.1.3</span> Видео: Установка программ GNS3 на Windows (VirtualBox) {#видео-установка-программ-gns3-на-windows--virtualbox}

{{< tabs tabTotal="2" >}}
{{< rtab tabName="RuTube" >}}

{{< rutube b5c79641d5bb7dde0bcd1f54a8158b34 >}}

{{< /rtab >}}
{{< rtab tabName="Youtube" >}}

{{< youtube XCAlbMvczGc >}}

{{< /rtab >}}
{{< /tabs >}}


### <span class="section-num">1.2</span> Установка на Linux {#установка-на-linux}


#### <span class="section-num">1.2.1</span> Gentoo {#gentoo}

-   Установите клиент и сервер GNS3:
    ```shell
    emerge net-misc/gns3-gui
    ```


#### <span class="section-num">1.2.2</span> Fedora {#fedora}

-   Установка из репозитория:
    ```shell
    sudo dnf install gns3-server gns3-gui
    ```


## <span class="section-num">2</span> Установка виртуальной машины {#установка-виртуальной-машины}


### <span class="section-num">2.1</span> Установка образа виртуальной машины GNS3 для VirtualBox {#установка-образа-виртуальной-машины-gns3-для-virtualbox}

-   Следут учитывать, что версия образа для VirtualBox должна соответствовать версии клиента и сервера GNS3.
-   Загрузите образ GNS3 VM для Virtualbox со страницы выпуска:
    -   <https://gns3.com/software/download-vm>;
    -   <https://github.com/GNS3/gns3-gui/releases>.
-   Извлеките загруженный zip-файл в каталог. Загруженный zip-файл содержит образ диска VirtualBox.
-   Откройте приложение VirtualBox и выберите _Файл_, затем _Импорт конфигурации_.
-   Перейдите к папке, в которую вы распаковали загруженный образ диска, и выберите ее.
-   VirtualBox открывает интерфейс с перечислением предопределенных ресурсов. Можно настроить ресурсы.
-   Нажмите _Импорт_.


### <span class="section-num">2.2</span> Вложенная виртуализация {#вложенная-виртуализация}

-   Это функция позволяет использовать виртуализацию внутри виртуализированной среды. Например, запускать KVM на виртуальной машине, работающей на VirtualBox.
-   Эта функция необходима для сервера GNS3, поскольку он инициирует экземпляры внутри самой виртуальной машины.
-   Начиная с версии 6.1, Oracle VM VirtualBox поддерживает функцию вложенной виртуализации на хост-системах с процессорами AMD и Intel.
-   Для процессоров Intel вложенная виртуализация недоступна из графического интерфейса программы, но ее можно включить с помощью командной строки.


#### <span class="section-num">2.2.1</span> Включение вложенной виртуализации из графического интерфейса {#включение-вложенной-виртуализации-из-графического-интерфейса}

-   Выбираем виртуальную машину, которую мы импортировали, затем переходим на вкладку настроек.
-   Перейдём к опции _Система_, затем выберем _Процессор_.
-   Убедимся, что установлен флажок _Включить Nested VT-x/AMD-V_.


#### <span class="section-num">2.2.2</span> Включение вложенной виртуализации из командной строки {#включение-вложенной-виртуализации-из-командной-строки}

-   Можно включить вложенную виртуализацию из командной строки:
    ```shell
    vboxmanage modifyvm "GNS3 VM" --nested-hw-virt on
    ```
-   Здесь _GNS3 VM_ --- имя виртуальной машины VirtualBox.
-   Посмотреть список виртуальных машин можно командой:
    ```shell
    vboxmanage list vms
    ```


### <span class="section-num">2.3</span> Запуск экземпляра GNS3 на VirtualBox {#запуск-экземпляра-gns3-на-virtualbox}

-   Убедитесь, что установлен сетевой адаптер с опцией _Адаптер только для хоста_.
-   Включите экземпляр.
-   Посмотрите информацию о запущенной виртуальной машине.
-   Убедитесь, что можете получить доступ к IP-адресу виртуальной машины с хоста (выполните команду `ping`).
-   Также убедитесь, что значение _KVM support available_ установлено в _True_. В противном случае убедитесь, что вложенная виртуализация включена.


### <span class="section-num">2.4</span> Настройка отображения свойств VirtualBox {#настройка-отображения-свойств-virtualbox}

-   Gns3 получает параметры виртуальной, запрашивая свойства VirtualBox.
-   Начиная с версии Virtualbox-7 эти свойства отображаются в текущей локали пользователя.
-   Вы в этом можете убедиться, запустив:
    ```shell
    VBoxManage list systemproperties
    ```
-   Для корректной работы gns3 необходимо отображать эту информацию на английском.
-   Поэтому следует задать кодировку для отображения свойств VirtualBox:
    ```shell
    VBoxManage setproperty language C
    ```


### <span class="section-num">2.5</span> Настройка GNS3 GUI с виртуальной машиной GNS3 VM Virtualbox {#настройка-gns3-gui-с-виртуальной-машиной-gns3-vm-virtualbox}

-   Откройте приложение `gns3`.
-   При первой загрузке запустится мастер настройки.
    -   В противном случае перейдите на вкладку _Help_, затем выберите _Setup Wizard_.
-   Выберите параметр _Run appliances in a virtual machine_.
-   На следующей вкладке выберите IP-адрес привязки хоста, который находится в подсети Virtualbox.
    -   Для этого замените хостовую часть адреса на `1`.
    -   Например, если адрес виртуальной машины `192.168.56.110/24`, в качестве адреса привязки используйте `192.168.56.1`.
    -   Путь к серверу и порт оставьте без изменений.
-   После подключения выберите _VirtualBox_ в качестве плотформы виртуализации.
-   Выберите виртуальную машину из списка существующих виртуальных машин.
-   Укажите выделение ресурсов для виртуальной машины.
    -   Память: не меньше 2048M.
    -   Процессорные ядра: желательно не менее 2-х.


### <span class="section-num">2.6</span> Видео: Установка GNS3 VM VirtualBox {#видео-установка-gns3-vm-virtualbox}

{{< tabs tabTotal="2" >}}
{{< rtab tabName="RuTube" >}}

{{< rutube 4ef91d4d2b3a1a517f415198cd7f5224 >}}

{{< /rtab >}}
{{< rtab tabName="Youtube" >}}

{{< youtube kGlLSjFlrCQ >}}

{{< /rtab >}}
{{< /tabs >}}


## <span class="section-num">3</span> Обновление виртуальной машины {#обновление-виртуальной-машины}


### <span class="section-num">3.1</span> Обновление виртуальной машины GNS3 {#обновление-виртуальной-машины-gns3}

-   Версия виртуальной машины GNS3 должна совпадать с версией клиента GNS3.
-   Чтобы обновить виртуальную машину, в области информации о виртуальной машине нажмите _ОК_.
-   Выберите пункт меню _Upgrade_ и запустите его.


### <span class="section-num">3.2</span> Видео: Обновление виртуальной машины GNS3 {#видео-обновление-виртуальной-машины-gns3}

{{< tabs tabTotal="2" >}}
{{< rtab tabName="RuTube" >}}

{{< rutube 8826eff627695b311fa8adcf959b61e6 >}}

{{< /rtab >}}
{{< rtab tabName="Youtube" >}}

{{< youtube 4kGltAXl3lk >}}

{{< /rtab >}}
{{< /tabs >}}


## <span class="section-num">4</span> Дополнительные замечания {#дополнительные-замечания}


### <span class="section-num">4.1</span> Настройка эмулятора терминала {#настройка-эмулятора-терминала}

-   В качестве эмулятора терминала предлагается использовать _KDE Konsole_.
-   Настройка заключается в установке нового профиля с увеличенным шрифтом и светлым фоном.


#### <span class="section-num">4.1.1</span> Видео: Настройка терминала KDE Konsole {#видео-настройка-терминала-kde-konsole}

{{< tabs tabTotal="2" >}}
{{< rtab tabName="RuTube" >}}

{{< rutube eda5f307121be91d64475061eb2f1a9d >}}

{{< /rtab >}}
{{< rtab tabName="Youtube" >}}

{{< youtube nk25Pnm0soM >}}

{{< /rtab >}}
{{< /tabs >}}
