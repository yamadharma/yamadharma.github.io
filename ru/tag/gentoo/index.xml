<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Gentoo | Д. С. Кулябов</title><link>https://yamadharma.github.io/ru/tag/gentoo/</link><atom:link href="https://yamadharma.github.io/ru/tag/gentoo/index.xml" rel="self" type="application/rss+xml"/><description>Gentoo</description><generator>Hugo Blox Builder (https://hugoblox.com)</generator><language>ru-ru</language><copyright>© 2024 Dmitry S. Kulyabov</copyright><lastBuildDate>Sat, 02 Nov 2024 19:06:00 +0300</lastBuildDate><image><url>https://yamadharma.github.io/media/icon_hu15752663207405015554.png</url><title>Gentoo</title><link>https://yamadharma.github.io/ru/tag/gentoo/</link></image><item><title>Gentoo. Создание ebuild для Rust</title><link>https://yamadharma.github.io/ru/post/2024/11/02/gentoo-ebuild-rust/</link><pubDate>Sat, 02 Nov 2024 19:06:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/11/02/gentoo-ebuild-rust/</guid><description>&lt;p>Gentoo. Создание ebuild для программ на Rust.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#pycargoebuild">&lt;span class="section-num">1&lt;/span> pycargoebuild&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">1.2&lt;/span> Использование&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="pycargoebuild">&lt;span class="section-num">1&lt;/span> pycargoebuild&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">1.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/projg2/pycargoebuild/" target="_blank" rel="noopener">https://github.com/projg2/pycargoebuild/&lt;/a>&lt;/li>
&lt;li>Генератор ebuild с использованием инфраструктуры Cargo.&lt;/li>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge app-portage/pycargoebuild
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="использование">&lt;span class="section-num">1.2&lt;/span> Использование&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Создать новый ebuild:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>&lt;/span>&lt;span class="cl">pycargoebuild &amp;lt;package-directory&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;em>package-directory&lt;/em> : каталог, содержащий &lt;code>Cargo.toml&lt;/code>.&lt;/li>
&lt;li>Создаётся файл ebuild в текущем каталоге.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Обновить существующий ebuild:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-2-1">&lt;a class="lnlinks" href="#hl-2-1">1&lt;/a>&lt;/span>&lt;span class="cl">pycargoebuild -i &amp;lt;current-file&amp;gt;.ebuild &amp;lt;package-directory&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Gentoo. Постустановка</title><link>https://yamadharma.github.io/ru/post/2024/07/06/gentoo-post-installation/</link><pubDate>Sat, 06 Jul 2024 16:06:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/07/06/gentoo-post-installation/</guid><description>&lt;p>Постустановка Gentoo.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-репозиториев">&lt;span class="section-num">2&lt;/span> Настройка репозиториев&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#репозиторий-gentoo">&lt;span class="section-num">2.1&lt;/span> Репозиторий gentoo&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозитории-karma">&lt;span class="section-num">2.2&lt;/span> Репозитории karma&lt;/a>&lt;/li>
&lt;li>&lt;a href="#синхронизация-репозиториев">&lt;span class="section-num">2.3&lt;/span> Синхронизация репозиториев&lt;/a>&lt;/li>
&lt;li>&lt;a href="#дополнительные-оверлеи">&lt;span class="section-num">2.4&lt;/span> Дополнительные оверлеи&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#guru">&lt;span class="section-num">2.4.1&lt;/span> guru&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gentoo-zh">&lt;span class="section-num">2.4.2&lt;/span> gentoo-zh&lt;/a>&lt;/li>
&lt;li>&lt;a href="#science">&lt;span class="section-num">2.4.3&lt;/span> science&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-программного-обеспечения">&lt;span class="section-num">3&lt;/span> Установка программного обеспечения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-конфигурация">&lt;span class="section-num">3.1&lt;/span> Общая конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#работа-в-консоли">&lt;span class="section-num">3.2&lt;/span> Работа в консоли&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#файловый-менеджер-mc">&lt;span class="section-num">3.2.1&lt;/span> Файловый менеджер mc&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#графическое-окружение">&lt;span class="section-num">3.3&lt;/span> Графическое окружение&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#kde">&lt;span class="section-num">3.3.1&lt;/span> KDE&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gnome">&lt;span class="section-num">3.3.2&lt;/span> Gnome&lt;/a>&lt;/li>
&lt;li>&lt;a href="#sway">&lt;span class="section-num">3.3.3&lt;/span> Sway&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#средства-разработки">&lt;span class="section-num">3.4&lt;/span> Средства разработки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#git">&lt;span class="section-num">3.4.1&lt;/span> git&lt;/a>&lt;/li>
&lt;li>&lt;a href="#python">&lt;span class="section-num">3.4.2&lt;/span> python&lt;/a>&lt;/li>
&lt;li>&lt;a href="#node-dot-js">&lt;span class="section-num">3.4.3&lt;/span> Node.js&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#редакторы">&lt;span class="section-num">3.5&lt;/span> Редакторы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#zed">&lt;span class="section-num">3.5.1&lt;/span> Zed&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vscode">&lt;span class="section-num">3.5.2&lt;/span> VScode&lt;/a>&lt;/li>
&lt;li>&lt;a href="#emacs">&lt;span class="section-num">3.5.3&lt;/span> Emacs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#vim">&lt;span class="section-num">3.5.4&lt;/span> Vim&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#обслуживание-системы">&lt;span class="section-num">3.6&lt;/span> Обслуживание системы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#дедупликация-файлов">&lt;span class="section-num">3.6.1&lt;/span> Дедупликация файлов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#утилиты-пользователя">&lt;span class="section-num">3.7&lt;/span> Утилиты пользователя&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#менеджер-закладок-buku">&lt;span class="section-num">3.7.1&lt;/span> Менеджер закладок buku&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-ключами">&lt;span class="section-num">3.7.2&lt;/span> Управление ключами&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Описание моей настройки Gentoo.&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-репозиториев">&lt;span class="section-num">2&lt;/span> Настройка репозиториев&lt;/h2>
&lt;ul>
&lt;li>Настройка репозиториев исходит из того, что я использую свой репозиторий с конфигурациями (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/05/25/gentoo-karma-repository/">Gentoo. Репозиторий karma&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h3 id="репозиторий-gentoo">&lt;span class="section-num">2.1&lt;/span> Репозиторий gentoo&lt;/h3>
&lt;ul>
&lt;li>Установите основной репозиторий (если это ещё не сделано):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1">1&lt;/a>&lt;/span>&lt;span class="cl">emaint sync -r gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-2">&lt;a class="lnlinks" href="#hl-0-2">2&lt;/a>&lt;/span>&lt;span class="cl">chown -R portage:portage /var/db/repos/gentoo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="репозитории-karma">&lt;span class="section-num">2.2&lt;/span> Репозитории karma&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Установите репозитории с настройками (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/05/25/gentoo-karma-repository/">Gentoo. Репозиторий karma&lt;/a>)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Добавьте репозиторий &lt;code>karma&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository add karma git https://github.com/yamadharma/karma.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-2">&lt;a class="lnlinks" href="#hl-1-2">2&lt;/a>&lt;/span>&lt;span class="cl">emaint sync -r karma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-3">&lt;a class="lnlinks" href="#hl-1-3">3&lt;/a>&lt;/span>&lt;span class="cl">chown -R portage:portage /var/db/repos/karma
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Добавьте репозиторий &lt;code>karma-profiles&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-2-1">&lt;a class="lnlinks" href="#hl-2-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository add karma-profiles git https://github.com/yamadharma/karma-profiles.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-2">&lt;a class="lnlinks" href="#hl-2-2">2&lt;/a>&lt;/span>&lt;span class="cl">emaint sync -r karma-profiles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-3">&lt;a class="lnlinks" href="#hl-2-3">3&lt;/a>&lt;/span>&lt;span class="cl">chown -R portage:portage /var/db/repos/karma-profiles
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Сделайте ссылки на файлы конфигурации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-3-1">&lt;a class="lnlinks" href="#hl-3-1">1&lt;/a>&lt;/span>&lt;span class="cl">. /var/db/repos/karma-profiles/scripts/portage
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="синхронизация-репозиториев">&lt;span class="section-num">2.3&lt;/span> Синхронизация репозиториев&lt;/h3>
&lt;ul>
&lt;li>Синхронизуйте репозитории:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-4-1">&lt;a class="lnlinks" href="#hl-4-1">1&lt;/a>&lt;/span>&lt;span class="cl">emaint sync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="дополнительные-оверлеи">&lt;span class="section-num">2.4&lt;/span> Дополнительные оверлеи&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/">Gentoo. Дополнительные репозитории&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="guru">&lt;span class="section-num">2.4.1&lt;/span> guru&lt;/h4>
&lt;ul>
&lt;li>Добавление репозитория guru:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-5-1">&lt;a class="lnlinks" href="#hl-5-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> guru
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="gentoo-zh">&lt;span class="section-num">2.4.2&lt;/span> gentoo-zh&lt;/h4>
&lt;ul>
&lt;li>Добавление репозитория gentoo-zh:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-6-1">&lt;a class="lnlinks" href="#hl-6-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> gentoo-zh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="science">&lt;span class="section-num">2.4.3&lt;/span> science&lt;/h4>
&lt;ul>
&lt;li>Добавление репозитория science:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-7-1">&lt;a class="lnlinks" href="#hl-7-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> science
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="установка-программного-обеспечения">&lt;span class="section-num">3&lt;/span> Установка программного обеспечения&lt;/h2>
&lt;h3 id="общая-конфигурация">&lt;span class="section-num">3.1&lt;/span> Общая конфигурация&lt;/h3>
&lt;ul>
&lt;li>Зададим флаги emerge:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-8-1">&lt;a class="lnlinks" href="#hl-8-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">### Emerge&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Зададим флаги emerge:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-9-1">&lt;a class="lnlinks" href="#hl-9-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Verbose output&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-2">&lt;a class="lnlinks" href="#hl-9-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="o">=&lt;/span>-v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="работа-в-консоли">&lt;span class="section-num">3.2&lt;/span> Работа в консоли&lt;/h3>
&lt;ul>
&lt;li>Для установки всего необходимого для работы в консоли необходимо использовать файл &lt;code>term.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-10-1">&lt;a class="lnlinks" href="#hl-10-1">1&lt;/a>&lt;/span>&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-2">&lt;a class="lnlinks" href="#hl-10-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">### Terminal&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="файловый-менеджер-mc">&lt;span class="section-num">3.2.1&lt;/span> Файловый менеджер mc&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/08/26/midnight-commander-file-manager/">Файловый менеджер Midnight Commander&lt;/a>&lt;/li>
&lt;li>Установка файлового менеджера mc:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-11-1">&lt;a class="lnlinks" href="#hl-11-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Установка файлового менеджера mc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-2">&lt;a class="lnlinks" href="#hl-11-2">2&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> app-misc/mc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="графическое-окружение">&lt;span class="section-num">3.3&lt;/span> Графическое окружение&lt;/h3>
&lt;h4 id="kde">&lt;span class="section-num">3.3.1&lt;/span> KDE&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Для установки KDE необходимо использовать файл &lt;code>kde.sh&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-12-1">&lt;a class="lnlinks" href="#hl-12-1">1&lt;/a>&lt;/span>&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-2">&lt;a class="lnlinks" href="#hl-12-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">### KDE&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установим все программы KDE:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-13-1">&lt;a class="lnlinks" href="#hl-13-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Install all KDE programs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-2">&lt;a class="lnlinks" href="#hl-13-2">2&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> kde-apps/kde-apps-meta
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="gnome">&lt;span class="section-num">3.3.2&lt;/span> Gnome&lt;/h4>
&lt;ul>
&lt;li>Для установки Gnome необходимо использовать файл &lt;code>gnome.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-14-1">&lt;a class="lnlinks" href="#hl-14-1">1&lt;/a>&lt;/span>&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-14-2">&lt;a class="lnlinks" href="#hl-14-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">### Gnome&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="sway">&lt;span class="section-num">3.3.3&lt;/span> Sway&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/">Переход на Sway&lt;/a>&lt;/li>
&lt;li>Для установки Gnome необходимо использовать файл &lt;code>sway.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-15-1">&lt;a class="lnlinks" href="#hl-15-1">1&lt;/a>&lt;/span>&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-15-2">&lt;a class="lnlinks" href="#hl-15-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">### Sway&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Sway&lt;/p>
&lt;ul>
&lt;li>Установим собственно Sway:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-16-1">&lt;a class="lnlinks" href="#hl-16-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> gui-wm/sway
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Работа с буфером обмена&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Общие программы для работы с буфером обмена:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-17-1">&lt;a class="lnlinks" href="#hl-17-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Wayland clipboard&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-17-2">&lt;a class="lnlinks" href="#hl-17-2">2&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> gui-apps/wl-clipboard
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установим &lt;code>cliphist&lt;/code> (репозиторий &lt;code>guru&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-18-1">&lt;a class="lnlinks" href="#hl-18-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> app-misc/cliphist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="средства-разработки">&lt;span class="section-num">3.4&lt;/span> Средства разработки&lt;/h3>
&lt;ul>
&lt;li>Для установки всего необходимого для работы в консоли необходимо использовать файл &lt;code>dev.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-19-1">&lt;a class="lnlinks" href="#hl-19-1">1&lt;/a>&lt;/span>&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-19-2">&lt;a class="lnlinks" href="#hl-19-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">### Dev tools&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="git">&lt;span class="section-num">3.4.1&lt;/span> git&lt;/h4>
&lt;!--list-separator-->
&lt;ol>
&lt;li>github&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>gitea&lt;/p>
&lt;ul>
&lt;li>Утилиты для работы с Gitea.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-20-1">&lt;a class="lnlinks" href="#hl-20-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Gitea&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Утилита командной строки для работы с сервером Gitea (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/11/11/interacting-gitea-command-line/">Взаимодействие с gitea из командной строки&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-21-1">&lt;a class="lnlinks" href="#hl-21-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> dev-util/tea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="python">&lt;span class="section-num">3.4.2&lt;/span> python&lt;/h4>
&lt;ul>
&lt;li>Утилиты для работы с python.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-22-1">&lt;a class="lnlinks" href="#hl-22-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Python&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>pipx&lt;/p>
&lt;ul>
&lt;li>Установка пакетов python:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-23-1">&lt;a class="lnlinks" href="#hl-23-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> dev-python/pipx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="node-dot-js">&lt;span class="section-num">3.4.3&lt;/span> Node.js&lt;/h4>
&lt;ul>
&lt;li>Утилиты для работы с Node.js.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-24-1">&lt;a class="lnlinks" href="#hl-24-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Node.js&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>pnpm&lt;/p>
&lt;ul>
&lt;li>Управление пакетами Node.js (оверлей &lt;code>karma&lt;/code>, см. &lt;a href="https://yamadharma.github.io/ru/post/2024/05/25/gentoo-karma-repository/">Gentoo. Репозиторий karma&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-25-1">&lt;a class="lnlinks" href="#hl-25-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> sys-apps/pnpm-bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>yarn&lt;/p>
&lt;ul>
&lt;li>Управление пакетами Node.js:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-26-1">&lt;a class="lnlinks" href="#hl-26-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> sys-apps/yarn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="редакторы">&lt;span class="section-num">3.5&lt;/span> Редакторы&lt;/h3>
&lt;ul>
&lt;li>Для установки редакторов необходимо использовать файл &lt;code>edit.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-27-1">&lt;a class="lnlinks" href="#hl-27-1">1&lt;/a>&lt;/span>&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-27-2">&lt;a class="lnlinks" href="#hl-27-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">### Edit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="zed">&lt;span class="section-num">3.5.1&lt;/span> Zed&lt;/h4>
&lt;ul>
&lt;li>Установка редактора &lt;em>Zed&lt;/em> (оверлей &lt;code>gentoo-zh&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-28-1">&lt;a class="lnlinks" href="#hl-28-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Установка редактора Zed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-2">&lt;a class="lnlinks" href="#hl-28-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># emerge ${EMERGE_FLAGS} app-editors/zed&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="vscode">&lt;span class="section-num">3.5.2&lt;/span> VScode&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Установка редактора &lt;em>VSCode&lt;/em>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-29-1">&lt;a class="lnlinks" href="#hl-29-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Установка редактора VSCode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-29-2">&lt;a class="lnlinks" href="#hl-29-2">2&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> app-editors/vscode
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установка редактора набора LSP-серверов для &lt;em>VSCode&lt;/em> (оверлей &lt;code>guru&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-30-1">&lt;a class="lnlinks" href="#hl-30-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> dev-util/vscode-langservers-extracted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="emacs">&lt;span class="section-num">3.5.3&lt;/span> Emacs&lt;/h4>
&lt;h4 id="vim">&lt;span class="section-num">3.5.4&lt;/span> Vim&lt;/h4>
&lt;h3 id="обслуживание-системы">&lt;span class="section-num">3.6&lt;/span> Обслуживание системы&lt;/h3>
&lt;ul>
&lt;li>Для установки системных утилит необходимо использовать файл &lt;code>sys.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-31-1">&lt;a class="lnlinks" href="#hl-31-1">1&lt;/a>&lt;/span>&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-31-2">&lt;a class="lnlinks" href="#hl-31-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">### System tools&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="дедупликация-файлов">&lt;span class="section-num">3.6.1&lt;/span> Дедупликация файлов&lt;/h4>
&lt;ul>
&lt;li>Установим &lt;em>jdupes&lt;/em> (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/02/23/file-deduplication-jdupes/">Дедупликация файлов. jdupes&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-32-1">&lt;a class="lnlinks" href="#hl-32-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> jdupes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="утилиты-пользователя">&lt;span class="section-num">3.7&lt;/span> Утилиты пользователя&lt;/h3>
&lt;ul>
&lt;li>Для установки пользовательских утилит необходимо использовать файл &lt;code>user.sh&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-33-1">&lt;a class="lnlinks" href="#hl-33-1">1&lt;/a>&lt;/span>&lt;span class="cl">. ./config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-33-2">&lt;a class="lnlinks" href="#hl-33-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">### User utils&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="менеджер-закладок-buku">&lt;span class="section-num">3.7.1&lt;/span> Менеджер закладок buku&lt;/h4>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/22/buku-bookmark-manager/">Менеджер закладок buku&lt;/a>&lt;/li>
&lt;li>Установим менеджер закладок:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-34-1">&lt;a class="lnlinks" href="#hl-34-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Buku&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-34-2">&lt;a class="lnlinks" href="#hl-34-2">2&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> www-misc/buku
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим интерфейс к броузеру:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-35-1">&lt;a class="lnlinks" href="#hl-35-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge &lt;span class="si">${&lt;/span>&lt;span class="nv">EMERGE_FLAGS&lt;/span>&lt;span class="si">}&lt;/span> www-misc/bukubrow-bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="управление-ключами">&lt;span class="section-num">3.7.2&lt;/span> Управление ключами&lt;/h4>
&lt;ul>
&lt;li>Установим демон управления ключами:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-36-1">&lt;a class="lnlinks" href="#hl-36-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Keys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-36-2">&lt;a class="lnlinks" href="#hl-36-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># emerge ${EMERGE_FLAGS} net-misc/keychain&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Gentoo. Компиляция системы clang</title><link>https://yamadharma.github.io/ru/post/2024/05/16/gentoo-compiling-clang/</link><pubDate>Thu, 16 May 2024 15:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2024/05/16/gentoo-compiling-clang/</guid><description>&lt;p>Переход на Clang для компиляции системы.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#обновление-системы">&lt;span class="section-num">3&lt;/span> Обновление системы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#основная-системная-конфигурация">&lt;span class="section-num">4.1&lt;/span> Основная системная конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-для-каждого-пакета">&lt;span class="section-num">4.2&lt;/span> Конфигурация для каждого пакета&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-специальных-окружений">&lt;span class="section-num">4.3&lt;/span> Конфигурация специальных окружений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gcc">&lt;span class="section-num">4.3.1&lt;/span> gcc&lt;/a>&lt;/li>
&lt;li>&lt;a href="#clang-без-lto">&lt;span class="section-num">4.3.2&lt;/span> clang без LTO&lt;/a>&lt;/li>
&lt;li>&lt;a href="#clang-plus-mold">&lt;span class="section-num">4.3.3&lt;/span> clang + mold&lt;/a>&lt;/li>
&lt;li>&lt;a href="#clang-18-plus-mold">&lt;span class="section-num">4.3.4&lt;/span> clang-18 + mold&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#компиляция-ядра">&lt;span class="section-num">5&lt;/span> Компиляция ядра&lt;/a>&lt;/li>
&lt;li>&lt;a href="#c-plus-plus-abi">&lt;span class="section-num">6&lt;/span> C++ ABI&lt;/a>&lt;/li>
&lt;li>&lt;a href="#ресурсы">&lt;span class="section-num">7&lt;/span> Ресурсы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Обязательно должен быть запасной вариант с &lt;em>GCC&lt;/em>.&lt;/li>
&lt;li>На данный момент система не сможет скомпилировать все, что использует &lt;em>Clang&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Установите &lt;code>llvm-libunwind&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge --deselect libunwind
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-2">&lt;a class="lnlinks" href="#hl-0-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nv">FEATURES&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-protect-owned&amp;#34;&lt;/span> emerge -vO llvm-libunwind
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите &lt;em>Clang&lt;/em>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge sys-devel/clang-runtime sys-devel/clang sys-libs/compiler-rt sys-libs/compiler-rt-sanitizers sys-devel/lld-toolchain-symlinks sys-devel/lld
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установите библиотеку для C++:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-2-1">&lt;a class="lnlinks" href="#hl-2-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge sys-libs/libcxxabi sys-libs/libcxx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Вместо &lt;code>lld&lt;/code> можно использовать линкер &lt;code>mold&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-3-1">&lt;a class="lnlinks" href="#hl-3-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge mold
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="обновление-системы">&lt;span class="section-num">3&lt;/span> Обновление системы&lt;/h2>
&lt;ul>
&lt;li>Перекомпилим пакеты с библиотекой &lt;code>libunwind&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-4-1">&lt;a class="lnlinks" href="#hl-4-1">1&lt;/a>&lt;/span>&lt;span class="cl">revdep-rebuild --library libunwind -- --keep-going
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Удалите библиотеку &lt;code>libunwind&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-5-1">&lt;a class="lnlinks" href="#hl-5-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge -cv libunwind
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Необходимо перекомпилить программы, слинкованные со стандартной библиотекой &lt;code>libstdc++&lt;/code>.&lt;/li>
&lt;li>Проверьте, какие программы надо перекомпилить:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-6-1">&lt;a class="lnlinks" href="#hl-6-1">1&lt;/a>&lt;/span>&lt;span class="cl">revdep-rebuild --library libstdc++ -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Перекомпилим эти пакеты:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-7-1">&lt;a class="lnlinks" href="#hl-7-1">1&lt;/a>&lt;/span>&lt;span class="cl">revdep-rebuild --library libstdc++ -- --keep-going
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">4&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="основная-системная-конфигурация">&lt;span class="section-num">4.1&lt;/span> Основная системная конфигурация&lt;/h3>
&lt;ul>
&lt;li>Файл &lt;code>/etc/portage/make.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="ln" id="hl-8-1">&lt;a class="lnlinks" href="#hl-8-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># this sources the PORTDIR_OVERLAY variable defined by layman. however, the variable expanded by layman was empty&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-2">&lt;a class="lnlinks" href="#hl-8-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># source /var/db/repos/gentoo/local/layman/make.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-3">&lt;a class="lnlinks" href="#hl-8-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-4">&lt;a class="lnlinks" href="#hl-8-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## This is added to make options by linux-mod.eclass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-5">&lt;a class="lnlinks" href="#hl-8-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">BUILD_FIXES&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;LLVM=1 LLVM_IAS=1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-6">&lt;a class="lnlinks" href="#hl-8-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-7">&lt;a class="lnlinks" href="#hl-8-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">CFLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${CFLAGS} -flto=thin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-8">&lt;a class="lnlinks" href="#hl-8-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#CFLAGS=&amp;#34;${CFLAGS} -mllvm -extra-vectorizer-passes -mllvm -enable-cond-stores-vec -mllvm -slp-vectorize-hor-store -mllvm -enable-loopinterchange -mllvm -enable-loop-distribute -mllvm -enable-unroll-and-jam -mllvm -enable-loop-flatten -mllvm -interleave-small-loop-scalar-reduction -mllvm -unroll-runtime-multi-exit -mllvm -aggressive-ext-opt -fno-math-errno -fno-trapping-math -falign-functions=32 -funroll-loops -fno-semantic-interposition -fcf-protection=none -mharden-sls=none -fomit-frame-pointer -mprefer-vector-width=256 -flto&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-9">&lt;a class="lnlinks" href="#hl-8-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">CXXFLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${CFLAGS} ${CXXFLAGS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-10">&lt;a class="lnlinks" href="#hl-8-10">10&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-11">&lt;a class="lnlinks" href="#hl-8-11">11&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">CC&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;clang&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-12">&lt;a class="lnlinks" href="#hl-8-12">12&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">CPP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;clang-cpp&amp;#34;&lt;/span> &lt;span class="c1"># necessary for xorg-server and possibly other packages&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-13">&lt;a class="lnlinks" href="#hl-8-13">13&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">CXX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;clang++&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-14">&lt;a class="lnlinks" href="#hl-8-14">14&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">AR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;llvm-ar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-15">&lt;a class="lnlinks" href="#hl-8-15">15&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">NM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;llvm-nm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-16">&lt;a class="lnlinks" href="#hl-8-16">16&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">RANLIB&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;llvm-ranlib&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-17">&lt;a class="lnlinks" href="#hl-8-17">17&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-18">&lt;a class="lnlinks" href="#hl-8-18">18&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># No need to set this, clang-common can handle this based on chosen USE flags&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-19">&lt;a class="lnlinks" href="#hl-8-19">19&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#LDFLAGS=&amp;#34;${LDFLAGS} -fuse-ld=lld&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-20">&lt;a class="lnlinks" href="#hl-8-20">20&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#LDFLAGS=&amp;#34;${LDFLAGS} -Wl,-O2 -Wl,--as-needed -Wl,--undefined-version&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-21">&lt;a class="lnlinks" href="#hl-8-21">21&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#LDFLAGS=&amp;#34;${LDFLAGS} -rtlib=compiler-rt -unwindlib=libunwind&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-22">&lt;a class="lnlinks" href="#hl-8-22">22&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#LDFLAGS=&amp;#34;${LDFLAGS} -fuse-ld=mold&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-23">&lt;a class="lnlinks" href="#hl-8-23">23&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">LDFLAGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${LDFLAGS} -flto&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-для-каждого-пакета">&lt;span class="section-num">4.2&lt;/span> Конфигурация для каждого пакета&lt;/h3>
&lt;ul>
&lt;li>Можно задать компилятор для каждого пакета в отдельности в файле &lt;code>/etc/portage/package.env&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="ln" id="hl-9-1">&lt;a class="lnlinks" href="#hl-9-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc itself&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-2">&lt;a class="lnlinks" href="#hl-9-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">binutils&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc itself # configure: error: AR&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-3">&lt;a class="lnlinks" href="#hl-9-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">binutils&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc itself&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-4">&lt;a class="lnlinks" href="#hl-9-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">util&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mingw64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">toolchain&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc itself&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-5">&lt;a class="lnlinks" href="#hl-9-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gdb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc itself&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-6">&lt;a class="lnlinks" href="#hl-9-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">util&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gengetopt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.23&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-7">&lt;a class="lnlinks" href="#hl-9-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin86&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># error: ISO C99&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-8">&lt;a class="lnlinks" href="#hl-9-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">emulation&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">7.0&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># ld.lld error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-9">&lt;a class="lnlinks" href="#hl-9-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">emulation&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kvm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">7.0&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># ld.lld error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-10">&lt;a class="lnlinks" href="#hl-9-10"> 10&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#app-emulation/qemu compiler-gcc # ERROR: sizeof(size_t) doesn&amp;#39;t match&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-11">&lt;a class="lnlinks" href="#hl-9-11"> 11&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#dev-lang/mono compiler-gcc # ld.lld error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-12">&lt;a class="lnlinks" href="#hl-9-12"> 12&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#app-cdr/cdrtools compiler-gcc # configure error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-13">&lt;a class="lnlinks" href="#hl-9-13"> 13&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#dev-libs/libsecp256k1 compiler-gcc # unrecognized command-line option&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-14">&lt;a class="lnlinks" href="#hl-9-14"> 14&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#dev-util/ostree compiler-gcc # ld.lld error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-15">&lt;a class="lnlinks" href="#hl-9-15"> 15&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#dev-python/ruamel-yaml-clib compiler-gcc # incompatible function pointer types&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-16">&lt;a class="lnlinks" href="#hl-9-16"> 16&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#dev-qt/qtwebengine:5 compiler-gcc # build fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-17">&lt;a class="lnlinks" href="#hl-9-17"> 17&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#media-libs/libpano13 compiler-gcc # build fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-18">&lt;a class="lnlinks" href="#hl-9-18"> 18&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#media-libs/tg_owt compiler-gcc # build fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-19">&lt;a class="lnlinks" href="#hl-9-19"> 19&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#media-libs/phonon compiler-gcc # build fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-20">&lt;a class="lnlinks" href="#hl-9-20"> 20&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#media-libs/vigra compiler-gcc # build fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-21">&lt;a class="lnlinks" href="#hl-9-21"> 21&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#net-print/hplip compiler-gcc # error: ISO C++17&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-22">&lt;a class="lnlinks" href="#hl-9-22"> 22&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#sys-boot/syslinux compiler-gcc # &amp;#39;stdarg.h&amp;#39; file not found&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-23">&lt;a class="lnlinks" href="#hl-9-23"> 23&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#sys-libs/db compiler-gcc # build fails with USE=&amp;#34;cxx&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-24">&lt;a class="lnlinks" href="#hl-9-24"> 24&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#sys-process/tini compiler-gcc # ld.lld error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-25">&lt;a class="lnlinks" href="#hl-9-25"> 25&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-26">&lt;a class="lnlinks" href="#hl-9-26"> 26&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libgudev&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-27">&lt;a class="lnlinks" href="#hl-9-27"> 27&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#net-dialup/ppp compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-28">&lt;a class="lnlinks" href="#hl-9-28"> 28&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#media-libs/audiofile compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-29">&lt;a class="lnlinks" href="#hl-9-29"> 29&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#app-crypt/chntpw compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-30">&lt;a class="lnlinks" href="#hl-9-30"> 30&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">exact&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-31">&lt;a class="lnlinks" href="#hl-9-31"> 31&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libfpx&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-32">&lt;a class="lnlinks" href="#hl-9-32"> 32&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">djbfft&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-33">&lt;a class="lnlinks" href="#hl-9-33"> 33&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">visualization&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gnuplot&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-34">&lt;a class="lnlinks" href="#hl-9-34"> 34&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sqlite&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.45&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-35">&lt;a class="lnlinks" href="#hl-9-35"> 35&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">editors&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">emacs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># gcc-jit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-36">&lt;a class="lnlinks" href="#hl-9-36"> 36&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">talloc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-37">&lt;a class="lnlinks" href="#hl-9-37"> 37&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tevent&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-38">&lt;a class="lnlinks" href="#hl-9-38"> 38&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#app-text/freelib compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-39">&lt;a class="lnlinks" href="#hl-9-39"> 39&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">editors&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wily&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-40">&lt;a class="lnlinks" href="#hl-9-40"> 40&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mathematics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gretl&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-41">&lt;a class="lnlinks" href="#hl-9-41"> 41&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openjdk&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-42">&lt;a class="lnlinks" href="#hl-9-42"> 42&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openjdk&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">11&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-43">&lt;a class="lnlinks" href="#hl-9-43"> 43&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openjdk&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">17&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-44">&lt;a class="lnlinks" href="#hl-9-44"> 44&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openjdk&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-45">&lt;a class="lnlinks" href="#hl-9-45"> 45&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">commons&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">daemon&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-46">&lt;a class="lnlinks" href="#hl-9-46"> 46&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">perl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">PDL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.63&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-47">&lt;a class="lnlinks" href="#hl-9-47"> 47&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">python&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">scipy&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-48">&lt;a class="lnlinks" href="#hl-9-48"> 48&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">python&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pygame&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-49">&lt;a class="lnlinks" href="#hl-9-49"> 49&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">games&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openscenegraph&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-50">&lt;a class="lnlinks" href="#hl-9-50"> 50&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#dev-util/intel-graphics-compiler compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-51">&lt;a class="lnlinks" href="#hl-9-51"> 51&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#dev-libs/intel-compute-runtime compiler-gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-52">&lt;a class="lnlinks" href="#hl-9-52"> 52&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libdnet&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-53">&lt;a class="lnlinks" href="#hl-9-53"> 53&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">llvm&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-54">&lt;a class="lnlinks" href="#hl-9-54"> 54&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-55">&lt;a class="lnlinks" href="#hl-9-55"> 55&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lld&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-56">&lt;a class="lnlinks" href="#hl-9-56"> 56&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opencl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-57">&lt;a class="lnlinks" href="#hl-9-57"> 57&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opencl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-58">&lt;a class="lnlinks" href="#hl-9-58"> 58&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">util&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spirv&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">llvm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">translator&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-59">&lt;a class="lnlinks" href="#hl-9-59"> 59&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lldb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lto&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-60">&lt;a class="lnlinks" href="#hl-9-60"> 60&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">video&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vlc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lto&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-61">&lt;a class="lnlinks" href="#hl-9-61"> 61&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">intel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">intrinsics&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-62">&lt;a class="lnlinks" href="#hl-9-62"> 62&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ddcutil&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-63">&lt;a class="lnlinks" href="#hl-9-63"> 63&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">mail&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">client&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">thunderbird&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-64">&lt;a class="lnlinks" href="#hl-9-64"> 64&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vcs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cvs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-65">&lt;a class="lnlinks" href="#hl-9-65"> 65&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vcs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">darcs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">binutils&lt;/span> &lt;span class="c1"># need ld&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-66">&lt;a class="lnlinks" href="#hl-9-66"> 66&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">x11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">agg&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-67">&lt;a class="lnlinks" href="#hl-9-67"> 67&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">x11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fox&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-68">&lt;a class="lnlinks" href="#hl-9-68"> 68&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">x11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">motif&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lto&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-69">&lt;a class="lnlinks" href="#hl-9-69"> 69&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gnu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">efi&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-70">&lt;a class="lnlinks" href="#hl-9-70"> 70&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">memtest86&lt;/span>&lt;span class="o">+&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-71">&lt;a class="lnlinks" href="#hl-9-71"> 71&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fwupd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">efi&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-72">&lt;a class="lnlinks" href="#hl-9-72"> 72&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">flashrom&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-73">&lt;a class="lnlinks" href="#hl-9-73"> 73&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mesa&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lto&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-74">&lt;a class="lnlinks" href="#hl-9-74"> 74&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">zathura&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pdf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mupdf&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-75">&lt;a class="lnlinks" href="#hl-9-75"> 75&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ldb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-76">&lt;a class="lnlinks" href="#hl-9-76"> 76&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tdb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-77">&lt;a class="lnlinks" href="#hl-9-77"> 77&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cdb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-78">&lt;a class="lnlinks" href="#hl-9-78"> 78&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sssd&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-79">&lt;a class="lnlinks" href="#hl-9-79"> 79&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">coinor&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">osi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.108&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># bug: #919825&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-80">&lt;a class="lnlinks" href="#hl-9-80"> 80&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">blender&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">4.0&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-81">&lt;a class="lnlinks" href="#hl-9-81"> 81&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemtap&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-82">&lt;a class="lnlinks" href="#hl-9-82"> 82&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">x11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">virtualgl&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-83">&lt;a class="lnlinks" href="#hl-9-83"> 83&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libphonenumber&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-84">&lt;a class="lnlinks" href="#hl-9-84"> 84&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ffcall&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-85">&lt;a class="lnlinks" href="#hl-9-85"> 85&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">util&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">yacc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-86">&lt;a class="lnlinks" href="#hl-9-86"> 86&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libbpf&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-87">&lt;a class="lnlinks" href="#hl-9-87"> 87&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">perl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">OpenGL&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-88">&lt;a class="lnlinks" href="#hl-9-88"> 88&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">xmlrpc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-89">&lt;a class="lnlinks" href="#hl-9-89"> 89&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">liboil&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-90">&lt;a class="lnlinks" href="#hl-9-90"> 90&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">liblouis&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-91">&lt;a class="lnlinks" href="#hl-9-91"> 91&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">snappy&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-92">&lt;a class="lnlinks" href="#hl-9-92"> 92&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libcdio&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-93">&lt;a class="lnlinks" href="#hl-9-93"> 93&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">samba&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-94">&lt;a class="lnlinks" href="#hl-9-94"> 94&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lang&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gprolog&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-95">&lt;a class="lnlinks" href="#hl-9-95"> 95&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">log4cpp&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-96">&lt;a class="lnlinks" href="#hl-9-96"> 96&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libiodbc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-97">&lt;a class="lnlinks" href="#hl-9-97"> 97&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ddd&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-98">&lt;a class="lnlinks" href="#hl-9-98"> 98&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">totem&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">parser&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-99">&lt;a class="lnlinks" href="#hl-9-99"> 99&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lisp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ecl&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-100">&lt;a class="lnlinks" href="#hl-9-100">100&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mariadb&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-101">&lt;a class="lnlinks" href="#hl-9-101">101&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">perl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">PGPLOT&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-102">&lt;a class="lnlinks" href="#hl-9-102">102&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">analyzer&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rrdtool&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-103">&lt;a class="lnlinks" href="#hl-9-103">103&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lang&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">harbour&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-104">&lt;a class="lnlinks" href="#hl-9-104">104&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">avidemux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-105">&lt;a class="lnlinks" href="#hl-9-105">105&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">video&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">avidemux&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-106">&lt;a class="lnlinks" href="#hl-9-106">106&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">avidemux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plugins&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-107">&lt;a class="lnlinks" href="#hl-9-107">107&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nds&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openldap&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-108">&lt;a class="lnlinks" href="#hl-9-108">108&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">serf&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-109">&lt;a class="lnlinks" href="#hl-9-109">109&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mathematics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pari&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1"># needs fix makefiles&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-110">&lt;a class="lnlinks" href="#hl-9-110">110&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">python&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cysignals&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-111">&lt;a class="lnlinks" href="#hl-9-111">111&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">accessibility&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">brltty&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-112">&lt;a class="lnlinks" href="#hl-9-112">112&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">video&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ffmpeg&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-113">&lt;a class="lnlinks" href="#hl-9-113">113&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">office&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dia&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-114">&lt;a class="lnlinks" href="#hl-9-114">114&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tesseract&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-115">&lt;a class="lnlinks" href="#hl-9-115">115&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">perl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">PDL&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-116">&lt;a class="lnlinks" href="#hl-9-116">116&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">perl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">OpenGL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">GLUT&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-117">&lt;a class="lnlinks" href="#hl-9-117">117&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openssh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">contrib&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-118">&lt;a class="lnlinks" href="#hl-9-118">118&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">haskell&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">network&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-119">&lt;a class="lnlinks" href="#hl-9-119">119&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">haskell&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">old&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-120">&lt;a class="lnlinks" href="#hl-9-120">120&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">haskell&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">resolv&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-121">&lt;a class="lnlinks" href="#hl-9-121">121&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dante&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-122">&lt;a class="lnlinks" href="#hl-9-122">122&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">keyutils&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-123">&lt;a class="lnlinks" href="#hl-9-123">123&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libnftnl&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-124">&lt;a class="lnlinks" href="#hl-9-124">124&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sound&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sox&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-125">&lt;a class="lnlinks" href="#hl-9-125">125&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libgphoto2&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-126">&lt;a class="lnlinks" href="#hl-9-126">126&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dns&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bind&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tools&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-127">&lt;a class="lnlinks" href="#hl-9-127">127&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sane&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">backends&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-128">&lt;a class="lnlinks" href="#hl-9-128">128&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">paper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clip&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-129">&lt;a class="lnlinks" href="#hl-9-129">129&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i18n&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">scim&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-130">&lt;a class="lnlinks" href="#hl-9-130">130&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="o">=&lt;/span>&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mathematics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">octave&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-131">&lt;a class="lnlinks" href="#hl-9-131">131&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libgamin&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-132">&lt;a class="lnlinks" href="#hl-9-132">132&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">x11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">redshift&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-133">&lt;a class="lnlinks" href="#hl-9-133">133&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">glusterfs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-134">&lt;a class="lnlinks" href="#hl-9-134">134&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">exempi&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-135">&lt;a class="lnlinks" href="#hl-9-135">135&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">urt&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-136">&lt;a class="lnlinks" href="#hl-9-136">136&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libopenraw&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-137">&lt;a class="lnlinks" href="#hl-9-137">137&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libsidplay&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-138">&lt;a class="lnlinks" href="#hl-9-138">138&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libdc1394&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-139">&lt;a class="lnlinks" href="#hl-9-139">139&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">autopano&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">C&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-140">&lt;a class="lnlinks" href="#hl-9-140">140&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libdv&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-141">&lt;a class="lnlinks" href="#hl-9-141">141&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">video&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gpac&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-142">&lt;a class="lnlinks" href="#hl-9-142">142&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">povray&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-143">&lt;a class="lnlinks" href="#hl-9-143">143&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openglide&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-144">&lt;a class="lnlinks" href="#hl-9-144">144&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sound&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">audacity&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-145">&lt;a class="lnlinks" href="#hl-9-145">145&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">firewall&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ipset&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-146">&lt;a class="lnlinks" href="#hl-9-146">146&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">graphicsmagick&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-147">&lt;a class="lnlinks" href="#hl-9-147">147&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libayatana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appindicator&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-148">&lt;a class="lnlinks" href="#hl-9-148">148&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gtk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vnc&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-149">&lt;a class="lnlinks" href="#hl-9-149">149&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">omniORB&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-150">&lt;a class="lnlinks" href="#hl-9-150">150&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">inkscape&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-151">&lt;a class="lnlinks" href="#hl-9-151">151&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">print&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gutenprint&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-152">&lt;a class="lnlinks" href="#hl-9-152">152&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">misc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">netkit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">telnetd&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-153">&lt;a class="lnlinks" href="#hl-9-153">153&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">net&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">autofs&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-154">&lt;a class="lnlinks" href="#hl-9-154">154&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">physics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openmodelica&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-155">&lt;a class="lnlinks" href="#hl-9-155">155&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sqlite&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span> &lt;span class="c1">## Bug #928745&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-156">&lt;a class="lnlinks" href="#hl-9-156">156&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">media&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">video&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mpv&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-157">&lt;a class="lnlinks" href="#hl-9-157">157&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">emulation&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dosemu&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-158">&lt;a class="lnlinks" href="#hl-9-158">158&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lha&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-159">&lt;a class="lnlinks" href="#hl-9-159">159&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">arj&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-160">&lt;a class="lnlinks" href="#hl-9-160">160&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fbreader&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-161">&lt;a class="lnlinks" href="#hl-9-161">161&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cdr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cdrtools&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gcc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-162">&lt;a class="lnlinks" href="#hl-9-162">162&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libpqxx&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">18&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-163">&lt;a class="lnlinks" href="#hl-9-163">163&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vtk&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">18&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-164">&lt;a class="lnlinks" href="#hl-9-164">164&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">sci&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">visualization&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">paraview&lt;/span> &lt;span class="n">compiler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clang&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mold&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">18&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="конфигурация-специальных-окружений">&lt;span class="section-num">4.3&lt;/span> Конфигурация специальных окружений&lt;/h3>
&lt;ul>
&lt;li>Нужно задать конфигурации для разных компиляторов.&lt;/li>
&lt;/ul>
&lt;h4 id="gcc">&lt;span class="section-num">4.3.1&lt;/span> gcc&lt;/h4>
&lt;ul>
&lt;li>Конфигурация для компилятора &lt;em>gcc&lt;/em> в файле &lt;code>/etc/portage/env/compiler-gcc&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-10-1">&lt;a class="lnlinks" href="#hl-10-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">COMMON_FLAGS=&amp;#34;-O2 -march=native&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-2">&lt;a class="lnlinks" href="#hl-10-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">CFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-3">&lt;a class="lnlinks" href="#hl-10-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">CXXFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-4">&lt;a class="lnlinks" href="#hl-10-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">LDFLAGS=&amp;#34;-Wl,--as-needed&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-5">&lt;a class="lnlinks" href="#hl-10-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-6">&lt;a class="lnlinks" href="#hl-10-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">CC=&amp;#34;gcc&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-7">&lt;a class="lnlinks" href="#hl-10-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">CXX=&amp;#34;g++&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-8">&lt;a class="lnlinks" href="#hl-10-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">CPP=&amp;#34;gcc -E&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-9">&lt;a class="lnlinks" href="#hl-10-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">AR=&amp;#34;ar&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-10">&lt;a class="lnlinks" href="#hl-10-10">10&lt;/a>&lt;/span>&lt;span class="cl">NM=&amp;#34;nm&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-11">&lt;a class="lnlinks" href="#hl-10-11">11&lt;/a>&lt;/span>&lt;span class="cl">RANLIB=&amp;#34;ranlib&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-12">&lt;a class="lnlinks" href="#hl-10-12">12&lt;/a>&lt;/span>&lt;span class="cl">OBJCOPY=&amp;#34;objcopy&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-13">&lt;a class="lnlinks" href="#hl-10-13">13&lt;/a>&lt;/span>&lt;span class="cl">STRIP=&amp;#34;strip&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-14">&lt;a class="lnlinks" href="#hl-10-14">14&lt;/a>&lt;/span>&lt;span class="cl">LD=&amp;#34;ld&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 1:&lt;/span>
/etc/portage/env/compiler-gcc
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h4 id="clang-без-lto">&lt;span class="section-num">4.3.2&lt;/span> clang без LTO&lt;/h4>
&lt;ul>
&lt;li>Конфигурация для компилятора &lt;em>clang&lt;/em> без &lt;em>LTO&lt;/em> в файле &lt;code>/etc/portage/env/compiler-clang-no-lto&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-11-1">&lt;a class="lnlinks" href="#hl-11-1"> 1&lt;/a>&lt;/span>&lt;span class="cl"># Normal settings here
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-2">&lt;a class="lnlinks" href="#hl-11-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">COMMON_FLAGS=&amp;#34;-O2 -march=native&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-3">&lt;a class="lnlinks" href="#hl-11-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">CFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-4">&lt;a class="lnlinks" href="#hl-11-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">CXXFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-5">&lt;a class="lnlinks" href="#hl-11-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-6">&lt;a class="lnlinks" href="#hl-11-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">CC=&amp;#34;clang&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-7">&lt;a class="lnlinks" href="#hl-11-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">CPP=&amp;#34;clang-cpp&amp;#34; # necessary for xorg-server and possibly other packages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-8">&lt;a class="lnlinks" href="#hl-11-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">CXX=&amp;#34;clang++&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-9">&lt;a class="lnlinks" href="#hl-11-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">AR=&amp;#34;llvm-ar&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-10">&lt;a class="lnlinks" href="#hl-11-10">10&lt;/a>&lt;/span>&lt;span class="cl">NM=&amp;#34;llvm-nm&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-11">&lt;a class="lnlinks" href="#hl-11-11">11&lt;/a>&lt;/span>&lt;span class="cl">RANLIB=&amp;#34;llvm-ranlib&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-12">&lt;a class="lnlinks" href="#hl-11-12">12&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-13">&lt;a class="lnlinks" href="#hl-11-13">13&lt;/a>&lt;/span>&lt;span class="cl"># No need to set this, clang-common can handle this based on chosen USE flags
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-14">&lt;a class="lnlinks" href="#hl-11-14">14&lt;/a>&lt;/span>&lt;span class="cl"># LDFLAGS=&amp;#34;${LDFLAGS} -fuse-ld=lld -rtlib=compiler-rt -unwindlib=libunwind -Wl,--as-needed&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-15">&lt;a class="lnlinks" href="#hl-11-15">15&lt;/a>&lt;/span>&lt;span class="cl"># LDFLAGS=&amp;#34;-fuse-ld=lld -rtlib=compiler-rt -unwindlib=libunwind -Wl,--as-needed&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 2:&lt;/span>
/etc/portage/env/compiler-clang-no-lto
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h4 id="clang-plus-mold">&lt;span class="section-num">4.3.3&lt;/span> clang + mold&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-12-1">&lt;a class="lnlinks" href="#hl-12-1"> 1&lt;/a>&lt;/span>&lt;span class="cl"># Normal settings here
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-2">&lt;a class="lnlinks" href="#hl-12-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">COMMON_FLAGS=&amp;#34;-O2 -march=native&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-3">&lt;a class="lnlinks" href="#hl-12-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">CFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-4">&lt;a class="lnlinks" href="#hl-12-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">CXXFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-5">&lt;a class="lnlinks" href="#hl-12-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">CLANG_NO_DEFAULT_CONFIG=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-6">&lt;a class="lnlinks" href="#hl-12-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-7">&lt;a class="lnlinks" href="#hl-12-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">CC=&amp;#34;clang&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-8">&lt;a class="lnlinks" href="#hl-12-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">CPP=&amp;#34;clang-cpp&amp;#34; # necessary for xorg-server and possibly other packages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-9">&lt;a class="lnlinks" href="#hl-12-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">CXX=&amp;#34;clang++&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-10">&lt;a class="lnlinks" href="#hl-12-10">10&lt;/a>&lt;/span>&lt;span class="cl">AR=&amp;#34;llvm-ar&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-11">&lt;a class="lnlinks" href="#hl-12-11">11&lt;/a>&lt;/span>&lt;span class="cl">NM=&amp;#34;llvm-nm&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-12">&lt;a class="lnlinks" href="#hl-12-12">12&lt;/a>&lt;/span>&lt;span class="cl">RANLIB=&amp;#34;llvm-ranlib&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-13">&lt;a class="lnlinks" href="#hl-12-13">13&lt;/a>&lt;/span>&lt;span class="cl">OBJCOPY=&amp;#34;llvm-objcopy&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-14">&lt;a class="lnlinks" href="#hl-12-14">14&lt;/a>&lt;/span>&lt;span class="cl">LD=&amp;#34;mold&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-15">&lt;a class="lnlinks" href="#hl-12-15">15&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-16">&lt;a class="lnlinks" href="#hl-12-16">16&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-17">&lt;a class="lnlinks" href="#hl-12-17">17&lt;/a>&lt;/span>&lt;span class="cl">#LDFLAGS=&amp;#34;${LDFLAGS} -Wl,-O2 -Wl,--as-needed -Wl,--undefined-version&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-18">&lt;a class="lnlinks" href="#hl-12-18">18&lt;/a>&lt;/span>&lt;span class="cl">#LDFLAGS=&amp;#34;${LDFLAGS} -rtlib=compiler-rt -unwindlib=libunwind&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-19">&lt;a class="lnlinks" href="#hl-12-19">19&lt;/a>&lt;/span>&lt;span class="cl">LDFLAGS=&amp;#34;${LDFLAGS} -fuse-ld=mold&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-20">&lt;a class="lnlinks" href="#hl-12-20">20&lt;/a>&lt;/span>&lt;span class="cl">#LDFLAGS=&amp;#34;${LDFLAGS} -flto&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 3:&lt;/span>
/etc/portage/env/compiler-clang-mold
&lt;/div>
&lt;h4 id="clang-18-plus-mold">&lt;span class="section-num">4.3.4&lt;/span> clang-18 + mold&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-13-1">&lt;a class="lnlinks" href="#hl-13-1"> 1&lt;/a>&lt;/span>&lt;span class="cl"># Normal settings here
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-2">&lt;a class="lnlinks" href="#hl-13-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">COMMON_FLAGS=&amp;#34;-O2 -march=native&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-3">&lt;a class="lnlinks" href="#hl-13-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">CFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-4">&lt;a class="lnlinks" href="#hl-13-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">CXXFLAGS=&amp;#34;${COMMON_FLAGS}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-5">&lt;a class="lnlinks" href="#hl-13-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">CLANG_NO_DEFAULT_CONFIG=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-6">&lt;a class="lnlinks" href="#hl-13-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-7">&lt;a class="lnlinks" href="#hl-13-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">CC=&amp;#34;clang-18&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-8">&lt;a class="lnlinks" href="#hl-13-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">CPP=&amp;#34;clang-cpp-18&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-9">&lt;a class="lnlinks" href="#hl-13-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">CXX=&amp;#34;clang++-18&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-10">&lt;a class="lnlinks" href="#hl-13-10">10&lt;/a>&lt;/span>&lt;span class="cl">AR=&amp;#34;llvm-ar&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-11">&lt;a class="lnlinks" href="#hl-13-11">11&lt;/a>&lt;/span>&lt;span class="cl">NM=&amp;#34;llvm-nm&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-12">&lt;a class="lnlinks" href="#hl-13-12">12&lt;/a>&lt;/span>&lt;span class="cl">RANLIB=&amp;#34;llvm-ranlib&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-13">&lt;a class="lnlinks" href="#hl-13-13">13&lt;/a>&lt;/span>&lt;span class="cl">OBJCOPY=&amp;#34;llvm-objcopy&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-14">&lt;a class="lnlinks" href="#hl-13-14">14&lt;/a>&lt;/span>&lt;span class="cl">LD=&amp;#34;mold&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-15">&lt;a class="lnlinks" href="#hl-13-15">15&lt;/a>&lt;/span>&lt;span class="cl">LDFLAGS=&amp;#34;${LDFLAGS} -fuse-ld=mold&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="src-block-caption">
&lt;span class="src-block-number">&amp;#1056;&amp;#1072;&amp;#1089;&amp;#1087;&amp;#1077;&amp;#1095;&amp;#1072;&amp;#1090;&amp;#1082;&amp;#1072; 4:&lt;/span>
/etc/portage/env/compiler-clang-mold-18
&lt;/div>
&lt;h2 id="компиляция-ядра">&lt;span class="section-num">5&lt;/span> Компиляция ядра&lt;/h2>
&lt;ul>
&lt;li>Ядро Linux можно скомпилировать с помощью &lt;em>Clang&lt;/em> и набора инструментов &lt;em>LLVM&lt;/em>, определив переменную среды:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-14-1">&lt;a class="lnlinks" href="#hl-14-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nv">LLVM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Чтобы настроить специальные параметры ядра &lt;em>Clang&lt;/em>, такие как оптимизация времени компоновки или целостность потока управления, выполните следующую команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-15-1">&lt;a class="lnlinks" href="#hl-15-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nv">LLVM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> make menuconfig
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Далее скомпилируйте ядро ​​как обычно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-16-1">&lt;a class="lnlinks" href="#hl-16-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nv">LLVM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> make
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Раньше необходимо было объявить &lt;code>LLVM_IAS=1&lt;/code> для использования внутреннего ассемблера Clang для ядра.&lt;/li>
&lt;li>Это больше не требуется, поскольку &lt;code>LLVM=1&lt;/code> теперь включён по умолчанию.&lt;/li>
&lt;/ul>
&lt;h2 id="c-plus-plus-abi">&lt;span class="section-num">6&lt;/span> C++ ABI&lt;/h2>
&lt;ul>
&lt;li>Для Clang по умолчанию устанавливается библиотека C++ &lt;code>libcxx&lt;/code>.&lt;/li>
&lt;li>При компиляции с помощью &lt;em>gcc&lt;/em> используется библиотека &lt;code>libstdc++&lt;/code>.&lt;/li>
&lt;li>Необходимо, как минимум, перекомпилить приложения, использующие библиотеку &lt;code>libstdc++&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-17-1">&lt;a class="lnlinks" href="#hl-17-1">1&lt;/a>&lt;/span>&lt;span class="cl">revdep-rebuild --library libstdc++ -- -v --keep-going
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="ресурсы">&lt;span class="section-num">7&lt;/span> Ресурсы&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://wiki.gentoo.org/wiki/Clang" target="_blank" rel="noopener">https://wiki.gentoo.org/wiki/Clang&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://wiki.gentoo.org/wiki/Clang/Bootstrapping" target="_blank" rel="noopener">https://wiki.gentoo.org/wiki/Clang/Bootstrapping&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Gentoo. Дополнительные репозитории</title><link>https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/</link><pubDate>Sun, 01 Oct 2023 13:41:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/</guid><description>&lt;p>Gentoo. Дополнительные репозитории.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">3&lt;/span> Конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#использование">&lt;span class="section-num">4&lt;/span> Использование&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#синхронизация-репозитория">&lt;span class="section-num">4.1&lt;/span> Синхронизация репозитория&lt;/a>&lt;/li>
&lt;li>&lt;a href="#просмотр-репозиториев">&lt;span class="section-num">4.2&lt;/span> Просмотр репозиториев&lt;/a>&lt;/li>
&lt;li>&lt;a href="#добавление-репозиториев">&lt;span class="section-num">4.3&lt;/span> Добавление репозиториев&lt;/a>&lt;/li>
&lt;li>&lt;a href="#отключение-репозиториев">&lt;span class="section-num">4.4&lt;/span> Отключение репозиториев&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-нового-репозитория">&lt;span class="section-num">4.5&lt;/span> Создание нового репозитория&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройки-репозиториев">&lt;span class="section-num">5&lt;/span> Настройки репозиториев&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#приоритет-репозиториев">&lt;span class="section-num">5.1&lt;/span> Приоритет репозиториев&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#списки-полезных-репозиториев">&lt;span class="section-num">6&lt;/span> Списки полезных репозиториев&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#karma">&lt;span class="section-num">6.1&lt;/span> Karma&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Ранее использовалась утилита &lt;code>layman&lt;/code>.&lt;/li>
&lt;li>Сейчас рекомендуется использовать модуль &lt;em>eselect&lt;/em> &lt;code>eselect-repository&lt;/code>.&lt;/li>
&lt;li>Документация:
&lt;ul>
&lt;li>&lt;a href="https://wiki.gentoo.org/wiki/Eselect/Repository/ru" target="_blank" rel="noopener">https://wiki.gentoo.org/wiki/Eselect/Repository/ru&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://wiki.gentoo.org/wiki/Handbook:AMD64/Portage/CustomTree/ru" target="_blank" rel="noopener">https://wiki.gentoo.org/wiki/Handbook:AMD64/Portage/CustomTree/ru&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;ul>
&lt;li>Установка:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge app-eselect/eselect-repository
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">3&lt;/span> Конфигурация&lt;/h2>
&lt;ul>
&lt;li>Для работы модуля должен существовать каталог или файл &lt;code>repos.conf&lt;/code>, путь к которому задаётся переменной &lt;code>REPOS_CONF&lt;/code> в &lt;code>/etc/eselect/repository.conf&lt;/code>.&lt;/li>
&lt;li>Будем использовать каталог конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkdir -p /etc/portage/repos.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Файл настройки &lt;code>/etc/eselect/repository.conf&lt;/code> изначально имеет следующий вид:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="ln" id="hl-2-1">&lt;a class="lnlinks" href="#hl-2-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># конфигурация для eselect-repo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-2">&lt;a class="lnlinks" href="#hl-2-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># (читается как bash сценарий, поэтому значения должны оставаться совместимыми&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-3">&lt;a class="lnlinks" href="#hl-2-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># с bash)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-4">&lt;a class="lnlinks" href="#hl-2-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-5">&lt;a class="lnlinks" href="#hl-2-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Следующие переменные указывают на пути,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-6">&lt;a class="lnlinks" href="#hl-2-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># настроенные во время сборки:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-7">&lt;a class="lnlinks" href="#hl-2-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># CACHEDIR -- системный каталог кэша (напр. /var/cache)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-8">&lt;a class="lnlinks" href="#hl-2-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># SYSCONFDIR -- системный каталог конфигурации (напр. /etc)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-9">&lt;a class="lnlinks" href="#hl-2-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># SHAREDSTATEDIR -- системный каталог с разделяемыми состояниями&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-10">&lt;a class="lnlinks" href="#hl-2-10">10&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># (shared state) (напр. /var)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-11">&lt;a class="lnlinks" href="#hl-2-11">11&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-12">&lt;a class="lnlinks" href="#hl-2-12">12&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Расположение файла или каталога с конфигурацией репозиториев.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-13">&lt;a class="lnlinks" href="#hl-2-13">13&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Если это каталог, используются правила Portage для дочерних файлов.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-14">&lt;a class="lnlinks" href="#hl-2-14">14&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">REPOS_CONF&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">SYSCONFDIR&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">repos&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-15">&lt;a class="lnlinks" href="#hl-2-15">15&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-16">&lt;a class="lnlinks" href="#hl-2-16">16&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Файл, в который будут добавляться конфигурации новых репозиториев,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-17">&lt;a class="lnlinks" href="#hl-2-17">17&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># если REPOS_CONF является каталогом. Вы можете использовать&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-18">&lt;a class="lnlinks" href="#hl-2-18">18&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># переменную &amp;#34;${repository}&amp;#34;, которая указывает на&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-19">&lt;a class="lnlinks" href="#hl-2-19">19&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># название вновь добавленного репозитория.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-20">&lt;a class="lnlinks" href="#hl-2-20">20&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">REPOS_CONF_SUBFILE&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">REPOS_CONF&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">eselect&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">repo&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-21">&lt;a class="lnlinks" href="#hl-2-21">21&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-22">&lt;a class="lnlinks" href="#hl-2-22">22&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Родительский каталог, куда будут добавлены сами репозитории.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-23">&lt;a class="lnlinks" href="#hl-2-23">23&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Новые репозитории добавляются как дочерние каталоги&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-24">&lt;a class="lnlinks" href="#hl-2-24">24&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># с названием самого репозитория.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-25">&lt;a class="lnlinks" href="#hl-2-25">25&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">REPOS_BASE&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">SHAREDSTATEDIR&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">repos&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-26">&lt;a class="lnlinks" href="#hl-2-26">26&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-27">&lt;a class="lnlinks" href="#hl-2-27">27&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Расположение списка удалённых репозиториев (remote repositories list).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-28">&lt;a class="lnlinks" href="#hl-2-28">28&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># По умолчанию использует список gentoo-mirror, который содержит,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-29">&lt;a class="lnlinks" href="#hl-2-29">29&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># прегенерированный кэш метаданных&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-30">&lt;a class="lnlinks" href="#hl-2-30">30&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># (pregenerated metadata cache).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-31">&lt;a class="lnlinks" href="#hl-2-31">31&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">REMOTE_LIST_URI&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">qa&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reports&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gentoo&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">output&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">repos&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">repositories&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-32">&lt;a class="lnlinks" href="#hl-2-32">32&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-33">&lt;a class="lnlinks" href="#hl-2-33">33&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Альтернатива: изначальный список Gentoo без прегенерации.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-34">&lt;a class="lnlinks" href="#hl-2-34">34&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">#REMOTE_LIST_URI=https://api.gentoo.org/overlays/repositories.xml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-35">&lt;a class="lnlinks" href="#hl-2-35">35&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-36">&lt;a class="lnlinks" href="#hl-2-36">36&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Каталог, где будет храниться кэш repositories.xml. Файл всегда называется&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-37">&lt;a class="lnlinks" href="#hl-2-37">37&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># &amp;#34;repositories.xml&amp;#34; из-за технических ограничений wget.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-38">&lt;a class="lnlinks" href="#hl-2-38">38&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">REMOTE_LIST_CACHEDIR&lt;/span>&lt;span class="o">=~/.&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">eselect&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">repo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-39">&lt;a class="lnlinks" href="#hl-2-39">39&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-40">&lt;a class="lnlinks" href="#hl-2-40">40&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Интервал (в секундах) проверки списка удалённых репозиториев на изменения.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-41">&lt;a class="lnlinks" href="#hl-2-41">41&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># По умолчанию равен 2 часам.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-42">&lt;a class="lnlinks" href="#hl-2-42">42&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">REMOTE_LIST_REFRESH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">((&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">3600&lt;/span> &lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="использование">&lt;span class="section-num">4&lt;/span> Использование&lt;/h2>
&lt;h3 id="синхронизация-репозитория">&lt;span class="section-num">4.1&lt;/span> Синхронизация репозитория&lt;/h3>
&lt;ul>
&lt;li>Репозитории могут быть синхронизированы утилитой &lt;code>emaint&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-3-1">&lt;a class="lnlinks" href="#hl-3-1">1&lt;/a>&lt;/span>&lt;span class="cl">emaint sync -r foo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="просмотр-репозиториев">&lt;span class="section-num">4.2&lt;/span> Просмотр репозиториев&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Gentoo позволяет пользователям и разработчикам регистрировать репозитории на &lt;a href="https://repos.gentoo.org/" target="_blank" rel="noopener">https://repos.gentoo.org/&lt;/a> для публичного использования.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Просмотр списка репозиториев:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-4-1">&lt;a class="lnlinks" href="#hl-4-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>суффикс &lt;code>*&lt;/code> указывает, что этот репозиторий установлен и подключён;&lt;/li>
&lt;li>суффикс &lt;code>#&lt;/code> указывает, что для этого репозитория необходимо обновить их информацию о синхронизации (путём выключения и включения), или они были настроены пользователем;&lt;/li>
&lt;li>суффикс &lt;code>@&lt;/code> указывает, что такой репозиторий не указан по имени в официальном, опубликованном списке.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Перечислить только сконфигурированные репозитории:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-5-1">&lt;a class="lnlinks" href="#hl-5-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository list -i
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="добавление-репозиториев">&lt;span class="section-num">4.3&lt;/span> Добавление репозиториев&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Добавление репозиториев с &lt;a href="https://repos.gentoo.org/" target="_blank" rel="noopener">https://repos.gentoo.org/&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-6-1">&lt;a class="lnlinks" href="#hl-6-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> foo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Добавление произвольных репозиториев&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-7-1">&lt;a class="lnlinks" href="#hl-7-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository add &lt;span class="nb">test&lt;/span> git https://github.com/test/test.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Синтаксис:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-8-1">&lt;a class="lnlinks" href="#hl-8-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository add &amp;lt;название&amp;gt; &amp;lt;метод-синхронизации&amp;gt; &amp;lt;адрес-синхронизации&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="отключение-репозиториев">&lt;span class="section-num">4.4&lt;/span> Отключение репозиториев&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Отключение репозиториев без удаления содержимого:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-9-1">&lt;a class="lnlinks" href="#hl-9-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository remove foo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Синтаксис:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-10-1">&lt;a class="lnlinks" href="#hl-10-1">1&lt;/a>&lt;/span>&lt;span class="cl">remove &lt;span class="o">[&lt;/span>-f&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&amp;lt;название&amp;gt;&lt;span class="p">|&lt;/span>&amp;lt;индекс&amp;gt;&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Опция &lt;code>-f&lt;/code> требуется для репозиториев, не зарегистрированных на repos.gentoo.org, или без информации о синхронизации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Отключение репозиториев с удалением содержимого:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-11-1">&lt;a class="lnlinks" href="#hl-11-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository remove foo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Синтаксис:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-12-1">&lt;a class="lnlinks" href="#hl-12-1">1&lt;/a>&lt;/span>&lt;span class="cl">remove &lt;span class="o">[&lt;/span>-f&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&amp;lt;название&amp;gt;&lt;span class="p">|&lt;/span>&amp;lt;индекс&amp;gt;&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Опция &lt;code>-f&lt;/code> требуется для репозиториев, не зарегистрированных на repos.gentoo.org, или без информации о синхронизации.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="создание-нового-репозитория">&lt;span class="section-num">4.5&lt;/span> Создание нового репозитория&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Создание каркаса репозитория:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-13-1">&lt;a class="lnlinks" href="#hl-13-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository create foo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Синтаксис:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-14-1">&lt;a class="lnlinks" href="#hl-14-1">1&lt;/a>&lt;/span>&lt;span class="cl">create &amp;lt;название&amp;gt; &lt;span class="o">[&lt;/span>&amp;lt;путь&amp;gt;&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="настройки-репозиториев">&lt;span class="section-num">5&lt;/span> Настройки репозиториев&lt;/h2>
&lt;h3 id="приоритет-репозиториев">&lt;span class="section-num">5.1&lt;/span> Приоритет репозиториев&lt;/h3>
&lt;ul>
&lt;li>По умолчанию пакеты в оверлейных репозиториях имеют преимущество перед пакетами в репозитории &lt;code>gentoo&lt;/code>.&lt;/li>
&lt;li>Кроме того, можно управлять приоритетами дополнительных репозиториев.&lt;/li>
&lt;li>Добавьте параметр приоритета в файл описания репозиториев &lt;code>/etc/portage/repos.conf/eselect-repo.conf&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="ln" id="hl-15-1">&lt;a class="lnlinks" href="#hl-15-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">local&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-15-2">&lt;a class="lnlinks" href="#hl-15-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nx">location&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="err">/&lt;/span>&lt;span class="nx">var&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="nx">db&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="nx">repos&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="nx">local&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-15-3">&lt;a class="lnlinks" href="#hl-15-3">3&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nx">priority&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">100&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="списки-полезных-репозиториев">&lt;span class="section-num">6&lt;/span> Списки полезных репозиториев&lt;/h2>
&lt;h3 id="karma">&lt;span class="section-num">6.1&lt;/span> Karma&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/25/gentoo-karma-repository/">Gentoo. Репозиторий karma&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Стандартные каталоги Gentoo</title><link>https://yamadharma.github.io/ru/post/2022/09/17/gentoo-standard-directories/</link><pubDate>Sat, 17 Sep 2022 13:31:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/17/gentoo-standard-directories/</guid><description>&lt;p>Стандартные каталоги Gentoo.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#конфигурация-portage">&lt;span class="section-num">1&lt;/span> Конфигурация portage&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#основные-файлы-настройки">&lt;span class="section-num">1.1&lt;/span> Основные файлы настройки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#информация-из-определённого-профиля">&lt;span class="section-num">1.2&lt;/span> Информация из определённого профиля&lt;/a>&lt;/li>
&lt;li>&lt;a href="#пользовательская-конфигурация">&lt;span class="section-num">1.3&lt;/span> Пользовательская конфигурация&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#каталоги-системы-portage">&lt;span class="section-num">2&lt;/span> Каталоги системы portage&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#изменение-расположения-каталогов">&lt;span class="section-num">2.1&lt;/span> Изменение расположения каталогов&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#миграция-каталогов">&lt;span class="section-num">2.1.1&lt;/span> Миграция каталогов&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#репозитории-ebuild-файлов">&lt;span class="section-num">2.2&lt;/span> Репозитории ebuild-файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#gentoo-репозиторий-ebuild-файлов">&lt;span class="section-num">2.3&lt;/span> Gentoo репозиторий ebuild-файлов&lt;/a>&lt;/li>
&lt;li>&lt;a href="#двоичные-пакеты">&lt;span class="section-num">2.4&lt;/span> Двоичные пакеты&lt;/a>&lt;/li>
&lt;li>&lt;a href="#исходный-код">&lt;span class="section-num">2.5&lt;/span> Исходный код&lt;/a>&lt;/li>
&lt;li>&lt;a href="#база-состояния-portage">&lt;span class="section-num">2.6&lt;/span> База состояния Portage&lt;/a>&lt;/li>
&lt;li>&lt;a href="#кеш-portage">&lt;span class="section-num">2.7&lt;/span> Кеш Portage&lt;/a>&lt;/li>
&lt;li>&lt;a href="#временные-файлы-portage">&lt;span class="section-num">2.8&lt;/span> Временные файлы Portage&lt;/a>&lt;/li>
&lt;li>&lt;a href="#каталог-компиляции">&lt;span class="section-num">2.9&lt;/span> Каталог компиляции&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="конфигурация-portage">&lt;span class="section-num">1&lt;/span> Конфигурация portage&lt;/h2>
&lt;h3 id="основные-файлы-настройки">&lt;span class="section-num">1.1&lt;/span> Основные файлы настройки&lt;/h3>
&lt;ul>
&lt;li>Portage поставляется с настройками по умолчанию, которые хранятся в &lt;code>/usr/share/portage/config/make.globals&lt;/code>.&lt;/li>
&lt;li>Все настройки Portage обрабатываются с помощью переменных.&lt;/li>
&lt;li>У portage есть конфигурационные файлы по умолчанию, которые является частью системного профиля.&lt;/li>
&lt;li>Системный профиль задаётся с помощью символьной ссылки &lt;code>/etc/portage/make.profile&lt;/code>.&lt;/li>
&lt;li>Для замены конфигурационных переменных следует использовать файл &lt;code>/etc/portage/make.conf&lt;/code>.&lt;/li>
&lt;li>Пример конфигурационного файла: &lt;code>/usr/share/portage/config/make.conf.example&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="информация-из-определённого-профиля">&lt;span class="section-num">1.2&lt;/span> Информация из определённого профиля&lt;/h3>
&lt;ul>
&lt;li>Каталог &lt;code>/etc/portage/make.profile&lt;/code> является символьной ссылкой на один из профилей.&lt;/li>
&lt;li>По умолчанию это &lt;code>/var/db/repos/gentoo/profiles/&lt;/code>.&lt;/li>
&lt;li>Профиль, на который указывает символьная ссылка, и есть системный профиль.&lt;/li>
&lt;li>Профиль содержит информацию о конкретной архитектуре и настройках программного обеспечения.&lt;/li>
&lt;/ul>
&lt;h3 id="пользовательская-конфигурация">&lt;span class="section-num">1.3&lt;/span> Пользовательская конфигурация&lt;/h3>
&lt;ul>
&lt;li>Для пользовательских настроек следует использовать файлы в &lt;code>/etc/portage/&lt;/code>.&lt;/li>
&lt;li>Пользователи могут создать в &lt;code>/etc/portage/&lt;/code> следующие файлы:
&lt;ul>
&lt;li>&lt;code>package.mask&lt;/code>: список пакетов, которые Portage никогда не будет устанавливать;&lt;/li>
&lt;li>&lt;code>package.unmask&lt;/code>: список пакетов, которые Portage будет устанавливать, даже если они заблокированы на системном уровне;&lt;/li>
&lt;li>&lt;code>package.accept_keywords&lt;/code>: список пакетов, которые Portage будет устанавливать, даже если они не подходят для используемой системы или архитектуры;&lt;/li>
&lt;li>&lt;code>package.use&lt;/code> список пакетов, для которых необходимо использовать специфичные USE-флаги, а не брать системные USE-флаги.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Они могут быть не файлами, а каталогами (содержимое разбито по отдельным файлам).&lt;/li>
&lt;/ul>
&lt;h2 id="каталоги-системы-portage">&lt;span class="section-num">2&lt;/span> Каталоги системы portage&lt;/h2>
&lt;h3 id="изменение-расположения-каталогов">&lt;span class="section-num">2.1&lt;/span> Изменение расположения каталогов&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>На основании обсуждения &lt;a href="https://bugs.gentoo.org/662982" target="_blank" rel="noopener">#662982&lt;/a> были внесены изменения в расположение каталогов portage.&lt;/p>
&lt;div class="table-caption">
&lt;span class="table-number">&amp;#1058;&amp;#1072;&amp;#1073;&amp;#1083;&amp;#1080;&amp;#1094;&amp;#1072; 1:&lt;/span>
Смена расположения каталогов системы portage
&lt;/div>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Назначение&lt;/th>
&lt;th>Старый путь&lt;/th>
&lt;th>Новый путь&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Дерево portage&lt;/td>
&lt;td>&lt;code>/usr/portage&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/db/repos/gentoo&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Исходный код пакетов&lt;/td>
&lt;td>&lt;code>/usr/portage/distfiles&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/cache/distfiles&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Бинарные пакеты&lt;/td>
&lt;td>&lt;code>/usr/portage/packages&lt;/code>&lt;/td>
&lt;td>&lt;code>/var/cache/binpkgs&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;/ul>
&lt;h4 id="миграция-каталогов">&lt;span class="section-num">2.1.1&lt;/span> Миграция каталогов&lt;/h4>
&lt;ul>
&lt;li>Удалите (или закомментируйте) любые записи &lt;code>PORTDIR&lt;/code>, &lt;code>DISTDIR&lt;/code>, &lt;code>PKGDIR&lt;/code> в &lt;code>/etc/portage/make.conf&lt;/code>.&lt;/li>
&lt;li>Значения переменных окружения можно посмотреть командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge --info -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-2">&lt;a class="lnlinks" href="#hl-0-2">2&lt;/a>&lt;/span>&lt;span class="cl">emerge --info -v &lt;span class="p">|&lt;/span> grep PORTDIR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-3">&lt;a class="lnlinks" href="#hl-0-3">3&lt;/a>&lt;/span>&lt;span class="cl">emerge --info -v &lt;span class="p">|&lt;/span> grep DISTDIR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-4">&lt;a class="lnlinks" href="#hl-0-4">4&lt;/a>&lt;/span>&lt;span class="cl">emerge --info -v &lt;span class="p">|&lt;/span> grep PKGDIR
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если &lt;code>/var/db/repos/&lt;/code> не существует, создайте его.&lt;/li>
&lt;li>Переместите &lt;code>/usr/portage/distfiles&lt;/code> в &lt;code>/var/cache/distfiles&lt;/code>.&lt;/li>
&lt;li>Переместите &lt;code>/usr/portage/packages&lt;/code> в &lt;code>/var/cache/binpkgs&lt;/code>.&lt;/li>
&lt;li>Переместите &lt;code>/usr/portage&lt;/code> в &lt;code>/var/db/repos/gentoo&lt;/code>.&lt;/li>
&lt;li>Измените переменную &lt;code>location&lt;/code> в файле &lt;code>/etc/portage/repos.conf/gentoo.conf&lt;/code> (или аналогичном) на &lt;code>/var/db/repos/gentoo&lt;/code>.&lt;/li>
&lt;li>Переустановите &lt;code>portage&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nv">DISTDIR&lt;/span>&lt;span class="o">=&lt;/span>/var/cache/distfiles &lt;span class="nv">PKGDIR&lt;/span>&lt;span class="o">=&lt;/span>/var/cache/binpkgs emerge --oneshot portage
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если вы запускаете локальное зеркало rsync, отредактируйте запись пути в &lt;code>/etc/rsyncd.conf&lt;/code> так, чтобы она указывала на &lt;code>/var/db/repos/gentoo&lt;/code>.&lt;/li>
&lt;li>Если вы делитесь своими дистрибутивами, не забудьте обновить любую символическую ссылку или файл конфигурации, которые вам нужны для этого.&lt;/li>
&lt;/ul>
&lt;h3 id="репозитории-ebuild-файлов">&lt;span class="section-num">2.2&lt;/span> Репозитории ebuild-файлов&lt;/h3>
&lt;ul>
&lt;li>Репозитории ebuild-файлов по умолчанию находится в /var/db/repos/&amp;lt;reponame&amp;gt;.&lt;/li>
&lt;/ul>
&lt;h3 id="gentoo-репозиторий-ebuild-файлов">&lt;span class="section-num">2.3&lt;/span> Gentoo репозиторий ebuild-файлов&lt;/h3>
&lt;ul>
&lt;li>Gentoo репозиторий ebuild-файлов по умолчанию находится в &lt;code>/var/db/repos/gentoo&lt;/code>.&lt;/li>
&lt;li>Месторасположение определяется файлом &lt;code>repos.conf&lt;/code>, пример которого можно найти в &lt;code>/usr/share/portage/config/repos.conf&lt;/code>.&lt;/li>
&lt;li>Чтобы изменить значения по умолчанию, скопируйте этот файл в &lt;code>/etc/portage/repos.conf/gentoo.conf&lt;/code> и измените &lt;code>location&lt;/code>.&lt;/li>
&lt;li>Не забудьте сменить символьную ссылку на &lt;code>/etc/portage/make.profile&lt;/code>, если хотите хранить (меняя переменную) Gentoo репозиторий ebuild-файлов в другом месте.&lt;/li>
&lt;li>После изменения настройки location в &lt;code>/etc/portage/repos.conf/gentoo.conf&lt;/code> рекомендуется изменить следующие переменные &lt;code>/etc/portage/make.conf&lt;/code>, так как они не заметят изменений в &lt;code>location&lt;/code>: &lt;code>PKGDIR&lt;/code>, &lt;code>DISTDIR&lt;/code>, &lt;code>RPMDIR&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="двоичные-пакеты">&lt;span class="section-num">2.4&lt;/span> Двоичные пакеты&lt;/h3>
&lt;ul>
&lt;li>Бинарные пакеты находятся в каталоге &lt;code>/var/cache/binpkgs&lt;/code>.&lt;/li>
&lt;li>Этот каталог определяется переменной &lt;code>PKGDIR&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="исходный-код">&lt;span class="section-num">2.5&lt;/span> Исходный код&lt;/h3>
&lt;ul>
&lt;li>По умолчанию исходный код для приложений хранится в каталоге &lt;code>/var/cache/distfiles&lt;/code>.&lt;/li>
&lt;li>Этот каталог определяется переменной &lt;code>DISTDIR&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="база-состояния-portage">&lt;span class="section-num">2.6&lt;/span> База состояния Portage&lt;/h3>
&lt;ul>
&lt;li>База состояния системы (какие пакеты установлены, какие файлы какому пакету принадлежат и т.д.) находится в каталоге &lt;code>/var/db/pkg&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="кеш-portage">&lt;span class="section-num">2.7&lt;/span> Кеш Portage&lt;/h3>
&lt;ul>
&lt;li>Кэш portage хранится в &lt;code>/var/cache/edb&lt;/code>.&lt;/li>
&lt;li>Можно отчистить это каталог, если на данный момент не запущено никаких приложений Portage.&lt;/li>
&lt;/ul>
&lt;h3 id="временные-файлы-portage">&lt;span class="section-num">2.8&lt;/span> Временные файлы Portage&lt;/h3>
&lt;ul>
&lt;li>Временные файлы Portage по умолчанию хранятся в &lt;code>/var/tmp/&lt;/code>.&lt;/li>
&lt;li>Этот каталог определяется с помощью переменной &lt;code>PORTAGE_TMPDIR&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="каталог-компиляции">&lt;span class="section-num">2.9&lt;/span> Каталог компиляции&lt;/h3>
&lt;ul>
&lt;li>Portage создаёт специальные каталоги в &lt;code>/var/tmp/portage/&lt;/code> для всех компилируемых пакетов.&lt;/li>
&lt;li>Этот каталог определяется переменной &lt;code>PORTAGE_TMPDIR&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>Linux. Дистрибутив Gentoo</title><link>https://yamadharma.github.io/ru/post/2022/09/17/linux-gentoo-distribution/</link><pubDate>Sat, 17 Sep 2022 13:18:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2022/09/17/linux-gentoo-distribution/</guid><description>&lt;p>Дистрибутив Gentoo.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#администрирование-gentoo">&lt;span class="section-num">2&lt;/span> Администрирование Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;h2 id="администрирование-gentoo">&lt;span class="section-num">2&lt;/span> Администрирование Gentoo&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2022/09/17/gentoo-standard-directories/">Стандартные каталоги Gentoo&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/">Gentoo. Дополнительные репозитории&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/07/06/gentoo-post-installation/">Gentoo. Постустановка&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/05/16/gentoo-compiling-clang/">Gentoo. Компиляция системы clang&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/11/02/gentoo-ebuild-rust/">Gentoo. Создание ebuild для Rust&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Перенос Linux на btrfs</title><link>https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/</link><pubDate>Fri, 21 May 2021 20:38:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/</guid><description>&lt;p>Перенос Gentoo Linux с одного диска на другой. На новом диске делается система btrfs.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#исходное-состояние-системы">&lt;span class="section-num">1&lt;/span> Исходное состояние системы&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#система-на-lvm">&lt;span class="section-num">1.1&lt;/span> Система на LVM&lt;/a>&lt;/li>
&lt;li>&lt;a href="#система-на-btrfs">&lt;span class="section-num">1.2&lt;/span> Система на btrfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#разбиение-диска">&lt;span class="section-num">2&lt;/span> Разбиение диска&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#выделенная-boot-партиция">&lt;span class="section-num">2.1&lt;/span> Выделенная boot-партиция&lt;/a>&lt;/li>
&lt;li>&lt;a href="#все-разделы-на-файловой-системе-btrfs">&lt;span class="section-num">2.2&lt;/span> Все разделы на файловой системе btrfs&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#подготовка-раздела-с-btrfs">&lt;span class="section-num">3&lt;/span> Подготовка раздела с btrfs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копирование-существующих-файловых-систем">&lt;span class="section-num">4&lt;/span> Копирование существующих файловых систем&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#система-на-lvm">&lt;span class="section-num">4.1&lt;/span> Система на LVM&lt;/a>&lt;/li>
&lt;li>&lt;a href="#система-на-btrfs">&lt;span class="section-num">4.2&lt;/span> Система на btrfs&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подготовка-к-копированию">&lt;span class="section-num">4.2.1&lt;/span> Подготовка к копированию&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копирование-основных-файловых-систем">&lt;span class="section-num">4.2.2&lt;/span> Копирование основных файловых систем&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копируем-portage">&lt;span class="section-num">4.2.3&lt;/span> Копируем portage&lt;/a>&lt;/li>
&lt;li>&lt;a href="#копируем-системы-с-отключением-cow">&lt;span class="section-num">4.2.4&lt;/span> Копируем системы с отключением CoW&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#установка-загрузчика">&lt;span class="section-num">5&lt;/span> Установка загрузчика&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-монтирования-fstab">&lt;span class="section-num">6&lt;/span> Файл монтирования fstab&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-подкачки-на-файловой-системе-btrfs">&lt;span class="section-num">7&lt;/span> Файл подкачки на файловой системе btrfs&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#подготовка-к-созданию-файла-подкачки">&lt;span class="section-num">7.1&lt;/span> Подготовка к созданию файла подкачки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#создание-файла-подкачки">&lt;span class="section-num">7.2&lt;/span> Создание файла подкачки&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#старый-подход">&lt;span class="section-num">7.2.1&lt;/span> Старый подход&lt;/a>&lt;/li>
&lt;li>&lt;a href="#новый-подход">&lt;span class="section-num">7.2.2&lt;/span> Новый подход&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#активация-файла-подкачки">&lt;span class="section-num">7.3&lt;/span> Активация файла подкачки&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="исходное-состояние-системы">&lt;span class="section-num">1&lt;/span> Исходное состояние системы&lt;/h2>
&lt;ul>
&lt;li>Переносил несколько вариантов исходных систем.&lt;/li>
&lt;/ul>
&lt;h3 id="система-на-lvm">&lt;span class="section-num">1.1&lt;/span> Система на LVM&lt;/h3>
&lt;ul>
&lt;li>Исходно система установлена на LVM:
&lt;ul>
&lt;li>&lt;code>/dev/sda1&lt;/code>: &lt;code>/boot/EFI&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/sda2&lt;/code>: &lt;code>/boot&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/root&lt;/code>: &lt;code>/&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/var&lt;/code>: &lt;code>/var&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/var_tmp&lt;/code>: &lt;code>/var/tmp&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/vm&lt;/code>: &lt;code>/var/vm&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/portage&lt;/code>: &lt;code>/usr/portage&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/portage_local&lt;/code>: &lt;code>/usr/local/share/portage&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/portage_com&lt;/code>: &lt;code>/com/lib/portage&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/vgs/home&lt;/code>: &lt;code>/home&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="система-на-btrfs">&lt;span class="section-num">1.2&lt;/span> Система на btrfs&lt;/h3>
&lt;ul>
&lt;li>Система на btrfs:
&lt;ul>
&lt;li>&lt;code>/dev/sda1&lt;/code>: &lt;code>/boot/EFI&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/sda2&lt;/code>: &lt;code>/boot&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/sda3&lt;/code>: &lt;code>swap&lt;/code>;&lt;/li>
&lt;li>&lt;code>/dev/sda4&lt;/code>: партиция с файловой системой btrfs.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="разбиение-диска">&lt;span class="section-num">2&lt;/span> Разбиение диска&lt;/h2>
&lt;ul>
&lt;li>Установим тип разбиения в GPT.&lt;/li>
&lt;/ul>
&lt;h3 id="выделенная-boot-партиция">&lt;span class="section-num">2.1&lt;/span> Выделенная boot-партиция&lt;/h3>
&lt;ul>
&lt;li>Разобьём на партиции:
&lt;ul>
&lt;li>p1 &amp;mdash; 512M, для &lt;code>EFI&lt;/code>.&lt;/li>
&lt;li>p2 &amp;mdash; 500&amp;ndash;1024M, для &lt;code>/boot&lt;/code>.&lt;/li>
&lt;li>p3 &amp;mdash; двойная оперативная память, для &lt;code>swap&lt;/code>.
&lt;ul>
&lt;li>Также можно разместить файл подкачки на &lt;code>btrfs&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/05/20/btrfs-swap-file/">Файл подкачки на btrfs&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>p4 &amp;mdash; всё остальное для &lt;code>btrfs&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Создадим файловые системы:
&lt;ul>
&lt;li>p1 (&lt;code>EFI&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkfs.vfat -F32 -n EFI /dev/sdc1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>p2 (&lt;code>/boot&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkfs.ext4 -L boot /dev/sdc2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>p3 (&lt;code>swap&lt;/code> в случае отдельной партиции):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-2-1">&lt;a class="lnlinks" href="#hl-2-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkswap -L swap /dev/sdc3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>p4 (&lt;code>btrfs&lt;/code>)
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-3-1">&lt;a class="lnlinks" href="#hl-3-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkfs.btrfs /dev/sdc4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="все-разделы-на-файловой-системе-btrfs">&lt;span class="section-num">2.2&lt;/span> Все разделы на файловой системе btrfs&lt;/h3>
&lt;ul>
&lt;li>Разобьём на партиции:
&lt;ul>
&lt;li>p1 &amp;mdash; 1024M, для &lt;code>EFI&lt;/code>.&lt;/li>
&lt;li>Файл подкачки на &lt;code>btrfs&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2022/05/20/btrfs-swap-file/">Файл подкачки на btrfs&lt;/a>).&lt;/li>
&lt;li>p4 &amp;mdash; всё остальное для &lt;code>btrfs&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Разобьём диск:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-4-1">&lt;a class="lnlinks" href="#hl-4-1">1&lt;/a>&lt;/span>&lt;span class="cl">sgdisk -n 0:0:+1024M -t 0:ef00 -c 0:EFI /dev/sdc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-4-2">&lt;a class="lnlinks" href="#hl-4-2">2&lt;/a>&lt;/span>&lt;span class="cl">sgdisk -n 0:0:0 -t 0:8300 -c 0:gentoo /dev/sdc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим файловые системы:
&lt;ul>
&lt;li>p1 (&lt;code>EFI&lt;/code>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-5-1">&lt;a class="lnlinks" href="#hl-5-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkfs.vfat -F32 -n EFI /dev/sdc1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>p2 (&lt;code>btrfs&lt;/code>) (см. &lt;a href="https://yamadharma.github.io/ru/post/2024/02/19/btrfs-checksumming/">btrfs. Контрольные суммы&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-6-1">&lt;a class="lnlinks" href="#hl-6-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkfs.btrfs --checksum blake2 -L gentoo /dev/sdc2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="подготовка-раздела-с-btrfs">&lt;span class="section-num">3&lt;/span> Подготовка раздела с btrfs&lt;/h2>
&lt;ul>
&lt;li>Подмонтируем раздел с btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-7-1">&lt;a class="lnlinks" href="#hl-7-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkdir /mnt/to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-2">&lt;a class="lnlinks" href="#hl-7-2">2&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9 /dev/sdc2 /mnt/to/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим подтома на btrfs (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-subvolumes/">Подтома btrfs&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-8-1">&lt;a class="lnlinks" href="#hl-8-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-2">&lt;a class="lnlinks" href="#hl-8-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-3">&lt;a class="lnlinks" href="#hl-8-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-4">&lt;a class="lnlinks" href="#hl-8-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @var@tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-5">&lt;a class="lnlinks" href="#hl-8-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @var@log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-6">&lt;a class="lnlinks" href="#hl-8-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-7">&lt;a class="lnlinks" href="#hl-8-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @home
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-8">&lt;a class="lnlinks" href="#hl-8-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-9">&lt;a class="lnlinks" href="#hl-8-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-10">&lt;a class="lnlinks" href="#hl-8-10">10&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @libvirt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подтома для &lt;em>Gentoo Linux&lt;/em>.&lt;/li>
&lt;li>Используется, если &lt;em>portage&lt;/em> размещается локально:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-9-1">&lt;a class="lnlinks" href="#hl-9-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-2">&lt;a class="lnlinks" href="#hl-9-2">2&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @portage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-3">&lt;a class="lnlinks" href="#hl-9-3">3&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @portage@local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-4">&lt;a class="lnlinks" href="#hl-9-4">4&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @portage@com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если используется файл подкачки на файловой системе, то создадим для него подтом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-10-1">&lt;a class="lnlinks" href="#hl-10-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-2">&lt;a class="lnlinks" href="#hl-10-2">2&lt;/a>&lt;/span>&lt;span class="cl">btrfs subvol create @swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="копирование-существующих-файловых-систем">&lt;span class="section-num">4&lt;/span> Копирование существующих файловых систем&lt;/h2>
&lt;h3 id="система-на-lvm">&lt;span class="section-num">4.1&lt;/span> Система на LVM&lt;/h3>
&lt;ul>
&lt;li>Создадим точку монтирования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-11-1">&lt;a class="lnlinks" href="#hl-11-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkdir /mnt/from
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем root-партицию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-12-1">&lt;a class="lnlinks" href="#hl-12-1">1&lt;/a>&lt;/span>&lt;span class="cl">mount /dev/vgs/root /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-2">&lt;a class="lnlinks" href="#hl-12-2">2&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/to/@
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-3">&lt;a class="lnlinks" href="#hl-12-3">3&lt;/a>&lt;/span>&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>/var&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-13-1">&lt;a class="lnlinks" href="#hl-13-1">1&lt;/a>&lt;/span>&lt;span class="cl">mount /dev/vgs/var /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-2">&lt;a class="lnlinks" href="#hl-13-2">2&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/to/@var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-3">&lt;a class="lnlinks" href="#hl-13-3">3&lt;/a>&lt;/span>&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>/boot&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-14-1">&lt;a class="lnlinks" href="#hl-14-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkdir /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-14-2">&lt;a class="lnlinks" href="#hl-14-2">2&lt;/a>&lt;/span>&lt;span class="cl">mount /dev/sdc2 /mnt/to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-14-3">&lt;a class="lnlinks" href="#hl-14-3">3&lt;/a>&lt;/span>&lt;span class="cl">mount /dev/sdb2 /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-14-4">&lt;a class="lnlinks" href="#hl-14-4">4&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/to/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-14-5">&lt;a class="lnlinks" href="#hl-14-5">5&lt;/a>&lt;/span>&lt;span class="cl">umount /mnt/to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-14-6">&lt;a class="lnlinks" href="#hl-14-6">6&lt;/a>&lt;/span>&lt;span class="cl">umount /mnt/from
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>portage&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-15-1">&lt;a class="lnlinks" href="#hl-15-1">1&lt;/a>&lt;/span>&lt;span class="cl">mount /dev/vgs/portage /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-15-2">&lt;a class="lnlinks" href="#hl-15-2">2&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/to/@portage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-15-3">&lt;a class="lnlinks" href="#hl-15-3">3&lt;/a>&lt;/span>&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>portage_local&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-16-1">&lt;a class="lnlinks" href="#hl-16-1">1&lt;/a>&lt;/span>&lt;span class="cl">mount /dev/vgs/portage_local /mnt/from/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-16-2">&lt;a class="lnlinks" href="#hl-16-2">2&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS --delete /mnt/from/ /mnt/to/@portage_local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-16-3">&lt;a class="lnlinks" href="#hl-16-3">3&lt;/a>&lt;/span>&lt;span class="cl">umount /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="система-на-btrfs">&lt;span class="section-num">4.2&lt;/span> Система на btrfs&lt;/h3>
&lt;h4 id="подготовка-к-копированию">&lt;span class="section-num">4.2.1&lt;/span> Подготовка к копированию&lt;/h4>
&lt;ul>
&lt;li>Создадим точки монтирования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-17-1">&lt;a class="lnlinks" href="#hl-17-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkdir -p /mnt/from
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем исходную файловую систему btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-18-1">&lt;a class="lnlinks" href="#hl-18-1">1&lt;/a>&lt;/span>&lt;span class="cl">mount /dev/sda4 /mnt/from/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="копирование-основных-файловых-систем">&lt;span class="section-num">4.2.2&lt;/span> Копирование основных файловых систем&lt;/h4>
&lt;ul>
&lt;li>Скопируем root-партицию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-19-1">&lt;a class="lnlinks" href="#hl-19-1">1&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS -AX --delete /mnt/from/@/* /mnt/to/@
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируем &lt;code>/var&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-20-1">&lt;a class="lnlinks" href="#hl-20-1">1&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS -AX --delete /mnt/from/@var/* /mnt/to/@var
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем и скопируем &lt;code>/boot&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-21-1">&lt;a class="lnlinks" href="#hl-21-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkdir /mnt/boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-21-2">&lt;a class="lnlinks" href="#hl-21-2">2&lt;/a>&lt;/span>&lt;span class="cl">mount /dev/sda2 /mnt/boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-21-3">&lt;a class="lnlinks" href="#hl-21-3">3&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS --delete /mnt/boot/* /mnt/to/@boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-21-4">&lt;a class="lnlinks" href="#hl-21-4">4&lt;/a>&lt;/span>&lt;span class="cl">umount /mnt/boot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="копируем-portage">&lt;span class="section-num">4.2.3&lt;/span> Копируем portage&lt;/h4>
&lt;ul>
&lt;li>Если &lt;code>portage&lt;/code> размещён локально, то его тоже надо скопировать.&lt;/li>
&lt;li>Скопируем &lt;code>@portage&lt;/code>:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-22-1">&lt;a class="lnlinks" href="#hl-22-1">1&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS --delete /mnt/from/@portage/* /mnt/to/@portage
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Скопируем &lt;code>@portage@local&lt;/code>:&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-23-1">&lt;a class="lnlinks" href="#hl-23-1">1&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS --delete /mnt/from/@portage@local/* /mnt/to/@portage@local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="копируем-системы-с-отключением-cow">&lt;span class="section-num">4.2.4&lt;/span> Копируем системы с отключением CoW&lt;/h4>
&lt;ul>
&lt;li>Для файловых систем с образами виртуальных машин следует отключить CoW (copy-on-write) (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/08/27/btrfs-subvolumes/">Подтома btrfs&lt;/a>).&lt;/li>
&lt;li>Так же стоит отключить &lt;em>CoW&lt;/em> для часто изменяемых файлов (например, журналов).&lt;/li>
&lt;li>Подмонтируем файловую систему &lt;code>btrfs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-24-1">&lt;a class="lnlinks" href="#hl-24-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkdir -p /mnt/gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-2">&lt;a class="lnlinks" href="#hl-24-2">2&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@ /dev/sdc2 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-3">&lt;a class="lnlinks" href="#hl-24-3">3&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var /dev/sdc2 /mnt/gentoo/var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-4">&lt;a class="lnlinks" href="#hl-24-4">4&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var@tmp /dev/sdc2 /mnt/gentoo/var/tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-5">&lt;a class="lnlinks" href="#hl-24-5">5&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@vm /dev/sdc2 /mnt/gentoo/var/vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-6">&lt;a class="lnlinks" href="#hl-24-6">6&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@libvirt /dev/sdc2 /mnt/gentoo/var/lib/libvirt/images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-7">&lt;a class="lnlinks" href="#hl-24-7">7&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var@log /dev/sdc2 /mnt/gentoo/var/log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Копирование &lt;code>/var/vm&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Отключим для этого подтома CoW:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-25-1">&lt;a class="lnlinks" href="#hl-25-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-2">&lt;a class="lnlinks" href="#hl-25-2">2&lt;/a>&lt;/span>&lt;span class="cl">chattr +C vm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируем &lt;code>/var/vm&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-26-1">&lt;a class="lnlinks" href="#hl-26-1">1&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS -AX --delete /mnt/from/@vm/* /mnt/to/@vm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Копирование &lt;code>/var/lib/libvirt/images&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Отключим для подтома &lt;code>/var/lib/libvirt/images&lt;/code> CoW:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-27-1">&lt;a class="lnlinks" href="#hl-27-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/lib/libvirt/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-27-2">&lt;a class="lnlinks" href="#hl-27-2">2&lt;/a>&lt;/span>&lt;span class="cl">chattr +C images
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируем &lt;code>/var/lib/libvirt/images&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-28-1">&lt;a class="lnlinks" href="#hl-28-1">1&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS -AX --delete /mnt/from/@libvirt/* /mnt/to/@libvirt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="3">
&lt;li>
&lt;p>Копирование &lt;code>/var/log&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Для &lt;code>/var/log&lt;/code>&lt;/li>
&lt;li>Отключим для подтома &lt;code>/var/log&lt;/code> CoW:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-29-1">&lt;a class="lnlinks" href="#hl-29-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-29-2">&lt;a class="lnlinks" href="#hl-29-2">2&lt;/a>&lt;/span>&lt;span class="cl">chattr +C log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Скопируем &lt;code>/var/log&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-30-1">&lt;a class="lnlinks" href="#hl-30-1">1&lt;/a>&lt;/span>&lt;span class="cl">rsync -av -HS -AX --delete /mnt/from/@var@log/* /mnt/to/@var@log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="4">
&lt;li>
&lt;p>Настройки &lt;code>/var/tmp&lt;/code>&lt;/p>
&lt;ul>
&lt;li>Для &lt;code>/var/tmp&lt;/code>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-31-1">&lt;a class="lnlinks" href="#hl-31-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-31-2">&lt;a class="lnlinks" href="#hl-31-2">2&lt;/a>&lt;/span>&lt;span class="cl">chattr +C tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Посмотреть результат можно командой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-32-1">&lt;a class="lnlinks" href="#hl-32-1">1&lt;/a>&lt;/span>&lt;span class="cl">lsattr -a /mnt/gentoo/var/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-32-2">&lt;a class="lnlinks" href="#hl-32-2">2&lt;/a>&lt;/span>&lt;span class="cl">lsattr -a /mnt/gentoo/var/lib/libvirt/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="установка-загрузчика">&lt;span class="section-num">5&lt;/span> Установка загрузчика&lt;/h2>
&lt;ul>
&lt;li>Перемонтируем файловую систему &lt;code>btrfs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-33-1">&lt;a class="lnlinks" href="#hl-33-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkdir -p /mnt/gentoo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-33-2">&lt;a class="lnlinks" href="#hl-33-2">2&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@ /dev/sdc2 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-33-3">&lt;a class="lnlinks" href="#hl-33-3">3&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var /dev/sdc2 /mnt/gentoo/var
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-33-4">&lt;a class="lnlinks" href="#hl-33-4">4&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@var@tmp /dev/sdc2 /mnt/gentoo/var/tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-33-5">&lt;a class="lnlinks" href="#hl-33-5">5&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard&lt;span class="o">=&lt;/span>async,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@boot /dev/sdc2 /mnt/gentoo/boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-33-6">&lt;a class="lnlinks" href="#hl-33-6">6&lt;/a>&lt;/span>&lt;span class="cl">mount /dev/sdc1 /mnt/gentoo/boot/efi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем псевдо-файловые системы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-34-1">&lt;a class="lnlinks" href="#hl-34-1">1&lt;/a>&lt;/span>&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /dev /mnt/gentoo/dev/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-34-2">&lt;a class="lnlinks" href="#hl-34-2">2&lt;/a>&lt;/span>&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /proc /mnt/gentoo/proc/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-34-3">&lt;a class="lnlinks" href="#hl-34-3">3&lt;/a>&lt;/span>&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /sys /mnt/gentoo/sys/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-34-4">&lt;a class="lnlinks" href="#hl-34-4">4&lt;/a>&lt;/span>&lt;span class="cl">mount -o &lt;span class="nb">bind&lt;/span> /run /mnt/gentoo/run/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-34-5">&lt;a class="lnlinks" href="#hl-34-5">5&lt;/a>&lt;/span>&lt;span class="cl">mount -t efivarfs efivarfs /mnt/gentoo/sys/firmware/efi/efivars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим загрузчик:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-35-1">&lt;a class="lnlinks" href="#hl-35-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-35-2">&lt;a class="lnlinks" href="#hl-35-2">2&lt;/a>&lt;/span>&lt;span class="cl">chroot /mnt/gentoo/ /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-35-3">&lt;a class="lnlinks" href="#hl-35-3">3&lt;/a>&lt;/span>&lt;span class="cl">grub-install /boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-35-4">&lt;a class="lnlinks" href="#hl-35-4">4&lt;/a>&lt;/span>&lt;span class="cl">grub-mkconfig -o /boot/grub/grub.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="файл-монтирования-fstab">&lt;span class="section-num">6&lt;/span> Файл монтирования fstab&lt;/h2>
&lt;ul>
&lt;li>Создадим файл монтирования fstab.&lt;/li>
&lt;li>Узнаем идентификатор партиции с файловой системой btrfs:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-36-1">&lt;a class="lnlinks" href="#hl-36-1">1&lt;/a>&lt;/span>&lt;span class="cl">blkid /dev/sdc2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Получим строчку:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-37-1">&lt;a class="lnlinks" href="#hl-37-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nv">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим файл &lt;code>/mnt/to/etc/fstab&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="ln" id="hl-38-1">&lt;a class="lnlinks" href="#hl-38-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">LABEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;boot&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">boot&lt;/span> &lt;span class="n">ext4&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-38-2">&lt;a class="lnlinks" href="#hl-38-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">LABEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;EFI&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">efi&lt;/span> &lt;span class="n">vfat&lt;/span> &lt;span class="n">defaults&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">flush&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">tz&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">UTC&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-38-3">&lt;a class="lnlinks" href="#hl-38-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">LABEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;swap&amp;#34;&lt;/span> &lt;span class="n">none&lt;/span> &lt;span class="n">swap&lt;/span> &lt;span class="n">sw&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-38-4">&lt;a class="lnlinks" href="#hl-38-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-38-5">&lt;a class="lnlinks" href="#hl-38-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="k">var&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-38-6">&lt;a class="lnlinks" href="#hl-38-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">var_tmp&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-38-7">&lt;a class="lnlinks" href="#hl-38-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vm&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">vm&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-38-8">&lt;a class="lnlinks" href="#hl-38-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">home&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-38-9">&lt;a class="lnlinks" href="#hl-38-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-38-10">&lt;a class="lnlinks" href="#hl-38-10">10&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">portage_local&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-38-11">&lt;a class="lnlinks" href="#hl-38-11">11&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portage&lt;/span> &lt;span class="n">btrfs&lt;/span> &lt;span class="n">relatime&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">discard&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">autodefrag&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zstd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">subvol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">portage_com&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Если используется файл подкачки, то вместо отдельной партиции следует подключить этот файл в &lt;code>/mnt/to/etc/fstab&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-39-1">&lt;a class="lnlinks" href="#hl-39-1">1&lt;/a>&lt;/span>&lt;span class="cl">UUID=&amp;#34;&amp;lt;uuid_number&amp;gt;&amp;#34; /swap btrfs relatime,discard=async,autodefrag,compress=zstd:9,subvol=@swap 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-39-2">&lt;a class="lnlinks" href="#hl-39-2">2&lt;/a>&lt;/span>&lt;span class="cl">/swap/swapfile none swap sw 0 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="файл-подкачки-на-файловой-системе-btrfs">&lt;span class="section-num">7&lt;/span> Файл подкачки на файловой системе btrfs&lt;/h2>
&lt;h3 id="подготовка-к-созданию-файла-подкачки">&lt;span class="section-num">7.1&lt;/span> Подготовка к созданию файла подкачки&lt;/h3>
&lt;ul>
&lt;li>Для раздела файла подкачки следует отключить CoW (copy-on-write).&lt;/li>
&lt;li>Подмонтируем файловую систему &lt;code>btrfs&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-40-1">&lt;a class="lnlinks" href="#hl-40-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkdir -p /mnt/gentoo/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-40-2">&lt;a class="lnlinks" href="#hl-40-2">2&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@ /dev/sdc2 /mnt/gentoo/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим точку монтирования:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-41-1">&lt;a class="lnlinks" href="#hl-41-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkdir /mnt/gentoo/swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Подмонтируем подтом &lt;code>@swap&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-42-1">&lt;a class="lnlinks" href="#hl-42-1">1&lt;/a>&lt;/span>&lt;span class="cl">mount -tbtrfs -orelatime,discard,autodefrag,compress&lt;span class="o">=&lt;/span>zstd:9,subvol&lt;span class="o">=&lt;/span>@swap /dev/sdc2 /mnt/gentoo/swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключим для этого подтома CoW:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-43-1">&lt;a class="lnlinks" href="#hl-43-1">1&lt;/a>&lt;/span>&lt;span class="cl">chattr +C /mnt/gentoo/swap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="создание-файла-подкачки">&lt;span class="section-num">7.2&lt;/span> Создание файла подкачки&lt;/h3>
&lt;h4 id="старый-подход">&lt;span class="section-num">7.2.1&lt;/span> Старый подход&lt;/h4>
&lt;ul>
&lt;li>Создадим файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-44-1">&lt;a class="lnlinks" href="#hl-44-1">1&lt;/a>&lt;/span>&lt;span class="cl">truncate -s &lt;span class="m">0&lt;/span> /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим права доступа &lt;code>600&lt;/code> к файлу подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-45-1">&lt;a class="lnlinks" href="#hl-45-1">1&lt;/a>&lt;/span>&lt;span class="cl">chmod &lt;span class="m">600&lt;/span> /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим размер файла подкачки исходя из размера оперативной памяти:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-46-1">&lt;a class="lnlinks" href="#hl-46-1">1&lt;/a>&lt;/span>&lt;span class="cl">fallocate -l &lt;span class="k">$(&lt;/span>free -h --si &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;NR == 2 {print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span> /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отформатируем файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-47-1">&lt;a class="lnlinks" href="#hl-47-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkswap /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="новый-подход">&lt;span class="section-num">7.2.2&lt;/span> Новый подход&lt;/h4>
&lt;ul>
&lt;li>Работает начиная с версии утилит 6.1.&lt;/li>
&lt;li>Создадим файл подкачки размером 8ГБ:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-48-1">&lt;a class="lnlinks" href="#hl-48-1">1&lt;/a>&lt;/span>&lt;span class="cl">btrfs filesystem mkswapfile --size 4g --uuid clear /mnt/gentooswap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Создадим файл подкачки исходя из размера оперативной памяти:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-49-1">&lt;a class="lnlinks" href="#hl-49-1">1&lt;/a>&lt;/span>&lt;span class="cl">btrfs filesystem mkswapfile --size &lt;span class="k">$(&lt;/span>free -h --si &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;NR == 2 {print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span> --uuid clear /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="активация-файла-подкачки">&lt;span class="section-num">7.3&lt;/span> Активация файла подкачки&lt;/h3>
&lt;ul>
&lt;li>Активируем файл подкачки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-50-1">&lt;a class="lnlinks" href="#hl-50-1">1&lt;/a>&lt;/span>&lt;span class="cl">swapon /mnt/gentoo/swap/swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Window manager i3</title><link>https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/</link><pubDate>Fri, 14 May 2021 11:32:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/</guid><description>&lt;p>Менеджер окон &lt;em>i3&lt;/em>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#репозиторий-конфигурации">&lt;span class="section-num">2&lt;/span> Репозиторий конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#файл-конфигурации">&lt;span class="section-num">3&lt;/span> Файл конфигурации&lt;/a>&lt;/li>
&lt;li>&lt;a href="#навигация">&lt;span class="section-num">4&lt;/span> Навигация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#клавиша-модификатор">&lt;span class="section-num">4.1&lt;/span> Клавиша-модификатор&lt;/a>&lt;/li>
&lt;li>&lt;a href="#основные-комбинации-клавиш">&lt;span class="section-num">4.2&lt;/span> Основные комбинации клавиш&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перемещение-фокуса">&lt;span class="section-num">4.3&lt;/span> Перемещение фокуса&lt;/a>&lt;/li>
&lt;li>&lt;a href="#перемещение-окон">&lt;span class="section-num">4.4&lt;/span> Перемещение окон&lt;/a>&lt;/li>
&lt;li>&lt;a href="#modifying-windows">&lt;span class="section-num">4.5&lt;/span> Modifying windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#структура-расположения-контейнеров">&lt;span class="section-num">4.6&lt;/span> Структура расположения контейнеров&lt;/a>&lt;/li>
&lt;li>&lt;a href="#floating">&lt;span class="section-num">4.7&lt;/span> Floating&lt;/a>&lt;/li>
&lt;li>&lt;a href="#рабочие-области--workspaces">&lt;span class="section-num">4.8&lt;/span> Рабочие области (workspaces)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#opening-applications-closing-windows">&lt;span class="section-num">4.9&lt;/span> Opening applications / Closing windows&lt;/a>&lt;/li>
&lt;li>&lt;a href="#выход-перезапуск">&lt;span class="section-num">4.10&lt;/span> Выход/Перезапуск&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#терминал">&lt;span class="section-num">5.1&lt;/span> Терминал&lt;/a>&lt;/li>
&lt;li>&lt;a href="#управление-окном-с-помощью-мышки">&lt;span class="section-num">5.2&lt;/span> Управление окном с помощью мышки&lt;/a>&lt;/li>
&lt;li>&lt;a href="#строка-статуса">&lt;span class="section-num">5.3&lt;/span> Строка статуса&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#i3bar">&lt;span class="section-num">5.3.1&lt;/span> i3bar&lt;/a>&lt;/li>
&lt;li>&lt;a href="#py3status">&lt;span class="section-num">5.3.2&lt;/span> py3status&lt;/a>&lt;/li>
&lt;li>&lt;a href="#polybar">&lt;span class="section-num">5.3.3&lt;/span> polybar&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#запуск-приложений">&lt;span class="section-num">5.4&lt;/span> Запуск приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#rofi">&lt;span class="section-num">5.4.1&lt;/span> rofi&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#блокировка-экрана">&lt;span class="section-num">5.5&lt;/span> Блокировка экрана&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#блокировщик-экрана-i3lock">&lt;span class="section-num">5.5.1&lt;/span> Блокировщик экрана &lt;code>i3lock&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#блокировщик-экрана-i3lock-color">&lt;span class="section-num">5.5.2&lt;/span> Блокировщик экрана &lt;code>i3lock-color&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#приложения">&lt;span class="section-num">6&lt;/span> Приложения&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#снимки-экрана">&lt;span class="section-num">6.1&lt;/span> Снимки экрана&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#совместимость-приложений">&lt;span class="section-num">7&lt;/span> Совместимость приложений&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#java">&lt;span class="section-num">7.1&lt;/span> Java&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#серое-окно-приложения-не-меняют-размер-с-помощью-wm-меню-сразу-закрываются">&lt;span class="section-num">7.1.1&lt;/span> Серое окно, приложения не меняют размер с помощью WM, меню сразу закрываются&lt;/a>&lt;/li>
&lt;li>&lt;a href="#меню-в-приложениях-плавает-отдельно-им-невозможно-пользоваться">&lt;span class="section-num">7.1.2&lt;/span> Меню в приложениях плавает отдельно, им невозможно пользоваться&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Тайловый менеджер окон.&lt;/li>
&lt;li>&lt;a href="https://i3wm.org/" target="_blank" rel="noopener">https://i3wm.org/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="репозиторий-конфигурации">&lt;span class="section-num">2&lt;/span> Репозиторий конфигурации&lt;/h2>
&lt;ul>
&lt;li>Я сделал репозиторий со своей конфигурацией: &lt;a href="https://github.com/yamadharma/config-i3" target="_blank" rel="noopener">https://github.com/yamadharma/config-i3&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="файл-конфигурации">&lt;span class="section-num">3&lt;/span> Файл конфигурации&lt;/h2>
&lt;ul>
&lt;li>Файлы конфигурации просматриваются в следующем порядке:
&lt;ul>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3/config&lt;/code> (&lt;code>~/.config/i3/config&lt;/code>);&lt;/li>
&lt;li>&lt;code>~/.i3/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_DIRS/i3/config&lt;/code> (&lt;code>/etc/xdg/i3/config&lt;/code>);&lt;/li>
&lt;li>&lt;code>/etc/i3/config&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Начиная с версии 4.20, можно подключать другие файлы конфигурации из основного файла конфигурации &lt;em>i3&lt;/em>.
&lt;ul>
&lt;li>Примеры использования директивы &lt;code>include&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="ln" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Тильда преобразуется в домашний каталог пользователя&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-2">&lt;a class="lnlinks" href="#hl-0-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="na">include ~/.config/i3/assignments.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-3">&lt;a class="lnlinks" href="#hl-0-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-4">&lt;a class="lnlinks" href="#hl-0-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Переменные среды разыменовываются&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-5">&lt;a class="lnlinks" href="#hl-0-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="na">include $HOME/.config/i3/assignments.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-6">&lt;a class="lnlinks" href="#hl-0-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-7">&lt;a class="lnlinks" href="#hl-0-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Символы подстановки раскрываются&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-8">&lt;a class="lnlinks" href="#hl-0-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="na">include ~/.config/i3/config.d/*.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-9">&lt;a class="lnlinks" href="#hl-0-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-10">&lt;a class="lnlinks" href="#hl-0-10">10&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Можно выполнять команду&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-11">&lt;a class="lnlinks" href="#hl-0-11">11&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="na">include ~/.config/i3/`hostname`.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-12">&lt;a class="lnlinks" href="#hl-0-12">12&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-13">&lt;a class="lnlinks" href="#hl-0-13">13&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Каждый путь загружается только один раз&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-14">&lt;a class="lnlinks" href="#hl-0-14">14&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="na">include ~/.config/i3/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-15">&lt;a class="lnlinks" href="#hl-0-15">15&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-16">&lt;a class="lnlinks" href="#hl-0-16">16&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Относительные пути интерпретируются относительно каталога конфигурационного файла&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-17">&lt;a class="lnlinks" href="#hl-0-17">17&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="na">include assignments.conf&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="навигация">&lt;span class="section-num">4&lt;/span> Навигация&lt;/h2>
&lt;h3 id="клавиша-модификатор">&lt;span class="section-num">4.1&lt;/span> Клавиша-модификатор&lt;/h3>
&lt;ul>
&lt;li>В качестве модификатора обычно используется:
&lt;ul>
&lt;li>&lt;code>Alt&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>&lt;/span>&lt;span class="cl">set $mod Mod1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Super&lt;/code> (Клавиша со значком &lt;em>Windows&lt;/em>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-2-1">&lt;a class="lnlinks" href="#hl-2-1">1&lt;/a>&lt;/span>&lt;span class="cl">set $mod Mod4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Предпочитаю &lt;code>Super&lt;/code>, чтобы не конфликтовать с Emacs.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="основные-комбинации-клавиш">&lt;span class="section-num">4.2&lt;/span> Основные комбинации клавиш&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Enter&lt;/code>: открыть терминал.&lt;/li>
&lt;/ul>
&lt;h3 id="перемещение-фокуса">&lt;span class="section-num">4.3&lt;/span> Перемещение фокуса&lt;/h3>
&lt;ul>
&lt;li>Фокус можно перемещать как с помощью стрелок, так и с помощью буквенных клавиш, как в редакторе &lt;em>vi&lt;/em>.
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>h&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Left&lt;/code>: сдвиг фокуса влево.&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>j&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Down&lt;/code>: сдвиг фокуса вниз.&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>k&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Up&lt;/code>: сдвиг фокуса вверх.&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>l&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Right&lt;/code>: сдвиг фокуса вправо.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация выглядит следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-3-1">&lt;a class="lnlinks" href="#hl-3-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">## Home row direction keys, like vim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-2">&lt;a class="lnlinks" href="#hl-3-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">set $left h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-3">&lt;a class="lnlinks" href="#hl-3-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">set $down j
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-4">&lt;a class="lnlinks" href="#hl-3-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">set $up k
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-5">&lt;a class="lnlinks" href="#hl-3-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">set $right l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-6">&lt;a class="lnlinks" href="#hl-3-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">## Move your focus around
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-7">&lt;a class="lnlinks" href="#hl-3-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+$left focus left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-8">&lt;a class="lnlinks" href="#hl-3-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+$down focus down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-9">&lt;a class="lnlinks" href="#hl-3-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+$up focus up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-10">&lt;a class="lnlinks" href="#hl-3-10">10&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+$right focus right
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-11">&lt;a class="lnlinks" href="#hl-3-11">11&lt;/a>&lt;/span>&lt;span class="cl">## Or use $mod+[up|down|left|right]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-12">&lt;a class="lnlinks" href="#hl-3-12">12&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Left focus left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-13">&lt;a class="lnlinks" href="#hl-3-13">13&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Down focus down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-14">&lt;a class="lnlinks" href="#hl-3-14">14&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Up focus up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-15">&lt;a class="lnlinks" href="#hl-3-15">15&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Right focus right
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Впрочем, следует заметить, что также могут использоваться и другие соглашения:
&lt;ul>
&lt;li>&lt;code>j&lt;/code>: влево;&lt;/li>
&lt;li>&lt;code>k&lt;/code>: вниз;&lt;/li>
&lt;li>&lt;code>l&lt;/code>: вверх;&lt;/li>
&lt;li>&lt;code>;&lt;/code>: вправо.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Поскольку в данном менеджере окон поддерживаются контейнеры, то можно переключить фокус на родительский контейнер:
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>a&lt;/code>: переключить фокус на родительский контейнер.&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-4-1">&lt;a class="lnlinks" href="#hl-4-1">1&lt;/a>&lt;/span>&lt;span class="cl">## Move focus to the parent container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-4-2">&lt;a class="lnlinks" href="#hl-4-2">2&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+a focus parent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Space&lt;/code>: переключить режим фокуса.&lt;/li>
&lt;/ul>
&lt;h3 id="перемещение-окон">&lt;span class="section-num">4.4&lt;/span> Перемещение окон&lt;/h3>
&lt;ul>
&lt;li>Делается аналогично перемещению фокуса, но с добавлением модификатора &lt;code>Shift&lt;/code>:
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>h&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Left&lt;/code>: перемещение влево;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>j&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Down&lt;/code>: перемещение вниз;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>k&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Up&lt;/code>: перемещение вверх;&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>l&lt;/code> или &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Right&lt;/code>: перемещение вправо.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация выглядит следующим образом:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-5-1">&lt;a class="lnlinks" href="#hl-5-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">## Move the focused window with the same, but add Shift
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-5-2">&lt;a class="lnlinks" href="#hl-5-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+$left move left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-5-3">&lt;a class="lnlinks" href="#hl-5-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+$down move down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-5-4">&lt;a class="lnlinks" href="#hl-5-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+$up move up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-5-5">&lt;a class="lnlinks" href="#hl-5-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+$right move right
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-5-6">&lt;a class="lnlinks" href="#hl-5-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">## Ditto, with arrow keys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-5-7">&lt;a class="lnlinks" href="#hl-5-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+Left move left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-5-8">&lt;a class="lnlinks" href="#hl-5-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+Down move down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-5-9">&lt;a class="lnlinks" href="#hl-5-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+Up move up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-5-10">&lt;a class="lnlinks" href="#hl-5-10">10&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+Right move right
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="modifying-windows">&lt;span class="section-num">4.5&lt;/span> Modifying windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + f toggle fullscreen&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + v split a window vertically&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + h split a window horizontally&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + r resize mode&lt;/li>
&lt;/ul>
&lt;h3 id="структура-расположения-контейнеров">&lt;span class="section-num">4.6&lt;/span> Структура расположения контейнеров&lt;/h3>
&lt;ul>
&lt;li>Поддерживаются следующие расположения контейнеров:
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>e&lt;/code>: переключение разделённого расположения (split layout);&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>s&lt;/code>: стековое размещение (stacking layout);&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>w&lt;/code>: размещение с табами (tabbed layout).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Конфигурация:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-6-1">&lt;a class="lnlinks" href="#hl-6-1">1&lt;/a>&lt;/span>&lt;span class="cl">## Switch the current container between different layout styles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-6-2">&lt;a class="lnlinks" href="#hl-6-2">2&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+s layout stacking
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-6-3">&lt;a class="lnlinks" href="#hl-6-3">3&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+w layout tabbed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-6-4">&lt;a class="lnlinks" href="#hl-6-4">4&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+e layout toggle split
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для раскладки по умолчанию я использую табы:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-7-1">&lt;a class="lnlinks" href="#hl-7-1">1&lt;/a>&lt;/span>&lt;span class="cl">### Layout mode for new containers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-2">&lt;a class="lnlinks" href="#hl-7-2">2&lt;/a>&lt;/span>&lt;span class="cl">## default|stacking|tabbed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-3">&lt;a class="lnlinks" href="#hl-7-3">3&lt;/a>&lt;/span>&lt;span class="cl">workspace_layout tabbed
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="floating">&lt;span class="section-num">4.7&lt;/span> Floating&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + Shift + Space toggle floating&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + Left click drag floating&lt;/li>
&lt;/ul>
&lt;h3 id="рабочие-области--workspaces">&lt;span class="section-num">4.8&lt;/span> Рабочие области (workspaces)&lt;/h3>
&lt;ul>
&lt;li>Сконфигурим рабочие области:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-8-1">&lt;a class="lnlinks" href="#hl-8-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">## Define names for workspaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-2">&lt;a class="lnlinks" href="#hl-8-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">set $ws1 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-3">&lt;a class="lnlinks" href="#hl-8-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">set $ws2 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-4">&lt;a class="lnlinks" href="#hl-8-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">set $ws3 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-5">&lt;a class="lnlinks" href="#hl-8-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">set $ws4 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-6">&lt;a class="lnlinks" href="#hl-8-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">set $ws5 5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-7">&lt;a class="lnlinks" href="#hl-8-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">set $ws6 6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-8">&lt;a class="lnlinks" href="#hl-8-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">set $ws7 7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-9">&lt;a class="lnlinks" href="#hl-8-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">set $ws8 8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-10">&lt;a class="lnlinks" href="#hl-8-10">10&lt;/a>&lt;/span>&lt;span class="cl">set $ws9 9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-11">&lt;a class="lnlinks" href="#hl-8-11">11&lt;/a>&lt;/span>&lt;span class="cl">set $ws10 10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>0&lt;/code> &amp;ndash; &lt;code>9&lt;/code>: переключиться на соответствующую рабочую область:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-9-1">&lt;a class="lnlinks" href="#hl-9-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">## Switch to workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-2">&lt;a class="lnlinks" href="#hl-9-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+1 workspace $ws1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-3">&lt;a class="lnlinks" href="#hl-9-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+2 workspace $ws2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-4">&lt;a class="lnlinks" href="#hl-9-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+3 workspace $ws3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-5">&lt;a class="lnlinks" href="#hl-9-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+4 workspace $ws4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-6">&lt;a class="lnlinks" href="#hl-9-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+5 workspace $ws5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-7">&lt;a class="lnlinks" href="#hl-9-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+6 workspace $ws6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-8">&lt;a class="lnlinks" href="#hl-9-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+7 workspace $ws7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-9">&lt;a class="lnlinks" href="#hl-9-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+8 workspace $ws8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-10">&lt;a class="lnlinks" href="#hl-9-10">10&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+9 workspace $ws9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-11">&lt;a class="lnlinks" href="#hl-9-11">11&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+0 workspace $ws10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>0&lt;/code> &amp;ndash; &lt;code>9&lt;/code>: перенести окно на соответствующую рабочую область:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-10-1">&lt;a class="lnlinks" href="#hl-10-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">## Move focused container to workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-2">&lt;a class="lnlinks" href="#hl-10-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+1 move container to workspace $ws1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-3">&lt;a class="lnlinks" href="#hl-10-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+2 move container to workspace $ws2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-4">&lt;a class="lnlinks" href="#hl-10-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+3 move container to workspace $ws3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-5">&lt;a class="lnlinks" href="#hl-10-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+4 move container to workspace $ws4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-6">&lt;a class="lnlinks" href="#hl-10-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+5 move container to workspace $ws5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-7">&lt;a class="lnlinks" href="#hl-10-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+6 move container to workspace $ws6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-8">&lt;a class="lnlinks" href="#hl-10-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+7 move container to workspace $ws7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-9">&lt;a class="lnlinks" href="#hl-10-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+8 move container to workspace $ws8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-10">&lt;a class="lnlinks" href="#hl-10-10">10&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+9 move container to workspace $ws9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-10-11">&lt;a class="lnlinks" href="#hl-10-11">11&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+0 move container to workspace $ws10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="opening-applications-closing-windows">&lt;span class="section-num">4.9&lt;/span> Opening applications / Closing windows&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + d open application launcher (dmenu)&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + Shift + q kill a window&lt;/li>
&lt;/ul>
&lt;h3 id="выход-перезапуск">&lt;span class="section-num">4.10&lt;/span> Выход/Перезапуск&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>c&lt;/code>: перечитать конфигурационный файл.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="ln" id="hl-11-1">&lt;a class="lnlinks" href="#hl-11-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## ~/.config/i3/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-2">&lt;a class="lnlinks" href="#hl-11-2">2&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-3">&lt;a class="lnlinks" href="#hl-11-3">3&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## reload the configuration file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-11-4">&lt;a class="lnlinks" href="#hl-11-4">4&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">bindsym&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">mod&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">reload&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>r&lt;/code>: перестартовать &lt;em>i3&lt;/em>, сохранив сессию.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-12-1">&lt;a class="lnlinks" href="#hl-12-1">1&lt;/a>&lt;/span>&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-2">&lt;a class="lnlinks" href="#hl-12-2">2&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-3">&lt;a class="lnlinks" href="#hl-12-3">3&lt;/a>&lt;/span>&lt;span class="cl">## restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-4">&lt;a class="lnlinks" href="#hl-12-4">4&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+r restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>&lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>e&lt;/code>: выход из &lt;em>i3&lt;/em>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-13-1">&lt;a class="lnlinks" href="#hl-13-1">1&lt;/a>&lt;/span>&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-2">&lt;a class="lnlinks" href="#hl-13-2">2&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-3">&lt;a class="lnlinks" href="#hl-13-3">3&lt;/a>&lt;/span>&lt;span class="cl">## exit i3 (logs you out of your X session)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-13-4">&lt;a class="lnlinks" href="#hl-13-4">4&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+e exec &amp;#34;i3-nagbar -t warning -m &amp;#39;You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.&amp;#39; -B &amp;#39;Yes, exit i3&amp;#39; &amp;#39;i3-msg exit&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка">&lt;span class="section-num">5&lt;/span> Настройка&lt;/h2>
&lt;h3 id="терминал">&lt;span class="section-num">5.1&lt;/span> Терминал&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>В качестве терминала я использую kitty.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Конфигурация запуска терминала:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-14-1">&lt;a class="lnlinks" href="#hl-14-1">1&lt;/a>&lt;/span>&lt;span class="cl">set $term kitty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-14-2">&lt;a class="lnlinks" href="#hl-14-2">2&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Return exec $term
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В этом случае запускается одно окно терминала.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Для работы я использую специальную настройку сессии терминала. Я её запускаю при входе в сессию. Для этого я приспособил комбинацию &lt;code>Mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>Enter&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-15-1">&lt;a class="lnlinks" href="#hl-15-1">1&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+Shift+Return exec kitty --session ~/.config/kitty/startup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="управление-окном-с-помощью-мышки">&lt;span class="section-num">5.2&lt;/span> Управление окном с помощью мышки&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Можно управлять окнами с помощью мышки.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Привязка осуществляется следующей командой:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-16-1">&lt;a class="lnlinks" href="#hl-16-1">1&lt;/a>&lt;/span>&lt;span class="cl">bindsym [--release] [--border] [--whole-window] [--exclude-titlebar] [&amp;lt;Modifiers&amp;gt;+]button&amp;lt;n&amp;gt; command
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>По умолчанию привязка запускается только при нажатии на строку заголовка окна.&lt;/li>
&lt;li>Если указан флаг &lt;code>--release&lt;/code>, он запустится, когда кнопка мыши будет отпущена.&lt;/li>
&lt;li>Если указан флаг &lt;code>--whole-window&lt;/code>, то привязка также будет выполняться при щелчке по любой части окна, за исключением границы.&lt;/li>
&lt;li>Чтобы привязка выполнялась при щелчке границы, нужно указать флаг &lt;code>--border&lt;/code>.&lt;/li>
&lt;li>Если задан флаг &lt;code>--exclude-titlebar&lt;/code>, заголовок не будет учитываться для привязки клавиш.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Примеры.&lt;/p>
&lt;ul>
&lt;li>Средняя кнопка на заголовке закрывает окно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-17-1">&lt;a class="lnlinks" href="#hl-17-1">1&lt;/a>&lt;/span>&lt;span class="cl">bindsym --release button2 kill
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Средняя кнопка и модификатор над любой частью окна закрывает окно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-18-1">&lt;a class="lnlinks" href="#hl-18-1">1&lt;/a>&lt;/span>&lt;span class="cl">bindsym --whole-window $mod+button2 kill
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Правая кнопка мыши переключает плавающий режим:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-19-1">&lt;a class="lnlinks" href="#hl-19-1">1&lt;/a>&lt;/span>&lt;span class="cl">bindsym button3 floating toggle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-19-2">&lt;a class="lnlinks" href="#hl-19-2">2&lt;/a>&lt;/span>&lt;span class="cl">bindsym $mod+button3 floating toggle
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Боковые кнопки мыши перемещают окно:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-20-1">&lt;a class="lnlinks" href="#hl-20-1">1&lt;/a>&lt;/span>&lt;span class="cl">bindsym button9 move left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-20-2">&lt;a class="lnlinks" href="#hl-20-2">2&lt;/a>&lt;/span>&lt;span class="cl">bindsym button8 move right
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="строка-статуса">&lt;span class="section-num">5.3&lt;/span> Строка статуса&lt;/h3>
&lt;h4 id="i3bar">&lt;span class="section-num">5.3.1&lt;/span> i3bar&lt;/h4>
&lt;ul>
&lt;li>Отрисовку панели осуществляет утилита &lt;code>i3bar&lt;/code>.&lt;/li>
&lt;li>Отображается вверху или внизу экрана.&lt;/li>
&lt;li>Содержит:
&lt;ul>
&lt;li>область с кнопками переключения рабочих областей &lt;em>i3&lt;/em>;&lt;/li>
&lt;li>системную строку, генерируемую при помощи &lt;code>i3status&lt;/code> или аналогов;&lt;/li>
&lt;li>системный трей с иконками программ.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В конфигурационном файле задаётся следующим образом (&lt;a href="https://i3wm.org/docs/userguide.html#_configuring_i3bar" target="_blank" rel="noopener">https://i3wm.org/docs/userguide.html#_configuring_i3bar&lt;/a>):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-21-1">&lt;a class="lnlinks" href="#hl-21-1">1&lt;/a>&lt;/span>&lt;span class="cl"># ~/.config/i3/config -*- mode: conf-unix; -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-21-2">&lt;a class="lnlinks" href="#hl-21-2">2&lt;/a>&lt;/span>&lt;span class="cl">## Start i3bar to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-21-3">&lt;a class="lnlinks" href="#hl-21-3">3&lt;/a>&lt;/span>&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-21-4">&lt;a class="lnlinks" href="#hl-21-4">4&lt;/a>&lt;/span>&lt;span class="cl"> status_command i3status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-21-5">&lt;a class="lnlinks" href="#hl-21-5">5&lt;/a>&lt;/span>&lt;span class="cl"> position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-21-6">&lt;a class="lnlinks" href="#hl-21-6">6&lt;/a>&lt;/span>&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Поддержка иконок в i3bar&lt;/p>
&lt;ul>
&lt;li>В &lt;code>i3bar&lt;/code> можно использовать шрифты иконок (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/21/monospace-fonts/">Моноширинные шрифты&lt;/a>).&lt;/li>
&lt;li>Наиболее распространённым является шрифт &lt;a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome&lt;/a>.&lt;/li>
&lt;li>Установка:
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-22-1">&lt;a class="lnlinks" href="#hl-22-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge media-fonts/fontawesome
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Для вставки шрифта в файл можно использовать список кодов для иконок &lt;a href="https://fontawesome.com/cheatsheet" target="_blank" rel="noopener">https://fontawesome.com/cheatsheet&lt;/a>.&lt;/li>
&lt;li>Шрифт лучше явно обозначить в конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-23-1">&lt;a class="lnlinks" href="#hl-23-1">1&lt;/a>&lt;/span>&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-23-2">&lt;a class="lnlinks" href="#hl-23-2">2&lt;/a>&lt;/span>&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-23-3">&lt;a class="lnlinks" href="#hl-23-3">3&lt;/a>&lt;/span>&lt;span class="cl"> …
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-23-4">&lt;a class="lnlinks" href="#hl-23-4">4&lt;/a>&lt;/span>&lt;span class="cl"> font pango:Source Sans Pro, FontAwesome 5 Free 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-23-5">&lt;a class="lnlinks" href="#hl-23-5">5&lt;/a>&lt;/span>&lt;span class="cl"> …
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-23-6">&lt;a class="lnlinks" href="#hl-23-6">6&lt;/a>&lt;/span>&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для набора символа по его коду следует использовать конфигурации клавиш. Например, для набора символа с кодом &lt;code>0xf004&lt;/code>, требуется набрать:
&lt;ul>
&lt;li>приложения на основе GTK: &lt;code>Ctrl&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>u&lt;/code>, &lt;code>f004&lt;/code>, &lt;code>Enter&lt;/code>;&lt;/li>
&lt;li>emacs: &lt;code>Ctrl&lt;/code> + &lt;code>x&lt;/code>, &lt;code>8&lt;/code>, &lt;code>Enter&lt;/code>, &lt;code>f004&lt;/code>, &lt;code>Enter&lt;/code>;&lt;/li>
&lt;li>vim: &lt;code>Ctrl&lt;/code> + &lt;code>v&lt;/code>, &lt;code>uf004&lt;/code>;&lt;/li>
&lt;li>urxvt: удерживая &lt;code>Ctrl&lt;/code> + &lt;code>Shift&lt;/code>, наберите &lt;code>f004&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>i3status&lt;/p>
&lt;ul>
&lt;li>Использовано &lt;a href="https://igancev.ru/2020-05-11-configuring-i3status-in-i3wm" target="_blank" rel="noopener">https://igancev.ru/2020-05-11-configuring-i3status-in-i3wm&lt;/a>.&lt;/li>
&lt;li>&lt;code>i3status&lt;/code> генерирует строку состояния для &lt;code>i3bar&lt;/code>.&lt;/li>
&lt;li>Содержит встроенные модули:
&lt;ul>
&lt;li>IPv6 &amp;mdash; получает и выводит IPv6 адрес.&lt;/li>
&lt;li>Disk &amp;mdash; отображает информацию о занятом и свободном месте в файловой системе.&lt;/li>
&lt;li>Run-watch &amp;mdash; мониторинг определённого процесса в системе.&lt;/li>
&lt;li>Path-exists &amp;mdash; проверяет на существование путь в файловой системе.&lt;/li>
&lt;li>Wireless &amp;mdash; позволяет выводить подключения к WIFI сети, уровень сигнала, имя точки доступа.&lt;/li>
&lt;li>Ethernet &amp;mdash; предоставляет IP адрес и скорость соединения сетевого интерфейса.&lt;/li>
&lt;li>Battery &amp;mdash; показ уровня заряда батареи.&lt;/li>
&lt;li>CPU-Temperature &amp;mdash; показ температуры процессора.&lt;/li>
&lt;li>CPU Usage &amp;mdash; использование процессора в процентах.&lt;/li>
&lt;li>Memory &amp;mdash; использование оперативной памяти.&lt;/li>
&lt;li>Load &amp;mdash; среднее значение загрузки системы за 1, 5 и 15 минут (Load Overage).&lt;/li>
&lt;li>Time &amp;mdash; время в текущей временной зоне.&lt;/li>
&lt;li>TzTime &amp;mdash; время в заданной временной зоне.&lt;/li>
&lt;li>DDate &amp;mdash; дата.&lt;/li>
&lt;li>Volume &amp;mdash; управление громкостью звука.&lt;/li>
&lt;li>File Contents &amp;mdash; вывод содержимого указанного файла.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Модули в строке можно переиспользовать по нескольку раз, управляя порядком вывода.&lt;/li>
&lt;li>Конфигурацию условно можно разделить на 3 части:
&lt;ul>
&lt;li>блок &lt;code>general&lt;/code> &amp;mdash; содержит общие параметры;&lt;/li>
&lt;li>переменная &lt;code>order&lt;/code> &amp;mdash; в неё записывается порядок вывода интересующих модулей;&lt;/li>
&lt;li>блоки конфигурации модулей &amp;mdash; непосредственно настройки самих блоков с метриками.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>В конфигурации i3bar задаётся конфигурационный файл для i3status:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-24-1">&lt;a class="lnlinks" href="#hl-24-1">1&lt;/a>&lt;/span>&lt;span class="cl"># ~/.config/i3/config -*- mode: conf-unix; -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-2">&lt;a class="lnlinks" href="#hl-24-2">2&lt;/a>&lt;/span>&lt;span class="cl">## Start i3bar to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-3">&lt;a class="lnlinks" href="#hl-24-3">3&lt;/a>&lt;/span>&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-4">&lt;a class="lnlinks" href="#hl-24-4">4&lt;/a>&lt;/span>&lt;span class="cl"> font pango:Source Sans Pro, FontAwesome 5 Free 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-5">&lt;a class="lnlinks" href="#hl-24-5">5&lt;/a>&lt;/span>&lt;span class="cl"> status_command i3status --config ~/.config/i3/i3status/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-6">&lt;a class="lnlinks" href="#hl-24-6">6&lt;/a>&lt;/span>&lt;span class="cl"> position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-24-7">&lt;a class="lnlinks" href="#hl-24-7">7&lt;/a>&lt;/span>&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Структура информационной панели задаётся в конфигурационном файле:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="ln" id="hl-25-1">&lt;a class="lnlinks" href="#hl-25-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">### -*- mode: conf-unix; -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-2">&lt;a class="lnlinks" href="#hl-25-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## ~/.config/i3/i3status/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-3">&lt;a class="lnlinks" href="#hl-25-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-4">&lt;a class="lnlinks" href="#hl-25-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">general&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-5">&lt;a class="lnlinks" href="#hl-25-5"> 5&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">colors&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="c1"># включение/выключение поддержки цветов true/false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-6">&lt;a class="lnlinks" href="#hl-25-6"> 6&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">interval&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># интервал обновления строки статуса, в секундах&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-7">&lt;a class="lnlinks" href="#hl-25-7"> 7&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">output_format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;i3bar&amp;#34;&lt;/span> &lt;span class="c1"># формат вывода, устанавливаем i3bar (JSON)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-8">&lt;a class="lnlinks" href="#hl-25-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-9">&lt;a class="lnlinks" href="#hl-25-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-10">&lt;a class="lnlinks" href="#hl-25-10"> 10&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># порядок вывода модулей&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-11">&lt;a class="lnlinks" href="#hl-25-11"> 11&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;run_watch openvpn&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-12">&lt;a class="lnlinks" href="#hl-25-12"> 12&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;run_watch openconnect&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-13">&lt;a class="lnlinks" href="#hl-25-13"> 13&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;volume master&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-14">&lt;a class="lnlinks" href="#hl-25-14"> 14&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;wireless _first_&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-15">&lt;a class="lnlinks" href="#hl-25-15"> 15&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;battery all&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-16">&lt;a class="lnlinks" href="#hl-25-16"> 16&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;disk /&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-17">&lt;a class="lnlinks" href="#hl-25-17"> 17&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;memory&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-18">&lt;a class="lnlinks" href="#hl-25-18"> 18&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;cpu_usage&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-19">&lt;a class="lnlinks" href="#hl-25-19"> 19&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;cpu_temperature 0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-20">&lt;a class="lnlinks" href="#hl-25-20"> 20&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">order&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s2">&amp;#34;tztime local&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-21">&lt;a class="lnlinks" href="#hl-25-21"> 21&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-22">&lt;a class="lnlinks" href="#hl-25-22"> 22&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># отслеживание процесса openvpn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-23">&lt;a class="lnlinks" href="#hl-25-23"> 23&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># служит как индикатор работы openvpn клиента&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-24">&lt;a class="lnlinks" href="#hl-25-24"> 24&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># при запуске openvpn необходимо&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-25">&lt;a class="lnlinks" href="#hl-25-25"> 25&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># указывать параметр --writepid /var/run/openvpn.pid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-26">&lt;a class="lnlinks" href="#hl-25-26"> 26&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">run_watch&lt;/span> &lt;span class="n">openvpn&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-27">&lt;a class="lnlinks" href="#hl-25-27"> 27&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">pidfile&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/var/run/openvpn.pid&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-28">&lt;a class="lnlinks" href="#hl-25-28"> 28&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; openvpn&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-29">&lt;a class="lnlinks" href="#hl-25-29"> 29&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># если пареметр format_down оставить пустым,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-30">&lt;a class="lnlinks" href="#hl-25-30"> 30&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># то при неактивном процессе блок будет отсутствовать&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-31">&lt;a class="lnlinks" href="#hl-25-31"> 31&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format_down&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-32">&lt;a class="lnlinks" href="#hl-25-32"> 32&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-33">&lt;a class="lnlinks" href="#hl-25-33"> 33&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-34">&lt;a class="lnlinks" href="#hl-25-34"> 34&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># аналогичный блок индикатор openconnect vpn клиента&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-35">&lt;a class="lnlinks" href="#hl-25-35"> 35&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># требуется запуск клиента с параметром --pid-file=/var/run/openconnect.pid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-36">&lt;a class="lnlinks" href="#hl-25-36"> 36&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">run_watch&lt;/span> &lt;span class="n">openconnect&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-37">&lt;a class="lnlinks" href="#hl-25-37"> 37&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">pidfile&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/var/run/openconnect.pid&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-38">&lt;a class="lnlinks" href="#hl-25-38"> 38&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; openconnect vpn&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-39">&lt;a class="lnlinks" href="#hl-25-39"> 39&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format_down&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-40">&lt;a class="lnlinks" href="#hl-25-40"> 40&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-41">&lt;a class="lnlinks" href="#hl-25-41"> 41&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-42">&lt;a class="lnlinks" href="#hl-25-42"> 42&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># управление громкостью звука&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-43">&lt;a class="lnlinks" href="#hl-25-43"> 43&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">volume&lt;/span> &lt;span class="n">master&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-44">&lt;a class="lnlinks" href="#hl-25-44"> 44&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; %volume&amp;#34;&lt;/span> &lt;span class="c1"># шаблон громкости в активном состоянии&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-45">&lt;a class="lnlinks" href="#hl-25-45"> 45&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format_muted&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; %volume&amp;#34;&lt;/span> &lt;span class="c1"># шаблон громкости в состоянии muted (без звука)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-46">&lt;a class="lnlinks" href="#hl-25-46"> 46&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">device&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;default&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-47">&lt;a class="lnlinks" href="#hl-25-47"> 47&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">mixer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Master&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-48">&lt;a class="lnlinks" href="#hl-25-48"> 48&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">mixer_idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-49">&lt;a class="lnlinks" href="#hl-25-49"> 49&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-50">&lt;a class="lnlinks" href="#hl-25-50"> 50&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-51">&lt;a class="lnlinks" href="#hl-25-51"> 51&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># индикатор WIFI&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-52">&lt;a class="lnlinks" href="#hl-25-52"> 52&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">wireless&lt;/span> &lt;span class="n">_first_&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-53">&lt;a class="lnlinks" href="#hl-25-53"> 53&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># шаблон вывода, можно дополнить&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-54">&lt;a class="lnlinks" href="#hl-25-54"> 54&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># наименованием подключения %essid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-55">&lt;a class="lnlinks" href="#hl-25-55"> 55&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># и ip адресом %ip&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-56">&lt;a class="lnlinks" href="#hl-25-56"> 56&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format_up&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;%quality &lt;/span>&lt;span class="si">%f&lt;/span>&lt;span class="s2">requency&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-57">&lt;a class="lnlinks" href="#hl-25-57"> 57&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format_down&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-58">&lt;a class="lnlinks" href="#hl-25-58"> 58&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-59">&lt;a class="lnlinks" href="#hl-25-59"> 59&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-60">&lt;a class="lnlinks" href="#hl-25-60"> 60&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># состояние заряда батареи&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-61">&lt;a class="lnlinks" href="#hl-25-61"> 61&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">battery&lt;/span> &lt;span class="n">all&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-62">&lt;a class="lnlinks" href="#hl-25-62"> 62&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># шаблон вывода, можно дополнить&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-63">&lt;a class="lnlinks" href="#hl-25-63"> 63&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># оставшимся временем работы %emptytime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-64">&lt;a class="lnlinks" href="#hl-25-64"> 64&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># энергопотреблением %consumption в ваттах&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-65">&lt;a class="lnlinks" href="#hl-25-65"> 65&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">tatus %percentage&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-66">&lt;a class="lnlinks" href="#hl-25-66"> 66&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-67">&lt;a class="lnlinks" href="#hl-25-67"> 67&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># true - показ процента заряда от 0 до 100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-68">&lt;a class="lnlinks" href="#hl-25-68"> 68&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># false - показ процента заряда от 0 до n, с учетом&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-69">&lt;a class="lnlinks" href="#hl-25-69"> 69&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># изношенности аккумулятора&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-70">&lt;a class="lnlinks" href="#hl-25-70"> 70&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">last_full_capacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-71">&lt;a class="lnlinks" href="#hl-25-71"> 71&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format_down&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-72">&lt;a class="lnlinks" href="#hl-25-72"> 72&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">status_chr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c1"># статус подзарядки&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-73">&lt;a class="lnlinks" href="#hl-25-73"> 73&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">status_bat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c1"># статус в режиме работы от батареи&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-74">&lt;a class="lnlinks" href="#hl-25-74"> 74&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">status_unk&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;? UNK&amp;#34;&lt;/span> &lt;span class="c1"># неизвестный статус&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-75">&lt;a class="lnlinks" href="#hl-25-75"> 75&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">status_full&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c1"># статус полного заряда&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-76">&lt;a class="lnlinks" href="#hl-25-76"> 76&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/sys/class/power_supply/BAT&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">/uevent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-77">&lt;a class="lnlinks" href="#hl-25-77"> 77&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-78">&lt;a class="lnlinks" href="#hl-25-78"> 78&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># нижний порог заряда, после которого блок&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-79">&lt;a class="lnlinks" href="#hl-25-79"> 79&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># будет окрашен в &amp;#34;color_bad&amp;#34; (по умолчанию красный)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-80">&lt;a class="lnlinks" href="#hl-25-80"> 80&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># подробнее в man i3status&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-81">&lt;a class="lnlinks" href="#hl-25-81"> 81&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">low_threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-82">&lt;a class="lnlinks" href="#hl-25-82"> 82&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-83">&lt;a class="lnlinks" href="#hl-25-83"> 83&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-84">&lt;a class="lnlinks" href="#hl-25-84"> 84&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># отслеживаемый накопитель&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-85">&lt;a class="lnlinks" href="#hl-25-85"> 85&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">disk&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-86">&lt;a class="lnlinks" href="#hl-25-86"> 86&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># доступные переменные:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-87">&lt;a class="lnlinks" href="#hl-25-87"> 87&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># %used, %percentage_used - занятое пространство&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-88">&lt;a class="lnlinks" href="#hl-25-88"> 88&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># %free, %percentage_free - свободное пространство&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-89">&lt;a class="lnlinks" href="#hl-25-89"> 89&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># %avail, %percentage_avail - доступное пространство&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-90">&lt;a class="lnlinks" href="#hl-25-90"> 90&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># %total - всего&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-91">&lt;a class="lnlinks" href="#hl-25-91"> 91&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; %avail&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-92">&lt;a class="lnlinks" href="#hl-25-92"> 92&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-93">&lt;a class="lnlinks" href="#hl-25-93"> 93&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># будет окрашен в &amp;#34;color_bad&amp;#34; (по умолчанию красный)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-94">&lt;a class="lnlinks" href="#hl-25-94"> 94&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># при достижении нижнего порога менее 10GB доступного пространства&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-95">&lt;a class="lnlinks" href="#hl-25-95"> 95&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">low_threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;10&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-96">&lt;a class="lnlinks" href="#hl-25-96"> 96&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">threshold_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;gbytes_avail&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-97">&lt;a class="lnlinks" href="#hl-25-97"> 97&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format_below_threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; Warning: %avail&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-98">&lt;a class="lnlinks" href="#hl-25-98"> 98&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-99">&lt;a class="lnlinks" href="#hl-25-99"> 99&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-100">&lt;a class="lnlinks" href="#hl-25-100">100&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># миниторинг оперативной памяти&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-101">&lt;a class="lnlinks" href="#hl-25-101">101&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">memory&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-102">&lt;a class="lnlinks" href="#hl-25-102">102&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># доступные переменные:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-103">&lt;a class="lnlinks" href="#hl-25-103">103&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># %total, percentage_total&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-104">&lt;a class="lnlinks" href="#hl-25-104">104&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># %used, percentage_used&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-105">&lt;a class="lnlinks" href="#hl-25-105">105&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># %free, percentage_free&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-106">&lt;a class="lnlinks" href="#hl-25-106">106&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># %available, percentage_available&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-107">&lt;a class="lnlinks" href="#hl-25-107">107&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># %shared, percentage_shared&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-108">&lt;a class="lnlinks" href="#hl-25-108">108&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="si">%u&lt;/span>&lt;span class="s2">sed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-109">&lt;a class="lnlinks" href="#hl-25-109">109&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-110">&lt;a class="lnlinks" href="#hl-25-110">110&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># порог, при котором вывод окрасится в&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-111">&lt;a class="lnlinks" href="#hl-25-111">111&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># желтый (degraded) или красный (critical)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-112">&lt;a class="lnlinks" href="#hl-25-112">112&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># а формат вывода изменится на format_degraded&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-113">&lt;a class="lnlinks" href="#hl-25-113">113&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">threshold_degraded&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;1G&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-114">&lt;a class="lnlinks" href="#hl-25-114">114&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">threshold_critical&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;200M&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-115">&lt;a class="lnlinks" href="#hl-25-115">115&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format_degraded&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;MEMORY &amp;lt; %available&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-116">&lt;a class="lnlinks" href="#hl-25-116">116&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-117">&lt;a class="lnlinks" href="#hl-25-117">117&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-118">&lt;a class="lnlinks" href="#hl-25-118">118&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># температура процессора&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-119">&lt;a class="lnlinks" href="#hl-25-119">119&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">cpu_temperature&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-120">&lt;a class="lnlinks" href="#hl-25-120">120&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">egrees&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-121">&lt;a class="lnlinks" href="#hl-25-121">121&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-122">&lt;a class="lnlinks" href="#hl-25-122">122&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># верхний порог температуры, при достижении которого&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-123">&lt;a class="lnlinks" href="#hl-25-123">123&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># вывод окрасится красным,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-124">&lt;a class="lnlinks" href="#hl-25-124">124&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># и формат изменится на format_above_threshold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-125">&lt;a class="lnlinks" href="#hl-25-125">125&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">max_threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;80&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-126">&lt;a class="lnlinks" href="#hl-25-126">126&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format_above_threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">egrees&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-127">&lt;a class="lnlinks" href="#hl-25-127">127&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/sys/class/thermal/thermal_zone0/temp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-128">&lt;a class="lnlinks" href="#hl-25-128">128&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-129">&lt;a class="lnlinks" href="#hl-25-129">129&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-130">&lt;a class="lnlinks" href="#hl-25-130">130&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># использование центрального процессора&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-131">&lt;a class="lnlinks" href="#hl-25-131">131&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">cpu_usage&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-132">&lt;a class="lnlinks" href="#hl-25-132">132&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># %usage - процентное использование ЦП&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-133">&lt;a class="lnlinks" href="#hl-25-133">133&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># %cpu&amp;lt;N&amp;gt; - начиная с %cpu0 и далее показывает использование ядер&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-134">&lt;a class="lnlinks" href="#hl-25-134">134&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="si">%u&lt;/span>&lt;span class="s2">sage&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-135">&lt;a class="lnlinks" href="#hl-25-135">135&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-136">&lt;a class="lnlinks" href="#hl-25-136">136&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># доступны параметры:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-137">&lt;a class="lnlinks" href="#hl-25-137">137&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># degraded_threshold, окрас в желтый, по умолчанию 90&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-138">&lt;a class="lnlinks" href="#hl-25-138">138&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># max_threshold, окрас в красный, по умолчанию 95&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-139">&lt;a class="lnlinks" href="#hl-25-139">139&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># и кастомные форматы для них&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-140">&lt;a class="lnlinks" href="#hl-25-140">140&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="c1"># format_above_degraded_threshold и format_above_threshold&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-141">&lt;a class="lnlinks" href="#hl-25-141">141&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-142">&lt;a class="lnlinks" href="#hl-25-142">142&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-143">&lt;a class="lnlinks" href="#hl-25-143">143&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># вывод даты и времени по заданному формату&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-144">&lt;a class="lnlinks" href="#hl-25-144">144&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">tztime&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-145">&lt;a class="lnlinks" href="#hl-25-145">145&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2"> %b %Y  %H:%M:%S&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-25-146">&lt;a class="lnlinks" href="#hl-25-146">146&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="py3status">&lt;span class="section-num">5.3.2&lt;/span> py3status&lt;/h4>
&lt;ul>
&lt;li>&lt;code>py3status&lt;/code> &amp;mdash; это расширяемая оболочка для &lt;code>i3status&lt;/code>, написанная на python.&lt;/li>
&lt;li>Сайт: &lt;a href="https://py3status.readthedocs.io/" target="_blank" rel="noopener">https://py3status.readthedocs.io/&lt;/a>.&lt;/li>
&lt;li>Репозиторий: &lt;a href="https://github.com/ultrabug/py3status" target="_blank" rel="noopener">https://github.com/ultrabug/py3status&lt;/a>.&lt;/li>
&lt;li>Можно управлять &lt;code>i3bar&lt;/code>:
&lt;ul>
&lt;li>используя один из доступных модулей, поставляемых с &lt;code>py3status&lt;/code>;&lt;/li>
&lt;li>группировать несколько модулей и автоматически или вручную циклически отображать их отображение;&lt;/li>
&lt;li>писать свои собственные модули и отображать их вывод на панели;&lt;/li>
&lt;li>обрабатывать события кликов на &lt;code>i3bar&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Отображается вверху или внизу экрана.&lt;/li>
&lt;li>Содержит:
&lt;ul>
&lt;li>область с кнопками переключения рабочих областей &lt;em>i3&lt;/em>;&lt;/li>
&lt;li>системную строку;&lt;/li>
&lt;li>системный трей с иконками программ.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Запуск py3status&lt;/p>
&lt;ul>
&lt;li>Запускается вместо &lt;code>i3bar&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-26-1">&lt;a class="lnlinks" href="#hl-26-1">1&lt;/a>&lt;/span>&lt;span class="cl"># ~/.config/i3/config -*- mode: conf-unix; -*-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-26-2">&lt;a class="lnlinks" href="#hl-26-2">2&lt;/a>&lt;/span>&lt;span class="cl">## Start py3status to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-26-3">&lt;a class="lnlinks" href="#hl-26-3">3&lt;/a>&lt;/span>&lt;span class="cl">bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-26-4">&lt;a class="lnlinks" href="#hl-26-4">4&lt;/a>&lt;/span>&lt;span class="cl"> font pango:Iosevka Nerd Font 12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-26-5">&lt;a class="lnlinks" href="#hl-26-5">5&lt;/a>&lt;/span>&lt;span class="cl"> status_command py3status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-26-6">&lt;a class="lnlinks" href="#hl-26-6">6&lt;/a>&lt;/span>&lt;span class="cl"> position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-26-7">&lt;a class="lnlinks" href="#hl-26-7">7&lt;/a>&lt;/span>&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Использует конфигурационный файл от &lt;code>i3status&lt;/code> или собственную конфигурацию.&lt;/li>
&lt;li>Порядок поиска конфигурационного файла:
&lt;ul>
&lt;li>&lt;code>$XDG_CONFIG_HOME/py3status/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3status/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3/i3status.conf&lt;/code>;&lt;/li>
&lt;li>&lt;code>~/.i3status.conf&lt;/code>;&lt;/li>
&lt;li>&lt;code>~/.i3/i3status.conf&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_DIRS/i3status/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/i3status.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="polybar">&lt;span class="section-num">5.3.3&lt;/span> polybar&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>Отдельное приложение для строки статуса.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Применяется для замены &lt;em>i3bar&lt;/em>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://polybar.github.io/" target="_blank" rel="noopener">https://polybar.github.io/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://github.com/polybar/polybar" target="_blank" rel="noopener">https://github.com/polybar/polybar&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Темы для &lt;em>polybar&lt;/em>: &lt;a href="https://github.com/adi1090x/polybar-themes" target="_blank" rel="noopener">https://github.com/adi1090x/polybar-themes&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Одним из побудительных мотивов установки &lt;em>polybar&lt;/em> может быть то, что здесь можно без проблем настроить индикатор раскладки клавиатуры.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-27-1">&lt;a class="lnlinks" href="#hl-27-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nv">USE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;i3wm&amp;#34;&lt;/span> emerge x11-misc/polybar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Конфигурационный файл:&lt;/p>
&lt;ul>
&lt;li>стандартное расположение: &lt;code>~/.config/polybar/config&lt;/code> (&lt;code>$XDG_CONFIG_HOME/polybar/config&lt;/code>);&lt;/li>
&lt;li>использую для локальных настроек только для &lt;em>i3&lt;/em>: &lt;code>~/.config/i3/polybar/config&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Скрипт запуска&lt;/p>
&lt;ul>
&lt;li>Создадим скрипт запуска &lt;code>polybar&lt;/code>.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-28-1">&lt;a class="lnlinks" href="#hl-28-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-2">&lt;a class="lnlinks" href="#hl-28-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># ~/.config/i3/polybar/launch.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-3">&lt;a class="lnlinks" href="#hl-28-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-4">&lt;a class="lnlinks" href="#hl-28-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Terminate already running bar instances&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-5">&lt;a class="lnlinks" href="#hl-28-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">killall -q polybar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-6">&lt;a class="lnlinks" href="#hl-28-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># If all your bars have ipc enabled, you can also use&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-7">&lt;a class="lnlinks" href="#hl-28-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># polybar-msg cmd quit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-8">&lt;a class="lnlinks" href="#hl-28-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-9">&lt;a class="lnlinks" href="#hl-28-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Wait until the processes have been shut down&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-10">&lt;a class="lnlinks" href="#hl-28-10">10&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="k">while&lt;/span> pgrep -u &lt;span class="nv">$UID&lt;/span> -x polybar &amp;gt;/dev/null&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> sleep 1&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-11">&lt;a class="lnlinks" href="#hl-28-11">11&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-12">&lt;a class="lnlinks" href="#hl-28-12">12&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># Launch Polybar, using config location ~/.config/i3/polybar/config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-13">&lt;a class="lnlinks" href="#hl-28-13">13&lt;/a>&lt;/span>&lt;span class="cl">polybar --config&lt;span class="o">=&lt;/span>~/.config/i3/polybar/config i3 &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-14">&lt;a class="lnlinks" href="#hl-28-14">14&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-28-15">&lt;a class="lnlinks" href="#hl-28-15">15&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Polybar launched...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Установим права на исполнение:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-29-1">&lt;a class="lnlinks" href="#hl-29-1">1&lt;/a>&lt;/span>&lt;span class="cl">chmod +x ~/.config/i3/polybar/launch.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Добавим вызов &lt;code>polybar&lt;/code> в файл конфигурации &lt;em>i3&lt;/em>. Конфигурацию для &lt;em>i3bar&lt;/em> следует закомментировать.
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-30-1">&lt;a class="lnlinks" href="#hl-30-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-30-2">&lt;a class="lnlinks" href="#hl-30-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-30-3">&lt;a class="lnlinks" href="#hl-30-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">## Start i3bar to display a workspace bar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-30-4">&lt;a class="lnlinks" href="#hl-30-4"> 4&lt;/a>&lt;/span>&lt;span class="cl"># bar {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-30-5">&lt;a class="lnlinks" href="#hl-30-5"> 5&lt;/a>&lt;/span>&lt;span class="cl"># font pango:Source Sans Pro, FontAwesome 5 Free 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-30-6">&lt;a class="lnlinks" href="#hl-30-6"> 6&lt;/a>&lt;/span>&lt;span class="cl"># status_command i3status --config ~/.config/i3/i3status/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-30-7">&lt;a class="lnlinks" href="#hl-30-7"> 7&lt;/a>&lt;/span>&lt;span class="cl"># position top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-30-8">&lt;a class="lnlinks" href="#hl-30-8"> 8&lt;/a>&lt;/span>&lt;span class="cl"># }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-30-9">&lt;a class="lnlinks" href="#hl-30-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-30-10">&lt;a class="lnlinks" href="#hl-30-10">10&lt;/a>&lt;/span>&lt;span class="cl">## Start polybar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-30-11">&lt;a class="lnlinks" href="#hl-30-11">11&lt;/a>&lt;/span>&lt;span class="cl">exec_always --no-startup-id ~/.config/i3/polybar/launch.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="запуск-приложений">&lt;span class="section-num">5.4&lt;/span> Запуск приложений&lt;/h3>
&lt;ul>
&lt;li>По умолчанию используется &lt;code>dmenu&lt;/code>.&lt;/li>
&lt;li>Можно заменить на &lt;code>rofi&lt;/code> (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/11/19/launcher_rofi/">Запуск приложений. Rofi&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h4 id="rofi">&lt;span class="section-num">5.4.1&lt;/span> rofi&lt;/h4>
&lt;ul>
&lt;li>Используется для запуска приложений, переключения окон.&lt;/li>
&lt;li>&lt;a href="https://github.com/davatorium/rofi" target="_blank" rel="noopener">https://github.com/davatorium/rofi&lt;/a>&lt;/li>
&lt;li>Конфигурация по умолчанию находится в &lt;code>~/.config/rofi/config&lt;/code>.&lt;/li>
&lt;li>Для выбора темы можно использовать команду:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-31-1">&lt;a class="lnlinks" href="#hl-31-1">1&lt;/a>&lt;/span>&lt;span class="cl">rofi-theme-selector
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для запуска программ используется несколько мод:
&lt;ul>
&lt;li>&lt;code>run&lt;/code>: запускать приложения из пути (&lt;code>$PATH&lt;/code>) с возможностью запуска в терминале.&lt;/li>
&lt;li>&lt;code>drun&lt;/code>: запускать приложения на основе desctop-файлов (по стандарту XDG).&lt;/li>
&lt;li>&lt;code>window&lt;/code>: переключение между окнами в оконном менеджере, совместимом со спецификацией EWMH.&lt;/li>
&lt;li>&lt;code>ssh&lt;/code>: подключение к удаленному хосту через &lt;code>ssh&lt;/code>.&lt;/li>
&lt;li>&lt;code>file-browser&lt;/code>: базовый файловый броузер для открытия файлов.&lt;/li>
&lt;li>&lt;code>keys&lt;/code>: список внутренних привязок клавиш.&lt;/li>
&lt;li>&lt;code>script&lt;/code>: использование простых скриптов.&lt;/li>
&lt;li>&lt;code>combi&lt;/code>: объединяет несколько мод в одну.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Использование запятых в файле настроек &lt;em>i3&lt;/em> может привести к проблемам. Лучше использовать файл настроек &lt;em>rofi&lt;/em> или замените запятые символом &lt;code>#&lt;/code>, например, заменить строку
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-32-1">&lt;a class="lnlinks" href="#hl-32-1">1&lt;/a>&lt;/span>&lt;span class="cl">rofi -combi-modi window,drun,ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>на
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-33-1">&lt;a class="lnlinks" href="#hl-33-1">1&lt;/a>&lt;/span>&lt;span class="cl">rofi -combi-modi window#drun#ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Возможная конфигурация в командной строке команды &lt;code>rofi&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-34-1">&lt;a class="lnlinks" href="#hl-34-1">1&lt;/a>&lt;/span>&lt;span class="cl">## ~/.config/i3/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-34-2">&lt;a class="lnlinks" href="#hl-34-2">2&lt;/a>&lt;/span>&lt;span class="cl">set $menu rofi -combi-modi window#drun -show combi -modi combi -show-icons
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Конфигурация с помощью конфигурационного файла (поместим его в &lt;code>~/.config/i3/rofi/config&lt;/code>).&lt;/li>
&lt;/ul>
&lt;h3 id="блокировка-экрана">&lt;span class="section-num">5.5&lt;/span> Блокировка экрана&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для отключения экрана можно использовать DPMS:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="ln" id="hl-35-1">&lt;a class="lnlinks" href="#hl-35-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="na">exec --no-startup-id xset dpms 1800&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Отключается через 30 минут.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="блокировщик-экрана-i3lock">&lt;span class="section-num">5.5.1&lt;/span> Блокировщик экрана &lt;code>i3lock&lt;/code>&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>В качестве блокировщика экрана используем &lt;code>i3lock&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>Установка
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-36-1">&lt;a class="lnlinks" href="#hl-36-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge x11-misc/i3lock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование в конфигурационном файле:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="ln" id="hl-37-1">&lt;a class="lnlinks" href="#hl-37-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="na">set $Locker i3lock --color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">000000 &amp;amp;&amp;amp; sleep 1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>sleep 1&lt;/code> добавляет небольшую задержку, чтобы предотвратить возможное состояние гонки.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Для блокировки экрана после заданного периода времени можно использовать &lt;code>xautolock&lt;/code> или &lt;code>xss-lock&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Использование &lt;code>xautolock&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-38-1">&lt;a class="lnlinks" href="#hl-38-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge x11-misc/xautolock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование в конфигурационном файле:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="ln" id="hl-39-1">&lt;a class="lnlinks" href="#hl-39-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="na">exec --no-startup-id xautolock -time 10 -locker &amp;#34;$Locker&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Блокирует через 10 минут.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование &lt;code>xss-lock&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-40-1">&lt;a class="lnlinks" href="#hl-40-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge x11-misc/xss-lock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Использование в конфигурационном файле:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cfg" data-lang="cfg">&lt;span class="line">&lt;span class="ln" id="hl-41-1">&lt;a class="lnlinks" href="#hl-41-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="na">exec --no-startup-id xss-lock -- &amp;#34;$Locker&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="блокировщик-экрана-i3lock-color">&lt;span class="section-num">5.5.2&lt;/span> Блокировщик экрана &lt;code>i3lock-color&lt;/code>&lt;/h4>
&lt;ul>
&lt;li>Репозиторий: &lt;a href="https://github.com/Raymo111/i3lock-color" target="_blank" rel="noopener">https://github.com/Raymo111/i3lock-color&lt;/a>&lt;/li>
&lt;/ul>
&lt;!--list-separator-->
&lt;ol>
&lt;li>
&lt;p>Дополнительные возможности в i3lock-color&lt;/p>
&lt;ul>
&lt;li>Дополнительное управление цветом элементов.&lt;/li>
&lt;li>Размытие текущего экрана и использование его в качестве фона блокировки.&lt;/li>
&lt;li>Отображение часов в индикаторе.&lt;/li>
&lt;li>Обновление по таймеру, а не при каждом нажатии клавиши.&lt;/li>
&lt;li>Отображение раскладки клавиатуры.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;!--list-separator-->
&lt;ol start="2">
&lt;li>
&lt;p>Установка&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;ul>
&lt;li>Порт находится в оверлее &lt;code>guru&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-42-1">&lt;a class="lnlinks" href="#hl-42-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge x11-misc/i3lock-color
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="приложения">&lt;span class="section-num">6&lt;/span> Приложения&lt;/h2>
&lt;h3 id="снимки-экрана">&lt;span class="section-num">6.1&lt;/span> Снимки экрана&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для скриншотов можно использовать &lt;a href="https://github.com/resurrecting-open-source-projects/scrot" target="_blank" rel="noopener">scrot&lt;/a>.&lt;/p>
&lt;ul>
&lt;li>Gentoo
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-43-1">&lt;a class="lnlinks" href="#hl-43-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge media-gfx/scrot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Добавим в конфигурационный файл:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-44-1">&lt;a class="lnlinks" href="#hl-44-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">## Screenshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-44-2">&lt;a class="lnlinks" href="#hl-44-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-44-3">&lt;a class="lnlinks" href="#hl-44-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">## Screenshot active display
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-44-4">&lt;a class="lnlinks" href="#hl-44-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">bindsym --release Print exec --no-startup-id scrot &amp;#39;%Y-%m-%d_%H-%M-%S_$wx$h.png&amp;#39; -e &amp;#39;mv $f `xdg-user-dir PICTURES` 2&amp;gt;/dev/null&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-44-5">&lt;a class="lnlinks" href="#hl-44-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-44-6">&lt;a class="lnlinks" href="#hl-44-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">## Screenshot current window
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-44-7">&lt;a class="lnlinks" href="#hl-44-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">bindsym --release $mod+Print exec --no-startup-id scrot -u &amp;#39;%Y-%m-%d_%H-%M-%S_$wx$h.png&amp;#39; -e &amp;#39;mv $f `xdg-user-dir PICTURES` 2&amp;gt;/dev/null&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-44-8">&lt;a class="lnlinks" href="#hl-44-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-44-9">&lt;a class="lnlinks" href="#hl-44-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">## Screenshot selected region
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-44-10">&lt;a class="lnlinks" href="#hl-44-10">10&lt;/a>&lt;/span>&lt;span class="cl">bindsym --release $mod+Shift+Print exec --no-startup-id scrot -s &amp;#39;%Y-%m-%d_%H-%M-%S_$wx$h.png&amp;#39; -e &amp;#39;mv $f `xdg-user-dir PICTURES` 2&amp;gt;/dev/null&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>По клавише &lt;code>PrtScr&lt;/code> делается скриншот.&lt;/li>
&lt;li>По клавише &lt;code>mod&lt;/code> + &lt;code>PrtScr&lt;/code> делается скриншот активного окна.&lt;/li>
&lt;li>По клавише &lt;code>mod&lt;/code> + &lt;code>Shift&lt;/code> + &lt;code>PrtScr&lt;/code> предлагается выделить область экрана, скриншот которой следует сделать.&lt;/li>
&lt;li>Скриншоты переносятся в каталог $XDG_PICTURES_DIR (обычно &lt;code>~/Pictures&lt;/code> или &lt;code>~/Изображения&lt;/code>) (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/09/16/xdg-user-directories/">XDG. Пользовательские каталоги&lt;/a>).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="совместимость-приложений">&lt;span class="section-num">7&lt;/span> Совместимость приложений&lt;/h2>
&lt;h3 id="java">&lt;span class="section-num">7.1&lt;/span> Java&lt;/h3>
&lt;h4 id="серое-окно-приложения-не-меняют-размер-с-помощью-wm-меню-сразу-закрываются">&lt;span class="section-num">7.1.1&lt;/span> Серое окно, приложения не меняют размер с помощью WM, меню сразу закрываются&lt;/h4>
&lt;ul>
&lt;li>В стандартных тулкитах для Java жестко зашит список оконных менеджеров.&lt;/li>
&lt;li>Следует установить переменную окружения:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-45-1">&lt;a class="lnlinks" href="#hl-45-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">_JAVA_AWT_WM_NONREPARENTING&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="меню-в-приложениях-плавает-отдельно-им-невозможно-пользоваться">&lt;span class="section-num">7.1.2&lt;/span> Меню в приложениях плавает отдельно, им невозможно пользоваться&lt;/h4>
&lt;ul>
&lt;li>В выпусках Java до версии 9 GTK интерфейс ориентирован на GTK2, в последующих версиях на GTK3.&lt;/li>
&lt;li>GTK LookAndFeel может работать с GTK версий 2, 2.2 и 3.&lt;/li>
&lt;li>По умолчанию используется GTK3.&lt;/li>
&lt;li>Следует явно задать более старую версию:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-46-1">&lt;a class="lnlinks" href="#hl-46-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">JAVA_TOOL_OPTIONS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;-Djdk.gtk.version=2.2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul></description></item><item><title>Мультимедиа сервер PipeWire</title><link>https://yamadharma.github.io/ru/post/2021/04/28/pipewire-multimedia-server/</link><pubDate>Wed, 28 Apr 2021 16:28:00 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2021/04/28/pipewire-multimedia-server/</guid><description>&lt;p>PipeWire есть новый аудио и видео сервер. В основном для Wayland. Должен заменить другие видео-серверы.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#настройка-пользовательской-сессии">&lt;span class="section-num">3&lt;/span> Настройка пользовательской сессии&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#права-пользователя">&lt;span class="section-num">3.1&lt;/span> Права пользователя&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-запуска-на-уровне-пользователя">&lt;span class="section-num">3.2&lt;/span> Настройка запуска на уровне пользователя&lt;/a>&lt;/li>
&lt;li>&lt;a href="#настройка-запуска-на-уровне-системы">&lt;span class="section-num">3.3&lt;/span> Настройка запуска на уровне системы&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#использование-с-другими-серверами">&lt;span class="section-num">4&lt;/span> Использование с другими серверами&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#замена-pulseaudio">&lt;span class="section-num">4.1&lt;/span> Замена PulseAudio&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#pulseaudio-с-поддержкой-запуска-как-демон">&lt;span class="section-num">4.1.1&lt;/span> PulseAudio с поддержкой запуска как демон&lt;/a>&lt;/li>
&lt;li>&lt;a href="#pulseaudio-без-поддержки-запуска-кок-демон">&lt;span class="section-num">4.1.2&lt;/span> PulseAudio без поддержки запуска кок демон&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#замена-jack">&lt;span class="section-num">4.2&lt;/span> Замена Jack&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#проверка-работы">&lt;span class="section-num">5&lt;/span> Проверка работы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация">&lt;span class="section-num">6&lt;/span> Конфигурация&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#конфигурационные-файлы">&lt;span class="section-num">6.1&lt;/span> Конфигурационные файлы&lt;/a>&lt;/li>
&lt;li>&lt;a href="#профили-устройств">&lt;span class="section-num">6.2&lt;/span> Профили устройств&lt;/a>&lt;/li>
&lt;li>&lt;a href="#изменение-частоты-дискретизации">&lt;span class="section-num">6.3&lt;/span> Изменение частоты дискретизации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>Репозиторий проекта: &lt;a href="https://gitlab.freedesktop.org/pipewire/pipewire" target="_blank" rel="noopener">https://gitlab.freedesktop.org/pipewire/pipewire&lt;/a>&lt;/li>
&lt;li>Wiki проекта: &lt;a href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/home" target="_blank" rel="noopener">https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/home&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="установка">&lt;span class="section-num">2&lt;/span> Установка&lt;/h2>
&lt;h3 id="gentoo">&lt;span class="section-num">2.1&lt;/span> Gentoo&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Чтобы использовать PipeWire вместо PulseAudio для звукового сервера, включите USE-флаг &lt;code>USE=sound-server&lt;/code> для &lt;code>media-video/pipewire&lt;/code> и отключите USE-флаг &lt;code>USE=daemon&lt;/code> для &lt;code>media-sound/pulseaudio&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Добавьте в файл &lt;code>/etc/portage/package.use&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1">1&lt;/a>&lt;/span>&lt;span class="cl">media-video/pipewire sound-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-2">&lt;a class="lnlinks" href="#hl-0-2">2&lt;/a>&lt;/span>&lt;span class="cl">media-sound/pulseaudio -daemon
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Удалите &lt;code>media-sound/pulseaudio-daemon&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge -Cv media-sound/pulseaudio-daemon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-2">&lt;a class="lnlinks" href="#hl-1-2">2&lt;/a>&lt;/span>&lt;span class="cl">emerge -Cv media-sound/paprefs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Установить само приложение:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-2-1">&lt;a class="lnlinks" href="#hl-2-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge media-video/pipewire
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-2">&lt;a class="lnlinks" href="#hl-2-2">2&lt;/a>&lt;/span>&lt;span class="cl">emerge media-video/wireplumber
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="настройка-пользовательской-сессии">&lt;span class="section-num">3&lt;/span> Настройка пользовательской сессии&lt;/h2>
&lt;h3 id="права-пользователя">&lt;span class="section-num">3.1&lt;/span> Права пользователя&lt;/h3>
&lt;ul>
&lt;li>Желательно добавить пользователя в группу &lt;code>audio&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-3-1">&lt;a class="lnlinks" href="#hl-3-1">1&lt;/a>&lt;/span>&lt;span class="cl">usermod -aG audio &amp;lt;user&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-запуска-на-уровне-пользователя">&lt;span class="section-num">3.2&lt;/span> Настройка запуска на уровне пользователя&lt;/h3>
&lt;ul>
&lt;li>По умолчанию &lt;em>PipeWire&lt;/em> настроен на использование &lt;em>systemd&lt;/em>.&lt;/li>
&lt;li>Следует настроить его запуск для пользователя.&lt;/li>
&lt;li>Флаг &lt;code>--now&lt;/code> позволяет одновременно активировать и запускать сервис.&lt;/li>
&lt;li>Отключите &lt;code>pulseaudio&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-4-1">&lt;a class="lnlinks" href="#hl-4-1">1&lt;/a>&lt;/span>&lt;span class="cl">systemctl --user disable --now pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Для каждого пользователя можно установить активацию по обращению к сокету:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-5-1">&lt;a class="lnlinks" href="#hl-5-1">1&lt;/a>&lt;/span>&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.socket pipewire-pulse.socket
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>В качестве альтернативы можно сразу запускать необходимый процесс:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-6-1">&lt;a class="lnlinks" href="#hl-6-1">1&lt;/a>&lt;/span>&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.service pipewire-pulse.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Отключите демон сессии &lt;code>pipewire-media-session.service&lt;/code> и запустите &lt;code>wireplumber&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-7-1">&lt;a class="lnlinks" href="#hl-7-1">1&lt;/a>&lt;/span>&lt;span class="cl">systemctl --user disable pipewire-media-session.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-2">&lt;a class="lnlinks" href="#hl-7-2">2&lt;/a>&lt;/span>&lt;span class="cl">systemctl --user --force &lt;span class="nb">enable&lt;/span> --now wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="настройка-запуска-на-уровне-системы">&lt;span class="section-num">3.3&lt;/span> Настройка запуска на уровне системы&lt;/h3>
&lt;ul>
&lt;li>Под пользователем &lt;code>root&lt;/code> можно настроить запуск сервисов на уровне системы, заменив &lt;code>--user&lt;/code> на &lt;code>--global&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-8-1">&lt;a class="lnlinks" href="#hl-8-1">1&lt;/a>&lt;/span>&lt;span class="cl">systemctl --global &lt;span class="nb">enable&lt;/span> pipewire.socket pipewire-pulse.socket
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-8-2">&lt;a class="lnlinks" href="#hl-8-2">2&lt;/a>&lt;/span>&lt;span class="cl">systemctl --global --force &lt;span class="nb">enable&lt;/span> wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>При выборе этого варианта службы должны быть запущены вручную под пользователем пользователем.&lt;/li>
&lt;/ul>
&lt;h2 id="использование-с-другими-серверами">&lt;span class="section-num">4&lt;/span> Использование с другими серверами&lt;/h2>
&lt;h3 id="замена-pulseaudio">&lt;span class="section-num">4.1&lt;/span> Замена PulseAudio&lt;/h3>
&lt;h4 id="pulseaudio-с-поддержкой-запуска-как-демон">&lt;span class="section-num">4.1.1&lt;/span> PulseAudio с поддержкой запуска как демон&lt;/h4>
&lt;ul>
&lt;li>Ранее &lt;em>PulseAudio&lt;/em> собиралась только с поддержкой запуска как демон.&lt;/li>
&lt;li>Если &lt;em>PulseAudio&lt;/em> настроено с поддержкой запуска как демона&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>, то его необходимо отключить:
&lt;ul>
&lt;li>запретить запуск &lt;code>pulseaudio&lt;/code>;&lt;/li>
&lt;li>отключить запуск в файле конфигурации:
&lt;ul>
&lt;li>отредактируйте файл &lt;code>/etc/pulse/daemon.conf&lt;/code> и замените &lt;code>daemonize&lt;/code> на &lt;code>daemonize = no&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Одновременно отключим &lt;em>PulseAudio&lt;/em> и включим &lt;em>PipeWire&lt;/em> для каждого пользователя:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-9-1">&lt;a class="lnlinks" href="#hl-9-1">1&lt;/a>&lt;/span>&lt;span class="cl">systemctl --user disable --now pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-2">&lt;a class="lnlinks" href="#hl-9-2">2&lt;/a>&lt;/span>&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.socket pipewire-pulse.socket wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно замаскировать PulseAudio (но он всё равно может стартовать автоматически):
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-10-1">&lt;a class="lnlinks" href="#hl-10-1">1&lt;/a>&lt;/span>&lt;span class="cl">systemctl --user mask pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Кроме того, рекомендуется удалить файлы, оставшиеся от PulseAudio:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-11-1">&lt;a class="lnlinks" href="#hl-11-1">1&lt;/a>&lt;/span>&lt;span class="cl">rm -r ~/.config/pulse/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="pulseaudio-без-поддержки-запуска-кок-демон">&lt;span class="section-num">4.1.2&lt;/span> PulseAudio без поддержки запуска кок демон&lt;/h4>
&lt;ul>
&lt;li>Теперь &lt;em>PulseAudio&lt;/em> рекомендуется собирать без поддержки демона.&lt;/li>
&lt;li>В этом случае всё работает сразу.&lt;/li>
&lt;li>Напомним, что на уровне пользователя следует подключить &lt;code>pipewire-pulse.socket&lt;/code>:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-12-1">&lt;a class="lnlinks" href="#hl-12-1">1&lt;/a>&lt;/span>&lt;span class="cl">systemctl --user disable --now pulseaudio.socket pulseaudio.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-12-2">&lt;a class="lnlinks" href="#hl-12-2">2&lt;/a>&lt;/span>&lt;span class="cl">systemctl --user &lt;span class="nb">enable&lt;/span> --now pipewire.socket pipewire-pulse.socket wireplumber.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="замена-jack">&lt;span class="section-num">4.2&lt;/span> Замена Jack&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>Для маршрутизации клиентов Jack через PipeWire в настоящее время
предпочтительно запускать их через &lt;code>pw-jack&lt;/code>, который использует
&lt;code>LD_PRELOAD&lt;/code> для использования библиотек PipeWire вместо Jack, например:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-13-1">&lt;a class="lnlinks" href="#hl-13-1">1&lt;/a>&lt;/span>&lt;span class="cl">pw-jack &amp;lt;application&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Можно задать собственный размер буфера, установив размер_буфера/частота_дискретизации:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-14-1">&lt;a class="lnlinks" href="#hl-14-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nv">PIPEWIRE_LATENCY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;128/48000&amp;#34;&lt;/span> pw-jack &amp;lt;application&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="проверка-работы">&lt;span class="section-num">5&lt;/span> Проверка работы&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Для &lt;em>PipeWire&lt;/em> возможно посмотреть информацию по серверу &lt;code>pipewire&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-15-1">&lt;a class="lnlinks" href="#hl-15-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="nv">LANG&lt;/span>&lt;span class="o">=&lt;/span>C pactl info &lt;span class="p">|&lt;/span> grep &lt;span class="s2">&amp;#34;Server Name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>В результате должна присутствовать строчка типа такой:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-16-1">&lt;a class="lnlinks" href="#hl-16-1">1&lt;/a>&lt;/span>&lt;span class="cl">Server Name: PulseAudio &lt;span class="o">(&lt;/span>on PipeWire 0.3.56&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация">&lt;span class="section-num">6&lt;/span> Конфигурация&lt;/h2>
&lt;h3 id="конфигурационные-файлы">&lt;span class="section-num">6.1&lt;/span> Конфигурационные файлы&lt;/h3>
&lt;ul>
&lt;li>Конфигурация, идущая в комплекте с дистрибутивом, находится в &lt;code>/usr/share/pipewire&lt;/code>.&lt;/li>
&lt;li>Для изменения параметров скопируйте файлы конфигурации в:
&lt;ul>
&lt;li>&lt;code>/etc/pipewire&lt;/code>: уровень системы;&lt;/li>
&lt;li>&lt;code>~/.config/pipewire&lt;/code>: уровень пользователя.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="профили-устройств">&lt;span class="section-num">6.2&lt;/span> Профили устройств&lt;/h3>
&lt;ul>
&lt;li>Профили устройств хранятся в каталоге &lt;code>~/.local/state/pipewire/media-session.d/&lt;/code>.&lt;/li>
&lt;li>При запуске в первый раз с подключёнными внешними устройствами (например, usb-устройствами), профили для них не создаются. Необходимо их переподключить в этом случае.&lt;/li>
&lt;/ul>
&lt;h3 id="изменение-частоты-дискретизации">&lt;span class="section-num">6.3&lt;/span> Изменение частоты дискретизации&lt;/h3>
&lt;ul>
&lt;li>По умолчанию &lt;em>PipeWire&lt;/em> глобально устанавливает частоту дискретизации равную 48 КГц.&lt;/li>
&lt;li>Для изменения нужно отредактировать строку &lt;code>default.clock.rate = 48000&lt;/code> в файле конфигурации &lt;code>/etc/pipewire/pipewire.conf&lt;/code> или &lt;code>~/.config/pipewire/pipewire.conf&lt;/code>.&lt;/li>
&lt;li>Например, если вы хотите частоту дискретизации в 192 КГц, раскомментируйте строку и поменяйте её на &lt;code>default.clock.rate = 192000&lt;/code>.&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>В Gentoo это означает, что &lt;code>pulseaudio&lt;/code> скомпилирован с флагом &lt;code>daemon&lt;/code>.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Переход на Sway</title><link>https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/</link><pubDate>Thu, 10 Sep 2020 10:33:15 +0300</pubDate><guid>https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/</guid><description>&lt;p>Решил попробовать &lt;a href="https://wayland.freedesktop.org/" target="_blank" rel="noopener">Wayland&lt;/a>. По этой причине пришлось &lt;a href="http://way-cooler.org/blog/2020/01/09/way-cooler-post-mortem.html" target="_blank" rel="noopener">перейти&lt;/a> с &lt;a href="https://awesomewm.org/" target="_blank" rel="noopener">awesome&lt;/a> на &lt;a href="https://swaywm.org/" target="_blank" rel="noopener">sway&lt;/a>.&lt;/p>
&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Содержание&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#установка-sway">&lt;span class="section-num">2&lt;/span> Установка &lt;code>sway&lt;/code>&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#репозитории-gentoo">&lt;span class="section-num">2.1&lt;/span> Репозитории &lt;code>gentoo&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#первоначальная-конфигурация">&lt;span class="section-num">3&lt;/span> Первоначальная конфигурация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#конфигурация-устройств-ввода">&lt;span class="section-num">4&lt;/span> Конфигурация устройств ввода&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/a>&lt;/li>
&lt;li>&lt;a href="#раскладка-клавиатуры">&lt;span class="section-num">4.2&lt;/span> Раскладка клавиатуры&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#примеры-модификации">&lt;span class="section-num">4.2.1&lt;/span> Примеры модификации&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#комбинации-клавиш">&lt;span class="section-num">5&lt;/span> Комбинации клавиш&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#режимы-и-управление-окнами">&lt;span class="section-num">5.1&lt;/span> Режимы и управление окнами&lt;/a>&lt;/li>
&lt;li>&lt;a href="#разное">&lt;span class="section-num">5.2&lt;/span> Разное&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#совместимость-приложений">&lt;span class="section-num">6&lt;/span> Совместимость приложений&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="общая-информация">&lt;span class="section-num">1&lt;/span> Общая информация&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://swaywm.org/" target="_blank" rel="noopener">https://swaywm.org/&lt;/a>&lt;/li>
&lt;li>Создавался для замены i3 (см. &lt;a href="https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/">Window manager i3&lt;/a>) под Wayland.&lt;/li>
&lt;/ul>
&lt;h2 id="установка-sway">&lt;span class="section-num">2&lt;/span> Установка &lt;code>sway&lt;/code>&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1">1&lt;/a>&lt;/span>&lt;span class="cl">emerge -v gui-wm/sway
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="репозитории-gentoo">&lt;span class="section-num">2.1&lt;/span> Репозитории &lt;code>gentoo&lt;/code>&lt;/h3>
&lt;ul>
&lt;li>Программы для Wayland есть как в основном репозитории, так и дополнительных.&lt;/li>
&lt;li>Хочу порекомендовать для просмотра следующие репозитории (см. &lt;a href="https://yamadharma.github.io/ru/post/2023/10/01/gentoo-additional-repositories/">Gentoo. Дополнительные репозитории&lt;/a>):
&lt;ul>
&lt;li>&lt;a href="https://github.com/epsilon-0/wayland-desktop" target="_blank" rel="noopener">wayland-desktop&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> wayland-desktop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-2">&lt;a class="lnlinks" href="#hl-1-2">2&lt;/a>&lt;/span>&lt;span class="cl">emaint sync --repo wayland-desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;a href="https://wiki.gentoo.org/wiki/Project:GURU" target="_blank" rel="noopener">guru&lt;/a>&lt;/li>
&lt;/ul>
&lt;!--listend-->
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-2-1">&lt;a class="lnlinks" href="#hl-2-1">1&lt;/a>&lt;/span>&lt;span class="cl">eselect repository &lt;span class="nb">enable&lt;/span> guru
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-2-2">&lt;a class="lnlinks" href="#hl-2-2">2&lt;/a>&lt;/span>&lt;span class="cl">emaint sync --repo guru
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="первоначальная-конфигурация">&lt;span class="section-num">3&lt;/span> Первоначальная конфигурация&lt;/h2>
&lt;ul>
&lt;li>Файл конфигурации ищется в следующем порядке:
&lt;ul>
&lt;li>&lt;code>~/.sway/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/sway/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>~/.i3/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>$XDG_CONFIG_HOME/i3/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/sway/config&lt;/code>;&lt;/li>
&lt;li>&lt;code>/etc/i3/config&lt;/code>.&lt;/li>
&lt;li>Переменная окружения &lt;code>$XDG_CONFIG_HOME&lt;/code> по умолчанию установлена в &lt;code>~/.config/&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Пакет устанавливает глобальную конфигурацию в &lt;code>/etc/sway/config&lt;/code>.&lt;/li>
&lt;li>При желании внести изменение в конфигурацию можно скопировать файл глобальной конфигурации в локальную:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-3-1">&lt;a class="lnlinks" href="#hl-3-1">1&lt;/a>&lt;/span>&lt;span class="cl">mkdir -p ~/.config/sway
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-3-2">&lt;a class="lnlinks" href="#hl-3-2">2&lt;/a>&lt;/span>&lt;span class="cl">cp /etc/sway/config ~/.config/sway/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="конфигурация-устройств-ввода">&lt;span class="section-num">4&lt;/span> Конфигурация устройств ввода&lt;/h2>
&lt;h3 id="общая-информация">&lt;span class="section-num">4.1&lt;/span> Общая информация&lt;/h3>
&lt;ul>
&lt;li>Сводка доступных опций:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-4-1">&lt;a class="lnlinks" href="#hl-4-1">1&lt;/a>&lt;/span>&lt;span class="cl">man &lt;span class="m">5&lt;/span> sway-input
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Список устройств ввода можно получить, запустив:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-5-1">&lt;a class="lnlinks" href="#hl-5-1">1&lt;/a>&lt;/span>&lt;span class="cl">swaymsg -t get_inputs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Идентификатор устройства используется в файле конфигурации:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-6-1">&lt;a class="lnlinks" href="#hl-6-1">1&lt;/a>&lt;/span>&lt;span class="cl">input &amp;lt;identifier&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-6-2">&lt;a class="lnlinks" href="#hl-6-2">2&lt;/a>&lt;/span>&lt;span class="cl"># ...config options...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-6-3">&lt;a class="lnlinks" href="#hl-6-3">3&lt;/a>&lt;/span>&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Можно иметь несколько конфигураций для разных устройств:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="ln" id="hl-7-1">&lt;a class="lnlinks" href="#hl-7-1">1&lt;/a>&lt;/span>&lt;span class="cl"># default layout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-2">&lt;a class="lnlinks" href="#hl-7-2">2&lt;/a>&lt;/span>&lt;span class="cl">input &amp;#34;1:1:AT_Translated_Set_2_keyboard&amp;#34; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-3">&lt;a class="lnlinks" href="#hl-7-3">3&lt;/a>&lt;/span>&lt;span class="cl"> xkb_layout us
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-4">&lt;a class="lnlinks" href="#hl-7-4">4&lt;/a>&lt;/span>&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-5">&lt;a class="lnlinks" href="#hl-7-5">5&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-6">&lt;a class="lnlinks" href="#hl-7-6">6&lt;/a>&lt;/span>&lt;span class="cl"># custom layout for an external keyboard
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-7">&lt;a class="lnlinks" href="#hl-7-7">7&lt;/a>&lt;/span>&lt;span class="cl">input &amp;#34;1452:591:Custom_Keyboard&amp;#34; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-8">&lt;a class="lnlinks" href="#hl-7-8">8&lt;/a>&lt;/span>&lt;span class="cl"> xkb_layout YourCustomLayout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-7-9">&lt;a class="lnlinks" href="#hl-7-9">9&lt;/a>&lt;/span>&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="раскладка-клавиатуры">&lt;span class="section-num">4.2&lt;/span> Раскладка клавиатуры&lt;/h3>
&lt;ul>
&lt;li>Информация по параметрам:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="ln" id="hl-8-1">&lt;a class="lnlinks" href="#hl-8-1">1&lt;/a>&lt;/span>&lt;span class="cl">man &lt;span class="m">7&lt;/span> xkeyboard-config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Конфигурация раскладки:
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="ln" id="hl-9-1">&lt;a class="lnlinks" href="#hl-9-1">1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1"># or input &amp;lt;identifier&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-2">&lt;a class="lnlinks" href="#hl-9-2">2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">input&lt;/span> &lt;span class="s2">&amp;#34;type:keyboard&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-3">&lt;a class="lnlinks" href="#hl-9-3">3&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">xkb_layout&lt;/span> &lt;span class="n">us&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">de&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-4">&lt;a class="lnlinks" href="#hl-9-4">4&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">xkb_variant&lt;/span> &lt;span class="p">,&lt;/span>&lt;span class="n">nodeadkeys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-5">&lt;a class="lnlinks" href="#hl-9-5">5&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="n">xkb_options&lt;/span> &lt;span class="n">grp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">alt_shift_toggle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-9-6">&lt;a class="lnlinks" href="#hl-9-6">6&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Настройка модификаций доступна через &lt;code>xkb_options&lt;/code>.&lt;/li>
&lt;li>Варианты можно найти в &lt;code>/usr/share/X11/xkb/symbols/{altwin,capslock,compose,ctrl}&lt;/code>, соответствующее имя параметра находится в &lt;code>/usr/share/X11/xkb/rules/base&lt;/code>.&lt;/li>
&lt;li>Для команд &lt;code>xkb_layout&lt;/code>, &lt;code>xkb_model&lt;/code>, &lt;code>xkb_options&lt;/code>, &lt;code>xkb_rules&lt;/code>, &lt;code>xkb_variant&lt;/code> несколько вариантов разделяются запятыми.&lt;/li>
&lt;li>Чтобы активировать несколько опций, необходимо перечислить их через запятую, например &lt;code>xkb_options caps:escape,altwin:swap_lalt_lwin;&lt;/code>.&lt;/li>
&lt;li>Если записать опции в несколько строк, будет действовать только последняя.&lt;/li>
&lt;/ul>
&lt;h4 id="примеры-модификации">&lt;span class="section-num">4.2.1&lt;/span> Примеры модификации&lt;/h4>
&lt;ul>
&lt;li>&lt;em>Caps Lock&lt;/em> работает как &lt;em>Escape&lt;/em>: &lt;code>xkb_options caps:escape&lt;/code>.&lt;/li>
&lt;li>Поменять местами &lt;em>Escape&lt;/em> и &lt;em>Caps Lock&lt;/em>: &lt;code>xkb_options caps:swapescape&lt;/code>.&lt;/li>
&lt;li>&lt;em>Caps Lock&lt;/em> меняется с &lt;em>Control&lt;/em>: &lt;code>xkb_options ctrl:nocaps&lt;/code>.&lt;/li>
&lt;li>&lt;em>Caps Lock&lt;/em> становится дополнительным &lt;em>Control&lt;/em>: &lt;code>xkb_options caps:ctrl_modifier&lt;/code>.&lt;/li>
&lt;li>Поменять местами &lt;em>левый Alt&lt;/em> и &lt;em>Super&lt;/em>, установить &lt;em>Caps Lock&lt;/em> как &lt;em>Escape&lt;/em>: &lt;code>xkb_options altwin:swap_lalt_lwin,caps:escape&lt;/code>.&lt;/li>
&lt;li>&lt;em>Menu&lt;/em> становится дополнительным &lt;em>Super&lt;/em>: &lt;code>xkb_options altwin:menu_win&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="комбинации-клавиш">&lt;span class="section-num">5&lt;/span> Комбинации клавиш&lt;/h2>
&lt;h3 id="режимы-и-управление-окнами">&lt;span class="section-num">5.1&lt;/span> Режимы и управление окнами&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Клавиатурная комбинация&lt;/th>
&lt;th>Описание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>Mod + Shift + Space&lt;/code>&lt;/td>
&lt;td>Переключение окна в плавающий режим и обратно&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + Shift + minus&lt;/code>&lt;/td>
&lt;td>Отправка окна в блокнот (scratchpad)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + minus&lt;/code>&lt;/td>
&lt;td>Сворачивание, вызов окна в блокноте (scratchpad)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + b&lt;/code>&lt;/td>
&lt;td>Горизонтальное разделение&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + v&lt;/code>&lt;/td>
&lt;td>Вертикальное разделение&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + e&lt;/code>&lt;/td>
&lt;td>Переключить разделение&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + s&lt;/code>&lt;/td>
&lt;td>Стековое размещение (stacking layout)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + w&lt;/code>&lt;/td>
&lt;td>Размещение с табами (tabbed layout)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + r&lt;/code>&lt;/td>
&lt;td>И изменение размеров, используем &lt;code>h&lt;/code>, &lt;code>j&lt;/code>, &lt;code>k&lt;/code> , &lt;code>l&lt;/code> или ←,→,↑,↓, выход из режима &amp;mdash; &lt;code>Esc&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + {←,→,↑,↓}&lt;/code> или &lt;code>Mod + {h,j,k,l}&lt;/code>&lt;/td>
&lt;td>Перемещение по окнам&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + Shift + {←,→,↑,↓}&lt;/code> или &lt;code>Mod + Shift + {h,j,k,l}&lt;/code>&lt;/td>
&lt;td>Меняет позицию окна&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + {0..9}&lt;/code>&lt;/td>
&lt;td>Переключение между workspace&amp;rsquo;ами&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + Shift + {0..9}&lt;/code>&lt;/td>
&lt;td>Перемещение окна на заданный workspace&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + =Shift + =q&lt;/code>&lt;/td>
&lt;td>Закрыть текущее окно&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + =f&lt;/code>&lt;/td>
&lt;td>Раскрыть окно во весь экран или свернуть его обратно&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="разное">&lt;span class="section-num">5.2&lt;/span> Разное&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Клавиатурная комбинация&lt;/th>
&lt;th>Описание&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>Mod + Enter&lt;/code>&lt;/td>
&lt;td>открыть новый терминал&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + d&lt;/code>&lt;/td>
&lt;td>запустить программу&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + =Shift + =c&lt;/code>&lt;/td>
&lt;td>перечитать конфигурацию &lt;code>sway&lt;/code> (перестартовать)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Mod + Shift + e&lt;/code>&lt;/td>
&lt;td>Выйти из &lt;code>sway&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="совместимость-приложений">&lt;span class="section-num">6&lt;/span> Совместимость приложений&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://yamadharma.github.io/ru/post/2024/06/20/sway-application-compatibility/">Sway. Совместимость приложений&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>amd64 и flash</title><link>https://yamadharma.github.io/ru/post/2006/09/24/amd64-i-flash/</link><pubDate>Sun, 24 Sep 2006 15:19:00 +0000</pubDate><guid>https://yamadharma.github.io/ru/post/2006/09/24/amd64-i-flash/</guid><description>&lt;p>Попробовал использовать сначала &lt;code>nspluginwrapper&lt;/code>. Работает хорошо. Через &lt;code>qemu&lt;/code>. Но &lt;code>qemu&lt;/code>, откомпилированный &lt;code>gcc-4&lt;/code>, не работает. Поэтому пришлось перейти на &lt;code>gnash&lt;/code>. Snapshot августовский не откомпилировался. Июньский нормально, но нет звука. Поставил из cvs &amp;mdash; проблемы с прозрачностью. Звука тоже нет.&lt;/p></description></item><item><title>Monit и gentoo rc-scripts</title><link>https://yamadharma.github.io/ru/post/2006/09/17/monit-i-gentoo-rc-scripts/</link><pubDate>Sun, 17 Sep 2006 20:55:00 +0000</pubDate><guid>https://yamadharma.github.io/ru/post/2006/09/17/monit-i-gentoo-rc-scripts/</guid><description>&lt;p>При использовании monit для перезапуска rc-скриптов в gentoo использовал killall и опцию zap.&lt;br>
Нашёл это-же решение, но оформленное красивее.&lt;/p>
&lt;p>Это файл /etc/monit.d/bin/kickservice&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="ln" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1"> 1&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">##!/bin/sh &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-2">&lt;a class="lnlinks" href="#hl-0-2"> 2&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## kickservice by Eric Radman &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-3">&lt;a class="lnlinks" href="#hl-0-3"> 3&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## Script used by monit to kill off and restart daemons &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-4">&lt;a class="lnlinks" href="#hl-0-4"> 4&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="c1">## /etc/monit.d/bin/kickservice &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-5">&lt;a class="lnlinks" href="#hl-0-5"> 5&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-6">&lt;a class="lnlinks" href="#hl-0-6"> 6&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="k">function&lt;/span> stop &lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-7">&lt;a class="lnlinks" href="#hl-0-7"> 7&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-8">&lt;a class="lnlinks" href="#hl-0-8"> 8&lt;/a>&lt;/span>&lt;span class="cl">     /etc/init.d/&lt;span class="nv">$1&lt;/span> pause
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-9">&lt;a class="lnlinks" href="#hl-0-9"> 9&lt;/a>&lt;/span>&lt;span class="cl">     /etc/init.d/&lt;span class="nv">$1&lt;/span> zap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-10">&lt;a class="lnlinks" href="#hl-0-10">10&lt;/a>&lt;/span>&lt;span class="cl">     &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$2&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;kill&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-11">&lt;a class="lnlinks" href="#hl-0-11">11&lt;/a>&lt;/span>&lt;span class="cl">         &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-12">&lt;a class="lnlinks" href="#hl-0-12">12&lt;/a>&lt;/span>&lt;span class="cl">         /bin/killall &lt;span class="nv">$3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-13">&lt;a class="lnlinks" href="#hl-0-13">13&lt;/a>&lt;/span>&lt;span class="cl">     &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-14">&lt;a class="lnlinks" href="#hl-0-14">14&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-15">&lt;a class="lnlinks" href="#hl-0-15">15&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-16">&lt;a class="lnlinks" href="#hl-0-16">16&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="k">function&lt;/span> start &lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-17">&lt;a class="lnlinks" href="#hl-0-17">17&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-18">&lt;a class="lnlinks" href="#hl-0-18">18&lt;/a>&lt;/span>&lt;span class="cl">     /etc/init.d/&lt;span class="nv">$1&lt;/span> zap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-19">&lt;a class="lnlinks" href="#hl-0-19">19&lt;/a>&lt;/span>&lt;span class="cl">     /etc/init.d/&lt;span class="nv">$1&lt;/span> start
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-20">&lt;a class="lnlinks" href="#hl-0-20">20&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-21">&lt;a class="lnlinks" href="#hl-0-21">21&lt;/a>&lt;/span>&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-22">&lt;a class="lnlinks" href="#hl-0-22">22&lt;/a>&lt;/span>&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-23">&lt;a class="lnlinks" href="#hl-0-23">23&lt;/a>&lt;/span>&lt;span class="cl"> start&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-24">&lt;a class="lnlinks" href="#hl-0-24">24&lt;/a>&lt;/span>&lt;span class="cl">     start &lt;span class="nv">$2&lt;/span> &lt;span class="nv">$3&lt;/span> &lt;span class="nv">$4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-25">&lt;a class="lnlinks" href="#hl-0-25">25&lt;/a>&lt;/span>&lt;span class="cl">     &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-26">&lt;a class="lnlinks" href="#hl-0-26">26&lt;/a>&lt;/span>&lt;span class="cl"> stop&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-27">&lt;a class="lnlinks" href="#hl-0-27">27&lt;/a>&lt;/span>&lt;span class="cl">     stop &lt;span class="nv">$2&lt;/span> &lt;span class="nv">$3&lt;/span> &lt;span class="nv">$4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-28">&lt;a class="lnlinks" href="#hl-0-28">28&lt;/a>&lt;/span>&lt;span class="cl">     &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-29">&lt;a class="lnlinks" href="#hl-0-29">29&lt;/a>&lt;/span>&lt;span class="cl"> *&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-30">&lt;a class="lnlinks" href="#hl-0-30">30&lt;/a>&lt;/span>&lt;span class="cl">     &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Usage: kickservice [start|stop] [service] kill [daemon]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-31">&lt;a class="lnlinks" href="#hl-0-31">31&lt;/a>&lt;/span>&lt;span class="cl">     &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-0-32">&lt;a class="lnlinks" href="#hl-0-32">32&lt;/a>&lt;/span>&lt;span class="cl"> &lt;span class="k">esac&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Проблема возникла из-за того, что при установке baselayout-1.12.x перестал нормально работать pppd (при подключении через pptp к VPN-серверу провайдера). Очень часто соединение не устанавливается (вина, думаю, провайдерского сервера). По идее после этого он должен перезапускаться, а он просто ничего не делал. Решил снять проблему с помощью monit.&lt;br>
Убрал net.ppp0 из загрузки, и заставил monit мониторить ppp0.&lt;/p>
&lt;p>Вот скрипт /etc/monit.d/ppp0&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="ln" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>&lt;/span>&lt;span class="cl">check process pppd with pidfile /var/run/ppp0.pid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-2">&lt;a class="lnlinks" href="#hl-1-2">2&lt;/a>&lt;/span>&lt;span class="cl">   start &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/etc/monit.d/bin/kickservice start net.ppp0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-3">&lt;a class="lnlinks" href="#hl-1-3">3&lt;/a>&lt;/span>&lt;span class="cl">   stop &lt;span class="nv">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/etc/monit.d/bin/kickservice stop net.ppp0 kill pppd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln" id="hl-1-4">&lt;a class="lnlinks" href="#hl-1-4">4&lt;/a>&lt;/span>&lt;span class="cl">   &lt;span class="k">if&lt;/span> &lt;span class="m">5&lt;/span> restarts within &lt;span class="m">5&lt;/span> cycles &lt;span class="k">then&lt;/span> timeout
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>P. S. Хотел запостить скрипты, но не знаю как :(&lt;/p></description></item><item><title>Openoffice on amd64</title><link>https://yamadharma.github.io/ru/post/2006/09/04/openoffice-on-amd64/</link><pubDate>Mon, 04 Sep 2006 09:16:00 +0000</pubDate><guid>https://yamadharma.github.io/ru/post/2006/09/04/openoffice-on-amd64/</guid><description>&lt;p>Вчера откомпилил openoffice-2.0.4_rc1-r1 под amd64.&lt;/p></description></item><item><title>Gentoo: конвертация из x86 в x86_64 (2)</title><link>https://yamadharma.github.io/ru/post/2006/08/21/gentoo-konvertatsija-iz-x86-v-x86-64-2/</link><pubDate>Mon, 21 Aug 2006 12:19:00 +0000</pubDate><guid>https://yamadharma.github.io/ru/post/2006/08/21/gentoo-konvertatsija-iz-x86-v-x86-64-2/</guid><description>&lt;ol>
&lt;li>Провозившись с данной проблемой выходные (и частично неделю),
провёл конвертацию.&lt;/li>
&lt;li>Оказалось, что всё очень просто.&lt;/li>
&lt;li>Однако, после начала обновления системы (&lt;code>emerge -e system&lt;/code>), стали
отваливаться приложения (не могут подгрузить библиотеки).&lt;/li>
&lt;li>К сожалению, в новом профайле не поддерживается построение
библиотек под несколько архитектур (может, просто я не знаю).&lt;/li>
&lt;li>Хотя в консоли всё функционирует нормально.&lt;/li>
&lt;li>Скоро, надеюсь, всё конвертну.&lt;/li>
&lt;/ol></description></item><item><title>Gentoo: конвертация из x86 в x86_64</title><link>https://yamadharma.github.io/ru/post/2006/08/18/gentoo-konvertatsija-iz-x86-v-x86-64/</link><pubDate>Fri, 18 Aug 2006 09:21:00 +0000</pubDate><guid>https://yamadharma.github.io/ru/post/2006/08/18/gentoo-konvertatsija-iz-x86-v-x86-64/</guid><description>&lt;ol>
&lt;li>На недавно обновлённом компьютере (до этого был Pentium III)
крутится 32-битная ОС (Gentoo Linux) (Hurd и Plan9 не учитываю).&lt;/li>
&lt;li>Решил конвертнуть в 64-битную. Однако документации по этому вопросу
не нашёл.&lt;/li>
&lt;li>Так-что решил заняться самодеятельностью. Как получится, напишу об этом (с приложением скриптов).&lt;/li>
&lt;/ol></description></item></channel></rss>