---
title: "VKVideo. Виджет для вставки видео"
author: ["Dmitry S. Kulyabov"]
date: 2026-02-24T09:21:00+03:00
lastmod: 2026-02-24T10:22:00+03:00
tags: ["programming", "sysadmin"]
categories: ["computer-science"]
draft: false
slug: "vkvideo-video-embed"
---

VKVideo. Виджет для вставки видео.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Общее описание {#общее-описание}

-   Видеохостинг _VK Video_: <https://vk.com/video>.
-   Информация по интеграции: <https://dev.vk.com/ru/widgets/video>


## <span class="section-num">2</span> Подключение виджета {#подключение-виджета}

-   Загрузите видео на платформу ВКонтакте.
-   Откройте видео в плеере и нажмите на кнопку Экспортировать.
-   В появившемся окне скопируйте код видео.
-   Вставьте код на страницу сайта.
-   Пример кода:
    ```html
    <iframe src="https://vk.com/video_ext.php?oid=-22822305&id=456241864&hd=2" width="853" height="480" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" frameborder="0" allowfullscreen></iframe>
    ```


## <span class="section-num">3</span> Параметры для видео {#параметры-для-видео}

-   `oid` : идентификатор владельца видео: пользователя или сообщества.
    -   ID сообщества указывается со знаком минус `-`.
-   `id` : идентификатор видео.
-   `hash` : ключ доступа, выдаётся при экспорте.
-   `hd` : Разрешение видео. Возможные значения:
    -   640 x 360;
    -   853 x 480;
    -   1280 x 720;
    -   1920 x 1080.
-   `t` : отметка времени, начиная с которого, будет воспроизводится видео.
    -   Указывается в формате 00h00m00s, где h --- часы, m --- минуты, s --- секунды.
-   `autoplay` : включить автоматическое воспроизведение после загрузки видео. Возможные значения:
    -   `1` --- включить;
    -   `0`  либо не указано --- не включать.
-   `loop` : зацикливать воспроизведение видео.
-   `js_api` : использовать JavaScript API для управления виджетом.


## <span class="section-num">4</span> Управление виджетом {#управление-виджетом}

-   Можно управлять виджетом из JavaScript-кода на странице: контролировать видеоплеер и отслеживать состояние воспроизведения, подписавшись на события.


### <span class="section-num">4.1</span> Подключение {#подключение}

-   Подключите скрипт:
    ```html
    <script src="https://vk.com/js/api/videoplayer.js">
    ```

-   Добавьте в адрес видео в коде скопированного виджета параметр `&js_api=1`:
    ```html
    <iframe src="https://vk.com/video_ext.php?oid=-22822305&id=456241864&hd=2&js_api=1" width="853" height="480" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" frameborder="0" allowfullscreen ></iframe>
    ```

-   Создайте инстанс видеоплеера:
    ```js
    const player = VK.VideoPlayer(iframe);
    ```


### <span class="section-num">4.2</span> Методы {#методы}

| Метод                                  | Описание                                                                |
|----------------------------------------|-------------------------------------------------------------------------|
| `play()`                               | Запускает или возобновляет воспроизведение видео.                       |
| `pause()`                              | Приостанавливает воспроизведение видео.                                 |
| `seek(time:Number)`                    | Перемещает воспроизведение на позицию `time`  (в секундах).             |
| `seekLive()`                           | Перемещает воспроизведение в актуальное состояние прямой трансляции.    |
| `setVolume(volume:Number)`             | Устанавливает громкость.                                                |
| `getVolume()`                          | Возвращает значение громкости в диапазоне от `0` до `1` .               |
| `getCurrentTime()`                     | Возвращает текущее время видео в секундах.                              |
| `getDuration()`                        | Возвращает длительность видео в секундах.                               |
| `getQuality()`                         | Возвращает значение качества воспроизведения видео.                     |
| `mute()`                               | Отключает звук, не влияет на настройку громкости.                       |
| `unmute()`                             | Включает звук.                                                          |
| `isMuted()`                            | Возвращает `true`, если звук отключен, иначе `false` .                  |
| `getState()`                           | Возвращает строку, содержащую значение состояния плеера.                |
| `on(event:String, listener:Function)`  | Устанавливает обработчик на событие `event`.                            |
| `off(event:String, listener:Function)` | Удаляет обработчик события `event` .                                    |
| `destroy()`                            | Отписывает плеер от всех событий и отключает API, но не удаляет iframe. |


### <span class="section-num">4.3</span> События {#события}

-   С помощью метода `on(event:String, listener:Function)`  можно подписаться на события.
-   Список доступных значений событий плеера доступен в коде через объект `VK.VideoPlayer.Events`.

| Событие         | Описание                                                      |
|-----------------|---------------------------------------------------------------|
| `inited`        | iframe с видео загрузился и плеер инициализировался.          |
| `timeupdate`    | Обновление текущего времени видео.                            |
| `volumechange`  | Обновление уровня громкости или включение и отключение звука. |
| `qualitychange` | Изменение качества проигрываемого видео.                      |
| `started`       | Начало воспроизведения видео.                                 |
| `resumed`       | Возобновление воспроизведения после паузы.                    |
| `paused`        | Приостановка воспроизведения.                                 |
| `ended`         | Завершение воспроизведения.                                   |
| `error`         | Ошибка воспроизведения.                                       |
| `adStarted`     | Начало проигрывания рекламного ролика.                        |
| `adCompleted`   | Окончание проигрывания рекламной секции.                      |


### <span class="section-num">4.4</span> Объект `state` {#объект-state}

-   Обработчики всех событий возвращают объект `state`.
-   Список доступных значений соcтояний плеера доступен в коде через объект `VK.VideoPlayer.States`.

| Поле       | Тип       | Описание                                             |
|------------|-----------|------------------------------------------------------|
| `state`    | `string`  | Состояние плеера.                                    |
| `volume`   | `number`  | Текущая громкость воспроизведения.                   |
| `muted`    | `boolean` | `true`, если звук выключен, и `false`, если включен. |
| `time`     | `number`  | Текущая позиция воспроизведения в секундах.          |
| `duration` | `number`  | Длительность видео в секундах.                       |

Пример объекта `state`:

```js
{
    "state": "playing",
    "volume": 0.7,
    "muted": "false",
    "time": 321,
    "duration": 600
}
```
