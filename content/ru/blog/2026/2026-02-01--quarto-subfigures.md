---
title: "Quarto. subfigures"
author: ["Dmitry S. Kulyabov"]
date: 2026-02-01T18:42:00+03:00
lastmod: 2026-02-01T19:04:00+03:00
tags: ["markdown"]
categories: ["computer-science"]
draft: false
slug: "quarto-subfigures"
---

Quarto. subfigures.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Общая информация {#общая-информация}

-   В Quarto есть несколько способов создать композицию из нескольких изображений (subfigures).
-   Основные методы и их ключевые свойства:

| Метод                 | Лучше всего подходит для                     | Ключевая опция / Атрибут                 | Нужны отдельные метки            |
|-----------------------|----------------------------------------------|------------------------------------------|----------------------------------|
| Один блок с кодом     | Нескольких графиков из одного блока кода     | `fig-subcap: ["Подпись A", "Подпись B"]` | Нет, создаются автоматически     |
| Блоки div (`:::`)     | Статических изображений, смешанного контента | `#fig-метод` внутри внешнего div         | Да, для каждого вложенного блока |
| Несколько блоков кода | Нескольких независимых блоков кода           | `layout-ncol: 2` в div-контейнере        | Да, для каждого блока            |


## <span class="section-num">2</span> Графики из одного исполняемого блока {#графики-из-одного-исполняемого-блока}

-   Самый распространённый метод для исполняемых блоков.
-   В одном блоке кода генерируется несколько графиков, а параметры `fig-subcap` и `layout-ncol` управляют подписями и расположением.

<!--listend-->

````markdown
```{r}
#| label: fig-mtcars-plots
#| fig-cap: "Характеристики автомобилей (данные mtcars)"
#| fig-subcap:
#|   - "Зависимость расхода от веса"
#|   - "Зависимость мощности от объёма двигателя"
#| layout-ncol: 2

# Первый график
plot(mtcars$wt, mtcars$mpg, main = "График 1")
# Второй график
plot(mtcars$disp, mtcars$hp, main = "График 2")
```
````

-   Перекрёстные ссылки: на основную фигуру ссылайтесь через `@fig-mtcars-plots`, а на подрисунки --- через `@fig-mtcars-plots-1` и `@fig-mtcars-plots-2`.


## <span class="section-num">3</span> Div-контейнер для статических изображений {#div-контейнер-для-статических-изображений}

-   Используйте div-контейнеры (`:::`) с атрибутом `layout-ncol` или `layout-nrow` для группировки обычных изображений.
-   Внешнему div задаётся общая подпись (`fig-cap`), а каждому изображению внутри --- своя метка.

<!--listend-->

````markdown
:::{#fig-landscapes layout-ncol=2}
![Зимний пейзаж](snow.jpg){#fig-snow}
![Летний пейзаж](forest.jpg){#fig-forest}

Пример двух сезонов в одном кадре.
:::
````

-   Перекрёстные ссылки: используйте `@fig-landscapes` для всей группы, `@fig-snow` и `@fig-forest` для отдельных изображений.


## <span class="section-num">4</span> Несколько независимых блоков кода в контейнере {#несколько-независимых-блоков-кода-в-контейнере}

-   Если графики создаются разными блоками кода, поместите эти блоки в div-контейнер с атрибутом `layout-ncol` или `layout-nrow`.

<!--listend-->

````markdown
:::{#fig-independent layout-ncol=2}
```{r}
#| label: fig-histogram
#| fig-cap: "Гистограмма распределения"
# Гистограмма
hist(rnorm(100))
```
```{r}
#| label: fig-boxplot
#| fig-cap: "Диаграмма размаха"
# Boxplot
boxplot(rnorm(100))
```
Гистограмма и boxplot для нормального распределения.
:::
````


## <span class="section-num">5</span> Дополнительные возможности и настройки {#дополнительные-возможности-и-настройки}


### <span class="section-num">5.1</span> Сложные макеты {#сложные-макеты}

-   Для нестандартного расположения используйте атрибут `layout` с двумерным массивом.
-   Например, `layout="[[1,1], [1]]"` создаст первый ряд из двух колонок и второй ряд из одной колонки.


### <span class="section-num">5.2</span> Только буквы без текста {#только-буквы-без-текста}

-   Если нужны только буквы (a), (b), а не полные подписи, укажите `fig-subcap: true` вместо списка текстов.


### <span class="section-num">5.3</span> Кастомизация ссылок {#кастомизация-ссылок}

-   В тексте можно управлять видом ссылки.
-   Например, `[@fig-mtcars-plots]` даст "Figure 1", а `[-@fig-mtcars-plots]` --- просто "1".


### <span class="section-num">5.4</span> Подпись начинается со скобки `(a)` {#подпись-начинается-со-скобки--a}

-   Pandoc может интерпретировать строку, начинающуюся со скобки, как начало списка.
-   Чтобы этого избежать, используйте обратный слеш: `\(a) Описание...`.


### <span class="section-num">5.5</span> Переносы строк в длинных атрибутах {#переносы-строк-в-длинных-атрибутах}

-   Если нужно перенести длинную строку с атрибутами, закрывающую фигурную скобку `}` можно перенести на новую строку.
