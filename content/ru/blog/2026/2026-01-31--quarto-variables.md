---
title: "Quarto. Использование переменных"
author: ["Dmitry S. Kulyabov"]
date: 2026-01-31T16:52:00+03:00
lastmod: 2026-01-31T21:21:00+03:00
tags: ["markdown"]
categories: ["computer-science"]
draft: false
slug: "quarto-variables"
---

Quarto. Использование переменных.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Общая информация {#общая-информация}

-   В Quarto переменные позволяют динамически управлять содержимым документа.


## <span class="section-num">2</span> Переменные проекта (`var`) {#переменные-проекта--var}

-   Этот способ подходит для значений, которые повторяются во многих документах одного проекта (например, название компании или номер версии).
-   Этот метод работает только в рамках проекта Quarto, а не в одиночных файлах.


### <span class="section-num">2.1</span> Как создать {#как-создать}

-   Создайте файл `_variables.yml` в корневой папке проекта (рядом с `_quarto.yml`) и определите переменные в формате `ключ: значение`.


### <span class="section-num">2.2</span> Как использовать {#как-использовать}

-   В любом документе проекта (`.qmd`-файле) вставьте короткод `{{</* var ключ **/>}}`.


### <span class="section-num">2.3</span> Пример {#пример}

```yaml
# файл _variables.yml
project_name: "Мой анализ"
version: "1.0"
```

```markdown
<!-- В документе .qmd -->
Это — отчет проекта {{</* var project_name */>}}.
```


## <span class="section-num">3</span> Метаданные документа (`meta`) {#метаданные-документа--meta}

-   Используйте этот способ, чтобы вставлять значения из YAML-заголовка документа (например, заголовок, автор, дата) или другие динамически заданные метаданные.
-   Значения метаданных можно также задавать динамически с помощью кода R и функции `quarto::write_yaml_metadata_block()`. Это особенно полезно для параметризованных отчетов.


### <span class="section-num">3.1</span> Как создать {#как-создать}

-   Определите переменные в YAML-заголовке (между `---` в начале файла).


### <span class="section-num">3.2</span> Как использовать {#как-использовать}

-   В тексте документа используйте короткод `{{</* meta ключ **/>}}`.


### <span class="section-num">3.3</span> Пример {#пример}

```yaml
---
title: "Отчет о продажах"
author: "Иван Петров"
output_date: 2025-12-15
---
```

```markdown
Документ "{{</* meta title */>}}" подготовлен {{</* meta author */>}}.
```


## <span class="section-num">4</span> Переменные окружения (`env`) {#переменные-окружения--env}

-   Этот метод нужен для работы с конфиденциальными данными (токены, пароли) или системными настройками, которые не должны храниться в репозитории кода.


### <span class="section-num">4.1</span> Как создать {#как-создать}

-   Определите переменные в файле `_environment` в корне проекта.
-   Для локальных значений, которые не должны попасть в Git, используйте `_environment.local` (он автоматически добавляется в `.gitignore`) .


### <span class="section-num">4.2</span> Как использовать {#как-использовать}

-   В документе применяйте короткод `{{</* env имя_переменной **/>}}`.


### <span class="section-num">4.3</span> Пример {#пример}

```sh
# файл _environment.local
API_KEY=my_secret_key_123
```

```markdown
<!-- В документе .qmd -->
Ключ доступа: {{</* env API_KEY */>}}
```


## <span class="section-num">5</span> Сравнение методов {#сравнение-методов}

| Способ                     | Лучше всего подходит для                 | Где определять                              | Как вставлять в документ |
|----------------------------|------------------------------------------|---------------------------------------------|--------------------------|
| Переменные проекта (`var`) | Общих значений для всех файлов проекта   | `_variables.yml` в корне проекта            | `{{</* var ключ */>}}`   |
| Метаданные (`meta`)        | Значений из заголовка или заданных кодом | YAML-заголовок документа или через R/Python | `{{</* meta ключ */>}}`  |
| Окружение (`env`)          | Секретов и системных настроек            | Файлы `_environment`, `_environment.local`  | `{{</* env имя */>}}`    |
