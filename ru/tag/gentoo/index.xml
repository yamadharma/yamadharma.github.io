<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>gentoo | Д. С. Кулябов</title>
    <link>https://yamadharma.github.io/ru/tag/gentoo/</link>
      <atom:link href="https://yamadharma.github.io/ru/tag/gentoo/index.xml" rel="self" type="application/rss+xml" />
    <description>gentoo</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>ru-ru</language><copyright>© 2021 Dmitry S. Kulyabov</copyright><lastBuildDate>Fri, 21 May 2021 20:38:00 +0300</lastBuildDate>
    <image>
      <url>https://yamadharma.github.io/media/icon_hu0a661dd90139895e92e2f18ae9404407_611148_512x512_fill_lanczos_center_2.png</url>
      <title>gentoo</title>
      <link>https://yamadharma.github.io/ru/tag/gentoo/</link>
    </image>
    
    <item>
      <title>Установка Linux на btrfs</title>
      <link>https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/</link>
      <pubDate>Fri, 21 May 2021 20:38:00 +0300</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2021/05/21/installing-linux-btrfs/</guid>
      <description>&lt;p&gt;Перенос Gentoo Linux с одного диска на другой. На новом диске делается система btrfs.&lt;/p&gt;
&lt;details class=&#34;toc-inpage d-print-none  &#34; open&gt;
  &lt;summary class=&#34;font-weight-bold&#34;&gt;Содержание&lt;/summary&gt;
  &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#исходное-состояние-системы&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Исходное состояние системы&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#разбиение-диска&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; Разбиение диска&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#подготовка-раздела-с-btrfs&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3&lt;/span&gt; Подготовка раздела с btrfs&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#копирование-существующих-файловых-систем&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4&lt;/span&gt; Копирование существующих файловых систем&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#установка-загрузчика&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5&lt;/span&gt; Установка загрузчика&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#создадим-файл-монтирования-fstab&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;6&lt;/span&gt; Создадим файл монтирования fstab&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#копирование-специальных-файловых-систем&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;7&lt;/span&gt; Копирование специальных файловых систем&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#backlinks&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;8&lt;/span&gt; Backlinks&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
&lt;/details&gt;

&lt;h2 id=&#34;исходное-состояние-системы&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Исходное состояние системы&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Исходно система установлена на LVM:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/dev/sdb1&lt;/code&gt;: &lt;code&gt;/boot/EFI&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/dev/sdb2&lt;/code&gt;: &lt;code&gt;/boot&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/dev/vgs/root&lt;/code&gt;: &lt;code&gt;/&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/dev/vgs/var&lt;/code&gt;: &lt;code&gt;/var&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/dev/vgs/var_tmp&lt;/code&gt;: &lt;code&gt;/var/tmp&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/dev/vgs/vm&lt;/code&gt;: &lt;code&gt;/var/vm&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/dev/vgs/portage&lt;/code&gt;: &lt;code&gt;/usr/portage&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/dev/vgs/portage_local&lt;/code&gt;: &lt;code&gt;/usr/local/share/portage&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/dev/vgs/portage_com&lt;/code&gt;: &lt;code&gt;/com/lib/portage&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/dev/vgs/home&lt;/code&gt;: &lt;code&gt;/home&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;разбиение-диска&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; Разбиение диска&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Установим тип разбиения в GPT.&lt;/li&gt;
&lt;li&gt;Разобьём на партиции:
&lt;ul&gt;
&lt;li&gt;p1 &amp;mdash; 500M, для &lt;code&gt;EFI&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;p2 &amp;mdash; 500&amp;ndash;1024M, для &lt;code&gt;/boot&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;p3 &amp;mdash; двойная оперативная память, для &lt;code&gt;swap&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;p4 &amp;mdash; всё остальное для &lt;code&gt;btrfs&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Создадим файловые системы:
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;p1 (&lt;code&gt;EFI&lt;/code&gt;):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mkfs.vfat -F32 -n EFI /dev/sda1
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;p2 (&lt;code&gt;/boot&lt;/code&gt;):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mkfs.ext4 -L boot /dev/sda2
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;p3 (&lt;code&gt;swap&lt;/code&gt;):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mkswap -L swap /dev/sda3
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;p4 (&lt;code&gt;btrfs&lt;/code&gt;)&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mkfs.btrfs /dev/sda4
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;подготовка-раздела-с-btrfs&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3&lt;/span&gt; Подготовка раздела с btrfs&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Подмонтируем раздел с btrfs:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mkdir /mnt/gentoo
mount -tbtrfs -orelatime,space_cache,discard,autodefrag,compress=zstd:9 /dev/sda4 /mnt/gentoo/
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Создадим подтома на btrfs:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd /mnt/gentoo/
btrfs subvol create @
btrfs subvol create @var
btrfs subvol create @var_tmp
btrfs subvol create @vm
btrfs subvol create @portage
btrfs subvol create @portage_local
btrfs subvol create @portage_com
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;копирование-существующих-файловых-систем&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4&lt;/span&gt; Копирование существующих файловых систем&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Создадим точку монтирования:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mkdir /mnt/from
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Подмонтируем и скопируем root-партицию:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mount /dev/vgs/root /mnt/from/
rsync -av -HS --delete /mnt/from/ /mnt/gentoo/@
umount /mnt/from/
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Подмонтируем и скопируем &lt;code&gt;/var&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mount /dev/vgs/var /mnt/from/
rsync -av -HS --delete /mnt/from/ /mnt/gentoo/@var
umount /mnt/from/
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Подмонтируем и скопируем &lt;code&gt;portage&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mount /dev/vgs/portage /mnt/from/
rsync -av -HS --delete /mnt/from/ /mnt/gentoo/@portage
umount /mnt/from/
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Подмонтируем и скопируем &lt;code&gt;portage_local&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mount /dev/vgs/portage_local /mnt/from/
rsync -av -HS --delete /mnt/from/ /mnt/gentoo/@portage_local
umount /mnt/from/
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Подмонтируем и скопируем &lt;code&gt;/boot&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mkdir /mnt/to/
mount /dev/sda2 /mnt/to
mount /dev/sdb2 /mnt/from/
rsync -av -HS --delete /mnt/from/ /mnt/to/
umount /mnt/to
umount /mnt/from
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;установка-загрузчика&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5&lt;/span&gt; Установка загрузчика&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Перемонтируем файловую систему &lt;code&gt;btrfs&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;umount /mnt/gentoo
mount -tbtrfs -orelatime,space_cache,discard,autodefrag,compress=zstd:9,subvol=@ /dev/sda4 /mnt/gentoo/
mount -tbtrfs -orelatime,space_cache,discard,autodefrag,compress=zstd:9,subvol=@var /dev/sda4 /mnt/gentoo/var
mount -tbtrfs -orelatime,space_cache,discard,autodefrag,compress=zstd:9,subvol=@var_tmp /dev/sda4 /mnt/gentoo/var/tmp
mount /dev/sda2 /mnt/gentoo/boot/
mount /dev/sda1 /mnt/gentoo/boot/efi
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Подмонтируем псевдо-файловые системы:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mount -o bind /dev /mnt/gentoo/dev/
mount -o bind /proc /mnt/gentoo/proc/
mount -o bind /sys /mnt/gentoo/sys/
mount -o bind /run /mnt/gentoo/run/
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Установим загрузчик:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd /mnt/gentoo/
chroot /mnt/gentoo/ /bin/bash
grub-install /boot/
grub-mkconfig -o /boot/grub/grub.cfg
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;создадим-файл-монтирования-fstab&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;6&lt;/span&gt; Создадим файл монтирования fstab&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Узнаем идентификатор партиции с файловой системой btrfs:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;blkid /dev/sda4
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Получим строчку:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;UUID=&amp;quot;&amp;lt;uuid_number&amp;gt;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Создадим файл &lt;code&gt;/mnt/gentoo/etc/fstab&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;LABEL=&amp;quot;boot-m2&amp;quot;					/boot		ext4	relatime,discard					1 1
LABEL=&amp;quot;EFI-M2&amp;quot;					/boot/efi	vfat	defaults,discard					0 0
LABEL=&amp;quot;swap-m2&amp;quot;					none		swap	sw							0 0
UUID=&amp;quot;&amp;lt;uuid_number&amp;gt;&amp;quot;	/		btrfs	relatime,discard,autodefrag,compress=zstd:9,subvol=@	0 0
UUID=&amp;quot;&amp;lt;uuid_number&amp;gt;&amp;quot;	/var		btrfs	relatime,discard,autodefrag,compress=zstd:9,subvol=@var	0 0
UUID=&amp;quot;&amp;lt;uuid_number&amp;gt;&amp;quot;	/var/tmp	btrfs	relatime,discard,autodefrag,compress=zstd:9,subvol=@var_tmp	0 0
UUID=&amp;quot;&amp;lt;uuid_number&amp;gt;&amp;quot;	/var/vm		btrfs	relatime,discard,autodefrag,compress=zstd:9,subvol=@vm		0 0
UUID=&amp;quot;&amp;lt;uuid_number&amp;gt;&amp;quot;	/home		btrfs	relatime,discard,autodefrag,compress=zstd:9,subvol=@home	0 0
UUID=&amp;quot;&amp;lt;uuid_number&amp;gt;&amp;quot;	/usr/portage	btrfs	relatime,discard,autodefrag,compress=zstd:9,subvol=@portage	0 0
UUID=&amp;quot;&amp;lt;uuid_number&amp;gt;&amp;quot;	/usr/local/share/portage	btrfs	relatime,discard,autodefrag,compress=zstd:9,subvol=@portage_local	0 0
UUID=&amp;quot;&amp;lt;uuid_number&amp;gt;&amp;quot;	/com/lib/portage	btrfs	relatime,discard,autodefrag,compress=zstd:9,subvol=@portage_com	0 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;копирование-специальных-файловых-систем&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;7&lt;/span&gt; Копирование специальных файловых систем&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Для образов виртуальных машин следует отключить CoW (copy-on-write).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Подмонтируем файловую систему &lt;code&gt;btrfs&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mount -tbtrfs -orelatime,space_cache,discard,autodefrag,compress=zstd:9,subvol=@vm /dev/sda4 /mnt/gentoo/var/vm
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Отключим для этого подтома CoW:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd /mnt/gentoo/var/
chattr +C vm
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Скопируем файлы:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mount /dev/vgs/vm /mnt/from/
rsync -av -HS --delete /mnt/from/ /mnt/gentoo/var/vm
umount /mnt/from/
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;backlinks&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;8&lt;/span&gt; Backlinks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://yamadharma.github.io/ru/post/2021/04/10/system-administration/&#34;&gt;Системное администрирование&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>Window manager i3</title>
      <link>https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/</link>
      <pubDate>Fri, 14 May 2021 11:32:00 +0300</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/</guid>
      <description>&lt;p&gt;Менеджер окон &lt;em&gt;i3&lt;/em&gt;.&lt;/p&gt;
&lt;details class=&#34;toc-inpage d-print-none  &#34; open&gt;
  &lt;summary class=&#34;font-weight-bold&#34;&gt;Содержание&lt;/summary&gt;
  &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#общая-информация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#навигация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; Навигация&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#basics&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.1&lt;/span&gt; Basics&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#moving-windows&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.2&lt;/span&gt; Moving windows&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#modifying-windows&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.3&lt;/span&gt; Modifying windows&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#changing-the-container-layout&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.4&lt;/span&gt; Changing the container layout&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#floating&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.5&lt;/span&gt; Floating&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#using-workspaces&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.6&lt;/span&gt; Using workspaces&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#opening-applications-closing-windows&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.7&lt;/span&gt; Opening applications / Closing windows&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#выход-перезапуск&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.8&lt;/span&gt; Выход/Перезапуск&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#настройка&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3&lt;/span&gt; Настройка&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#строка-статуса&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.1&lt;/span&gt; Строка статуса&lt;/a&gt;
          &lt;ul&gt;
            &lt;li&gt;&lt;a href=&#34;#i3bar&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.1.1&lt;/span&gt; i3bar&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&#34;#polybar&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.1.2&lt;/span&gt; polybar&lt;/a&gt;&lt;/li&gt;
          &lt;/ul&gt;
        &lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#строка-состояний&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.2&lt;/span&gt; Строка состояний&lt;/a&gt;
          &lt;ul&gt;
            &lt;li&gt;&lt;a href=&#34;#rofi&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.2.1&lt;/span&gt; rofi&lt;/a&gt;&lt;/li&gt;
          &lt;/ul&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#приложения&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4&lt;/span&gt; Приложения&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#снимки-экрана&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4.1&lt;/span&gt; Снимки экрана&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
&lt;/details&gt;

&lt;h2 id=&#34;общая-информация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Тайловый менеджер окон.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://i3wm.org/&#34;&gt;https://i3wm.org/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;навигация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; Навигация&lt;/h2&gt;
&lt;h3 id=&#34;basics&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.1&lt;/span&gt; Basics&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + Enter	open new terminal&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + j	focus left&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + k	focus down&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + l	focus up&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + ;	focus right&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + a	focus parent&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + Space	toggle focus mode&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;moving-windows&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.2&lt;/span&gt; Moving windows&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + Shift + j	move window left&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + Shift + k	move window down&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + Shift + l	move window up&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + Shift + ;	move window right&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;modifying-windows&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.3&lt;/span&gt; Modifying windows&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + f	toggle fullscreen&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + v	split a window vertically&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + h	split a window horizontally&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + r	resize mode&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;changing-the-container-layout&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.4&lt;/span&gt; Changing the container layout&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + e	default&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + s	stacking&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + w	tabbed&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;floating&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.5&lt;/span&gt; Floating&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + Shift + Space	toggle floating&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + Left click	drag floating&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;using-workspaces&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.6&lt;/span&gt; Using workspaces&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + 0-9	switch to another workspace&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + Shift + 0-9	move a window to another workspace&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;opening-applications-closing-windows&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.7&lt;/span&gt; Opening applications / Closing windows&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + d	open application launcher (dmenu)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + Shift + q	kill a window&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;выход-перезапуск&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.8&lt;/span&gt; Выход/Перезапуск&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;c&lt;/code&gt;: перечитать конфигурационный файл.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;## ~/.config/i3/config

## reload the configuration file
bindsym $mod+Shift+c reload
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;r&lt;/code&gt;: перестартовать &lt;em&gt;i3&lt;/em&gt;, сохранив сессию.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;## ~/.config/i3/config

## restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;e&lt;/code&gt;: выход из &lt;em&gt;i3&lt;/em&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;## ~/.config/i3/config

## exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec &amp;quot;i3-nagbar -t warning -m &#39;You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.&#39; -B &#39;Yes, exit i3&#39; &#39;i3-msg exit&#39;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;настройка&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3&lt;/span&gt; Настройка&lt;/h2&gt;
&lt;h3 id=&#34;строка-статуса&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.1&lt;/span&gt; Строка статуса&lt;/h3&gt;
&lt;h4 id=&#34;i3bar&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.1.1&lt;/span&gt; i3bar&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Отрисовку панели осуществляет утилита &lt;code&gt;i3bar&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Отображается вверху или внизу экрана.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Содержит:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;область с кнопками переключения рабочих областей &lt;em&gt;i3&lt;/em&gt;;&lt;/li&gt;
&lt;li&gt;системную строку, генерируемую при помощи &lt;code&gt;i3status&lt;/code&gt; или аналогов;&lt;/li&gt;
&lt;li&gt;системный трей с иконками программ.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;В конфигурационном файле задаётся следующим образом (&lt;a href=&#34;https://i3wm.org/docs/userguide.html#%5Fconfiguring%5Fi3bar&#34;&gt;https://i3wm.org/docs/userguide.html#%5Fconfiguring%5Fi3bar&lt;/a&gt;):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;# ~/.config/i3/config -*- mode: conf-unix; -*-
## Start i3bar to display a workspace bar
bar {
    status_command	i3status
    position		top
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!--list-separator--&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Поддержка иконок в i3bar&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;В &lt;code&gt;i3bar&lt;/code&gt; можно использовать шрифты иконок (см. &lt;a href=&#34;https://yamadharma.github.io/ru/post/2021/05/21/monospace-fonts/&#34;&gt;Моноширинные шрифты&lt;/a&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Наиболее распространённым является шрифт &lt;a href=&#34;https://fontawesome.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Font Awesome&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Установка:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Gentoo&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;emerge media-fonts/fontawesome
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Для вставки шрифта в файл можно использовать список кодов для иконок &lt;a href=&#34;https://fontawesome.com/cheatsheet&#34;&gt;https://fontawesome.com/cheatsheet&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Шрифт лучше явно обозначить в конфигурации:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;## ~/.config/i3/config
bar {
    …
    font pango:Source Sans Pro, FontAwesome 5 Free 10
    …
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Для набора символа по его коду следует использовать конфигурации клавиш. Например, для набора символа с кодом &lt;code&gt;0xf004&lt;/code&gt;, требуется набрать:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;приложения на основе GTK: &lt;code&gt;Ctrl&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;u&lt;/code&gt;, &lt;code&gt;f004&lt;/code&gt;, &lt;code&gt;Enter&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;emacs: &lt;code&gt;Ctrl&lt;/code&gt; + &lt;code&gt;x&lt;/code&gt;, &lt;code&gt;8&lt;/code&gt;, &lt;code&gt;Enter&lt;/code&gt;, &lt;code&gt;f004&lt;/code&gt;, &lt;code&gt;Enter&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;vim: &lt;code&gt;Ctrl&lt;/code&gt; + &lt;code&gt;v&lt;/code&gt;, &lt;code&gt;uf004&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;urxvt: удерживая &lt;code&gt;Ctrl&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt;, наберите &lt;code&gt;f004&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;!--list-separator--&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;i3status&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Использовано &lt;a href=&#34;https://igancev.ru/2020-05-11-configuring-i3status-in-i3wm&#34;&gt;https://igancev.ru/2020-05-11-configuring-i3status-in-i3wm&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;i3status&lt;/code&gt; генерирует строку состояния для &lt;code&gt;i3bar&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Содержит встроенные модули:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IPv6 &amp;mdash; получает и выводит IPv6 адрес.&lt;/li&gt;
&lt;li&gt;Disk &amp;mdash; отображает информацию о занятом и свободном месте в файловой системе.&lt;/li&gt;
&lt;li&gt;Run-watch &amp;mdash; мониторинг определённого процесса в системе.&lt;/li&gt;
&lt;li&gt;Path-exists &amp;mdash; проверяет на существование путь в файловой системе.&lt;/li&gt;
&lt;li&gt;Wireless &amp;mdash; позволяет выводить подключения к WIFI сети, уровень сигнала, имя точки доступа.&lt;/li&gt;
&lt;li&gt;Ethernet &amp;mdash; предоставляет IP адрес и скорость соединения сетевого интерфейса.&lt;/li&gt;
&lt;li&gt;Battery &amp;mdash; показ уровня заряда батареи.&lt;/li&gt;
&lt;li&gt;CPU-Temperature &amp;mdash; показ температуры процессора.&lt;/li&gt;
&lt;li&gt;CPU Usage &amp;mdash; использование процессора в процентах.&lt;/li&gt;
&lt;li&gt;Memory &amp;mdash; использование оперативной памяти.&lt;/li&gt;
&lt;li&gt;Load &amp;mdash; среднее значение загрузки системы за 1, 5 и 15 минут (Load Overage).&lt;/li&gt;
&lt;li&gt;Time &amp;mdash; время в текущей временной зоне.&lt;/li&gt;
&lt;li&gt;TzTime &amp;mdash; время в заданной временной зоне.&lt;/li&gt;
&lt;li&gt;DDate &amp;mdash; дата.&lt;/li&gt;
&lt;li&gt;Volume &amp;mdash; управление громкостью звука.&lt;/li&gt;
&lt;li&gt;File Contents &amp;mdash; вывод содержимого указанного файла.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Модули в строке можно переиспользовать по нескольку раз, управляя порядком вывода.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Конфигурацию условно можно разделить на 3 части:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;блок &lt;code&gt;general&lt;/code&gt; &amp;mdash; содержит общие параметры;&lt;/li&gt;
&lt;li&gt;переменная &lt;code&gt;order&lt;/code&gt; &amp;mdash; в неё записывается порядок вывода интересующих модулей;&lt;/li&gt;
&lt;li&gt;блоки конфигурации модулей &amp;mdash; непосредственно настройки самих блоков с метриками.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;В конфигурации i3bar задаётся конфигурационный файл для i3status:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;# ~/.config/i3/config -*- mode: conf-unix; -*-
## Start i3bar to display a workspace bar
bar {
    font pango:Source Sans Pro, FontAwesome 5 Free 10
    status_command	i3status --config ~/.config/i3/i3status/config
    position		top
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Структура информационной панели задаётся в конфигурационном файле:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;### -*- mode: conf-unix; -*-
## ~/.config/i3/i3status/config

general {
    colors = true # включение/выключение поддержки цветов true/false
    interval = 1 # интервал обновления строки статуса, в секундах
    output_format = &amp;quot;i3bar&amp;quot; # формат вывода, устанавливаем i3bar (JSON)
}

# порядок вывода модулей
order += &amp;quot;run_watch openvpn&amp;quot;
order += &amp;quot;run_watch openconnect&amp;quot;
order += &amp;quot;volume master&amp;quot;
order += &amp;quot;wireless _first_&amp;quot;
order += &amp;quot;battery all&amp;quot;
order += &amp;quot;disk /&amp;quot;
order += &amp;quot;memory&amp;quot;
order += &amp;quot;cpu_usage&amp;quot;
order += &amp;quot;cpu_temperature 0&amp;quot;
order += &amp;quot;tztime local&amp;quot;

# отслеживание процесса openvpn
# служит как индикатор работы openvpn клиента
# при запуске openvpn необходимо
# указывать параметр --writepid /var/run/openvpn.pid
run_watch openvpn {
    pidfile = &amp;quot;/var/run/openvpn.pid&amp;quot;
    format = &amp;quot; openvpn&amp;quot;
    # если пареметр format_down оставить пустым,
    # то при неактивном процессе блок будет отсутствовать
    format_down=&amp;quot;&amp;quot;
}

# аналогичный блок индикатор openconnect vpn клиента
# требуется запуск клиента с параметром --pid-file=/var/run/openconnect.pid
run_watch openconnect {
    pidfile = &amp;quot;/var/run/openconnect.pid&amp;quot;
    format = &amp;quot; openconnect vpn&amp;quot;
    format_down=&amp;quot;&amp;quot;
}

# управление громкостью звука
volume master {
    format = &amp;quot; %volume&amp;quot; # шаблон громкости в активном состоянии
    format_muted = &amp;quot; %volume&amp;quot; # шаблон громкости в состоянии muted (без звука)
    device = &amp;quot;default&amp;quot;
    mixer = &amp;quot;Master&amp;quot;
    mixer_idx = 0
}

# индикатор WIFI
wireless _first_ {
    # шаблон вывода, можно дополнить
    # наименованием подключения %essid
    # и ip адресом %ip
    format_up = &amp;quot;%quality %frequency&amp;quot;
    format_down = &amp;quot;&amp;quot;
}

# состояние заряда батареи
battery all {
    # шаблон вывода, можно дополнить
    # оставшимся временем работы %emptytime
    # энергопотреблением %consumption в ваттах
    format = &amp;quot;%status %percentage&amp;quot;

    # true - показ процента заряда от 0 до 100
    # false - показ процента заряда от 0 до n, с учетом
    # изношенности аккумулятора
    last_full_capacity = true
    format_down = &amp;quot;&amp;quot;
    status_chr = &amp;quot;&amp;quot; # статус подзарядки
    status_bat = &amp;quot;&amp;quot; # статус в режиме работы от батареи
    status_unk = &amp;quot;? UNK&amp;quot; # неизвестный статус
    status_full = &amp;quot;&amp;quot; # статус полного заряда
    path = &amp;quot;/sys/class/power_supply/BAT%d/uevent&amp;quot;

    # нижний порог заряда, после которого блок
    # будет окрашен в &amp;quot;color_bad&amp;quot; (по умолчанию красный)
    # подробнее в man i3status
    low_threshold = 10
}

# отслеживаемый накопитель
disk &amp;quot;/&amp;quot; {
    # доступные переменные:
    # %used, %percentage_used - занятое пространство
    # %free, %percentage_free - свободное пространство
    # %avail, %percentage_avail - доступное пространство
    # %total - всего
    format = &amp;quot; %avail&amp;quot;

    # будет окрашен в &amp;quot;color_bad&amp;quot; (по умолчанию красный)
    # при достижении нижнего порога менее 10GB доступного пространства
    low_threshold = &amp;quot;10&amp;quot;
    threshold_type = &amp;quot;gbytes_avail&amp;quot;
    format_below_threshold = &amp;quot; Warning: %avail&amp;quot;
}

# миниторинг оперативной памяти
memory {
    # доступные переменные:
    # %total, percentage_total
    # %used, percentage_used
    # %free, percentage_free
    # %available, percentage_available
    # %shared, percentage_shared
    format = &amp;quot; %used&amp;quot;

    # порог, при котором вывод окрасится в
    # желтый (degraded) или красный (critical)
    # а формат вывода изменится на format_degraded
    threshold_degraded = &amp;quot;1G&amp;quot;
    threshold_critical = &amp;quot;200M&amp;quot;
    format_degraded = &amp;quot;MEMORY &amp;lt; %available&amp;quot;
}

# температура процессора
cpu_temperature 0 {
    format = &amp;quot; %degrees&amp;quot;

    # верхний порог температуры, при достижении которого
    # вывод окрасится красным,
    # и формат изменится на format_above_threshold
    max_threshold = &amp;quot;80&amp;quot;
    format_above_threshold = &amp;quot; %degrees&amp;quot;
    path = &amp;quot;/sys/class/thermal/thermal_zone0/temp&amp;quot;
}

# использование центрального процессора
cpu_usage {
    # %usage - процентное использование ЦП
    # %cpu&amp;lt;N&amp;gt; - начиная с %cpu0 и далее показывает использование ядер
    format = &amp;quot; %usage&amp;quot;

    # доступны параметры:
    # degraded_threshold, окрас в желтый, по умолчанию 90
    # max_threshold, окрас в красный, по умолчанию 95
    # и кастомные форматы для них
    # format_above_degraded_threshold и format_above_threshold
}

# вывод даты и времени по заданному формату
tztime local {
    format = &amp;quot; %d %b %Y  %H:%M:%S&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;polybar&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.1.2&lt;/span&gt; polybar&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Отдельное приложение для строки статуса.&lt;/li&gt;
&lt;li&gt;Применяется для замены &lt;em&gt;i3bar&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://polybar.github.io/&#34;&gt;https://polybar.github.io/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/polybar/polybar&#34;&gt;https://github.com/polybar/polybar&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Темы для &lt;em&gt;polybar&lt;/em&gt;: &lt;a href=&#34;https://github.com/adi1090x/polybar-themes&#34;&gt;https://github.com/adi1090x/polybar-themes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Одним из побудительных мотивов установки &lt;em&gt;polybar&lt;/em&gt; может быть то, что здесь можно без проблем настроить индикатор раскладки клавиатуры.&lt;/li&gt;
&lt;li&gt;Установка
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Gentoo:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;USE=&amp;quot;i3wm&amp;quot; emerge x11-misc/polybar
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Конфигурационный файл:
&lt;ul&gt;
&lt;li&gt;стандартное расположение:  &lt;code&gt;~/.config/polybar/config&lt;/code&gt; (&lt;code&gt;$XDG_CONFIG_HOME/polybar/config&lt;/code&gt;);&lt;/li&gt;
&lt;li&gt;использую для локальных настроек только для &lt;em&gt;i3&lt;/em&gt;: &lt;code&gt;~/.config/i3/polybar/config&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!--list-separator--&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Скрипт запуска&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Создадим скрипт запуска &lt;code&gt;polybar&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#!/bin/bash
# ~/.config/i3/polybar/launch.sh

# Terminate already running bar instances
killall -q polybar
# If all your bars have ipc enabled, you can also use
# polybar-msg cmd quit

# Wait until the processes have been shut down
while pgrep -u $UID -x polybar &amp;gt;/dev/null; do sleep 1; done

# Launch Polybar, using config location ~/.config/i3/polybar/config
polybar --config=~/.config/i3/polybar/config i3 &amp;amp;

echo &amp;quot;Polybar launched...&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Установим права на исполнение:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;chmod +x ~/.config/i3/polybar/launch.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Добавим вызов &lt;code&gt;polybar&lt;/code&gt; в файл конфигурации &lt;em&gt;i3&lt;/em&gt;. Конфигурацию для &lt;em&gt;i3bar&lt;/em&gt; следует закомментировать.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;## ~/.config/i3/config

## Start i3bar to display a workspace bar
# bar {
#     font pango:Source Sans Pro, FontAwesome 5 Free 10
#     status_command	i3status --config ~/.config/i3/i3status/config
#     position		top
# }

## Start polybar
exec_always --no-startup-id ~/.config/i3/polybar/launch.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;строка-состояний&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.2&lt;/span&gt; Строка состояний&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;По умолчанию используется &lt;code&gt;dmenu&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Можно заменить на &lt;code&gt;rofi&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;rofi&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3.2.1&lt;/span&gt; rofi&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Используется для запуска приложений, переключения окон.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/davatorium/rofi&#34;&gt;https://github.com/davatorium/rofi&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Конфигурация по умолчанию находится в &lt;code&gt;~/.config/rofi/config&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Для выбора темы можно использовать команду:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;rofi-theme-selector
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Для запуска программ используется несколько мод:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;run&lt;/code&gt;: запускать приложения из пути (&lt;code&gt;$PATH&lt;/code&gt;) с возможностью запуска в терминале.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;drun&lt;/code&gt;: запускать приложения на основе desctop-файлов (по стандарту XDG).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;window&lt;/code&gt;: переключение между окнами в оконном менеджере, совместимом со спецификацией EWMH.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ssh&lt;/code&gt;: подключение к удаленному хосту через &lt;code&gt;ssh&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;file-browser&lt;/code&gt;: базовый файловый броузер для открытия файлов.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;keys&lt;/code&gt;: список внутренних привязок клавиш.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;script&lt;/code&gt;: использование простых скриптов.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;combi&lt;/code&gt;: объединяет несколько мод в одну.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Использование запятых в файле настроек &lt;em&gt;i3&lt;/em&gt; может привести к проблемам. Лучше использовать файл настроек &lt;em&gt;rofi&lt;/em&gt; или замените запятые символом &lt;code&gt;#&lt;/code&gt;, например, заменить строку&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;rofi -combi-modi window,drun,ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;на&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;rofi -combi-modi window#drun#ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Возможная конфигурация в командной строке команды &lt;code&gt;rofi&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;## ~/.config/i3/config
set $menu rofi -combi-modi window#drun -show combi -modi combi -show-icons
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Конфигурация с помощью конфигурационного файла (поместим его в &lt;code&gt;~/.config/i3/rofi/config&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;приложения&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4&lt;/span&gt; Приложения&lt;/h2&gt;
&lt;h3 id=&#34;снимки-экрана&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4.1&lt;/span&gt; Снимки экрана&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Для скриншотов можно использовать &lt;a href=&#34;https://github.com/resurrecting-open-source-projects/scrot&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;scrot&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Gentoo&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;emerge media-gfx/scrot
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Добавим в конфигурационный файл:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;### Screenshots
bindsym --release Print exec --no-startup-id scrot -e &#39;mv $f `xdg-user-dir PICTURES` 2&amp;gt;/dev/null&#39;
bindsym --release Shift+Print exec --no-startup-id scrot -s -e &#39;mv $f `xdg-user-dir PICTURES` 2&amp;gt;/dev/null&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;По клавише &lt;code&gt;PtrScr&lt;/code&gt; делается скриншот.&lt;/li&gt;
&lt;li&gt;По клавише &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;PtrScr&lt;/code&gt; предлагается выделить область экрана, скриншот которой следует сделать.&lt;/li&gt;
&lt;li&gt;Скриншоты переносятся в каталог $XDG_PICTURES_DIR (обычно &lt;code&gt;~/Изображения&lt;/code&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>Мультимедиа сервер PipeWire</title>
      <link>https://yamadharma.github.io/ru/post/2021/04/28/pipewire-multimedia-server/</link>
      <pubDate>Wed, 28 Apr 2021 16:28:00 +0300</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2021/04/28/pipewire-multimedia-server/</guid>
      <description>&lt;p&gt;PipeWire - это новый аудио и видео сервер. В основном для Wayland. Должен заменить другие видео-серверы.&lt;/p&gt;
&lt;details class=&#34;toc-inpage d-print-none  &#34; open&gt;
  &lt;summary class=&#34;font-weight-bold&#34;&gt;Содержание&lt;/summary&gt;
  &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#общая-информация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#установка&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; Установка&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#настройка-пользовательской-сессии&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3&lt;/span&gt; Настройка пользовательской сессии&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#использование-с-другими-серверами&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4&lt;/span&gt; Использование с другими серверами&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#замена-pulseaudio&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4.1&lt;/span&gt; Замена PulseAudio&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#замена-jack&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4.2&lt;/span&gt; Замена Jack&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#backlinks&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5&lt;/span&gt; Backlinks&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
&lt;/details&gt;

&lt;h2 id=&#34;общая-информация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Репозиторий проекта: &lt;a href=&#34;https://gitlab.freedesktop.org/pipewire/pipewire&#34;&gt;https://gitlab.freedesktop.org/pipewire/pipewire&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Wiki проекта: &lt;a href=&#34;https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/home&#34;&gt;https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/home&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;установка&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; Установка&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Gentoo
Установить само приложение:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;emerge --ask media-video/pipewire
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;настройка-пользовательской-сессии&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3&lt;/span&gt; Настройка пользовательской сессии&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;По умолчанию pipewire настроен на использование systemd.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Для каждого пользователя можно установить активацию по обращению к сокету:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;systemctl --user enable --now pipewire.socket
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;или запустить сразу необходимый процесс:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;systemctl --user enable --now pipewire.service
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Кроме того, необходимо запустить демон сессии:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;systemctl --user enable --now pipewire-media-session.service
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;использование-с-другими-серверами&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4&lt;/span&gt; Использование с другими серверами&lt;/h2&gt;
&lt;h3 id=&#34;замена-pulseaudio&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4.1&lt;/span&gt; Замена PulseAudio&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Одновременно отключим PelseAudio и включим PipeWire для каждого пользователя:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;systemctl --user disable pulseaudio.socket pulseaudio.service
systemctl --user enable pipewire.socket pipewire-pulse.socket
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Можно замаскировать PulseAudio, чтобы он не стартовал автоматически:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;systemctl --user mask pulseaudio.socket pulseaudio.service
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Кроме того, можно удалить файлы, оставшиеся от PulseAudio:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;rm -r ~/.config/pulse/
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;замена-jack&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4.2&lt;/span&gt; Замена Jack&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Для маршрутизации клиентов Jack через PipeWire в настоящее время
предпочтительно запускать их через &lt;code&gt;pw-jack&lt;/code&gt;, который использует
&lt;code&gt;LD_PRELOAD&lt;/code&gt; для использования библиотек PipeWire вместо Jack, например:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;pw-jack &amp;lt;application&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Можно задать собственный размер буфера, установив размер_буфера/частота_дискретизации:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;PIPEWIRE_LATENCY=&amp;quot;128/48000&amp;quot; pw-jack &amp;lt;application&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;backlinks&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5&lt;/span&gt; Backlinks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://yamadharma.github.io/ru/post/2021/04/10/system-administration/&#34;&gt;Системное администрирование&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>Переход на Sway</title>
      <link>https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/</link>
      <pubDate>Thu, 10 Sep 2020 10:33:15 +0300</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2020/09/10/migration-sway/</guid>
      <description>&lt;p&gt;Решил попробовать &lt;a href=&#34;https://wayland.freedesktop.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Wayland&lt;/a&gt;. По этой причине пришлось &lt;a href=&#34;http://way-cooler.org/blog/2020/01/09/way-cooler-post-mortem.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;перейти&lt;/a&gt; с &lt;a href=&#34;https://awesomewm.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;awesome&lt;/a&gt; на &lt;a href=&#34;https://swaywm.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;swlay&lt;/a&gt;.&lt;/p&gt;
&lt;details class=&#34;toc-inpage d-print-none  &#34; open&gt;
  &lt;summary class=&#34;font-weight-bold&#34;&gt;Содержание&lt;/summary&gt;
  &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#общая-информация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Общая информация&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#установка-sway&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; Установка &lt;code&gt;sway&lt;/code&gt;&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#репозитории-gentoo&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.1&lt;/span&gt; Репозитории &lt;code&gt;gentoo&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#первоначальная-конфигурация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3&lt;/span&gt; Первоначальная конфигурация&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#комбинации-клавиш&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4&lt;/span&gt; Комбинации клавиш&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#замена-приложений&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5&lt;/span&gt; Замена приложений&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#снимки-экрана&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.1&lt;/span&gt; Снимки экрана&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#видеозапись-экрана--скринкаст&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.2&lt;/span&gt; Видеозапись экрана (скринкаст)&lt;/a&gt;
          &lt;ul&gt;
            &lt;li&gt;&lt;a href=&#34;#видеозапись-экрана-командная-строка&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.2.1&lt;/span&gt; Видеозапись экрана &amp;ndash; командная строка&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&#34;#видеозапись-экрана-графическое-приложение&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.2.2&lt;/span&gt; Видеозапись экрана &amp;ndash; графическое приложение&lt;/a&gt;&lt;/li&gt;
          &lt;/ul&gt;
        &lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#строка-состояний&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.3&lt;/span&gt; Строка состояний&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#уведомления&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.4&lt;/span&gt; Уведомления&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#настройка-вывода&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.5&lt;/span&gt; Настройка вывода&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#меню-программ--launcher&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.6&lt;/span&gt; Меню программ (launcher)&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#буфер-обмена&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.7&lt;/span&gt; Буфер обмена&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
&lt;/details&gt;

&lt;h2 id=&#34;общая-информация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;1&lt;/span&gt; Общая информация&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://swaywm.org/&#34;&gt;https://swaywm.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Создавался для замены i3 (см. &lt;a href=&#34;https://yamadharma.github.io/ru/post/2021/05/14/window-manager-i3/&#34;&gt;Window manager i3&lt;/a&gt;) под Wayland.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;установка-sway&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2&lt;/span&gt; Установка &lt;code&gt;sway&lt;/code&gt;&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;emerge -v gui-wm/sway
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;репозитории-gentoo&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;2.1&lt;/span&gt; Репозитории &lt;code&gt;gentoo&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;Программы для Wayland есть как в основном репозитории, так и
дополнительных. Хочу порекомендовать для просмотра следующие
репозитории:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/epsilon-0/wayland-desktop&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;wayland-desktop&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;!--listend--&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;layman -a wayland-desktop
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://wiki.gentoo.org/wiki/Project:GURU&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;guru&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;!--listend--&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;layman -a guru
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;первоначальная-конфигурация&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;3&lt;/span&gt; Первоначальная конфигурация&lt;/h2&gt;
&lt;p&gt;При запуске без локальной конфигурации &lt;code&gt;sway&lt;/code&gt; использует глобальную конфигурацию &lt;code&gt;/etc/sway/config&lt;/code&gt;. При желании внести изменение в конфигурацию можно скопировать файл глобальной конфигурации в локальную:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mkdir -p ~/.config/sway
cp /etc/sway/config ~/.config/sway/
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;комбинации-клавиш&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;4&lt;/span&gt; Комбинации клавиш&lt;/h2&gt;
&lt;p&gt;Основные сочетания клавиш:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;Enter&lt;/code&gt; &amp;ndash; открыть новый терминал;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;d&lt;/code&gt; &amp;ndash; запустить программу;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;0&lt;/code&gt;.. &lt;code&gt;9&lt;/code&gt; &amp;ndash; переключение между workspace&amp;rsquo;ами;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;0&lt;/code&gt; .. &lt;code&gt;9&lt;/code&gt; &amp;ndash; перемещение окон в заданный workspace;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;q&lt;/code&gt; &amp;ndash; закрыть текущее окно;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + стрелки &amp;ndash; перемещение между окнами, вместо стрелочек также   могут быть использованы клавиши «J» (влево), «K» (вниз), «L» (вверх) и  «;» (вправо);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt; + стрелки &amp;ndash; перемещение окон в пределах workspace&amp;rsquo;а, вместо стрелок также могут быть использованы буквы и точка с запятой;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;v&lt;/code&gt; &amp;ndash; использовать вертикальное разбиение;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;h&lt;/code&gt; &amp;ndash; использовать горизонтальное разбиение;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;e&lt;/code&gt; &amp;ndash; размещение окон по-умолчанию (default layout);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;s&lt;/code&gt; &amp;ndash; стековое размещение (stacking layout);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;w&lt;/code&gt; &amp;ndash; размещение с табами (tabbed layout);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;f&lt;/code&gt; &amp;ndash; раскрыть окно во весь экран или свернуть его обратно;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;Space&lt;/code&gt; &amp;ndash; разрешить свободное перемещение окна (floating mode) или вернуть его в мозаику;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;c&lt;/code&gt; &amp;ndash; перечитать конфигурацию &lt;code&gt;sway&lt;/code&gt; (перестартовать);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mod&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;e&lt;/code&gt; &amp;ndash; выйти из &lt;code&gt;sway&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Кроме того, часть сочетаний клавиш определяется в файлах, определяющих конкретный функционал.&lt;/p&gt;
&lt;h2 id=&#34;замена-приложений&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5&lt;/span&gt; Замена приложений&lt;/h2&gt;
&lt;h3 id=&#34;снимки-экрана&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.1&lt;/span&gt; Снимки экрана&lt;/h3&gt;
&lt;p&gt;Исходно использовался &lt;code&gt;scrot&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Для Wayland перешёл на связку &lt;a href=&#34;https://github.com/emersion/grim&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;grim&lt;/a&gt; (получение снимка экрана) + &lt;a href=&#34;https://github.com/emersion/slurp&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;slurp&lt;/a&gt; (выделение области экрана):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;emerge -uv gui-apps/slurp gui-apps/grim
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Настроим получение снимков экрана:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;# ~/.config/sway/config.d/80-screenshots.conf
# Screenshot active display
bindsym Print exec grim -t png &amp;quot;$(xdg-user-dir PICTURES)&amp;quot;/$(date +%Y-%m-%d_%H-%M-%S).png

# Screenshot current window
bindsym $mod+Print exec grim -g &amp;quot;$(swaymsg -t get_tree | jq -r &#39;.. | select(.pid? and .visible?) | .rect | &amp;quot;\(.x),\(.y) \(.width)x\(.height)&amp;quot;&#39;)&amp;quot; &amp;quot;$(xdg-user-dir PICTURES)&amp;quot;/$(date +%Y-%m-%d_%H-%M-%S).png

# Screenshot selected region
bindsym $mod+Shift+Print exec grim -t png -g &amp;quot;$(slurp)&amp;quot; &amp;quot;$(xdg-user-dir PICTURES)&amp;quot;/$(date +%Y-%m-%d_%H-%M-%S).png
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;При нажатии клавиши &lt;code&gt;PrtScr&lt;/code&gt; делается снимок всего экрана.&lt;/li&gt;
&lt;li&gt;При нажатии &lt;code&gt;Mod4&lt;/code&gt; + &lt;code&gt;PrtScr&lt;/code&gt; делается снимок активного окна.&lt;/li&gt;
&lt;li&gt;При нажатии &lt;code&gt;Mod4&lt;/code&gt; + &lt;code&gt;Shift&lt;/code&gt; + &lt;code&gt;PrtScr&lt;/code&gt; предлагается выбрать область экрана, снимок которой следует сделать.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;видеозапись-экрана--скринкаст&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.2&lt;/span&gt; Видеозапись экрана (скринкаст)&lt;/h3&gt;
&lt;p&gt;Ранее использовался &lt;a href=&#34;https://www.maartenbaert.be/simplescreenrecorder/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;SimpleScreenRecorder&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id=&#34;видеозапись-экрана-командная-строка&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.2.1&lt;/span&gt; Видеозапись экрана &amp;ndash; командная строка&lt;/h4&gt;
&lt;p&gt;Для записи из командной строки используем &lt;a href=&#34;https://github.com/ammen99/wf-recorder&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;wf-recorder&lt;/a&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;emerge -v gui-apps/wf-recorder
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Варианты использования:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Запись всего экрана в файл &lt;code&gt;recording.mkv&lt;/code&gt; (только видео):&lt;/li&gt;
&lt;/ul&gt;
&lt;!--listend--&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;wf-recorder -f recording$(date +%Y-%m-%d_%H-%M-%S).mkv
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Если файл не указывать, запись будет в текущий каталог.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Запись фрагмента экрана (тут имя файла задаётся по времени начала
записи):&lt;/li&gt;
&lt;/ul&gt;
&lt;!--listend--&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;wf-recorder -g &amp;quot;$(slurp)&amp;quot; -f $(date +%Y-%m-%d_%H-%M-%S).mkv
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Запись со звуком:&lt;/li&gt;
&lt;/ul&gt;
&lt;!--listend--&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;wf-recorder --audio -f $(date +%Y-%m-%d_%H-%M-%S).mkv
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Запись с использование GPU (VAAPI интерфейс):&lt;/li&gt;
&lt;/ul&gt;
&lt;!--listend--&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;wf-recorder --audio -f $(date +%Y-%m-%d_%H-%M-%S).mkv -c h264_vaapi -d /dev/dri/renderD128
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;видеозапись-экрана-графическое-приложение&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.2.2&lt;/span&gt; Видеозапись экрана &amp;ndash; графическое приложение&lt;/h4&gt;
&lt;p&gt;Для захвата десктопа в Wayland используется плагин &lt;a href=&#34;https://hg.sr.ht/~scoopta/wlrobs&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;wlrobs&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;строка-состояний&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.3&lt;/span&gt; Строка состояний&lt;/h3&gt;
&lt;p&gt;Sway поддерживает свою строку состояний &lt;code&gt;sway-bar&lt;/code&gt;. Удобное и минималистическое приложение. Однако, удручает, что иконки в трее не активны.&lt;/p&gt;
&lt;p&gt;Попробуем использовать более продвинутый вариант &amp;ndash; &lt;a href=&#34;https://github.com/Alexays/Waybar&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;waybar&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;emerge -v gui-apps/waybar
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Конфигурация:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;## sway-bar
# Read `man 5 sway-bar` for more information about this section.

# bar {
#     position top

#     # When the status_command prints a new line to stdout, swaybar updates.
#     # The default just shows the current date and time.
#     status_command while date +&#39;%Y-%m-%d %H:%M:%S&#39;; do sleep 1; done

#     colors {
#         statusline #ffffff
#         background #323232
#         inactive_workspace #32323200 #32323200 #5c5c5c
#     }
# }

## Waybar
# &amp;lt;https://github.com/Alexays/Waybar&amp;gt;

exec_always ~/.config/sway/scripts/waybar.sh

# Waybar Tooltips don&#39;t steel focus

no_focus [app_id=&amp;quot;waybar&amp;quot;]
for_window [app_id=&amp;quot;waybar&amp;quot; floating] {
    move position cursor
    move down 60px # adjust if some menus still don&#39;t fit
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Конфигурацию &lt;code&gt;waybar&lt;/code&gt; поместил в &lt;code&gt;~/.config/sway/other/waybar&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;уведомления&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.4&lt;/span&gt; Уведомления&lt;/h3&gt;
&lt;p&gt;Используется &lt;a href=&#34;https://github.com/emersion/mako&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;mako&lt;/a&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;emerge -v gui-apps/mako
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Сконфигурировал следующим образом:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;# ~/.config/sway/config.d/80-mako.conf
# Light
exec_always mako --font &#39;Source Code Pro 10&#39; --background-color &#39;#fdf6e3&#39; --text-color &#39;#657b83&#39; --default-timeout 5000 --width 400 --markup 1 --border-radius 5

# Dark
# exec_always mako --font &#39;Source Code Pro 10&#39; --background-color &#39;#002b36&#39; --text-color &#39;#839496&#39; --default-timeout 5000 --width 400 --markup 1 --border-radius 5
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;настройка-вывода&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.5&lt;/span&gt; Настройка вывода&lt;/h3&gt;
&lt;p&gt;В XWindow используется программа &lt;code&gt;xrandr&lt;/code&gt; (с её помощью можно изменять параметры вывода изображения RandR). В &lt;code&gt;sway&lt;/code&gt; можно управлять с помощью &lt;code&gt;swaymsg output&lt;/code&gt; или с помощью утилиты &lt;a href=&#34;https://github.com/emersion/wlr-randr&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;wlr-randr&lt;/a&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;emerge -v gui-apps/wlr-randr
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;меню-программ--launcher&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.6&lt;/span&gt; Меню программ (launcher)&lt;/h3&gt;
&lt;p&gt;Для запуска программы используется &lt;code&gt;dmenu&lt;/code&gt;. Если не нравится, можно заменить.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://hg.sr.ht/~scoopta/wofi&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;wofi&lt;/a&gt; &amp;mdash; аналог &lt;code&gt;rofi&lt;/code&gt; для Wayland. Попроще, конечно.&lt;/li&gt;
&lt;/ul&gt;
&lt;!--listend--&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;emerge -v gui-apps/wofi
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;В отличии от &lt;code&gt;dmenu&lt;/code&gt; запоминает последние выбранные команды.&lt;/p&gt;
&lt;p&gt;Общая конфигурация:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf-unix&#34;&gt;# ~/.config/sway/config.d/80-launcher.conf

# dmenu

set $menu dmenu_path | dmenu | xargs swaymsg exec --

# wofi
# --show &amp;lt;mode&amp;gt;
# &amp;lt;mode&amp;gt;:
# - `run` - searches $PATH for executables and allows them to be run by selecting them.
# - `drun` - searches $XDG_DATA_HOME/applications and $XDG_DATA_DIRS/applications for desktop files and allows them to be run by selecting them.
# - `dmenu` - reads from stdin and displays options which when selected will be output to stdout.

# set $menu dmenu_path | wofi -c ~/.config/sway/other/wofi/config -s ~/.config/sway/other/wofi/style.css --show dmenu | xargs swaymsg exec --

# rofi

# set $menu rofi -combi-modi window#drun -show combi -modi combi -show-icons
# set $menu rofi -m $(swaymsg -t get_outputs | jq &#39;map(select(.active) | .focused) | index(true)&#39;) -show combi -modi combi -combi-modi window#drun -show-icons -run-command &#39;swaymsg exec -- {cmd}&#39;

# gmenu

# set $menu gtkmenu --width 500 --height 260 -no-generic
# set $menu nwggrid

# bemenu

# set $menu j4-dmenu-desktop --dmenu=&amp;quot;bemenu-run.sh -l 30&amp;quot; --term=&amp;quot;alacritty&amp;quot; --no-generic

# Start your launcher

bindsym $mod+d exec $menu
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;буфер-обмена&#34;&gt;&lt;span class=&#34;section-num&#34;&gt;5.7&lt;/span&gt; Буфер обмена&lt;/h3&gt;
&lt;p&gt;Предлагается использовать &lt;a href=&#34;https://github.com/bugaevc/wl-clipboard&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;wl-clipboard&lt;/a&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;emerge -v gui-apps/wl-clipboard
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Пакет содержит две утилиты: &lt;code&gt;wl-copy&lt;/code&gt; и &lt;code&gt;wl-paste&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Пример использования:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# copy a simple text message
$ wl-copy Hello world!

# copy the list of files in Downloads
$ ls ~/Downloads | wl-copy

# copy an image file
$ wl-copy &amp;lt; ~/Pictures/photo.png

# paste to a file
$ wl-paste &amp;gt; clipboard.txt

# grep each pasted word in file source.c
$ for word in $(wl-paste); do grep $word source.c; done

# copy the previous command
$ wl-copy &amp;quot;!!&amp;quot;

# replace the current selection with the list of types it&#39;s offered in
$ wl-paste --list-types | wl-copy
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>amd64 и flash</title>
      <link>https://yamadharma.github.io/ru/post/2006/09/24/amd64-i-flash/</link>
      <pubDate>Sun, 24 Sep 2006 15:19:00 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2006/09/24/amd64-i-flash/</guid>
      <description>&lt;p&gt;Попробовал использовать сначала &lt;code&gt;nspluginwrapper&lt;/code&gt;. Работает хорошо. Через &lt;code&gt;qemu&lt;/code&gt;. Но &lt;code&gt;qemu&lt;/code&gt;, откомпилированный &lt;code&gt;gcc-4&lt;/code&gt;, не работает. Поэтому пришлось перейти на &lt;code&gt;gnash&lt;/code&gt;. Snapshot августовский не откомпилировался. Июньский нормально, но нет звука. Поставил из cvs &amp;mdash; проблемы с прозрачностью. Звука тоже нет.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Monit и gentoo rc-scripts</title>
      <link>https://yamadharma.github.io/ru/post/2006/09/17/monit-i-gentoo-rc-scripts/</link>
      <pubDate>Sun, 17 Sep 2006 20:55:00 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2006/09/17/monit-i-gentoo-rc-scripts/</guid>
      <description>&lt;p&gt;При использовании monit для перезапуска rc-скриптов в gentoo использовал killall и опцию zap.&lt;br&gt;
Нашёл это-же решение, но оформленное красивее.&lt;/p&gt;
&lt;p&gt;Это файл /etc/monit.d/bin/kickservice&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;##!/bin/sh  
## kickservice by Eric Radman  
## Script used by monit to kill off and restart daemons  
## /etc/monit.d/bin/kickservice  
   
function stop ()  
{  
     /etc/init.d/$1 pause  
     /etc/init.d/$1 zap  
     if [ &amp;quot;$2&amp;quot; == &amp;quot;kill&amp;quot; ]  
         then  
         /bin/killall $3  
     fi  
}  
   
function start ()  
{  
     /etc/init.d/$1 zap  
     /etc/init.d/$1 start  
}  
   
case &amp;quot;$1&amp;quot; in  
  start)  
     start $2 $3 $4  
     ;;  
  stop)  
     stop $2 $3 $4  
     ;;  
  *)  
     echo &amp;quot;Usage: kickservice [start|stop] [service] kill [daemon]&amp;quot;  
     ;;  
 esac  
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Проблема возникла из-за того, что при установке baselayout-1.12.x перестал нормально работать pppd (при подключении через pptp к VPN-серверу провайдера). Очень часто соединение не устанавливается (вина, думаю, провайдерского сервера). По идее после этого он должен перезапускаться, а он просто ничего не делал. Решил снять проблему с помощью monit.&lt;br&gt;
Убрал net.ppp0 из загрузки, и заставил monit мониторить ppp0.&lt;/p&gt;
&lt;p&gt;Вот скрипт /etc/monit.d/ppp0&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;check process pppd with pidfile /var/run/ppp0.pid  
   start program = &amp;quot;/etc/monit.d/bin/kickservice start net.ppp0&amp;quot;  
   stop program = &amp;quot;/etc/monit.d/bin/kickservice stop net.ppp0 kill pppd&amp;quot;  
   if 5 restarts within 5 cycles then timeout
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;P. S. Хотел запостить скрипты, но не знаю как :(&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Openoffice on amd64</title>
      <link>https://yamadharma.github.io/ru/post/2006/09/04/openoffice-on-amd64/</link>
      <pubDate>Mon, 04 Sep 2006 09:16:00 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2006/09/04/openoffice-on-amd64/</guid>
      <description>&lt;p&gt;Вчера откомпилил openoffice-2.0.4_rc1-r1 под amd64.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Gentoo: конвертация из x86 в x86_64 (2)</title>
      <link>https://yamadharma.github.io/ru/post/2006/08/21/gentoo-konvertatsija-iz-x86-v-x86-64-2/</link>
      <pubDate>Mon, 21 Aug 2006 12:19:00 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2006/08/21/gentoo-konvertatsija-iz-x86-v-x86-64-2/</guid>
      <description>&lt;ol&gt;
&lt;li&gt;Провозившись с данной проблемой выходные (и частично неделю),
провёл конвертацию.&lt;/li&gt;
&lt;li&gt;Оказалось, что всё очень просто.&lt;/li&gt;
&lt;li&gt;Однако, после начала обновления системы (&lt;code&gt;emerge -e system&lt;/code&gt;), стали
отваливаться приложения (не могут подгрузить библиотеки).&lt;/li&gt;
&lt;li&gt;К сожалению, в новом профайле не поддерживается построение
библиотек под несколько архитектур (может, просто я не знаю).&lt;/li&gt;
&lt;li&gt;Хотя в консоли всё функционирует нормально.&lt;/li&gt;
&lt;li&gt;Скоро, надеюсь, всё конвертну.&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
    <item>
      <title>Gentoo: конвертация из x86 в x86_64</title>
      <link>https://yamadharma.github.io/ru/post/2006/08/18/gentoo-konvertatsija-iz-x86-v-x86-64/</link>
      <pubDate>Fri, 18 Aug 2006 09:21:00 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2006/08/18/gentoo-konvertatsija-iz-x86-v-x86-64/</guid>
      <description>&lt;ol&gt;
&lt;li&gt;На недавно обновлённом компьютере (до этого был Pentium III)
крутится 32-битная ОС (Gentoo Linux) (Hurd и Plan9 не учитываю).&lt;/li&gt;
&lt;li&gt;Решил конвертнуть в 64-битную. Однако документации по этому вопросу
не нашёл.&lt;/li&gt;
&lt;li&gt;Так-что решил заняться самодеятельностью. Как получится, напишу об этом (с приложением скриптов).&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
  </channel>
</rss>
