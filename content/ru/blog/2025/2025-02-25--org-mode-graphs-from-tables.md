---
title: "Org-mode. Графики из таблиц"
author: ["Dmitry S. Kulyabov"]
date: 2025-02-25T15:10:00+03:00
lastmod: 2025-02-25T16:23:00+03:00
tags: ["org-mode", "emacs"]
categories: ["computer-science"]
draft: false
slug: "org-mode-graphs-from-tables"
---

Org-mode. Графики из таблиц.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Общая информация {#общая-информация}

-   Для создания графиков используется gnuplot и gnuplot-mode.


## <span class="section-num">2</span> Ресурсы {#ресурсы}

-   <https://orgmode.org/manual/Org-Plot.html>
-   <https://orgmode.org/worg/org-tutorials/org-plot.html>


## <span class="section-num">3</span> Клавиатурные сочетания {#клавиатурные-сочетания}

-   `M-x org-plot/gnuplot` привязан к клавиатурному сочетанию `C-c " g`.
-   Кроме того, можно использовать и `C-c C-c`.


## <span class="section-num">4</span> Использование {#использование}

-   Нужно задать описание `#+plot:` перед таблицей.
-   Может быть несколько записей `#+plot:`, например:
    ```org
    #+PLOT: title:"example table" ind:1 type:2d with:lines
    #+PLOT: labels:("first new label" "second column" "last column")
    ```


## <span class="section-num">5</span> Изображение в org-файле {#изображение-в-org-файле}

-   По умолчанию для отображения графика запускается отдельное окно.
-   Можно внедрить графику прямо в файл:
    ```org
    #+plot: title:"Cardio Exercise" file:"./images/gnuplot_test.png"
    |       Date | Calories | Distance | Laps |
    |------------+----------+----------+------|
    | 2022-10-26 |      266 |    1.977 |    8 |
    | 2022-10-28 |      260 |    1.962 |    8 |
    | 2022-10-29 |      150 |    1.100 |    5 |
    | 2022-10-30 |      286 |    2.090 |    9 |
    |------------+----------+----------+------|

    [[./images/gnuplot_test.png]]
    ```


## <span class="section-num">6</span> Опции команды {#опции-команды}

-   `set` : опция Gnuplot, которая должна быть установлена при построении графика.
-   `title` : заголовок графика.
-   `ind` : какой столбец таблицы использовать в качестве оси `x`.
-   `timeind` : какой столбец таблицы использовать в качестве оси `x` как значения времени.
-   `deps` : столбцы для построения графика в виде списка в стиле Lisp, окружённого круглыми скобками и разделённого пробелами, например `dep:(3 4)` для построения графика третьего и четвёртого столбцов. По умолчанию графики строятся по всем остальным столбцам, кроме столбца `ind`.
-   `transpose` : при выборе `y`, `yes` или `t` выполняется попытка транспонировать данные таблицы перед построением графика. Также распознается сокращенная опция `trans`.
-   `type` : тип графика, по умолчанию один из `2d`, `3d`, `radar` или `grid`.
-   `with` : опция для отрисовки графиков: `lines`, `points`, `boxes`, `impulses`. По умолчанию --- `lines`.
-   `file` : если вы хотите построить график в файл, укажите `path/to/desired/output-file`.
-   `labels` : список меток, которые будут использоваться для `deps`. По умолчанию это заголовки столбцов, если они существуют.
-   `line` : строка для вставки в сценарий Gnuplot.
-   `map` : при построении графиков типов `3d` или `grid` установите значение `t`, чтобы построить плоское отображение, а не наклоную проекцию.
-   `min` : минимальная граница оси. Неявно предполагает, что используется ось `y`. Можно явно указать значение для оси `x` или `y` с помощью `xmin` и `ymin`.
-   `max` : максимальная граница оси. Неявно предполагает, что ссылается на ось `y`. Можно явно указать значение для оси `x` или `y` с помощью `xmax` и `ymax`.
-   `ticks` : желаемое количество тиков по оси, которое может быть использовано типом графика. Если не задано ни одного, тип графика, требующий тиков, будет использовать `org--plot/sensible-tick-num`, чтобы попытаться определить подходящее значение.
-   `timefmt` : формат временных меток режима Org, как они будут разобраны Gnuplot. По умолчанию `%Y-%m-%d-%H:%M:%S`.
-   `script` : можно указать файл сценария (в двойных кавычках), который будет использоваться для построения графика. Перед построением каждый экземпляр `$datafile` в указанном скрипте будет заменён на путь к сгенерированному файлу данных. Даже если вы установили этот параметр, вы все равно можете указать тип графика, так как это может повлиять на содержимое файла данных.
