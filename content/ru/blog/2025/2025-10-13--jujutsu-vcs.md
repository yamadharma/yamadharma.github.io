---
title: "Система контроля версий Jujutsu"
author: ["Dmitry S. Kulyabov"]
date: 2025-10-13T10:09:00+03:00
lastmod: 2025-10-13T11:52:00+03:00
tags: ["MOC", "sysadmin", "programming"]
categories: ["computer-science"]
draft: false
slug: "jujutsu-vcs"
---

Система контроля версий Jujutsu.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Общая информация {#общая-информация}

-   Сайт: <https://jj-vcs.github.io/jj>
-   Репозиторий: <https://github.com/jj-vcs/jj>
-   Jujutsu (jj) --- система контроля версий.
-   Цели:
    -   Новый интерфейс для работы с Git.
    -   Новый дизайн для распределённого контроля версий.


## <span class="section-num">2</span> Особенности jj {#особенности-jj}


### <span class="section-num">2.1</span> Интеграция с Git {#интеграция-с-git}

-   jj совместима с Git на уровне хранения данных --- её можно использовать поверх существующих Git-репозиториев, не теряя историю и не нарушая совместимость с привычными инструментами;
-   система использует Git-хранилище как физический бэкенд для данных, предлагая при этом собственные алгоритмы работы.


### <span class="section-num">2.2</span> Упрощённая работа с изменениями {#упрощённая-работа-с-изменениями}

-   рабочая копия представлена как полноценный коммит --- это устраняет необходимость в механизме временного сохранения изменений (stash) и снимает часть ограничений, характерных для Git;
-   изменения в файлах автоматически становятся частью коммита.


### <span class="section-num">2.3</span> История операций и возможность откатиться назад {#история-операций-и-возможность-откатиться-назад}

-   jj запоминает все действия в репозитории: коммиты, скачивания (pull), пуши (push), ребейзы (rebase);
-   можно легко откатить неудачный эксперимент или понять, что происходило в репозитории в определённый момент времени.


### <span class="section-num">2.4</span> Работа с конфликтами как с полноценными объектами {#работа-с-конфликтами-как-с-полноценными-объектами}

-   в отличие от Git и Mercurial, где конфликты часто воспринимаются как текстовый шум, jj трактует их как отдельные сущности, подобные коммитам;
-   уже разрешённые конфликты могут автоматически применяться при повторном ребейзе или других похожих операциях в будущем.


### <span class="section-num">2.5</span> Автоматический ребейз потомков {#автоматический-ребейз-потомков}

-   при изменении коммита в середине истории jj автоматически перестраивает (ребейзит) все дочерние коммиты;
-   нет необходимости вручную указывать, какие ветки двигать и как обновлять ссылки.


### <span class="section-num">2.6</span> Отделение уровня хранения от уровня логики {#отделение-уровня-хранения-от-уровня-логики}

-   предусмотрен слой абстракций, позволяющий теоретически использовать различные движки хранения (Git, Mercurial и другие);
-   это открывает простор для развития и экспериментирования.


### <span class="section-num">2.7</span> Безопасные параллельные операции {#безопасные-параллельные-операции}

-   jj стремится безопасно работать в средах с параллельным доступом (например, при хранении репозитория в Dropbox-папке или использовании rsync для бэкапа);
-   особая структура данных не даёт репозиторию оказываться в неконсистентном состоянии при одновременных операциях.


### <span class="section-num">2.8</span> Полноценное журналирование и откат (undo) {#полноценное-журналирование-и-откат--undo}

-   каждый шаг --- от описания коммита до глобальных перезаписей истории --- отражается в логе операций;
-   возможность отмены любого действия помогает воссоздать утерянные состояния или разобраться в истории изменений.


## <span class="section-num">3</span> Некоторые команды jj {#некоторые-команды-jj}

-   `jj init` : инициализация репозитория;
-   `jj git clone URL [DEST]` : клонирование репозитория;
-   `jj git init --colocate` : добавление jj в существующий Git-репозиторий;
-   `jj log` : просмотр важных изменений;
-   `jj status` : проверка статуса рабочего изменения, родителя и изменённых файлов;
-   `jj undo` : отмена последней команды;
-   `jj new` : создание нового изменения;
-   `jj describe -m "edit foo"` : задание описания изменения;
-   `jj bookmark list` : показ всех закладок;
-   `jj bookmark track` : связывание локальной закладки с удалённой веткой;
-   `jj git fetch` : получение изменений из удалённого репозитория;
-   `jj git push` : отправка изменений в удалённый репозиторий.


## <span class="section-num">4</span> Соотнесение с git {#соотнесение-с-git}

-   [Сравнение Git и Jujutsu]({{< relref "2025-10-13--comparison-git-jujutsu" >}})
