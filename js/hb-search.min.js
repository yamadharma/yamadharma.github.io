let searchWrapper=null;window.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("search-config");if(!t)return;const e=JSON.parse(t.textContent);if(!e||typeof e.baseUrl=="undefined"){console.error("Pagefind search config is missing or invalid.",e);return}try{new PagefindUI({element:"#search",showSubResults:!0,baseUrl:e.baseUrl,bundlePath:e.baseUrl+"pagefind/"})}catch(e){console.error("Failed to initialize PagefindUI:",e);return}searchWrapper=document.getElementById("search-wrapper");let n=document.querySelectorAll("[data-search-toggle]");n.forEach(e=>e.addEventListener("click",handleSearchToggle))});function handleSearchToggle(){if(!searchWrapper)return;const t=searchWrapper.classList.contains("hidden");searchWrapper.classList.toggle("hidden"),document.body.style.overflow=t?"hidden":"";const e=searchWrapper.querySelector("input");if(e&&(e.value="",e.focus()),!searchWrapper.classList.contains("hidden")){let t=document.querySelector(".pagefind-ui__search-clear");t&&!t.hasAttribute("listenerOnClick")&&(t.setAttribute("listenerOnClick","true"),t.addEventListener("click",()=>{e.focus()}))}}document.addEventListener("keydown",e=>{e.key==="Escape"&&searchWrapper&&!searchWrapper.classList.contains("hidden")&&searchWrapper.classList.add("hidden")})