<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts | Д. С. Кулябов</title>
    <link>https://yamadharma.github.io/ru/post/2018/</link>
      <atom:link href="https://yamadharma.github.io/ru/post/2018/index.xml" rel="self" type="application/rss+xml" />
    <description>Posts</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>ru-ru</language><copyright>© 2023 Dmitry S. Kulyabov</copyright><lastBuildDate>Thu, 27 Dec 2018 10:05:15 +0000</lastBuildDate>
    <image>
      <url>https://yamadharma.github.io/media/icon_hu0a661dd90139895e92e2f18ae9404407_611148_512x512_fill_lanczos_center_3.png</url>
      <title>Posts</title>
      <link>https://yamadharma.github.io/ru/post/2018/</link>
    </image>
    
    <item>
      <title>Юревич А.В. - Психологи тоже шутят</title>
      <link>https://yamadharma.github.io/ru/post/2018/12/27/yurevich-psikhologi-tozhe-shutyat/</link>
      <pubDate>Thu, 27 Dec 2018 10:05:15 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/12/27/yurevich-psikhologi-tozhe-shutyat/</guid>
      <description>&lt;h2 id=&#34;юревич-ав---психологи-тоже-шутят&#34;&gt;Юревич А.В. - Психологи тоже шутят&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://flibusta.is/b/223308&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://flibusta.is/b/223308&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;К психологии книга имеет крайне отдалённое отношение. Наверное, только по специальности автора.&lt;/li&gt;
&lt;li&gt;Автору мнится, что он С. Н. Паркинсон.&lt;/li&gt;
&lt;li&gt;В книге проскальзывают сатерические моменты, впрочем, достаточно слабые.&lt;/li&gt;
&lt;li&gt;В целом, книгу можно охарактеризовать как (в меру циничное) пособие по работе в академии (университеты, НИИ).&lt;/li&gt;
&lt;li&gt;Эта информация обычно передаётся как устная информация, «через рукопожатие».&lt;/li&gt;
&lt;li&gt;Рекомендуется всем, кто хочет строить карьеру в академии.&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>Кумар М. - Квант. Эйнштейн, Бор и великий спор о природе реальности</title>
      <link>https://yamadharma.github.io/ru/post/2018/12/20/kumar-quant/</link>
      <pubDate>Thu, 20 Dec 2018 08:37:16 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/12/20/kumar-quant/</guid>
      <description>&lt;h2 id=&#34;кумар-м---квант-эйнштейн-бор-и-великий-спор-о-природе-реальности&#34;&gt;Кумар М. - Квант. Эйнштейн, Бор и великий спор о природе реальности&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://libgen.li/book/index.php?md5=11934E7D4A79D0BC87D6C292662482F6&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://libgen.li/book/index.php?md5=11934E7D4A79D0BC87D6C292662482F6&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;История развития квантовой механики.&lt;/li&gt;
&lt;li&gt;Достаточно подробная.&lt;/li&gt;
&lt;li&gt;Написана крайне ясно.&lt;/li&gt;
&lt;li&gt;Рекомендуется к прочтению всем студентам-физикам.&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>Гриббин Д., Гриббин М. - Ричард Фейнман жизнь в науке</title>
      <link>https://yamadharma.github.io/ru/post/2018/09/09/gribbin-richard-feynman-zhiznj-v-nauke/</link>
      <pubDate>Sun, 09 Sep 2018 09:13:31 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/09/09/gribbin-richard-feynman-zhiznj-v-nauke/</guid>
      <description>&lt;h2 id=&#34;гриббин-д-гриббин-м---ричард-фейнман-жизнь-в-науке&#34;&gt;Гриббин Д., Гриббин М. - Ричард Фейнман жизнь в науке&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://libgen.li/book/index.php?md5=08E452910083B9561652F1D3A76A1F64&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://libgen.li/book/index.php?md5=08E452910083B9561652F1D3A76A1F64&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;В книге нет ничего, что не было бы неизвестно из других источников. Тем более, что Фейнман много про себя написал.&lt;/li&gt;
&lt;li&gt;Но книга связывает отдельные известные кусочки в целостное полотно.&lt;/li&gt;
&lt;li&gt;Язык лёгкий.&lt;/li&gt;
&lt;li&gt;Попытки научно-популярного объяснения физики меня крайне нервируют.&lt;/li&gt;
&lt;li&gt;У мня появилась мысль, чем знаменит Ландау. Ландау знаменит тем, что был знаменит.&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>Каганов М. И., Любарский Г. Я. - Абстракция в математике и физике</title>
      <link>https://yamadharma.github.io/ru/post/2018/08/19/abstrakciya-v-matematike-i-fizike/</link>
      <pubDate>Sun, 19 Aug 2018 14:36:08 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/08/19/abstrakciya-v-matematike-i-fizike/</guid>
      <description>&lt;h2 id=&#34;каганов-м-и-любарский-г-я---абстракция-в-математике-и-физике&#34;&gt;Каганов М. И., Любарский Г. Я. - Абстракция в математике и физике&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://libgen.li/book/index.php?md5=6096DCC3AF8FF50B38BDD7EC48833B51&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://libgen.li/book/index.php?md5=6096DCC3AF8FF50B38BDD7EC48833B51&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Книга состоит из двух частей: математической и физической.&lt;/li&gt;
&lt;li&gt;Фактически это рекомендации по направлениям, которые стоит просмотреть студенту-физику-теоретику.&lt;/li&gt;
&lt;li&gt;Математическая часть достаточно стандартная. Некий минимум для каждого.&lt;/li&gt;
&lt;li&gt;В физической части упор делается на твёрдое тело и квазичастицы. Скорее всего, её писал Каганов.&lt;/li&gt;
&lt;li&gt;Физическая статья написана в духе общения с учителем: присутствует информация, которая обычно передаётся устно и не попадает в учебники.&lt;/li&gt;
&lt;li&gt;Читается легко. Можно читать в метро и на ночь. И за едой.&lt;/li&gt;
&lt;li&gt;Рекомендуется к прочтению.&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>Гришунин С. И. - Философия науки. Основные концепции и проблемы</title>
      <link>https://yamadharma.github.io/ru/post/2018/06/15/grishunin-filosofiya-nauki/</link>
      <pubDate>Fri, 15 Jun 2018 16:25:46 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/06/15/grishunin-filosofiya-nauki/</guid>
      <description>&lt;h2 id=&#34;гришунин-с-и---философия-науки-основные-концепции-и-проблемы&#34;&gt;Гришунин С. И. - Философия науки. Основные концепции и проблемы&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://libgen.li/book/index.php?md5=A15B7B243B4B2D61356FCFAC801621FD&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://libgen.li/book/index.php?md5=A15B7B243B4B2D61356FCFAC801621FD&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Краткий обзор по истории науки. Упор на постпозитивизм.&lt;/li&gt;
&lt;li&gt;Первое впечатление &amp;mdash; пособие для аспирантов для сдачи минимума по философии. Но нет.&lt;/li&gt;
&lt;li&gt;По структуре скорее рекомендация для чтения по истории науки.&lt;/li&gt;
&lt;li&gt;Тем, кто вынужден постигать философию самостоятельно.&lt;/li&gt;
&lt;li&gt;Рекомендуется для предварительного чтения.&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>Деинсталляция WebFM из Drupal</title>
      <link>https://yamadharma.github.io/ru/post/2018/05/17/webfm-uninstall/</link>
      <pubDate>Thu, 17 May 2018 08:43:05 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/05/17/webfm-uninstall/</guid>
      <description>&lt;h2 id=&#34;circumstantia&#34;&gt;Circumstantia&lt;/h2&gt;
&lt;h3 id=&#34;дано&#34;&gt;Дано&lt;/h3&gt;
&lt;p&gt;Сайт на &lt;a href=&#34;https://www.drupal.org&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Drupal&lt;/a&gt; 5.&lt;/p&gt;
&lt;h3 id=&#34;требуется&#34;&gt;Требуется&lt;/h3&gt;
&lt;p&gt;Превести сайт на Drupal 8.&lt;/p&gt;
&lt;h3 id=&#34;предварительный-план-действий&#34;&gt;Предварительный план действий&lt;/h3&gt;
&lt;p&gt;Drupal 5 -&amp;gt; Drupal 6 -&amp;gt; Drupal 8.&lt;/p&gt;
&lt;h3 id=&#34;проблема&#34;&gt;Проблема&lt;/h3&gt;
&lt;p&gt;В системе установлен пакет &lt;a href=&#34;https://www.drupal.org/project/webfm&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;webfm&lt;/a&gt;, который не поддерживается после Drupal 6. Webfm ведёт свою базу файлов, и в тексте сайта ставит указание не на файл, на а запись в своей базе данных.&lt;/p&gt;
&lt;h2 id=&#34;solutio&#34;&gt;Solutio&lt;/h2&gt;
&lt;p&gt;При поиски решения проблемы были найдены следующие сайты:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://puna.upf.edu/node/97&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://puna.upf.edu/node/97&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gist.github.com/heidar/3707913&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://gist.github.com/heidar/3707913&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Основываясь на них, набросал скипт &lt;code&gt;webfm-fix&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;#!/usr/bin/python2
import MySQLdb

# For REALY work set update = True
update = False

# connect to the databases

db = MySQLdb.connect(
	host=&amp;quot;localhost&amp;quot;,        # your host, usually localhost
	user=&amp;quot;username&amp;quot;,         # your username
	passwd=&amp;quot;userpassword&amp;quot;,   # your password
	db=&amp;quot;database&amp;quot;,           # name of the data base
	use_unicode=True, charset=&#39;utf8&#39;)

cur = db.cursor()

# get all the file ids and paths from the old webfm table

filename_query = &amp;quot;SELECT fid, fpath FROM webfm_file&amp;quot;
cur.execute(filename_query)

fid_max = 0

filenames = {}
for row in cur.fetchall():
    filenames[row[0]] = row[1]
    if fid_max &amp;lt; row[0]:
	fid_max = row[0]

# find all webfm links and replace them with the actual file path

query = &amp;quot;SELECT nid, body, teaser FROM node_revisions WHERE body like &#39;%webfm_send%&#39; OR teaser like &#39;%webfm_send%&#39;&amp;quot;
cur.execute(query)

for row in cur.fetchall():
    entity_id = row[0]
    body = row[1]
    teaser = row[2]
    for i in range(fid_max, 0, -1):
	webfm1 = u&#39;ru/webfm_send/&#39; + str(i)
        webfm2 = u&#39;webfm_send/&#39; + str(i)
        webfm_list = [webfm1, webfm2]
        for webfm in webfm_list:
	    if i in filenames:
		sql_body = &amp;quot;UPDATE node_revisions SET body = REPLACE(body,&#39;%s&#39;,&#39;%s&#39;) WHERE nid = %d&amp;quot; % (webfm,filenames[i],entity_id)
                sql_teaser = &amp;quot;UPDATE node_revisions SET teaser = REPLACE(teaser,&#39;%s&#39;,&#39;%s&#39;) WHERE nid = %d&amp;quot; % (webfm,filenames[i],entity_id)
                if update:
	            try:
	                # Execute the SQL command
	        	cur.execute(sql_body)
                        cur.execute(sql_teaser)
	                # Commit your changes in the database
	        	db.commit()
	            except:
	                # Rollback in case there is any error
                        db.rollback()
db.close()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;При написании скрипта использовал следующую информацию:
&lt;a href=&#34;https://drupal.stackexchange.com/questions/6787/where-does-drupal-store-the-content-of-a-nodes-body&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Where does Drupal store the content of a node&amp;rsquo;s body?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;In Drupal 6, content of the node&amp;rsquo;s body is saved in &lt;code&gt;node_revisions&lt;/code&gt; table under &lt;code&gt;body&lt;/code&gt; field.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;node_revisions.body
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In Drupal 7, content of the node&amp;rsquo;s body is saved in &lt;code&gt;field_data_body&lt;/code&gt; table under &lt;code&gt;body_value&lt;/code&gt; field. In case content revisions are there then it also saves the data in &lt;code&gt;field_revision_body&lt;/code&gt; table under &lt;code&gt;body_value&lt;/code&gt; field.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;field_data_body.body_value
field_revision_body.body_value
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In Drupal 8, content of the node&amp;rsquo;s body is saved in &lt;code&gt;node__body&lt;/code&gt; table under &lt;code&gt;body_value&lt;/code&gt; field. In case content revisions are there then it also saves the data in &lt;code&gt;node_revision__body&lt;/code&gt; table under &lt;code&gt;body_value&lt;/code&gt; field.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;node__body.body_value
node_revision__body.body_value
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>Басовская Н. И. - От царицы Тамары до д’Артаньяна</title>
      <link>https://yamadharma.github.io/ru/post/2018/04/22/basovskaya-ot-tamary-do-dartagnana/</link>
      <pubDate>Sun, 22 Apr 2018 16:55:59 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/04/22/basovskaya-ot-tamary-do-dartagnana/</guid>
      <description>&lt;h2 id=&#34;басовская-н-и-----от-царицы-тамары-до-дартаньяна-путеводитель-по-мировой-истории&#34;&gt;Басовская Н. И. &amp;mdash; От царицы Тамары до д’Артаньяна. Путеводитель по мировой истории&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://libgen.li/book/index.php?md5=bb9dda15d10afb4a22c3356b8f67fb40&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://libgen.li/book/index.php?md5=bb9dda15d10afb4a22c3356b8f67fb40&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Поскольку автор является историком, ожидал историческую книгу.&lt;/li&gt;
&lt;li&gt;Однако по стилю получил пачку лекций уровня провинциального общества «Знание».&lt;/li&gt;
&lt;li&gt;Лекции явно литературно не обработаны. Читать крайне трудно.&lt;/li&gt;
&lt;li&gt;Вероятно, специалист подобен флюсу. Тематика лекций находится за пределами Столетней войны. И уровень изложения крайне низок.&lt;/li&gt;
&lt;li&gt;Лучше и не читать.&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>Миграция с livejournal на hexo</title>
      <link>https://yamadharma.github.io/ru/post/2018/04/21/from-lj-to-hexo/</link>
      <pubDate>Sat, 21 Apr 2018 15:37:34 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/04/21/from-lj-to-hexo/</guid>
      <description>&lt;p&gt;Миграция с &lt;a href=&#34;https://yamadharma.livejournal.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;livejornal&lt;/a&gt; составила некоторые проблемы.&lt;/p&gt;
&lt;p&gt;Хочу заметить, что комментарии я не переносил.&lt;/p&gt;
&lt;p&gt;Наиболее подходящим показался мне &lt;a href=&#34;https://github.com/arty-name/livejournal-export&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;livejournal-export&lt;/a&gt;. Он переводит сразу в &lt;em&gt;markdown&lt;/em&gt;. Однако, при этом не импортируются теги.
Для идентификации использует параметры сессии броузера.&lt;/p&gt;
&lt;p&gt;Вторым вариантом я рассмотрел &lt;a href=&#34;https://github.com/ghewgill/ljdump&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ljdump&lt;/a&gt;. Он скачивает журнал в &lt;em&gt;html&lt;/em&gt;. Для идентификации использует логин и пароль.&lt;/p&gt;
&lt;p&gt;Потом пришлось преобразовать в &lt;em&gt;markdown&lt;/em&gt;. Для этого написал скрипт &lt;em&gt;xml2md&lt;/em&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;##!/usr/bin/python3
## -*- coding: utf-8 -*-

import os
import sys
from lxml import etree
import html2text
from datetime import datetime
from transliterate import translit, get_available_language_codes

outdir = &#39;markdown&#39;
os.makedirs(outdir, exist_ok=True)

infile = sys.argv[1]
print(infile)

tree = etree.parse(infile)
post = tree.getroot()

postTitle = &#39;&#39;
postTags = &#39;&#39;

for elem in post.getchildren():
    if not elem.text:
        text = &amp;quot;None&amp;quot;
    else:
        text = elem.text
    ## print(elem.tag + &amp;quot; =&amp;gt; &amp;quot; + text)
    ## book_dict[elem.tag] = text
    if elem.tag == &#39;subject&#39;:
        postTitle = text
    if elem.tag == &#39;eventtime&#39;:
        postDate = text
    if elem.tag == &#39;event&#39;:
        postContent = text
    if elem.tag == &#39;props&#39;:
        for propsElem in elem.getchildren():
            if not elem.text:
                text = &amp;quot;None&amp;quot;
            else:
                text = propsElem.text
            ## print(propsElem.tag + &amp;quot; =&amp;gt; &amp;quot; + text)
            if propsElem.tag == &#39;taglist&#39;:
                postTags = text
            



postHeader = &#39;layout: post\n&#39;+&#39;title: &#39;+postTitle+&#39;\n&#39;+&#39;date: &#39;+str(postDate)
postHeader = postHeader+&#39;\ncategories: blog\nlang: ru&#39;
postHeader = postHeader+&#39;\ntags: [&#39;+postTags+&#39;]&#39;
postHeader = postHeader+&#39;\n&#39;+&#39;---&#39;

h = html2text.HTML2Text()
h.ignore_links = False
h.body_width = 0
h.unicode_snob = True
postContent = h.handle(postContent)

fullPost = postHeader+&#39;\n\n\n&#39;+postContent

date = datetime.strptime(postDate, &#39;%Y-%m-%d %H:%M:%S&#39;)
outFile = &#39;{0.year}-{0.month:02d}-{0.day:02d}&#39;.format(date)
if postTitle != &#39;&#39;:
    translitTitle = translit(postTitle, &#39;ru&#39;, reversed=True)
    translitTitle = translitTitle.replace(&amp;quot; &amp;quot;,&amp;quot;_&amp;quot;)
    translitTitle = translitTitle.replace(&amp;quot;:&amp;quot;,&amp;quot;&amp;quot;)
    translitTitle = translitTitle.replace(&amp;quot;&#39;&amp;quot;,&amp;quot;&amp;quot;)
    translitTitle = translitTitle.replace(&amp;quot;«&amp;quot;,&amp;quot;&amp;quot;)
    translitTitle = translitTitle.replace(&amp;quot;»&amp;quot;,&amp;quot;&amp;quot;)
    translitTitle = translitTitle.replace(&amp;quot;;&amp;quot;,&amp;quot;&amp;quot;)
else:
    translitTitle = &#39;{0.hour:02d}-{0.minute:02d}-{0.second:02d}&#39;.format(date)
outFile = outFile+&#39;-&#39;+translitTitle

f = open(outdir+&#39;/&#39;+str(outFile)+&#39;.md&#39;, &#39;w&#39;)
f.write(fullPost)
f.close()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Преобразование можно выполнить с помощью команды:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;./xml2md &amp;lt;file&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;При этом создаётся каталог &lt;em&gt;markdown&lt;/em&gt; и в него помещается результат конвертации.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Установка темы NexT для hexo</title>
      <link>https://yamadharma.github.io/ru/post/2018/04/04/hexo-theme-next/</link>
      <pubDate>Wed, 04 Apr 2018 13:24:22 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/04/04/hexo-theme-next/</guid>
      <description>&lt;p&gt;Пробую поменять тему оформления блога на &lt;a href=&#34;https://github.com/iissnan/hexo-theme-next&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;NexT&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Также можно посмотреть документацию:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/theme-next/hexo-theme-next/blob/master/docs/ru/README.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/theme-next/hexo-theme-next/blob/master/docs/ru/README.md&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/iissnan/hexo-theme-next/blob/master/README.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/iissnan/hexo-theme-next/blob/master/README.md&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;скачиваем-тему&#34;&gt;Скачиваем тему&lt;/h2&gt;
&lt;p&gt;Переходим в каталог блога и скачиваем.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;git clone https://github.com/theme-next/hexo-theme-next themes/next
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;конфигурационный-файл&#34;&gt;Конфигурационный файл&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;mkdir -p source/_data
cd source/_data
touch next.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Убедимся, что в файле &lt;code&gt;themes/next/_config.yml&lt;/code&gt; установлено:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;override: false
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;В корневом файле &lt;code&gt;_config.yml&lt;/code&gt; устанавливаем:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;theme: next
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;и&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;source_dir: source
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;В файл &lt;code&gt;source/_data/next.yml&lt;/code&gt; переносим из &lt;code&gt;themes/next/_config.yml&lt;/code&gt;
параметры, которые меняем.&lt;/p&gt;
&lt;h2 id=&#34;страницы-категорий-и-тегов&#34;&gt;Страницы категорий и тегов&lt;/h2&gt;
&lt;p&gt;Создадим страницы &lt;code&gt;tags&lt;/code&gt; и &lt;code&gt;categories&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;hexo new page &amp;quot;tags&amp;quot;
hexo new page &amp;quot;categories&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Отредактирем файлы &lt;code&gt;source/tags/index.md&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;---
title: tags
date: &amp;quot;2018-04-04T14:41:32+00:00&amp;quot;
type: &amp;quot;tags&amp;quot;
---
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;и &lt;code&gt;source/categories/index.md&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;---
title: categories
date: &amp;quot;2018-04-04T14:41:37+00:00&amp;quot;
type: &amp;quot;categories&amp;quot;
---
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Добавим описание меню в файл &lt;code&gt;source/_data/next.yml&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;menu:
  home: / || home
  tags: /tags/ || tags
  categories: /categories/ || th
  archives: /archives/ || archive
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;личная-фотография&#34;&gt;Личная фотография&lt;/h2&gt;
&lt;p&gt;Сделаем каталог для изображений:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;mkdir -p source/images
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Поместим туда файл (например, &lt;code&gt;avatar.jpg&lt;/code&gt;) и запишем в конфиг
&lt;code&gt;source/_data/next.yml&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;avatar: /images/avatar.jpg
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Я сделал ширину 126px.&lt;/p&gt;
&lt;h3 id=&#34;комментарии&#34;&gt;Комментарии&lt;/h3&gt;
&lt;p&gt;Комментарии настроил через Disqus.
Для этого сконфигурил на &lt;a href=&#34;http://www.disqus.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Disqus&lt;/a&gt; сайт с коротким именем &lt;em&gt;yamadharma-blog&lt;/em&gt;.
Добавил в файл &lt;code&gt;source/_data/next.yml&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;disqus:
  enable: true
  shortname: yamadharma-blog
  count: true
  lazyload: false
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>Переход блога на hexo</title>
      <link>https://yamadharma.github.io/ru/post/2018/03/28/hexo/</link>
      <pubDate>Wed, 28 Mar 2018 13:10:47 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/03/28/hexo/</guid>
      <description>&lt;p&gt;Блог на &lt;a href=&#34;https://jekyllrb.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Jekyll&lt;/a&gt; вести не получилось. Попробовал перейти на &lt;a href=&#34;https://hexo.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Hexo&lt;/a&gt;. Он
попроще, но зато всё, что нужно, работает сразу.&lt;/p&gt;
&lt;h2 id=&#34;установка-hexo&#34;&gt;Установка Hexo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Установил Hexo (глобально):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install -g hexo-cli
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Инициализировал каталог блога:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo init .
npm install
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Установил плагин для выкладывания на git (это делается в каталоге блога):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install hexo-deployer-git --save
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Установил плагин для генерации RSS (такая опция есть в теме):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install hexo-generator-feed --save
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Задал конфигурацию &lt;code&gt;_config.yml&lt;/code&gt;:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;# Site
title: В борьбе обретёшь ты право своё
subtitle: Делай, что должен, и будь, что будет
description:
keywords:
author: Дмитрий Кулябов
language: ru
timezone:

# URL
# If your site is put in a subdirectory, set url as &#39;http://yoursite.com/child&#39; and root as &#39;/child/&#39;
url: https://yamadharma.bitbucket.io/
root: /
permalink: :lang/:year/:month/:day/:title/
permalink_defaults:
  lang: ru

# Directory
source_dir: source
public_dir: public
tag_dir: tags
archive_dir: archives
category_dir: categories
code_dir: downloads/code
i18n_dir: :lang
skip_render:

# Writing
new_post_name: :lang/:year-:month-:day-:title.md # File name of new posts
default_layout: post
titlecase: false # Transform title into titlecase
external_link: true # Open external links in new tab
filename_case: 0
render_drafts: false
post_asset_folder: false
relative_link: false
future: true
highlight:
  enable: true
  line_number: true
  auto_detect: false
  tab_replace:

# Home page setting
# path: Root path for your blogs index page. (default = &#39;&#39;)
# per_page: Posts displayed per page. (0 = disable pagination)
# order_by: Posts order. (Order by date descending by default)
index_generator:
  path: &#39;&#39;
  per_page: 10
  order_by: -date

# Category &amp;amp; Tag
default_category: uncategorized
category_map:
tag_map:

# Date / Time format
# Hexo uses Moment.js to parse and display date
# You can customize the date format as defined in
# http://momentjs.com/docs/#/displaying/format/
date_format: YYYY-MM-DD
time_format: HH:mm:ss

# Pagination
# Set per_page to 0 to disable pagination
per_page: 10
pagination_dir: page

# Extensions
# Plugins: https://hexo.io/plugins/
# Themes: https://hexo.io/themes/
theme: landscape

# Deployment
# Docs: https://hexo.io/docs/deployment.html
deploy:
  type: git
  repo: git@bitbucket.org:yamadharma/yamadharma.bitbucket.org.git
  branch: master

# Feed
# https://github.com/hexojs/hexo-generator-feed
feed:
  type: atom
  path: atom.xml
  limit: 20
  hub:
  content:
  content_limit: 600
  content_limit_delim: &#39; &#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Таким образом, без настройки, получена работающая конфигурация.&lt;/p&gt;
&lt;h2 id=&#34;порядок-работы-следующий&#34;&gt;Порядок работы следующий&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Создаём новый файл для поста:
&lt;pre&gt;&lt;code&gt;hexo new &amp;lt;title&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;Радактируем пост.&lt;/li&gt;
&lt;li&gt;Генерим страницы:
&lt;pre&gt;&lt;code&gt;hexo generate
&lt;/code&gt;&lt;/pre&gt;
или
&lt;pre&gt;&lt;code&gt;hexo g
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;Выкладываем страницы на сайт:
&lt;pre&gt;&lt;code&gt;hexo deploy
&lt;/code&gt;&lt;/pre&gt;
или
&lt;pre&gt;&lt;code&gt;hexo d
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;Очищаем каталог:
&lt;pre&gt;&lt;code&gt;hexo clean
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>Миграция с blogspot на hexo</title>
      <link>https://yamadharma.github.io/ru/post/2018/03/27/from-blogspot-to-hexo/</link>
      <pubDate>Tue, 27 Mar 2018 15:56:18 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/03/27/from-blogspot-to-hexo/</guid>
      <description>&lt;h2 id=&#34;hexo&#34;&gt;Hexo&lt;/h2&gt;
&lt;p&gt;Перешёл на &lt;a href=&#34;https://hexo.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;hexo&lt;/a&gt;. Дополнительно решил перенести свои заметки с &lt;a href=&#34;http://yamadharma.blogspot.ru/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;blogspot&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Установил пакет для миграции:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install hexo-migrator-blogger --save
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Подправил файл миграции
(&lt;code&gt;node_modules/hexo-migrator-blogger/lib/migrate.js&lt;/code&gt;), чтобы
нормальные названия файлов были:
{% codeblock lang:patch %}
&amp;mdash; migrate.js.old      2016-09-24 10:02:27.000000000 +0300
+++ migrate.js  2018-03-27 15:23:52.475311505 +0300
@@ -11,17 +11,19 @@ module.exports = function(source, target
var posts = JSON.parse(body).feed.entry;
async.each(posts, function(item, cb) {
var title = item.title[&amp;rsquo;$t&amp;rsquo;];&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;       var file = title.replace(/\s/g,&#39;-&#39;).replace(/[^A-z 0-9 -]/g,&#39;&#39;);
       var published = item.published[&#39;$t&#39;];
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;       var file = moment(published).format(&#39;YYYY-MM-DD&#39;) + &#39;-&#39; + title;
       var tags = &#39;&#39;;
       if (item.category) {
           tags = item.category.map(prop(&#39;term&#39;));
       }
       var header = [
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;           &#39;title: |&#39;,
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;           &#39;\t&#39; +  title,
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;          &#39;layout: post&#39;,
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;           &#39;title: &#39; + &#39;\&amp;quot;&#39; + title + &#39;\&amp;quot;&#39;,
           &#39;date: &#39; + moment(published).format(&#39;YYYY-MM-DD HH:mm:ss&#39;),
           &#39;tags: [&#39; + tags + &#39;]&#39;,
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;          &#39;categories: blog&#39;,
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;          &#39;lang: ru&#39;,
           &#39;---&#39;,
       ];
       var content = item.content[&#39;$t&#39;];
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Запустил миграцию:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo migrate blogger &amp;quot;http://yamadharma.blogspot.ru/feeds/posts/default?alt=json&amp;amp;max-results=10000&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Почистил получившиеся файлы:
{% codeblock lang:bash %}
#!/bin/bash&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;name-clean&#34;&gt;name: clean&lt;/h1&gt;
&lt;p&gt;for i in &lt;em&gt;.md
do
sed -i -e &amp;ldquo;s:&lt;/div&gt;::g&amp;rdquo; &lt;br&gt;
-e &amp;ldquo;s:&amp;lt;div.&lt;/em&gt;&amp;gt;::g&amp;rdquo; &lt;br&gt;
&amp;ldquo;$i&amp;rdquo;
done
{% endcodeblock %}&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Сделал транслит названий:
{% codeblock lang:bash %}
#!/bin/bash&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;name-translit&#34;&gt;name: translit&lt;/h1&gt;
&lt;h1 id=&#34;перекодирует-рекурсивно-в-текущем-каталоге-имена&#34;&gt;Перекодирует рекурсивно в текущем каталоге имена&lt;/h1&gt;
&lt;h1 id=&#34;файлов-и-каталогов-в-транслит&#34;&gt;файлов и каталогов в транслит.&lt;/h1&gt;
&lt;h1 id=&#34;успенский-в-а-к-проблеме-транслитерации-русских-текстов-латинскими-буквами&#34;&gt;Успенский В. А. К проблеме транслитерации русских текстов латинскими буквами&lt;/h1&gt;
&lt;h1 id=&#34;httplingvoforumnetindexphptopic357580&#34;&gt;&lt;a href=&#34;http://lingvoforum.net/index.php?topic=35758.0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://lingvoforum.net/index.php?topic=35758.0&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;shopt -s nullglob
for NAME in *
do
TRS=&lt;code&gt;echo $NAME | sed &amp;quot;y/абвгдезиклмнопрстуфц/abvgdeziklmnoprstufc/&amp;quot;&lt;/code&gt;
TRS=&lt;code&gt;echo $TRS | sed &amp;quot;y/АБВГДЕЗИКЛМНОПРСТУФЦ/ABVGDEZIKLMNOPRSTUFC/&amp;quot;&lt;/code&gt;
TRS=${TRS//х/kh} TRS=${TRS//Х/KH};
TRS=${TRS//ч/ch} TRS=${TRS//Ч/CH};
TRS=${TRS//ш/sh} TRS=${TRS//Ш/SH};
TRS=${TRS//ё/yo} TRS=${TRS//Ё/YO};
TRS=${TRS//ж/zh} TRS=${TRS//Ж/ZH};
TRS=${TRS//щ/th} TRS=${TRS//Щ/TH};
TRS=${TRS//э/eh} TRS=${TRS//Э/EH};
TRS=${TRS//ю/yu} TRS=${TRS//Ю/YU};
TRS=${TRS//я/ya} TRS=${TRS//Я/YA};
TRS=${TRS//й/yj} TRS=${TRS//Й/yj};
TRS=${TRS//ъ/jh} TRS=${TRS//Ъ/JH};
TRS=${TRS//ь/j} TRS=${TRS//Ь/J};
TRS=${TRS//ы/ih} TRS=${TRS//Ы/IH};&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;TRS=${TRS// /_};

if [[ -d &amp;quot;$NAME&amp;quot; ]]
then
mv -v &amp;quot;$NAME&amp;quot; &amp;quot;$TRS&amp;quot;
cd &amp;quot;$TRS&amp;quot;
&amp;quot;$0&amp;quot;
cd ..
else
mv -v &amp;quot;$NAME&amp;quot; &amp;quot;$TRS&amp;quot;
fi
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;done
{% endcodeblock %}&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Мартьянов А. Л. - Прогулки по Средневековью</title>
      <link>https://yamadharma.github.io/ru/post/2018/01/03/progulki-po-srednevekovjyu/</link>
      <pubDate>Wed, 03 Jan 2018 19:03:00 +0000</pubDate>
      <guid>https://yamadharma.github.io/ru/post/2018/01/03/progulki-po-srednevekovjyu/</guid>
      <description>&lt;h2 id=&#34;мартьянов-а-л---прогулки-по-средневековью&#34;&gt;Мартьянов А. Л. - Прогулки по Средневековью&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://libgen.li/book/index.php?md5=549f91d6196d6315df30f1f60a5a44c7&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://libgen.li/book/index.php?md5=549f91d6196d6315df30f1f60a5a44c7&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Серия зарисовок по средневековью.&lt;/li&gt;
&lt;li&gt;Вернее так: Столетняя война и немного до неё.&lt;/li&gt;
&lt;li&gt;Впрочем, учитывая то, что автор распространяет временные границы Столетней войны до Алиеноры Аквитанской, то просто: Столетняя война.&lt;/li&gt;
&lt;li&gt;Автор находится на вполне марксистских позициях.&lt;/li&gt;
&lt;li&gt;Книга научно-популярная. Читается крайне легко.&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
  </channel>
</rss>
